function hex_md5(s){return binl2hex(core_md5(str2binl(s),s.length*chrsz))}function b64_md5(s){return binl2b64(core_md5(str2binl(s),s.length*chrsz))}function str_md5(s){return binl2str(core_md5(str2binl(s),s.length*chrsz))}function hex_hmac_md5(key,data){return binl2hex(core_hmac_md5(key,data))}function b64_hmac_md5(key,data){return binl2b64(core_hmac_md5(key,data))}function str_hmac_md5(key,data){return binl2str(core_hmac_md5(key,data))}function md5_vm_test(){return"900150983cd24fb0d6963f7d28e17f72"==hex_md5("abc")}function core_md5(x,len){x[len>>5]|=128<<len%32,x[14+(len+64>>>9<<4)]=len;for(var a=1732584193,b=-271733879,c=-1732584194,d=271733878,i=0;i<x.length;i+=16){var olda=a,oldb=b,oldc=c,oldd=d;b=md5_ii(b=md5_ii(b=md5_ii(b=md5_ii(b=md5_hh(b=md5_hh(b=md5_hh(b=md5_hh(b=md5_gg(b=md5_gg(b=md5_gg(b=md5_gg(b=md5_ff(b=md5_ff(b=md5_ff(b=md5_ff(b,c=md5_ff(c,d=md5_ff(d,a=md5_ff(a,b,c,d,x[i+0],7,-680876936),b,c,x[i+1],12,-389564586),a,b,x[i+2],17,606105819),d,a,x[i+3],22,-1044525330),c=md5_ff(c,d=md5_ff(d,a=md5_ff(a,b,c,d,x[i+4],7,-176418897),b,c,x[i+5],12,1200080426),a,b,x[i+6],17,-1473231341),d,a,x[i+7],22,-45705983),c=md5_ff(c,d=md5_ff(d,a=md5_ff(a,b,c,d,x[i+8],7,1770035416),b,c,x[i+9],12,-1958414417),a,b,x[i+10],17,-42063),d,a,x[i+11],22,-1990404162),c=md5_ff(c,d=md5_ff(d,a=md5_ff(a,b,c,d,x[i+12],7,1804603682),b,c,x[i+13],12,-40341101),a,b,x[i+14],17,-1502002290),d,a,x[i+15],22,1236535329),c=md5_gg(c,d=md5_gg(d,a=md5_gg(a,b,c,d,x[i+1],5,-165796510),b,c,x[i+6],9,-1069501632),a,b,x[i+11],14,643717713),d,a,x[i+0],20,-373897302),c=md5_gg(c,d=md5_gg(d,a=md5_gg(a,b,c,d,x[i+5],5,-701558691),b,c,x[i+10],9,38016083),a,b,x[i+15],14,-660478335),d,a,x[i+4],20,-405537848),c=md5_gg(c,d=md5_gg(d,a=md5_gg(a,b,c,d,x[i+9],5,568446438),b,c,x[i+14],9,-1019803690),a,b,x[i+3],14,-187363961),d,a,x[i+8],20,1163531501),c=md5_gg(c,d=md5_gg(d,a=md5_gg(a,b,c,d,x[i+13],5,-1444681467),b,c,x[i+2],9,-51403784),a,b,x[i+7],14,1735328473),d,a,x[i+12],20,-1926607734),c=md5_hh(c,d=md5_hh(d,a=md5_hh(a,b,c,d,x[i+5],4,-378558),b,c,x[i+8],11,-2022574463),a,b,x[i+11],16,1839030562),d,a,x[i+14],23,-35309556),c=md5_hh(c,d=md5_hh(d,a=md5_hh(a,b,c,d,x[i+1],4,-1530992060),b,c,x[i+4],11,1272893353),a,b,x[i+7],16,-155497632),d,a,x[i+10],23,-1094730640),c=md5_hh(c,d=md5_hh(d,a=md5_hh(a,b,c,d,x[i+13],4,681279174),b,c,x[i+0],11,-358537222),a,b,x[i+3],16,-722521979),d,a,x[i+6],23,76029189),c=md5_hh(c,d=md5_hh(d,a=md5_hh(a,b,c,d,x[i+9],4,-640364487),b,c,x[i+12],11,-421815835),a,b,x[i+15],16,530742520),d,a,x[i+2],23,-995338651),c=md5_ii(c,d=md5_ii(d,a=md5_ii(a,b,c,d,x[i+0],6,-198630844),b,c,x[i+7],10,1126891415),a,b,x[i+14],15,-1416354905),d,a,x[i+5],21,-57434055),c=md5_ii(c,d=md5_ii(d,a=md5_ii(a,b,c,d,x[i+12],6,1700485571),b,c,x[i+3],10,-1894986606),a,b,x[i+10],15,-1051523),d,a,x[i+1],21,-2054922799),c=md5_ii(c,d=md5_ii(d,a=md5_ii(a,b,c,d,x[i+8],6,1873313359),b,c,x[i+15],10,-30611744),a,b,x[i+6],15,-1560198380),d,a,x[i+13],21,1309151649),c=md5_ii(c,d=md5_ii(d,a=md5_ii(a,b,c,d,x[i+4],6,-145523070),b,c,x[i+11],10,-1120210379),a,b,x[i+2],15,718787259),d,a,x[i+9],21,-343485551),a=safe_add(a,olda),b=safe_add(b,oldb),c=safe_add(c,oldc),d=safe_add(d,oldd)}return Array(a,b,c,d)}function md5_cmn(q,a,b,x,s,t){return safe_add(bit_rol(safe_add(safe_add(a,q),safe_add(x,t)),s),b)}function md5_ff(a,b,c,d,x,s,t){return md5_cmn(b&c|~b&d,a,b,x,s,t)}function md5_gg(a,b,c,d,x,s,t){return md5_cmn(b&d|c&~d,a,b,x,s,t)}function md5_hh(a,b,c,d,x,s,t){return md5_cmn(b^c^d,a,b,x,s,t)}function md5_ii(a,b,c,d,x,s,t){return md5_cmn(c^(b|~d),a,b,x,s,t)}function core_hmac_md5(key,data){var bkey=str2binl(key);bkey.length>16&&(bkey=core_md5(bkey,key.length*chrsz));for(var ipad=Array(16),opad=Array(16),i=0;i<16;i++)ipad[i]=909522486^bkey[i],opad[i]=1549556828^bkey[i];var hash=core_md5(ipad.concat(str2binl(data)),512+data.length*chrsz);return core_md5(opad.concat(hash),640)}function safe_add(x,y){var lsw=(65535&x)+(65535&y);return(x>>16)+(y>>16)+(lsw>>16)<<16|65535&lsw}function bit_rol(num,cnt){return num<<cnt|num>>>32-cnt}function str2binl(str){for(var bin=Array(),mask=(1<<chrsz)-1,i=0;i<str.length*chrsz;i+=chrsz)bin[i>>5]|=(str.charCodeAt(i/chrsz)&mask)<<i%32;return bin}function binl2str(bin){for(var str="",mask=(1<<chrsz)-1,i=0;i<32*bin.length;i+=chrsz)str+=String.fromCharCode(bin[i>>5]>>>i%32&mask);return str}function binl2hex(binarray){for(var hex_tab=hexcase?"0123456789ABCDEF":"0123456789abcdef",str="",i=0;i<4*binarray.length;i++)str+=hex_tab.charAt(binarray[i>>2]>>i%4*8+4&15)+hex_tab.charAt(binarray[i>>2]>>i%4*8&15);return str}function binl2b64(binarray){for(var str="",i=0;i<4*binarray.length;i+=3)for(var triplet=(binarray[i>>2]>>i%4*8&255)<<16|(binarray[i+1>>2]>>(i+1)%4*8&255)<<8|binarray[i+2>>2]>>(i+2)%4*8&255,j=0;j<4;j++)8*i+6*j>32*binarray.length?str+=b64pad:str+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(triplet>>6*(3-j)&63);return str}!function(gbx){var requirejs,require,define,queue;!function(global){function commentReplace(match,multi,multiText,singlePrefix){return singlePrefix||""}function isFunction(it){return"[object Function]"===ostring.call(it)}function isArray(it){return"[object Array]"===ostring.call(it)}function each(ary,func){if(ary){var i;for(i=0;i<ary.length&&(!ary[i]||!func(ary[i],i,ary));i+=1);}}function eachReverse(ary,func){if(ary){var i;for(i=ary.length-1;i>-1&&(!ary[i]||!func(ary[i],i,ary));i-=1);}}function hasProp(obj,prop){return hasOwn.call(obj,prop)}function getOwn(obj,prop){return hasProp(obj,prop)&&obj[prop]}function eachProp(obj,func){var prop;for(prop in obj)if(hasProp(obj,prop)&&func(obj[prop],prop))break}function mixin(target,source,force,deepStringMixin){return source&&eachProp(source,function(value,prop){!force&&hasProp(target,prop)||(!deepStringMixin||"object"!=typeof value||!value||isArray(value)||isFunction(value)||value instanceof RegExp?target[prop]=value:(target[prop]||(target[prop]={}),mixin(target[prop],value,force,deepStringMixin)))}),target}function bind(obj,fn){return function(){return fn.apply(obj,arguments)}}function scripts(){return document.getElementsByTagName("script")}function defaultOnError(err){throw err}function getGlobal(value){if(!value)return value;var g=global;return each(value.split("."),function(part){g=g[part]}),g}function makeError(id,msg,err,requireModules){var e=new Error(msg+"\nhttp://requirejs.org/docs/errors.html#"+id);return e.requireType=id,e.requireModules=requireModules,err&&(e.originalError=err),e}function newContext(contextName){function trimDots(ary){var i,part;for(i=0;i<ary.length;i++)if("."===(part=ary[i]))ary.splice(i,1),i-=1;else if(".."===part){if(0===i||1===i&&".."===ary[2]||".."===ary[i-1])continue;i>0&&(ary.splice(i-1,2),i-=2)}}function normalize(name,baseName,applyMap){var mapValue,nameParts,i,j,nameSegment,lastIndex,foundMap,foundI,foundStarMap,starI,baseParts=baseName&&baseName.split("/"),map=config.map,starMap=map&&map["*"];if(name&&(lastIndex=(name=name.split("/")).length-1,config.nodeIdCompat&&jsSuffixRegExp.test(name[lastIndex])&&(name[lastIndex]=name[lastIndex].replace(jsSuffixRegExp,"")),"."===name[0].charAt(0)&&baseParts&&(name=baseParts.slice(0,baseParts.length-1).concat(name)),trimDots(name),name=name.join("/")),applyMap&&map&&(baseParts||starMap)){outerLoop:for(i=(nameParts=name.split("/")).length;i>0;i-=1){if(nameSegment=nameParts.slice(0,i).join("/"),baseParts)for(j=baseParts.length;j>0;j-=1)if((mapValue=getOwn(map,baseParts.slice(0,j).join("/")))&&(mapValue=getOwn(mapValue,nameSegment))){foundMap=mapValue,foundI=i;break outerLoop}!foundStarMap&&starMap&&getOwn(starMap,nameSegment)&&(foundStarMap=getOwn(starMap,nameSegment),starI=i)}!foundMap&&foundStarMap&&(foundMap=foundStarMap,foundI=starI),foundMap&&(nameParts.splice(0,foundI,foundMap),name=nameParts.join("/"))}return getOwn(config.pkgs,name)||name}function removeScript(name){isBrowser&&each(scripts(),function(scriptNode){if(scriptNode.getAttribute("data-requiremodule")===name&&scriptNode.getAttribute("data-requirecontext")===context.contextName)return scriptNode.parentNode.removeChild(scriptNode),!0})}function hasPathFallback(id){var pathConfig=getOwn(config.paths,id);if(pathConfig&&isArray(pathConfig)&&pathConfig.length>1)return pathConfig.shift(),context.require.undef(id),context.makeRequire(null,{skipMap:!0})([id]),!0}function splitPrefix(name){var prefix,index=name?name.indexOf("!"):-1;return index>-1&&(prefix=name.substring(0,index),name=name.substring(index+1,name.length)),[prefix,name]}function makeModuleMap(name,parentModuleMap,isNormalized,applyMap){var url,pluginModule,suffix,nameParts,prefix=null,parentName=parentModuleMap?parentModuleMap.name:null,originalName=name,isDefine=!0,normalizedName="";return name||(isDefine=!1,name="_@r"+(requireCounter+=1)),nameParts=splitPrefix(name),prefix=nameParts[0],name=nameParts[1],prefix&&(prefix=normalize(prefix,parentName,applyMap),pluginModule=getOwn(defined,prefix)),name&&(prefix?normalizedName=pluginModule&&pluginModule.normalize?pluginModule.normalize(name,function(name){return normalize(name,parentName,applyMap)}):-1===name.indexOf("!")?normalize(name,parentName,applyMap):name:(prefix=(nameParts=splitPrefix(normalizedName=normalize(name,parentName,applyMap)))[0],normalizedName=nameParts[1],isNormalized=!0,url=context.nameToUrl(normalizedName))),suffix=!prefix||pluginModule||isNormalized?"":"_unnormalized"+(unnormalizedCounter+=1),{prefix:prefix,name:normalizedName,parentMap:parentModuleMap,unnormalized:!!suffix,url:url,originalName:originalName,isDefine:isDefine,id:(prefix?prefix+"!"+normalizedName:normalizedName)+suffix}}function getModule(depMap){var id=depMap.id,mod=getOwn(registry,id);return mod||(mod=registry[id]=new context.Module(depMap)),mod}function on(depMap,name,fn){var id=depMap.id,mod=getOwn(registry,id);!hasProp(defined,id)||mod&&!mod.defineEmitComplete?(mod=getModule(depMap)).error&&"error"===name?fn(mod.error):mod.on(name,fn):"defined"===name&&fn(defined[id])}function onError(err,errback){var ids=err.requireModules,notified=!1;errback?errback(err):(each(ids,function(id){var mod=getOwn(registry,id);mod&&(mod.error=err,mod.events.error&&(notified=!0,mod.emit("error",err)))}),notified||req.onError(err))}function takeGlobalQueue(){globalDefQueue.length&&(each(globalDefQueue,function(queueItem){var id=queueItem[0];"string"==typeof id&&(context.defQueueMap[id]=!0),defQueue.push(queueItem)}),globalDefQueue=[])}function cleanRegistry(id){delete registry[id],delete enabledRegistry[id]}function breakCycle(mod,traced,processed){var id=mod.map.id;mod.error?mod.emit("error",mod.error):(traced[id]=!0,each(mod.depMaps,function(depMap,i){var depId=depMap.id,dep=getOwn(registry,depId);!dep||mod.depMatched[i]||processed[depId]||(getOwn(traced,depId)?(mod.defineDep(i,defined[depId]),mod.check()):breakCycle(dep,traced,processed))}),processed[id]=!0)}function checkLoaded(){var err,usingPathFallback,waitInterval=1e3*config.waitSeconds,expired=waitInterval&&context.startTime+waitInterval<(new Date).getTime(),noLoads=[],reqCalls=[],stillLoading=!1,needCycleCheck=!0;if(!inCheckLoaded){if(inCheckLoaded=!0,eachProp(enabledRegistry,function(mod){var map=mod.map,modId=map.id;if(mod.enabled&&(map.isDefine||reqCalls.push(mod),!mod.error))if(!mod.inited&&expired)hasPathFallback(modId)?(usingPathFallback=!0,stillLoading=!0):(noLoads.push(modId),removeScript(modId));else if(!mod.inited&&mod.fetched&&map.isDefine&&(stillLoading=!0,!map.prefix))return needCycleCheck=!1}),expired&&noLoads.length)return err=makeError("timeout","Load timeout for modules: "+noLoads,null,noLoads),err.contextName=context.contextName,onError(err);needCycleCheck&&each(reqCalls,function(mod){breakCycle(mod,{},{})}),expired&&!usingPathFallback||!stillLoading||!isBrowser&&!isWebWorker||checkLoadedTimeoutId||(checkLoadedTimeoutId=setTimeout(function(){checkLoadedTimeoutId=0,checkLoaded()},50)),inCheckLoaded=!1}}function callGetModule(args){hasProp(defined,args[0])||getModule(makeModuleMap(args[0],null,!0)).init(args[1],args[2])}function removeListener(node,func,name,ieName){node.detachEvent&&!isOpera?ieName&&node.detachEvent(ieName,func):node.removeEventListener(name,func,!1)}function getScriptData(evt){var node=evt.currentTarget||evt.srcElement;return removeListener(node,context.onScriptLoad,"load","onreadystatechange"),removeListener(node,context.onScriptError,"error"),{node:node,id:node&&node.getAttribute("data-requiremodule")}}function intakeDefines(){var args;for(takeGlobalQueue();defQueue.length;){if(null===(args=defQueue.shift())[0])return onError(makeError("mismatch","Mismatched anonymous define() module: "+args[args.length-1]));callGetModule(args)}context.defQueueMap={}}var inCheckLoaded,Module,context,handlers,checkLoadedTimeoutId,config={waitSeconds:7,baseUrl:"./",paths:{},bundles:{},pkgs:{},shim:{},config:{}},registry={},enabledRegistry={},undefEvents={},defQueue=[],defined={},urlFetched={},bundlesMap={},requireCounter=1,unnormalizedCounter=1;return handlers={require:function(mod){return mod.require?mod.require:mod.require=context.makeRequire(mod.map)},exports:function(mod){if(mod.usingExports=!0,mod.map.isDefine)return mod.exports?defined[mod.map.id]=mod.exports:mod.exports=defined[mod.map.id]={}},module:function(mod){return mod.module?mod.module:mod.module={id:mod.map.id,uri:mod.map.url,config:function(){return getOwn(config.config,mod.map.id)||{}},exports:mod.exports||(mod.exports={})}}},Module=function(map){this.events=getOwn(undefEvents,map.id)||{},this.map=map,this.shim=getOwn(config.shim,map.id),this.depExports=[],this.depMaps=[],this.depMatched=[],this.pluginMaps={},this.depCount=0},Module.prototype={init:function(depMaps,factory,errback,options){options=options||{},this.inited||(this.factory=factory,errback?this.on("error",errback):this.events.error&&(errback=bind(this,function(err){this.emit("error",err)})),this.depMaps=depMaps&&depMaps.slice(0),this.errback=errback,this.inited=!0,this.ignore=options.ignore,options.enabled||this.enabled?this.enable():this.check())},defineDep:function(i,depExports){this.depMatched[i]||(this.depMatched[i]=!0,this.depCount-=1,this.depExports[i]=depExports)},fetch:function(){if(!this.fetched){this.fetched=!0,context.startTime=(new Date).getTime();var map=this.map;if(!this.shim)return map.prefix?this.callPlugin():this.load();context.makeRequire(this.map,{enableBuildCallback:!0})(this.shim.deps||[],bind(this,function(){return map.prefix?this.callPlugin():this.load()}))}},load:function(){var url=this.map.url;urlFetched[url]||(urlFetched[url]=!0,context.load(this.map.id,url))},check:function(){if(this.enabled&&!this.enabling){var err,cjsModule,id=this.map.id,depExports=this.depExports,exports=this.exports,factory=this.factory;if(this.inited){if(this.error)this.emit("error",this.error);else if(!this.defining){if(this.defining=!0,this.depCount<1&&!this.defined){if(isFunction(factory)){if(this.events.error&&this.map.isDefine||req.onError!==defaultOnError)try{exports=context.execCb(id,factory,depExports,exports)}catch(e){err=e}else exports=context.execCb(id,factory,depExports,exports);if(this.map.isDefine&&void 0===exports&&((cjsModule=this.module)?exports=cjsModule.exports:this.usingExports&&(exports=this.exports)),err)return err.requireMap=this.map,err.requireModules=this.map.isDefine?[this.map.id]:null,err.requireType=this.map.isDefine?"define":"require",onError(this.error=err)}else exports=factory;if(this.exports=exports,this.map.isDefine&&!this.ignore&&(defined[id]=exports,req.onResourceLoad)){var resLoadMaps=[];each(this.depMaps,function(depMap){resLoadMaps.push(depMap.normalizedMap||depMap)}),req.onResourceLoad(context,this.map,resLoadMaps)}cleanRegistry(id),this.defined=!0}this.defining=!1,this.defined&&!this.defineEmitted&&(this.defineEmitted=!0,this.emit("defined",this.exports),this.defineEmitComplete=!0)}}else hasProp(context.defQueueMap,id)||this.fetch()}},callPlugin:function(){var map=this.map,id=map.id,pluginMap=makeModuleMap(map.prefix);this.depMaps.push(pluginMap),on(pluginMap,"defined",bind(this,function(plugin){var load,normalizedMap,normalizedMod,bundleId=getOwn(bundlesMap,this.map.id),name=this.map.name,parentName=this.map.parentMap?this.map.parentMap.name:null,localRequire=context.makeRequire(map.parentMap,{enableBuildCallback:!0});return this.map.unnormalized?(plugin.normalize&&(name=plugin.normalize(name,function(name){return normalize(name,parentName,!0)})||""),normalizedMap=makeModuleMap(map.prefix+"!"+name,this.map.parentMap),on(normalizedMap,"defined",bind(this,function(value){this.map.normalizedMap=normalizedMap,this.init([],function(){return value},null,{enabled:!0,ignore:!0})})),void((normalizedMod=getOwn(registry,normalizedMap.id))&&(this.depMaps.push(normalizedMap),this.events.error&&normalizedMod.on("error",bind(this,function(err){this.emit("error",err)})),normalizedMod.enable()))):bundleId?(this.map.url=context.nameToUrl(bundleId),void this.load()):((load=bind(this,function(value){this.init([],function(){return value},null,{enabled:!0})})).error=bind(this,function(err){this.inited=!0,this.error=err,err.requireModules=[id],eachProp(registry,function(mod){0===mod.map.id.indexOf(id+"_unnormalized")&&cleanRegistry(mod.map.id)}),onError(err)}),load.fromText=bind(this,function(text,textAlt){var moduleName=map.name,moduleMap=makeModuleMap(moduleName),hasInteractive=useInteractive;textAlt&&(text=textAlt),hasInteractive&&(useInteractive=!1),getModule(moduleMap),hasProp(config.config,id)&&(config.config[moduleName]=config.config[id]);try{req.exec(text)}catch(e){return onError(makeError("fromtexteval","fromText eval for "+id+" failed: "+e,e,[id]))}hasInteractive&&(useInteractive=!0),this.depMaps.push(moduleMap),context.completeLoad(moduleName),localRequire([moduleName],load)}),void plugin.load(map.name,localRequire,load,config))})),context.enable(pluginMap,this),this.pluginMaps[pluginMap.id]=pluginMap},enable:function(){enabledRegistry[this.map.id]=this,this.enabled=!0,this.enabling=!0,each(this.depMaps,bind(this,function(depMap,i){var id,mod,handler;if("string"==typeof depMap){if(depMap=makeModuleMap(depMap,this.map.isDefine?this.map:this.map.parentMap,!1,!this.skipMap),this.depMaps[i]=depMap,handler=getOwn(handlers,depMap.id))return void(this.depExports[i]=handler(this));this.depCount+=1,on(depMap,"defined",bind(this,function(depExports){this.undefed||(this.defineDep(i,depExports),this.check())})),this.errback?on(depMap,"error",bind(this,this.errback)):this.events.error&&on(depMap,"error",bind(this,function(err){this.emit("error",err)}))}id=depMap.id,mod=registry[id],hasProp(handlers,id)||!mod||mod.enabled||context.enable(depMap,this)})),eachProp(this.pluginMaps,bind(this,function(pluginMap){var mod=getOwn(registry,pluginMap.id);mod&&!mod.enabled&&context.enable(pluginMap,this)})),this.enabling=!1,this.check()},on:function(name,cb){var cbs=this.events[name];cbs||(cbs=this.events[name]=[]),cbs.push(cb)},emit:function(name,evt){each(this.events[name],function(cb){cb(evt)}),"error"===name&&delete this.events[name]}},context={config:config,contextName:contextName,registry:registry,defined:defined,urlFetched:urlFetched,defQueue:defQueue,defQueueMap:{},Module:Module,makeModuleMap:makeModuleMap,nextTick:req.nextTick,onError:onError,configure:function(cfg){if(cfg.baseUrl&&"/"!==cfg.baseUrl.charAt(cfg.baseUrl.length-1)&&(cfg.baseUrl+="/"),"string"==typeof cfg.urlArgs){var urlArgs=cfg.urlArgs;cfg.urlArgs=function(id,url){return(-1===url.indexOf("?")?"?":"&")+urlArgs}}var shim=config.shim,objs={paths:!0,bundles:!0,config:!0,map:!0};eachProp(cfg,function(value,prop){objs[prop]?(config[prop]||(config[prop]={}),mixin(config[prop],value,!0,!0)):config[prop]=value}),cfg.bundles&&eachProp(cfg.bundles,function(value,prop){each(value,function(v){v!==prop&&(bundlesMap[v]=prop)})}),cfg.shim&&(eachProp(cfg.shim,function(value,id){isArray(value)&&(value={deps:value}),!value.exports&&!value.init||value.exportsFn||(value.exportsFn=context.makeShimExports(value)),shim[id]=value}),config.shim=shim),cfg.packages&&each(cfg.packages,function(pkgObj){var name;name=(pkgObj="string"==typeof pkgObj?{name:pkgObj}:pkgObj).name,pkgObj.location&&(config.paths[name]=pkgObj.location),config.pkgs[name]=pkgObj.name+"/"+(pkgObj.main||"main").replace(currDirRegExp,"").replace(jsSuffixRegExp,"")}),eachProp(registry,function(mod,id){mod.inited||mod.map.unnormalized||(mod.map=makeModuleMap(id,null,!0))}),(cfg.deps||cfg.callback)&&context.require(cfg.deps||[],cfg.callback)},makeShimExports:function(value){function fn(){var ret;return value.init&&(ret=value.init.apply(global,arguments)),ret||value.exports&&getGlobal(value.exports)}return fn},makeRequire:function(relMap,options){function localRequire(deps,callback,errback){var id,map,requireMod;return options.enableBuildCallback&&callback&&isFunction(callback)&&(callback.__requireJsBuild=!0),"string"==typeof deps?isFunction(callback)?onError(makeError("requireargs","Invalid require call"),errback):relMap&&hasProp(handlers,deps)?handlers[deps](registry[relMap.id]):req.get?req.get(context,deps,relMap,localRequire):(map=makeModuleMap(deps,relMap,!1,!0),id=map.id,hasProp(defined,id)?defined[id]:onError(makeError("notloaded",'Module name "'+id+'" has not been loaded yet for context: '+contextName+(relMap?"":". Use require([])")))):(intakeDefines(),context.nextTick(function(){intakeDefines(),(requireMod=getModule(makeModuleMap(null,relMap))).skipMap=options.skipMap,requireMod.init(deps,callback,errback,{enabled:!0}),checkLoaded()}),localRequire)}return options=options||{},mixin(localRequire,{isBrowser:isBrowser,toUrl:function(moduleNamePlusExt){var ext,index=moduleNamePlusExt.lastIndexOf("."),segment=moduleNamePlusExt.split("/")[0],isRelative="."===segment||".."===segment;return-1!==index&&(!isRelative||index>1)&&(ext=moduleNamePlusExt.substring(index,moduleNamePlusExt.length),moduleNamePlusExt=moduleNamePlusExt.substring(0,index)),context.nameToUrl(normalize(moduleNamePlusExt,relMap&&relMap.id,!0),ext,!0)},defined:function(id){return hasProp(defined,makeModuleMap(id,relMap,!1,!0).id)},specified:function(id){return id=makeModuleMap(id,relMap,!1,!0).id,hasProp(defined,id)||hasProp(registry,id)}}),relMap||(localRequire.undef=function(id){takeGlobalQueue();var map=makeModuleMap(id,relMap,!0),mod=getOwn(registry,id);mod.undefed=!0,removeScript(id),delete defined[id],delete urlFetched[map.url],delete undefEvents[id],eachReverse(defQueue,function(args,i){args[0]===id&&defQueue.splice(i,1)}),delete context.defQueueMap[id],mod&&(mod.events.defined&&(undefEvents[id]=mod.events),cleanRegistry(id))}),localRequire},enable:function(depMap){getOwn(registry,depMap.id)&&getModule(depMap).enable()},completeLoad:function(moduleName){var found,args,mod,shim=getOwn(config.shim,moduleName)||{},shExports=shim.exports;for(takeGlobalQueue();defQueue.length;){if(null===(args=defQueue.shift())[0]){if(args[0]=moduleName,found)break;found=!0}else args[0]===moduleName&&(found=!0);callGetModule(args)}if(context.defQueueMap={},mod=getOwn(registry,moduleName),!found&&!hasProp(defined,moduleName)&&mod&&!mod.inited){if(!(!config.enforceDefine||shExports&&getGlobal(shExports)))return hasPathFallback(moduleName)?void 0:onError(makeError("nodefine","No define call for "+moduleName,null,[moduleName]));callGetModule([moduleName,shim.deps||[],shim.exportsFn])}checkLoaded()},nameToUrl:function(moduleName,ext,skipExt){var paths,syms,i,parentModule,url,parentPath,bundleId,pkgMain=getOwn(config.pkgs,moduleName);if(pkgMain&&(moduleName=pkgMain),bundleId=getOwn(bundlesMap,moduleName))return context.nameToUrl(bundleId,ext,skipExt);if(req.jsExtRegExp.test(moduleName))url=moduleName+(ext||"");else{for(paths=config.paths,i=(syms=moduleName.split("/")).length;i>0;i-=1)if(parentModule=syms.slice(0,i).join("/"),parentPath=getOwn(paths,parentModule)){isArray(parentPath)&&(parentPath=parentPath[0]),syms.splice(0,i,parentPath);break}url=syms.join("/"),url=("/"===(url+=ext||(/^data\:|^blob\:|\?/.test(url)||skipExt?"":".js")).charAt(0)||url.match(/^[\w\+\.\-]+:/)?"":config.baseUrl)+url}return config.urlArgs&&!/^blob\:/.test(url)?url+config.urlArgs(moduleName,url):url},load:function(id,url){req.load(context,id,url)},execCb:function(name,callback,args,exports){return callback.apply(exports,args)},onScriptLoad:function(evt){if("load"===evt.type||readyRegExp.test((evt.currentTarget||evt.srcElement).readyState)){interactiveScript=null;var data=getScriptData(evt);context.completeLoad(data.id)}},onScriptError:function(evt){var data=getScriptData(evt);if(!hasPathFallback(data.id)){var parents=[];return eachProp(registry,function(value,key){0!==key.indexOf("_@r")&&each(value.depMaps,function(depMap){if(depMap.id===data.id)return parents.push(key),!0})}),onError(makeError("scripterror",'Script error for "'+data.id+(parents.length?'", needed by: '+parents.join(", "):'"'),evt,[data.id]))}}},context.require=context.makeRequire(),context}function getInteractiveScript(){return interactiveScript&&"interactive"===interactiveScript.readyState?interactiveScript:(eachReverse(scripts(),function(script){if("interactive"===script.readyState)return interactiveScript=script}),interactiveScript)}var req,s,head,baseElement,dataMain,src,interactiveScript,currentlyAddingScript,mainScript,subPath,version="2.2.0",commentRegExp=/(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,cjsRequireRegExp=/[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,jsSuffixRegExp=/\.js$/,currDirRegExp=/^\.\//,op=Object.prototype,ostring=op.toString,hasOwn=op.hasOwnProperty,isBrowser=!(void 0===window||"undefined"==typeof navigator||!window.document),isWebWorker=!isBrowser&&"undefined"!=typeof importScripts,readyRegExp=isBrowser&&"PLAYSTATION 3"===navigator.platform?/^complete$/:/^(complete|loaded)$/,defContextName="_",isOpera="undefined"!=typeof opera&&"[object Opera]"===opera.toString(),contexts={},cfg={},globalDefQueue=[],useInteractive=!1;if(void 0===define){if(void 0!==requirejs){if(isFunction(requirejs))return;cfg=requirejs,requirejs=void 0}void 0===require||isFunction(require)||(cfg=require,require=void 0),req=requirejs=function(deps,callback,errback,optional){var context,config,contextName=defContextName;return isArray(deps)||"string"==typeof deps||(config=deps,isArray(callback)?(deps=callback,callback=errback,errback=optional):deps=[]),config&&config.context&&(contextName=config.context),(context=getOwn(contexts,contextName))||(context=contexts[contextName]=req.s.newContext(contextName)),config&&context.configure(config),context.require(deps,callback,errback)},req.config=function(config){return req(config)},req.nextTick="undefined"!=typeof setTimeout?function(fn){setTimeout(fn,4)}:function(fn){fn()},require||(require=req),req.version=version,req.jsExtRegExp=/^\/|:|\?|\.js$/,req.isBrowser=isBrowser,s=req.s={contexts:contexts,newContext:newContext},req({}),each(["toUrl","undef","defined","specified"],function(prop){req[prop]=function(){var ctx=contexts[defContextName];return ctx.require[prop].apply(ctx,arguments)}}),isBrowser&&(head=s.head=document.getElementsByTagName("head")[0],(baseElement=document.getElementsByTagName("base")[0])&&(head=s.head=baseElement.parentNode)),req.onError=defaultOnError,req.createNode=function(config,moduleName,url,async){var node=config.xhtml?document.createElementNS("http://www.w3.org/1999/xhtml","html:script"):document.createElement("script");return node.type=config.scriptType||"text/javascript",node.charset="utf-8",node.async=0!=async,node},req.load=function(context,moduleName,url){var node,config=context&&context.config||{};if(isBrowser)return(node=req.createNode(config,moduleName,url,!/\.js$/.test(moduleName))).setAttribute("data-requirecontext",context.contextName),node.setAttribute("data-requiremodule",moduleName),!node.attachEvent||node.attachEvent.toString&&node.attachEvent.toString().indexOf("[native code")<0||isOpera?(node.addEventListener("load",context.onScriptLoad,!1),node.addEventListener("error",context.onScriptError,!1)):(useInteractive=!0,node.attachEvent("onreadystatechange",context.onScriptLoad)),node.src=url,config.onNodeCreated&&config.onNodeCreated(node,config,moduleName,url),currentlyAddingScript=node,baseElement?head.insertBefore(node,baseElement):head.appendChild(node),currentlyAddingScript=null,node;if(isWebWorker)try{setTimeout(function(){},0),importScripts(url),context.completeLoad(moduleName)}catch(e){context.onError(makeError("importscripts","importScripts failed for "+moduleName+" at "+url,e,[moduleName]))}},isBrowser&&!cfg.skipDataMain&&eachReverse(scripts(),function(script){if(head||(head=script.parentNode),dataMain=script.getAttribute("data-main"))return mainScript=dataMain,cfg.baseUrl||-1!==mainScript.indexOf("!")||(src=mainScript.split("/"),mainScript=src.pop(),subPath=src.length?src.join("/")+"/":"./",cfg.baseUrl=subPath),mainScript=mainScript.replace(jsSuffixRegExp,""),req.jsExtRegExp.test(mainScript)&&(mainScript=dataMain),cfg.deps=cfg.deps?cfg.deps.concat(mainScript):[mainScript],!0}),define=function(name,deps,callback){var node,context;"string"!=typeof name&&(callback=deps,deps=name,name=null),isArray(deps)||(callback=deps,deps=null),!deps&&isFunction(callback)&&(deps=[],callback.length&&(callback.toString().replace(commentRegExp,commentReplace).replace(cjsRequireRegExp,function(match,dep){deps.push(dep)}),deps=(1===callback.length?["require"]:["require","exports","module"]).concat(deps))),useInteractive&&(node=currentlyAddingScript||getInteractiveScript())&&(name||(name=node.getAttribute("data-requiremodule")),context=contexts[node.getAttribute("data-requirecontext")]),context?(context.defQueue.push([name,deps,callback]),context.defQueueMap[name]=!0):globalDefQueue.push([name,deps,callback])},define.amd={jQuery:!0},req.queue=function(deps,callback,modules){deps.length?require([deps.shift()],function(module){void 0==modules&&(modules=[]),modules.push(module),req.queue(deps,callback,modules)}):callback&&isFunction(callback)&&callback.apply(global,modules)},req.exec=function(text){return eval(text)},req(cfg)}}(this),gbx.require=require,gbx.define=define,gbx.log=function(){},gbx.assert=function(){}}(window.gbx=window.gbx||{});var window=window||global,document=document||(window.document={}),Laya=window.Laya=function(window,document){var Laya={__internals:[],__packages:{},__classmap:{Object:Object,Function:Function,Array:Array,String:String},__sysClass:{object:"Object",array:"Array",string:"String",dictionary:"Dictionary"},__propun:{writable:!0,enumerable:!1,configurable:!0},__presubstr:String.prototype.substr,__substr:function(ofs,sz){return 1==arguments.length?Laya.__presubstr.call(this,ofs):Laya.__presubstr.call(this,ofs,sz>0?sz:this.length+sz)},__init:function(_classs){_classs.forEach(function(o){o.__init$&&o.__init$()})},__isClass:function(o){return o&&(o.__isclass||o==Object||o==String||o==Array)},__newvec:function(sz,value){var d=[];d.length=sz;for(var i=0;i<sz;i++)d[i]=value;return d},__extend:function(d,b){function __(){Laya.un(this,"constructor",d)}for(var p in b)if(b.hasOwnProperty(p)){var gs=Object.getOwnPropertyDescriptor(b,p),g=gs.get,s=gs.set;g||s?g&&s?Object.defineProperty(d,p,gs):(g&&Object.defineProperty(d,p,g),s&&Object.defineProperty(d,p,s)):d[p]=b[p]}__.prototype=b.prototype,d.prototype=new __,Laya.un(d.prototype,"__imps",Laya.__copy({},b.prototype.__imps))},__copy:function(dec,src){if(!src)return null;dec=dec||{};for(var i in src)dec[i]=src[i];return dec},__package:function(name,o){if(!Laya.__packages[name]){Laya.__packages[name]=!0;var p=window,strs=name.split(".");if(strs.length>1)for(var i=0,sz=strs.length-1;i<sz;i++){var c=p[strs[i]];p=c||(p[strs[i]]={})}p[strs[strs.length-1]]||(p[strs[strs.length-1]]=o||{})}},__hasOwnProperty:function(name,o){function classHas(name,o){if(Object.hasOwnProperty.call(o.prototype,name))return!0;var s=o.prototype.__super;return null==s?null:classHas(name,s)}return o=o||this,Object.hasOwnProperty.call(o,name)||classHas(name,o.__class)},__typeof:function(o,value){if(!o||!value)return!1;if(value===String)return"string"==typeof o;if(value===Number)return"number"==typeof o;if(value.__interface__)value=value.__interface__;else if("string"!=typeof value)return o instanceof value;return o.__imps&&o.__imps[value]||o.__class==value},__as:function(value,type){return this.__typeof(value,type)?value:null},interface:function(name,_super){Laya.__package(name,{});var ins=Laya.__internals,a=ins[name]=ins[name]||{self:name};if(_super){var supers=_super.split(",");a.extend=[];for(i=0;i<supers.length;i++)ins[name=supers[i]]=ins[name]||{self:name},a.extend.push(ins[name])}for(var o=window,words=name.split("."),i=0;i<words.length-1;i++)o=o[words[i]];o[words[words.length-1]]={__interface__:name}},class:function(o,fullName,_super,miniName){if(_super&&Laya.__extend(o,_super),fullName)if(Laya.__package(fullName,o),Laya.__classmap[fullName]=o,fullName.indexOf(".")>0){if(0==fullName.indexOf("laya.")){var paths=fullName.split(".");miniName=miniName||paths[paths.length-1],Laya[miniName]&&console.log("Warning!,this class["+miniName+"] already exist:",Laya[miniName]),Laya[miniName]=o}}else"Main"==fullName?window.Main=o:(Laya[fullName]&&console.log("Error!,this class["+fullName+"] already exist:",Laya[fullName]),Laya[fullName]=o);var un=Laya.un,p=o.prototype;un(p,"hasOwnProperty",Laya.__hasOwnProperty),un(p,"__class",o),un(p,"__super",_super),un(p,"__className",fullName),un(o,"__super",_super),un(o,"__className",fullName),un(o,"__isclass",!0),un(o,"super",function(o){this.__super.call(o)})},imps:function(dec,src){function __(name){var c,exs;if((c=Laya.__internals[name])&&(d[name]=!0,exs=c.extend))for(var i=0;i<exs.length;i++)__(exs[i].self)}if(!src)return null;var d=dec.__imps||Laya.un(dec,"__imps",{});for(var i in src)__(i)},getset:function(isStatic,o,name,getfn,setfn){isStatic?(getfn&&(o["_$GET_"+name]=getfn),setfn&&(o["_$SET_"+name]=setfn)):(getfn&&Laya.un(o,"_$get_"+name,getfn),setfn&&Laya.un(o,"_$set_"+name,setfn)),getfn&&setfn?Object.defineProperty(o,name,{get:getfn,set:setfn,enumerable:!1}):(getfn&&Object.defineProperty(o,name,{get:getfn,enumerable:!1}),setfn&&Object.defineProperty(o,name,{set:setfn,enumerable:!1}))},static:function(_class,def){for(var i=0,sz=def.length;i<sz;i+=2)"length"==def[i]?_class.length=def[i+1].call(_class):function(){var name=def[i],getfn=def[i+1];Object.defineProperty(_class,name,{get:function(){return delete this[name],this[name]=getfn.call(this)},set:function(v){delete this[name],this[name]=v},enumerable:!0,configurable:!0})}()},un:function(obj,name,value){return value||(value=obj[name]),Laya.__propun.value=value,Object.defineProperty(obj,name,Laya.__propun),value},uns:function(obj,names){names.forEach(function(o){Laya.un(obj,o)})}};return window.console=window.console||{log:function(){}},window.trace=window.console.log,Error.prototype.throwError=function(){throw arguments},String.prototype.substr=Laya.__substr,Object.defineProperty(Array.prototype,"fixed",{enumerable:!1}),Laya}(window);!function(window,document,Laya){Laya.un,Laya.uns,Laya.static,Laya.class,Laya.getset,Laya.__newvec}(0,0,Laya),function(window,document,Laya){var __un=Laya.un,__uns=Laya.uns,__static=Laya.static,__class=Laya.class,__getset=Laya.getset,__newvec=Laya.__newvec;Laya.interface("laya.runtime.IMarket"),Laya.interface("laya.filters.IFilter"),Laya.interface("laya.display.ILayout"),Laya.interface("laya.resource.IDispose"),Laya.interface("laya.runtime.IPlatform"),Laya.interface("laya.resource.IDestroy"),Laya.interface("laya.runtime.IConchNode"),Laya.interface("laya.filters.IFilterAction"),Laya.interface("laya.runtime.ICPlatformClass"),Laya.interface("laya.resource.ICreateResource"),Laya.interface("laya.runtime.IConchRenderObject"),Laya.interface("laya.runtime.IPlatformClass","laya.runtime.IPlatform");var RunDriver=function(){function RunDriver(){}return __class(RunDriver,"laya.utils.RunDriver"),RunDriver.FILTER_ACTIONS=[],RunDriver.pixelRatio=-1,RunDriver._charSizeTestDiv=null,RunDriver.now=function(){return Date.now()},RunDriver.getWindow=function(){return window},RunDriver.newWebGLContext=function(canvas,webGLName){return canvas.getContext(webGLName,{stencil:!0,alpha:Config.isAlpha,antialias:Config.isAntialias,premultipliedAlpha:Config.premultipliedAlpha})},RunDriver.getPixelRatio=function(){if(RunDriver.pixelRatio<0){var ctx=Browser.context,backingStore=ctx.backingStorePixelRatio||ctx.webkitBackingStorePixelRatio||ctx.mozBackingStorePixelRatio||ctx.msBackingStorePixelRatio||ctx.oBackingStorePixelRatio||ctx.backingStorePixelRatio||1;RunDriver.pixelRatio=(Browser.window.devicePixelRatio||1)/backingStore,RunDriver.pixelRatio<1&&(RunDriver.pixelRatio=1)}return RunDriver.pixelRatio},RunDriver.getIncludeStr=function(name){return null},RunDriver.createShaderCondition=function(conditionScript){var fn="(function() {return "+conditionScript+";})";return Browser.window.eval(fn)},RunDriver.fontMap=[],RunDriver.measureText=function(txt,font){var r,isChinese=RunDriver.hanzi.test(txt);if(isChinese&&RunDriver.fontMap[font])return RunDriver.fontMap[font];if(Render.isConchApp){var ctx=ConchTextCanvas;return ctx.font=font,r=ctx.measureText(txt),isChinese&&(RunDriver.fontMap[font]=r),r}return r={},isChinese&&(RunDriver.fontMap[font]=r),null==RunDriver._charSizeTestDiv&&(RunDriver._charSizeTestDiv=Browser.createElement("div"),RunDriver._charSizeTestDiv.style.cssText="z-index:10000000;padding:0px;position: absolute;left:0px;visibility:hidden;top:0px;background:white",Browser.container.appendChild(RunDriver._charSizeTestDiv)),RunDriver._charSizeTestDiv.style.font=font,RunDriver._charSizeTestDiv.innerText=" "==txt?"i":txt,r.width=RunDriver._charSizeTestDiv.offsetWidth,r.height=RunDriver._charSizeTestDiv.offsetHeight,r},RunDriver.beginFlush=function(){},RunDriver.endFinish=function(){},RunDriver.addToAtlas=null,RunDriver.flashFlushImage=function(atlasWebGLCanvas){},RunDriver.drawToCanvas=function(sprite,_renderType,canvasWidth,canvasHeight,offsetX,offsetY){var canvas=HTMLCanvas.create("2D"),context=new RenderContext(canvasWidth,canvasHeight,canvas);return RenderSprite.renders[_renderType]._fun(sprite,context,offsetX,offsetY),canvas},RunDriver.createParticleTemplate2D=null,RunDriver.createGLTextur=null,RunDriver.createWebGLContext2D=null,RunDriver.changeWebGLSize=function(w,h){},RunDriver.createRenderSprite=function(type,next){return new RenderSprite(type,next)},RunDriver.createFilterAction=function(type){return new ColorFilterAction},RunDriver.createGraphics=function(){return new Graphics},RunDriver.clear=function(value){Render._context.ctx.clear()},RunDriver.clearAtlas=function(value){},RunDriver.addTextureToAtlas=function(value){},RunDriver.getTexturePixels=function(value,x,y,width,height){return null},RunDriver.skinAniSprite=function(){return null},__static(RunDriver,["hanzi",function(){return this.hanzi=new RegExp("^[一-龥]$")}]),RunDriver}(),___Laya=function(){return __getset(1,Laya,"alertGlobalError",null,function(value){var erralert=0;Browser.window.onerror=value?function(msg,url,line,column,detail){erralert++<5&&detail&&alert("出错啦，请把此信息截图给研发商\n"+msg+"\n"+detail.stack)}:null}),Laya.init=function(width,height,__plugins){for(var plugins=[],i=2,sz=arguments.length;i<sz;i++)plugins.push(arguments[i]);if(!Laya._isinit){Laya._isinit=!0,Browser.__init__(),Context.__init__(),Graphics.__init__(),Laya.timer=new Timer,Laya.loader=new LoaderManager;for(var i=0,n=plugins.length;i<n;i++)plugins[i].enable&&plugins[i].enable();Font.__init__(),Style.__init__(),ResourceManager.__init__(),CacheManger.beginCheck(),Laya.stageBox=Laya.stage=new Stage,Laya.stage.conchModel&&Laya.stage.conchModel.setRootNode();var location=Browser.window.location,pathName=location.pathname;return pathName=":"==pathName.charAt(2)?pathName.substring(1):pathName,URL.rootPath=URL.basePath=URL.getPath("file:"==location.protocol?pathName:location.protocol+"//"+location.host+location.pathname),Laya.render=new Render(0,0),Laya.stage.size(width,height),RenderSprite.__init__(),KeyBoardManager.__init__(),MouseManager.instance.__init__(Laya.stage,Render.canvas),Input.__init__(),SoundManager.autoStopMusic=!0,LocalStorage.__init__(),Render.canvas}},Laya.stage=null,Laya.timer=null,Laya.loader=null,Laya.render=null,Laya.version="1.7.0",Laya.stageBox=null,Laya._isinit=!1,__static(Laya,["conchMarket",function(){return this.conchMarket=window.conch?conchMarket:null},"PlatformClass",function(){return this.PlatformClass=window.PlatformClass}]),Laya}(),Config=function(){function Config(){}return __class(Config,"Config"),Config.WebGLTextCacheCount=500,Config.atlasEnable=!1,Config.showCanvasMark=!1,Config.CPUMemoryLimit=125829120,Config.GPUMemoryLimit=167772160,Config.animationInterval=50,Config.isAntialias=!1,Config.isAlpha=!1,Config.premultipliedAlpha=!1,Config.isStencil=!1,Config}(),EventDispatcher=function(){function EventDispatcher(){this._events=null}var EventHandler;__class(EventDispatcher,"laya.events.EventDispatcher");var __proto=EventDispatcher.prototype;return __proto.hasListener=function(type){return!!(this._events&&this._events[type])},__proto.event=function(type,data){if(!this._events||!this._events[type])return!1;var listeners=this._events[type];if(listeners.run)listeners.once&&delete this._events[type],null!=data?listeners.runWith(data):listeners.run();else{for(var i=0,n=listeners.length;i<n;i++){var listener=listeners[i];listener&&(null!=data?listener.runWith(data):listener.run()),listener&&!listener.once||(listeners.splice(i,1),i--,n--)}0===listeners.length&&this._events&&delete this._events[type]}return!0},__proto.on=function(type,caller,listener,args){return this._createListener(type,caller,listener,args,!1)},__proto.once=function(type,caller,listener,args){return this._createListener(type,caller,listener,args,!0)},__proto._createListener=function(type,caller,listener,args,once,offBefore){void 0===offBefore&&(offBefore=!0),offBefore&&this.off(type,caller,listener,once);var handler=EventHandler.create(caller||this,listener,args,once);this._events||(this._events={});var events=this._events;return events[type]?events[type].run?events[type]=[events[type],handler]:events[type].push(handler):events[type]=handler,this},__proto.off=function(type,caller,listener,onceOnly){if(void 0===onceOnly&&(onceOnly=!1),!this._events||!this._events[type])return this;var listeners=this._events[type];if(null!=listener)if(listeners.run)caller&&listeners.caller!==caller||listeners.method!==listener||onceOnly&&!listeners.once||(delete this._events[type],listeners.recover());else{for(var count=0,i=0,n=listeners.length;i<n;i++){var item=listeners[i];!item||caller&&item.caller!==caller||item.method!==listener||onceOnly&&!item.once||(count++,listeners[i]=null,item.recover())}count===n&&delete this._events[type]}return this},__proto.offAll=function(type){var events=this._events;if(!events)return this;if(type)this._recoverHandlers(events[type]),delete events[type];else{for(var name in events)this._recoverHandlers(events[name]);this._events=null}return this},__proto._recoverHandlers=function(arr){if(arr)if(arr.run)arr.recover();else for(var i=arr.length-1;i>-1;i--)arr[i]&&(arr[i].recover(),arr[i]=null)},__proto.isMouseEvent=function(type){return EventDispatcher.MOUSE_EVENTS[type]},EventDispatcher.MOUSE_EVENTS={rightmousedown:!0,rightmouseup:!0,rightclick:!0,mousedown:!0,mouseup:!0,mousemove:!0,mouseover:!0,mouseout:!0,click:!0,doubleclick:!0},EventDispatcher.__init$=function(){Object.defineProperty(laya.events.EventDispatcher.prototype,"_events",{enumerable:!1,writable:!0}),EventHandler=function(_super){function EventHandler(caller,method,args,once){EventHandler.__super.call(this,caller,method,args,once)}return __class(EventHandler,"",_super),EventHandler.prototype.recover=function(){this._id>0&&(this._id=0,EventHandler._pool.push(this.clear()))},EventHandler.create=function(caller,method,args,once){return void 0===once&&(once=!0),EventHandler._pool.length?EventHandler._pool.pop().setTo(caller,method,args,once):new EventHandler(caller,method,args,once)},EventHandler._pool=[],EventHandler}(Handler)},EventDispatcher}(),Handler=function(){function Handler(caller,method,args,once){this.once=!1,this._id=0,void 0===once&&(once=!1),this.setTo(caller,method,args,once)}__class(Handler,"laya.utils.Handler");var __proto=Handler.prototype;return __proto.setTo=function(caller,method,args,once){return this._id=Handler._gid++,this.caller=caller,this.method=method,this.args=args,this.once=once,this},__proto.run=function(){if(null==this.method)return null;var id=this._id,result=this.method.apply(this.caller,this.args);return this._id===id&&this.once&&this.recover(),result},__proto.runWith=function(data){if(null==this.method)return null;var id=this._id;if(null==data)var result=this.method.apply(this.caller,this.args);else result=this.args||data.unshift?this.args?this.method.apply(this.caller,this.args.concat(data)):this.method.apply(this.caller,data):this.method.call(this.caller,data);return this._id===id&&this.once&&this.recover(),result},__proto.clear=function(){return this.caller=null,this.method=null,this.args=null,this},__proto.recover=function(){this._id>0&&(this._id=0,Handler._pool.push(this.clear()))},Handler.create=function(caller,method,args,once){return void 0===once&&(once=!0),Handler._pool.length?Handler._pool.pop().setTo(caller,method,args,once):new Handler(caller,method,args,once)},Handler._pool=[],Handler._gid=1,Handler}(),BitmapFont=function(){function BitmapFont(){this._texture=null,this._fontCharDic={},this._fontWidthMap={},this._complete=null,this._path=null,this._maxWidth=0,this._spaceWidth=10,this._padding=null,this.fontSize=12,this.autoScaleSize=!1,this.letterSpacing=0}__class(BitmapFont,"laya.display.BitmapFont");var __proto=BitmapFont.prototype;return __proto.loadFont=function(path,complete){this._path=path,this._complete=complete,Laya.loader.load([{url:this._path,type:"xml"},{url:this._path.replace(".fnt",".png"),type:"image"}],Handler.create(this,this.onLoaded))},__proto.onLoaded=function(){this.parseFont(Loader.getRes(this._path),Loader.getRes(this._path.replace(".fnt",".png"))),this._complete&&this._complete.run()},__proto.parseFont=function(xml,texture){if(null!=xml&&null!=texture){this._texture=texture;var tInfo=xml.getElementsByTagName("info");this.fontSize=parseInt(tInfo[0].attributes.size.nodeValue);var tPaddingArray=tInfo[0].attributes.padding.nodeValue.split(",");this._padding=[parseInt(tPaddingArray[0]),parseInt(tPaddingArray[1]),parseInt(tPaddingArray[2]),parseInt(tPaddingArray[3])];var chars=xml.getElementsByTagName("char"),i=0;for(i=0;i<chars.length;i++){var tAttribute=chars[i].attributes,tId=parseInt(tAttribute.id.nodeValue),xOffset=parseInt(tAttribute.xoffset.nodeValue)/1,yOffset=parseInt(tAttribute.yoffset.nodeValue)/1,xAdvance=parseInt(tAttribute.xadvance.nodeValue)/1,region=new Rectangle;region.x=parseInt(tAttribute.x.nodeValue),region.y=parseInt(tAttribute.y.nodeValue),region.width=parseInt(tAttribute.width.nodeValue),region.height=parseInt(tAttribute.height.nodeValue);var tTexture=Texture.create(texture,region.x,region.y,region.width,region.height,xOffset,yOffset);this._maxWidth=Math.max(this._maxWidth,xAdvance+this.letterSpacing),this._fontCharDic[tId]=tTexture,this._fontWidthMap[tId]=xAdvance}}},__proto.getCharTexture=function(char){return this._fontCharDic[char.charCodeAt(0)]},__proto.destroy=function(){if(this._texture){for(var p in this._fontCharDic){var tTexture=this._fontCharDic[p];tTexture&&tTexture.destroy()}this._texture.destroy(),this._fontCharDic=null,this._fontWidthMap=null,this._texture=null}},__proto.setSpaceWidth=function(spaceWidth){this._spaceWidth=spaceWidth},__proto.getCharWidth=function(char){var code=char.charCodeAt(0);return this._fontWidthMap[code]?this._fontWidthMap[code]+this.letterSpacing:" "==char?this._spaceWidth+this.letterSpacing:0},__proto.getTextWidth=function(text){for(var tWidth=0,i=0,n=text.length;i<n;i++)tWidth+=this.getCharWidth(text.charAt(i));return tWidth},__proto.getMaxWidth=function(){return this._maxWidth},__proto.getMaxHeight=function(){return this.fontSize},__proto.drawText=function(text,sprite,drawX,drawY,align,width){var tTexture,tWidth=this.getTextWidth(text),dx=0;"center"===align&&(dx=(width-tWidth)/2),"right"===align&&(dx=width-tWidth);for(var tX=0,i=0,n=text.length;i<n;i++)(tTexture=this.getCharTexture(text.charAt(i)))&&(sprite.graphics.drawTexture(tTexture,drawX+tX+dx,drawY),tX+=this.getCharWidth(text.charAt(i)))},BitmapFont}(),Style=function(){function Style(){this.alpha=1,this.visible=!0,this.scrollRect=null,this.blendMode=null,this._type=0,this._tf=Style._TF_EMPTY}__class(Style,"laya.display.css.Style");var __proto=Style.prototype;return __proto.getTransform=function(){return this._tf},__proto.setTransform=function(value){this._tf="none"!==value&&value?value:Style._TF_EMPTY},__proto.setTranslateX=function(value){this._tf===Style._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.translateX=value},__proto.setTranslateY=function(value){this._tf===Style._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.translateY=value},__proto.setScaleX=function(value){this._tf===Style._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.scaleX=value},__proto.setScale=function(x,y){this._tf===Style._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.scaleX=x,this._tf.scaleY=y},__proto.setScaleY=function(value){this._tf===Style._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.scaleY=value},__proto.setRotate=function(value){this._tf===Style._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.rotate=value},__proto.setSkewX=function(value){this._tf===Style._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.skewX=value},__proto.setSkewY=function(value){this._tf===Style._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.skewY=value},__proto.destroy=function(){this.scrollRect=null},__proto.render=function(sprite,context,x,y){},__proto.getCSSStyle=function(){return CSSStyle.EMPTY},__proto._enableLayout=function(){return!1},__getset(0,__proto,"scaleX",function(){return this._tf.scaleX},function(value){this.setScaleX(value)}),__getset(0,__proto,"transform",function(){return this.getTransform()},function(value){this.setTransform(value)}),__getset(0,__proto,"translateX",function(){return this._tf.translateX},function(value){this.setTranslateX(value)}),__getset(0,__proto,"translateY",function(){return this._tf.translateY},function(value){this.setTranslateY(value)}),__getset(0,__proto,"scaleY",function(){return this._tf.scaleY},function(value){this.setScaleY(value)}),__getset(0,__proto,"block",function(){return 0!=(1&this._type)}),__getset(0,__proto,"skewY",function(){return this._tf.skewY},function(value){this.setSkewY(value)}),__getset(0,__proto,"rotate",function(){return this._tf.rotate},function(value){this.setRotate(value)}),__getset(0,__proto,"skewX",function(){return this._tf.skewX},function(value){this.setSkewX(value)}),__getset(0,__proto,"paddingLeft",function(){return 0}),__getset(0,__proto,"paddingTop",function(){return 0}),__getset(0,__proto,"absolute",function(){return!0}),Style.__init__=function(){Style._TF_EMPTY=new TransformInfo,Style.EMPTY=new Style},Style.EMPTY=null,Style._TF_EMPTY=null,Style}(),Font=function(){function Font(src){this._type=0,this._weight=0,this._decoration=null,this._text=null,this.indent=0,this._color=Color.create(Font.defaultColor),this.family=Font.defaultFamily,this.stroke=Font._STROKE,this.size=Font.defaultSize,src&&src!==Font.EMPTY&&src.copyTo(this)}__class(Font,"laya.display.css.Font");var __proto=Font.prototype;return __proto.set=function(value){this._text=null;for(var strs=value.split(" "),i=0,n=strs.length;i<n;i++){var str=strs[i];switch(str){case"italic":this.italic=!0;continue;case"bold":this.bold=!0;continue}str.indexOf("px")>0&&(this.size=parseInt(str),this.family=strs[i+1],i++)}},__proto.toString=function(){return this._text="",this.italic&&(this._text+="italic "),this.bold&&(this._text+="bold "),this._text+=this.size+"px "+this.family},__proto.copyTo=function(dec){dec._type=this._type,dec._text=this._text,dec._weight=this._weight,dec._color=this._color,dec.family=this.family,dec.stroke=this.stroke!=Font._STROKE?this.stroke.slice():Font._STROKE,dec.indent=this.indent,dec.size=this.size},__getset(0,__proto,"password",function(){return 0!=(1024&this._type)},function(value){value?this._type|=1024:this._type&=-1025}),__getset(0,__proto,"color",function(){return this._color.strColor},function(value){this._color=Color.create(value)}),__getset(0,__proto,"italic",function(){return 0!=(512&this._type)},function(value){value?this._type|=512:this._type&=-513}),__getset(0,__proto,"bold",function(){return 0!=(2048&this._type)},function(value){value?this._type|=2048:this._type&=-2049}),__getset(0,__proto,"weight",function(){return""+this._weight},function(value){var weight=0;switch(value){case"normal":break;case"bold":this.bold=!0,weight=700;break;case"bolder":weight=800;break;case"lighter":weight=100;break;default:weight=parseInt(value)}this._weight=weight,this._text=null}),__getset(0,__proto,"decoration",function(){return this._decoration?this._decoration.value:"none"},function(value){var strs=value.split(" ");switch(this._decoration||(this._decoration={}),strs[0]){case"_":this._decoration.type="underline";break;case"-":this._decoration.type="line-through";break;case"overline":this._decoration.type="overline";break;default:this._decoration.type=strs[0]}strs[1]&&(this._decoration.color=Color.create(strs)),this._decoration.value=value}),Font.__init__=function(){Font.EMPTY=new Font(null)},Font.EMPTY=null,Font.defaultColor="#000000",Font.defaultSize=12,Font.defaultFamily="Arial",Font.defaultFont="Arial",Font._STROKE=[0,"#000000"],Font._ITALIC=512,Font._PASSWORD=1024,Font._BOLD=2048,Font}(),TransformInfo=function(){function TransformInfo(){this.translateX=0,this.translateY=0,this.scaleX=1,this.scaleY=1,this.rotate=0,this.skewX=0,this.skewY=0}return __class(TransformInfo,"laya.display.css.TransformInfo"),TransformInfo}(),Graphics=function(){function Graphics(){this._one=null,this._cmds=null,this._render=this._renderEmpty,this._render=this._renderEmpty,Render.isConchNode&&(this._nativeObj=new _conchGraphics,this.id=this._nativeObj.conchID)}__class(Graphics,"laya.display.Graphics");var __proto=Graphics.prototype;return __proto.destroy=function(){this.clear(),this._temp=null,this._bounds=null,this._rstBoundPoints=null,this._sp&&(this._sp._renderType=0),this._sp=null},__proto.clear=function(){if(this._one=null,this._render=this._renderEmpty,this._cmds=null,this._temp&&(this._temp.length=0),this._sp&&(this._sp._renderType&=-2),this._sp&&(this._sp._renderType&=-513),this._repaint(),this._vectorgraphArray){for(var i=0,n=this._vectorgraphArray.length;i<n;i++)VectorGraphManager.getInstance().deleteShape(this._vectorgraphArray[i]);this._vectorgraphArray.length=0}},__proto._repaint=function(){this._temp&&(this._temp.length=0),this._sp&&this._sp.repaint()},__proto._isOnlyOne=function(){return!this._cmds||0===this._cmds.length},__proto.getBounds=function(){return(!this._bounds||!this._temp||this._temp.length<1)&&(this._bounds=Rectangle._getWrapRec(this.getBoundPoints(),this._bounds)),this._bounds},__proto.getBoundPoints=function(){return(!this._temp||this._temp.length<1)&&(this._temp=this._getCmdPoints()),this._rstBoundPoints=Utils.copyArray(this._rstBoundPoints,this._temp)},__proto._addCmd=function(a){this._cmds=this._cmds||[],a.callee=a.shift(),this._cmds.push(a)},__proto._getCmdPoints=function(){var rst,context=Render._context,cmds=this._cmds;if(rst=this._temp||(this._temp=[]),rst.length=0,cmds||null==this._one||(Graphics._tempCmds.length=0,Graphics._tempCmds.push(this._one),cmds=Graphics._tempCmds),!cmds)return rst;var matrixs;(matrixs=Graphics._tempMatrixArrays).length=0;var tMatrix=Graphics._initMatrix;tMatrix.identity();for(var cmd,tex,tempMatrix=Graphics._tempMatrix,i=0,n=cmds.length;i<n;i++)switch((cmd=cmds[i]).callee){case context._save:case 7:matrixs.push(tMatrix),tMatrix=tMatrix.clone();break;case context._restore:case 8:tMatrix=matrixs.pop();break;case context._scale:case 5:tempMatrix.identity(),tempMatrix.translate(-cmd[2],-cmd[3]),tempMatrix.scale(cmd[0],cmd[1]),tempMatrix.translate(cmd[2],cmd[3]),this._switchMatrix(tMatrix,tempMatrix);break;case context._rotate:case 3:tempMatrix.identity(),tempMatrix.translate(-cmd[1],-cmd[2]),tempMatrix.rotate(cmd[0]),tempMatrix.translate(cmd[1],cmd[2]),this._switchMatrix(tMatrix,tempMatrix);break;case context._translate:case 6:tempMatrix.identity(),tempMatrix.translate(cmd[0],cmd[1]),this._switchMatrix(tMatrix,tempMatrix);break;case context._transform:case 4:tempMatrix.identity(),tempMatrix.translate(-cmd[1],-cmd[2]),tempMatrix.concat(cmd[0]),tempMatrix.translate(cmd[1],cmd[2]),this._switchMatrix(tMatrix,tempMatrix);break;case 16:case 24:Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[0],cmd[1],cmd[2],cmd[3]),tMatrix);break;case 17:tMatrix.copyTo(tempMatrix),tempMatrix.concat(cmd[4]),Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[0],cmd[1],cmd[2],cmd[3]),tempMatrix);break;case context._drawTexture:var offX=(tex=cmd[0]).offsetX>0?tex.offsetX:0,offY=tex.offsetY>0?tex.offsetY:0;cmd[3]&&cmd[4]?Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[1]-offX,cmd[2]-offY,cmd[3]+tex.sourceWidth-tex.width,cmd[4]+tex.sourceHeight-tex.height),tMatrix):Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[1]-offX,cmd[2]-offY,tex.width+tex.sourceWidth-tex.width,tex.height+tex.sourceHeight-tex.height),tMatrix);break;case context._fillTexture:cmd[3]&&cmd[4]?Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[1],cmd[2],cmd[3],cmd[4]),tMatrix):(tex=cmd[0],Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[1],cmd[2],tex.width,tex.height),tMatrix));break;case context._drawTextureWithTransform:cmd[5]?(tMatrix.copyTo(tempMatrix),tempMatrix.concat(cmd[5]),tempMatrix):tMatrix,offX=(tex=cmd[0]).offsetX>0?tex.offsetX:0,offY=tex.offsetY>0?tex.offsetY:0,cmd[3]&&cmd[4]?Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[1]-offX,cmd[2]-offY,cmd[3]+tex.sourceWidth-tex.width,cmd[4]+tex.sourceHeight-tex.height),tMatrix):Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[1]-offX,cmd[2]-offY,tex.width+tex.sourceWidth-tex.width,tex.height+tex.sourceHeight-tex.height),tMatrix);break;case context._drawRect:case 13:Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[0],cmd[1],cmd[2],cmd[3]),tMatrix);break;case context._drawCircle:case context._fillCircle:case 14:Graphics._addPointArrToRst(rst,Rectangle._getBoundPointS(cmd[0]-cmd[2],cmd[1]-cmd[2],cmd[2]+cmd[2],cmd[2]+cmd[2]),tMatrix);break;case context._drawLine:case 20:Graphics._tempPoints.length=0;var lineWidth=NaN;lineWidth=.5*cmd[5],cmd[0]==cmd[2]?Graphics._tempPoints.push(cmd[0]+lineWidth,cmd[1],cmd[2]+lineWidth,cmd[3],cmd[0]-lineWidth,cmd[1],cmd[2]-lineWidth,cmd[3]):cmd[1]==cmd[3]?Graphics._tempPoints.push(cmd[0],cmd[1]+lineWidth,cmd[2],cmd[3]+lineWidth,cmd[0],cmd[1]-lineWidth,cmd[2],cmd[3]-lineWidth):Graphics._tempPoints.push(cmd[0],cmd[1],cmd[2],cmd[3]),Graphics._addPointArrToRst(rst,Graphics._tempPoints,tMatrix);break;case context._drawCurves:case 22:Graphics._addPointArrToRst(rst,Bezier.I.getBezierPoints(cmd[2]),tMatrix,cmd[0],cmd[1]);break;case context._drawPoly:case context._drawLines:case 18:Graphics._addPointArrToRst(rst,cmd[2],tMatrix,cmd[0],cmd[1]);break;case context._drawPath:case 19:Graphics._addPointArrToRst(rst,this._getPathPoints(cmd[2]),tMatrix,cmd[0],cmd[1]);break;case context._drawPie:case 15:Graphics._addPointArrToRst(rst,this._getPiePoints(cmd[0],cmd[1],cmd[2],cmd[3],cmd[4]),tMatrix)}return rst.length>200?rst=Utils.copyArray(rst,Rectangle._getWrapRec(rst)._getBoundPoints()):rst.length>8&&(rst=GrahamScan.scanPList(rst)),rst},__proto._switchMatrix=function(tMatix,tempMatrix){tempMatrix.concat(tMatix),tempMatrix.copyTo(tMatix)},__proto.drawTexture=function(tex,x,y,width,height,m,alpha){if(void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=0),void 0===height&&(height=0),void 0===alpha&&(alpha=1),tex&&(width||(width=tex.sourceWidth),height||(height=tex.sourceHeight),width=width-tex.sourceWidth+tex.width,height=height-tex.sourceHeight+tex.height,!tex.loaded||!(width<=0||height<=0))){x+=tex.offsetX,y+=tex.offsetY,this._sp&&(this._sp._renderType|=512);var args=[tex,x,y,width,height,m,alpha];args.callee=m||1!=alpha?Render._context._drawTextureWithTransform:Render._context._drawTexture,null!=this._one||m||1!=alpha?this._saveToCmd(args.callee,args):(this._one=args,this._render=this._renderOneImg),tex.loaded||tex.once("loaded",this,this._textureLoaded,[tex,args]),this._repaint()}},__proto.cleanByTexture=function(tex,x,y,width,height){if(void 0===width&&(width=0),void 0===height&&(height=0),!tex)return this.clear();this._one&&this._render===this._renderOneImg?(width||(width=tex.sourceWidth),height||(height=tex.sourceHeight),width=width-tex.sourceWidth+tex.width,height=height-tex.sourceHeight+tex.height,x+=tex.offsetX,y+=tex.offsetY,this._one[0]=tex,this._one[1]=x,this._one[2]=y,this._one[3]=width,this._one[4]=height):(this.clear(),tex&&this.drawTexture(tex,x,y,width,height))},__proto.drawTextures=function(tex,pos){tex&&this._saveToCmd(Render._context._drawTextures,[tex,pos])},__proto.fillTexture=function(tex,x,y,width,height,type,offset){if(void 0===width&&(width=0),void 0===height&&(height=0),void 0===type&&(type="repeat"),tex){var args=[tex,x,y,width,height,type,offset||Point.EMPTY,{}];tex.loaded||tex.once("loaded",this,this._textureLoaded,[tex,args]),this._saveToCmd(Render._context._fillTexture,args)}},__proto._textureLoaded=function(tex,param){param[3]=param[3]||tex.width,param[4]=param[4]||tex.height,this._repaint()},__proto._saveToCmd=function(fun,args){return this._sp&&(this._sp._renderType|=512),null==this._one?(this._one=args,this._render=this._renderOne):(this._sp&&(this._sp._renderType&=-2),this._render=this._renderAll,0===(this._cmds||(this._cmds=[])).length&&this._cmds.push(this._one),this._cmds.push(args)),args.callee=fun,this._temp&&(this._temp.length=0),this._repaint(),args},__proto.clipRect=function(x,y,width,height){this._saveToCmd(Render._context._clipRect,[x,y,width,height])},__proto.fillText=function(text,x,y,font,color,textAlign){this._saveToCmd(Render._context._fillText,[text,x,y,font||Font.defaultFont,color,textAlign])},__proto.fillBorderText=function(text,x,y,font,fillColor,borderColor,lineWidth,textAlign){this._saveToCmd(Render._context._fillBorderText,[text,x,y,font||Font.defaultFont,fillColor,borderColor,lineWidth,textAlign])},__proto.strokeText=function(text,x,y,font,color,lineWidth,textAlign){this._saveToCmd(Render._context._strokeText,[text,x,y,font||Font.defaultFont,color,lineWidth,textAlign])},__proto.alpha=function(value){this._saveToCmd(Render._context._alpha,[value])},__proto.transform=function(matrix,pivotX,pivotY){void 0===pivotX&&(pivotX=0),void 0===pivotY&&(pivotY=0),this._saveToCmd(Render._context._transform,[matrix,pivotX,pivotY])},__proto.rotate=function(angle,pivotX,pivotY){void 0===pivotX&&(pivotX=0),void 0===pivotY&&(pivotY=0),this._saveToCmd(Render._context._rotate,[angle,pivotX,pivotY])},__proto.scale=function(scaleX,scaleY,pivotX,pivotY){void 0===pivotX&&(pivotX=0),void 0===pivotY&&(pivotY=0),this._saveToCmd(Render._context._scale,[scaleX,scaleY,pivotX,pivotY])},__proto.translate=function(x,y){this._saveToCmd(Render._context._translate,[x,y])},__proto.save=function(){this._saveToCmd(Render._context._save,[])},__proto.restore=function(){this._saveToCmd(Render._context._restore,[])},__proto.replaceText=function(text){this._repaint();var cmds=this._cmds;if(cmds){for(var i=cmds.length-1;i>-1;i--)if(this._isTextCmd(cmds[i].callee))return cmds[i][0].toUpperCase?cmds[i][0]=text:cmds[i][0].setText(text),!0}else if(this._one&&this._isTextCmd(this._one.callee))return this._one[0].toUpperCase?this._one[0]=text:this._one[0].setText(text),!0;return!1},__proto._isTextCmd=function(fun){return fun===Render._context._fillText||fun===Render._context._fillBorderText||fun===Render._context._strokeText},__proto.replaceTextColor=function(color){this._repaint();var cmds=this._cmds;if(cmds)for(var i=cmds.length-1;i>-1;i--)this._isTextCmd(cmds[i].callee)&&(cmds[i][4]=color,cmds[i][0].toUpperCase||(cmds[i][0].changed=!0));else this._one&&this._isTextCmd(this._one.callee)&&(this._one[4]=color,this._one[0].toUpperCase||(this._one[0].changed=!0))},__proto.loadImage=function(url,x,y,width,height,complete){function onloaded(tex){tex&&(_$this.drawTexture(tex,x,y,width,height),null!=complete&&complete.call(_$this._sp,tex))}var _$this=this;void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=0),void 0===height&&(height=0);var tex=Loader.getRes(url);tex?onloaded(tex):Laya.loader.load(url,Handler.create(null,onloaded),null,"image")},__proto._renderEmpty=function(sprite,context,x,y){},__proto._renderAll=function(sprite,context,x,y){for(var cmd,cmds=this._cmds,i=0,n=cmds.length;i<n;i++)(cmd=cmds[i]).callee.call(context,x,y,cmd)},__proto._renderOne=function(sprite,context,x,y){this._one.callee.call(context,x,y,this._one)},__proto._renderOneImg=function(sprite,context,x,y){this._one.callee.call(context,x,y,this._one),2305!==sprite._renderType&&(sprite._renderType|=1)},__proto.drawLine=function(fromX,fromY,toX,toY,lineColor,lineWidth){void 0===lineWidth&&(lineWidth=1);var tId=0;Render.isWebGL&&(tId=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(tId));var offset=lineWidth%2==0?0:.5,arr=[fromX+offset,fromY+offset,toX+offset,toY+offset,lineColor,lineWidth,tId];this._saveToCmd(Render._context._drawLine,arr)},__proto.drawLines=function(x,y,points,lineColor,lineWidth){void 0===lineWidth&&(lineWidth=1);var tId=0;Render.isWebGL&&(tId=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(tId));var offset=lineWidth%2==0?0:.5,arr=[x+offset,y+offset,points,lineColor,lineWidth,tId];this._saveToCmd(Render._context._drawLines,arr)},__proto.drawCurves=function(x,y,points,lineColor,lineWidth){void 0===lineWidth&&(lineWidth=1);var arr=[x,y,points,lineColor,lineWidth];this._saveToCmd(Render._context._drawCurves,arr)},__proto.drawRect=function(x,y,width,height,fillColor,lineColor,lineWidth){void 0===lineWidth&&(lineWidth=1);var offset=lineColor?lineWidth/2:0,lineOffset=lineColor?lineWidth:0,arr=[x+offset,y+offset,width-lineOffset,height-lineOffset,fillColor,lineColor,lineWidth];this._saveToCmd(Render._context._drawRect,arr)},__proto.drawCircle=function(x,y,radius,fillColor,lineColor,lineWidth){void 0===lineWidth&&(lineWidth=1);var offset=lineColor?lineWidth/2:0,tId=0;Render.isWebGL&&(tId=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(tId));var arr=[x,y,radius-offset,fillColor,lineColor,lineWidth,tId];this._saveToCmd(Render._context._drawCircle,arr)},__proto.drawPie=function(x,y,radius,startAngle,endAngle,fillColor,lineColor,lineWidth){void 0===lineWidth&&(lineWidth=1);var offset=lineColor?lineWidth/2:0,lineOffset=lineColor?lineWidth:0,tId=0;Render.isWebGL&&(tId=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(tId));var arr=[x+offset,y+offset,radius-lineOffset,startAngle,endAngle,fillColor,lineColor,lineWidth,tId];arr[3]=Utils.toRadian(startAngle),arr[4]=Utils.toRadian(endAngle),this._saveToCmd(Render._context._drawPie,arr)},__proto._getPiePoints=function(x,y,radius,startAngle,endAngle){var rst=Graphics._tempPoints;Graphics._tempPoints.length=0,rst.push(x,y);var dP=Math.PI/10,i=NaN;for(i=startAngle;i<endAngle;i+=dP)rst.push(x+radius*Math.cos(i),y+radius*Math.sin(i));return endAngle!=i&&rst.push(x+radius*Math.cos(endAngle),y+radius*Math.sin(endAngle)),rst},__proto.drawPoly=function(x,y,points,fillColor,lineColor,lineWidth){void 0===lineWidth&&(lineWidth=1);var tId=0;if(Render.isWebGL){tId=VectorGraphManager.getInstance().getId(),null==this._vectorgraphArray&&(this._vectorgraphArray=[]),this._vectorgraphArray.push(tId);var tIsConvexPolygon=!1;tIsConvexPolygon=!(points.length>6)}var offset=lineColor?lineWidth%2==0?0:.5:0,arr=[x+offset,y+offset,points,fillColor,lineColor,lineWidth,tId,tIsConvexPolygon];this._saveToCmd(Render._context._drawPoly,arr)},__proto._getPathPoints=function(paths){var i=0,len=0,rst=Graphics._tempPoints;rst.length=0,len=paths.length;var tCMD;for(i=0;i<len;i++)(tCMD=paths[i]).length>1&&(rst.push(tCMD[1],tCMD[2]),tCMD.length>3&&rst.push(tCMD[3],tCMD[4]));return rst},__proto.drawPath=function(x,y,paths,brush,pen){var arr=[x,y,paths,brush,pen];this._saveToCmd(Render._context._drawPath,arr)},__getset(0,__proto,"cmds",function(){return this._cmds},function(value){this._sp&&(this._sp._renderType|=512),this._cmds=value,this._render=this._renderAll,this._repaint()}),Graphics.__init__=function(){if(Render.isConchNode){for(var from=laya.display.Graphics.prototype,to=ConchGraphics.prototype,list=["clear","destroy","alpha","rotate","transform","scale","translate","save","restore","clipRect","blendMode","fillText","fillBorderText","_fands","drawRect","drawCircle","drawPie","drawPoly","drawPath","drawImageM","drawLine","drawLines","_drawPs","drawCurves","replaceText","replaceTextColor","_fillImage","fillTexture","setSkinMesh","drawParticle","drawImageS"],i=0,len=list.length;i<=len;i++){var temp=list[i];from[temp]=to[temp]}from._saveToCmd=null,to.drawImageS&&(from.drawTextures=function(tex,pos){if(tex&&tex.loaded&&tex.bitmap&&tex.source){var uv=tex.uv,w=tex.bitmap.width,h=tex.bitmap.height;this.drawImageS(tex.bitmap.source,uv[0]*w,uv[1]*h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,tex.offsetX,tex.offsetY,tex.width,tex.height,pos)}}),from.drawTexture=function(tex,x,y,width,height,m,alpha){if(void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=0),void 0===height&&(height=0),void 0===alpha&&(alpha=1),tex)if(tex.loaded){if(tex.loaded&&tex.bitmap&&tex.source&&(width||(width=tex.sourceWidth),height||(height=tex.sourceHeight),width=width-tex.sourceWidth+tex.width,height=height-tex.sourceHeight+tex.height,!(width<=0||height<=0))){x+=tex.offsetX,y+=tex.offsetY;var uv=tex.uv,w=tex.bitmap.width,h=tex.bitmap.height;this.drawImageM(tex.bitmap.source,uv[0]*w,uv[1]*h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,x,y,width,height,m),this._repaint()}}else tex.once("loaded",this,function(){this.drawTexture(tex,x,y,width,height,m)})},from.fillTexture=function(tex,x,y,width,height,type,offset){if(void 0===width&&(width=0),void 0===height&&(height=0),void 0===type&&(type="repeat"),tex&&tex.loaded){var pat,ctxi=Render._context.ctx,w=tex.bitmap.width,h=tex.bitmap.height,uv=tex.uv;pat=tex.uv!=Texture.DEF_UV?ctxi.createPattern(tex.bitmap.source,type,uv[0]*w,uv[1]*h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h):ctxi.createPattern(tex.bitmap.source,type);var sX=0,sY=0;offset&&(x+=offset.x%tex.width,y+=offset.y%tex.height,sX-=offset.x%tex.width,sY-=offset.y%tex.height),this._fillImage(pat,x,y,sX,sY,width,height)}}}},Graphics._addPointArrToRst=function(rst,points,matrix,dx,dy){void 0===dx&&(dx=0),void 0===dy&&(dy=0);var i=0,len=0;for(len=points.length,i=0;i<len;i+=2)Graphics._addPointToRst(rst,points[i]+dx,points[i+1]+dy,matrix)},Graphics._addPointToRst=function(rst,x,y,matrix){var _tempPoint=Point.TEMP;_tempPoint.setTo(x||0,y||0),matrix.transformPoint(_tempPoint),rst.push(_tempPoint.x,_tempPoint.y)},Graphics._tempPoints=[],Graphics._tempMatrixArrays=[],Graphics._tempCmds=[],__static(Graphics,["_tempMatrix",function(){return this._tempMatrix=new Matrix},"_initMatrix",function(){return this._initMatrix=new Matrix}]),Graphics}(),Event=function(){function Event(){}__class(Event,"laya.events.Event");var __proto=Event.prototype;return __proto.setTo=function(type,currentTarget,target){return this.type=type,this.currentTarget=currentTarget,this.target=target,this},__proto.stopPropagation=function(){this._stoped=!0},__getset(0,__proto,"stageY",function(){return Laya.stage.mouseY}),__getset(0,__proto,"charCode",function(){return this.nativeEvent.charCode}),__getset(0,__proto,"touches",function(){var arr=this.nativeEvent.touches;if(arr)for(var stage=Laya.stage,i=0,n=arr.length;i<n;i++){var e=arr[i],point=Point.TEMP;point.setTo(e.clientX,e.clientY),stage._canvasTransform.invertTransformPoint(point),stage.transform.invertTransformPoint(point),e.stageX=point.x,e.stageY=point.y}return arr}),__getset(0,__proto,"keyLocation",function(){return this.nativeEvent.keyLocation}),__getset(0,__proto,"ctrlKey",function(){return this.nativeEvent.ctrlKey}),__getset(0,__proto,"altKey",function(){return this.nativeEvent.altKey}),__getset(0,__proto,"shiftKey",function(){return this.nativeEvent.shiftKey}),__getset(0,__proto,"stageX",function(){return Laya.stage.mouseX}),Event.EMPTY=new Event,Event.MOUSE_DOWN="mousedown",Event.MOUSE_UP="mouseup",Event.CLICK="click",Event.RIGHT_MOUSE_DOWN="rightmousedown",Event.RIGHT_MOUSE_UP="rightmouseup",Event.RIGHT_CLICK="rightclick",Event.MOUSE_MOVE="mousemove",Event.MOUSE_OVER="mouseover",Event.MOUSE_OUT="mouseout",Event.MOUSE_WHEEL="mousewheel",Event.ROLL_OVER="mouseover",Event.ROLL_OUT="mouseout",Event.DOUBLE_CLICK="doubleclick",Event.CHANGE="change",Event.CHANGED="changed",Event.RESIZE="resize",Event.ADDED="added",Event.REMOVED="removed",Event.DISPLAY="display",Event.UNDISPLAY="undisplay",Event.ERROR="error",Event.COMPLETE="complete",Event.LOADED="loaded",Event.PROGRESS="progress",Event.INPUT="input",Event.RENDER="render",Event.OPEN="open",Event.MESSAGE="message",Event.CLOSE="close",Event.KEY_DOWN="keydown",Event.KEY_PRESS="keypress",Event.KEY_UP="keyup",Event.FRAME="enterframe",Event.DRAG_START="dragstart",Event.DRAG_MOVE="dragmove",Event.DRAG_END="dragend",Event.ENTER="enter",Event.SELECT="select",Event.BLUR="blur",Event.FOCUS="focus",Event.VISIBILITY_CHANGE="visibilitychange",Event.FOCUS_CHANGE="focuschange",Event.PLAYED="played",Event.PAUSED="paused",Event.STOPPED="stopped",Event.START="start",Event.END="end",Event.ENABLED_CHANGED="enabledchanged",Event.COMPONENT_ADDED="componentadded",Event.COMPONENT_REMOVED="componentremoved",Event.ACTIVE_CHANGED="activechanged",Event.LAYER_CHANGED="layerchanged",Event.HIERARCHY_LOADED="hierarchyloaded",Event.RECOVERING="recovering",Event.RECOVERED="recovered",Event.RELEASED="released",Event.LINK="link",Event.LABEL="label",Event.FULL_SCREEN_CHANGE="fullscreenchange",Event.DEVICE_LOST="devicelost",Event.MESH_CHANGED="meshchanged",Event.MATERIAL_CHANGED="materialchanged",Event.RENDERQUEUE_CHANGED="renderqueuechanged",Event.WORLDMATRIX_NEEDCHANGE="worldmatrixneedchanged",Event.ANIMATION_CHANGED="animationchanged",Event}(),Keyboard=function(){function Keyboard(){}return __class(Keyboard,"laya.events.Keyboard"),Keyboard.NUMBER_0=48,Keyboard.NUMBER_1=49,Keyboard.NUMBER_2=50,Keyboard.NUMBER_3=51,Keyboard.NUMBER_4=52,Keyboard.NUMBER_5=53,Keyboard.NUMBER_6=54,Keyboard.NUMBER_7=55,Keyboard.NUMBER_8=56,Keyboard.NUMBER_9=57,Keyboard.A=65,Keyboard.B=66,Keyboard.C=67,Keyboard.D=68,Keyboard.E=69,Keyboard.F=70,Keyboard.G=71,Keyboard.H=72,Keyboard.I=73,Keyboard.J=74,Keyboard.K=75,Keyboard.L=76,Keyboard.M=77,Keyboard.N=78,Keyboard.O=79,Keyboard.P=80,Keyboard.Q=81,Keyboard.R=82,Keyboard.S=83,Keyboard.T=84,Keyboard.U=85,Keyboard.V=86,Keyboard.W=87,Keyboard.X=88,Keyboard.Y=89,Keyboard.Z=90,Keyboard.F1=112,Keyboard.F2=113,Keyboard.F3=114,Keyboard.F4=115,Keyboard.F5=116,Keyboard.F6=117,Keyboard.F7=118,Keyboard.F8=119,Keyboard.F9=120,Keyboard.F10=121,Keyboard.F11=122,Keyboard.F12=123,Keyboard.F13=124,Keyboard.F14=125,Keyboard.F15=126,Keyboard.NUMPAD=21,Keyboard.NUMPAD_0=96,Keyboard.NUMPAD_1=97,Keyboard.NUMPAD_2=98,Keyboard.NUMPAD_3=99,Keyboard.NUMPAD_4=100,Keyboard.NUMPAD_5=101,Keyboard.NUMPAD_6=102,Keyboard.NUMPAD_7=103,Keyboard.NUMPAD_8=104,Keyboard.NUMPAD_9=105,Keyboard.NUMPAD_ADD=107,Keyboard.NUMPAD_DECIMAL=110,Keyboard.NUMPAD_DIVIDE=111,Keyboard.NUMPAD_ENTER=108,Keyboard.NUMPAD_MULTIPLY=106,Keyboard.NUMPAD_SUBTRACT=109,Keyboard.SEMICOLON=186,Keyboard.EQUAL=187,Keyboard.COMMA=188,Keyboard.MINUS=189,Keyboard.PERIOD=190,Keyboard.SLASH=191,Keyboard.BACKQUOTE=192,Keyboard.LEFTBRACKET=219,Keyboard.BACKSLASH=220,Keyboard.RIGHTBRACKET=221,Keyboard.QUOTE=222,Keyboard.ALTERNATE=18,Keyboard.BACKSPACE=8,Keyboard.CAPS_LOCK=20,Keyboard.COMMAND=15,Keyboard.CONTROL=17,Keyboard.DELETE=46,Keyboard.ENTER=13,Keyboard.ESCAPE=27,Keyboard.PAGE_UP=33,Keyboard.PAGE_DOWN=34,Keyboard.END=35,Keyboard.HOME=36,Keyboard.LEFT=37,Keyboard.UP=38,Keyboard.RIGHT=39,Keyboard.DOWN=40,Keyboard.SHIFT=16,Keyboard.SPACE=32,Keyboard.TAB=9,Keyboard.INSERT=45,Keyboard}(),KeyBoardManager=function(){function KeyBoardManager(){}return __class(KeyBoardManager,"laya.events.KeyBoardManager"),KeyBoardManager.__init__=function(){KeyBoardManager._addEvent("keydown"),KeyBoardManager._addEvent("keypress"),KeyBoardManager._addEvent("keyup")},KeyBoardManager._addEvent=function(type){Browser.document.addEventListener(type,function(e){laya.events.KeyBoardManager._dispatch(e,type)},!0)},KeyBoardManager._dispatch=function(e,type){if(KeyBoardManager.enabled){KeyBoardManager._event._stoped=!1,KeyBoardManager._event.nativeEvent=e,KeyBoardManager._event.keyCode=e.keyCode||e.which||e.charCode,"keydown"===type?KeyBoardManager._pressKeys[KeyBoardManager._event.keyCode]=!0:"keyup"===type&&(KeyBoardManager._pressKeys[KeyBoardManager._event.keyCode]=null);for(var target=Laya.stage.focus&&null!=Laya.stage.focus.event&&Laya.stage.focus.displayedInStage?Laya.stage.focus:Laya.stage,ct=target;ct;)ct.event(type,KeyBoardManager._event.setTo(type,ct,target)),ct=ct.parent}},KeyBoardManager.hasKeyDown=function(key){return KeyBoardManager._pressKeys[key]},KeyBoardManager._pressKeys={},KeyBoardManager.enabled=!0,__static(KeyBoardManager,["_event",function(){return this._event=new Event}]),KeyBoardManager}(),KeyLocation=function(){function KeyLocation(){}return __class(KeyLocation,"laya.events.KeyLocation"),KeyLocation.STANDARD=0,KeyLocation.LEFT=1,KeyLocation.RIGHT=2,KeyLocation.NUM_PAD=3,KeyLocation}(),MouseManager=function(){function MouseManager(){this.mouseX=0,this.mouseY=0,this.disableMouseEvent=!1,this.mouseDownTime=0,this.mouseMoveAccuracy=2,this._stage=null,this._target=null,this._lastOvers=[],this._currOvers=[],this._lastClickTimer=0,this._lastMoveTimer=0,this._isDoubleClick=!1,this._isLeftMouse=!1,this._eventList=[],this._touchIDs={},this._id=1,this._event=new Event,this._matrix=new Matrix,this._point=new Point,this._rect=new Rectangle,this._prePoint=new Point}__class(MouseManager,"laya.events.MouseManager");var __proto=MouseManager.prototype;return __proto.__init__=function(stage,canvas){var _$this=this;this._stage=stage;var _this=this,list=this._eventList;canvas.oncontextmenu=function(e){if(MouseManager.enabled)return!1},canvas.addEventListener("mousedown",function(e){MouseManager.enabled&&(e.preventDefault(),list.push(e),_this.mouseDownTime=Browser.now())}),canvas.addEventListener("mouseup",function(e){MouseManager.enabled&&(e.preventDefault(),list.push(e),_this.mouseDownTime=-Browser.now())},!0),canvas.addEventListener("mousemove",function(e){if(MouseManager.enabled){e.preventDefault();var now=Browser.now();if(now-_this._lastMoveTimer<10)return;_this._lastMoveTimer=now,list.push(e)}},!0),canvas.addEventListener("mouseout",function(e){MouseManager.enabled&&list.push(e)}),canvas.addEventListener("mouseover",function(e){MouseManager.enabled&&list.push(e)}),canvas.addEventListener("touchstart",function(e){MouseManager.enabled&&(list.push(e),_$this.runEvent(),Input.isInputting||e.preventDefault(),_this.mouseDownTime=Browser.now())}),canvas.addEventListener("touchend",function(e){MouseManager.enabled&&(Input.isInputting||e.preventDefault(),list.push(e),_this.mouseDownTime=-Browser.now())},!0),canvas.addEventListener("touchmove",function(e){MouseManager.enabled&&(e.preventDefault(),list.push(e))},!0),canvas.addEventListener("mousewheel",function(e){MouseManager.enabled&&list.push(e)}),canvas.addEventListener("DOMMouseScroll",function(e){MouseManager.enabled&&list.push(e)})},__proto.initEvent=function(e,nativeEvent){var _this=this;_this._event._stoped=!1,_this._event.nativeEvent=nativeEvent||e,_this._target=null,this._point.setTo(e.clientX,e.clientY),this._stage._canvasTransform.invertTransformPoint(this._point),_this.mouseX=this._point.x,_this.mouseY=this._point.y,_this._event.touchId=e.identifier||0},__proto.checkMouseWheel=function(e){this._event.delta=e.wheelDelta?.025*e.wheelDelta:-e.detail;for(var i=0,n=this._lastOvers.length;i<n;i++){var ele=this._lastOvers[i];ele.event("mousewheel",this._event.setTo("mousewheel",ele,this._target))}this._stage.event("mousewheel",this._event.setTo("mousewheel",this._stage,this._target))},__proto.checkMouseOut=function(){if(!this.disableMouseEvent){for(var i=0,n=this._lastOvers.length;i<n;i++){var ele=this._lastOvers[i];!ele.destroyed&&this._currOvers.indexOf(ele)<0&&(ele._set$P("$_MOUSEOVER",!1),ele.event("mouseout",this._event.setTo("mouseout",ele,ele)))}var temp=this._lastOvers;this._lastOvers=this._currOvers,this._currOvers=temp,this._currOvers.length=0}},__proto.onMouseMove=function(ele){this.sendMouseMove(ele),this._event._stoped=!1,this.sendMouseOver(this._target)},__proto.sendMouseMove=function(ele){ele.event("mousemove",this._event.setTo("mousemove",ele,this._target)),!this._event._stoped&&ele.parent&&this.sendMouseMove(ele.parent)},__proto.sendMouseOver=function(ele){(ele.parent||ele===this._stage)&&(ele._get$P("$_MOUSEOVER")||(ele._set$P("$_MOUSEOVER",!0),ele.event("mouseover",this._event.setTo("mouseover",ele,this._target))),this._currOvers.push(ele)),!this._event._stoped&&ele.parent&&this.sendMouseOver(ele.parent)},__proto.onMouseDown=function(ele){Input.isInputting&&Laya.stage.focus&&Laya.stage.focus.focus&&!Laya.stage.focus.contains(this._target)&&(Laya.stage.focus.focus=!1),this._onMouseDown(ele)},__proto._onMouseDown=function(ele){this._isLeftMouse?(ele._set$P("$_MOUSEDOWN",this._touchIDs[this._event.touchId]),ele.event("mousedown",this._event.setTo("mousedown",ele,this._target))):(ele._set$P("$_RIGHTMOUSEDOWN",this._touchIDs[this._event.touchId]),ele.event("rightmousedown",this._event.setTo("rightmousedown",ele,this._target))),!this._event._stoped&&ele.parent&&this.onMouseDown(ele.parent)},__proto.onMouseUp=function(ele){var type=this._isLeftMouse?"mouseup":"rightmouseup";this.sendMouseUp(ele,type),this._event._stoped=!1,this.sendClick(this._target,type)},__proto.sendMouseUp=function(ele,type){ele.event(type,this._event.setTo(type,ele,this._target)),!this._event._stoped&&ele.parent&&this.sendMouseUp(ele.parent,type)},__proto.sendClick=function(ele,type){ele.destroyed||("mouseup"===type&&ele._get$P("$_MOUSEDOWN")===this._touchIDs[this._event.touchId]?(ele._set$P("$_MOUSEDOWN",-1),ele.event("click",this._event.setTo("click",ele,this._target)),this._isDoubleClick&&ele.event("doubleclick",this._event.setTo("doubleclick",ele,this._target))):"rightmouseup"===type&&ele._get$P("$_RIGHTMOUSEDOWN")===this._touchIDs[this._event.touchId]&&(ele._set$P("$_RIGHTMOUSEDOWN",-1),ele.event("rightclick",this._event.setTo("rightclick",ele,this._target))),!this._event._stoped&&ele.parent&&this.sendClick(ele.parent,type))},__proto.check=function(sp,mouseX,mouseY,callBack){this._point.setTo(mouseX,mouseY),sp.fromParentPoint(this._point),mouseX=this._point.x,mouseY=this._point.y;var scrollRect=sp.scrollRect;if(scrollRect){this._rect.setTo(scrollRect.x,scrollRect.y,scrollRect.width,scrollRect.height);var isHit=this._rect.contains(mouseX,mouseY);if(!isHit)return!1}if(!this.disableMouseEvent){if(sp.hitTestPrior&&!sp.mouseThrough&&!this.hitTest(sp,mouseX,mouseY))return!1;for(var i=sp._childs.length-1;i>-1;i--){var child=sp._childs[i];if(!child.destroyed&&child.mouseEnabled&&child.visible&&this.check(child,mouseX,mouseY,callBack))return!0}}return isHit=this.hitTest(sp,scrollRect?mouseX-scrollRect.x:mouseX,scrollRect?mouseY-scrollRect.y:mouseY),isHit?(this._target=sp,callBack.call(this,sp)):callBack===this.onMouseUp&&sp===this._stage&&(this._target=this._stage,callBack.call(this,this._target)),isHit},__proto.hitTest=function(sp,mouseX,mouseY){var isHit=!1;if(sp.hitArea instanceof laya.utils.HitArea)return sp.hitArea.isHit(mouseX,mouseY);if(sp.width>0&&sp.height>0||sp.mouseThrough||sp.hitArea){var hitRect=this._rect;sp.mouseThrough?isHit=sp.getGraphicBounds().contains(mouseX,mouseY):(sp.hitArea?hitRect=sp.hitArea:hitRect.setTo(0,0,sp.width,sp.height),isHit=hitRect.contains(mouseX,mouseY))}return isHit},__proto.runEvent=function(){var len=this._eventList.length;if(len){for(var _this=this,i=0;i<len;){var evt=this._eventList[i];switch("mousemove"!==evt.type&&(this._prePoint.x=this._prePoint.y=-1e6),evt.type){case"mousedown":this._touchIDs[0]=this._id++,MouseManager._isTouchRespond?MouseManager._isTouchRespond=!1:(_this._isLeftMouse=0===evt.button,_this.initEvent(evt),_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseDown));break;case"mouseup":_this._isLeftMouse=0===evt.button;var now=Browser.now();_this._isDoubleClick=now-_this._lastClickTimer<300,_this._lastClickTimer=now,_this.initEvent(evt),_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseUp);break;case"mousemove":Math.abs(this._prePoint.x-evt.clientX)+Math.abs(this._prePoint.y-evt.clientY)>=this.mouseMoveAccuracy&&(this._prePoint.x=evt.clientX,this._prePoint.y=evt.clientY,_this.initEvent(evt),_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseMove),_this.checkMouseOut());break;case"touchstart":MouseManager._isTouchRespond=!0,_this._isLeftMouse=!0;for(var touches=evt.changedTouches,j=0,n=touches.length;j<n;j++){var touch=touches[j];this._id%200==0&&(this._touchIDs={}),this._touchIDs[touch.identifier]=this._id++,_this.initEvent(touch,evt),_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseDown)}break;case"touchend":MouseManager._isTouchRespond=!0,_this._isLeftMouse=!0,now=Browser.now(),_this._isDoubleClick=now-_this._lastClickTimer<300,_this._lastClickTimer=now;var touchends=evt.changedTouches;for(j=0,n=touchends.length;j<n;j++)_this.initEvent(touchends[j],evt),_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseUp);break;case"touchmove":var touchemoves=evt.changedTouches;for(j=0,n=touchemoves.length;j<n;j++)_this.initEvent(touchemoves[j],evt),_this.check(_this._stage,_this.mouseX,_this.mouseY,_this.onMouseMove);_this.checkMouseOut();break;case"wheel":case"mousewheel":case"DOMMouseScroll":_this.checkMouseWheel(evt);break;case"mouseout":_this._stage.event("mouseout",_this._event.setTo("mouseout",_this._stage,_this._stage));break;case"mouseover":_this._stage.event("mouseover",_this._event.setTo("mouseover",_this._stage,_this._stage))}i++}this._eventList.length=0}},MouseManager.enabled=!0,MouseManager._isTouchRespond=!1,__static(MouseManager,["instance",function(){return this.instance=new MouseManager}]),MouseManager}(),Filter=function(){function Filter(){this._action=null}__class(Filter,"laya.filters.Filter");var __proto=Filter.prototype;return Laya.imps(__proto,{"laya.filters.IFilter":!0}),__proto.callNative=function(sp){},__getset(0,__proto,"type",function(){return-1}),__getset(0,__proto,"action",function(){return this._action}),Filter.BLUR=16,Filter.COLOR=32,Filter.GLOW=8,Filter._filterStart=null,Filter._filterEnd=null,Filter._EndTarget=null,Filter._recycleScope=null,Filter._filter=null,Filter._useSrc=null,Filter._endSrc=null,Filter._useOut=null,Filter._endOut=null,Filter}(),ColorFilterAction=function(){function ColorFilterAction(){this.data=null}__class(ColorFilterAction,"laya.filters.ColorFilterAction");var __proto=ColorFilterAction.prototype;return Laya.imps(__proto,{"laya.filters.IFilterAction":!0}),__proto.apply=function(srcCanvas){var ctx=srcCanvas.ctx.ctx,canvas=srcCanvas.ctx.ctx.canvas;if(0==canvas.width||0==canvas.height)return canvas;for(var nData,imgdata=ctx.getImageData(0,0,canvas.width,canvas.height),data=imgdata.data,i=0,n=data.length;i<n;i+=4)nData=this.getColor(data[i],data[i+1],data[i+2],data[i+3]),0!=data[i+3]&&(data[i]=nData[0],data[i+1]=nData[1],data[i+2]=nData[2],data[i+3]=nData[3]);return ctx.putImageData(imgdata,0,0),srcCanvas},__proto.getColor=function(red,green,blue,alpha){var rst=[];if(this.data._mat&&this.data._alpha){var mat=this.data._mat,tempAlpha=this.data._alpha;rst[0]=mat[0]*red+mat[1]*green+mat[2]*blue+mat[3]*alpha+tempAlpha[0],rst[1]=mat[4]*red+mat[5]*green+mat[6]*blue+mat[7]*alpha+tempAlpha[1],rst[2]=mat[8]*red+mat[9]*green+mat[10]*blue+mat[11]*alpha+tempAlpha[2],rst[3]=mat[12]*red+mat[13]*green+mat[14]*blue+mat[15]*alpha+tempAlpha[3]}return rst},ColorFilterAction}(),Arith=function(){function Arith(){}return __class(Arith,"laya.maths.Arith"),Arith.formatR=function(r){return r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI),r},Arith.isPOT=function(w,h){return w>0&&0==(w&w-1)&&h>0&&0==(h&h-1)},Arith.setMatToArray=function(mat,array){mat.a,mat.b,mat.c,mat.d,mat.tx,mat.ty,array[0]=mat.a,array[1]=mat.b,array[4]=mat.c,array[5]=mat.d,array[12]=mat.tx,array[13]=mat.ty},Arith}(),Bezier=function(){function Bezier(){this._controlPoints=[new Point,new Point,new Point],this._calFun=this.getPoint2}__class(Bezier,"laya.maths.Bezier");var __proto=Bezier.prototype;return __proto._switchPoint=function(x,y){var tPoint=this._controlPoints.shift();tPoint.setTo(x,y),this._controlPoints.push(tPoint)},__proto.getPoint2=function(t,rst){var p1=this._controlPoints[0],p2=this._controlPoints[1],p3=this._controlPoints[2],lineX=Math.pow(1-t,2)*p1.x+2*t*(1-t)*p2.x+Math.pow(t,2)*p3.x,lineY=Math.pow(1-t,2)*p1.y+2*t*(1-t)*p2.y+Math.pow(t,2)*p3.y;rst.push(lineX,lineY)},__proto.getPoint3=function(t,rst){var p1=this._controlPoints[0],p2=this._controlPoints[1],p3=this._controlPoints[2],p4=this._controlPoints[3],lineX=Math.pow(1-t,3)*p1.x+3*p2.x*t*(1-t)*(1-t)+3*p3.x*t*t*(1-t)+p4.x*Math.pow(t,3),lineY=Math.pow(1-t,3)*p1.y+3*p2.y*t*(1-t)*(1-t)+3*p3.y*t*t*(1-t)+p4.y*Math.pow(t,3);rst.push(lineX,lineY)},__proto.insertPoints=function(count,rst){var i=NaN,dLen=NaN;for(dLen=1/(count=count>0?count:5),i=0;i<=1;i+=dLen)this._calFun(i,rst)},__proto.getBezierPoints=function(pList,inSertCount,count){void 0===inSertCount&&(inSertCount=5),void 0===count&&(count=2);var i=0,len=0;if((len=pList.length)<2*(count+1))return[];var rst;switch(rst=[],count){case 2:this._calFun=this.getPoint2;break;case 3:this._calFun=this.getPoint3;break;default:return[]}for(;this._controlPoints.length<=count;)this._controlPoints.push(new Point);for(i=0;i<2*count;i+=2)this._switchPoint(pList[i],pList[i+1]);for(i=2*count;i<len;i+=2)this._switchPoint(pList[i],pList[i+1]),i/2%count==0&&this.insertPoints(inSertCount,rst);return rst},__static(Bezier,["I",function(){return this.I=new Bezier}]),Bezier}(),GrahamScan=function(){function GrahamScan(){}return __class(GrahamScan,"laya.maths.GrahamScan"),GrahamScan.multiply=function(p1,p2,p0){return(p1.x-p0.x)*(p2.y-p0.y)-(p2.x-p0.x)*(p1.y-p0.y)},GrahamScan.dis=function(p1,p2){return(p1.x-p2.x)*(p1.x-p2.x)+(p1.y-p2.y)*(p1.y-p2.y)},GrahamScan._getPoints=function(count,tempUse,rst){for(void 0===tempUse&&(tempUse=!1),GrahamScan._mPointList||(GrahamScan._mPointList=[]);GrahamScan._mPointList.length<count;)GrahamScan._mPointList.push(new Point);return rst||(rst=[]),rst.length=0,tempUse?GrahamScan.getFrom(rst,GrahamScan._mPointList,count):GrahamScan.getFromR(rst,GrahamScan._mPointList,count),rst},GrahamScan.getFrom=function(rst,src,count){var i=0;for(i=0;i<count;i++)rst.push(src[i]);return rst},GrahamScan.getFromR=function(rst,src,count){var i=0;for(i=0;i<count;i++)rst.push(src.pop());return rst},GrahamScan.pListToPointList=function(pList,tempUse){void 0===tempUse&&(tempUse=!1);var i=0,len=pList.length/2,rst=GrahamScan._getPoints(len,tempUse,GrahamScan._tempPointList);for(i=0;i<len;i++)rst[i].setTo(pList[i+i],pList[i+i+1]);return rst},GrahamScan.pointListToPlist=function(pointList){var tPoint,i=0,len=pointList.length,rst=GrahamScan._temPList;for(rst.length=0,i=0;i<len;i++)tPoint=pointList[i],rst.push(tPoint.x,tPoint.y);return rst},GrahamScan.scanPList=function(pList){return Utils.copyArray(pList,GrahamScan.pointListToPlist(GrahamScan.scan(GrahamScan.pListToPointList(pList,!0))))},GrahamScan.scan=function(PointSet){var tmp,ch,key,i=0,j=0,k=0,n=PointSet.length,_tmpDic={};for((ch=GrahamScan._temArr).length=0,i=(n=PointSet.length)-1;i>=0;i--)key=(tmp=PointSet[i]).x+"_"+tmp.y,_tmpDic.hasOwnProperty(key)||(_tmpDic[key]=!0,ch.push(tmp));for(n=ch.length,Utils.copyArray(PointSet,ch),i=1;i<n;i++)(PointSet[i].y<PointSet[k].y||PointSet[i].y==PointSet[k].y&&PointSet[i].x<PointSet[k].x)&&(k=i);for(tmp=PointSet[0],PointSet[0]=PointSet[k],PointSet[k]=tmp,i=1;i<n-1;i++){for(k=i,j=i+1;j<n;j++)(GrahamScan.multiply(PointSet[j],PointSet[k],PointSet[0])>0||0==GrahamScan.multiply(PointSet[j],PointSet[k],PointSet[0])&&GrahamScan.dis(PointSet[0],PointSet[j])<GrahamScan.dis(PointSet[0],PointSet[k]))&&(k=j);tmp=PointSet[i],PointSet[i]=PointSet[k],PointSet[k]=tmp}if(ch=GrahamScan._temArr,ch.length=0,PointSet.length<3)return Utils.copyArray(ch,PointSet);for(ch.push(PointSet[0],PointSet[1],PointSet[2]),i=3;i<n;i++){for(;ch.length>=2&&GrahamScan.multiply(PointSet[i],ch[ch.length-1],ch[ch.length-2])>=0;)ch.pop();PointSet[i]&&ch.push(PointSet[i])}return ch},GrahamScan._mPointList=null,GrahamScan._tempPointList=[],GrahamScan._temPList=[],GrahamScan._temArr=[],GrahamScan}(),MathUtil=function(){function MathUtil(){}return __class(MathUtil,"laya.maths.MathUtil"),MathUtil.subtractVector3=function(l,r,o){o[0]=l[0]-r[0],o[1]=l[1]-r[1],o[2]=l[2]-r[2]},MathUtil.lerp=function(left,right,amount){return left*(1-amount)+right*amount},MathUtil.scaleVector3=function(f,b,e){e[0]=f[0]*b,e[1]=f[1]*b,e[2]=f[2]*b},MathUtil.lerpVector3=function(l,r,t,o){var ax=l[0],ay=l[1],az=l[2];o[0]=ax+t*(r[0]-ax),o[1]=ay+t*(r[1]-ay),o[2]=az+t*(r[2]-az)},MathUtil.lerpVector4=function(l,r,t,o){var ax=l[0],ay=l[1],az=l[2],aw=l[3];o[0]=ax+t*(r[0]-ax),o[1]=ay+t*(r[1]-ay),o[2]=az+t*(r[2]-az),o[3]=aw+t*(r[3]-aw)},MathUtil.slerpQuaternionArray=function(a,Offset1,b,Offset2,t,out,Offset3){var omega,cosom,sinom,scale0,scale1,ax=a[Offset1+0],ay=a[Offset1+1],az=a[Offset1+2],aw=a[Offset1+3],bx=b[Offset2+0],by=b[Offset2+1],bz=b[Offset2+2],bw=b[Offset2+3];return(cosom=ax*bx+ay*by+az*bz+aw*bw)<0&&(cosom=-cosom,bx=-bx,by=-by,bz=-bz,bw=-bw),1-cosom>1e-6?(omega=Math.acos(cosom),sinom=Math.sin(omega),scale0=Math.sin((1-t)*omega)/sinom,scale1=Math.sin(t*omega)/sinom):(scale0=1-t,scale1=t),out[Offset3+0]=scale0*ax+scale1*bx,out[Offset3+1]=scale0*ay+scale1*by,out[Offset3+2]=scale0*az+scale1*bz,out[Offset3+3]=scale0*aw+scale1*bw,out},MathUtil.getRotation=function(x0,y0,x1,y1){return Math.atan2(y1-y0,x1-x0)/Math.PI*180},MathUtil.sortBigFirst=function(a,b){return a==b?0:b>a?1:-1},MathUtil.sortSmallFirst=function(a,b){return a==b?0:b>a?-1:1},MathUtil.sortNumBigFirst=function(a,b){return parseFloat(b)-parseFloat(a)},MathUtil.sortNumSmallFirst=function(a,b){return parseFloat(a)-parseFloat(b)},MathUtil.sortByKey=function(key,bigFirst,forceNum){void 0===bigFirst&&(bigFirst=!1),void 0===forceNum&&(forceNum=!0);var _sortFun;return _sortFun=bigFirst?forceNum?MathUtil.sortNumBigFirst:MathUtil.sortBigFirst:forceNum?MathUtil.sortNumSmallFirst:MathUtil.sortSmallFirst,function(a,b){return _sortFun(a[key],b[key])}},MathUtil}(),Matrix=function(){function Matrix(a,b,c,d,tx,ty){this.cos=1,this.sin=0,this.inPool=!1,this.bTransform=!1,void 0===a&&(a=1),void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=1),void 0===tx&&(tx=0),void 0===ty&&(ty=0),this.a=a,this.b=b,this.c=c,this.d=d,this.tx=tx,this.ty=ty,this._checkTransform()}__class(Matrix,"laya.maths.Matrix");var __proto=Matrix.prototype;return __proto.identity=function(){return this.a=this.d=1,this.b=this.tx=this.ty=this.c=0,this.bTransform=!1,this},__proto._checkTransform=function(){return this.bTransform=1!==this.a||0!==this.b||0!==this.c||1!==this.d},__proto.setTranslate=function(x,y){return this.tx=x,this.ty=y,this},__proto.translate=function(x,y){return this.tx+=x,this.ty+=y,this},__proto.scale=function(x,y){this.a*=x,this.d*=y,this.c*=x,this.b*=y,this.tx*=x,this.ty*=y,this.bTransform=!0},__proto.rotate=function(angle){var cos=this.cos=Math.cos(angle),sin=this.sin=Math.sin(angle),a1=this.a,c1=this.c,tx1=this.tx;this.a=a1*cos-this.b*sin,this.b=a1*sin+this.b*cos,this.c=c1*cos-this.d*sin,this.d=c1*sin+this.d*cos,this.tx=tx1*cos-this.ty*sin,this.ty=tx1*sin+this.ty*cos,this.bTransform=!0},__proto.skew=function(x,y){var tanX=Math.tan(x),tanY=Math.tan(y),a1=this.a,b1=this.b;return this.a+=tanY*this.c,this.b+=tanY*this.d,this.c+=tanX*a1,this.d+=tanX*b1,this},__proto.invertTransformPoint=function(out){var a1=this.a,b1=this.b,c1=this.c,d1=this.d,tx1=this.tx,n=a1*d1-b1*c1,a2=d1/n,b2=-b1/n,c2=-c1/n,d2=a1/n,tx2=(c1*this.ty-d1*tx1)/n,ty2=-(a1*this.ty-b1*tx1)/n;return out.setTo(a2*out.x+c2*out.y+tx2,b2*out.x+d2*out.y+ty2)},__proto.transformPoint=function(out){return out.setTo(this.a*out.x+this.c*out.y+this.tx,this.b*out.x+this.d*out.y+this.ty)},__proto.transformPointN=function(out){return out.setTo(this.a*out.x+this.c*out.y,this.b*out.x+this.d*out.y)},__proto.transformPointArray=function(data,out){for(var len=data.length,i=0;i<len;i+=2){var x=data[i],y=data[i+1];out[i]=this.a*x+this.c*y+this.tx,out[i+1]=this.b*x+this.d*y+this.ty}return out},__proto.transformPointArrayScale=function(data,out){for(var len=data.length,i=0;i<len;i+=2){var x=data[i],y=data[i+1];out[i]=this.a*x+this.c*y,out[i+1]=this.b*x+this.d*y}return out},__proto.getScaleX=function(){return 0===this.b?this.a:Math.sqrt(this.a*this.a+this.b*this.b)},__proto.getScaleY=function(){return 0===this.c?this.d:Math.sqrt(this.c*this.c+this.d*this.d)},__proto.invert=function(){var a1=this.a,b1=this.b,c1=this.c,d1=this.d,tx1=this.tx,n=a1*d1-b1*c1;return this.a=d1/n,this.b=-b1/n,this.c=-c1/n,this.d=a1/n,this.tx=(c1*this.ty-d1*tx1)/n,this.ty=-(a1*this.ty-b1*tx1)/n,this},__proto.setTo=function(a,b,c,d,tx,ty){return this.a=a,this.b=b,this.c=c,this.d=d,this.tx=tx,this.ty=ty,this},__proto.concat=function(matrix){var a=this.a,c=this.c,tx=this.tx;return this.a=a*matrix.a+this.b*matrix.c,this.b=a*matrix.b+this.b*matrix.d,this.c=c*matrix.a+this.d*matrix.c,this.d=c*matrix.b+this.d*matrix.d,this.tx=tx*matrix.a+this.ty*matrix.c+matrix.tx,this.ty=tx*matrix.b+this.ty*matrix.d+matrix.ty,this},__proto.scaleEx=function(x,y){var ba=this.a,bb=this.b,bc=this.c,bd=this.d;0!==bb||0!==bc?(this.a=x*ba,this.b=x*bb,this.c=y*bc,this.d=y*bd):(this.a=x*ba,this.b=0*bd,this.c=0*ba,this.d=y*bd),this.bTransform=!0},__proto.rotateEx=function(angle){var cos=Math.cos(angle),sin=Math.sin(angle),ba=this.a,bb=this.b,bc=this.c,bd=this.d;0!==bb||0!==bc?(this.a=cos*ba+sin*bc,this.b=cos*bb+sin*bd,this.c=-sin*ba+cos*bc,this.d=-sin*bb+cos*bd):(this.a=cos*ba,this.b=sin*bd,this.c=-sin*ba,this.d=cos*bd),this.bTransform=!0},__proto.clone=function(){var no=Matrix._cache,dec=no._length?no[--no._length]:new Matrix;return dec.a=this.a,dec.b=this.b,dec.c=this.c,dec.d=this.d,dec.tx=this.tx,dec.ty=this.ty,dec.bTransform=this.bTransform,dec},__proto.copyTo=function(dec){return dec.a=this.a,dec.b=this.b,dec.c=this.c,dec.d=this.d,dec.tx=this.tx,dec.ty=this.ty,dec.bTransform=this.bTransform,dec},__proto.toString=function(){return this.a+","+this.b+","+this.c+","+this.d+","+this.tx+","+this.ty},__proto.destroy=function(){if(!this.inPool){var cache=Matrix._cache;this.inPool=!0,cache._length||(cache._length=0),cache[cache._length++]=this,this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this.bTransform=!1}},Matrix.mul=function(m1,m2,out){var aa=m1.a,ab=m1.b,ac=m1.c,ad=m1.d,atx=m1.tx,aty=m1.ty,ba=m2.a,bb=m2.b,bc=m2.c,bd=m2.d,btx=m2.tx,bty=m2.ty;return 0!==bb||0!==bc?(out.a=aa*ba+ab*bc,out.b=aa*bb+ab*bd,out.c=ac*ba+ad*bc,out.d=ac*bb+ad*bd,out.tx=ba*atx+bc*aty+btx,out.ty=bb*atx+bd*aty+bty):(out.a=aa*ba,out.b=ab*bd,out.c=ac*ba,out.d=ad*bd,out.tx=ba*atx+btx,out.ty=bd*aty+bty),out},Matrix.mul16=function(m1,m2,out){var aa=m1.a,ab=m1.b,ac=m1.c,ad=m1.d,atx=m1.tx,aty=m1.ty,ba=m2.a,bb=m2.b,bc=m2.c,bd=m2.d,btx=m2.tx,bty=m2.ty;return 0!==bb||0!==bc?(out[0]=aa*ba+ab*bc,out[1]=aa*bb+ab*bd,out[4]=ac*ba+ad*bc,out[5]=ac*bb+ad*bd,out[12]=ba*atx+bc*aty+btx,out[13]=bb*atx+bd*aty+bty):(out[0]=aa*ba,out[1]=ab*bd,out[4]=ac*ba,out[5]=ad*bd,out[12]=ba*atx+btx,out[13]=bd*aty+bty),out},Matrix.mulPre=function(m1,ba,bb,bc,bd,btx,bty,out){var aa=m1.a,ab=m1.b,ac=m1.c,ad=m1.d,atx=m1.tx,aty=m1.ty;return 0!==bb||0!==bc?(out.a=aa*ba+ab*bc,out.b=aa*bb+ab*bd,out.c=ac*ba+ad*bc,out.d=ac*bb+ad*bd,out.tx=ba*atx+bc*aty+btx,out.ty=bb*atx+bd*aty+bty):(out.a=aa*ba,out.b=ab*bd,out.c=ac*ba,out.d=ad*bd,out.tx=ba*atx+btx,out.ty=bd*aty+bty),out},Matrix.mulPos=function(m1,aa,ab,ac,ad,atx,aty,out){var ba=m1.a,bb=m1.b,bc=m1.c,bd=m1.d,btx=m1.tx,bty=m1.ty;return 0!==bb||0!==bc?(out.a=aa*ba+ab*bc,out.b=aa*bb+ab*bd,out.c=ac*ba+ad*bc,out.d=ac*bb+ad*bd,out.tx=ba*atx+bc*aty+btx,out.ty=bb*atx+bd*aty+bty):(out.a=aa*ba,out.b=ab*bd,out.c=ac*ba,out.d=ad*bd,out.tx=ba*atx+btx,out.ty=bd*aty+bty),out},Matrix.preMul=function(parent,self,out){var pa=parent.a,pb=parent.b,pc=parent.c,pd=parent.d,na=self.a,nb=self.b,nc=self.c,nd=self.d,ntx=self.tx,nty=self.ty;return out.a=na*pa,out.b=out.c=0,out.d=nd*pd,out.tx=ntx*pa+parent.tx,out.ty=nty*pd+parent.ty,0===nb&&0===nc&&0===pb&&0===pc||(out.a+=nb*pc,out.d+=nc*pb,out.b+=na*pb+nb*pd,out.c+=nc*pa+nd*pc,out.tx+=nty*pc,out.ty+=ntx*pb),out},Matrix.preMulXY=function(parent,x,y,out){var pa=parent.a,pb=parent.b,pc=parent.c,pd=parent.d;return out.a=pa,out.b=pb,out.c=pc,out.d=pd,out.tx=x*pa+parent.tx+y*pc,out.ty=y*pd+parent.ty+x*pb,out},Matrix.create=function(){var cache=Matrix._cache,mat=cache._length?cache[--cache._length]:new Matrix;return mat.inPool=!1,mat},Matrix.EMPTY=new Matrix,Matrix.TEMP=new Matrix,Matrix._cache=[],Matrix}(),Point=function(){function Point(x,y){void 0===x&&(x=0),void 0===y&&(y=0),this.x=x,this.y=y}__class(Point,"laya.maths.Point");var __proto=Point.prototype;return __proto.setTo=function(x,y){return this.x=x,this.y=y,this},__proto.distance=function(x,y){return Math.sqrt((this.x-x)*(this.x-x)+(this.y-y)*(this.y-y))},__proto.toString=function(){return this.x+","+this.y},__proto.normalize=function(){var d=Math.sqrt(this.x*this.x+this.y*this.y);if(d>0){var id=1/d;this.x*=id,this.y*=id}},Point.TEMP=new Point,Point.EMPTY=new Point,Point}(),Rectangle=function(){function Rectangle(x,y,width,height){void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=0),void 0===height&&(height=0),this.x=x,this.y=y,this.width=width,this.height=height}__class(Rectangle,"laya.maths.Rectangle");var __proto=Rectangle.prototype;return __proto.setTo=function(x,y,width,height){return this.x=x,this.y=y,this.width=width,this.height=height,this},__proto.copyFrom=function(source){return this.x=source.x,this.y=source.y,this.width=source.width,this.height=source.height,this},__proto.contains=function(x,y){return!(this.width<=0||this.height<=0)&&(x>=this.x&&x<this.right&&y>=this.y&&y<this.bottom)},__proto.intersects=function(rect){return!(rect.x>this.x+this.width||rect.x+rect.width<this.x||rect.y>this.y+this.height||rect.y+rect.height<this.y)},__proto.intersection=function(rect,out){return this.intersects(rect)?(out||(out=new Rectangle),out.x=Math.max(this.x,rect.x),out.y=Math.max(this.y,rect.y),out.width=Math.min(this.right,rect.right)-out.x,out.height=Math.min(this.bottom,rect.bottom)-out.y,out):null},__proto.union=function(source,out){return out||(out=new Rectangle),this.clone(out),source.width<=0||source.height<=0?out:(out.addPoint(source.x,source.y),out.addPoint(source.right,source.bottom),this)},__proto.clone=function(out){return out||(out=new Rectangle),out.x=this.x,out.y=this.y,out.width=this.width,out.height=this.height,out},__proto.toString=function(){return this.x+","+this.y+","+this.width+","+this.height},__proto.equals=function(rect){return!(!rect||rect.x!==this.x||rect.y!==this.y||rect.width!==this.width||rect.height!==this.height)},__proto.addPoint=function(x,y){return this.x>x&&(this.width+=this.x-x,this.x=x),this.y>y&&(this.height+=this.y-y,this.y=y),this.width<x-this.x&&(this.width=x-this.x),this.height<y-this.y&&(this.height=y-this.y),this},__proto._getBoundPoints=function(){var rst=Rectangle._temB;return rst.length=0,0==this.width||0==this.height?rst:(rst.push(this.x,this.y,this.x+this.width,this.y,this.x,this.y+this.height,this.x+this.width,this.y+this.height),rst)},__proto.isEmpty=function(){return this.width<=0||this.height<=0},__getset(0,__proto,"right",function(){return this.x+this.width}),__getset(0,__proto,"bottom",function(){return this.y+this.height}),Rectangle._getBoundPointS=function(x,y,width,height){var rst=Rectangle._temA;return rst.length=0,0==width||0==height?rst:(rst.push(x,y,x+width,y,x,y+height,x+width,y+height),rst)},Rectangle._getWrapRec=function(pointList,rst){if(!pointList||pointList.length<1)return rst?rst.setTo(0,0,0,0):Rectangle.TEMP.setTo(0,0,0,0);rst=rst||new Rectangle;var i,minX,maxX,minY,maxY,len=pointList.length,tPoint=Point.TEMP;for(maxX=maxY=-(minX=minY=99999),i=0;i<len;i+=2)tPoint.x=pointList[i],tPoint.y=pointList[i+1],minX=minX<tPoint.x?minX:tPoint.x,minY=minY<tPoint.y?minY:tPoint.y,maxX=maxX>tPoint.x?maxX:tPoint.x,maxY=maxY>tPoint.y?maxY:tPoint.y;return rst.setTo(minX,minY,maxX-minX,maxY-minY)},Rectangle.EMPTY=new Rectangle,Rectangle.TEMP=new Rectangle,Rectangle._temB=[],Rectangle._temA=[],Rectangle}(),SoundManager=function(){function SoundManager(){}return __class(SoundManager,"laya.media.SoundManager"),__getset(1,SoundManager,"autoStopMusic",function(){return SoundManager._autoStopMusic},function(v){Laya.stage.off("blur",null,SoundManager._stageOnBlur),Laya.stage.off("focus",null,SoundManager._stageOnFocus),Laya.stage.off("visibilitychange",null,SoundManager._visibilityChange),SoundManager._autoStopMusic=v,v&&(Laya.stage.on("blur",null,SoundManager._stageOnBlur),Laya.stage.on("focus",null,SoundManager._stageOnFocus),Laya.stage.on("visibilitychange",null,SoundManager._visibilityChange))}),__getset(1,SoundManager,"muted",function(){return SoundManager._muted},function(value){value&&SoundManager.stopAllSound(),SoundManager.musicMuted=value,SoundManager._muted=value}),__getset(1,SoundManager,"musicMuted",function(){return SoundManager._musicMuted},function(value){value?(SoundManager._tMusic&&SoundManager.stopSound(SoundManager._tMusic),SoundManager._musicMuted=value):(SoundManager._musicMuted=value,SoundManager._tMusic&&SoundManager.playMusic(SoundManager._tMusic))}),__getset(1,SoundManager,"soundMuted",function(){return SoundManager._soundMuted},function(value){SoundManager._soundMuted=value}),SoundManager.addChannel=function(channel){SoundManager._channels.indexOf(channel)>=0||SoundManager._channels.push(channel)},SoundManager.removeChannel=function(channel){var i=0;for(i=SoundManager._channels.length-1;i>=0;i--)SoundManager._channels[i]==channel&&SoundManager._channels.splice(i,1)},SoundManager._visibilityChange=function(){Laya.stage.isVisibility?SoundManager._stageOnFocus():SoundManager._stageOnBlur()},SoundManager._stageOnBlur=function(){SoundManager._musicChannel&&(SoundManager._musicChannel.isStopped||(SoundManager._blurPaused=!0,SoundManager._musicLoops=SoundManager._musicChannel.loops,SoundManager._musicCompleteHandler=SoundManager._musicChannel.completeHandler,SoundManager._musicPosition=SoundManager._musicChannel.position,SoundManager._musicChannel.stop(),Laya.stage.once("mousedown",null,SoundManager._stageOnFocus)))},SoundManager._stageOnFocus=function(){Laya.stage.off("mousedown",null,SoundManager._stageOnFocus),SoundManager._blurPaused&&(SoundManager.playMusic(SoundManager._tMusic,SoundManager._musicLoops,SoundManager._musicCompleteHandler,SoundManager._musicPosition),SoundManager._blurPaused=!1)},SoundManager.playSound=function(url,loops,complete,soundClass,startTime){if(void 0===loops&&(loops=1),void 0===startTime&&(startTime=0),SoundManager._muted)return null;if((url=URL.formatURL(url))==SoundManager._tMusic){if(SoundManager._musicMuted)return null}else if(SoundManager._soundMuted)return null;var tSound=Laya.loader.getRes(url);soundClass||(soundClass=SoundManager._soundClass),tSound||((tSound=new soundClass).load(url),Loader.cacheRes(url,tSound));var channel;return channel=tSound.play(startTime,loops),channel.url=url,channel.volume=url==SoundManager._tMusic?SoundManager.musicVolume:SoundManager.soundVolume,channel.completeHandler=complete,channel},SoundManager.destroySound=function(url){var tSound=Laya.loader.getRes(url);tSound&&(Loader.clearRes(url),tSound.dispose())},SoundManager.playMusic=function(url,loops,complete,startTime){return void 0===loops&&(loops=0),void 0===startTime&&(startTime=0),url=URL.formatURL(url),SoundManager._tMusic=url,SoundManager._musicChannel&&SoundManager._musicChannel.stop(),SoundManager._musicChannel=SoundManager.playSound(url,loops,complete,null,startTime)},SoundManager.stopSound=function(url){url=URL.formatURL(url);var channel,i=0;for(i=SoundManager._channels.length-1;i>=0;i--)(channel=SoundManager._channels[i]).url==url&&channel.stop()},SoundManager.stopAll=function(){SoundManager._tMusic=null;var i=0;for(i=SoundManager._channels.length-1;i>=0;i--)SoundManager._channels[i].stop()},SoundManager.stopAllSound=function(){var channel,i=0;for(i=SoundManager._channels.length-1;i>=0;i--)(channel=SoundManager._channels[i]).url!=SoundManager._tMusic&&channel.stop()},SoundManager.stopMusic=function(){SoundManager._tMusic=null,SoundManager._musicChannel&&SoundManager._musicChannel.stop()},SoundManager.setSoundVolume=function(volume,url){if(url)url=URL.formatURL(url),SoundManager._setVolume(url,volume);else{SoundManager.soundVolume=volume;var channel,i=0;for(i=SoundManager._channels.length-1;i>=0;i--)(channel=SoundManager._channels[i]).url!=SoundManager._tMusic&&(channel.volume=volume)}},SoundManager.setMusicVolume=function(volume){SoundManager.musicVolume=volume,SoundManager._setVolume(SoundManager._tMusic,volume)},SoundManager._setVolume=function(url,volume){var channel,i=0;for(i=SoundManager._channels.length-1;i>=0;i--)(channel=SoundManager._channels[i]).url==url&&(channel.volume=volume)},SoundManager.musicVolume=1,SoundManager.soundVolume=1,SoundManager.playbackRate=1,SoundManager._muted=!1,SoundManager._soundMuted=!1,SoundManager._musicMuted=!1,SoundManager._tMusic=null,SoundManager._musicChannel=null,SoundManager._channels=[],SoundManager._autoStopMusic=!1,SoundManager._blurPaused=!1,SoundManager._musicLoops=0,SoundManager._musicPosition=0,SoundManager._musicCompleteHandler=null,SoundManager._soundClass=null,SoundManager}(),LocalStorage=function(){function LocalStorage(){}var Storage;return __class(LocalStorage,"laya.net.LocalStorage"),LocalStorage.__init__=function(){LocalStorage._baseClass||(LocalStorage._baseClass=Storage,Storage.init()),LocalStorage.items=LocalStorage._baseClass.items,LocalStorage.support=LocalStorage._baseClass.support},LocalStorage.setItem=function(key,value){LocalStorage._baseClass.setItem(key,value)},LocalStorage.getItem=function(key){return LocalStorage._baseClass.getItem(key)},LocalStorage.setJSON=function(key,value){LocalStorage._baseClass.setJSON(key,value)},LocalStorage.getJSON=function(key){return LocalStorage._baseClass.getJSON(key)},LocalStorage.removeItem=function(key){LocalStorage._baseClass.removeItem(key)},LocalStorage.clear=function(){LocalStorage._baseClass.clear()},LocalStorage._baseClass=null,LocalStorage.items=null,LocalStorage.support=!1,LocalStorage.__init$=function(){Storage=function(){function Storage(){}return __class(Storage,""),Storage.init=function(){try{Storage.items=window.localStorage,Storage.setItem("laya","1"),Storage.removeItem("laya"),Storage.support=!0}catch(e){}Storage.support||console.log("LocalStorage is not supprot or browser is private mode.")},Storage.setItem=function(key,value){try{Storage.support&&Storage.items.setItem(key,value)}catch(e){console.log("set localStorage failed",e)}},Storage.getItem=function(key){return Storage.support?Storage.items.getItem(key):null},Storage.setJSON=function(key,value){try{Storage.support&&Storage.items.setItem(key,JSON.stringify(value))}catch(e){console.log("set localStorage failed",e)}},Storage.getJSON=function(key){return JSON.parse(Storage.support?Storage.items.getItem(key):null)},Storage.removeItem=function(key){Storage.support&&Storage.items.removeItem(key)},Storage.clear=function(){Storage.support&&Storage.items.clear()},Storage.items=null,Storage.support=!0,Storage}()},LocalStorage}(),URL=function(){function URL(url){this._url=null,this._path=null,this._url=URL.formatURL(url),this._path=URL.getPath(url)}__class(URL,"laya.net.URL");var __proto=URL.prototype;return __getset(0,__proto,"path",function(){return this._path}),__getset(0,__proto,"url",function(){return this._url}),URL.formatURL=function(url,base){if(null!=URL.customFormat&&(url=URL.customFormat(url,base)),!url)return"null path";if(0===url.indexOf("data:image"))return url;if(0==Render.isConchApp&&URL.version[url]&&(url+="?v="+URL.version[url]),"~"==url.charAt(0))return URL.rootPath+url.substring(1);if(URL.isAbsolute(url))return url;var retVal=(base||URL.basePath)+url;return URL.formatRelativePath(retVal)},URL.formatRelativePath=function(value){if(value.indexOf("../")>-1){for(var parts=value.split("/"),i=0,len=parts.length;i<len;i++)".."==parts[i]&&(parts.splice(i-1,2),i-=2);return parts.join("/")}return value},URL.isAbsolute=function(url){return url.indexOf(":")>0||"/"==url.charAt(0)},URL.getPath=function(url){var ofs=url.lastIndexOf("/");return ofs>0?url.substr(0,ofs+1):""},URL.getFileName=function(url){var ofs=url.lastIndexOf("/");return ofs>0?url.substr(ofs+1):url},URL.version={},URL.basePath="",URL.rootPath="",URL.customFormat=null,URL}(),Render=function(){function Render(width,height){function loop(){Laya.stage._loop(),Browser.window.requestAnimationFrame(loop)}this._timeId=0;var style=Render._mainCanvas.source.style;style.position="absolute",style.top=style.left="0px",style.background="#000000",Render._mainCanvas.source.id=Render._mainCanvas.source.id||"layaCanvas";var isWebGl=laya.renders.Render.isWebGL;isWebGl&&Render.WebGL.init(Render._mainCanvas,width,height),(Render._mainCanvas.source.nodeName||laya.renders.Render.isConchApp)&&Browser.container.appendChild(Render._mainCanvas.source),Render._context=new RenderContext(width,height,isWebGl?null:Render._mainCanvas),Render._context.ctx.setIsMainContext(),Browser.window.requestAnimationFrame(loop),Laya.stage.on("blur",this,this._onBlur),Laya.stage.on("focus",this,this._onFocus)}__class(Render,"laya.renders.Render");var __proto=Render.prototype;return __proto._onFocus=function(){Browser.window.clearInterval(this._timeId)},__proto._onBlur=function(){this._timeId=Browser.window.setInterval(this._enterFrame,1e3)},__proto._enterFrame=function(e){Laya.stage._loop()},__getset(1,Render,"isConchApp",function(){return 4==(4&window.ConchRenderType)}),__getset(1,Render,"context",function(){return Render._context}),__getset(1,Render,"isConchNode",function(){return 5==(5&window.ConchRenderType)},function(b){b?window.ConchRenderType|=1:window.ConchRenderType&=-2}),__getset(1,Render,"isConchWebGL",function(){return 6==window.ConchRenderType},function(b){b?(Render.isConchNode=!1,window.ConchRenderType|=2):window.ConchRenderType&=-3}),__getset(1,Render,"canvas",function(){return Render._mainCanvas.source}),Render._context=null,Render._mainCanvas=null,Render.WebGL=null,Render.NODE=1,Render.WEBGL=2,Render.CONCH=4,Render.isWebGL=!1,Render.is3DMode=!1,Render.optimizeTextureMemory=function(url,texture){return!0},Render.__init$=function(){window.ConchRenderType=window.ConchRenderType||1,window.ConchRenderType|=window.conch?4:0},Render}(),RenderContext=function(){function RenderContext(width,height,canvas){this.x=0,this.y=0,this._drawTexture=function(x,y,args){args[0].loaded&&this.ctx.drawTexture(args[0],args[1],args[2],args[3],args[4],x,y)},this._fillTexture=function(x,y,args){args[0].loaded&&this.ctx.fillTexture(args[0],args[1]+x,args[2]+y,args[3],args[4],args[5],args[6],args[7])},this._drawTextureWithTransform=function(x,y,args){args[0].loaded&&this.ctx.drawTextureWithTransform(args[0],args[1],args[2],args[3],args[4],args[5],x,y,args[6])},this._fillQuadrangle=function(x,y,args){this.ctx.fillQuadrangle(args[0],args[1],args[2],args[3],args[4])},this._drawRect=function(x,y,args){var ctx=this.ctx;null!=args[4]&&(ctx.fillStyle=args[4],ctx.fillRect(x+args[0],y+args[1],args[2],args[3],null)),null!=args[5]&&(ctx.strokeStyle=args[5],ctx.lineWidth=args[6],ctx.strokeRect(x+args[0],y+args[1],args[2],args[3],args[6]))},this._drawPie=function(x,y,args){var ctx=this.ctx;Render.isWebGL&&ctx.setPathId(args[8]),ctx.beginPath(),Render.isWebGL?(ctx.movePath(args[0]+x,args[1]+y),ctx.moveTo(0,0)):ctx.moveTo(x+args[0],y+args[1]),ctx.arc(x+args[0],y+args[1],args[2],args[3],args[4]),ctx.closePath(),this._fillAndStroke(args[5],args[6],args[7],!0)},this._clipRect=function(x,y,args){this.ctx.clipRect(x+args[0],y+args[1],args[2],args[3])},this._fillRect=function(x,y,args){this.ctx.fillRect(x+args[0],y+args[1],args[2],args[3],args[4])},this._drawCircle=function(x,y,args){var ctx=this.ctx;Render.isWebGL&&ctx.setPathId(args[6]),Stat.drawCall++,ctx.beginPath(),Render.isWebGL&&ctx.movePath(args[0]+x,args[1]+y),ctx.arc(args[0]+x,args[1]+y,args[2],0,RenderContext.PI2),ctx.closePath(),this._fillAndStroke(args[3],args[4],args[5],!0)},this._fillCircle=function(x,y,args){Stat.drawCall++;var ctx=this.ctx;ctx.beginPath(),ctx.fillStyle=args[3],ctx.arc(args[0]+x,args[1]+y,args[2],0,RenderContext.PI2),ctx.fill()},this._setShader=function(x,y,args){this.ctx.setShader(args[0])},this._drawLine=function(x,y,args){var ctx=this.ctx;Render.isWebGL&&ctx.setPathId(args[6]),ctx.beginPath(),ctx.strokeStyle=args[4],ctx.lineWidth=args[5],Render.isWebGL?(ctx.movePath(x,y),ctx.moveTo(args[0],args[1]),ctx.lineTo(args[2],args[3])):(ctx.moveTo(x+args[0],y+args[1]),ctx.lineTo(x+args[2],y+args[3])),ctx.stroke()},this._drawLines=function(x,y,args){var ctx=this.ctx;Render.isWebGL&&ctx.setPathId(args[5]),ctx.beginPath(),x+=args[0],y+=args[1],Render.isWebGL&&ctx.movePath(x,y),ctx.strokeStyle=args[3],ctx.lineWidth=args[4];var points=args[2],i=2,n=points.length;if(Render.isWebGL)for(ctx.moveTo(points[0],points[1]);i<n;)ctx.lineTo(points[i++],points[i++]);else for(ctx.moveTo(x+points[0],y+points[1]);i<n;)ctx.lineTo(x+points[i++],y+points[i++]);ctx.stroke()},this._drawLinesWebGL=function(x,y,args){this.ctx.drawLines(x+this.x+args[0],y+this.y+args[1],args[2],args[3],args[4])},this._drawCurves=function(x,y,args){this.ctx.drawCurves(x,y,args)},this._draw=function(x,y,args){args[0].call(null,this,x,y)},this._transformByMatrix=function(x,y,args){this.ctx.transformByMatrix(args[0])},this._setTransform=function(x,y,args){this.ctx.setTransform(args[0],args[1],args[2],args[3],args[4],args[5])},this._setTransformByMatrix=function(x,y,args){this.ctx.setTransformByMatrix(args[0])},this._save=function(x,y,args){this.ctx.save()},this._restore=function(x,y,args){this.ctx.restore()},this._translate=function(x,y,args){this.ctx.translate(args[0],args[1])},this._transform=function(x,y,args){this.ctx.translate(args[1]+x,args[2]+y);var mat=args[0];this.ctx.transform(mat.a,mat.b,mat.c,mat.d,mat.tx,mat.ty),this.ctx.translate(-x-args[1],-y-args[2])},this._rotate=function(x,y,args){this.ctx.translate(args[1]+x,args[2]+y),this.ctx.rotate(args[0]),this.ctx.translate(-x-args[1],-y-args[2])},this._scale=function(x,y,args){this.ctx.translate(args[2]+x,args[3]+y),this.ctx.scale(args[0],args[1]),this.ctx.translate(-x-args[2],-y-args[3])},this._alpha=function(x,y,args){this.ctx.globalAlpha*=args[0]},this._setAlpha=function(x,y,args){this.ctx.globalAlpha=args[0]},this._fillText=function(x,y,args){this.ctx.fillText(args[0],args[1]+x,args[2]+y,args[3],args[4],args[5])},this._strokeText=function(x,y,args){this.ctx.strokeText(args[0],args[1]+x,args[2]+y,args[3],args[4],args[5],args[6])},this._fillBorderText=function(x,y,args){this.ctx.fillBorderText(args[0],args[1]+x,args[2]+y,args[3],args[4],args[5],args[6],args[7])},this._blendMode=function(x,y,args){this.ctx.globalCompositeOperation=args[0]},this._beginClip=function(x,y,args){this.ctx.beginClip&&this.ctx.beginClip(x+args[0],y+args[1],args[2],args[3])},this._setIBVB=function(x,y,args){this.ctx.setIBVB(args[0]+x,args[1]+y,args[2],args[3],args[4],args[5],args[6],args[7])},this._fillTrangles=function(x,y,args){this.ctx.fillTrangles(args[0],args[1]+x,args[2]+y,args[3],args[4])},this._drawPath=function(x,y,args){var ctx=this.ctx;Render.isWebGL&&ctx.setPathId(-1),ctx.beginPath(),x+=args[0],y+=args[1];for(var paths=args[2],i=0,n=paths.length;i<n;i++){var path=paths[i];switch(path[0]){case"moveTo":ctx.moveTo(x+path[1],y+path[2]);break;case"lineTo":ctx.lineTo(x+path[1],y+path[2]);break;case"arcTo":ctx.arcTo(x+path[1],y+path[2],x+path[3],y+path[4],path[5]);break;case"closePath":ctx.closePath()}}var brush=args[3];null!=brush&&(ctx.fillStyle=brush.fillStyle,ctx.fill());var pen=args[4];null!=pen&&(ctx.strokeStyle=pen.strokeStyle,ctx.lineWidth=pen.lineWidth||1,ctx.lineJoin=pen.lineJoin,ctx.lineCap=pen.lineCap,ctx.miterLimit=pen.miterLimit,ctx.stroke())},this.drawPoly=function(x,y,args){this.ctx.drawPoly(x+this.x+args[0],y+this.y+args[1],args[2],args[3],args[4],args[5],args[6])},this._drawPoly=function(x,y,args){var ctx=this.ctx,points=args[2],i=2,n=points.length;if(Render.isWebGL)for(ctx.setPathId(args[6]),ctx.beginPath(),x+=args[0],y+=args[1],ctx.movePath(x,y),ctx.moveTo(points[0],points[1]);i<n;)ctx.lineTo(points[i++],points[i++]);else for(ctx.beginPath(),x+=args[0],y+=args[1],ctx.moveTo(x+points[0],y+points[1]);i<n;)ctx.lineTo(x+points[i++],y+points[i++]);ctx.closePath(),this._fillAndStroke(args[3],args[4],args[5],args[7])},this._drawSkin=function(x,y,args){var tSprite=args[0];if(tSprite){var ctx=this.ctx;tSprite.render(ctx,x,y)}},this._drawParticle=function(x,y,args){this.ctx.drawParticle(x+this.x,y+this.y,args[0])},canvas?this.ctx=canvas.getContext("2d"):(canvas=HTMLCanvas.create("3D"),this.ctx=RunDriver.createWebGLContext2D(canvas),canvas._setContext(this.ctx)),canvas.size(width,height),this.canvas=canvas}__class(RenderContext,"laya.renders.RenderContext");var __proto=RenderContext.prototype;return __proto.destroy=function(){this.canvas&&(this.canvas.destroy(),this.canvas=null),this.ctx&&(this.ctx.destroy(),this.ctx=null)},__proto.drawTexture=function(tex,x,y,width,height){tex.loaded&&this.ctx.drawTexture(tex,x,y,width,height,this.x,this.y)},__proto._drawTextures=function(x,y,args){args[0].loaded&&this.ctx.drawTextures(args[0],args[1],x+this.x,y+this.y)},__proto.drawTextureWithTransform=function(tex,x,y,width,height,m,alpha){tex.loaded&&this.ctx.drawTextureWithTransform(tex,x,y,width,height,m,this.x,this.y,alpha)},__proto.fillQuadrangle=function(tex,x,y,point4,m){this.ctx.fillQuadrangle(tex,x,y,point4,m)},__proto.drawCanvas=function(canvas,x,y,width,height){this.ctx.drawCanvas(canvas,x+this.x,y+this.y,width,height)},__proto.drawRect=function(x,y,width,height,color,lineWidth){void 0===lineWidth&&(lineWidth=1);var ctx=this.ctx;ctx.strokeStyle=color,ctx.lineWidth=lineWidth,ctx.strokeRect(x+this.x,y+this.y,width,height,lineWidth)},__proto._fillAndStroke=function(fillColor,strokeColor,lineWidth,isConvexPolygon){void 0===isConvexPolygon&&(isConvexPolygon=!1);var ctx=this.ctx;null!=fillColor&&(ctx.fillStyle=fillColor,Render.isWebGL?ctx.fill(isConvexPolygon):ctx.fill()),null!=strokeColor&&lineWidth>0&&(ctx.strokeStyle=strokeColor,ctx.lineWidth=lineWidth,ctx.stroke())},__proto.clipRect=function(x,y,width,height){this.ctx.clipRect(x+this.x,y+this.y,width,height)},__proto.fillRect=function(x,y,width,height,fillStyle){this.ctx.fillRect(x+this.x,y+this.y,width,height,fillStyle)},__proto.drawCircle=function(x,y,radius,color,lineWidth){void 0===lineWidth&&(lineWidth=1),Stat.drawCall++;var ctx=this.ctx;ctx.beginPath(),ctx.strokeStyle=color,ctx.lineWidth=lineWidth,ctx.arc(x+this.x,y+this.y,radius,0,RenderContext.PI2),ctx.stroke()},__proto.fillCircle=function(x,y,radius,color){Stat.drawCall++;var ctx=this.ctx;ctx.beginPath(),ctx.fillStyle=color,ctx.arc(x+this.x,y+this.y,radius,0,RenderContext.PI2),ctx.fill()},__proto.setShader=function(shader){this.ctx.setShader(shader)},__proto.drawLine=function(fromX,fromY,toX,toY,color,lineWidth){void 0===lineWidth&&(lineWidth=1);var ctx=this.ctx;ctx.beginPath(),ctx.strokeStyle=color,ctx.lineWidth=lineWidth,ctx.moveTo(this.x+fromX,this.y+fromY),ctx.lineTo(this.x+toX,this.y+toY),ctx.stroke()},__proto.clear=function(){this.ctx.clear()},__proto.transformByMatrix=function(value){this.ctx.transformByMatrix(value)},__proto.setTransform=function(a,b,c,d,tx,ty){this.ctx.setTransform(a,b,c,d,tx,ty)},__proto.setTransformByMatrix=function(value){this.ctx.setTransformByMatrix(value)},__proto.save=function(){this.ctx.save()},__proto.restore=function(){this.ctx.restore()},__proto.translate=function(x,y){this.ctx.translate(x,y)},__proto.transform=function(a,b,c,d,tx,ty){this.ctx.transform(a,b,c,d,tx,ty)},__proto.rotate=function(angle){this.ctx.rotate(angle)},__proto.scale=function(scaleX,scaleY){this.ctx.scale(scaleX,scaleY)},__proto.alpha=function(value){this.ctx.globalAlpha*=value},__proto.setAlpha=function(value){this.ctx.globalAlpha=value},__proto.fillWords=function(words,x,y,font,color){this.ctx.fillWords(words,x,y,font,color)},__proto.fillBorderWords=function(words,x,y,font,fillColor,borderColor,lineWidth){this.ctx.fillBorderWords(words,x,y,font,fillColor,borderColor,lineWidth)},__proto.fillText=function(text,x,y,font,color,textAlign){this.ctx.fillText(text,x+this.x,y+this.y,font,color,textAlign)},__proto.strokeText=function(text,x,y,font,color,lineWidth,textAlign){this.ctx.strokeText(text,x+this.x,y+this.y,font,color,lineWidth,textAlign)},__proto.blendMode=function(type){this.ctx.globalCompositeOperation=type},__proto.flush=function(){this.ctx.flush&&this.ctx.flush()},__proto.addRenderObject=function(o){this.ctx.addRenderObject(o)},__proto.beginClip=function(x,y,w,h){this.ctx.beginClip&&this.ctx.beginClip(x,y,w,h)},__proto.endClip=function(){this.ctx.endClip&&this.ctx.endClip()},__proto.fillTrangles=function(x,y,args){this.ctx.fillTrangles(args[0],args[1],args[2],args[3],args.length>4?args[4]:null)},RenderContext.PI2=2*Math.PI,RenderContext}(),RenderSprite=function(){function RenderSprite(type,next){switch(this._next=next||RenderSprite.NORENDER,type){case 0:return void(this._fun=this._no);case 1:return void(this._fun=this._image);case 2:return void(this._fun=this._alpha);case 4:return void(this._fun=this._transform);case 8:return void(this._fun=this._blend);case 16:return void(this._fun=this._canvas);case 64:return void(this._fun=this._mask);case 128:return void(this._fun=this._clip);case 256:return void(this._fun=this._style);case 512:return void(this._fun=this._graphics);case 2048:return void(this._fun=this._childs);case 1024:return void(this._fun=this._custom);case 513:case 517:return void(this._fun=this._image2);case 32:return void(this._fun=Filter._filter);case 69905:return void(this._fun=RenderSprite._initRenderFun)}this.onCreate(type)}__class(RenderSprite,"laya.renders.RenderSprite");var __proto=RenderSprite.prototype;return __proto.onCreate=function(type){},__proto._style=function(sprite,context,x,y){sprite._style.render(sprite,context,x,y);var next=this._next;next._fun.call(next,sprite,context,x,y)},__proto._no=function(sprite,context,x,y){},__proto._custom=function(sprite,context,x,y){sprite.customRender(context,x,y);var tf=sprite._style._tf;this._next._fun.call(this._next,sprite,context,x-tf.translateX,y-tf.translateY)},__proto._clip=function(sprite,context,x,y){var next=this._next;if(next!=RenderSprite.NORENDER){var r=sprite._style.scrollRect;context.ctx.save(),context.ctx.clipRect(x,y,r.width,r.height),next._fun.call(next,sprite,context,x-r.x,y-r.y),context.ctx.restore()}},__proto._blend=function(sprite,context,x,y){var style=sprite._style;style.blendMode&&(context.ctx.globalCompositeOperation=style.blendMode);var next=this._next;next._fun.call(next,sprite,context,x,y),context.ctx.globalCompositeOperation="source-over"},__proto._mask=function(sprite,context,x,y){var next=this._next;next._fun.call(next,sprite,context,x,y);var mask=sprite.mask;mask&&(context.ctx.globalCompositeOperation="destination-in",(mask.numChildren>0||!mask.graphics._isOnlyOne())&&(mask.cacheAsBitmap=!0),mask.render(context,x,y)),context.ctx.globalCompositeOperation="source-over"},__proto._graphics=function(sprite,context,x,y){var tf=sprite._style._tf;sprite._graphics&&sprite._graphics._render(sprite,context,x-tf.translateX,y-tf.translateY);var next=this._next;next._fun.call(next,sprite,context,x,y)},__proto._image=function(sprite,context,x,y){var style=sprite._style;context.ctx.drawTexture2(x,y,style._tf.translateX,style._tf.translateY,sprite.transform,style.alpha,style.blendMode,sprite._graphics._one)},__proto._image2=function(sprite,context,x,y){var tf=sprite._style._tf;context.ctx.drawTexture2(x,y,tf.translateX,tf.translateY,sprite.transform,1,null,sprite._graphics._one)},__proto._alpha=function(sprite,context,x,y){var alpha;if((alpha=sprite._style.alpha)>.01){var temp=context.ctx.globalAlpha;context.ctx.globalAlpha*=alpha;var next=this._next;next._fun.call(next,sprite,context,x,y),context.ctx.globalAlpha=temp}},__proto._transform=function(sprite,context,x,y){var transform=sprite.transform,_next=this._next;transform&&_next!=RenderSprite.NORENDER?(context.save(),context.transform(transform.a,transform.b,transform.c,transform.d,transform.tx+x,transform.ty+y),_next._fun.call(_next,sprite,context,0,0),context.restore()):_next._fun.call(_next,sprite,context,x,y)},__proto._childs=function(sprite,context,x,y){var style=sprite._style;if(x+=-style._tf.translateX+style.paddingLeft,y+=-style._tf.translateY+style.paddingTop,style._calculation){var words=sprite._getWords();if(words){var tStyle=style;tStyle&&(tStyle.stroke?context.fillBorderWords(words,x,y,tStyle.font,tStyle.color,tStyle.strokeColor,tStyle.stroke):context.fillWords(words,x,y,tStyle.font,tStyle.color))}}var ele,childs=sprite._childs,n=childs.length;if(sprite.viewport||sprite.optimizeScrollRect&&sprite._style.scrollRect){var rect=sprite.viewport||sprite._style.scrollRect,left=rect.x,top=rect.y,right=rect.right,bottom=rect.bottom,_x=NaN,_y=NaN;for(i=0;i<n;++i)(ele=childs[i]).visible&&(_x=ele._x)<right&&_x+ele.width>left&&(_y=ele._y)<bottom&&_y+ele.height>top&&ele.render(context,x,y)}else for(var i=0;i<n;++i)(ele=childs[i])._style.visible&&ele.render(context,x,y)},__proto._canvas=function(sprite,context,x,y){var _cacheCanvas=sprite._$P.cacheCanvas,_next=this._next;if(_cacheCanvas){var canvas,left,top,tRec,tx=_cacheCanvas.ctx,_repaint=sprite._needRepaint()||!tx;if("bitmap"===_cacheCanvas.type?Stat.canvasBitmap++:Stat.canvasNormal++,_repaint){_cacheCanvas._cacheRec||(_cacheCanvas._cacheRec=new Rectangle);var w,h;(tRec=sprite.getSelfBounds()).x-=sprite.pivotX,tRec.y-=sprite.pivotY,tRec.x-=16,tRec.y-=16,tRec.width+=32,tRec.height+=32,tRec.x=Math.floor(tRec.x+x)-x,tRec.y=Math.floor(tRec.y+y)-y,tRec.width=Math.floor(tRec.width),tRec.height=Math.floor(tRec.height),_cacheCanvas._cacheRec.copyFrom(tRec),tRec=_cacheCanvas._cacheRec;var scaleX=Render.isWebGL?1:Browser.pixelRatio*Laya.stage.clientScaleX,scaleY=Render.isWebGL?1:Browser.pixelRatio*Laya.stage.clientScaleY;if(!Render.isWebGL){var tar,chainScaleX=1,chainScaleY=1;for(tar=sprite;tar&&tar!=Laya.stage;)chainScaleX*=tar.scaleX,chainScaleY*=tar.scaleY,tar=tar.parent;Render.isWebGL?(chainScaleX<1&&(scaleX*=chainScaleX),chainScaleY<1&&(scaleY*=chainScaleY)):(chainScaleX>1&&(scaleX*=chainScaleX),chainScaleY>1&&(scaleY*=chainScaleY))}if(w=tRec.width*scaleX,h=tRec.height*scaleY,left=tRec.x,top=tRec.y,Render.isWebGL&&"bitmap"===_cacheCanvas.type&&(w>2048||h>2048))return console.log("cache bitmap size larger than 2048,cache ignored"),_cacheCanvas.ctx&&(Pool.recover("RenderContext",_cacheCanvas.ctx),_cacheCanvas.ctx.canvas.size(0,0),_cacheCanvas.ctx=null),void _next._fun.call(_next,sprite,context,x,y);tx||(tx=_cacheCanvas.ctx=Pool.getItem("RenderContext")||new RenderContext(w,h,HTMLCanvas.create("AUTO"))),tx.ctx.sprite=sprite,(canvas=tx.canvas).clear(),(canvas.width!=w||canvas.height!=h)&&canvas.size(w,h),"bitmap"===_cacheCanvas.type&&(canvas.context.asBitmap=!0);var t;if(1!=scaleX||1!=scaleY){var ctx=tx.ctx;ctx.save(),ctx.scale(scaleX,scaleY),!Render.isConchWebGL&&Render.isConchApp&&(t=sprite._$P.cf)&&ctx.setFilterMatrix&&ctx.setFilterMatrix(t._mat,t._alpha),_next._fun.call(_next,sprite,tx,-left,-top),ctx.restore(),Render.isConchApp&&!Render.isConchWebGL||sprite._applyFilters()}else ctx=tx.ctx,!Render.isConchWebGL&&Render.isConchApp&&(t=sprite._$P.cf)&&ctx.setFilterMatrix&&ctx.setFilterMatrix(t._mat,t._alpha),_next._fun.call(_next,sprite,tx,-left,-top),Render.isConchApp&&!Render.isConchWebGL||sprite._applyFilters();sprite._$P.staticCache&&(_cacheCanvas.reCache=!1),Stat.canvasReCache++}else left=(tRec=_cacheCanvas._cacheRec).x,top=tRec.y,canvas=tx.canvas;context.drawCanvas(canvas,x+left,y+top,tRec.width,tRec.height)}else _next._fun.call(_next,sprite,tx,x,y)},RenderSprite.__init__=function(){var initRender,i=0,len=0;for(initRender=RunDriver.createRenderSprite(69905,null),len=RenderSprite.renders.length=4096,i=0;i<len;i++)RenderSprite.renders[i]=initRender;RenderSprite.renders[0]=RunDriver.createRenderSprite(0,null),function(value,o){for(var n=0,i=0;i<value.length;i++)n|=value[i],RenderSprite.renders[n]=o}([1,512,4,2],new RenderSprite(1,null)),RenderSprite.renders[513]=RunDriver.createRenderSprite(513,null),RenderSprite.renders[517]=new RenderSprite(517,null)},RenderSprite._initRenderFun=function(sprite,context,x,y){var type=sprite._renderType;(RenderSprite.renders[type]=RenderSprite._getTypeRender(type))._fun(sprite,context,x,y)},RenderSprite._getTypeRender=function(type){for(var rst=null,tType=2048;tType>1;)tType&type&&(rst=RunDriver.createRenderSprite(tType,rst)),tType>>=1;return rst},RenderSprite.IMAGE=1,RenderSprite.ALPHA=2,RenderSprite.TRANSFORM=4,RenderSprite.BLEND=8,RenderSprite.CANVAS=16,RenderSprite.FILTERS=32,RenderSprite.MASK=64,RenderSprite.CLIP=128,RenderSprite.STYLE=256,RenderSprite.GRAPHICS=512,RenderSprite.CUSTOM=1024,RenderSprite.CHILDS=2048,RenderSprite.INIT=69905,RenderSprite.renders=[],RenderSprite.NORENDER=new RenderSprite(0,null),RenderSprite}(),Context=function(){function Context(){this._repaint=!1}__class(Context,"laya.resource.Context");var __proto=Context.prototype;return __proto.setIsMainContext=function(){},__proto.drawTextures=function(tex,pos,tx,ty){Stat.drawCall+=pos.length/2;for(var w=tex.bitmap.width,h=tex.bitmap.height,i=0,sz=pos.length;i<sz;i+=2)this.drawTexture(tex,pos[i],pos[i+1],w,h,tx,ty)},__proto.drawCanvas=function(canvas,x,y,width,height){Stat.drawCall++,this.drawImage(canvas.source,x,y,width,height)},__proto.fillRect=function(x,y,width,height,style){Stat.drawCall++,style&&(this.fillStyle=style),this.__fillRect(x,y,width,height)},__proto.fillText=function(text,x,y,font,color,textAlign){Stat.drawCall++,arguments.length>3&&null!=font&&(this.font=font,this.fillStyle=color,this.textAlign=textAlign,this.textBaseline="top"),this.__fillText(text,x,y)},__proto.fillBorderText=function(text,x,y,font,fillColor,borderColor,lineWidth,textAlign){Stat.drawCall++,this.font=font,this.fillStyle=fillColor,this.textBaseline="top",this.strokeStyle=borderColor,this.lineWidth=lineWidth,this.textAlign=textAlign,this.__strokeText(text,x,y),this.__fillText(text,x,y)},__proto.strokeText=function(text,x,y,font,color,lineWidth,textAlign){Stat.drawCall++,arguments.length>3&&null!=font&&(this.font=font,this.strokeStyle=color,this.lineWidth=lineWidth,this.textAlign=textAlign,this.textBaseline="top"),this.__strokeText(text,x,y)},__proto.transformByMatrix=function(value){this.transform(value.a,value.b,value.c,value.d,value.tx,value.ty)},__proto.setTransformByMatrix=function(value){this.setTransform(value.a,value.b,value.c,value.d,value.tx,value.ty)},__proto.clipRect=function(x,y,width,height){Stat.drawCall++,this.beginPath(),this.rect(x,y,width,height),this.clip()},__proto.drawTexture=function(tex,x,y,width,height,tx,ty){Stat.drawCall++;var uv=tex.uv,w=tex.bitmap.width,h=tex.bitmap.height;this.drawImage(tex.source,uv[0]*w,uv[1]*h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,x+tx,y+ty,width,height)},__proto.drawTextureWithTransform=function(tex,x,y,width,height,m,tx,ty,alpha){Stat.drawCall++;var uv=tex.uv,w=tex.bitmap.width,h=tex.bitmap.height;this.save(),1!=alpha&&(this.globalAlpha*=alpha),m?(this.transform(m.a,m.b,m.c,m.d,m.tx+tx,m.ty+ty),this.drawImage(tex.source,uv[0]*w,uv[1]*h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,x,y,width,height)):this.drawImage(tex.source,uv[0]*w,uv[1]*h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,x+tx,y+ty,width,height),this.restore()},__proto.drawTexture2=function(x,y,pivotX,pivotY,m,alpha,blendMode,args2){"use strict";var tex=args2[0];if(tex.loaded&&tex.bitmap&&tex.source){Stat.drawCall++;var alphaChanged=1!==alpha;if(alphaChanged){var temp=this.globalAlpha;this.globalAlpha*=alpha}var uv=tex.uv,w=tex.bitmap.width,h=tex.bitmap.height;m?(this.save(),this.transform(m.a,m.b,m.c,m.d,m.tx+x,m.ty+y),this.drawImage(tex.source,uv[0]*w,uv[1]*h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,args2[1]-pivotX,args2[2]-pivotY,args2[3],args2[4]),this.restore()):this.drawImage(tex.source,uv[0]*w,uv[1]*h,(uv[2]-uv[0])*w,(uv[5]-uv[3])*h,args2[1]-pivotX+x,args2[2]-pivotY+y,args2[3],args2[4]),alphaChanged&&(this.globalAlpha=temp)}},__proto.fillTexture=function(texture,x,y,width,height,type,offset,other){if(!other.pat){if(texture.uv!=Texture.DEF_UV){var canvas=new HTMLCanvas("2D");canvas.getContext("2d"),canvas.size(texture.width,texture.height),canvas.context.drawTexture(texture,0,0,texture.width,texture.height,0,0),texture=new Texture(canvas)}other.pat=this.createPattern(texture.bitmap.source,type)}var oX=x,oY=y,sX=0,sY=0;offset&&(oX+=offset.x%texture.width,oY+=offset.y%texture.height,sX-=offset.x%texture.width,sY-=offset.y%texture.height),this.translate(oX,oY),this.fillRect(sX,sY,width,height,other.pat),this.translate(-oX,-oY)},__proto.flush=function(){return 0},__proto.fillWords=function(words,x,y,font,color){font&&(this.font=font),color&&(this.fillStyle=color);this.textBaseline="top",this.textAlign="left";for(var i=0,n=words.length;i<n;i++){var a=words[i];this.__fillText(a.char,a.x+x,a.y+y)}},__proto.fillBorderWords=function(words,x,y,font,color,borderColor,lineWidth){font&&(this.font=font),color&&(this.fillStyle=color),this.textBaseline="top",this.lineWidth=lineWidth,this.textAlign="left",this.strokeStyle=borderColor;for(var i=0,n=words.length;i<n;i++){var a=words[i];this.__strokeText(a.char,a.x+x,a.y+y),this.__fillText(a.char,a.x+x,a.y+y)}},__proto.destroy=function(){this.canvas.width=this.canvas.height=0},__proto.clear=function(){this.clearRect(0,0,this._canvas.width,this._canvas.height),this._repaint=!1},__proto.drawCurves=function(x,y,args){this.beginPath(),this.strokeStyle=args[3],this.lineWidth=args[4];var points=args[2];x+=args[0],y+=args[1],this.moveTo(x+points[0],y+points[1]);for(var i=2,n=points.length;i<n;)this.quadraticCurveTo(x+points[i++],y+points[i++],x+points[i++],y+points[i++]);this.stroke()},Context.__init__=function(to){var from=laya.resource.Context.prototype;(to=to||CanvasRenderingContext2D.prototype).__fillText=to.fillText,to.__fillRect=to.fillRect,to.__strokeText=to.strokeText,["drawTextures","fillWords","fillBorderWords","setIsMainContext","fillRect","strokeText","fillTexture","fillText","transformByMatrix","setTransformByMatrix","clipRect","drawTexture","drawTexture2","drawTextureWithTransform","flush","clear","destroy","drawCanvas","fillBorderText","drawCurves"].forEach(function(i){to[i]=from[i]||to[i]})},Context._default=new Context,Context}(),ResourceManager=function(){function ResourceManager(){this._id=0,this._name=null,this._resources=null,this._memorySize=0,this._garbageCollectionRate=NaN,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=0,this._id=++ResourceManager._uniqueIDCounter,this._name="Content Manager",ResourceManager._isResourceManagersSorted=!1,this._memorySize=0,this._isOverflow=!1,this.autoRelease=!1,this.autoReleaseMaxSize=536870912,this._garbageCollectionRate=.2,ResourceManager._resourceManagers.push(this),this._resources=[]}__class(ResourceManager,"laya.resource.ResourceManager");var __proto=ResourceManager.prototype;return Laya.imps(__proto,{"laya.resource.IDispose":!0}),__proto.getResourceByIndex=function(index){return this._resources[index]},__proto.getResourcesLength=function(){return this._resources.length},__proto.addResource=function(resource){return resource.resourceManager&&resource.resourceManager.removeResource(resource),-1===this._resources.indexOf(resource)&&(resource._resourceManager=this,this._resources.push(resource),this.addSize(resource.memorySize),!0)},__proto.removeResource=function(resource){var index=this._resources.indexOf(resource);return-1!==index&&(this._resources.splice(index,1),resource._resourceManager=null,this._memorySize-=resource.memorySize,!0)},__proto.unload=function(){for(var tempResources=this._resources.slice(0,this._resources.length),i=0;i<tempResources.length;i++)tempResources[i].dispose();tempResources.length=0},__proto.setUniqueName=function(newName){for(var isUnique=!0,i=0;i<ResourceManager._resourceManagers.length;i++)if(ResourceManager._resourceManagers[i]._name===newName&&ResourceManager._resourceManagers[i]!==this)return void(isUnique=!1);isUnique?this.name!=newName&&(this.name=newName,ResourceManager._isResourceManagersSorted=!1):this.setUniqueName(newName.concat("-copy"))},__proto.dispose=function(){if(this===ResourceManager._systemResourceManager)throw new Error("systemResourceManager不能被释放！");ResourceManager._resourceManagers.splice(ResourceManager._resourceManagers.indexOf(this),1),ResourceManager._isResourceManagersSorted=!1;for(var tempResources=this._resources.slice(0,this._resources.length),i=0;i<tempResources.length;i++){var resource=tempResources[i];resource.resourceManager.removeResource(resource),resource.dispose()}tempResources.length=0},__proto.addSize=function(add){add&&(this.autoRelease&&add>0&&this._memorySize+add>this.autoReleaseMaxSize&&this.garbageCollection((1-this._garbageCollectionRate)*this.autoReleaseMaxSize),this._memorySize+=add)},__proto.garbageCollection=function(reserveSize){var all=this._resources;(all=all.slice()).sort(function(a,b){if(!a||!b)throw new Error("a或b不能为空！");return a.released&&b.released?0:a.released?1:b.released?-1:a.lastUseFrameCount-b.lastUseFrameCount});for(var currentFrameCount=Stat.loopCount,i=0,n=all.length;i<n;i++){var resou=all[i];if(!(currentFrameCount-resou.lastUseFrameCount>1))return void(this._memorySize>=reserveSize&&(this._isOverflow=!0));if(resou.releaseResource(),this._memorySize<reserveSize)return void(this._isOverflow=!1)}},__getset(0,__proto,"id",function(){return this._id}),__getset(0,__proto,"name",function(){return this._name},function(value){!value&&""===value||this._name===value||(this._name=value,ResourceManager._isResourceManagersSorted=!1)}),__getset(0,__proto,"memorySize",function(){return this._memorySize}),__getset(1,ResourceManager,"systemResourceManager",function(){return null===ResourceManager._systemResourceManager&&(ResourceManager._systemResourceManager=new ResourceManager,ResourceManager._systemResourceManager._name="System Resource Manager"),ResourceManager._systemResourceManager}),__getset(1,ResourceManager,"sortedResourceManagersByName",function(){return ResourceManager._isResourceManagersSorted||(ResourceManager._isResourceManagersSorted=!0,ResourceManager._resourceManagers.sort(ResourceManager.compareResourceManagersByName)),ResourceManager._resourceManagers}),ResourceManager.__init__=function(){ResourceManager.currentResourceManager=ResourceManager.systemResourceManager},ResourceManager.getLoadedResourceManagerByIndex=function(index){return ResourceManager._resourceManagers[index]},ResourceManager.getLoadedResourceManagersCount=function(){return ResourceManager._resourceManagers.length},ResourceManager.recreateContentManagers=function(force){void 0===force&&(force=!1);for(var temp=ResourceManager.currentResourceManager,i=0;i<ResourceManager._resourceManagers.length;i++){ResourceManager.currentResourceManager=ResourceManager._resourceManagers[i];for(var j=0;j<ResourceManager.currentResourceManager._resources.length;j++)ResourceManager.currentResourceManager._resources[j].releaseResource(force),ResourceManager.currentResourceManager._resources[j].activeResource(force)}ResourceManager.currentResourceManager=temp},ResourceManager.releaseContentManagers=function(force){void 0===force&&(force=!1);for(var temp=ResourceManager.currentResourceManager,i=0;i<ResourceManager._resourceManagers.length;i++){ResourceManager.currentResourceManager=ResourceManager._resourceManagers[i];for(var j=0;j<ResourceManager.currentResourceManager._resources.length;j++){var resource=ResourceManager.currentResourceManager._resources[j];!resource.released&&resource.releaseResource(force)}}ResourceManager.currentResourceManager=temp},ResourceManager.compareResourceManagersByName=function(left,right){if(left==right)return 0;var x=left._name,y=right._name;if(null==x)return null==y?0:-1;if(null==y)return 1;var retval=x.localeCompare(y);return 0!=retval?retval:(right.setUniqueName(y),y=right._name,x.localeCompare(y))},ResourceManager._uniqueIDCounter=0,ResourceManager._systemResourceManager=null,ResourceManager._isResourceManagersSorted=!1,ResourceManager._resourceManagers=[],ResourceManager.currentResourceManager=null,ResourceManager}(),WXCanvas=function(){function WXCanvas(id){this._ctx=null,this._id=null,this.style={},this._id=id}__class(WXCanvas,"laya.resource.WXCanvas");var __proto=WXCanvas.prototype;return __proto.getContext=function(){var wx=laya.resource.WXCanvas.wx,ctx=wx.createContext();return ctx.id=this._id,ctx.fillRect=function(x,y,w,h){this.rect(x,y,w,h),this.fill()},ctx.strokeRect=function(x,y,w,h){this.rect(x,y,w,h),this.stroke()},ctx.___drawImage=ctx.drawImage,ctx.drawImage=function(){var img=arguments[0].tempFilePath;if(null!=img)switch(arguments.length){case 3:return void this.___drawImage(img,arguments[1],arguments[2],arguments[0].width,arguments[0].height);case 5:return void this.___drawImage(img,arguments[1],arguments[2],arguments[3],arguments[4]);case 9:return void this.___drawImage(img,arguments[5],arguments[6],arguments[7],arguments[8])}},Object.defineProperty(ctx,"strokeStyle",{set:function(value){this.setStrokeStyle(value)},enumerable:!1}),Object.defineProperty(ctx,"fillStyle",{set:function(value){this.setFillStyle(value)},enumerable:!1}),Object.defineProperty(ctx,"fontSize",{set:function(value){this.setFontSize(value)},enumerable:!1}),Object.defineProperty(ctx,"lineWidth",{set:function(value){this.setLineWidth(value)},enumerable:!1}),Context.__init__(ctx),ctx.flush=function(){wx.drawCanvas({canvasId:this.id,actions:this.getActions()})},ctx},__proto.oncontextmenu=function(e){},__proto.addEventListener=function(){},__getset(0,__proto,"id",function(){return this._id},function(value){this._id=value}),WXCanvas.wx=null,WXCanvas}(),System=function(){function System(){}return __class(System,"laya.system.System"),System.changeDefinition=function(name,classObj){Laya[name]=classObj;var str=name+"=classObj";eval(str)},System.__init__=function(){Render.isConchApp&&(conch.disableConchResManager(),conch.disableConchAutoRestoreLostedDevice())},System}(),Browser=function(){function Browser(){}return __class(Browser,"laya.utils.Browser"),__getset(1,Browser,"pixelRatio",function(){return Browser.__init__(),Browser.userAgent.indexOf("Mozilla/6.0(Linux; Android 6.0; HUAWEI NXT-AL10 Build/HUAWEINXT-AL10)")>-1?2:RunDriver.getPixelRatio()}),__getset(1,Browser,"height",function(){return Browser.__init__(),(Laya.stage&&Laya.stage.canvasRotation?Browser.clientWidth:Browser.clientHeight)*Browser.pixelRatio}),__getset(1,Browser,"clientWidth",function(){return Browser.__init__(),Browser.window.innerWidth||Browser.document.body.clientWidth}),__getset(1,Browser,"window",function(){return Browser.__init__(),Browser._window}),__getset(1,Browser,"clientHeight",function(){return Browser.__init__(),Browser.window.innerHeight||Browser.document.body.clientHeight||Browser.document.documentElement.clientHeight}),__getset(1,Browser,"width",function(){return Browser.__init__(),(Laya.stage&&Laya.stage.canvasRotation?Browser.clientHeight:Browser.clientWidth)*Browser.pixelRatio}),__getset(1,Browser,"container",function(){return Browser.__init__(),Browser._container||(Browser._container=Browser.createElement("div"),Browser._container.id="layaContainer",Browser.document.body.appendChild(Browser._container)),Browser._container},function(value){Browser._container=value}),__getset(1,Browser,"document",function(){return Browser.__init__(),Browser._document}),Browser.__init__=function(){if(!Browser._window){Browser._window=RunDriver.getWindow(),Browser._document=Browser.window.document,Browser._window.addEventListener("message",function(e){laya.utils.Browser._onMessage(e)},!1),Browser.document.__createElement=Browser.document.createElement,window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(c){return window.setTimeout(c,1e3/60)};var $BS=window.document.body.style;$BS.margin=0,$BS.overflow="hidden";for(var metas=window.document.getElementsByTagName("meta"),i=0,flag=!1,content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no";i<metas.length;){var meta=metas[i];if("viewport"==meta.name){meta.content=content,flag=!0;break}i++}flag||((meta=document.createElement("meta")).name="viewport",meta.content=content,document.getElementsByTagName("head")[0].appendChild(meta)),Browser.userAgent=Browser.window.navigator.userAgent,Browser.u=Browser.userAgent,Browser.onIOS=!!Browser.u.match(/\(i[^;]+;(U;)? CPU.+Mac OS X/),Browser.onMobile=Browser.u.indexOf("Mobile")>-1,Browser.onIPhone=Browser.u.indexOf("iPhone")>-1,Browser.onIPad=Browser.u.indexOf("iPad")>-1,Browser.onAndriod=Browser.u.indexOf("Android")>-1||Browser.u.indexOf("Adr")>-1,Browser.onWP=Browser.u.indexOf("Windows Phone")>-1,Browser.onQQBrowser=Browser.u.indexOf("QQBrowser")>-1,Browser.onMQQBrowser=Browser.u.indexOf("MQQBrowser")>-1,Browser.onWeiXin=Browser.u.indexOf("MicroMessenger")>-1,Browser.onPC=!Browser.onMobile,Browser.onSafari=!!Browser.u.match(/Version\/\d+\.\d\x20Mobile\/\S+\x20Safari/),Browser.httpProtocol="http:"==Browser.window.location.protocol,Browser.webAudioEnabled=!!(Browser.window.AudioContext||Browser.window.webkitAudioContext||Browser.window.mozAudioContext),Browser.soundType=Browser.webAudioEnabled?"WEBAUDIOSOUND":"AUDIOSOUND",Sound=Browser.webAudioEnabled?WebAudioSound:AudioSound,Browser.webAudioEnabled&&WebAudioSound.initWebAudio(),Browser.enableTouch="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,window.focus(),SoundManager._soundClass=Sound;var MainCanvas=null;if(Browser.window.MainCanvasID){var _wx=wx;_wx&&!_wx.createContext&&(_wx=null),null!=(WXCanvas.wx=_wx)?(MainCanvas=new WXCanvas(Browser.window.MainCanvasID),Context.prototype.flush=null,Browser.window.Image=function(){this.setSrc=function(url){this.__src=url;this.success()},this.success=function(res){this.width=200,this.height=200,this.tempFilePath=res?res.tempFilePath:this.__src,this.onload&&this.onload()},this.getSrc=function(){return this.__src},Object.defineProperty(this,"src",{get:this.getSrc,set:this.setSrc,enumerable:!1})}):MainCanvas=Browser.document.getElementById(Browser.window.MainCanvasID)}Render._mainCanvas=Render._mainCanvas||HTMLCanvas.create("2D",MainCanvas),Browser.canvas||(Browser.canvas=HTMLCanvas.create("2D"),Browser.context=Browser.canvas.getContext("2d"))}},Browser._onMessage=function(e){if(e.data&&"size"==e.data.name){if(Browser.window.innerWidth=e.data.width,Browser.window.innerHeight=e.data.height,Browser.window.__innerHeight=e.data.clientHeight,!Browser.document.createEvent)return void console.log("no document.createEvent");var evt=Browser.document.createEvent("HTMLEvents");return evt.initEvent("resize",!1,!1),void Browser.window.dispatchEvent(evt)}},Browser.createElement=function(type){return Browser.__init__(),Browser.document.__createElement(type)},Browser.getElementById=function(type){return Browser.__init__(),Browser.document.getElementById(type)},Browser.removeElement=function(ele){ele&&ele.parentNode&&ele.parentNode.removeChild(ele)},Browser.now=function(){return RunDriver.now()},Browser._window=null,Browser._document=null,Browser._container=null,Browser.userAgent=null,Browser.u=null,Browser.onIOS=!1,Browser.onMobile=!1,Browser.onIPhone=!1,Browser.onIPad=!1,Browser.onAndriod=!1,Browser.onWP=!1,Browser.onQQBrowser=!1,Browser.onMQQBrowser=!1,Browser.onSafari=!1,Browser.onWeiXin=!1,Browser.onPC=!1,Browser.httpProtocol=!1,Browser.webAudioEnabled=!1,Browser.soundType=null,Browser.enableTouch=!1,Browser.canvas=null,Browser.context=null,Browser.__init$=function(){},Browser}(),Byte=function(){function Byte(data){this._xd_=!0,this._allocated_=8,this._pos_=0,this._length=0,data?(this._u8d_=new Uint8Array(data),this._d_=new DataView(this._u8d_.buffer),this._length=this._d_.byteLength):this.___resizeBuffer(this._allocated_)}__class(Byte,"laya.utils.Byte");var __proto=Byte.prototype;return __proto.___resizeBuffer=function(len){try{var newByteView=new Uint8Array(len);null!=this._u8d_&&(this._u8d_.length<=len?newByteView.set(this._u8d_):newByteView.set(this._u8d_.subarray(0,len))),this._u8d_=newByteView,this._d_=new DataView(newByteView.buffer)}catch(err){throw"___resizeBuffer err:"+len}},__proto.getString=function(){return this.rUTF(this.getUint16())},__proto.getFloat32Array=function(start,len){var v=new Float32Array(this._d_.buffer.slice(start,start+len));return this._pos_+=len,v},__proto.getUint8Array=function(start,len){var v=new Uint8Array(this._d_.buffer.slice(start,start+len));return this._pos_+=len,v},__proto.getInt16Array=function(start,len){var v=new Int16Array(this._d_.buffer.slice(start,start+len));return this._pos_+=len,v},__proto.getFloat32=function(){var v=this._d_.getFloat32(this._pos_,this._xd_);return this._pos_+=4,v},__proto.getFloat64=function(){var v=this._d_.getFloat64(this._pos_,this._xd_);return this._pos_+=8,v},__proto.writeFloat32=function(value){this.ensureWrite(this._pos_+4),this._d_.setFloat32(this._pos_,value,this._xd_),this._pos_+=4},__proto.writeFloat64=function(value){this.ensureWrite(this._pos_+8),this._d_.setFloat64(this._pos_,value,this._xd_),this._pos_+=8},__proto.getInt32=function(){var float=this._d_.getInt32(this._pos_,this._xd_);return this._pos_+=4,float},__proto.getUint32=function(){var v=this._d_.getUint32(this._pos_,this._xd_);return this._pos_+=4,v},__proto.writeInt32=function(value){this.ensureWrite(this._pos_+4),this._d_.setInt32(this._pos_,value,this._xd_),this._pos_+=4},__proto.writeUint32=function(value){this.ensureWrite(this._pos_+4),this._d_.setUint32(this._pos_,value,this._xd_),this._pos_+=4},__proto.getInt16=function(){var us=this._d_.getInt16(this._pos_,this._xd_);return this._pos_+=2,us},__proto.getUint16=function(){var us=this._d_.getUint16(this._pos_,this._xd_);return this._pos_+=2,us},__proto.writeUint16=function(value){this.ensureWrite(this._pos_+2),this._d_.setUint16(this._pos_,value,this._xd_),this._pos_+=2},__proto.writeInt16=function(value){this.ensureWrite(this._pos_+2),this._d_.setInt16(this._pos_,value,this._xd_),this._pos_+=2},__proto.getUint8=function(){return this._d_.getUint8(this._pos_++)},__proto.writeUint8=function(value){this.ensureWrite(this._pos_+1),this._d_.setUint8(this._pos_,value),this._pos_++},__proto._getUInt8=function(pos){return this._d_.getUint8(pos)},__proto._getUint16=function(pos){return this._d_.getUint16(pos,this._xd_)},__proto._getMatrix=function(){return new Matrix(this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32(),this.getFloat32())},__proto.rUTF=function(len){for(var v="",max=this._pos_+len,c=0,f=String.fromCharCode,u=this._u8d_,i=0;this._pos_<max;)(c=u[this._pos_++])<128?0!=c&&(v+=f(c)):v+=f(c<224?(63&c)<<6|127&u[this._pos_++]:c<240?(31&c)<<12|(127&u[this._pos_++])<<6|127&u[this._pos_++]:(15&c)<<18|(127&u[this._pos_++])<<12|u[this._pos_++]<<6&127|127&u[this._pos_++]),i++;return v},__proto.getCustomString=function(len){for(var v="",ulen=0,c=0,f=String.fromCharCode,u=this._u8d_;len>0;)if((c=u[this._pos_])<128)v+=f(c),this._pos_++,len--;else for(ulen=c-128,this._pos_++,len-=ulen;ulen>0;)c=u[this._pos_++],v+=f(u[this._pos_++]<<8|c),ulen--;return v},__proto.clear=function(){this._pos_=0,this.length=0},__proto.__getBuffer=function(){return this._d_.buffer},__proto.writeUTFBytes=function(value){for(var i=0,sz=(value+="").length;i<sz;i++){var c=value.charCodeAt(i);c<=127?this.writeByte(c):c<=2047?(this.writeByte(192|c>>6),this.writeByte(128|63&c)):c<=65535?(this.writeByte(224|c>>12),this.writeByte(128|c>>6&63),this.writeByte(128|63&c)):(this.writeByte(240|c>>18),this.writeByte(128|c>>12&63),this.writeByte(128|c>>6&63),this.writeByte(128|63&c))}},__proto.writeUTFString=function(value){var tPos=0;tPos=this.pos,this.writeUint16(1),this.writeUTFBytes(value);var dPos=0;dPos=this.pos-tPos-2,this._d_.setUint16(tPos,dPos,this._xd_)},__proto.readUTFString=function(){this.pos;var len=0;return len=this.getUint16(),this.readUTFBytes(len)},__proto.getUTFString=function(){return this.readUTFString()},__proto.readUTFBytes=function(len){return void 0===len&&(len=-1),0==len?"":(len=len>0?len:this.bytesAvailable,this.rUTF(len))},__proto.getUTFBytes=function(len){return void 0===len&&(len=-1),this.readUTFBytes(len)},__proto.writeByte=function(value){this.ensureWrite(this._pos_+1),this._d_.setInt8(this._pos_,value),this._pos_+=1},__proto.readByte=function(){return this._d_.getInt8(this._pos_++)},__proto.getByte=function(){return this.readByte()},__proto.ensureWrite=function(lengthToEnsure){this._length<lengthToEnsure&&(this._length=lengthToEnsure),this._allocated_<lengthToEnsure&&(this.length=lengthToEnsure)},__proto.writeArrayBuffer=function(arraybuffer,offset,length){if(void 0===offset&&(offset=0),void 0===length&&(length=0),offset<0||length<0)throw"writeArrayBuffer error - Out of bounds";0==length&&(length=arraybuffer.byteLength-offset),this.ensureWrite(this._pos_+length);var uint8array=new Uint8Array(arraybuffer);this._u8d_.set(uint8array.subarray(offset,offset+length),this._pos_),this._pos_+=length},__getset(0,__proto,"buffer",function(){var rstBuffer=this._d_.buffer;return rstBuffer.byteLength==this.length?rstBuffer:rstBuffer.slice(0,this.length)}),__getset(0,__proto,"endian",function(){return this._xd_?"littleEndian":"bigEndian"},function(endianStr){this._xd_="littleEndian"==endianStr}),__getset(0,__proto,"length",function(){return this._length},function(value){this._allocated_<value?this.___resizeBuffer(this._allocated_=Math.floor(Math.max(value,2*this._allocated_))):this._allocated_>value&&this.___resizeBuffer(this._allocated_=value),this._length=value}),__getset(0,__proto,"pos",function(){return this._pos_},function(value){this._pos_=value,this._d_.byteOffset=value}),__getset(0,__proto,"bytesAvailable",function(){return this.length-this._pos_}),Byte.getSystemEndian=function(){if(!Byte._sysEndian){var buffer=new ArrayBuffer(2);new DataView(buffer).setInt16(0,256,!0),Byte._sysEndian=256===new Int16Array(buffer)[0]?"littleEndian":"bigEndian"}return Byte._sysEndian},Byte.BIG_ENDIAN="bigEndian",Byte.LITTLE_ENDIAN="littleEndian",Byte._sysEndian=null,Byte}(),CacheManger=function(){function CacheManger(){}return __class(CacheManger,"laya.utils.CacheManger"),CacheManger.regCacheByFunction=function(disposeFunction,getCacheListFunction){CacheManger.unRegCacheByFunction(disposeFunction,getCacheListFunction);var cache;cache={tryDispose:disposeFunction,getCacheList:getCacheListFunction},CacheManger._cacheList.push(cache)},CacheManger.unRegCacheByFunction=function(disposeFunction,getCacheListFunction){var i=0,len=0;for(len=CacheManger._cacheList.length,i=0;i<len;i++)if(CacheManger._cacheList[i].tryDispose==disposeFunction&&CacheManger._cacheList[i].getCacheList==getCacheListFunction)return void CacheManger._cacheList.splice(i,1)},CacheManger.forceDispose=function(){var i=0,len=CacheManger._cacheList.length;for(i=0;i<len;i++)CacheManger._cacheList[i].tryDispose(!0)},CacheManger.beginCheck=function(waitTime){void 0===waitTime&&(waitTime=15e3),Laya.timer.loop(waitTime,null,CacheManger._checkLoop)},CacheManger.stopCheck=function(){Laya.timer.clear(null,CacheManger._checkLoop)},CacheManger._checkLoop=function(){var cacheList=CacheManger._cacheList;if(!(cacheList.length<1)){var tTime=Browser.now(),count=0,len=0;for(len=count=cacheList.length;count>0&&(CacheManger._index++,CacheManger._index=CacheManger._index%len,cacheList[CacheManger._index].tryDispose(!1),!(Browser.now()-tTime>CacheManger.loopTimeLimit));)count--}},CacheManger.loopTimeLimit=2,CacheManger._cacheList=[],CacheManger._index=0,CacheManger}(),ClassUtils=function(){function ClassUtils(){}return __class(ClassUtils,"laya.utils.ClassUtils"),ClassUtils.regClass=function(className,classDef){ClassUtils._classMap[className]=classDef},ClassUtils.getRegClass=function(className){return ClassUtils._classMap[className]},ClassUtils.getInstance=function(className){var compClass=ClassUtils.getClass(className);return compClass?new compClass:(console.log("[error] Undefined class:",className),null)},ClassUtils.createByJson=function(json,node,root,customHandler,instanceHandler){"string"==typeof json&&(json=JSON.parse(json));var props=json.props;if(!node&&!(node=instanceHandler?instanceHandler.runWith(json):ClassUtils.getInstance(props.runtime||json.type)))return null;var child=json.child;if(child)for(var i=0,n=child.length;i<n;i++){var data=child[i];if("render"!==data.props.name&&"render"!==data.props.renderType||!node._$set_itemRender)if("Graphic"==data.type)ClassUtils.addGraphicsToSprite(data,node);else if(ClassUtils.isDrawType(data.type))ClassUtils.addGraphicToSprite(data,node,!0);else{var tChild=ClassUtils.createByJson(data,null,root,customHandler,instanceHandler);"Script"==data.type?tChild.owner=node:"mask"==data.props.renderType?node.mask=tChild:node.addChild(tChild)}else node.itemRender=data}if(props)for(var prop in props){var value=props[prop];"var"===prop&&root?root[value]=node:value instanceof Array&&"function"==typeof node[prop]?node[prop].apply(node,value):node[prop]=value}return customHandler&&json.customProps&&customHandler.runWith([node,json]),node.created&&node.created(),node},ClassUtils.addGraphicsToSprite=function(graphicO,sprite){var graphics;if((graphics=graphicO.child)&&!(graphics.length<1)){var g;g=ClassUtils._getGraphicsFromSprite(graphicO,sprite);var ox=0,oy=0;graphicO.props&&(ox=ClassUtils._getObjVar(graphicO.props,"x",0),oy=ClassUtils._getObjVar(graphicO.props,"y",0)),0!=ox&&0!=oy&&g.translate(ox,oy);var i=0,len=0;for(len=graphics.length,i=0;i<len;i++)ClassUtils._addGraphicToGraphics(graphics[i],g);0!=ox&&0!=oy&&g.translate(-ox,-oy)}},ClassUtils.addGraphicToSprite=function(graphicO,sprite,isChild){void 0===isChild&&(isChild=!1);var g;g=isChild?ClassUtils._getGraphicsFromSprite(graphicO,sprite):sprite.graphics,ClassUtils._addGraphicToGraphics(graphicO,g)},ClassUtils._getGraphicsFromSprite=function(dataO,sprite){var g;if(!dataO||!dataO.props)return sprite.graphics;var propsName;switch(propsName=dataO.props.renderType){case"hit":case"unHit":var hitArea;sprite.hitArea||(sprite.hitArea=new HitArea),(hitArea=sprite.hitArea)[propsName]||(hitArea[propsName]=new Graphics),g=hitArea[propsName]}return g||(g=sprite.graphics),g},ClassUtils._getTransformData=function(propsO){var m;(propsO.hasOwnProperty("pivotX")||propsO.hasOwnProperty("pivotY"))&&(m=m||new Matrix).translate(-ClassUtils._getObjVar(propsO,"pivotX",0),-ClassUtils._getObjVar(propsO,"pivotY",0));var sx=ClassUtils._getObjVar(propsO,"scaleX",1),sy=ClassUtils._getObjVar(propsO,"scaleY",1),rotate=ClassUtils._getObjVar(propsO,"rotation",0);ClassUtils._getObjVar(propsO,"skewX",0),ClassUtils._getObjVar(propsO,"skewY",0);return 1==sx&&1==sy&&0==rotate||((m=m||new Matrix).scale(sx,sy),m.rotate(.0174532922222222*rotate)),m},ClassUtils._addGraphicToGraphics=function(graphicO,graphic){var propsO;if(propsO=graphicO.props){var drawConfig;if(drawConfig=ClassUtils.DrawTypeDic[graphicO.type]){var g;g=graphic;var m,params=ClassUtils._getParams(propsO,drawConfig[1],drawConfig[2],drawConfig[3]);((m=ClassUtils._tM)||1!=ClassUtils._alpha)&&(g.save(),m&&g.transform(m),1!=ClassUtils._alpha&&g.alpha(ClassUtils._alpha)),g[drawConfig[0]].apply(g,params),(m||1!=ClassUtils._alpha)&&g.restore()}}},ClassUtils._adptLineData=function(params){return params[2]=parseFloat(params[0])+parseFloat(params[2]),params[3]=parseFloat(params[1])+parseFloat(params[3]),params},ClassUtils._adptTextureData=function(params){return params[0]=Loader.getRes(params[0]),params},ClassUtils._adptLinesData=function(params){return params[2]=ClassUtils._getPointListByStr(params[2]),params},ClassUtils.isDrawType=function(type){return"Image"!=type&&ClassUtils.DrawTypeDic.hasOwnProperty(type)},ClassUtils._getParams=function(obj,params,xPos,adptFun){void 0===xPos&&(xPos=0);var rst;(rst=ClassUtils._temParam).length=params.length;var i=0,len=0;for(len=params.length,i=0;i<len;i++)rst[i]=ClassUtils._getObjVar(obj,params[i][0],params[i][1]);ClassUtils._alpha=ClassUtils._getObjVar(obj,"alpha",1);var m;return m=ClassUtils._getTransformData(obj),m?(xPos||(xPos=0),m.translate(rst[xPos],rst[xPos+1]),rst[xPos]=rst[xPos+1]=0,ClassUtils._tM=m):ClassUtils._tM=null,adptFun&&ClassUtils[adptFun]&&(rst=ClassUtils[adptFun](rst)),rst},ClassUtils._getPointListByStr=function(str){var pointArr,i=0,len=0;for(len=(pointArr=str.split(",")).length,i=0;i<len;i++)pointArr[i]=parseFloat(pointArr[i]);return pointArr},ClassUtils._getObjVar=function(obj,key,noValue){return obj.hasOwnProperty(key)?obj[key]:noValue},ClassUtils._temParam=[],ClassUtils._classMap={Sprite:"laya.display.Sprite",Text:"laya.display.Text",Animation:"laya.display.Animation",Skeleton:"laya.ani.bone.Skeleton",Particle2D:"laya.particle.Particle2D",div:"laya.html.dom.HTMLDivElement",p:"laya.html.dom.HTMLElement",img:"laya.html.dom.HTMLImageElement",span:"laya.html.dom.HTMLElement",br:"laya.html.dom.HTMLBrElement",style:"laya.html.dom.HTMLStyleElement",font:"laya.html.dom.HTMLElement",a:"laya.html.dom.HTMLElement","#text":"laya.html.dom.HTMLElement"},ClassUtils.getClass=function(className){var classObject=ClassUtils._classMap[className]||className;return"string"==typeof classObject?Laya.__classmap[classObject]:classObject},ClassUtils._tM=null,ClassUtils._alpha=NaN,__static(ClassUtils,["DrawTypeDic",function(){return this.DrawTypeDic={Rect:["drawRect",[["x",0],["y",0],["width",0],["height",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Circle:["drawCircle",[["x",0],["y",0],["radius",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Pie:["drawPie",[["x",0],["y",0],["radius",0],["startAngle",0],["endAngle",0],["fillColor",null],["lineColor",null],["lineWidth",1]]],Image:["drawTexture",[["x",0],["y",0],["width",0],["height",0]]],Texture:["drawTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0]],1,"_adptTextureData"],FillTexture:["fillTexture",[["skin",null],["x",0],["y",0],["width",0],["height",0],["repeat",null]],1,"_adptTextureData"],FillText:["fillText",[["text",""],["x",0],["y",0],["font",null],["color",null],["textAlign",null]],1],Line:["drawLine",[["x",0],["y",0],["toX",0],["toY",0],["lineColor",null],["lineWidth",0]],0,"_adptLineData"],Lines:["drawLines",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Curves:["drawCurves",[["x",0],["y",0],["points",""],["lineColor",null],["lineWidth",0]],0,"_adptLinesData"],Poly:["drawPoly",[["x",0],["y",0],["points",""],["fillColor",null],["lineColor",null],["lineWidth",1]],0,"_adptLinesData"]}}]),ClassUtils}(),Color=function(){function Color(str){if(this._color=[],"string"==typeof str){this.strColor=str,null===str&&(str="#000000"),"#"==str.charAt(0)&&(str=str.substr(1));var len=str.length;if(3==len||4==len){for(var temp="",i=0;i<len;i++)temp+=str[i]+str[i];str=temp}var color=this.numColor=parseInt(str,16);if(8==str.length)return void(this._color=[parseInt(str.substr(0,2),16)/255,((16711680&color)>>16)/255,((65280&color)>>8)/255,(255&color)/255])}else color=this.numColor=str,this.strColor=Utils.toHexColor(color);this._color=[((16711680&color)>>16)/255,((65280&color)>>8)/255,(255&color)/255,1],this._color.__id=++Color._COLODID}return __class(Color,"laya.utils.Color"),Color._initDefault=function(){Color._DEFAULT={};for(var i in Color._COLOR_MAP)Color._SAVE[i]=Color._DEFAULT[i]=new Color(Color._COLOR_MAP[i]);return Color._DEFAULT},Color._initSaveMap=function(){Color._SAVE_SIZE=0,Color._SAVE={};for(var i in Color._DEFAULT)Color._SAVE[i]=Color._DEFAULT[i]},Color.create=function(str){var color=Color._SAVE[str+""];return null!=color?color:(Color._SAVE_SIZE<1e3||Color._initSaveMap(),Color._SAVE[str+""]=new Color(str))},Color._SAVE={},Color._SAVE_SIZE=0,Color._COLOR_MAP={white:"#FFFFFF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",black:"#000000",yellow:"#FFFF00",gray:"#AAAAAA"},Color._DEFAULT=Color._initDefault(),Color._COLODID=1,Color}(),Dictionary=function(){function Dictionary(){this._values=[],this._keys=[]}__class(Dictionary,"laya.utils.Dictionary");var __proto=Dictionary.prototype;return __proto.set=function(key,value){var index=this.indexOf(key);index>=0?this._values[index]=value:(this._keys.push(key),this._values.push(value))},__proto.indexOf=function(key){var index=this._keys.indexOf(key);return index>=0?index:(key="string"==typeof key?Number(key):"number"==typeof key?key.toString():key,this._keys.indexOf(key))},__proto.get=function(key){var index=this.indexOf(key);return index<0?null:this._values[index]},__proto.remove=function(key){var index=this.indexOf(key);return index>=0&&(this._keys.splice(index,1),this._values.splice(index,1),!0)},__proto.clear=function(){this._values.length=0,this._keys.length=0},__getset(0,__proto,"values",function(){return this._values}),__getset(0,__proto,"keys",function(){return this._keys}),Dictionary}(),Dragging=function(){function Dragging(){this.ratio=.92,this.maxOffset=60,this._dragging=!1,this._clickOnly=!0}__class(Dragging,"laya.utils.Dragging");var __proto=Dragging.prototype;return __proto.start=function(target,area,hasInertia,elasticDistance,elasticBackTime,data,disableMouseEvent,ratio){void 0===ratio&&(ratio=.92),this.clearTimer(),this.target=target,this.area=area,this.hasInertia=hasInertia,this.elasticDistance=area?elasticDistance:0,this.elasticBackTime=elasticBackTime,this.data=data,this._disableMouseEvent=disableMouseEvent,this.ratio=ratio,1!=target.globalScaleX||1!=target.globalScaleY?this._parent=target.parent:this._parent=Laya.stage,this._clickOnly=!0,this._dragging=!0,this._elasticRateX=this._elasticRateY=1,this._lastX=this._parent.mouseX,this._lastY=this._parent.mouseY,Laya.stage.on("mouseup",this,this.onStageMouseUp),Laya.stage.on("mouseout",this,this.onStageMouseUp),Laya.timer.frameLoop(1,this,this.loop)},__proto.clearTimer=function(){Laya.timer.clear(this,this.loop),Laya.timer.clear(this,this.tweenMove),this._tween&&(this._tween.recover(),this._tween=null)},__proto.stop=function(){this._dragging&&(MouseManager.instance.disableMouseEvent=!1,Laya.stage.off("mouseup",this,this.onStageMouseUp),Laya.stage.off("mouseout",this,this.onStageMouseUp),this._dragging=!1,this.target&&this.area&&this.backToArea(),this.clear())},__proto.loop=function(){var point=this._parent.getMousePoint(),mouseX=point.x,mouseY=point.y,offsetX=mouseX-this._lastX,offsetY=mouseY-this._lastY;if(this._clickOnly){if(!(Math.abs(offsetX*Laya.stage._canvasTransform.getScaleX())>1||Math.abs(offsetY*Laya.stage._canvasTransform.getScaleY())>1))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this.target.event("dragstart",this.data),MouseManager.instance.disableMouseEvent=this._disableMouseEvent,this.target._set$P("$_MOUSEDOWN",!1)}else this._offsets.push(offsetX,offsetY);0===offsetX&&0===offsetY||(this._lastX=mouseX,this._lastY=mouseY,this.target.x+=offsetX*this._elasticRateX,this.target.y+=offsetY*this._elasticRateY,this.area&&this.checkArea(),this.target.event("dragmove",this.data))},__proto.checkArea=function(){if(this.elasticDistance<=0)this.backToArea();else{if(this.target.x<this.area.x)var offsetX=this.area.x-this.target.x;else offsetX=this.target.x>this.area.x+this.area.width?this.target.x-this.area.x-this.area.width:0;if(this._elasticRateX=Math.max(0,1-offsetX/this.elasticDistance),this.target.y<this.area.y)var offsetY=this.area.y-this.target.y;else offsetY=this.target.y>this.area.y+this.area.height?this.target.y-this.area.y-this.area.height:0;this._elasticRateY=Math.max(0,1-offsetY/this.elasticDistance)}},__proto.backToArea=function(){this.target.x=Math.min(Math.max(this.target.x,this.area.x),this.area.x+this.area.width),this.target.y=Math.min(Math.max(this.target.y,this.area.y),this.area.y+this.area.height)},__proto.onStageMouseUp=function(e){if(MouseManager.instance.disableMouseEvent=!1,Laya.stage.off("mouseup",this,this.onStageMouseUp),Laya.stage.off("mouseout",this,this.onStageMouseUp),Laya.timer.clear(this,this.loop),!this._clickOnly&&this.target)if(this.hasInertia){this._offsets.length<1&&this._offsets.push(this._parent.mouseX-this._lastX,this._parent.mouseY-this._lastY),this._offsetX=this._offsetY=0;for(var len=this._offsets.length,n=Math.min(len,6),m=this._offsets.length-n,i=len-1;i>m;i--)this._offsetY+=this._offsets[i--],this._offsetX+=this._offsets[i];this._offsetX=this._offsetX/n*2,this._offsetY=this._offsetY/n*2,Math.abs(this._offsetX)>this.maxOffset&&(this._offsetX=this._offsetX>0?this.maxOffset:-this.maxOffset),Math.abs(this._offsetY)>this.maxOffset&&(this._offsetY=this._offsetY>0?this.maxOffset:-this.maxOffset),Laya.timer.frameLoop(1,this,this.tweenMove)}else this.elasticDistance>0?this.checkElastic():this.clear()},__proto.checkElastic=function(){var tx=NaN,ty=NaN;if(this.target.x<this.area.x?tx=this.area.x:this.target.x>this.area.x+this.area.width&&(tx=this.area.x+this.area.width),this.target.y<this.area.y?ty=this.area.y:this.target.y>this.area.y+this.area.height&&(ty=this.area.y+this.area.height),isNaN(tx)&&isNaN(ty))this.clear();else{var obj={};isNaN(tx)||(obj.x=tx),isNaN(ty)||(obj.y=ty),this._tween=Tween.to(this.target,obj,this.elasticBackTime,Ease.sineOut,Handler.create(this,this.clear),0,!1,!1)}},__proto.tweenMove=function(){this._offsetX*=this.ratio*this._elasticRateX,this._offsetY*=this.ratio*this._elasticRateY,this.target.x+=this._offsetX,this.target.y+=this._offsetY,this.area&&this.checkArea(),this.target.event("dragmove",this.data),(Math.abs(this._offsetX)<1&&Math.abs(this._offsetY)<1||this._elasticRateX<.5||this._elasticRateY<.5)&&(Laya.timer.clear(this,this.tweenMove),this.elasticDistance>0?this.checkElastic():this.clear())},__proto.clear=function(){if(this.target){this.clearTimer();var sp=this.target;this.target=null,this._parent=null,sp.event("dragend",this.data)}},Dragging}(),Ease=function(){function Ease(){}return __class(Ease,"laya.utils.Ease"),Ease.linearNone=function(t,b,c,d){return c*t/d+b},Ease.linearIn=function(t,b,c,d){return c*t/d+b},Ease.linearInOut=function(t,b,c,d){return c*t/d+b},Ease.linearOut=function(t,b,c,d){return c*t/d+b},Ease.bounceIn=function(t,b,c,d){return c-Ease.bounceOut(d-t,0,c,d)+b},Ease.bounceInOut=function(t,b,c,d){return t<.5*d?.5*Ease.bounceIn(2*t,0,c,d)+b:.5*Ease.bounceOut(2*t-d,0,c,d)+.5*c+b},Ease.bounceOut=function(t,b,c,d){return(t/=d)<1/2.75?c*(7.5625*t*t)+b:t<2/2.75?c*(7.5625*(t-=1.5/2.75)*t+.75)+b:t<2.5/2.75?c*(7.5625*(t-=2.25/2.75)*t+.9375)+b:c*(7.5625*(t-=2.625/2.75)*t+.984375)+b},Ease.backIn=function(t,b,c,d,s){return void 0===s&&(s=1.70158),c*(t/=d)*t*((s+1)*t-s)+b},Ease.backInOut=function(t,b,c,d,s){return void 0===s&&(s=1.70158),(t/=.5*d)<1?.5*c*(t*t*((1+(s*=1.525))*t-s))+b:c/2*((t-=2)*t*((1+(s*=1.525))*t+s)+2)+b},Ease.backOut=function(t,b,c,d,s){return void 0===s&&(s=1.70158),c*((t=t/d-1)*t*((s+1)*t+s)+1)+b},Ease.elasticIn=function(t,b,c,d,a,p){void 0===a&&(a=0),void 0===p&&(p=0);var s;return 0==t?b:1==(t/=d)?b+c:(p||(p=.3*d),!a||c>0&&a<c||c<0&&a<-c?(a=c,s=p/4):s=p/Ease.PI2*Math.asin(c/a),-a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*Ease.PI2/p)+b)},Ease.elasticInOut=function(t,b,c,d,a,p){void 0===a&&(a=0),void 0===p&&(p=0);var s;return 0==t?b:2==(t/=.5*d)?b+c:(p||(p=d*(.3*1.5)),!a||c>0&&a<c||c<0&&a<-c?(a=c,s=p/4):s=p/Ease.PI2*Math.asin(c/a),t<1?a*Math.pow(2,10*(t-=1))*Math.sin((t*d-s)*Ease.PI2/p)*-.5+b:a*Math.pow(2,-10*(t-=1))*Math.sin((t*d-s)*Ease.PI2/p)*.5+c+b)},Ease.elasticOut=function(t,b,c,d,a,p){void 0===a&&(a=0),void 0===p&&(p=0);var s;return 0==t?b:1==(t/=d)?b+c:(p||(p=.3*d),!a||c>0&&a<c||c<0&&a<-c?(a=c,s=p/4):s=p/Ease.PI2*Math.asin(c/a),a*Math.pow(2,-10*t)*Math.sin((t*d-s)*Ease.PI2/p)+c+b)},Ease.strongIn=function(t,b,c,d){return c*(t/=d)*t*t*t*t+b},Ease.strongInOut=function(t,b,c,d){return(t/=.5*d)<1?.5*c*t*t*t*t*t+b:.5*c*((t-=2)*t*t*t*t+2)+b},Ease.strongOut=function(t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},Ease.sineInOut=function(t,b,c,d){return.5*-c*(Math.cos(Math.PI*t/d)-1)+b},Ease.sineIn=function(t,b,c,d){return-c*Math.cos(t/d*Ease.HALF_PI)+c+b},Ease.sineOut=function(t,b,c,d){return c*Math.sin(t/d*Ease.HALF_PI)+b},Ease.quintIn=function(t,b,c,d){return c*(t/=d)*t*t*t*t+b},Ease.quintInOut=function(t,b,c,d){return(t/=.5*d)<1?.5*c*t*t*t*t*t+b:.5*c*((t-=2)*t*t*t*t+2)+b},Ease.quintOut=function(t,b,c,d){return c*((t=t/d-1)*t*t*t*t+1)+b},Ease.quartIn=function(t,b,c,d){return c*(t/=d)*t*t*t+b},Ease.quartInOut=function(t,b,c,d){return(t/=.5*d)<1?.5*c*t*t*t*t+b:.5*-c*((t-=2)*t*t*t-2)+b},Ease.quartOut=function(t,b,c,d){return-c*((t=t/d-1)*t*t*t-1)+b},Ease.cubicIn=function(t,b,c,d){return c*(t/=d)*t*t+b},Ease.cubicInOut=function(t,b,c,d){return(t/=.5*d)<1?.5*c*t*t*t+b:.5*c*((t-=2)*t*t+2)+b},Ease.cubicOut=function(t,b,c,d){return c*((t=t/d-1)*t*t+1)+b},Ease.quadIn=function(t,b,c,d){return c*(t/=d)*t+b},Ease.quadInOut=function(t,b,c,d){return(t/=.5*d)<1?.5*c*t*t+b:.5*-c*(--t*(t-2)-1)+b},Ease.quadOut=function(t,b,c,d){return-c*(t/=d)*(t-2)+b},Ease.expoIn=function(t,b,c,d){return 0==t?b:c*Math.pow(2,10*(t/d-1))+b-.001*c},Ease.expoInOut=function(t,b,c,d){return 0==t?b:t==d?b+c:(t/=.5*d)<1?.5*c*Math.pow(2,10*(t-1))+b:.5*c*(2-Math.pow(2,-10*--t))+b},Ease.expoOut=function(t,b,c,d){return t==d?b+c:c*(1-Math.pow(2,-10*t/d))+b},Ease.circIn=function(t,b,c,d){return-c*(Math.sqrt(1-(t/=d)*t)-1)+b},Ease.circInOut=function(t,b,c,d){return(t/=.5*d)<1?.5*-c*(Math.sqrt(1-t*t)-1)+b:.5*c*(Math.sqrt(1-(t-=2)*t)+1)+b},Ease.circOut=function(t,b,c,d){return c*Math.sqrt(1-(t=t/d-1)*t)+b},Ease.HALF_PI=.5*Math.PI,Ease.PI2=2*Math.PI,Ease}(),HitArea=function(){function HitArea(){this._hit=null,this._unHit=null}__class(HitArea,"laya.utils.HitArea");var __proto=HitArea.prototype;return __proto.isHit=function(x,y){return!!HitArea.isHitGraphic(x,y,this.hit)&&!HitArea.isHitGraphic(x,y,this.unHit)},__proto.contains=function(x,y){return this.isHit(x,y)},__getset(0,__proto,"hit",function(){return this._hit||(this._hit=new Graphics),this._hit},function(value){this._hit=value}),__getset(0,__proto,"unHit",function(){return this._unHit||(this._unHit=new Graphics),this._unHit},function(value){this._unHit=value}),HitArea.isHitGraphic=function(x,y,graphic){if(!graphic)return!1;var cmds;if(!(cmds=graphic.cmds)&&graphic._one&&((cmds=HitArea._cmds).length=1,cmds[0]=graphic._one),!cmds)return!1;var i=0,len=0;len=cmds.length;var cmd;for(i=0;i<len;i++)if(cmd=cmds[i]){var context=Render._context;switch(cmd.callee){case context._translate:case 6:x-=cmd[0],y-=cmd[1]}if(HitArea.isHitCmd(x,y,cmd))return!0}return!1},HitArea.isHitCmd=function(x,y,cmd){if(!cmd)return!1;var context=Render._context,rst=!1;switch(cmd.callee){case context._drawRect:case 13:HitArea._rec.setTo(cmd[0],cmd[1],cmd[2],cmd[3]),rst=HitArea._rec.contains(x,y);break;case context._drawCircle:case context._fillCircle:case 14:rst=(x-=cmd[0])*x+(y-=cmd[1])*y<cmd[2]*cmd[2];break;case context._drawPoly:case 18:x-=cmd[0],y-=cmd[1],rst=HitArea.ptInPolygon(x,y,cmd[2])}return rst},HitArea.ptInPolygon=function(x,y,areaPoints){var p;(p=HitArea._ptPoint).setTo(x,y);var nCross=0,p1x=NaN,p1y=NaN,p2x=NaN,p2y=NaN,len=0;len=areaPoints.length;for(var i=0;i<len;i+=2)p1x=areaPoints[i],p1y=areaPoints[i+1],p2x=areaPoints[(i+2)%len],p1y!=(p2y=areaPoints[(i+3)%len])&&(p.y<Math.min(p1y,p2y)||p.y>=Math.max(p1y,p2y)||(p.y-p1y)*(p2x-p1x)/(p2y-p1y)+p1x>p.x&&nCross++);return nCross%2==1},HitArea._cmds=[],__static(HitArea,["_rec",function(){return this._rec=new Rectangle},"_ptPoint",function(){return this._ptPoint=new Point}]),HitArea}(),HTMLChar=function(){function HTMLChar(char,w,h,style){this.char=char,this.charNum=char.charCodeAt(0),this._x=this._y=0,this.width=w,this.height=h,this.style=style,this.isWord=!HTMLChar._isWordRegExp.test(char)}__class(HTMLChar,"laya.utils.HTMLChar");var __proto=HTMLChar.prototype;return Laya.imps(__proto,{"laya.display.ILayout":!0}),__proto.setSprite=function(sprite){this._sprite=sprite},__proto.getSprite=function(){return this._sprite},__proto._isChar=function(){return!0},__proto._getCSSStyle=function(){return this.style},__getset(0,__proto,"width",function(){return this._w},function(value){this._w=value}),__getset(0,__proto,"x",function(){return this._x},function(value){this._sprite&&(this._sprite.x=value),this._x=value}),__getset(0,__proto,"y",function(){return this._y},function(value){this._sprite&&(this._sprite.y=value),this._y=value}),__getset(0,__proto,"height",function(){return this._h},function(value){this._h=value}),HTMLChar._isWordRegExp=new RegExp("[\\w.]",""),HTMLChar}(),Log=function(){function Log(){}return __class(Log,"laya.utils.Log"),Log.enable=function(){Log._logdiv||(Log._logdiv=Browser.window.document.createElement("div"),Browser.window.document.body.appendChild(Log._logdiv),Log._logdiv.style.cssText="pointer-events:none;border:white;overflow:hidden;z-index:1000000;background:rgba(100,100,100,0.6);color:white;position: absolute;left:0px;top:0px;width:50%;height:50%;")},Log.toggle=function(){var style=Log._logdiv.style;"1px"==style.width?style.width=style.height="50%":style.width=style.height="1px"},Log.print=function(value){Log._logdiv&&(Log._count>=Log.maxCount&&Log.clear(),Log._count++,Log._logdiv.innerText+=value+"\n",Log._logdiv.scrollTop=Log._logdiv.scrollHeight)},Log.clear=function(){Log._logdiv.innerText="",Log._count=0},Log._logdiv=null,Log._count=0,Log.maxCount=20,Log}(),Mouse=function(){function Mouse(){}return __class(Mouse,"laya.utils.Mouse"),__getset(1,Mouse,"cursor",function(){return Mouse._style.cursor},function(cursorStr){Mouse._style.cursor=cursorStr}),Mouse.hide=function(){"none"!=Mouse.cursor&&(Mouse._preCursor=Mouse.cursor,Mouse.cursor="none")},Mouse.show=function(){"none"==Mouse.cursor&&(Mouse._preCursor?Mouse.cursor=Mouse._preCursor:Mouse.cursor="auto")},Mouse._preCursor=null,__static(Mouse,["_style",function(){return this._style=Browser.document.body.style}]),Mouse}(),Pool=function(){function Pool(){}return __class(Pool,"laya.utils.Pool"),Pool.getPoolBySign=function(sign){return Pool._poolDic[sign]||(Pool._poolDic[sign]=[])},Pool.clearBySign=function(sign){Pool._poolDic[sign]&&(Pool._poolDic[sign].length=0)},Pool.recover=function(sign,item){item.__InPool||(item.__InPool=!0,Pool.getPoolBySign(sign).push(item))},Pool.getItemByClass=function(sign,cls){var pool=Pool.getPoolBySign(sign),rst=pool.length?pool.pop():new cls;return rst.__InPool=!1,rst},Pool.getItemByCreateFun=function(sign,createFun){var pool=Pool.getPoolBySign(sign),rst=pool.length?pool.pop():createFun();return rst.__InPool=!1,rst},Pool.getItem=function(sign){var pool=Pool.getPoolBySign(sign),rst=pool.length?pool.pop():null;return rst&&(rst.__InPool=!1),rst},Pool._poolDic={},Pool.InPoolSign="__InPool",Pool}(),PoolCache=function(){function PoolCache(){this.sign=null,this.maxCount=1e3}__class(PoolCache,"laya.utils.PoolCache");var __proto=PoolCache.prototype;return __proto.getCacheList=function(){return Pool.getPoolBySign(this.sign)},__proto.tryDispose=function(force){var list;(list=Pool.getPoolBySign(this.sign)).length>this.maxCount&&list.splice(this.maxCount,list.length-this.maxCount)},PoolCache.addPoolCacheManager=function(sign,maxCount){void 0===maxCount&&(maxCount=100);var cache;(cache=new PoolCache).sign=sign,cache.maxCount=maxCount,CacheManger.regCacheByFunction(Utils.bind(cache.tryDispose,cache),Utils.bind(cache.getCacheList,cache))},PoolCache}(),Stat=function(){function Stat(){}return __class(Stat,"laya.utils.Stat"),__getset(1,Stat,"onclick",null,function(fn){Stat._canvas.source.onclick=fn,Stat._canvas.source.style.pointerEvents=""}),Stat.show=function(x,y){if(void 0===x&&(x=0),void 0===y&&(y=0),Render.isConchApp)conch.showFPS&&conch.showFPS(x,y);else{var pixel=Browser.pixelRatio;Stat._width=130*pixel,Stat._vx=75*pixel,Stat._view[0]={title:"FPS(Canvas)",value:"_fpsStr",color:"yellow",units:"int"},Stat._view[1]={title:"Sprite",value:"spriteCount",color:"white",units:"int"},Stat._view[2]={title:"DrawCall",value:"drawCall",color:"white",units:"int"},Stat._view[3]={title:"CurMem",value:"currentMemorySize",color:"yellow",units:"M"},Render.isWebGL?(Stat._view[4]={title:"Shader",value:"shaderCall",color:"white",units:"int"},Render.is3DMode?(Stat._view[0].title="FPS(3D)",Stat._view[5]={title:"TriFaces",value:"trianglesFaces",color:"white",units:"int"},Stat._view[6]={title:"treeNodeColl",value:"treeNodeCollision",color:"white",units:"int"},Stat._view[7]={title:"treeSpriteColl",value:"treeSpriteCollision",color:"white",units:"int"}):(Stat._view[0].title="FPS(WebGL)",Stat._view[5]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"})):Stat._view[4]={title:"Canvas",value:"_canvasStr",color:"white",units:"int"},Stat._fontSize=12*pixel;for(var i=0;i<Stat._view.length;i++)Stat._view[i].x=4,Stat._view[i].y=i*Stat._fontSize+2*pixel;Stat._height=pixel*(12*Stat._view.length+3*pixel),Stat._canvas||(Stat._canvas=new HTMLCanvas("2D"),Stat._canvas.size(Stat._width,Stat._height),Stat._ctx=Stat._canvas.getContext("2d"),Stat._ctx.textBaseline="top",Stat._ctx.font=Stat._fontSize+"px Sans-serif",Stat._canvas.source.style.cssText="pointer-events:none;background:rgba(150,150,150,0.8);z-index:100000;position: absolute;left:"+x+"px;top:"+y+"px;width:"+Stat._width/pixel+"px;height:"+Stat._height/pixel+"px;"),Stat._first=!0,Stat.loop(),Stat._first=!1,Browser.container.appendChild(Stat._canvas.source),Stat.enable()}},Stat.enable=function(){Laya.timer.frameLoop(1,Stat,Stat.loop)},Stat.hide=function(){Browser.removeElement(Stat._canvas.source),Laya.timer.clear(Stat,Stat.loop)},Stat.clear=function(){Stat.trianglesFaces=Stat.drawCall=Stat.shaderCall=Stat.spriteCount=Stat.treeNodeCollision=Stat.treeSpriteCollision=Stat.canvasNormal=Stat.canvasBitmap=Stat.canvasReCache=0},Stat.loop=function(){Stat._count++;var timer=Browser.now();if(!(timer-Stat._timer<1e3)){var count=Stat._count;if(Stat.FPS=Math.round(1e3*count/(timer-Stat._timer)),Stat._canvas){Stat.trianglesFaces=Math.round(Stat.trianglesFaces/count),Stat.drawCall=Math.round(Stat.drawCall/count)-2,Stat.shaderCall=Math.round(Stat.shaderCall/count),Stat.spriteCount=Math.round(Stat.spriteCount/count)-1,Stat.canvasNormal=Math.round(Stat.canvasNormal/count),Stat.canvasBitmap=Math.round(Stat.canvasBitmap/count),Stat.canvasReCache=Math.ceil(Stat.canvasReCache/count),Stat.treeNodeCollision=Math.round(Stat.treeNodeCollision/count),Stat.treeSpriteCollision=Math.round(Stat.treeSpriteCollision/count);var delay=Stat.FPS>0?Math.floor(1e3/Stat.FPS).toString():" ";Stat._fpsStr=Stat.FPS+(Stat.renderSlow?" slow":"")+" "+delay,Stat._canvasStr=Stat.canvasReCache+"/"+Stat.canvasNormal+"/"+Stat.canvasBitmap,Stat.currentMemorySize=ResourceManager.systemResourceManager.memorySize;var ctx=Stat._ctx;ctx.clearRect(Stat._first?0:Stat._vx,0,Stat._width,Stat._height);for(var i=0;i<Stat._view.length;i++){var one=Stat._view[i];Stat._first&&(ctx.fillStyle="white",ctx.fillText(one.title,one.x,one.y,null,null,null)),ctx.fillStyle=one.color;var value=Stat[one.value];"M"==one.units&&(value=Math.floor(value/1048576*100)/100+" M"),ctx.fillText(value+"",one.x+Stat._vx,one.y,null,null,null)}Stat.clear()}Stat._count=0,Stat._timer=timer}},Stat.FPS=0,Stat.loopCount=0,Stat.shaderCall=0,Stat.drawCall=0,Stat.trianglesFaces=0,Stat.spriteCount=0,Stat.treeNodeCollision=0,Stat.treeSpriteCollision=0,Stat.canvasNormal=0,Stat.canvasBitmap=0,Stat.canvasReCache=0,Stat.renderSlow=!1,Stat.currentMemorySize=0,Stat._fpsStr=null,Stat._canvasStr=null,Stat._canvas=null,Stat._ctx=null,Stat._timer=0,Stat._count=0,Stat._width=0,Stat._height=100,Stat._view=[],Stat._fontSize=12,Stat._first=!1,Stat._vx=NaN,Stat}(),StringKey=function(){function StringKey(){this._strsToID={},this._idToStrs=[],this._length=0}__class(StringKey,"laya.utils.StringKey");var __proto=StringKey.prototype;return __proto.add=function(str){var index=this._strsToID[str];return null!=index?index:(this._idToStrs[this._length]=str,this._strsToID[str]=this._length++)},__proto.getID=function(str){var index=this._strsToID[str];return null==index?-1:index},__proto.getName=function(id){var str=this._idToStrs[id];return null==str?void 0:str},StringKey}(),Timer=function(){function Timer(){this._delta=0,this.scale=1,this.currFrame=0,this._mid=1,this._map=[],this._laters=[],this._handlers=[],this._temp=[],this._count=0,this.currTimer=Browser.now(),this._lastTimer=Browser.now(),Laya.timer&&Laya.timer.frameLoop(1,this,this._update)}var TimerHandler;__class(Timer,"laya.utils.Timer");var __proto=Timer.prototype;return __proto._update=function(){if(this.scale<=0)this._lastTimer=Browser.now();else{var frame=this.currFrame=this.currFrame+this.scale,now=Browser.now();this._delta=(now-this._lastTimer)*this.scale;var timer=this.currTimer=this.currTimer+this._delta;this._lastTimer=now;var handlers=this._handlers;for(this._count=0,i=0,n=handlers.length;i<n;i++)if(null!==(handler=handlers[i]).method){var t=handler.userFrame?frame:timer;t>=handler.exeTime&&(handler.repeat?t>handler.exeTime&&(handler.exeTime+=handler.delay,handler.run(!1),t>handler.exeTime&&(handler.exeTime+=Math.ceil((t-handler.exeTime)/handler.delay)*handler.delay)):handler.run(!0))}else this._count++;(this._count>30||frame%200==0)&&this._clearHandlers();for(var laters=this._laters,i=0,n=laters.length-1;i<=n;i++){var handler=laters[i];null!==handler.method&&handler.run(!1),this._recoverHandler(handler),i===n&&(n=laters.length-1)}laters.length=0}},__proto._clearHandlers=function(){for(var handlers=this._handlers,i=0,n=handlers.length;i<n;i++){var handler=handlers[i];null!==handler.method?this._temp.push(handler):this._recoverHandler(handler)}this._handlers=this._temp,this._temp=handlers,this._temp.length=0},__proto._recoverHandler=function(handler){this._map[handler.key]=null,handler.clear(),Timer._pool.push(handler)},__proto._create=function(useFrame,repeat,delay,caller,method,args,coverBefore){if(delay){if(coverBefore){var handler=this._getHandler(caller,method);if(handler)return handler.repeat=repeat,handler.userFrame=useFrame,handler.delay=delay,handler.caller=caller,handler.method=method,handler.args=args,void(handler.exeTime=delay+(useFrame?this.currFrame:Browser.now()))}(handler=Timer._pool.length>0?Timer._pool.pop():new TimerHandler).repeat=repeat,handler.userFrame=useFrame,handler.delay=delay,handler.caller=caller,handler.method=method,handler.args=args,handler.exeTime=delay+(useFrame?this.currFrame:Browser.now()),this._indexHandler(handler),this._handlers.push(handler)}else method.apply(caller,args)},__proto._indexHandler=function(handler){var caller=handler.caller,method=handler.method,cid=caller?caller.$_GID||(caller.$_GID=Utils.getGID()):0,mid=method.$_TID||(method.$_TID=1e5*this._mid++);handler.key=cid+mid,this._map[handler.key]=handler},__proto.once=function(delay,caller,method,args,coverBefore){void 0===coverBefore&&(coverBefore=!0),this._create(!1,!1,delay,caller,method,args,coverBefore)},__proto.loop=function(delay,caller,method,args,coverBefore){void 0===coverBefore&&(coverBefore=!0),this._create(!1,!0,delay,caller,method,args,coverBefore)},__proto.frameOnce=function(delay,caller,method,args,coverBefore){void 0===coverBefore&&(coverBefore=!0),this._create(!0,!1,delay,caller,method,args,coverBefore)},__proto.frameLoop=function(delay,caller,method,args,coverBefore){void 0===coverBefore&&(coverBefore=!0),this._create(!0,!0,delay,caller,method,args,coverBefore)},__proto.toString=function(){return"callLater:"+this._laters.length+" handlers:"+this._handlers.length+" pool:"+Timer._pool.length},__proto.clear=function(caller,method){var handler=this._getHandler(caller,method);handler&&(this._map[handler.key]=null,handler.key=0,handler.clear())},__proto.clearAll=function(caller){if(caller)for(var i=0,n=this._handlers.length;i<n;i++){var handler=this._handlers[i];handler.caller===caller&&(this._map[handler.key]=null,handler.key=0,handler.clear())}},__proto._getHandler=function(caller,method){var cid=caller?caller.$_GID||(caller.$_GID=Utils.getGID()):0,mid=method.$_TID||(method.$_TID=1e5*this._mid++);return this._map[cid+mid]},__proto.callLater=function(caller,method,args){if(null==this._getHandler(caller,method)){if(Timer._pool.length)var handler=Timer._pool.pop();else handler=new TimerHandler;handler.caller=caller,handler.method=method,handler.args=args,this._indexHandler(handler),this._laters.push(handler)}},__proto.runCallLater=function(caller,method){var handler=this._getHandler(caller,method);handler&&null!=handler.method&&(this._map[handler.key]=null,handler.run(!0))},__proto.runTimer=function(caller,method){this.runCallLater(caller,method)},__getset(0,__proto,"delta",function(){return this._delta}),Timer._pool=[],Timer.__init$=function(){TimerHandler=function(){function TimerHandler(){this.key=0,this.repeat=!1,this.delay=0,this.userFrame=!1,this.exeTime=0,this.caller=null,this.method=null,this.args=null}__class(TimerHandler,"");var __proto=TimerHandler.prototype;return __proto.clear=function(){this.caller=null,this.method=null,this.args=null},__proto.run=function(widthClear){var caller=this.caller;if(caller&&caller.destroyed)return this.clear();var method=this.method,args=this.args;widthClear&&this.clear(),null!=method&&(args?method.apply(caller,args):method.call(caller))},TimerHandler}()},Timer}(),Tween=function(){function Tween(){this.gid=0}__class(Tween,"laya.utils.Tween");var __proto=Tween.prototype;return __proto.to=function(target,props,duration,ease,complete,delay,coverBefore){return void 0===delay&&(delay=0),void 0===coverBefore&&(coverBefore=!1),this._create(target,props,duration,ease,complete,delay,coverBefore,!0,!1,!0)},__proto.from=function(target,props,duration,ease,complete,delay,coverBefore){return void 0===delay&&(delay=0),void 0===coverBefore&&(coverBefore=!1),this._create(target,props,duration,ease,complete,delay,coverBefore,!1,!1,!0)},__proto._create=function(target,props,duration,ease,complete,delay,coverBefore,isTo,usePool,runNow){if(!target)throw new Error("Tween:target is null");this._target=target,this._duration=duration,this._ease=ease||props.ease||Tween.easeNone,this._complete=complete||props.complete,this._delay=delay,this._props=[],this._usedTimer=0,this._startTimer=Browser.now(),this._usedPool=usePool,this.update=props.update;var gid=target.$_GID||(target.$_GID=Utils.getGID());return Tween.tweenMap[gid]?(coverBefore&&Tween.clearTween(target),Tween.tweenMap[gid].push(this)):Tween.tweenMap[gid]=[this],runNow?delay<=0?this.firstStart(target,props,isTo):Laya.timer.once(delay,this,this.firstStart,[target,props,isTo]):this._initProps(target,props,isTo),this},__proto.firstStart=function(target,props,isTo){target.destroyed?this.clear():(this._initProps(target,props,isTo),this._beginLoop())},__proto._initProps=function(target,props,isTo){for(var p in props)if("number"==typeof target[p]){var start=isTo?target[p]:props[p],end=isTo?props[p]:target[p];this._props.push([p,start,end-start]),isTo||(target[p]=start)}},__proto._beginLoop=function(){Laya.timer.frameLoop(1,this,this._doEase)},__proto._doEase=function(){this._updateEase(Browser.now())},__proto._updateEase=function(time){var target=this._target;if(target){if(target.destroyed)return Tween.clearTween(target);var usedTimer=this._usedTimer=time-this._startTimer-this._delay;if(!(usedTimer<0)){if(usedTimer>=this._duration)return this.complete();for(var ratio=usedTimer>0?this._ease(usedTimer,0,1,this._duration):0,props=this._props,i=0,n=props.length;i<n;i++){var prop=props[i];target[prop[0]]=prop[1]+ratio*prop[2]}this.update&&this.update.run()}}},__proto.complete=function(){if(this._target){Laya.timer.runTimer(this,this.firstStart);for(var target=this._target,props=this._props,handler=this._complete,i=0,n=props.length;i<n;i++){var prop=props[i];target[prop[0]]=prop[1]+prop[2]}this.update&&this.update.run(),this.clear(),handler&&handler.run()}},__proto.pause=function(){Laya.timer.clear(this,this._beginLoop),Laya.timer.clear(this,this._doEase)},__proto.setStartTime=function(startTime){this._startTimer=startTime},__proto.clear=function(){this._target&&(this._remove(),this._clear())},__proto._clear=function(){this.pause(),Laya.timer.clear(this,this.firstStart),this._complete=null,this._target=null,this._ease=null,this._props=null,this._usedPool&&(this.update=null,Pool.recover("tween",this))},__proto.recover=function(){this._usedPool=!0,this._clear()},__proto._remove=function(){var tweens=Tween.tweenMap[this._target.$_GID];if(tweens)for(var i=0,n=tweens.length;i<n;i++)if(tweens[i]===this){tweens.splice(i,1);break}},__proto.restart=function(){this.pause(),this._usedTimer=0,this._startTimer=Browser.now();for(var props=this._props,i=0,n=props.length;i<n;i++){var prop=props[i];this._target[prop[0]]=prop[1]}Laya.timer.once(this._delay,this,this._beginLoop)},__proto.resume=function(){this._usedTimer>=this._duration||(this._startTimer=Browser.now()-this._usedTimer-this._delay,this._beginLoop())},__getset(0,__proto,"progress",null,function(v){var uTime=v*this._duration;this._startTimer=Browser.now()-this._delay-uTime}),Tween.to=function(target,props,duration,ease,complete,delay,coverBefore,autoRecover){return void 0===delay&&(delay=0),void 0===coverBefore&&(coverBefore=!1),void 0===autoRecover&&(autoRecover=!0),Pool.getItemByClass("tween",Tween)._create(target,props,duration,ease,complete,delay,coverBefore,!0,autoRecover,!0)},Tween.from=function(target,props,duration,ease,complete,delay,coverBefore,autoRecover){return void 0===delay&&(delay=0),void 0===coverBefore&&(coverBefore=!1),void 0===autoRecover&&(autoRecover=!0),Pool.getItemByClass("tween",Tween)._create(target,props,duration,ease,complete,delay,coverBefore,!1,autoRecover,!0)},Tween.clearAll=function(target){if(target&&target.$_GID){var tweens=Tween.tweenMap[target.$_GID];if(tweens){for(var i=0,n=tweens.length;i<n;i++)tweens[i]._clear();tweens.length=0}}},Tween.clear=function(tween){tween.clear()},Tween.clearTween=function(target){Tween.clearAll(target)},Tween.easeNone=function(t,b,c,d){return c*t/d+b},Tween.tweenMap={},Tween}(),Utils=function(){function Utils(){}return __class(Utils,"laya.utils.Utils"),Utils.toRadian=function(angle){return angle*Utils._pi2},Utils.toAngle=function(radian){return radian*Utils._pi},Utils.toHexColor=function(color){if(color<0||isNaN(color))return null;for(var str=color.toString(16);str.length<6;)str="0"+str;return"#"+str},Utils.getGID=function(){return Utils._gid++},Utils.concatArray=function(source,array){if(!array)return source;if(!source)return array;var i=0,len=array.length;for(i=0;i<len;i++)source.push(array[i]);return source},Utils.clearArray=function(array){return array?(array.length=0,array):array},Utils.copyArray=function(source,array){if(source||(source=[]),!array)return source;source.length=array.length;var i=0,len=array.length;for(i=0;i<len;i++)source[i]=array[i];return source},Utils.getGlobalRecByPoints=function(sprite,x0,y0,x1,y1){var newLTPoint;newLTPoint=new Point(x0,y0),newLTPoint=sprite.localToGlobal(newLTPoint);var newRBPoint;return newRBPoint=new Point(x1,y1),newRBPoint=sprite.localToGlobal(newRBPoint),Rectangle._getWrapRec([newLTPoint.x,newLTPoint.y,newRBPoint.x,newRBPoint.y])},Utils.getGlobalPosAndScale=function(sprite){return Utils.getGlobalRecByPoints(sprite,0,0,1,1)},Utils.bind=function(fun,scope){return fun.bind(scope)},Utils.measureText=function(txt,font){return RunDriver.measureText(txt,font)},Utils.updateOrder=function(array){if(!array||array.length<2)return!1;for(var c,i=1,j=0,len=array.length,key=NaN;i<len;){for(c=array[j=i],key=array[j]._zOrder;--j>-1&&array[j]._zOrder>key;)array[j+1]=array[j];array[j+1]=c,i++}var model=c.parent.conchModel;if(model)if(null!=model.updateZOrder)model.updateZOrder();else{for(i=0;i<len;i++)model.removeChild(array[i].conchModel);for(i=0;i<len;i++)model.addChildAt(array[i].conchModel,i)}return!0},Utils.transPointList=function(points,x,y){var i=0,len=points.length;for(i=0;i<len;i+=2)points[i]+=x,points[i+1]+=y},Utils.parseInt=function(str,radix){void 0===radix&&(radix=0);var result=Browser.window.parseInt(str,radix);return isNaN(result)?0:result},Utils.getFileExtension=function(path){Utils._extReg.lastIndex=path.lastIndexOf(".");var result=Utils._extReg.exec(path);return result&&result.length>1?result[1].toLowerCase():null},Utils._gid=1,Utils._pi=180/Math.PI,Utils._pi2=Math.PI/180,Utils._extReg=/\.(\w+)\??/g,Utils.parseXMLFromString=function(value){var rst;if(value=value.replace(/>\s+</g,"><"),(rst=(new DOMParser).parseFromString(value,"text/xml")).firstChild.textContent.indexOf("This page contains the following errors")>-1)throw new Error(rst.firstChild.firstChild.textContent);return rst},Utils}(),VectorGraphManager=function(){function VectorGraphManager(){this.useDic={},this.shapeDic={},this.shapeLineDic={},this._id=0,this._checkKey=!1,this._freeIdArray=[],Render.isWebGL&&CacheManger.regCacheByFunction(Utils.bind(this.startDispose,this),Utils.bind(this.getCacheList,this))}__class(VectorGraphManager,"laya.utils.VectorGraphManager");var __proto=VectorGraphManager.prototype;return __proto.getId=function(){return this._id++},__proto.addShape=function(id,shape){this.shapeDic[id]=shape,this.useDic[id]||(this.useDic[id]=!0)},__proto.addLine=function(id,Line){this.shapeLineDic[id]=Line,this.shapeLineDic[id]||(this.shapeLineDic[id]=!0)},__proto.getShape=function(id){this._checkKey&&null!=this.useDic[id]&&(this.useDic[id]=!0)},__proto.deleteShape=function(id){this.shapeDic[id]&&(this.shapeDic[id]=null,delete this.shapeDic[id]),this.shapeLineDic[id]&&(this.shapeLineDic[id]=null,delete this.shapeLineDic[id]),null!=this.useDic[id]&&delete this.useDic[id]},__proto.getCacheList=function(){var str,list=[];for(str in this.shapeDic)list.push(this.shapeDic[str]);for(str in this.shapeLineDic)list.push(this.shapeLineDic[str]);return list},__proto.startDispose=function(key){var str;for(str in this.useDic)this.useDic[str]=!1;this._checkKey=!0},__proto.endDispose=function(){if(this._checkKey){var str;for(str in this.useDic)this.useDic[str]||this.deleteShape(str);this._checkKey=!1}},VectorGraphManager.getInstance=function(){return VectorGraphManager.instance=VectorGraphManager.instance||new VectorGraphManager},VectorGraphManager.instance=null,VectorGraphManager}(),WordText=function(){function WordText(){this.id=NaN,this.save=[],this.toUpperCase=null,this.changed=!1,this._text=null}__class(WordText,"laya.utils.WordText");var __proto=WordText.prototype;return __proto.setText=function(txt){this.changed=!0,this._text=txt},__proto.toString=function(){return this._text},__proto.charCodeAt=function(i){return this._text?this._text.charCodeAt(i):NaN},__proto.charAt=function(i){return this._text?this._text.charAt(i):null},__getset(0,__proto,"length",function(){return this._text?this._text.length:0}),WordText}(),Node=function(_super){function Node(){this.name="",this.destroyed=!1,this._displayedInStage=!1,this._parent=null,this.conchModel=null,Node.__super.call(this),this._childs=Node.ARRAY_EMPTY,this.timer=Laya.timer,this._$P=Node.PROP_EMPTY,this.conchModel=Render.isConchNode?this.createConchModel():null}__class(Node,"laya.display.Node",_super);var __proto=Node.prototype;return __proto.createConchModel=function(){return null},__proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),this.destroyed=!0,this._parent&&this._parent.removeChild(this),this._childs&&(destroyChild?this.destroyChildren():this.removeChildren()),this._childs=null,this._$P=null,this.offAll()},__proto.destroyChildren=function(){if(this._childs)for(var i=this._childs.length-1;i>-1;i--)this._childs[i].destroy(!0)},__proto.addChild=function(node){if(!node||this.destroyed||node===this)return node;if(node.zOrder&&this._set$P("hasZorder",!0),node._parent===this){var index=this.getChildIndex(node);index!==this._childs.length-1&&(this._childs.splice(index,1),this._childs.push(node),this.conchModel&&(this.conchModel.removeChild(node.conchModel),this.conchModel.addChildAt(node.conchModel,this._childs.length-1)),this._childChanged())}else node.parent&&node.parent.removeChild(node),this._childs===Node.ARRAY_EMPTY&&(this._childs=[]),this._childs.push(node),this.conchModel&&this.conchModel.addChildAt(node.conchModel,this._childs.length-1),node.parent=this,this._childChanged();return node},__proto.addChildren=function(__args){for(var args=arguments,i=0,n=args.length;i<n;)this.addChild(args[i++])},__proto.addChildAt=function(node,index){if(!node||this.destroyed||node===this)return node;if(node.zOrder&&this._set$P("hasZorder",!0),index>=0&&index<=this._childs.length){if(node._parent===this){var oldIndex=this.getChildIndex(node);this._childs.splice(oldIndex,1),this._childs.splice(index,0,node),this.conchModel&&(this.conchModel.removeChild(node.conchModel),this.conchModel.addChildAt(node.conchModel,index)),this._childChanged()}else node.parent&&node.parent.removeChild(node),this._childs===Node.ARRAY_EMPTY&&(this._childs=[]),this._childs.splice(index,0,node),this.conchModel&&this.conchModel.addChildAt(node.conchModel,index),node.parent=this;return node}throw new Error("appendChildAt:The index is out of bounds")},__proto.getChildIndex=function(node){return this._childs.indexOf(node)},__proto.getChildByName=function(name){for(var nodes=this._childs,i=0,n=nodes.length;i<n;i++){var node=nodes[i];if(node.name===name)return node}return null},__proto._get$P=function(key){return this._$P[key]},__proto._set$P=function(key,value){return this.destroyed||(this._$P===Node.PROP_EMPTY&&(this._$P={}),this._$P[key]=value),value},__proto.getChildAt=function(index){return this._childs[index]},__proto.setChildIndex=function(node,index){var childs=this._childs;if(index<0||index>=childs.length)throw new Error("setChildIndex:The index is out of bounds.");var oldIndex=this.getChildIndex(node);if(oldIndex<0)throw new Error("setChildIndex:node is must child of this object.");return childs.splice(oldIndex,1),childs.splice(index,0,node),this.conchModel&&(this.conchModel.removeChild(node.conchModel),this.conchModel.addChildAt(node.conchModel,index)),this._childChanged(),node},__proto._childChanged=function(child){},__proto.removeChild=function(node){if(!this._childs)return node;var index=this._childs.indexOf(node);return this.removeChildAt(index)},__proto.removeSelf=function(){return this._parent&&this._parent.removeChild(this),this},__proto.removeChildByName=function(name){var node=this.getChildByName(name);return node&&this.removeChild(node),node},__proto.removeChildAt=function(index){var node=this.getChildAt(index);return node&&(this._childs.splice(index,1),this.conchModel&&this.conchModel.removeChild(node.conchModel),node.parent=null),node},__proto.removeChildren=function(beginIndex,endIndex){if(void 0===beginIndex&&(beginIndex=0),void 0===endIndex&&(endIndex=2147483647),this._childs&&this._childs.length>0){var childs=this._childs;if(0===beginIndex&&endIndex>=n){var arr=childs;this._childs=Node.ARRAY_EMPTY}else arr=childs.splice(beginIndex,endIndex-beginIndex);for(var i=0,n=arr.length;i<n;i++)arr[i].parent=null,this.conchModel&&this.conchModel.removeChild(arr[i].conchModel)}return this},__proto.replaceChild=function(newNode,oldNode){var index=this._childs.indexOf(oldNode);return index>-1?(this._childs.splice(index,1,newNode),this.conchModel&&(this.conchModel.removeChild(oldNode.conchModel),this.conchModel.addChildAt(newNode.conchModel,index)),oldNode.parent=null,newNode.parent=this,newNode):null},__proto._setDisplay=function(value){this._displayedInStage!==value&&(this._displayedInStage=value,value?this.event("display"):this.event("undisplay"))},__proto._displayChild=function(node,display){var childs=node._childs;if(childs)for(var i=0,n=childs.length;i<n;i++){var child=childs[i];child._setDisplay(display),child._childs.length&&this._displayChild(child,display)}node._setDisplay(display)},__proto.contains=function(node){if(node===this)return!0;for(;node;){if(node.parent===this)return!0;node=node.parent}return!1},__proto.timerLoop=function(delay,caller,method,args,coverBefore){void 0===coverBefore&&(coverBefore=!0),this.timer._create(!1,!0,delay,caller,method,args,coverBefore)},__proto.timerOnce=function(delay,caller,method,args,coverBefore){void 0===coverBefore&&(coverBefore=!0),this.timer._create(!1,!1,delay,caller,method,args,coverBefore)},__proto.frameLoop=function(delay,caller,method,args,coverBefore){void 0===coverBefore&&(coverBefore=!0),this.timer._create(!0,!0,delay,caller,method,args,coverBefore)},__proto.frameOnce=function(delay,caller,method,args,coverBefore){void 0===coverBefore&&(coverBefore=!0),this.timer._create(!0,!1,delay,caller,method,args,coverBefore)},__proto.clearTimer=function(caller,method){this.timer.clear(caller,method)},__getset(0,__proto,"numChildren",function(){return this._childs.length}),__getset(0,__proto,"parent",function(){return this._parent},function(value){this._parent!==value&&(value?(this._parent=value,this.event("added"),value.displayedInStage&&this._displayChild(this,!0),value._childChanged(this)):(this.event("removed"),this._parent._childChanged(),this._displayChild(this,!1),this._parent=value))}),__getset(0,__proto,"displayedInStage",function(){return this._displayedInStage}),Node.ARRAY_EMPTY=[],Node.PROP_EMPTY={},Node}(EventDispatcher),CSSStyle=function(_super){function CSSStyle(ower){this._bgground=null,this._border=null,this._rect=null,this.lineHeight=0,CSSStyle.__super.call(this),this._padding=CSSStyle._PADDING,this._spacing=CSSStyle._SPACING,this._aligns=CSSStyle._ALIGNS,this._font=Font.EMPTY,this._ower=ower}__class(CSSStyle,"laya.display.css.CSSStyle",_super);var __proto=CSSStyle.prototype;return __proto.destroy=function(){this._ower=null,this._font=null,this._rect=null},__proto.inherit=function(src){this._font=src._font,this._spacing=src._spacing===CSSStyle._SPACING?CSSStyle._SPACING:src._spacing.slice(),this.lineHeight=src.lineHeight},__proto._widthAuto=function(){return 0!=(262144&this._type)},__proto.widthed=function(sprite){return 0!=(8&this._type)},__proto._calculation=function(type,value){function getValue(pw,w,nums){return pw*nums[0]+w*nums[1]+nums[2]}function onParentResize(type){var pw=parent.width,w=ower.width;rect.width&&(ower.width=getValue(pw,w,rect.width)),rect.height&&(ower.height=getValue(pw,w,rect.height)),rect.left&&(ower.x=getValue(pw,w,rect.left)),rect.top&&(ower.y=getValue(pw,w,rect.top))}if(value.indexOf("%")<0)return!1;var ower=this._ower,parent=ower.parent,rect=this._rect;null===rect&&(parent._getCSSStyle()._type|=524288,parent.on("resize",this,onParentResize),this._rect=rect={input:{}});var nums=value.split(" ");return nums[0]=parseFloat(nums[0])/100,1==nums.length?nums[1]=nums[2]=0:(nums[1]=parseFloat(nums[1])/100,nums[2]=parseFloat(nums[2])),rect[type]=nums,rect.input[type]=value,onParentResize(type),!0},__proto.heighted=function(sprite){return 0!=(8192&this._type)},__proto.size=function(w,h){var ower=this._ower,resize=!1;-1!==w&&w!=this._ower.width&&(this._type|=8,this._ower.width=w,resize=!0),-1!==h&&h!=this._ower.height&&(this._type|=8192,this._ower.height=h,resize=!0),resize&&(ower._layoutLater(),524288&this._type&&ower.event("resize",this))},__proto._getAlign=function(){return this._aligns[0]},__proto._getValign=function(){return this._aligns[1]},__proto._getCssFloat=function(){return 0!=(32768&this._type)?32768:0},__proto._createFont=function(){return 4096&this._type?this._font:(this._type|=4096,this._font=new Font(this._font))},__proto.render=function(sprite,context,x,y){var w=sprite.width,h=sprite.height;x-=sprite.pivotX,y-=sprite.pivotY,this._bgground&&null!=this._bgground.color&&context.ctx.fillRect(x,y,w,h,this._bgground.color),this._border&&this._border.color&&context.drawRect(x,y,w,h,this._border.color.strColor,this._border.size)},__proto.getCSSStyle=function(){return this},__proto.cssText=function(text){this.attrs(CSSStyle.parseOneCSS(text,";"))},__proto.attrs=function(attrs){if(attrs)for(var i=0,n=attrs.length;i<n;i++){var attr=attrs[i];this[attr[0]]=attr[1]}},__proto.setTransform=function(value){"none"===value?this._tf=Style._TF_EMPTY:this.attrs(CSSStyle.parseOneCSS(value,","))},__proto.translate=function(x,y){this._tf===Style._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.translateX=x,this._tf.translateY=y},__proto.scale=function(x,y){this._tf===Style._TF_EMPTY&&(this._tf=new TransformInfo),this._tf.scaleX=x,this._tf.scaleY=y},__proto._enableLayout=function(){return 0==(2&this._type)&&0==(4&this._type)},__getset(0,__proto,"block",_super.prototype._$get_block,function(value){value?this._type|=1:this._type&=-2}),__getset(0,__proto,"valign",function(){return CSSStyle._valigndef[this._aligns[1]]},function(value){this._aligns===CSSStyle._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[1]=CSSStyle._valigndef[value]}),__getset(0,__proto,"height",null,function(h){if(this._type|=8192,"string"==typeof h){if(this._calculation("height",h))return;h=parseInt(h)}this.size(-1,h)}),__getset(0,__proto,"width",null,function(w){if(this._type|=8,"string"==typeof w){var offset=w.indexOf("auto");if(offset>=0&&(this._type|=262144,w=w.substr(0,offset)),this._calculation("width",w))return;w=parseInt(w)}this.size(w,-1)}),__getset(0,__proto,"fontWeight",function(){return this._font.weight},function(value){this._createFont().weight=value}),__getset(0,__proto,"left",null,function(value){var ower=this._ower;if("string"==typeof value){if("center"===value?value="50% -50% 0":"right"===value&&(value="100% -100% 0"),this._calculation("left",value))return;value=parseInt(value)}ower.x=value}),__getset(0,__proto,"_translate",null,function(value){this.translate(value[0],value[1])}),__getset(0,__proto,"absolute",function(){return 0!=(4&this._type)}),__getset(0,__proto,"top",null,function(value){var ower=this._ower;if("string"==typeof value){if("middle"===value?value="50% -50% 0":"bottom"===value&&(value="100% -100% 0"),this._calculation("top",value))return;value=parseInt(value)}ower.y=value}),__getset(0,__proto,"align",function(){return CSSStyle._aligndef[this._aligns[0]]},function(value){this._aligns===CSSStyle._ALIGNS&&(this._aligns=[0,0,0]),this._aligns[0]=CSSStyle._aligndef[value]}),__getset(0,__proto,"bold",function(){return this._font.bold},function(value){this._createFont().bold=value}),__getset(0,__proto,"padding",function(){return this._padding},function(value){this._padding=value}),__getset(0,__proto,"leading",function(){return this._spacing[1]},function(d){"string"==typeof d&&(d=parseInt(d+"")),this._spacing===CSSStyle._SPACING&&(this._spacing=[0,0]),this._spacing[1]=d}),__getset(0,__proto,"lineElement",function(){return 0!=(65536&this._type)},function(value){value?this._type|=65536:this._type&=-65537}),__getset(0,__proto,"cssFloat",function(){return 0!=(32768&this._type)?"right":"left"},function(value){this.lineElement=!1,"right"===value?this._type|=32768:this._type&=-32769}),__getset(0,__proto,"textDecoration",function(){return this._font.decoration},function(value){this._createFont().decoration=value}),__getset(0,__proto,"whiteSpace",function(){return 131072&this._type?"nowrap":""},function(type){"nowrap"===type&&(this._type|=131072),"none"===type&&(this._type&=-131073)}),__getset(0,__proto,"background",null,function(value){value?(this._bgground||(this._bgground={}),this._bgground.color=value,this._ower.conchModel&&this._ower.conchModel.bgColor(value),this._type|=16384,this._ower._renderType|=256):this._bgground=null}),__getset(0,__proto,"wordWrap",function(){return 0==(131072&this._type)},function(value){value?this._type&=-131073:this._type|=131072}),__getset(0,__proto,"color",function(){return this._font.color},function(value){this._createFont().color=value}),__getset(0,__proto,"password",function(){return this._font.password},function(value){this._createFont().password=value}),__getset(0,__proto,"backgroundColor",function(){return this._bgground?this._bgground.color:null},function(value){"none"===value?this._bgground=null:(this._bgground||(this._bgground={}),this._bgground.color=value),this._ower.conchModel&&this._ower.conchModel.bgColor(value),this._ower._renderType|=256}),__getset(0,__proto,"font",function(){return this._font.toString()},function(value){this._createFont().set(value)}),__getset(0,__proto,"weight",null,function(value){this._createFont().weight=value}),__getset(0,__proto,"letterSpacing",function(){return this._spacing[0]},function(d){"string"==typeof d&&(d=parseInt(d+"")),this._spacing===CSSStyle._SPACING&&(this._spacing=[0,0]),this._spacing[0]=d}),__getset(0,__proto,"fontSize",function(){return this._font.size},function(value){this._createFont().size=value}),__getset(0,__proto,"italic",function(){return this._font.italic},function(value){this._createFont().italic=value}),__getset(0,__proto,"fontFamily",function(){return this._font.family},function(value){this._createFont().family=value}),__getset(0,__proto,"stroke",function(){return this._font.stroke[0]},function(value){this._createFont().stroke===Font._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[0]=value}),__getset(0,__proto,"strokeColor",function(){return this._font.stroke[1]},function(value){this._createFont().stroke===Font._STROKE&&(this._font.stroke=[0,"#000000"]),this._font.stroke[1]=value}),__getset(0,__proto,"border",function(){return this._border?this._border.value:""},function(value){if("none"!=value){this._border||(this._border={}),this._border.value=value;var values=value.split(" ");if(this._border.color=Color.create(values[values.length-1]),1==values.length)return this._border.size=1,void(this._border.type="solid");var i=0;values[0].indexOf("px")>0?(this._border.size=parseInt(values[0]),i++):this._border.size=1,this._border.type=values[i],this._ower._renderType|=256}else this._border=null}),__getset(0,__proto,"borderColor",function(){return this._border&&this._border.color?this._border.color.strColor:null},function(value){value?(this._border||(this._border={size:1,type:"solid"}),this._border.color=null==value?null:Color.create(value),this._ower.conchModel&&this._ower.conchModel.border(this._border.color.strColor),this._ower._renderType|=256):this._border=null}),__getset(0,__proto,"position",function(){return 4&this._type?"absolute":""},function(value){"absolute"==value?this._type|=4:this._type&=-5}),__getset(0,__proto,"display",null,function(value){switch(value){case"":this._type&=-3,this.visible=!0;break;case"none":this._type|=2,this.visible=!1,this._ower._layoutLater()}}),__getset(0,__proto,"paddingLeft",function(){return this.padding[3]}),__getset(0,__proto,"paddingTop",function(){return this.padding[0]}),__getset(0,__proto,"_scale",null,function(value){this._ower.scale(value[0],value[1])}),__getset(0,__proto,"_rotate",null,function(value){this._ower.rotation=value}),CSSStyle.parseOneCSS=function(text,clipWord){for(var valueArray,out=[],attrs=text.split(clipWord),i=0,n=attrs.length;i<n;i++){var attr=attrs[i],ofs=attr.indexOf(":"),name=attr.substr(0,ofs).replace(/^\s+|\s+$/g,"");if(0!=name.length){var value=attr.substr(ofs+1).replace(/^\s+|\s+$/g,""),one=[name,value];switch(name){case"italic":case"bold":one[1]="true"==value;break;case"line-height":one[0]="lineHeight",one[1]=parseInt(value);break;case"font-size":one[0]="fontSize",one[1]=parseInt(value);break;case"padding":(valueArray=value.split(" ")).length>1||(valueArray[1]=valueArray[2]=valueArray[3]=valueArray[0]),one[1]=[parseInt(valueArray[0]),parseInt(valueArray[1]),parseInt(valueArray[2]),parseInt(valueArray[3])];break;case"rotate":one[0]="_rotate",one[1]=parseFloat(value);break;case"scale":valueArray=value.split(" "),one[0]="_scale",one[1]=[parseFloat(valueArray[0]),parseFloat(valueArray[1])];break;case"translate":valueArray=value.split(" "),one[0]="_translate",one[1]=[parseInt(valueArray[0]),parseInt(valueArray[1])];break;default:(one[0]=CSSStyle._CSSTOVALUE[name])||(one[0]=name)}out.push(one)}}return out},CSSStyle.parseCSS=function(text,uri){for(var one;null!=(one=CSSStyle._parseCSSRegExp.exec(text));)CSSStyle.styleSheets[one[1]]=CSSStyle.parseOneCSS(one[2],";")},CSSStyle.EMPTY=new CSSStyle(null),CSSStyle._CSSTOVALUE={"letter-spacing":"letterSpacing","line-spacing":"lineSpacing","white-space":"whiteSpace","line-height":"lineHeight","scale-x":"scaleX","scale-y":"scaleY","translate-x":"translateX","translate-y":"translateY","font-family":"fontFamily","font-weight":"fontWeight","vertical-align":"valign","text-decoration":"textDecoration","background-color":"backgroundColor","border-color":"borderColor",float:"cssFloat"},CSSStyle._parseCSSRegExp=new RegExp("([.#]\\w+)\\s*{([\\s\\S]*?)}","g"),CSSStyle._aligndef={left:0,center:1,right:2,0:"left",1:"center",2:"right"},CSSStyle._valigndef={top:0,middle:1,bottom:2,0:"top",1:"middle",2:"bottom"},CSSStyle.styleSheets={},CSSStyle.ALIGN_CENTER=1,CSSStyle.ALIGN_RIGHT=2,CSSStyle.VALIGN_MIDDLE=1,CSSStyle.VALIGN_BOTTOM=2,CSSStyle._CSS_BLOCK=1,CSSStyle._DISPLAY_NONE=2,CSSStyle._ABSOLUTE=4,CSSStyle._WIDTH_SET=8,CSSStyle._PADDING=[0,0,0,0],CSSStyle._RECT=[-1,-1,-1,-1],CSSStyle._SPACING=[0,0],CSSStyle._ALIGNS=[0,0,0],CSSStyle.ADDLAYOUTED=512,CSSStyle._NEWFONT=4096,CSSStyle._HEIGHT_SET=8192,CSSStyle._BACKGROUND_SET=16384,CSSStyle._FLOAT_RIGHT=32768,CSSStyle._LINE_ELEMENT=65536,CSSStyle._NOWARP=131072,CSSStyle._WIDTHAUTO=262144,CSSStyle._LISTERRESZIE=524288,CSSStyle}(Style),AudioSound=function(_super){function AudioSound(){this.url=null,this.audio=null,this.loaded=!1,AudioSound.__super.call(this)}__class(AudioSound,"laya.media.h5audio.AudioSound",_super);var __proto=AudioSound.prototype;return __proto.dispose=function(){var ad=AudioSound._audioCache[this.url];ad&&(ad.src="",delete AudioSound._audioCache[this.url])},__proto.load=function(url){function onLoaded(){offs(),me.loaded=!0,me.event("complete")}function onErr(){ad.load=null,offs(),me.event("error")}function offs(){ad.removeEventListener("canplaythrough",onLoaded),ad.removeEventListener("error",onErr)}this.url=url;var ad=AudioSound._audioCache[url];if(ad&&ad.readyState>=2)this.event("complete");else{ad||((ad=Browser.createElement("audio")).src=url,AudioSound._audioCache[url]=ad),ad.addEventListener("canplaythrough",onLoaded),ad.addEventListener("error",onErr);var me=this;this.audio=ad,ad.load?ad.load():onErr()}},__proto.play=function(startTime,loops){if(void 0===startTime&&(startTime=0),void 0===loops&&(loops=0),!this.url)return null;var ad;if(!(ad=AudioSound._audioCache[this.url]))return null;var tAd;tAd=(tAd=Pool.getItem("audio:"+this.url))||ad.cloneNode(!0);var channel=new AudioSoundChannel(tAd);return channel.url=this.url,channel.loops=loops,channel.startTime=startTime,channel.play(),SoundManager.addChannel(channel),channel},__getset(0,__proto,"duration",function(){var ad;return ad=AudioSound._audioCache[this.url],ad?ad.duration:0}),AudioSound._audioCache={},AudioSound}(EventDispatcher),SoundChannel=function(_super){function SoundChannel(){this.url=null,this.loops=0,this.startTime=NaN,this.isStopped=!1,this.completeHandler=null,SoundChannel.__super.call(this)}__class(SoundChannel,"laya.media.SoundChannel",_super);var __proto=SoundChannel.prototype;return __proto.play=function(){},__proto.stop=function(){},__proto.__runComplete=function(handler){handler&&handler.run()},__getset(0,__proto,"volume",function(){return 1},function(v){}),__getset(0,__proto,"position",function(){return 0}),__getset(0,__proto,"duration",function(){return 0}),SoundChannel}(EventDispatcher),Sound=function(_super){function Sound(){Sound.__super.call(this)}__class(Sound,"laya.media.Sound",_super);var __proto=Sound.prototype;return __proto.load=function(url){},__proto.play=function(startTime,loops){return void 0===startTime&&(startTime=0),void 0===loops&&(loops=0),null},__proto.dispose=function(){},__getset(0,__proto,"duration",function(){return 0}),Sound}(EventDispatcher),WebAudioSound=function(_super){function WebAudioSound(){this.url=null,this.loaded=!1,this.data=null,this.audioBuffer=null,this.__toPlays=null,WebAudioSound.__super.call(this)}__class(WebAudioSound,"laya.media.webaudio.WebAudioSound",_super);var __proto=WebAudioSound.prototype;return __proto.load=function(url){var me=this;if(this.url=url,this.audioBuffer=WebAudioSound._dataCache[url],this.audioBuffer)this._loaded(this.audioBuffer);else if(WebAudioSound.e.on("loaded:"+url,this,this._loaded),WebAudioSound.e.on("err:"+url,this,this._err),!WebAudioSound.__loadingSound[url]){WebAudioSound.__loadingSound[url]=!0;var request=new Browser.window.XMLHttpRequest;request.open("GET",url,!0),request.responseType="arraybuffer",request.onload=function(){me.data=request.response,WebAudioSound.buffs.push({buffer:me.data,url:me.url}),WebAudioSound.decode()},request.onerror=function(e){me._err()},request.send()}},__proto._err=function(){this._removeLoadEvents(),WebAudioSound.__loadingSound[this.url]=!1,this.event("error")},__proto._loaded=function(audioBuffer){this._removeLoadEvents(),this.audioBuffer=audioBuffer,WebAudioSound._dataCache[this.url]=this.audioBuffer,this.loaded=!0,this.event("complete")},__proto._removeLoadEvents=function(){WebAudioSound.e.off("loaded:"+this.url,this,this._loaded),WebAudioSound.e.off("err:"+this.url,this,this._err)},__proto.__playAfterLoaded=function(){if(this.__toPlays){var toPlays,i=0,len=0;len=(toPlays=this.__toPlays).length;var tParams;for(i=0;i<len;i++)(tParams=toPlays[i])[2]&&!tParams[2].isStopped&&this.play(tParams[0],tParams[1],tParams[2]);this.__toPlays.length=0}},__proto.play=function(startTime,loops,channel){return void 0===startTime&&(startTime=0),void 0===loops&&(loops=0),channel=channel||new WebAudioSoundChannel,this.audioBuffer||this.url&&(this.__toPlays||(this.__toPlays=[]),this.__toPlays.push([startTime,loops,channel]),this.once("complete",this,this.__playAfterLoaded),this.load(this.url)),channel.url=this.url,channel.loops=loops,channel.audioBuffer=this.audioBuffer,channel.startTime=startTime,channel.play(),SoundManager.addChannel(channel),channel},__proto.dispose=function(){delete WebAudioSound._dataCache[this.url],delete WebAudioSound.__loadingSound[this.url]},__getset(0,__proto,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),WebAudioSound.decode=function(){WebAudioSound.buffs.length<=0||WebAudioSound.isDecoding||(WebAudioSound.isDecoding=!0,WebAudioSound.tInfo=WebAudioSound.buffs.shift(),WebAudioSound.ctx.decodeAudioData(WebAudioSound.tInfo.buffer,WebAudioSound._done,WebAudioSound._fail))},WebAudioSound._done=function(audioBuffer){WebAudioSound.e.event("loaded:"+WebAudioSound.tInfo.url,audioBuffer),WebAudioSound.isDecoding=!1,WebAudioSound.decode()},WebAudioSound._fail=function(){WebAudioSound.e.event("err:"+WebAudioSound.tInfo.url,null),WebAudioSound.isDecoding=!1,WebAudioSound.decode()},WebAudioSound._playEmptySound=function(){if(null!=WebAudioSound.ctx){var source=WebAudioSound.ctx.createBufferSource();source.buffer=WebAudioSound._miniBuffer,source.connect(WebAudioSound.ctx.destination),source.start(0,0,0)}},WebAudioSound._unlock=function(){WebAudioSound._unlocked||(WebAudioSound._playEmptySound(),"running"==WebAudioSound.ctx.state&&(Browser.document.removeEventListener("mousedown",WebAudioSound._unlock,!0),Browser.document.removeEventListener("touchend",WebAudioSound._unlock,!0),WebAudioSound._unlocked=!0))},WebAudioSound.initWebAudio=function(){"running"!=WebAudioSound.ctx.state&&(WebAudioSound._unlock(),Browser.document.addEventListener("mousedown",WebAudioSound._unlock,!0),Browser.document.addEventListener("touchend",WebAudioSound._unlock,!0))},WebAudioSound._dataCache={},WebAudioSound.buffs=[],WebAudioSound.isDecoding=!1,WebAudioSound._unlocked=!1,WebAudioSound.tInfo=null,WebAudioSound.__loadingSound={},__static(WebAudioSound,["window",function(){return this.window=Browser.window},"webAudioEnabled",function(){return this.webAudioEnabled=WebAudioSound.window.AudioContext||WebAudioSound.window.webkitAudioContext||WebAudioSound.window.mozAudioContext},"ctx",function(){return this.ctx=WebAudioSound.webAudioEnabled?new(WebAudioSound.window.AudioContext||WebAudioSound.window.webkitAudioContext||WebAudioSound.window.mozAudioContext):void 0},"_miniBuffer",function(){return this._miniBuffer=WebAudioSound.ctx.createBuffer(1,1,22050)},"e",function(){return this.e=new EventDispatcher}]),WebAudioSound}(EventDispatcher),HttpRequest=function(_super){function HttpRequest(){this._responseType=null,this._data=null,HttpRequest.__super.call(this),this._http=new Browser.window.XMLHttpRequest}__class(HttpRequest,"laya.net.HttpRequest",_super);var __proto=HttpRequest.prototype;return __proto.send=function(url,data,method,responseType,headers){void 0===method&&(method="get"),void 0===responseType&&(responseType="text"),this._responseType=responseType,this._data=null;var _this=this,http=this._http;if(http.open(method,url,!0),headers)for(var i=0;i<headers.length;i++)http.setRequestHeader(headers[i++],headers[i]);else data&&"string"!=typeof data?http.setRequestHeader("Content-Type","application/json"):http.setRequestHeader("Content-Type","application/x-www-form-urlencoded");http.responseType="arraybuffer"!==responseType?"text":"arraybuffer",http.onerror=function(e){_this._onError(e)},http.onabort=function(e){_this._onAbort(e)},http.onprogress=function(e){_this._onProgress(e)},http.onload=function(e){_this._onLoad(e)},http.send(data)},__proto._onProgress=function(e){e&&e.lengthComputable&&this.event("progress",e.loaded/e.total)},__proto._onAbort=function(e){this.error("Request was aborted by user")},__proto._onError=function(e){this.error("Request failed Status:"+this._http.status+" text:"+this._http.statusText)},__proto._onLoad=function(e){var http=this._http,status=void 0!==http.status?http.status:200;200===status||204===status||0===status?this.complete():this.error("["+http.status+"]"+http.statusText+":"+http.responseURL)},__proto.error=function(message){this.clear(),this.event("error",message)},__proto.complete=function(){this.clear();var flag=!0;try{"json"===this._responseType?this._data=JSON.parse(this._http.responseText):"xml"===this._responseType?this._data=Utils.parseXMLFromString(this._http.responseText):this._data=this._http.response||this._http.responseText}catch(e){flag=!1,this.error(e.message)}flag&&this.event("complete",this._data instanceof Array?[this._data]:this._data)},__proto.clear=function(){var http=this._http;http.onerror=http.onabort=http.onprogress=http.onload=null},__getset(0,__proto,"url",function(){return this._http.responseURL}),__getset(0,__proto,"http",function(){return this._http}),__getset(0,__proto,"data",function(){return this._data}),HttpRequest}(EventDispatcher),Loader=function(_super){function Loader(){this._data=null,this._url=null,this._type=null,this._cache=!1,this._http=null,Loader.__super.call(this)}__class(Loader,"laya.net.Loader",_super);var __proto=Loader.prototype;return __proto.load=function(url,type,cache,group,ignoreCache){if(void 0===cache&&(cache=!0),void 0===ignoreCache&&(ignoreCache=!1),0===url.indexOf("data:image")&&(this._type="image"),url=URL.formatURL(url),this._url=url,this._type=type||(type=this.getTypeFromUrl(url)),this._cache=cache,this._data=null,!ignoreCache&&Loader.loadedMap[url])return this._data=Loader.loadedMap[url],this.event("progress",1),void this.event("complete",this._data);if(group&&Loader.setGroup(url,group),null==Loader.parserMap[type]){if("image"===type||"htmlimage"===type||"nativeimage"===type)return this._loadImage(url);if("sound"===type)return this._loadSound(url);this._http||(this._http=new HttpRequest,this._http.on("progress",this,this.onProgress),this._http.on("error",this,this.onError),this._http.on("complete",this,this.onLoaded));var contentType;switch(type){case"atlas":contentType="json";break;case"font":contentType="xml";break;default:contentType=type}this._http.send(url,null,"get",contentType)}else Loader.parserMap[type]instanceof laya.utils.Handler?Loader.parserMap[type].runWith(this):Loader.parserMap[type].call(null,this)},__proto.getTypeFromUrl=function(url){var type=Utils.getFileExtension(url);return type?Loader.typeMap[type]:(console.log("Not recognize the resources suffix",url),"text")},__proto._loadImage=function(url){function clear(){image.onload=null,image.onerror=null}var image,_this=this,onload=function(){clear(),_this.onLoaded(image)},onerror=function(){clear(),_this.event("error","Load image failed")};"nativeimage"===this._type?((image=new Browser.window.Image).crossOrigin="",image.onload=onload,image.onerror=onerror,image.src=url):new HTMLImage.create(url,{onload:onload,onerror:onerror,onCreate:function(img){image=img}})},__proto._loadSound=function(url){function soundOnload(){clear(),_this.onLoaded(sound)}function soundOnErr(){clear(),sound.dispose(),_this.event("error","Load sound failed")}function clear(){sound.offAll()}var sound=new SoundManager._soundClass,_this=this;sound.on("complete",this,soundOnload),sound.on("error",this,soundOnErr),sound.load(url)},__proto.onProgress=function(value){"atlas"===this._type?this.event("progress",.3*value):this.event("progress",value)},__proto.onError=function(message){this.event("error",message)},__proto.onLoaded=function(data){var type=this._type;if("image"===type){var tex=new Texture(data);tex.url=this._url,this.complete(tex)}else if("sound"===type||"htmlimage"===type||"nativeimage"===type)this.complete(data);else if("atlas"===type){if(!data.src&&!data._setContext){if(!this._data){if(this._data=data,data.meta&&data.meta.image){var ver,toloadPics=data.meta.image.split(","),split=this._url.indexOf("/")>=0?"/":"\\",idx=this._url.lastIndexOf(split),folderPath=idx>=0?this._url.substr(0,idx+1):"";ver=(idx=this._url.indexOf("?"))>=0?this._url.substr(idx):"";for(var i=0,len=toloadPics.length;i<len;i++)toloadPics[i]=folderPath+toloadPics[i]+ver}else toloadPics=[this._url.replace(".json",".png")];toloadPics.reverse(),data.toLoads=toloadPics,data.pics=[]}return this.event("progress",.3+1/toloadPics.length*.6),this._loadImage(URL.formatURL(toloadPics.pop()))}if(this._data.pics.push(data),this._data.toLoads.length>0)return this.event("progress",.3+1/this._data.toLoads.length*.6),this._loadImage(URL.formatURL(this._data.toLoads.pop()));var frames=this._data.frames,cleanUrl=this._url.split("?")[0],directory=this._data.meta&&this._data.meta.prefix?URL.basePath+this._data.meta.prefix:cleanUrl.substring(0,cleanUrl.lastIndexOf("."))+"/",pics=this._data.pics,map=Loader.atlasMap[this._url]||(Loader.atlasMap[this._url]=[]);map.dir=directory;for(var name in frames){var obj=frames[name],tPic=pics[obj.frame.idx?obj.frame.idx:0],url=directory+name;Loader.cacheRes(url,Texture.create(tPic,obj.frame.x,obj.frame.y,obj.frame.w,obj.frame.h,obj.spriteSourceSize.x,obj.spriteSourceSize.y,obj.sourceSize.w,obj.sourceSize.h)),Loader.loadedMap[url].url=url,map.push(url)}this.complete(this._data)}else if("font"==type){if(!data.src)return this._data=data,this.event("progress",.5),this._loadImage(URL.formatURL(this._url.replace(".fnt",".png")));var bFont;(bFont=new BitmapFont).parseFont(this._data,data);var tArr=this._url.split(".fnt")[0].split("/"),fontName=tArr[tArr.length-1];Text.registerBitmapFont(fontName,bFont),this._data=bFont,this.complete(this._data)}else this.complete(data)},__proto.complete=function(data){this._data=data,Loader._loaders.push(this),Loader._isWorking||Loader.checkNext()},__proto.endLoad=function(content){content&&(this._data=content),this._cache&&Loader.cacheRes(this._url,this._data),this.event("progress",1),this.event("complete",this.data instanceof Array?[this.data]:this.data)},__getset(0,__proto,"url",function(){return this._url}),__getset(0,__proto,"data",function(){return this._data}),__getset(0,__proto,"cache",function(){return this._cache}),__getset(0,__proto,"type",function(){return this._type}),Loader.checkNext=function(){Loader._isWorking=!0;for(var startTimer=Browser.now();Loader._startIndex<Loader._loaders.length;)if(Browser.now(),Loader._loaders[Loader._startIndex].endLoad(),Loader._startIndex++,Browser.now()-startTimer>Loader.maxTimeOut)return console.log("loader callback cost a long time:"+(Browser.now()-startTimer)+" url="+Loader._loaders[Loader._startIndex-1].url),void Laya.timer.frameOnce(1,null,Loader.checkNext);Loader._loaders.length=0,Loader._startIndex=0,Loader._isWorking=!1},Loader.clearRes=function(url,forceDispose){void 0===forceDispose&&(forceDispose=!1),url=URL.formatURL(url);var arr=Loader.atlasMap[url];if(arr){for(var i=0,n=arr.length;i<n;i++){var resUrl=arr[i],tex=Loader.getRes(resUrl);tex&&tex.destroy(forceDispose),delete Loader.loadedMap[resUrl]}arr.length=0,delete Loader.atlasMap[url],delete Loader.loadedMap[url]}else{var res=Loader.loadedMap[url];res&&(res instanceof laya.resource.Texture&&res.bitmap&&res.destroy(forceDispose),delete Loader.loadedMap[url])}},Loader.getRes=function(url){return Loader.loadedMap[URL.formatURL(url)]},Loader.getAtlas=function(url){return Loader.atlasMap[URL.formatURL(url)]},Loader.cacheRes=function(url,data){url=URL.formatURL(url),null!=Loader.loadedMap[url]?console.log("Resources already exist,is repeated loading:",url):Loader.loadedMap[url]=data},Loader.setGroup=function(url,group){Loader.groupMap[group]||(Loader.groupMap[group]=[]),Loader.groupMap[group].push(url)},Loader.clearResByGroup=function(group){if(Loader.groupMap[group]){var arr=Loader.groupMap[group],i=0,len=arr.length;for(i=0;i<len;i++)Loader.clearRes(arr[i]);arr.length=0}},Loader.TEXT="text",Loader.JSON="json",Loader.XML="xml",Loader.BUFFER="arraybuffer",Loader.IMAGE="image",Loader.SOUND="sound",Loader.ATLAS="atlas",Loader.FONT="font",Loader.typeMap={png:"image",jpg:"image",jpeg:"image",txt:"text",json:"json",xml:"xml",als:"atlas",atlas:"atlas",mp3:"sound",ogg:"sound",wav:"sound",part:"json",fnt:"font"},Loader.parserMap={},Loader.loadedMap={},Loader.groupMap={},Loader.maxTimeOut=100,Loader.atlasMap={},Loader._loaders=[],Loader._isWorking=!1,Loader._startIndex=0,Loader}(EventDispatcher),ColorFilter=function(_super){function ColorFilter(mat){ColorFilter.__super.call(this),mat||(mat=[.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0]),this._mat=new Float32Array(16),this._alpha=new Float32Array(4);for(var j=0,z=0,i=0;i<20;i++)i%5!=4?this._mat[j++]=mat[i]:this._alpha[z++]=mat[i];this._action=RunDriver.createFilterAction(32),this._action.data=this}__class(ColorFilter,"laya.filters.ColorFilter",_super);var __proto=ColorFilter.prototype;return Laya.imps(__proto,{"laya.filters.IFilter":!0}),__proto.callNative=function(sp){sp._$P.cf=this;sp.conchModel&&sp.conchModel.setFilterMatrix&&sp.conchModel.setFilterMatrix(this._mat,this._alpha)},__getset(0,__proto,"type",function(){return 32}),__getset(0,__proto,"action",function(){return this._action}),__getset(1,ColorFilter,"DEFAULT",function(){return ColorFilter._DEFAULT||(ColorFilter._DEFAULT=new ColorFilter([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0])),ColorFilter._DEFAULT},laya.filters.Filter._$SET_DEFAULT),__getset(1,ColorFilter,"GRAY",function(){return ColorFilter._GRAY||(ColorFilter._GRAY=new ColorFilter([.3,.59,.11,0,0,.3,.59,.11,0,0,.3,.59,.11,0,0,0,0,0,1,0])),ColorFilter._GRAY},laya.filters.Filter._$SET_GRAY),ColorFilter._DEFAULT=null,ColorFilter._GRAY=null,ColorFilter}(Filter),LoaderManager=function(_super){function LoaderManager(){this.retryNum=1,this.maxLoader=5,this._loaders=[],this._loaderCount=0,this._resInfos=[],this._infoPool=[],this._maxPriority=5,this._failRes={},LoaderManager.__super.call(this);for(var i=0;i<this._maxPriority;i++)this._resInfos[i]=[]}var ResInfo;__class(LoaderManager,"laya.net.LoaderManager",_super);var __proto=LoaderManager.prototype;return __proto.create=function(url,complete,progress,clas,params,priority,cache){function onComplete(item,content){loadedCount++,item.progress=1,loadedCount===itemCount&&complete&&complete.run()}function onProgress(item,value){item.progress=value;for(var num=0,j=0;j<itemCount;j++)num+=items[j].progress;var v=num/itemCount;progress2.runWith(v)}if(void 0===priority&&(priority=1),void 0===cache&&(cache=!0),url instanceof Array){var items=url,itemCount=items.length,loadedCount=0;if(progress)var progress2=Handler.create(progress.caller,progress.method,progress.args,!1);for(var i=0;i<itemCount;i++){var item=items[i];"string"==typeof item&&(item=items[i]={url:item}),item.progress=0;var progressHandler=progress?Handler.create(null,onProgress,[item],!1):null,completeHandler=progress||complete?Handler.create(null,onComplete,[item]):null;this._create(item.url,completeHandler,progressHandler,item.clas||clas,item.params||params,item.priority||priority,cache)}return!0}return this._create(url,complete,progress,clas,params,priority,cache)},__proto._create=function(url,complete,progress,clas,params,priority,cache){function onLoaded(data){item&&item.onAsynLoaded.call(item,url,data,params),complete&&complete.run()}void 0===priority&&(priority=1),void 0===cache&&(cache=!0);var item=this.getRes(url);if(item)progress&&progress.runWith(1),complete&&complete.run();else{var extension=Utils.getFileExtension(url),creatItem=LoaderManager.createMap[extension];clas||(clas=creatItem[0]);var type=creatItem[1];if("atlas"==extension)this.load(url,complete,progress,type,priority,cache);else if(clas===Texture&&(type="htmlimage"),item=clas?new clas:null,this.load(url,Handler.create(null,onLoaded),progress,type,priority,!1,null,!0),cache){var formatURL=URL.formatURL(url);LoaderManager.cacheRes(formatURL,item),item.url=formatURL}}return item},__proto.load=function(url,complete,progress,type,priority,cache,group,ignoreCache){if(void 0===priority&&(priority=1),void 0===cache&&(cache=!0),void 0===ignoreCache&&(ignoreCache=!1),url instanceof Array)return this._loadAssets(url,complete,progress,type,priority,cache,group);url=URL.formatURL(url);var content=Loader.getRes(url);if(null!=content)progress&&progress.runWith(1),complete&&complete.runWith(content),this._loaderCount||this.event("complete");else{var info=LoaderManager._resMap[url];info?(complete&&info._createListener("complete",complete.caller,complete.method,complete.args,!1,!1),progress&&info._createListener("progress",progress.caller,progress.method,progress.args,!1,!1)):((info=this._infoPool.length?this._infoPool.pop():new ResInfo).url=url,info.type=type,info.cache=cache,info.group=group,info.ignoreCache=ignoreCache,complete&&info.on("complete",complete.caller,complete.method,complete.args),progress&&info.on("progress",progress.caller,progress.method,progress.args),LoaderManager._resMap[url]=info,priority=priority<this._maxPriority?priority:this._maxPriority-1,this._resInfos[priority].push(info),this._next())}return this},__proto._next=function(){if(!(this._loaderCount>=this.maxLoader)){for(var i=0;i<this._maxPriority;i++){var infos=this._resInfos[i];if(infos.length>0){var info=infos.shift();if(info)return this._doLoad(info)}}this._loaderCount||this.event("complete")}},__proto._doLoad=function(resInfo){function onLoaded(data){loader.offAll(),loader._data=null,_this._loaders.push(loader),_this._endLoad(resInfo,data instanceof Array?[data]:data),_this._loaderCount--,_this._next()}this._loaderCount++;var loader=this._loaders.length?this._loaders.pop():new Loader;loader.on("complete",null,onLoaded),loader.on("progress",null,function(num){resInfo.event("progress",num)}),loader.on("error",null,function(msg){onLoaded(null)});var _this=this;loader.load(resInfo.url,resInfo.type,resInfo.cache,resInfo.group,resInfo.ignoreCache)},__proto._endLoad=function(resInfo,content){if(null===content){var errorCount=this._failRes[resInfo.url]||0;if(errorCount<this.retryNum)return console.log("[warn]Retry to load:",resInfo.url),this._failRes[resInfo.url]=errorCount+1,void this._resInfos[this._maxPriority-1].push(resInfo);console.log("[error]Failed to load:",resInfo.url),this.event("error",resInfo.url)}delete LoaderManager._resMap[resInfo.url],resInfo.event("complete",content),resInfo.offAll(),this._infoPool.push(resInfo)},__proto.clearRes=function(url,forceDispose){void 0===forceDispose&&(forceDispose=!1),Loader.clearRes(url,forceDispose)},__proto.getRes=function(url){return Loader.getRes(url)},__proto.clearUnLoaded=function(){for(var i=0;i<this._maxPriority;i++){for(var infos=this._resInfos[i],j=infos.length-1;j>-1;j--){var info=infos[j];info&&(info.offAll(),this._infoPool.push(info))}infos.length=0}this._loaderCount=0,LoaderManager._resMap={}},__proto.cancelLoadByUrls=function(urls){if(urls)for(var i=0,n=urls.length;i<n;i++)this.cancelLoadByUrl(urls[i])},__proto.cancelLoadByUrl=function(url){url=URL.formatURL(url);for(var i=0;i<this._maxPriority;i++)for(var infos=this._resInfos[i],j=infos.length-1;j>-1;j--){var info=infos[j];info&&info.url===url&&(infos[j]=null,info.offAll(),this._infoPool.push(info))}LoaderManager._resMap[url]&&delete LoaderManager._resMap[url]},__proto._loadAssets=function(arr,complete,progress,type,priority,cache,group){function loadComplete(item,content){loadedCount++,item.progress=1,loadedCount===itemCount&&complete&&complete.run()}function loadProgress(item,value){if(null!=progress){item.progress=value;for(var num=0,j=0;j<items.length;j++){var item1=items[j];num+=item1.size*item1.progress}var v=num/totalSize;progress.runWith(v)}}void 0===priority&&(priority=1),void 0===cache&&(cache=!0);for(var itemCount=arr.length,loadedCount=0,totalSize=0,items=[],defaultType=type||"image",i=0;i<itemCount;i++){var item=arr[i];"string"==typeof item&&(item={url:item,type:defaultType,size:1,priority:priority}),item.size||(item.size=1),item.progress=0,totalSize+=item.size,items.push(item);var progressHandler=progress?Handler.create(null,loadProgress,[item],!1):null,completeHandler=complete||progress?Handler.create(null,loadComplete,[item]):null;this.load(item.url,completeHandler,progressHandler,item.type,item.priority||1,cache,item.group||group)}return this},LoaderManager.cacheRes=function(url,data){Loader.cacheRes(url,data)},LoaderManager._resMap={},__static(LoaderManager,["createMap",function(){return this.createMap={atlas:[null,"atlas"]}}]),LoaderManager.__init$=function(){ResInfo=function(_super){function ResInfo(){this.url=null,this.type=null,this.cache=!1,this.group=null,this.ignoreCache=!1,ResInfo.__super.call(this)}return __class(ResInfo,"",_super),ResInfo}(EventDispatcher)},LoaderManager}(EventDispatcher),Socket=function(_super){function Socket(host,port,byteClass){this._endian=null,this._stamp=NaN,this._socket=null,this._connected=!1,this._addInputPosition=0,this._input=null,this._output=null,this.timeout=0,this.objectEncoding=0,this.disableInput=!1,this._byteClass=null,this.protocols=[],void 0===port&&(port=0),Socket.__super.call(this),this._byteClass=byteClass,this._byteClass=this._byteClass?this._byteClass:Byte,this.endian="bigEndian",this.timeout=2e4,this._addInputPosition=0,host&&port>0&&port<65535&&this.connect(host,port)}__class(Socket,"laya.net.Socket",_super);var __proto=Socket.prototype;return __proto.connect=function(host,port){var url="ws://"+host+":"+port;this.connectByUrl(url)},__proto.connectByUrl=function(url){var _$this=this;null!=this._socket&&this.close(),this._socket&&this._cleanSocket(),this.protocols&&0!=this.protocols.length?this._socket=new Browser.window.WebSocket(url,this.protocols):this._socket=new Browser.window.WebSocket(url),this._socket.binaryType="arraybuffer",this._output=new this._byteClass,this._output.endian=this.endian,this._input=new this._byteClass,this._input.endian=this.endian,this._addInputPosition=0,this._socket.onopen=function(e){_$this._onOpen(e)},this._socket.onmessage=function(msg){_$this._onMessage(msg)},this._socket.onclose=function(e){_$this._onClose(e)},this._socket.onerror=function(e){_$this._onError(e)}},__proto._cleanSocket=function(){try{this._socket.close()}catch(e){}this._connected=!1,this._socket.onopen=null,this._socket.onmessage=null,this._socket.onclose=null,this._socket.onerror=null,this._socket=null},__proto.close=function(){null!=this._socket&&this._cleanSocket()},__proto._onOpen=function(e){this._connected=!0,this.event("open",e)},__proto._onMessage=function(msg){if(msg&&msg.data){var data=msg.data;if(this.disableInput&&data)this.event("message",data);else{this._input.length>0&&this._input.bytesAvailable<1&&(this._input.clear(),this._addInputPosition=0);var pre=this._input.pos;!this._addInputPosition&&(this._addInputPosition=0),this._input.pos=this._addInputPosition,data&&("string"==typeof data?this._input.writeUTFBytes(data):this._input.writeArrayBuffer(data),this._addInputPosition=this._input.pos,this._input.pos=pre),this.event("message",data)}}},__proto._onClose=function(e){this._connected=!1,this.event("close",e)},__proto._onError=function(e){this.event("error",e)},__proto.send=function(data){this._socket.send(data)},__proto.flush=function(){if(this._output&&this._output.length>0){var evt;try{this._socket&&this._socket.send(this._output.__getBuffer().slice(0,this._output.length))}catch(e){evt=e}this._output.endian=this.endian,this._output.clear(),evt&&this.event("error",evt)}},__getset(0,__proto,"input",function(){return this._input}),__getset(0,__proto,"output",function(){return this._output}),__getset(0,__proto,"connected",function(){return this._connected}),__getset(0,__proto,"endian",function(){return this._endian},function(value){this._endian=value,null!=this._input&&(this._input.endian=value),null!=this._output&&(this._output.endian=value)}),Socket.LITTLE_ENDIAN="littleEndian",Socket.BIG_ENDIAN="bigEndian",Socket}(EventDispatcher),WorkerLoader=function(_super){function WorkerLoader(){this.worker=null,WorkerLoader.__super.call(this);var _$this=this;this.worker=new Browser.window.Worker(WorkerLoader.workerPath),this.worker.onmessage=function(evt){_$this.workerMessage(evt.data)}}__class(WorkerLoader,"laya.net.WorkerLoader",_super);var __proto=WorkerLoader.prototype;return __proto.workerMessage=function(data){if(data)switch(data.type){case"Image":this.imageLoaded(data);break;case"Msg":this.event("image_msg",data.msg)}},__proto.imageLoaded=function(data){if(data&&data.buffer&&data.buffer.length<10)return WorkerLoader._enable=!1,this._myTrace("buffer lost when postmessage ,disable workerloader"),this.event(data.url,null),void this.event("image_err",data.url+"\n"+data.msg);if(!data.dataType)return this.event(data.url,null),void this.event("image_err",data.url+"\n"+data.msg);var ctx,canvas=new HTMLCanvas("2D");ctx=canvas.source.getContext("2d");var imageData;switch(data.dataType){case"buffer":(imageData=ctx.createImageData(data.width,data.height)).data.set(data.buffer),canvas.size(imageData.width,imageData.height),ctx.putImageData(imageData,0,0);break;case"imagedata":imageData=data.imagedata,canvas.size(imageData.width,imageData.height),ctx.putImageData(imageData,0,0),imageData=data.imagedata;break;case"imageBitmap":imageData=data.imageBitmap,canvas.size(imageData.width,imageData.height),ctx.drawImage(imageData,0,0)}Render.isWebGL&&(canvas=new laya.webgl.resource.WebGLImage(canvas,data.url)),this.event(data.url,canvas)},__proto._myTrace=function(__arg){var arg=arguments,rst=[],i=0,len=arg.length;for(i=0;i<len;i++)rst.push(arg[i]);this.event("image_msg",rst.join(" "))},__proto.loadImage=function(url){var data;(data={}).type="load",data.url=url,this.worker.postMessage(data)},__proto._loadImage=function(url){function clear(){laya.net.WorkerLoader.I.off(url,_this,onload)}var _this=this;if(!WorkerLoader._enable||url.toLowerCase().indexOf(".png")<0)WorkerLoader._preLoadFun.call(_this,url);else{var onload=function(image){clear(),image?_this.onLoaded(image):WorkerLoader._preLoadFun.call(_this,url)};laya.net.WorkerLoader.I.on(url,_this,onload),laya.net.WorkerLoader.I.loadImage(url)}},__getset(1,WorkerLoader,"enable",function(){return WorkerLoader._enable},function(v){WorkerLoader._enable=v,WorkerLoader._enable&&null==WorkerLoader._preLoadFun&&WorkerLoader.__init__()}),WorkerLoader.__init__=function(){return null==WorkerLoader._preLoadFun&&(!!Browser.window.Worker&&(WorkerLoader._preLoadFun=Loader.prototype._loadImage,Loader.prototype._loadImage=WorkerLoader.prototype._loadImage,WorkerLoader.I||(WorkerLoader.I=new WorkerLoader),!0))},WorkerLoader.workerSupported=function(){return!!Browser.window.Worker},WorkerLoader.IMAGE_LOADED="image_loaded",WorkerLoader.IMAGE_ERR="image_err",WorkerLoader.IMAGE_MSG="image_msg",WorkerLoader.I=null,WorkerLoader._preLoadFun=null,WorkerLoader._enable=!1,WorkerLoader.workerPath="libs/worker.js",WorkerLoader}(EventDispatcher),Resource=function(_super){function Resource(){this._id=0,this._lastUseFrameCount=0,this._memorySize=0,this._name=null,this._url=null,this._loaded=!1,this._released=!1,this._disposed=!1,this._resourceManager=null,this.lock=!1,Resource.__super.call(this),this._$1__id=++Resource._uniqueIDCounter,Resource._loadedResources.push(this),Resource._isLoadedResourcesSorted=!1,this._released=!0,this.lock=!1,this._memorySize=0,this._lastUseFrameCount=-1,ResourceManager.currentResourceManager&&ResourceManager.currentResourceManager.addResource(this)}__class(Resource,"laya.resource.Resource",_super);var __proto=Resource.prototype;return Laya.imps(__proto,{"laya.resource.ICreateResource":!0,"laya.resource.IDispose":!0}),__proto.recreateResource=function(){this.startCreate(),this.completeCreate()},__proto.detoryResource=function(){},__proto.activeResource=function(force){void 0===force&&(force=!1),this._lastUseFrameCount=Stat.loopCount,(this._released||force)&&this.recreateResource()},__proto.releaseResource=function(force){return void 0===force&&(force=!1),!(!force&&this.lock)&&(!(this._released&&!force)&&(this.detoryResource(),this._released=!0,this._lastUseFrameCount=-1,this.event("released",this),!0))},__proto.setUniqueName=function(newName){for(var isUnique=!0,i=0;i<Resource._loadedResources.length;i++)if(Resource._loadedResources[i]._name===newName&&Resource._loadedResources[i]!==this)return void(isUnique=!1);isUnique?this.name!=newName&&(this.name=newName,Resource._isLoadedResourcesSorted=!1):this.setUniqueName(newName.concat("-copy"))},__proto.onAsynLoaded=function(url,data,params){throw new Error("Resource: must override this function!")},__proto.dispose=function(){if(null!==this._resourceManager)throw new Error("附属于resourceManager的资源不能独立释放！");this._disposed=!0,this.lock=!1,this.releaseResource();var index=Resource._loadedResources.indexOf(this);-1!==index&&(Resource._loadedResources.splice(index,1),Resource._isLoadedResourcesSorted=!1),Loader.clearRes(this.url)},__proto.startCreate=function(){this.event("recovering",this)},__proto.completeCreate=function(){this._released=!1,this.event("recovered",this)},__getset(0,__proto,"loaded",function(){return this._loaded}),__getset(0,__proto,"id",function(){return this._$1__id}),__getset(0,__proto,"url",function(){return this._url},function(value){this._url=value}),__getset(0,__proto,"name",function(){return this._name},function(value){!value&&""===value||this.name===value||(this._name=value,Resource._isLoadedResourcesSorted=!1)}),__getset(0,__proto,"disposed",function(){return this._disposed}),__getset(0,__proto,"released",function(){return this._released}),__getset(0,__proto,"resourceManager",function(){return this._resourceManager}),__getset(0,__proto,"lastUseFrameCount",function(){return this._lastUseFrameCount}),__getset(0,__proto,"memorySize",function(){return this._memorySize},function(value){var offsetValue=value-this._memorySize;this._memorySize=value,this.resourceManager&&this.resourceManager.addSize(offsetValue)}),__getset(1,Resource,"sortedLoadedResourcesByName",function(){return Resource._isLoadedResourcesSorted||(Resource._isLoadedResourcesSorted=!0,Resource._loadedResources.sort(Resource.compareResourcesByName)),Resource._loadedResources},laya.events.EventDispatcher._$SET_sortedLoadedResourcesByName),Resource.getLoadedResourceByIndex=function(index){return Resource._loadedResources[index]},Resource.getLoadedResourcesCount=function(){return Resource._loadedResources.length},Resource.compareResourcesByName=function(left,right){if(left===right)return 0;var x=left.name,y=right.name;if(null===x)return null===y?0:-1;if(null==y)return 1;var retval=x.localeCompare(y);return 0!=retval?retval:(right.setUniqueName(y),y=right.name,x.localeCompare(y))},Resource._uniqueIDCounter=0,Resource._loadedResources=[],Resource._isLoadedResourcesSorted=!1,Resource}(EventDispatcher),Texture=function(_super){function Texture(bitmap,uv){this.offsetX=0,this.offsetY=0,this.sourceWidth=0,this.sourceHeight=0,this._w=0,this._h=0,this._uvID=0,Texture.__super.call(this),bitmap&&bitmap.useNum++,this.setTo(bitmap,uv)}__class(Texture,"laya.resource.Texture",_super);var __proto=Texture.prototype;return __proto.setTo=function(bitmap,uv){if(this.bitmap=bitmap,this.uv=uv||Texture.DEF_UV,bitmap){this._w=bitmap.width,this._h=bitmap.height,this.sourceWidth=this.sourceWidth||this._w,this.sourceHeight=this.sourceHeight||this._h,this._loaded=this._w>0;var _this=this;if(this._loaded)RunDriver.addToAtlas&&RunDriver.addToAtlas(_this);else{var bm=bitmap;bm instanceof laya.resource.HTMLImage&&bm.image&&bm.image.addEventListener("load",function(e){RunDriver.addToAtlas&&RunDriver.addToAtlas(_this)},!1)}}},__proto.active=function(){this.bitmap.activeResource()},__proto.destroy=function(forceDispose){void 0===forceDispose&&(forceDispose=!1),this.bitmap&&this.bitmap.useNum>0&&(forceDispose?(this.bitmap.dispose(),this.bitmap.useNum=0):0==--this.bitmap.useNum&&this.bitmap.dispose(),this.bitmap=null,this.url&&this===Laya.loader.getRes(this.url)&&Laya.loader.clearRes(this.url,forceDispose),this._loaded=!1)},__proto.load=function(url){var _$this=this;this._loaded=!1;var fileBitmap=this.bitmap||(this.bitmap=HTMLImage.create(URL.formatURL(url)));fileBitmap&&fileBitmap.useNum++;var _this=this;fileBitmap.onload=function(){fileBitmap.onload=null,_this._loaded=!0,_$this.sourceWidth=_$this._w=fileBitmap.width,_$this.sourceHeight=_$this._h=fileBitmap.height,_this.event("loaded",this),RunDriver.addToAtlas&&RunDriver.addToAtlas(_this)}},__proto.addTextureToAtlas=function(e){RunDriver.addTextureToAtlas(this)},__proto.getPixels=function(x,y,width,height){return Render.isWebGL?RunDriver.getTexturePixels(this,x,y,width,height):(Browser.canvas.size(width,height),Browser.canvas.clear(),Browser.context.drawTexture(this,-x,-y,this.width,this.height,0,0),Browser.context.getImageData(0,0,width,height).data)},__proto.onAsynLoaded=function(url,bitmap){bitmap&&bitmap.useNum++,this.setTo(bitmap,this.uv)},__getset(0,__proto,"source",function(){return this.bitmap.activeResource(),this.bitmap.source}),__getset(0,__proto,"loaded",function(){return this._loaded}),__getset(0,__proto,"released",function(){return this.bitmap.released}),__getset(0,__proto,"width",function(){return this._w?this._w:this.uv&&this.uv!==Texture.DEF_UV?(this.uv[2]-this.uv[0])*this.bitmap.width:this.bitmap.width},function(value){this._w=value,this.sourceWidth||(this.sourceWidth=value)}),__getset(0,__proto,"repeat",function(){return!Render.isWebGL||!this.bitmap||this.bitmap.repeat},function(value){value&&Render.isWebGL&&this.bitmap&&(this.bitmap.repeat=value,value&&(this.bitmap.enableMerageInAtlas=!1))}),__getset(0,__proto,"height",function(){return this._h?this._h:this.uv&&this.uv!==Texture.DEF_UV?(this.uv[5]-this.uv[1])*this.bitmap.height:this.bitmap.height},function(value){this._h=value,this.sourceHeight||(this.sourceHeight=value)}),__getset(0,__proto,"isLinearSampling",function(){return!Render.isWebGL||9728!=this.bitmap.minFifter},function(value){!value&&Render.isWebGL&&(value||-1!=this.bitmap.minFifter||-1!=this.bitmap.magFifter||(this.bitmap.minFifter=9728,this.bitmap.magFifter=9728,this.bitmap.enableMerageInAtlas=!1))}),Texture.moveUV=function(offsetX,offsetY,uv){for(var i=0;i<8;i+=2)uv[i]+=offsetX,uv[i+1]+=offsetY;return uv},Texture.create=function(source,x,y,width,height,offsetX,offsetY,sourceWidth,sourceHeight){void 0===offsetX&&(offsetX=0),void 0===offsetY&&(offsetY=0),void 0===sourceWidth&&(sourceWidth=0),void 0===sourceHeight&&(sourceHeight=0);var btex=source instanceof laya.resource.Texture,uv=btex?source.uv:Texture.DEF_UV,bitmap=btex?source.bitmap:source,tex=new Texture(bitmap,null);bitmap.width&&x+width>bitmap.width&&(width=bitmap.width-x),bitmap.height&&y+height>bitmap.height&&(height=bitmap.height-y),tex.width=width,tex.height=height,tex.offsetX=offsetX,tex.offsetY=offsetY,tex.sourceWidth=sourceWidth||width,tex.sourceHeight=sourceHeight||height;var dwidth=1/bitmap.width,dheight=1/bitmap.height;x*=dwidth,y*=dheight,width*=dwidth,height*=dheight;var u1=tex.uv[0],v1=tex.uv[1],u2=tex.uv[4],v2=tex.uv[5],inAltasUVWidth=u2-u1,inAltasUVHeight=v2-v1,oriUV=Texture.moveUV(uv[0],uv[1],[x,y,x+width,y,x+width,y+height,x,y+height]);return tex.uv=[u1+oriUV[0]*inAltasUVWidth,v1+oriUV[1]*inAltasUVHeight,u2-(1-oriUV[2])*inAltasUVWidth,v1+oriUV[3]*inAltasUVHeight,u2-(1-oriUV[4])*inAltasUVWidth,v2-(1-oriUV[5])*inAltasUVHeight,u1+oriUV[6]*inAltasUVWidth,v2-(1-oriUV[7])*inAltasUVHeight],tex},Texture.createFromTexture=function(texture,x,y,width,height){var rect=Rectangle.TEMP.setTo(x-texture.offsetX,y-texture.offsetY,width,height),result=rect.intersection(Texture._rect1.setTo(0,0,texture.width,texture.height),Texture._rect2);if(!result)return null;var tex=Texture.create(texture,result.x,result.y,result.width,result.height,result.x-rect.x,result.y-rect.y,width,height);return tex.bitmap.useNum--,tex},Texture.DEF_UV=[0,0,1,0,1,1,0,1],Texture.INV_UV=[0,1,1,1,1,0,0,0],Texture._rect1=new Rectangle,Texture._rect2=new Rectangle,Texture}(EventDispatcher),TimeLine=function(_super){function TimeLine(){this._labelDic=null,this._tweenDic={},this._tweenDataList=[],this._endTweenDataList=null,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this._firstTweenDic={},this._startTimeSort=!1,this._endTimeSort=!1,this._loopKey=!1,this.scale=1,this._frameRate=60,this._frameIndex=0,this._total=0,TimeLine.__super.call(this)}var tweenData;__class(TimeLine,"laya.utils.TimeLine",_super);var __proto=TimeLine.prototype;return __proto.to=function(target,props,duration,ease,offset){return void 0===offset&&(offset=0),this._create(target,props,duration,ease,offset,!0)},__proto.from=function(target,props,duration,ease,offset){return void 0===offset&&(offset=0),this._create(target,props,duration,ease,offset,!1)},__proto._create=function(target,props,duration,ease,offset,isTo){var tTweenData=new tweenData;return tTweenData.isTo=isTo,tTweenData.type=0,tTweenData.target=target,tTweenData.duration=duration,tTweenData.data=props,tTweenData.startTime=this._startTime+offset,tTweenData.endTime=tTweenData.startTime+tTweenData.duration,tTweenData.ease=ease,this._startTime=Math.max(tTweenData.endTime,this._startTime),this._tweenDataList.push(tTweenData),this._startTimeSort=!0,this._endTimeSort=!0,this},__proto.addLabel=function(label,offset){var tTweenData=new tweenData;return tTweenData.type=1,tTweenData.data=label,tTweenData.endTime=tTweenData.startTime=this._startTime+offset,this._labelDic||(this._labelDic={}),this._labelDic[label]=tTweenData,this._tweenDataList.push(tTweenData),this},__proto.removeLabel=function(label){if(this._labelDic&&this._labelDic[label]){var tTweenData=this._labelDic[label];if(tTweenData){var tIndex=this._tweenDataList.indexOf(tTweenData);tIndex>-1&&this._tweenDataList.splice(tIndex,1)}delete this._labelDic[label]}},__proto.gotoTime=function(time){function Compare(paraA,paraB){return paraA.endTime>paraB.endTime?1:paraA.endTime<paraB.endTime?-1:0}if(null!=this._tweenDataList&&0!=this._tweenDataList.length){var tTween,tObject;for(var p in this._firstTweenDic)if(tObject=this._firstTweenDic[p])for(var tDataP in tObject)tObject.diyTarget.hasOwnProperty(tDataP)&&(tObject.diyTarget[tDataP]=tObject[tDataP]);for(p in this._tweenDic)(tTween=this._tweenDic[p]).clear(),delete this._tweenDic[p];this._index=0,this._gidIndex=0,this._currTime=time,this._lastTime=Browser.now();var tTweenDataCopyList;null==this._endTweenDataList||this._endTimeSort?(this._endTimeSort=!1,this._endTweenDataList=tTweenDataCopyList=this._tweenDataList.concat(),tTweenDataCopyList.sort(Compare)):tTweenDataCopyList=this._endTweenDataList;for(var tTweenData,i=0,n=tTweenDataCopyList.length;i<n;i++)if(0==(tTweenData=tTweenDataCopyList[i]).type){if(!(time>=tTweenData.endTime))break;this._index=Math.max(this._index,i+1);var props=tTweenData.data;for(var tP in props)tTweenData.isTo&&(tTweenData.target[tP]=props[tP])}for(i=0,n=this._tweenDataList.length;i<n;i++)0==(tTweenData=this._tweenDataList[i]).type&&time>=tTweenData.startTime&&time<tTweenData.endTime&&(this._index=Math.max(this._index,i+1),this._gidIndex++,(tTween=Pool.getItemByClass("tween",Tween))._create(tTweenData.target,tTweenData.data,tTweenData.duration,tTweenData.ease,Handler.create(this,this._animComplete,[this._gidIndex]),0,!1,tTweenData.isTo,!0,!1),tTween.setStartTime(this._currTime-(time-tTweenData.startTime)),tTween._updateEase(this._currTime),tTween.gid=this._gidIndex,this._tweenDic[this._gidIndex]=tTween)}},__proto.gotoLabel=function(Label){if(null!=this._labelDic){var tLabelData=this._labelDic[Label];tLabelData&&this.gotoTime(tLabelData.startTime)}},__proto.pause=function(){Laya.timer.clear(this,this._update)},__proto.resume=function(){this.play(this._currTime,this._loopKey)},__proto.play=function(timeOrLabel,loop){function Compare(paraA,paraB){return paraA.startTime>paraB.startTime?1:paraA.startTime<paraB.startTime?-1:0}if(void 0===timeOrLabel&&(timeOrLabel=0),void 0===loop&&(loop=!1),this._startTimeSort){this._startTimeSort=!1,this._tweenDataList.sort(Compare);for(var i=0,n=this._tweenDataList.length;i<n;i++){var tTweenData=this._tweenDataList[i];if(null!=tTweenData&&0==tTweenData.type){var tTarget=tTweenData.target,gid=tTarget.$_GID||(tTarget.$_GID=Utils.getGID()),tSrcData=null;null==this._firstTweenDic[gid]?((tSrcData={}).diyTarget=tTarget,this._firstTweenDic[gid]=tSrcData):tSrcData=this._firstTweenDic[gid];for(var p in tTweenData.data)null==tSrcData[p]&&(tSrcData[p]=tTarget[p])}}}"string"==typeof timeOrLabel?this.gotoLabel(timeOrLabel):this.gotoTime(timeOrLabel),this._loopKey=loop,this._lastTime=Browser.now(),Laya.timer.frameLoop(1,this,this._update)},__proto._update=function(){if(this._currTime>=this._startTime){if(!this._loopKey){for(var p in this._tweenDic)(tTween=this._tweenDic[p]).complete();return this._complete(),void this.pause()}this._complete(),this.gotoTime(0)}var tNow=Browser.now(),tFrameTime=tNow-this._lastTime,tCurrTime=this._currTime+=tFrameTime*this.scale;this._lastTime=tNow;var tTween;if(0!=this._tweenDataList.length&&this._index<this._tweenDataList.length){var tTweenData=this._tweenDataList[this._index];tCurrTime>=tTweenData.startTime&&(this._index++,0==tTweenData.type?(this._gidIndex++,(tTween=Pool.getItemByClass("tween",Tween))._create(tTweenData.target,tTweenData.data,tTweenData.duration,tTweenData.ease,new Handler(this,this._animComplete,[this._gidIndex]),0,!1,tTweenData.isTo,!0,!1),tTween.setStartTime(tCurrTime),tTween.gid=this._gidIndex,this._tweenDic[this._gidIndex]=tTween):this.event("label",tTweenData.data))}for(p in this._tweenDic)(tTween=this._tweenDic[p])._updateEase(tCurrTime)},__proto._animComplete=function(index){this._tweenDic[index]&&delete this._tweenDic[index]},__proto._complete=function(){this.event("complete")},__proto.reset=function(){var p;if(this._labelDic)for(p in this._labelDic)delete this._labelDic[p];for(p in this._tweenDic)this._tweenDic[p].clear(),delete this._tweenDic[p];for(p in this._firstTweenDic)delete this._firstTweenDic[p];this._endTweenDataList=null,this._tweenDataList.length=0,this._currTime=0,this._lastTime=0,this._startTime=0,this._index=0,this._gidIndex=0,this.scale=1,Laya.timer.clear(this,this._update)},__proto.destroy=function(){this.reset(),this._labelDic=null,this._tweenDic=null,this._tweenDataList=null,this._firstTweenDic=null},__getset(0,__proto,"index",function(){return this._frameIndex},function(value){this._frameIndex=value,this.gotoTime(this._frameIndex/this._frameRate*1e3)}),__getset(0,__proto,"total",function(){return this._total=Math.floor(this._startTime/1e3*this._frameRate),this._total}),TimeLine.to=function(target,props,duration,ease,offset){return void 0===offset&&(offset=0),(new TimeLine).to(target,props,duration,ease,offset)},TimeLine.from=function(target,props,duration,ease,offset){return void 0===offset&&(offset=0),(new TimeLine).from(target,props,duration,ease,offset)},TimeLine.__init$=function(){tweenData=function(){function tweenData(){this.type=0,this.isTo=!0,this.startTime=NaN,this.endTime=NaN,this.target=null,this.duration=NaN,this.ease=null,this.data=null}return __class(tweenData,""),tweenData}()},TimeLine}(EventDispatcher),Sprite=function(_super){function Sprite(){this.mouseThrough=!1,this._transform=null,this._tfChanged=!1,this._x=0,this._y=0,this._width=0,this._height=0,this._repaint=1,this._changeType=0,this._mouseEnableState=0,this._zOrder=0,this._graphics=null,this._renderType=0,this.autoSize=!1,this.hitTestPrior=!1,this.viewport=null,this._optimizeScrollRect=!1,this._texture=null,Sprite.__super.call(this),this._style=Style.EMPTY}__class(Sprite,"laya.display.Sprite",_super);var __proto=Sprite.prototype;return Laya.imps(__proto,{"laya.display.ILayout":!0}),__proto.createConchModel=function(){return new ConchNode},__proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),_super.prototype.destroy.call(this,destroyChild),this._style&&this._style.destroy(),this._transform=null,this._style=null,this._graphics=null},__proto.updateZOrder=function(){Utils.updateOrder(this._childs)&&this.repaint()},__proto.reCache=function(){this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0)},__proto.setBounds=function(bound){this._set$P("uBounds",bound)},__proto.getBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new Rectangle),Rectangle._getWrapRec(this._boundPointsToParent(),this._$P.mBounds)},__proto.getSelfBounds=function(){return this._$P.mBounds||this._set$P("mBounds",new Rectangle),Rectangle._getWrapRec(this._getBoundPointsM(!1),this._$P.mBounds)},__proto._boundPointsToParent=function(ifRotate){void 0===ifRotate&&(ifRotate=!1);var pX=0,pY=0;this._style&&(pX=this._style._tf.translateX,pY=this._style._tf.translateY,ifRotate=ifRotate||0!==this._style._tf.rotate,this._style.scrollRect&&(pX+=this._style.scrollRect.x,pY+=this._style.scrollRect.y));var pList=this._getBoundPointsM(ifRotate);if(!pList||pList.length<1)return pList;if(8!=pList.length&&(pList=ifRotate?GrahamScan.scanPList(pList):Rectangle._getWrapRec(pList,Rectangle.TEMP)._getBoundPoints()),!this.transform)return Utils.transPointList(pList,this.x-pX,this.y-pY),pList;var tPoint=Point.TEMP,i=0,len=pList.length;for(i=0;i<len;i+=2)tPoint.x=pList[i],tPoint.y=pList[i+1],this.toParentPoint(tPoint),pList[i]=tPoint.x,pList[i+1]=tPoint.y;return pList},__proto.getGraphicBounds=function(){return this._graphics?this._graphics.getBounds():Rectangle.TEMP.setTo(0,0,0,0)},__proto._getBoundPointsM=function(ifRotate){if(void 0===ifRotate&&(ifRotate=!1),this._$P.uBounds)return this._$P.uBounds._getBoundPoints();if(this._$P.temBM||this._set$P("temBM",[]),this.scrollRect){var rst=Utils.clearArray(this._$P.temBM),rec=Rectangle.TEMP;return rec.copyFrom(this.scrollRect),Utils.concatArray(rst,rec._getBoundPoints()),rst}for(var child,cList,__childs,pList=this._graphics?this._graphics.getBoundPoints():Utils.clearArray(this._$P.temBM),i=0,n=(__childs=this._childs).length;i<n;i++)(child=__childs[i])instanceof laya.display.Sprite&&1==child.visible&&(cList=child._boundPointsToParent(ifRotate))&&(pList=pList?Utils.concatArray(pList,cList):cList);return pList},__proto.getStyle=function(){return this._style===Style.EMPTY&&(this._style=new Style),this._style},__proto.setStyle=function(value){this._style=value},__proto._adjustTransform=function(){"use strict";this._tfChanged=!1;var m,tf=this._style._tf,sx=tf.scaleX,sy=tf.scaleY;if(tf.rotate||1!==sx||1!==sy||tf.skewX||tf.skewY){(m=this._transform||(this._transform=Matrix.create())).bTransform=!0;var skx=.0174532922222222*(tf.rotate-tf.skewX),sky=.0174532922222222*(tf.rotate+tf.skewY),cx=Math.cos(sky),ssx=Math.sin(sky),cy=Math.sin(skx),ssy=Math.cos(skx);return m.a=sx*cx,m.b=sx*ssx,m.c=-sy*cy,m.d=sy*ssy,m.tx=m.ty=0,m}return this._transform&&this._transform.destroy(),this._transform=null,this._renderType&=-5,m},__proto.pos=function(x,y,speedMode){if(void 0===speedMode&&(speedMode=!1),this._x!==x||this._y!==y){if(this.destroyed)return this;if(speedMode){this._x=x,this._y=y,this.conchModel&&this.conchModel.pos(this._x,this._y);var p=this._parent;p&&0===p._repaint&&(p._repaint=1,p.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}else this.x=x,this.y=y}return this},__proto.pivot=function(x,y){return this.pivotX=x,this.pivotY=y,this},__proto.size=function(width,height){return this.width=width,this.height=height,this},__proto.scale=function(scaleX,scaleY,speedMode){void 0===speedMode&&(speedMode=!1);var style=this.getStyle(),_tf=style._tf;if(_tf.scaleX!=scaleX||_tf.scaleY!=scaleY){if(this.destroyed)return this;if(speedMode){style.setScale(scaleX,scaleY),this._changeType|=16,this._tfChanged=!0,this.conchModel&&this.conchModel.scale(scaleX,scaleY),this._renderType|=4;var p=this._parent;p&&0===p._repaint&&(p._repaint=1,p.parentRepaint())}else this.scaleX=scaleX,this.scaleY=scaleY}return this},__proto.skew=function(skewX,skewY){return this.skewX=skewX,this.skewY=skewY,this},__proto.render=function(context,x,y){Stat.spriteCount++,RenderSprite.renders[this._renderType]._fun(this,context,x+this._x,y+this._y),this._repaint=0},__proto.drawToCanvas=function(canvasWidth,canvasHeight,offsetX,offsetY){return RunDriver.drawToCanvas(this,this._renderType,canvasWidth,canvasHeight,offsetX,offsetY)},__proto.customRender=function(context,x,y){this._renderType|=1024},__proto._applyFilters=function(){if(!Render.isWebGL){var _filters;if((_filters=this._$P.filters)&&!(_filters.length<1))for(var i=0,n=_filters.length;i<n;i++)_filters[i].action.apply(this._$P.cacheCanvas)}},__proto._isHaveGlowFilter=function(){var i=0,len=0;if(this.filters)for(i=0;i<this.filters.length;i++)if(8==this.filters[i].type)return!0;for(i=0,len=this._childs.length;i<len;i++)if(this._childs[i]._isHaveGlowFilter())return!0;return!1},__proto.localToGlobal=function(point,createNewPoint){if(void 0===createNewPoint&&(createNewPoint=!1),!this._displayedInStage||!point)return point;!0===createNewPoint&&(point=new Point(point.x,point.y));for(var ele=this;ele&&ele!=Laya.stage;)point=ele.toParentPoint(point),ele=ele.parent;return point},__proto.globalToLocal=function(point,createNewPoint){if(void 0===createNewPoint&&(createNewPoint=!1),!this._displayedInStage||!point)return point;!0===createNewPoint&&(point=new Point(point.x,point.y));for(var ele=this,list=[];ele&&ele!=Laya.stage;)list.push(ele),ele=ele.parent;for(var i=list.length-1;i>=0;)point=(ele=list[i]).fromParentPoint(point),i--;return point},__proto.toParentPoint=function(point){if(!point)return point;point.x-=this.pivotX,point.y-=this.pivotY,this.transform&&this._transform.transformPoint(point),point.x+=this._x,point.y+=this._y;var scroll=this._style.scrollRect;return scroll&&(point.x-=scroll.x,point.y-=scroll.y),point},__proto.fromParentPoint=function(point){if(!point)return point;point.x-=this._x,point.y-=this._y;var scroll=this._style.scrollRect;return scroll&&(point.x+=scroll.x,point.y+=scroll.y),this.transform&&this._transform.invertTransformPoint(point),point.x+=this.pivotX,point.y+=this.pivotY,point},__proto.on=function(type,caller,listener,args){return 1!==this._mouseEnableState&&this.isMouseEvent(type)&&(this._displayedInStage?this._$2__onDisplay():laya.events.EventDispatcher.prototype.once.call(this,"display",this,this._$2__onDisplay)),laya.events.EventDispatcher.prototype.on.call(this,type,caller,listener,args)},__proto.once=function(type,caller,listener,args){return 1!==this._mouseEnableState&&this.isMouseEvent(type)&&(this._displayedInStage?this._$2__onDisplay():laya.events.EventDispatcher.prototype.once.call(this,"display",this,this._$2__onDisplay)),laya.events.EventDispatcher.prototype.once.call(this,type,caller,listener,args)},__proto._$2__onDisplay=function(){if(1!==this._mouseEnableState)for(var ele=this;ele&&1!==ele._mouseEnableState;)ele.mouseEnabled=!0,ele=ele.parent},__proto.loadImage=function(url,x,y,width,height,complete){function loaded(tex){_$this.destroyed||(_$this.size(x+(width||tex.width),y+(height||tex.height)),_$this.repaint(),complete&&complete.runWith(tex))}var _$this=this;return void 0===x&&(x=0),void 0===y&&(y=0),void 0===width&&(width=0),void 0===height&&(height=0),this.graphics.loadImage(url,x,y,width,height,loaded),this},__proto.repaint=function(){this.conchModel&&this.conchModel.repaint&&this.conchModel.repaint(),0===this._repaint&&(this._repaint=1,this.parentRepaint()),this._$P&&this._$P.maskParent&&this._$P.maskParent.repaint()},__proto._needRepaint=function(){return 0!==this._repaint&&this._$P.cacheCanvas&&this._$P.cacheCanvas.reCache},__proto._childChanged=function(child){this._childs.length?this._renderType|=2048:this._renderType&=-2049,child&&this._get$P("hasZorder")&&Laya.timer.callLater(this,this.updateZOrder),this.repaint()},__proto.parentRepaint=function(){var p=this._parent;p&&0===p._repaint&&(p._repaint=1,p.parentRepaint())},__proto.startDrag=function(area,hasInertia,elasticDistance,elasticBackTime,data,disableMouseEvent,ratio){void 0===hasInertia&&(hasInertia=!1),void 0===elasticDistance&&(elasticDistance=0),void 0===elasticBackTime&&(elasticBackTime=300),void 0===disableMouseEvent&&(disableMouseEvent=!1),void 0===ratio&&(ratio=.92),this._$P.dragging||this._set$P("dragging",new Dragging),this._$P.dragging.start(this,area,hasInertia,elasticDistance,elasticBackTime,data,disableMouseEvent,ratio)},__proto.stopDrag=function(){this._$P.dragging&&this._$P.dragging.stop()},__proto._setDisplay=function(value){if(!value&&this._$P.cacheCanvas&&this._$P.cacheCanvas.ctx&&(Pool.recover("RenderContext",this._$P.cacheCanvas.ctx),this._$P.cacheCanvas.ctx.canvas.size(0,0),this._$P.cacheCanvas.ctx=null),!value){var fc=this._$P._filterCache;fc&&(fc.destroy(),fc.recycle(),this._set$P("_filterCache",null)),this._$P._isHaveGlowFilter&&this._set$P("_isHaveGlowFilter",!1)}_super.prototype._setDisplay.call(this,value)},__proto.hitTestPoint=function(x,y){var point=this.globalToLocal(Point.TEMP.setTo(x,y));return(this._$P.hitArea?this._$P.hitArea:Rectangle.TEMP.setTo(0,0,this._width,this._height)).contains(point.x,point.y)},__proto.getMousePoint=function(){return this.globalToLocal(Point.TEMP.setTo(Laya.stage.mouseX,Laya.stage.mouseY))},__proto._getWords=function(){return null},__proto._addChildsToLayout=function(out){var words=this._getWords();if(null==words&&0==this._childs.length)return!1;if(words)for(var i=0,n=words.length;i<n;i++)out.push(words[i]);return this._childs.forEach(function(o,index,array){o._style._enableLayout()&&o._addToLayout(out)}),!0},__proto._addToLayout=function(out){this._style.absolute||(this._style.block?out.push(this):this._addChildsToLayout(out)&&(this.x=this.y=0))},__proto._isChar=function(){return!1},__proto._getCSSStyle=function(){return this._style.getCSSStyle()},__proto._setAttributes=function(name,value){switch(name){case"x":this.x=parseFloat(value);break;case"y":this.y=parseFloat(value);break;case"width":this.width=parseFloat(value);break;case"height":this.height=parseFloat(value);break;default:this[name]=value}},__proto._layoutLater=function(){this.parent&&this.parent._layoutLater()},__getset(0,__proto,"optimizeScrollRect",function(){return this._optimizeScrollRect},function(b){this._optimizeScrollRect!=b&&(this._optimizeScrollRect=b,this.conchModel&&this.conchModel.optimizeScrollRect(b))}),__getset(0,__proto,"customRenderEnable",null,function(b){if(b&&(this._renderType|=1024,Render.isConchNode)){laya.display.Sprite.CustomList.push(this);var canvas=new HTMLCanvas("2d");canvas._setContext(new CanvasRenderingContext2D),this.customContext=new RenderContext(0,0,canvas),canvas.context.setCanvasType&&canvas.context.setCanvasType(2),this.conchModel.custom(canvas.context)}}),__getset(0,__proto,"cacheAsBitmap",function(){return"none"!==this.cacheAs},function(value){this.cacheAs=value?this._$P.hasFilter?"none":"normal":"none"}),__getset(0,__proto,"cacheAs",function(){return null==this._$P.cacheCanvas?"none":this._$P.cacheCanvas.type},function(value){var cacheCanvas=this._$P.cacheCanvas;value!==(cacheCanvas?cacheCanvas.type:"none")&&("none"!==value?(cacheCanvas||(cacheCanvas=this._set$P("cacheCanvas",Pool.getItemByClass("cacheCanvas",Object))),cacheCanvas.type=value,cacheCanvas.reCache=!0,this._renderType|=16,"bitmap"==value&&this.conchModel&&this.conchModel.cacheAs(1),this._set$P("cacheForFilters",!1)):this._$P.hasFilter?this._set$P("cacheForFilters",!0):(cacheCanvas&&Pool.recover("cacheCanvas",cacheCanvas),this._$P.cacheCanvas=null,this._renderType&=-17,this.conchModel&&this.conchModel.cacheAs(0)),this.repaint())}),__getset(0,__proto,"zOrder",function(){return this._zOrder},function(value){this._zOrder!=value&&(this._zOrder=value,this.conchModel&&this.conchModel.setZOrder&&this.conchModel.setZOrder(value),this._parent&&(value&&this._parent._set$P("hasZorder",!0),Laya.timer.callLater(this._parent,this.updateZOrder)))}),__getset(0,__proto,"rotation",function(){return this._style._tf.rotate},function(value){var style=this.getStyle();if(style._tf.rotate!==value){this._changeType|=16,style.setRotate(value),this._tfChanged=!0,this.conchModel&&this.conchModel.rotate(value),this._renderType|=4;var p=this._parent;p&&0===p._repaint&&(p._repaint=1,p.parentRepaint())}}),__getset(0,__proto,"width",function(){return this.autoSize?this.getSelfBounds().width:this._width},function(value){this._width!==value&&(this._width=value,this.conchModel&&this.conchModel.size(value,this._height),this.repaint())}),__getset(0,__proto,"x",function(){return this._x},function(value){if(this._x!==value){if(this.destroyed)return;this._x=value,this.conchModel&&this.conchModel.pos(value,this._y);var p=this._parent;p&&0===p._repaint&&(p._repaint=1,p.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),__getset(0,__proto,"globalScaleY",function(){for(var scale=1,ele=this;ele&&ele!==Laya.stage;)scale*=ele.scaleX,ele=ele.parent;return scale}),__getset(0,__proto,"hitArea",function(){return this._$P.hitArea},function(value){this._set$P("hitArea",value)}),__getset(0,__proto,"staticCache",function(){return this._$P.staticCache},function(value){this._set$P("staticCache",value),!value&&this._$P.cacheCanvas&&(this._$P.cacheCanvas.reCache=!0)}),__getset(0,__proto,"texture",function(){return this._texture},function(value){this._texture!=value&&(this._texture=value,this.graphics.cleanByTexture(value,0,0))}),__getset(0,__proto,"y",function(){return this._y},function(value){if(this._y!==value){if(this.destroyed)return;this._y=value,this.conchModel&&this.conchModel.pos(this._x,value);var p=this._parent;p&&0===p._repaint&&(p._repaint=1,p.parentRepaint()),this._$P.maskParent&&0===this._$P.maskParent._repaint&&(this._$P.maskParent._repaint=1,this._$P.maskParent.parentRepaint())}}),__getset(0,__proto,"height",function(){return this.autoSize?this.getSelfBounds().height:this._height},function(value){this._height!==value&&(this._height=value,this.conchModel&&this.conchModel.size(this._width,value),this.repaint())}),__getset(0,__proto,"blendMode",function(){return this._style.blendMode},function(value){this.getStyle().blendMode=value,this.conchModel&&this.conchModel.blendMode(value),value&&"source-over"!=value?this._renderType|=8:this._renderType&=-9,this.parentRepaint()}),__getset(0,__proto,"scaleX",function(){return this._style._tf.scaleX},function(value){var style=this.getStyle();if(style._tf.scaleX!==value){style.setScaleX(value),this._changeType|=16,this._tfChanged=!0,this.conchModel&&this.conchModel.scale(value,style._tf.scaleY),this._renderType|=4;var p=this._parent;p&&0===p._repaint&&(p._repaint=1,p.parentRepaint())}}),__getset(0,__proto,"scaleY",function(){return this._style._tf.scaleY},function(value){var style=this.getStyle();if(style._tf.scaleY!==value){style.setScaleY(value),this._changeType|=16,this._tfChanged=!0,this.conchModel&&this.conchModel.scale(style._tf.scaleX,value),this._renderType|=4;var p=this._parent;p&&0===p._repaint&&(p._repaint=1,p.parentRepaint())}}),__getset(0,__proto,"stage",function(){return Laya.stage}),__getset(0,__proto,"skewX",function(){return this._style._tf.skewX},function(value){var style=this.getStyle();if(style._tf.skewX!==value){style.setSkewX(value),this._tfChanged=!0,this._renderType|=4;var p=this._parent;p&&0===p._repaint&&(p._repaint=1,p.parentRepaint())}}),__getset(0,__proto,"scrollRect",function(){return this._style.scrollRect},function(value){this.getStyle().scrollRect=value,this.repaint(),value?(this._renderType|=128,this.conchModel&&this.conchModel.scrollRect(value.x,value.y,value.width,value.height)):(this._renderType&=-129,this.conchModel&&(Sprite.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(64):this.conchModel.removeType(128)))}),__getset(0,__proto,"skewY",function(){return this._style._tf.skewY},function(value){var style=this.getStyle();if(style._tf.skewY!==value){style.setSkewY(value),this._tfChanged=!0,this.conchModel&&this.conchModel.skew(style._tf.skewX,value),this._renderType|=4;var p=this._parent;p&&0===p._repaint&&(p._repaint=1,p.parentRepaint())}}),__getset(0,__proto,"transform",function(){return this._tfChanged?this._adjustTransform():this._transform},function(value){this._tfChanged=!1,this._transform=value,value&&(this._x=value.tx,this._y=value.ty,value.tx=value.ty=0,this.conchModel&&this.conchModel.transform(value.a,value.b,value.c,value.d,this._x,this._y)),value?this._renderType|=4:(this._renderType&=-5,this.conchModel&&this.conchModel.removeType(4)),this.parentRepaint()}),__getset(0,__proto,"pivotX",function(){return this._style._tf.translateX},function(value){this.getStyle().setTranslateX(value),this._changeType|=16,this.conchModel&&this.conchModel.pivot(value,this._style._tf.translateY),this.repaint()}),__getset(0,__proto,"pivotY",function(){return this._style._tf.translateY},function(value){this.getStyle().setTranslateY(value),this._changeType|=16,this.conchModel&&this.conchModel.pivot(this._style._tf.translateX,value),this.repaint()}),__getset(0,__proto,"alpha",function(){return this._style.alpha},function(value){this._style&&this._style.alpha!==value&&(value=value<0?0:value>1?1:value,this.getStyle().alpha=value,this.conchModel&&this.conchModel.alpha(value),1!==value?this._renderType|=2:this._renderType&=-3,this.parentRepaint())}),__getset(0,__proto,"visible",function(){return this._style.visible},function(value){this._style&&this._style.visible!==value&&(this.getStyle().visible=value,this.conchModel&&this.conchModel.visible(value),this.parentRepaint())}),__getset(0,__proto,"graphics",function(){return this._graphics||(this.graphics=RunDriver.createGraphics())},function(value){this._graphics&&(this._graphics._sp=null),this._graphics=value,value?(this._renderType&=-2,this._renderType|=512,value._sp=this,this.conchModel&&this.conchModel.graphics(this._graphics)):(this._renderType&=-513,this._renderType&=-2,this.conchModel&&(Sprite.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(256):this.conchModel.removeType(512))),this.repaint()}),__getset(0,__proto,"filters",function(){return this._$P.filters},function(value){value&&0===value.length&&(value=null),this._$P.filters!=value&&(this._set$P("filters",value?value.slice():null),Render.isConchApp&&(this.conchModel&&(Sprite.RUNTIMEVERION<"0.9.1"?this.conchModel.removeType(16):this.conchModel.removeType(32)),this._$P.filters&&1==this._$P.filters.length&&this._$P.filters[0].callNative(this)),Render.isWebGL&&(value&&value.length?this._renderType|=32:this._renderType&=-33),value&&value.length>0?Render.isWebGL&&1==value.length&&value[0]instanceof laya.filters.ColorFilter||("bitmap"!=this.cacheAs&&(Render.isConchNode||(this.cacheAs="bitmap"),this._set$P("cacheForFilters",!0)),this._set$P("hasFilter",!0)):(this._set$P("hasFilter",!1),this._$P.cacheForFilters&&"bitmap"==this.cacheAs&&(this.cacheAs="none")),this.repaint())}),__getset(0,__proto,"mask",function(){return this._$P._mask},function(value){value&&this.mask&&this.mask._$P.maskParent||(value?(this.cacheAs="bitmap",this._set$P("_mask",value),value._set$P("maskParent",this)):(this.cacheAs="none",this.mask&&this.mask._set$P("maskParent",null),this._set$P("_mask",value)),this.conchModel&&this.conchModel.mask(value?value.conchModel:null),this._renderType|=64,this.parentRepaint())}),__getset(0,__proto,"mouseEnabled",function(){return this._mouseEnableState>1},function(value){this._mouseEnableState=value?2:1}),__getset(0,__proto,"globalScaleX",function(){for(var scale=1,ele=this;ele&&ele!==Laya.stage;)scale*=ele.scaleX,ele=ele.parent;return scale}),__getset(0,__proto,"mouseX",function(){return this.getMousePoint().x}),__getset(0,__proto,"mouseY",function(){return this.getMousePoint().y}),Sprite.fromImage=function(url){return(new Sprite).loadImage(url)},Sprite.CHG_VIEW=16,Sprite.CHG_SCALE=256,Sprite.CHG_TEXTURE=4096,Sprite.CustomList=[],__static(Sprite,["RUNTIMEVERION",function(){return this.RUNTIMEVERION=window.conch?conchConfig.getRuntimeVersion().substr(conchConfig.getRuntimeVersion().lastIndexOf("-")+1):""}]),Sprite}(Node),AudioSoundChannel=function(_super){function AudioSoundChannel(audio){this._audio=null,this._onEnd=null,this._resumePlay=null,AudioSoundChannel.__super.call(this),this._onEnd=Utils.bind(this.__onEnd,this),this._resumePlay=Utils.bind(this.__resumePlay,this),audio.addEventListener("ended",this._onEnd),this._audio=audio}__class(AudioSoundChannel,"laya.media.h5audio.AudioSoundChannel",_super);var __proto=AudioSoundChannel.prototype;return __proto.__onEnd=function(){if(1==this.loops)return this.completeHandler&&(Laya.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");this.loops>0&&this.loops--,this.play()},__proto.__resumePlay=function(){this._audio&&this._audio.removeEventListener("canplay",this._resumePlay);try{this._audio.currentTime=this.startTime,Browser.container.appendChild(this._audio),this._audio.play()}catch(e){this.event("error")}},__proto.play=function(){try{this._audio.playbackRate=SoundManager.playbackRate,this._audio.currentTime=this.startTime}catch(e){return void this._audio.addEventListener("canplay",this._resumePlay)}Browser.container.appendChild(this._audio),"play"in this._audio&&this._audio.play()},__proto.stop=function(){this.isStopped=!0,SoundManager.removeChannel(this),this.completeHandler=null,this._audio&&("pause"in this._audio&&this._audio.pause(),this._audio.removeEventListener("ended",this._onEnd),this._audio.removeEventListener("canplay",this._resumePlay),Pool.recover("audio:"+this.url,this._audio),Browser.removeElement(this._audio),this._audio=null)},__getset(0,__proto,"position",function(){return this._audio?this._audio.currentTime:0}),__getset(0,__proto,"duration",function(){return this._audio?this._audio.duration:0}),__getset(0,__proto,"volume",function(){return this._audio?this._audio.volume:1},function(v){this._audio&&(this._audio.volume=v)}),AudioSoundChannel}(SoundChannel),WebAudioSoundChannel=function(_super){function WebAudioSoundChannel(){this.audioBuffer=null,this.gain=null,this.bufferSource=null,this._currentTime=0,this._volume=1,this._startTime=0,this._onPlayEnd=null,this.context=WebAudioSound.ctx,WebAudioSoundChannel.__super.call(this),this._onPlayEnd=Utils.bind(this.__onPlayEnd,this),this.context.createGain?this.gain=this.context.createGain():this.gain=this.context.createGainNode()}__class(WebAudioSoundChannel,"laya.media.webaudio.WebAudioSoundChannel",_super);var __proto=WebAudioSoundChannel.prototype;return __proto.play=function(){if(this._clearBufferSource(),this.audioBuffer){var context=this.context,gain=this.gain,bufferSource=context.createBufferSource();this.bufferSource=bufferSource,bufferSource.buffer=this.audioBuffer,bufferSource.connect(gain),gain&&gain.disconnect(),gain.connect(context.destination),bufferSource.onended=this._onPlayEnd,this._startTime=Browser.now(),this.gain.gain.value=this._volume,0==this.loops&&(bufferSource.loop=!0),bufferSource.playbackRate.value=SoundManager.playbackRate,bufferSource.start(0,this.startTime),this._currentTime=0}},__proto.__onPlayEnd=function(){if(1==this.loops)return this.completeHandler&&(Laya.timer.once(10,this,this.__runComplete,[this.completeHandler],!1),this.completeHandler=null),this.stop(),void this.event("complete");this.loops>0&&this.loops--,this.play()},__proto._clearBufferSource=function(){if(this.bufferSource){var sourceNode=this.bufferSource;sourceNode.stop?sourceNode.stop(0):sourceNode.noteOff(0),sourceNode.disconnect(0),sourceNode.onended=null,WebAudioSoundChannel._tryCleanFailed||this._tryClearBuffer(sourceNode),this.bufferSource=null}},__proto._tryClearBuffer=function(sourceNode){try{sourceNode.buffer=WebAudioSound._miniBuffer}catch(e){WebAudioSoundChannel._tryCleanFailed=!0}},__proto.stop=function(){this._clearBufferSource(),this.audioBuffer=null,this.gain&&this.gain.disconnect(),this.isStopped=!0,SoundManager.removeChannel(this),this.completeHandler=null},__getset(0,__proto,"position",function(){return this.bufferSource?(Browser.now()-this._startTime)/1e3+this.startTime:0}),__getset(0,__proto,"duration",function(){return this.audioBuffer?this.audioBuffer.duration:0}),__getset(0,__proto,"volume",function(){return this._volume},function(v){this.isStopped||(this._volume=v,this.gain.gain.value=v)}),WebAudioSoundChannel._tryCleanFailed=!1,WebAudioSoundChannel}(SoundChannel),Bitmap=function(_super){function Bitmap(){this.useNum=0,Bitmap.__super.call(this),this._w=0,this._h=0}__class(Bitmap,"laya.resource.Bitmap",_super);var __proto=Bitmap.prototype;return __proto.dispose=function(){this._resourceManager.removeResource(this),_super.prototype.dispose.call(this)},__getset(0,__proto,"width",function(){return this._w}),__getset(0,__proto,"height",function(){return this._h}),__getset(0,__proto,"source",function(){return this._source}),Bitmap}(Resource),AnimationPlayerBase=function(_super){function AnimationPlayerBase(){this.loop=!1,this.wrapMode=0,this._index=0,this._count=0,this._isPlaying=!1,this._labels=null,this._isReverse=!1,this._frameRateChanged=!1,this._controlNode=null,this._actionName=null,AnimationPlayerBase.__super.call(this),this._interval=Config.animationInterval}__class(AnimationPlayerBase,"laya.display.AnimationPlayerBase",_super);var __proto=AnimationPlayerBase.prototype;return __proto.play=function(start,loop,name){void 0===start&&(start=0),void 0===loop&&(loop=!0),void 0===name&&(name=""),this._isPlaying=!0,this.index="string"==typeof start?this._getFrameByLabel(start):start,this.loop=loop,this._actionName=name,this._isReverse=1==this.wrapMode,this.interval>0&&this.timerLoop(this.interval,this,this._frameLoop,null,!0)},__proto._getFrameByLabel=function(label){var i=0;for(i=0;i<this._count;i++)if(this._labels[i]==label)return i;return 0},__proto._frameLoop=function(){if(this._isReverse){if(--this._index<0){if(!this.loop)return this._index=0,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=this._count>0?1:0,this._isReverse=!1):this._index=this._count-1,this.event("complete")}}else if(++this._index>=this._count){if(!this.loop)return this._index--,this.stop(),void this.event("complete");2==this.wrapMode?(this._index=this._count-2>=0?this._count-2:0,this._isReverse=!0):this._index=0,this.event("complete")}this.index=this._index},__proto._setControlNode=function(node){this._controlNode&&(this._controlNode.off("display",this,this._$3__onDisplay),this._controlNode.off("undisplay",this,this._$3__onDisplay)),this._controlNode=node,node&&node!=this&&(node.on("display",this,this._$3__onDisplay),node.on("undisplay",this,this._$3__onDisplay))},__proto._setDisplay=function(value){_super.prototype._setDisplay.call(this,value),this._$3__onDisplay()},__proto._$3__onDisplay=function(){this._isPlaying&&(this._controlNode.displayedInStage?this.play(this._index,this.loop,this._actionName):this.clearTimer(this,this._frameLoop))},__proto.stop=function(){this._isPlaying=!1,this.clearTimer(this,this._frameLoop)},__proto.addLabel=function(label,index){this._labels||(this._labels={}),this._labels[index]=label},__proto.removeLabel=function(label){if(label){if(this._labels)for(var name in this._labels)if(this._labels[name]===label){delete this._labels[name];break}}else this._labels=null},__proto.gotoAndStop=function(position){this.index="string"==typeof position?this._getFrameByLabel(position):position,this.stop()},__proto._displayToIndex=function(value){},__proto.clear=function(){this.stop(),this._labels=null},__getset(0,__proto,"interval",function(){return this._interval},function(value){this._interval!=value&&(this._frameRateChanged=!0,this._interval=value,this._isPlaying&&value>0&&this.timerLoop(value,this,this._frameLoop,null,!0))}),__getset(0,__proto,"isPlaying",function(){return this._isPlaying}),__getset(0,__proto,"index",function(){return this._index},function(value){this._index=value,this._displayToIndex(value),this._labels&&this._labels[value]&&this.event("label",this._labels[value])}),__getset(0,__proto,"count",function(){return this._count}),AnimationPlayerBase}(Sprite),Text=function(_super){function Text(){this._clipPoint=null,this._currBitmapFont=null,this._text=null,this._isChanged=!1,this._textWidth=0,this._textHeight=0,this._lines=[],this._lineWidths=[],this._startX=NaN,this._startY=NaN,this._lastVisibleLineIndex=-1,this._words=null,this._charSize={},this.underline=!1,this._underlineColor=null,Text.__super.call(this),this.overflow=Text.VISIBLE,this._style=new CSSStyle(this),this._style.wordWrap=!1}__class(Text,"laya.display.Text",_super);var __proto=Text.prototype;return __proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),_super.prototype.destroy.call(this,destroyChild),this._lines=null,this._words&&(this._words.length=0,this._words=null)},__proto._getBoundPointsM=function(ifRotate){void 0===ifRotate&&(ifRotate=!1);var rec=Rectangle.TEMP;return rec.setTo(0,0,this.width,this.height),rec._getBoundPoints()},__proto.getGraphicBounds=function(){var rec=Rectangle.TEMP;return rec.setTo(0,0,this.width,this.height),rec},__proto._getCSSStyle=function(){return this._style},__proto.lang=function(text,arg1,arg2,arg3,arg4,arg5,arg6,arg7,arg8,arg9,arg10){if(text=Text.langPacks&&Text.langPacks[text]?Text.langPacks[text]:text,arguments.length<2)this._text=text;else{for(var i=0,n=arguments.length;i<n;i++)text=text.replace("{"+i+"}",arguments[i+1]);this._text=text}},__proto.renderText=function(begin,visibleLineCount){var graphics=this.graphics;graphics.clear();var ctxFont=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;Browser.context.font=ctxFont;var padding=this.padding,startX=padding[3],textAlgin="left",lines=this._lines,lineHeight=this.leading+this._charSize.height,tCurrBitmapFont=this._currBitmapFont;tCurrBitmapFont&&(lineHeight=this.leading+tCurrBitmapFont.getMaxHeight());var startY=padding[0];if(!tCurrBitmapFont&&this._width>0&&this._textWidth<=this._width&&("right"==this.align?(textAlgin="right",startX=this._width-padding[1]):"center"==this.align&&(textAlgin="center",startX=.5*this._width+padding[3]-padding[1])),this._height>0){var tempVAlign=this._textHeight>this._height?"top":this.valign;"middle"===tempVAlign?startY=.5*(this._height-visibleLineCount*lineHeight)+padding[0]-padding[2]:"bottom"===tempVAlign&&(startY=this._height-visibleLineCount*lineHeight-padding[2])}var style=this._style;if(tCurrBitmapFont&&tCurrBitmapFont.autoScaleSize)var bitmapScale=tCurrBitmapFont.fontSize/this.fontSize;if(this._clipPoint)if(graphics.save(),tCurrBitmapFont&&tCurrBitmapFont.autoScaleSize){var tClipWidth=0,tClipHeight=0;tClipWidth=this._width?this._width-padding[3]-padding[1]:this._textWidth,tClipHeight=this._height?this._height-padding[0]-padding[2]:this._textHeight,tClipWidth*=bitmapScale,tClipHeight*=bitmapScale,graphics.clipRect(padding[3],padding[0],tClipWidth,tClipHeight)}else graphics.clipRect(padding[3],padding[0],this._width?this._width-padding[3]-padding[1]:this._textWidth,this._height?this._height-padding[0]-padding[2]:this._textHeight);var password=style.password;"prompt"in this&&this.prompt==this._text&&(password=!1);for(var x=0,y=0,end=Math.min(this._lines.length,visibleLineCount+begin)||1,i=begin;i<end;i++){var _word,word=lines[i];if(password){var len=word.length;word="";for(var j=len;j>0;j--)word+="●"}if(x=startX-(this._clipPoint?this._clipPoint.x:0),y=startY+lineHeight*i-(this._clipPoint?this._clipPoint.y:0),this.underline&&this.drawUnderline(textAlgin,x,y,i),tCurrBitmapFont){var tWidth=this.width;tCurrBitmapFont.autoScaleSize&&(tWidth=this.width*bitmapScale),tCurrBitmapFont.drawText(word,this,x,y,this.align,tWidth)}else Render.isWebGL?(this._words||(this._words=[]),(_word=this._words.length>i-begin?this._words[i-begin]:new WordText).setText(word)):_word=word,style.stroke?graphics.fillBorderText(_word,x,y,ctxFont,this.color,style.strokeColor,style.stroke,textAlgin):graphics.fillText(_word,x,y,ctxFont,this.color,textAlgin)}if(tCurrBitmapFont&&tCurrBitmapFont.autoScaleSize){var tScale=1/bitmapScale;this.scale(tScale,tScale)}this._clipPoint&&graphics.restore(),this._startX=startX,this._startY=startY},__proto.drawUnderline=function(align,x,y,lineIndex){var lineWidth=this._lineWidths[lineIndex];switch(align){case"center":x-=lineWidth/2;break;case"right":x-=lineWidth}y+=this._charSize.height,this._graphics.drawLine(x,y,x+lineWidth,y,this.underlineColor||this.color,1)},__proto.typeset=function(){if(this._isChanged=!1,!this._text)return this._clipPoint=null,this._textWidth=this._textHeight=0,void this.graphics.clear();Browser.context.font=this._getCSSStyle().font,this._lines.length=0,this._lineWidths.length=0,this.parseLines(this._text),this.evalTextSize(),this.checkEnabledViewportOrNot()?this._clipPoint||(this._clipPoint=new Point(0,0)):this._clipPoint=null;var lineCount=this._lines.length;if(this.overflow!=Text.VISIBLE){var func=this.overflow==Text.HIDDEN?Math.floor:Math.ceil;lineCount=Math.min(lineCount,func((this.height-this.padding[0]-this.padding[2])/(this.leading+this._charSize.height)))}var startLine=this.scrollY/(this._charSize.height+this.leading)|0;this.renderText(startLine,lineCount),this.repaint()},__proto.evalTextSize=function(){var nw=NaN,nh=NaN;nw=Math.max.apply(this,this._lineWidths),nh=this._currBitmapFont?this._lines.length*(this._currBitmapFont.getMaxHeight()+this.leading)+this.padding[0]+this.padding[2]:this._lines.length*(this._charSize.height+this.leading)+this.padding[0]+this.padding[2],nw==this._textWidth&&nh==this._textHeight||(this._textWidth=nw,this._textHeight=nh,this._width&&this._height||this.conchModel&&this.conchModel.size(this._width||this._textWidth,this._height||this._textHeight))},__proto.checkEnabledViewportOrNot=function(){return this.overflow==Text.SCROLL&&(this._width>0&&this._textWidth>this._width||this._height>0&&this._textHeight>this._height)},__proto.changeText=function(text){this._text!==text&&(this.lang(text+""),this._graphics&&this._graphics.replaceText(this._text)||this.typeset())},__proto.parseLines=function(text){var needWordWrapOrTruncate=this.wordWrap||this.overflow==Text.HIDDEN;if(needWordWrapOrTruncate)var wordWrapWidth=this.getWordWrapWidth();if(this._currBitmapFont)this._charSize.width=this._currBitmapFont.getMaxWidth(),this._charSize.height=this._currBitmapFont.getMaxHeight();else{var measureResult=Browser.context.measureText(Text._testWord);this._charSize.width=measureResult.width,this._charSize.height=measureResult.height||this.fontSize}for(var lines=text.replace(/\r\n/g,"\n").split("\n"),i=0,n=lines.length;i<n;i++){i<n-1&&(lines[i]+="\n");var line=lines[i];needWordWrapOrTruncate?this.parseLine(line,wordWrapWidth):(this._lineWidths.push(this.getTextWidth(line)),this._lines.push(line))}},__proto.parseLine=function(line,wordWrapWidth){Browser.context;var execResult,lines=this._lines,maybeIndex=0,charsWidth=NaN,wordWidth=NaN,startIndex=0;if((charsWidth=this.getTextWidth(line))<=wordWrapWidth)return lines.push(line),void this._lineWidths.push(charsWidth);charsWidth=this._charSize.width,0==(maybeIndex=Math.floor(wordWrapWidth/charsWidth))&&(maybeIndex=1),wordWidth=charsWidth=this.getTextWidth(line.substring(0,maybeIndex));for(var j=maybeIndex,m=line.length;j<m;j++)if(charsWidth=this.getTextWidth(line.charAt(j)),(wordWidth+=charsWidth)>wordWrapWidth)if(this.wordWrap){var newLine=line.substring(startIndex,j);if(newLine.charCodeAt(newLine.length-1)<255&&(execResult=/[^\x20-]+$/.exec(newLine))&&(j=execResult.index+startIndex,0==execResult.index?j+=newLine.length:newLine=line.substring(startIndex,j)),lines.push(newLine),this._lineWidths.push(wordWidth-charsWidth),startIndex=j,!(j+maybeIndex<m)){lines.push(line.substring(startIndex,m)),this._lineWidths.push(this.getTextWidth(lines[lines.length-1])),startIndex=-1;break}j+=maybeIndex,wordWidth=charsWidth=this.getTextWidth(line.substring(startIndex,j)),j--}else if(this.overflow==Text.HIDDEN)return lines.push(line.substring(0,j)),void this._lineWidths.push(this.getTextWidth(lines[lines.length-1]));this.wordWrap&&-1!=startIndex&&(lines.push(line.substring(startIndex,m)),this._lineWidths.push(this.getTextWidth(lines[lines.length-1])))},__proto.getTextWidth=function(text){return this._currBitmapFont?this._currBitmapFont.getTextWidth(text):Browser.context.measureText(text).width},__proto.getWordWrapWidth=function(){var p=this.padding,w=NaN;return(w=this._currBitmapFont&&this._currBitmapFont.autoScaleSize?this._width*(this._currBitmapFont.fontSize/this.fontSize):this._width)<=0&&(w=this.wordWrap?100:Browser.width),w<=0&&(w=100),w-p[3]-p[1]},__proto.getCharPoint=function(charIndex,out){this._isChanged&&Laya.timer.runCallLater(this,this.typeset);for(var len=0,lines=this._lines,startIndex=0,i=0,n=lines.length;i<n;i++){if(len+=lines[i].length,charIndex<len){var line=i;break}startIndex=len}var ctxFont=(this.italic?"italic ":"")+(this.bold?"bold ":"")+this.fontSize+"px "+this.font;Browser.context.font=ctxFont;var width=this.getTextWidth(this._text.substring(startIndex,charIndex));return(out||new Point).setTo(this._startX+width-(this._clipPoint?this._clipPoint.x:0),this._startY+line*(this._charSize.height+this.leading)-(this._clipPoint?this._clipPoint.y:0))},__getset(0,__proto,"width",function(){return this._width?this._width:this.textWidth+this.padding[1]+this.padding[3]},function(value){value!=this._width&&(_super.prototype._$set_width.call(this,value),this.isChanged=!0)}),__getset(0,__proto,"textWidth",function(){return this._isChanged&&Laya.timer.runCallLater(this,this.typeset),this._textWidth}),__getset(0,__proto,"height",function(){return this._height?this._height:this.textHeight+this.padding[0]+this.padding[2]},function(value){value!=this._height&&(_super.prototype._$set_height.call(this,value),this.isChanged=!0)}),__getset(0,__proto,"textHeight",function(){return this._isChanged&&Laya.timer.runCallLater(this,this.typeset),this._textHeight}),__getset(0,__proto,"padding",function(){return this._getCSSStyle().padding},function(value){this._getCSSStyle().padding=value,this.isChanged=!0}),__getset(0,__proto,"bold",function(){return this._getCSSStyle().bold},function(value){this._getCSSStyle().bold=value,this.isChanged=!0}),__getset(0,__proto,"text",function(){return this._text||""},function(value){this._text!==value&&(this.lang(value+""),this.isChanged=!0,this.event("change"))}),__getset(0,__proto,"color",function(){return this._getCSSStyle().color},function(value){this._getCSSStyle().color!=value&&(this._getCSSStyle().color=value,!this._isChanged&&this._graphics?this._graphics.replaceTextColor(this.color):this.isChanged=!0)}),__getset(0,__proto,"font",function(){return this._getCSSStyle().fontFamily},function(value){this._currBitmapFont&&(this._currBitmapFont=null,this.scale(1,1)),Text._bitmapFonts&&Text._bitmapFonts[value]&&(this._currBitmapFont=Text._bitmapFonts[value]),this._getCSSStyle().fontFamily=value,this.isChanged=!0}),__getset(0,__proto,"fontSize",function(){return this._getCSSStyle().fontSize},function(value){this._getCSSStyle().fontSize=value,this.isChanged=!0}),__getset(0,__proto,"italic",function(){return this._getCSSStyle().italic},function(value){this._getCSSStyle().italic=value,this.isChanged=!0}),__getset(0,__proto,"align",function(){return this._getCSSStyle().align},function(value){this._getCSSStyle().align=value,this.isChanged=!0}),__getset(0,__proto,"valign",function(){return this._getCSSStyle().valign},function(value){this._getCSSStyle().valign=value,this.isChanged=!0}),__getset(0,__proto,"wordWrap",function(){return this._getCSSStyle().wordWrap},function(value){this._getCSSStyle().wordWrap=value,this.isChanged=!0}),__getset(0,__proto,"leading",function(){return this._getCSSStyle().leading},function(value){this._getCSSStyle().leading=value,this.isChanged=!0}),__getset(0,__proto,"bgColor",function(){return this._getCSSStyle().backgroundColor},function(value){this._getCSSStyle().backgroundColor=value,this.isChanged=!0}),__getset(0,__proto,"borderColor",function(){return this._getCSSStyle().borderColor},function(value){this._getCSSStyle().borderColor=value,this.isChanged=!0}),__getset(0,__proto,"stroke",function(){return this._getCSSStyle().stroke},function(value){this._getCSSStyle().stroke=value,this.isChanged=!0}),__getset(0,__proto,"strokeColor",function(){return this._getCSSStyle().strokeColor},function(value){this._getCSSStyle().strokeColor=value,this.isChanged=!0}),__getset(0,__proto,"isChanged",null,function(value){this._isChanged!==value&&(this._isChanged=value,value&&Laya.timer.callLater(this,this.typeset))}),__getset(0,__proto,"scrollX",function(){return this._clipPoint?this._clipPoint.x:0},function(value){if(!(this.overflow!=Text.SCROLL||this.textWidth<this._width)&&this._clipPoint){value=value<this.padding[3]?this.padding[3]:value;var maxScrollX=this._textWidth-this._width;value=value>maxScrollX?maxScrollX:value;var visibleLineCount=this._height/(this._charSize.height+this.leading)|1;this._clipPoint.x=value,this.renderText(this._lastVisibleLineIndex,visibleLineCount)}}),__getset(0,__proto,"scrollY",function(){return this._clipPoint?this._clipPoint.y:0},function(value){if(!(this.overflow!=Text.SCROLL||this.textHeight<this._height)&&this._clipPoint){value=value<this.padding[0]?this.padding[0]:value;var maxScrollY=this._textHeight-this._height,startLine=(value=value>maxScrollY?maxScrollY:value)/(this._charSize.height+this.leading)|0;this._lastVisibleLineIndex=startLine;var visibleLineCount=1+(this._height/(this._charSize.height+this.leading)|0);this._clipPoint.y=value,this.renderText(startLine,visibleLineCount)}}),__getset(0,__proto,"maxScrollX",function(){return this.textWidth<this._width?0:this._textWidth-this._width}),__getset(0,__proto,"maxScrollY",function(){return this.textHeight<this._height?0:this._textHeight-this._height}),__getset(0,__proto,"lines",function(){return this._lines}),__getset(0,__proto,"underlineColor",function(){return this._underlineColor},function(value){this._underlineColor=value,this._isChanged=!0,this.typeset()}),Text.registerBitmapFont=function(name,bitmapFont){Text._bitmapFonts||(Text._bitmapFonts={}),Text._bitmapFonts[name]=bitmapFont},Text.unregisterBitmapFont=function(name,destroy){if(void 0===destroy&&(destroy=!0),Text._bitmapFonts&&Text._bitmapFonts[name]){var tBitmapFont=Text._bitmapFonts[name];destroy&&tBitmapFont.destroy(),delete Text._bitmapFonts[name]}},Text._testWord="游",Text.langPacks=null,Text.VISIBLE="visible",Text.SCROLL="scroll",Text.HIDDEN="hidden",Text._bitmapFonts=null,Text}(Sprite),Stage=function(_super){function Stage(){function visibleChangeFun(){"hidden"==Browser.document[state]?(_$this._isVisibility=!1,_this._isInputting()&&(Input.inputElement.target.focus=!1)):_$this._isVisibility=!0,_this.event("visibilitychange")}this.focus=null,this.frameRate="fast",this.desginWidth=0,this.desginHeight=0,this.canvasRotation=!1,this.canvasDegree=0,this.renderingEnabled=!0,this._screenMode="none",this._scaleMode="noscale",this._alignV="top",this._alignH="left",this._bgColor="black",this._mouseMoveTime=0,this._renderCount=0,this._safariOffsetY=0,this._frameStartTime=NaN,this._previousOrientation=0,this._isFocused=!1,this._isVisibility=!1,this._scenes=null,Stage.__super.call(this),this.offset=new Point,this._canvasTransform=new Matrix;var _$this=this;this.transform=Matrix.create(),this._scenes=[],this.mouseEnabled=!0,this.hitTestPrior=!0,this.autoSize=!1,this._displayedInStage=!0,this._isFocused=!0,this._isVisibility=!0;var _this=this,window=Browser.window;window.addEventListener("focus",function(){_$this._isFocused=!0,_this.event("focus"),_this.event("focuschange")}),window.addEventListener("blur",function(){_$this._isFocused=!1,_this.event("blur"),_this.event("focuschange"),_this._isInputting()&&(Input.inputElement.target.focus=!1)});var state="visibilityState",visibilityChange="visibilitychange",document=window.document;void 0!==document.hidden?(visibilityChange="visibilitychange",state="visibilityState"):void 0!==document.mozHidden?(visibilityChange="mozvisibilitychange",state="mozVisibilityState"):void 0!==document.msHidden?(visibilityChange="msvisibilitychange",state="msVisibilityState"):void 0!==document.webkitHidden&&(visibilityChange="webkitvisibilitychange",state="webkitVisibilityState"),window.document.addEventListener(visibilityChange,visibleChangeFun),window.addEventListener("resize",function(){var orientation=Browser.window.orientation;null!=orientation&&orientation!=_$this._previousOrientation&&_this._isInputting()&&(Input.inputElement.target.focus=!1),_$this._previousOrientation=orientation,_this._isInputting()||(Browser.onSafari&&(_this._safariOffsetY=(Browser.window.__innerHeight||Browser.document.body.clientHeight||Browser.document.documentElement.clientHeight)-Browser.window.innerHeight),_this._resetCanvas())}),window.addEventListener("orientationchange",function(e){_this._resetCanvas()}),this.on("mousemove",this,this._onmouseMove),Browser.onMobile&&this.on("mousedown",this,this._onmouseMove)}__class(Stage,"laya.display.Stage",_super);var __proto=Stage.prototype;return __proto._isInputting=function(){return Browser.onMobile&&Input.isInputting},__proto._changeCanvasSize=function(){this.setScreenSize(Browser.clientWidth*Browser.pixelRatio,Browser.clientHeight*Browser.pixelRatio)},__proto._resetCanvas=function(){var canvas=Render._mainCanvas,canvasStyle=canvas.source.style;canvas.size(1,1),canvasStyle.transform=canvasStyle.webkitTransform=canvasStyle.msTransform=canvasStyle.mozTransform=canvasStyle.oTransform="",this.visible=!1,Laya.timer.once(100,this,this._changeCanvasSize)},__proto.setScreenSize=function(screenWidth,screenHeight){var rotation=!1;if("none"!==this._screenMode&&(rotation=(screenWidth/screenHeight<1?"vertical":"horizontal")!==this._screenMode)){var temp=screenHeight;screenHeight=screenWidth,screenWidth=temp}this.canvasRotation=rotation;var canvas=Render._mainCanvas,canvasStyle=canvas.source.style,mat=this._canvasTransform.identity(),scaleMode=this._scaleMode,scaleX=screenWidth/this.desginWidth,scaleY=screenHeight/this.desginHeight,canvasWidth=this.desginWidth,canvasHeight=this.desginHeight,realWidth=screenWidth,realHeight=screenHeight,pixelRatio=Browser.pixelRatio;switch(this._width=this.desginWidth,this._height=this.desginHeight,scaleMode){case"noscale":scaleX=scaleY=1,realWidth=this.desginWidth,realHeight=this.desginHeight;break;case"showall":scaleX=scaleY=Math.min(scaleX,scaleY),canvasWidth=realWidth=Math.round(this.desginWidth*scaleX),canvasHeight=realHeight=Math.round(this.desginHeight*scaleY);break;case"noborder":scaleX=scaleY=Math.max(scaleX,scaleY),realWidth=Math.round(this.desginWidth*scaleX),realHeight=Math.round(this.desginHeight*scaleY);break;case"full":scaleX=scaleY=1,this._width=canvasWidth=screenWidth,this._height=canvasHeight=screenHeight;break;case"fixedwidth":scaleY=scaleX,this._height=screenHeight/scaleX,canvasHeight=Math.round(screenHeight/scaleX);break;case"fixedheight":scaleX=scaleY,this._width=screenWidth/scaleY,canvasWidth=Math.round(screenWidth/scaleY)}scaleX*=this.scaleX,scaleY*=this.scaleY,1===scaleX&&1===scaleY?this.transform.identity():(this.transform.a=this._formatData(scaleX/(realWidth/canvasWidth)),this.transform.d=this._formatData(scaleY/(realHeight/canvasHeight)),this.conchModel&&this.conchModel.scale(this.transform.a,this.transform.d)),canvas.size(canvasWidth,canvasHeight),RunDriver.changeWebGLSize(canvasWidth,canvasHeight),mat.scale(realWidth/canvasWidth/pixelRatio,realHeight/canvasHeight/pixelRatio),"left"===this._alignH?this.offset.x=0:"right"===this._alignH?this.offset.x=screenWidth-realWidth:this.offset.x=.5*(screenWidth-realWidth)/pixelRatio,"top"===this._alignV?this.offset.y=0:"bottom"===this._alignV?this.offset.y=screenHeight-realHeight:this.offset.y=.5*(screenHeight-realHeight)/pixelRatio,this.offset.x=Math.round(this.offset.x),this.offset.y=Math.round(this.offset.y),mat.translate(this.offset.x,this.offset.y),this._safariOffsetY&&mat.translate(0,this._safariOffsetY),this.canvasDegree=0,rotation&&("horizontal"===this._screenMode?(mat.rotate(Math.PI/2),mat.translate(screenHeight/pixelRatio,0),this.canvasDegree=90):(mat.rotate(-Math.PI/2),mat.translate(0,screenWidth/pixelRatio),this.canvasDegree=-90)),mat.a=this._formatData(mat.a),mat.d=this._formatData(mat.d),mat.tx=this._formatData(mat.tx),mat.ty=this._formatData(mat.ty),canvasStyle.transformOrigin=canvasStyle.webkitTransformOrigin=canvasStyle.msTransformOrigin=canvasStyle.mozTransformOrigin=canvasStyle.oTransformOrigin="0px 0px 0px",canvasStyle.transform=canvasStyle.webkitTransform=canvasStyle.msTransform=canvasStyle.mozTransform=canvasStyle.oTransform="matrix("+mat.toString()+")",this._safariOffsetY&&mat.translate(0,-this._safariOffsetY),mat.translate(parseInt(canvasStyle.left)||0,parseInt(canvasStyle.top)||0),this.visible=!0,this._repaint=1,this.event("resize")},__proto._formatData=function(value){return Math.abs(value)<1e-6?0:Math.abs(1-value)<.001?value>0?1:-1:value},__proto.getMousePoint=function(){return Point.TEMP.setTo(this.mouseX,this.mouseY)},__proto.repaint=function(){this._repaint=1},__proto.parentRepaint=function(){},__proto._loop=function(){return this.render(Render.context,0,0),!0},__proto._onmouseMove=function(e){this._mouseMoveTime=Browser.now()},__proto.getTimeFromFrameStart=function(){return Browser.now()-this._frameStartTime},__proto.render=function(context,x,y){if("sleep"===this.frameRate){var now=Browser.now();if(!(now-this._frameStartTime>=1e3))return;this._frameStartTime=now}if(this._renderCount++,Render.isFlash&&this.repaint(),this.visible){this._frameStartTime=Browser.now();var isFastMode="slow"!==("mouse"===this.frameRate?this._frameStartTime-this._mouseMoveTime<2e3?"fast":"slow":this.frameRate),isDoubleLoop=this._renderCount%2==0;if(Stat.renderSlow=!isFastMode,isFastMode||isDoubleLoop){Stat.loopCount++,MouseManager.instance.runEvent(),Laya.timer._update();var scene,i=0,n=0;if(Render.isConchNode)for(i=0,n=this._scenes.length;i<n;i++)(scene=this._scenes[i])&&scene._updateSceneConch();else for(i=0,n=this._scenes.length;i<n;i++)(scene=this._scenes[i])&&scene._updateScene();if(Render.isConchNode){var customList=Sprite.CustomList;for(i=0,n=customList.length;i<n;i++){var customItem=customList[i];customItem.customRender(customItem.customContext,0,0)}return}Render.isWebGL&&this.renderingEnabled&&(context.clear(),_super.prototype.render.call(this,context,x,y))}Render.isConchNode||!this.renderingEnabled||!isFastMode&&isDoubleLoop||(Render.isWebGL?(RunDriver.clear(this._bgColor),RunDriver.beginFlush(),context.flush(),RunDriver.endFinish(),VectorGraphManager.instance&&VectorGraphManager.getInstance().endDispose()):(RunDriver.clear(this._bgColor),_super.prototype.render.call(this,context,x,y)))}else this._renderCount%5==0&&(Stat.loopCount++,MouseManager.instance.runEvent(),Laya.timer._update())},__proto._requestFullscreen=function(){var element=Browser.document.documentElement;element.requestFullscreen?element.requestFullscreen():element.mozRequestFullScreen?element.mozRequestFullScreen():element.webkitRequestFullscreen?element.webkitRequestFullscreen():element.msRequestFullscreen&&element.msRequestFullscreen()},__proto._fullScreenChanged=function(){Laya.stage.event("fullscreenchange")},__proto.exitFullscreen=function(){var document=Browser.document;document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},__getset(0,__proto,"clientScaleY",function(){return this._transform?this._transform.getScaleY():1}),__getset(0,__proto,"width",_super.prototype._$get_width,function(value){this.desginWidth=value,_super.prototype._$set_width.call(this,value),Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,__proto,"isFocused",function(){return this._isFocused}),__getset(0,__proto,"alignH",function(){return this._alignH},function(value){this._alignH=value,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,__proto,"height",_super.prototype._$get_height,function(value){this.desginHeight=value,_super.prototype._$set_height.call(this,value),Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,__proto,"isVisibility",function(){return this._isVisibility}),__getset(0,__proto,"scaleMode",function(){return this._scaleMode},function(value){this._scaleMode=value,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,__proto,"alignV",function(){return this._alignV},function(value){this._alignV=value,Laya.timer.callLater(this,this._changeCanvasSize)}),__getset(0,__proto,"bgColor",function(){return this._bgColor},function(value){this._bgColor=value,this.conchModel&&this.conchModel.bgColor(value),Render.canvas.style.background=value||"none"}),__getset(0,__proto,"mouseX",function(){return Math.round(MouseManager.instance.mouseX/this.clientScaleX)}),__getset(0,__proto,"mouseY",function(){return Math.round(MouseManager.instance.mouseY/this.clientScaleY)}),__getset(0,__proto,"clientScaleX",function(){return this._transform?this._transform.getScaleX():1}),__getset(0,__proto,"screenMode",function(){return this._screenMode},function(value){this._screenMode=value}),__getset(0,__proto,"visible",_super.prototype._$get_visible,function(value){this.visible!==value&&(_super.prototype._$set_visible.call(this,value),Render._mainCanvas.source.style.visibility=value?"visible":"hidden")}),__getset(0,__proto,"fullScreenEnabled",null,function(value){var document=Browser.document,canvas=Render.canvas;value?(canvas.addEventListener("mousedown",this._requestFullscreen),canvas.addEventListener("touchstart",this._requestFullscreen),document.addEventListener("fullscreenchange",this._fullScreenChanged),document.addEventListener("mozfullscreenchange",this._fullScreenChanged),document.addEventListener("webkitfullscreenchange",this._fullScreenChanged),document.addEventListener("msfullscreenchange",this._fullScreenChanged)):(canvas.removeEventListener("mousedown",this._requestFullscreen),canvas.removeEventListener("touchstart",this._requestFullscreen),document.removeEventListener("fullscreenchange",this._fullScreenChanged),document.removeEventListener("mozfullscreenchange",this._fullScreenChanged),document.removeEventListener("webkitfullscreenchange",this._fullScreenChanged),document.removeEventListener("msfullscreenchange",this._fullScreenChanged))}),Stage.SCALE_NOSCALE="noscale",Stage.SCALE_EXACTFIT="exactfit",Stage.SCALE_SHOWALL="showall",Stage.SCALE_NOBORDER="noborder",Stage.SCALE_FULL="full",Stage.SCALE_FIXED_WIDTH="fixedwidth",Stage.SCALE_FIXED_HEIGHT="fixedheight",Stage.ALIGN_LEFT="left",Stage.ALIGN_RIGHT="right",Stage.ALIGN_CENTER="center",Stage.ALIGN_TOP="top",Stage.ALIGN_MIDDLE="middle",Stage.ALIGN_BOTTOM="bottom",Stage.SCREEN_NONE="none",Stage.SCREEN_HORIZONTAL="horizontal",Stage.SCREEN_VERTICAL="vertical",Stage.FRAME_FAST="fast",Stage.FRAME_SLOW="slow",Stage.FRAME_MOUSE="mouse",Stage.FRAME_SLEEP="sleep",Stage}(Sprite),SoundNode=function(_super){function SoundNode(){this.url=null,this._channel=null,this._tar=null,this._playEvents=null,this._stopEvents=null,SoundNode.__super.call(this),this.visible=!1,this.on("added",this,this._onParentChange),this.on("removed",this,this._onParentChange)}__class(SoundNode,"laya.media.SoundNode",_super);var __proto=SoundNode.prototype;return __proto._onParentChange=function(){this.target=this.parent},__proto.play=function(loops,complete){void 0===loops&&(loops=1),isNaN(loops)&&(loops=1),this.url&&(this.stop(),this._channel=SoundManager.playSound(this.url,loops,complete))},__proto.stop=function(){this._channel&&!this._channel.isStopped&&this._channel.stop(),this._channel=null},__proto._setPlayAction=function(tar,event,action,add){void 0===add&&(add=!0),this[action]&&tar&&(add?tar.on(event,this,this[action]):tar.off(event,this,this[action]))},__proto._setPlayActions=function(tar,events,action,add){if(void 0===add&&(add=!0),tar&&events){var eventArr=events.split(","),i=0,len=0;for(len=eventArr.length,i=0;i<len;i++)this._setPlayAction(tar,eventArr[i],action,add)}},__getset(0,__proto,"playEvent",null,function(events){this._playEvents=events,events&&this._tar&&this._setPlayActions(this._tar,events,"play")}),__getset(0,__proto,"target",null,function(tar){this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!1),this._setPlayActions(this._tar,this._stopEvents,"stop",!1)),this._tar=tar,this._tar&&(this._setPlayActions(this._tar,this._playEvents,"play",!0),this._setPlayActions(this._tar,this._stopEvents,"stop",!0))}),__getset(0,__proto,"stopEvent",null,function(events){this._stopEvents=events,events&&this._tar&&this._setPlayActions(this._tar,events,"stop")}),SoundNode}(Sprite),Scene2D=function(_super){function Scene2D(){Scene2D.__super.call(this),this.createChildren()}__class(Scene2D,"laya.scene.Scene2D",_super);var __proto=Scene2D.prototype;return __proto.createChildren=function(){},__proto.createView=function(sceneData){ClassUtils.createByJson(sceneData,this,this)},Scene2D}(Sprite),FileBitmap=function(_super){function FileBitmap(){this._src=null,this._onload=null,this._onerror=null,FileBitmap.__super.call(this)}__class(FileBitmap,"laya.resource.FileBitmap",_super);var __proto=FileBitmap.prototype;return __getset(0,__proto,"src",function(){return this._src},function(value){this._src=value}),__getset(0,__proto,"onload",null,function(value){}),__getset(0,__proto,"onerror",null,function(value){}),FileBitmap}(Bitmap),HTMLCanvas=function(_super){function HTMLCanvas(type,canvas){this._is2D=!1,HTMLCanvas.__super.call(this);var _$this=this;if(this._source=this,"2D"===type||"AUTO"===type&&!Render.isWebGL){this._is2D=!0,this._source=canvas||Browser.createElement("canvas");var o=this;o.getContext=function(contextID,other){if(_$this._ctx)return _$this._ctx;var ctx=_$this._ctx=_$this._source.getContext(contextID,other);return ctx&&(ctx._canvas=o,Render.isFlash||(ctx.size=function(w,h){})),ctx}}else this._source={}}__class(HTMLCanvas,"laya.resource.HTMLCanvas",_super);var __proto=HTMLCanvas.prototype;return __proto.clear=function(){this._ctx&&this._ctx.clear()},__proto.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null},__proto.release=function(){},__proto._setContext=function(context){this._ctx=context},__proto.getContext=function(contextID,other){return this._ctx?this._ctx:this._ctx=HTMLCanvas._createContext(this)},__proto.getMemSize=function(){return 0},__proto.size=function(w,h){this._w==w&&this._h==h||(this._w=w,this._h=h,this.memorySize=this._w*this._h*4,this._ctx&&this._ctx.size(w,h),this._source&&(this._source.height=h,this._source.width=w))},__getset(0,__proto,"context",function(){return this._ctx}),__getset(0,__proto,"asBitmap",null,function(value){}),HTMLCanvas.create=function(type,canvas){return new HTMLCanvas(type,canvas)},HTMLCanvas.TYPE2D="2D",HTMLCanvas.TYPE3D="3D",HTMLCanvas.TYPEAUTO="AUTO",HTMLCanvas._createContext=null,HTMLCanvas}(Bitmap),HTMLSubImage=function(_super){function HTMLSubImage(canvas,offsetX,offsetY,width,height,atlasImage,src,allowMerageInAtlas){throw HTMLSubImage.__super.call(this),new Error("不允许new！")}return __class(HTMLSubImage,"laya.resource.HTMLSubImage",_super),HTMLSubImage.create=function(canvas,offsetX,offsetY,width,height,atlasImage,src,allowMerageInAtlas){return void 0===allowMerageInAtlas&&(allowMerageInAtlas=!1),new HTMLSubImage(canvas,offsetX,offsetY,width,height,atlasImage,src,allowMerageInAtlas)},HTMLSubImage}(Bitmap),Animation=function(_super){function Animation(){this._frames=null,this._url=null,Animation.__super.call(this),this._setControlNode(this)}__class(Animation,"laya.display.Animation",_super);var __proto=Animation.prototype;return __proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),this.stop(),laya.display.Sprite.prototype.destroy.call(this,destroyChild),this._frames=null,this._labels=null},__proto.play=function(start,loop,name){void 0===start&&(start=0),void 0===loop&&(loop=!0),void 0===name&&(name=""),name&&this._setFramesFromCache(name),this._isPlaying=!0,this.index="string"==typeof start?this._getFrameByLabel(start):start,this.loop=loop,this._actionName=name,this._isReverse=1==this.wrapMode,this._frames&&this.interval>0&&this.timerLoop(this.interval,this,this._frameLoop,null,!0)},__proto._setFramesFromCache=function(name){return this._url&&(name=this._url+"#"+name),!(!name||!Animation.framesMap[name])&&(this._frames=Animation.framesMap[name],this._count=this._frames.length,!this._frameRateChanged&&Animation.framesMap[name+"$len"]&&(this._interval=Animation.framesMap[name+"$len"]),!0)},__proto._frameLoop=function(){this._style.visible&&this._style.alpha>.01&&_super.prototype._frameLoop.call(this)},__proto._displayToIndex=function(value){this._frames&&(this.graphics=this._frames[value])},__proto.clear=function(){this.stop(),this.graphics=null,this._frames=null,this._labels=null},__proto.loadImages=function(urls,cacheName){return void 0===cacheName&&(cacheName=""),this._url="",this._setFramesFromCache(cacheName)||(this.frames=Animation.framesMap[cacheName]?Animation.framesMap[cacheName]:Animation.createFrames(urls,cacheName)),this},__proto.loadAtlas=function(url,loaded,cacheName){function onLoaded(loadUrl){url===loadUrl&&(_this.frames=Animation.framesMap[cacheName]?Animation.framesMap[cacheName]:Animation.createFrames(url,cacheName),loaded&&loaded.run())}void 0===cacheName&&(cacheName=""),this._url="";var _this=this;return _this._setFramesFromCache(cacheName)||(Loader.getAtlas(url)?onLoaded(url):Laya.loader.load(url,Handler.create(null,onLoaded,[url]),null,"atlas")),this},__proto.loadAnimation=function(url,loaded){function onLoaded(loadUrl){if(url===loadUrl){if(Animation.framesMap[url+"#"])_this._frameRateChanged||(_this._interval=Animation.framesMap[url+"#$len"]),_this.frames=Animation.framesMap[url+"#"];else{var aniData=_this._parseGraphicAnimation(Loader.getRes(url));if(!aniData)return;var obj=aniData.animationDic,flag=!0;for(var name in obj){var info=obj[name];info.frames.length?(Animation.framesMap[url+"#"+name]=info.frames,Animation.framesMap[url+"#"+name+"$len"]=info.interval):flag=!1}_this._frameRateChanged||(_this._interval=aniData.animationList[0].interval),_this.frames=aniData.animationList[0].frames,flag&&(Animation.framesMap[url+"#$len"]=aniData.animationList[0].interval,Animation.framesMap[url+"#"]=_this.frames)}loaded&&loaded.run()}}this._url=url;var _this=this;return _this._setFramesFromCache("")||(Loader.getRes(url)?onLoaded(url):Laya.loader.load(url,Handler.create(null,onLoaded,[url]),null,"json"),Loader.clearRes(url)),this},__proto._parseGraphicAnimation=function(animationData){return GraphicAnimation.parseAnimationData(animationData)},__getset(0,__proto,"frames",function(){return this._frames},function(value){this._frames=value,value&&(this._count=value.length,this._isPlaying?this.play(this._index,this.loop,this._actionName):this.index=this._index)}),__getset(0,__proto,"autoPlay",null,function(value){value?this.play():this.stop()}),__getset(0,__proto,"source",null,function(value){value.indexOf(".ani")>-1?this.loadAnimation(value):value.indexOf(".json")>-1||value.indexOf("als")>-1?this.loadAtlas(value):this.loadImages(value.split(","))}),Animation.createFrames=function(url,name){var arr;if("string"==typeof url){var atlas=Loader.getAtlas(url);if(atlas&&atlas.length){arr=[];for(var i=0,n=atlas.length;i<n;i++){var g=new Graphics;g.drawTexture(Loader.getRes(atlas[i]),0,0),arr.push(g)}}}else if(url instanceof Array)for(arr=[],i=0,n=url.length;i<n;i++)(g=new Graphics).loadImage(url[i],0,0),arr.push(g);return name&&(Animation.framesMap[name]=arr),arr},Animation.clearCache=function(key){var val,cache=Animation.framesMap,key2=key+"#";for(val in cache)val!==key&&0!=val.indexOf(key2)||delete Animation.framesMap[val]},Animation.framesMap={},Animation}(AnimationPlayerBase),FrameAnimation=function(_super){function FrameAnimation(){this._targetDic=null,this._animationData=null,FrameAnimation.__super.call(this),null==FrameAnimation._sortIndexFun&&(FrameAnimation._sortIndexFun=MathUtil.sortByKey("index",!1,!0))}__class(FrameAnimation,"laya.display.FrameAnimation",_super);var __proto=FrameAnimation.prototype;return __proto._setUp=function(targetDic,animationData){this._labels=null,this._targetDic=targetDic,this._animationData=animationData,this.interval=1e3/animationData.frameRate,animationData.parsed?this._count=animationData.count:this._calculateDatas(),animationData.parsed=!0,animationData.count=this._count},__proto.clear=function(){_super.prototype.clear.call(this),this._targetDic=null,this._animationData=null},__proto._displayToIndex=function(value){if(this._animationData){value<0&&(value=0),value>this._count&&(value=this._count);var nodes=this._animationData.nodes,i=0,len=nodes.length;for(i=0;i<len;i++)this._displayNodeToFrame(nodes[i],value)}},__proto._displayNodeToFrame=function(node,frame,targetDic){targetDic||(targetDic=this._targetDic);var target=targetDic[node.target];if(target){var key,propFrames,value,frames=node.frames,keys=node.keys,i=0,len=keys.length;for(i=0;i<len;i++)value=(propFrames=frames[key=keys[i]]).length>frame?propFrames[frame]:propFrames[propFrames.length-1],target[key]=value}},__proto._calculateDatas=function(){if(this._animationData){var tNode,nodes=this._animationData.nodes,i=0,len=nodes.length;for(this._count=0,i=0;i<len;i++)tNode=nodes[i],this._calculateNodeKeyFrames(tNode);this._count+=1}},__proto._calculateNodeKeyFrames=function(node){var key,tKeyFrames,keyFrames=node.keyframes,target=node.target;node.frames||(node.frames={}),node.keys?node.keys.length=0:node.keys=[];for(key in keyFrames)tKeyFrames=keyFrames[key],node.frames[key]||(node.frames[key]=[]),tKeyFrames.sort(FrameAnimation._sortIndexFun),node.keys.push(key),this._calculateNodePropFrames(tKeyFrames,node.frames[key],key,target)},__proto._calculateNodePropFrames=function(keyframes,frames,key,target){var i=0,len=keyframes.length-1;for(frames.length=keyframes[len].index+1,i=0;i<len;i++)this._dealKeyFrame(keyframes[i]),this._calculateFrameValues(keyframes[i],keyframes[i+1],frames);0==len&&(frames[0]=keyframes[0].value),this._dealKeyFrame(keyframes[i])},__proto._dealKeyFrame=function(keyFrame){keyFrame.label&&""!=keyFrame.label&&this.addLabel(keyFrame.label,keyFrame.index)},__proto._calculateFrameValues=function(startFrame,endFrame,result){var easeFun,i=0,start=startFrame.index,end=endFrame.index,startValue=startFrame.value,dValue=endFrame.value-startFrame.value,dLen=end-start;if(end>this._count&&(this._count=end),startFrame.tween)for(null==(easeFun=Ease[startFrame.tweenMethod])&&(easeFun=Ease.linearNone),i=start;i<end;i++)result[i]=easeFun(i-start,startValue,dValue,dLen);else for(i=start;i<end;i++)result[i]=startValue;result[endFrame.index]=endFrame.value},FrameAnimation._sortIndexFun=null,FrameAnimation}(AnimationPlayerBase),Input=function(_super){function Input(){this._focus=!1,this._multiline=!1,this._editable=!0,this._restrictPattern=null,this._type="text",this._prompt="",this._promptColor="#A9A9A9",this._originColor="#000000",this._content="",Input.__super.call(this),this._maxChars=1e5,this._width=100,this._height=20,this.multiline=!1,this.overflow=Text.SCROLL,this.on("mousedown",this,this._onMouseDown),this.on("undisplay",this,this._onUnDisplay)}__class(Input,"laya.display.Input",_super);var __proto=Input.prototype;return __proto.setSelection=function(startIndex,endIndex){laya.display.Input.inputElement.selectionStart=startIndex,laya.display.Input.inputElement.selectionEnd=endIndex},__proto._onUnDisplay=function(e){this.focus=!1},__proto._onMouseDown=function(e){this.focus=!0,Laya.stage.on("mousedown",this,this._checkBlur)},__proto._checkBlur=function(e){e.nativeEvent.target!=laya.display.Input.input&&e.nativeEvent.target!=laya.display.Input.area&&e.target!=this&&(this.focus=!1)},__proto.render=function(context,x,y){laya.display.Sprite.prototype.render.call(this,context,x,y)},__proto._syncInputTransform=function(){this.nativeInput.style;var rec,stage=Laya.stage;rec=Utils.getGlobalPosAndScale(this);var m=stage._canvasTransform.clone(),tm=m.clone();tm.rotate(-Math.PI/180*Laya.stage.canvasDegree),tm.scale(Laya.stage.clientScaleX,Laya.stage.clientScaleY);var perpendicular=Laya.stage.canvasDegree%180!=0,sx=perpendicular?tm.d:tm.a,sy=perpendicular?tm.a:tm.d;tm.destroy();var tx=this.padding[3],ty=this.padding[0];0==Laya.stage.canvasDegree?(tx+=rec.x,ty+=rec.y,tx*=sx,ty*=sy,tx+=m.tx,ty+=m.ty):90==Laya.stage.canvasDegree?(tx+=rec.y,ty+=rec.x,tx*=sx,ty*=sy,tx=m.tx-tx,ty+=m.ty):(tx+=rec.y,ty+=rec.x,tx*=sx,ty*=sy,tx+=m.tx,ty=m.ty-ty);var r=Math.atan2(rec.height,rec.width)-.785,sin=Math.sin(r),cos=Math.cos(r),tsx=cos*rec.width+sin*rec.height,tsy=cos*rec.height-sin*rec.width;sx*=perpendicular?tsy:tsx,sy*=perpendicular?tsx:tsy,m.tx=0,m.ty=0,r*=180/3.1415,Input.inputContainer.style.transform="scale("+sx+","+sy+") rotate("+(Laya.stage.canvasDegree+r)+"deg)",Input.inputContainer.style.webkitTransform="scale("+sx+","+sy+") rotate("+(Laya.stage.canvasDegree+r)+"deg)",Input.inputContainer.setPos(tx,ty),m.destroy();var inputWid=this._width-this.padding[1]-this.padding[3],inputHei=this._height-this.padding[0]-this.padding[2];this.nativeInput.setSize(inputWid,inputHei),Render.isConchApp&&(this.nativeInput.setPos(tx,ty),this.nativeInput.setScale(sx,sy))},__proto.select=function(){this.nativeInput.select()},__proto._setInputMethod=function(){Input.input.parentElement&&Input.inputContainer.removeChild(Input.input),Input.area.parentElement&&Input.inputContainer.removeChild(Input.area),Input.inputElement=this._multiline?Input.area:Input.input,Input.inputContainer.appendChild(Input.inputElement)},__proto._focusIn=function(){laya.display.Input.isInputting=!0;var input=this.nativeInput;this._focus=!0;var cssStyle=input.style;cssStyle.whiteSpace=this.wordWrap?"pre-wrap":"nowrap",this._setPromptColor(),input.readOnly=!this._editable,input.maxLength=this._maxChars;this.padding;input.type=this._type,input.value=this._content,input.placeholder=this._prompt,Laya.stage.off("keydown",this,this._onKeyDown),Laya.stage.on("keydown",this,this._onKeyDown),Laya.stage.focus=this,this.event("focus"),Browser.onPC&&input.focus();this._text;this._text=null,this.typeset(),input.setColor(this._originColor),input.setFontSize(this.fontSize),input.setFontFace(this.font),Render.isConchApp&&input.setMultiAble&&input.setMultiAble(this._multiline),cssStyle.lineHeight=this.leading+this.fontSize+"px",cssStyle.fontStyle=this.italic?"italic":"normal",cssStyle.fontWeight=this.bold?"bold":"normal",cssStyle.textAlign=this.align,cssStyle.padding="0 0",this._syncInputTransform(),!Render.isConchApp&&Browser.onPC&&Laya.timer.frameLoop(1,this,this._syncInputTransform)},__proto._setPromptColor=function(){Input.promptStyleDOM=Browser.getElementById("promptStyle"),Input.promptStyleDOM||(Input.promptStyleDOM=Browser.createElement("style"),Browser.document.head.appendChild(Input.promptStyleDOM)),Input.promptStyleDOM.innerText="input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {color:"+this._promptColor+"}input:-moz-placeholder, textarea:-moz-placeholder {color:"+this._promptColor+"}input::-moz-placeholder, textarea::-moz-placeholder {color:"+this._promptColor+"}input:-ms-input-placeholder, textarea:-ms-input-placeholder {color:"+this._promptColor+"}"},__proto._focusOut=function(){laya.display.Input.isInputting=!1,this._focus=!1,this._text=null,this._content=this.nativeInput.value,this._content?(_super.prototype._$set_text.call(this,this._content),_super.prototype._$set_color.call(this,this._originColor)):(_super.prototype._$set_text.call(this,this._prompt),_super.prototype._$set_color.call(this,this._promptColor)),Laya.stage.off("keydown",this,this._onKeyDown),Laya.stage.focus=null,this.event("blur"),Render.isConchApp&&this.nativeInput.blur(),Browser.onPC&&Laya.timer.clear(this,this._syncInputTransform),Laya.stage.off("mousedown",this,this._checkBlur)},__proto._onKeyDown=function(e){13===e.keyCode&&(Browser.onMobile&&!this._multiline&&(this.focus=!1),this.event("enter"))},__proto.changeText=function(text){this._content=text,this._focus?(this.nativeInput.value=text||"",this.event("change")):_super.prototype.changeText.call(this,text)},__getset(0,__proto,"color",_super.prototype._$get_color,function(value){this._focus&&this.nativeInput.setColor(value),_super.prototype._$set_color.call(this,this._content?value:this._promptColor),this._originColor=value}),__getset(0,__proto,"inputElementYAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。"),0},function(value){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementYAdjuster已弃用。")}),__getset(0,__proto,"multiline",function(){return this._multiline},function(value){this._multiline=value,this.valign=value?"top":"middle"}),__getset(0,__proto,"maxChars",function(){return this._maxChars},function(value){value<=0&&(value=1e5),this._maxChars=value}),__getset(0,__proto,"text",function(){return this._focus?this.nativeInput.value:this._content||""},function(value){_super.prototype._$set_color.call(this,this._originColor),value+="",this._focus?(this.nativeInput.value=value||"",this.event("change")):(this._multiline||(value=value.replace(/\r?\n/g,"")),this._content=value,value?_super.prototype._$set_text.call(this,value):(_super.prototype._$set_text.call(this,this._prompt),_super.prototype._$set_color.call(this,this.promptColor)))}),__getset(0,__proto,"nativeInput",function(){return this._multiline?Input.area:Input.input}),__getset(0,__proto,"prompt",function(){return this._prompt},function(value){!this._text&&value&&_super.prototype._$set_color.call(this,this._promptColor),this.promptColor=this._promptColor,this._text?_super.prototype._$set_text.call(this,this._text==this._prompt?value:this._text):_super.prototype._$set_text.call(this,value),this._prompt=value}),__getset(0,__proto,"focus",function(){return this._focus},function(value){var input=this.nativeInput;this._focus!==value&&(value?(input.target&&(input.target.focus=!1),input.target=this,this._setInputMethod(),this._focusIn()):(input.target=null,this._focusOut(),input.blur(),Render.isConchApp?input.setPos(-1e4,-1e4):Input.inputContainer.contains(input)&&Input.inputContainer.removeChild(input)))}),__getset(0,__proto,"restrict",function(){return this._restrictPattern?this._restrictPattern.source:""},function(pattern){pattern?((pattern="[^"+pattern+"]").indexOf("^^")>-1&&(pattern=pattern.replace("^^","")),this._restrictPattern=new RegExp(pattern,"g")):this._restrictPattern=null}),__getset(0,__proto,"editable",function(){return this._editable},function(value){this._editable=value}),__getset(0,__proto,"promptColor",function(){return this._promptColor},function(value){this._promptColor=value,this._content||_super.prototype._$set_color.call(this,value)}),__getset(0,__proto,"type",function(){return this._type},function(value){this._getCSSStyle().password="password"==value,this._type=value}),__getset(0,__proto,"inputElementXAdjuster",function(){return console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。"),0},function(value){console.warn("deprecated: 由于即使设置了该值，在各平台和浏览器之间也不一定一致，inputElementXAdjuster已弃用。")}),__getset(0,__proto,"asPassword",function(){return this._getCSSStyle().password},function(value){this._getCSSStyle().password=value,this._type="password",console.warn('deprecated: 使用type="password"替代设置asPassword, asPassword将在下次重大更新时删去'),this.isChanged=!0}),Input.__init__=function(){Input._createInputElement(),Browser.onMobile&&Render.canvas.addEventListener(Input.IOS_IFRAME?"click":"touchend",Input._popupInputMethod)},Input._popupInputMethod=function(e){laya.display.Input.isInputting&&laya.display.Input.inputElement.focus()},Input._createInputElement=function(){Input._initInput(Input.area=Browser.createElement("textarea")),Input._initInput(Input.input=Browser.createElement("input")),Input.inputContainer=Browser.createElement("div"),Input.inputContainer.style.position="absolute",Input.inputContainer.style.zIndex=1e5,Browser.container.appendChild(Input.inputContainer),Input.inputContainer.setPos=function(x,y){Input.inputContainer.style.left=x+"px",Input.inputContainer.style.top=y+"px"}},Input._initInput=function(input){var style=input.style;style.cssText="position:absolute;overflow:hidden;resize:none;transform-origin:0 0;-webkit-transform-origin:0 0;-moz-transform-origin:0 0;-o-transform-origin:0 0;",style.resize="none",style.backgroundColor="transparent",style.border="none",style.outline="none",style.zIndex=1,input.addEventListener("input",Input._processInputting),input.addEventListener("mousemove",Input._stopEvent),input.addEventListener("mousedown",Input._stopEvent),input.addEventListener("touchmove",Input._stopEvent),Render.isConchApp||(input.setColor=function(color){input.style.color=color},input.setFontSize=function(fontSize){input.style.fontSize=fontSize+"px"},input.setSize=function(w,h){input.style.width=w+"px",input.style.height=h+"px"}),input.setFontFace=function(fontFace){input.style.fontFamily=fontFace}},Input._processInputting=function(e){var input=laya.display.Input.inputElement.target;if(input){var value=laya.display.Input.inputElement.value;input._restrictPattern&&(value=value.replace(/\u2006|\x27/g,""),input._restrictPattern.test(value)&&(value=value.replace(input._restrictPattern,""),laya.display.Input.inputElement.value=value)),input._text=value,input.event("input")}},Input._stopEvent=function(e){"touchmove"==e.type&&e.preventDefault(),e.stopPropagation&&e.stopPropagation()},Input.TYPE_TEXT="text",Input.TYPE_PASSWORD="password",Input.TYPE_EMAIL="email",Input.TYPE_URL="url",Input.TYPE_NUMBER="number",Input.TYPE_RANGE="range",Input.TYPE_DATE="date",Input.TYPE_MONTH="month",Input.TYPE_WEEK="week",Input.TYPE_TIME="time",Input.TYPE_DATE_TIME="datetime",Input.TYPE_DATE_TIME_LOCAL="datetime-local",Input.TYPE_SEARCH="search",Input.input=null,Input.area=null,Input.inputElement=null,Input.inputContainer=null,Input.confirmButton=null,Input.promptStyleDOM=null,Input.inputHeight=45,Input.isInputting=!1,__static(Input,["IOS_IFRAME",function(){return this.IOS_IFRAME=Browser.onIOS&&Browser.window.top!=Browser.window.self}]),Input}(Text),HTMLImage=function(_super){function HTMLImage(src,def){this._recreateLock=!1,this._needReleaseAgain=!1,HTMLImage.__super.call(this),this._init_(src,def)}__class(HTMLImage,"laya.resource.HTMLImage",_super);var __proto=HTMLImage.prototype;return __proto._init_=function(src,def){this._src=src,this._source=new Browser.window.Image,def&&(def.onload&&(this.onload=def.onload),def.onerror&&(this.onerror=def.onerror),def.onCreate&&def.onCreate(this)),0!=src.indexOf("data:image")&&(this._source.crossOrigin=""),src&&(this._source.src=src)},__proto.recreateResource=function(){var _$this=this;if(""===this._src)throw new Error("src no null！");if(this._needReleaseAgain=!1,this._source){if(this._recreateLock)return;this.startCreate(),this.memorySize=this._w*this._h*4,this._recreateLock=!1,this.completeCreate()}else{this._recreateLock=!0,this.startCreate();var _this=this;this._source=new Browser.window.Image,this._source.crossOrigin="",this._source.onload=function(){if(_this._needReleaseAgain)return _this._needReleaseAgain=!1,_this._source.onload=null,void(_this._source=null);_this._source.onload=null,_this.memorySize=_$this._w*_$this._h*4,_this._recreateLock=!1,_this.completeCreate()},this._source.src=this._src}},__proto.detoryResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(this._source=null,this.memorySize=0)},__proto.onresize=function(){this._w=this._source.width,this._h=this._source.height},__getset(0,__proto,"onload",null,function(value){var _$this=this;this._onload=value,this._source&&(this._source.onload=null!=this._onload?function(){_$this.onresize(),_$this._onload()}:null)}),__getset(0,__proto,"onerror",null,function(value){var _$this=this;this._onerror=value,this._source&&(this._source.onerror=null!=this._onerror?function(){_$this._onerror()}:null)}),HTMLImage.create=function(src,def){return new HTMLImage(src,def)},HTMLImage}(FileBitmap),GraphicAnimation=function(_super){function GraphicAnimation(){this.animationList=null,this.animationDic=null,this._nodeList=null,this._nodeDefaultProps=null,this._gList=null,this._nodeIDAniDic={},GraphicAnimation.__super.call(this)}__class(GraphicAnimation,"laya.display.GraphicAnimation",_super);var __proto=GraphicAnimation.prototype;return __proto._parseNodeList=function(uiView){this._nodeList||(this._nodeList=[]),this._nodeDefaultProps[uiView.compId]=uiView.props,uiView.compId&&this._nodeList.push(uiView.compId);var childs=uiView.child;if(childs){var i=0,len=childs.length;for(i=0;i<len;i++)this._parseNodeList(childs[i])}},__proto._calGraphicData=function(aniData){this._setUp(null,aniData),this._createGraphicData()},__proto._createGraphicData=function(){var gList=[],i=0,len=this.count;for(i=0;i<len;i++)gList.push(this._createFrameGraphic(i));this._gList=gList},__proto._createFrameGraphic=function(frame){var g=new Graphics,i=0,len=this._nodeList.length,tNode=0;for(i=0;i<len;i++)tNode=this._nodeList[i],this._addNodeGraphic(tNode,g,frame);return g},__proto._calculateNodeKeyFrames=function(node){_super.prototype._calculateNodeKeyFrames.call(this,node),this._nodeIDAniDic[node.target]=node},__proto.getNodeDataByID=function(nodeID){return this._nodeIDAniDic[nodeID]},__proto._getParams=function(obj,params,frame,obj2){var rst=GraphicAnimation._temParam;rst.length=params.length;var i=0,len=params.length;for(i=0;i<len;i++)rst[i]=this._getObjVar(obj,params[i][0],frame,params[i][1],obj2);return rst},__proto._getObjVar=function(obj,key,frame,noValue,obj2){if(obj.hasOwnProperty(key)){var vArr=obj[key];return frame>=vArr.length&&(frame=vArr.length-1),obj[key][frame]}return obj2.hasOwnProperty(key)?obj2[key]:noValue},__proto._addNodeGraphic=function(nodeID,g,frame){var node=this.getNodeDataByID(nodeID);if(node){var frameData=node.frames,params=this._getParams(frameData,GraphicAnimation._drawTextureCmd,frame,this._nodeDefaultProps[nodeID]),url=params[0];if(url){if(params[0]=this._getTextureByUrl(url),!params[0])throw console.log("lost:",url),new Error("texture not loaded:"+url);var m,px=params[5],py=params[6],aX=params[13],aY=params[14],sx=params[7],sy=params[8],rotate=params[9],skewX=params[11],skewY=params[12];0!=aX&&(px=aX*params[0].width),0!=aY&&(py=aY*params[0].height),0==px&&0==py||(m=m||new Matrix).translate(-px,-py);var tm=null;if(rotate||1!==sx||1!==sy||skewX||skewY){(tm=GraphicAnimation._tempMt).identity(),tm.bTransform=!0;var skx=.0174532922222222*(rotate-skewX),sky=.0174532922222222*(rotate+skewY),cx=Math.cos(sky),ssx=Math.sin(sky),cy=Math.sin(skx),ssy=Math.cos(skx);tm.a=sx*cx,tm.b=sx*ssx,tm.c=-sy*cy,tm.d=sy*ssy,tm.tx=tm.ty=0}tm&&(m||(m=new Matrix),m=Matrix.mul(m,tm,m)),m&&(m.translate(params[1],params[2]),params[1]=params[2]=0),g.drawTexture(params[0],params[1],params[2],params[3],params[4],m,params[10])}}},__proto._getTextureByUrl=function(url){return Loader.getRes(url)},__proto.setAniData=function(uiView){if(uiView.animations){this._nodeDefaultProps={},this._nodeList&&(this._nodeList.length=0),this._parseNodeList(uiView);var tAniO,aniDic={},anilist=[],animations=uiView.animations,i=0,len=animations.length;for(i=0;i<len;i++)if(tAniO=animations[i]){try{this._calGraphicData(tAniO)}catch(e){console.log("parse animation fail:"+tAniO.name+",empty animation created"),this._gList=[]}var frameO={};frameO.interval=1e3/tAniO.frameRate,frameO.frames=this._gList,anilist.push(frameO),aniDic[tAniO.name]=frameO}this.animationList=anilist,this.animationDic=aniDic}GraphicAnimation._temParam.length=0},__proto._clear=function(){this.animationList=null,this.animationDic=null,this._gList=null},GraphicAnimation.parseAnimationData=function(aniData){GraphicAnimation._I||(GraphicAnimation._I=new GraphicAnimation),GraphicAnimation._I.setAniData(aniData);var rst;return rst={},rst.animationList=GraphicAnimation._I.animationList,rst.animationDic=GraphicAnimation._I.animationDic,GraphicAnimation._I._clear(),rst},GraphicAnimation._temParam=[],GraphicAnimation._I=null,__static(GraphicAnimation,["_drawTextureCmd",function(){return this._drawTextureCmd=[["skin",null],["x",0],["y",0],["width",0],["height",0],["pivotX",0],["pivotY",0],["scaleX",1],["scaleY",1],["rotation",0],["alpha",1],["skewX",0],["skewY",0],["anchorX",0],["anchorY",0]]},"_tempMt",function(){return this._tempMt=new Matrix}]),GraphicAnimation}(FrameAnimation);Laya.__init([EventDispatcher,LoaderManager,Render,Browser,Timer,LocalStorage,TimeLine])}(window,document,Laya),function(window,document,Laya){Laya.un,Laya.uns,Laya.static;var __class=Laya.class;Laya.getset,Laya.__newvec;new(function(){function LayaMain(){}return __class(LayaMain,"LayaMain"),LayaMain}())}(0,0,Laya),function(window,document,Laya){Laya.un,Laya.uns;var __static=Laya.static,__class=Laya.class,__getset=Laya.getset,__newvec=Laya.__newvec,Arith=laya.maths.Arith,Bezier=laya.maths.Bezier,Bitmap=laya.resource.Bitmap,Browser=laya.utils.Browser,Color=laya.utils.Color,Config=(laya.filters.ColorFilter,Laya.Config),Context=laya.resource.Context,Filter=(laya.events.Event,laya.filters.Filter),Graphics=laya.display.Graphics,HTMLCanvas=laya.resource.HTMLCanvas,HTMLImage=(laya.utils.HTMLChar,laya.resource.HTMLImage),Matrix=(laya.utils.Handler,laya.maths.Matrix),Point=laya.maths.Point,Rectangle=laya.maths.Rectangle,Render=laya.renders.Render,RenderSprite=(laya.renders.RenderContext,laya.renders.RenderSprite),Resource=laya.resource.Resource,ResourceManager=laya.resource.ResourceManager,RunDriver=laya.utils.RunDriver,Sprite=laya.display.Sprite,Stat=laya.utils.Stat,StringKey=laya.utils.StringKey,System=(laya.display.css.Style,laya.system.System),Texture=laya.resource.Texture,Utils=laya.utils.Utils,VectorGraphManager=laya.utils.VectorGraphManager;laya.utils.WordText;Laya.interface("laya.webgl.shapes.IShape"),Laya.interface("laya.webgl.submit.ISubmit"),Laya.interface("laya.webgl.text.ICharSegment"),Laya.interface("laya.webgl.canvas.save.ISaveData"),Laya.interface("laya.webgl.resource.IMergeAtlasBitmap"),Laya.interface("laya.filters.IFilterActionGL","laya.filters.IFilterAction");var FilterActionGL=function(){function FilterActionGL(){}__class(FilterActionGL,"laya.filters.webgl.FilterActionGL");var __proto=FilterActionGL.prototype;return Laya.imps(__proto,{"laya.filters.IFilterActionGL":!0}),__proto.setValue=function(shader){},__proto.setValueMix=function(shader){},__proto.apply3d=function(scope,sprite,context,x,y){return null},__proto.apply=function(srcCanvas){return null},__getset(0,__proto,"typeMix",function(){return 0}),FilterActionGL}(),ShaderValue=function(){function ShaderValue(){}return __class(ShaderValue,"laya.webgl.shader.ShaderValue"),ShaderValue}(),AtlasGrid=function(){function AtlasGrid(width,height,atlasID){this._atlasID=0,this._width=0,this._height=0,this._texCount=0,this._rowInfo=null,this._cells=null,this._failSize=new TexMergeTexSize,void 0===width&&(width=0),void 0===height&&(height=0),void 0===atlasID&&(atlasID=0),this._cells=null,this._rowInfo=null,this._init(width,height),this._atlasID=atlasID}var TexRowInfo,TexMergeTexSize;__class(AtlasGrid,"laya.webgl.atlas.AtlasGrid");var __proto=AtlasGrid.prototype;return __proto.getAltasID=function(){return this._atlasID},__proto.setAltasID=function(atlasID){atlasID>=0&&(this._atlasID=atlasID)},__proto.addTex=function(type,width,height){var result=this._get(width,height);return 0==result.ret?result:(this._fill(result.x,result.y,width,height,type),this._texCount++,result)},__proto._release=function(){null!=this._cells&&(this._cells.length=0,this._cells=null),this._rowInfo&&(this._rowInfo.length=0,this._rowInfo=null)},__proto._init=function(width,height){if(this._width=width,this._height=height,this._release(),0==this._width)return!1;this._cells=new Uint8Array(this._width*this._height*3),this._rowInfo=__newvec(this._height);for(var i=0;i<this._height;i++)this._rowInfo[i]=new TexRowInfo;return this._clear(),!0},__proto._get=function(width,height){var pFillInfo=new MergeFillInfo;if(width>=this._failSize.width&&height>=this._failSize.height)return pFillInfo;for(var rx=-1,ry=-1,nWidth=this._width,nHeight=this._height,pCellBox=this._cells,y=0;y<nHeight;y++)if(!(this._rowInfo[y].spaceCount<width))for(var x=0;x<nWidth;){var tm=3*(y*nWidth+x);if(0!=pCellBox[tm]||pCellBox[tm+1]<width||pCellBox[tm+2]<height)x+=pCellBox[tm+1];else{rx=x,ry=y;for(var xx=0;xx<width;xx++)if(pCellBox[3*xx+tm+2]<height){rx=-1;break}if(!(rx<0))return pFillInfo.ret=!0,pFillInfo.x=rx,pFillInfo.y=ry,pFillInfo;x+=pCellBox[tm+1]}}return pFillInfo},__proto._fill=function(x,y,w,h,type){var nWidth=this._width,nHeghit=this._height;this._check(x+w<=nWidth&&y+h<=nHeghit);for(var yy=y;yy<h+y;++yy){this._check(this._rowInfo[yy].spaceCount>=w),this._rowInfo[yy].spaceCount-=w;for(var xx=0;xx<w;xx++){var tm=3*(x+yy*nWidth+xx);this._check(0==this._cells[tm]),this._cells[tm]=type,this._cells[tm+1]=w,this._cells[tm+2]=h}}if(x>0)for(yy=0;yy<h;++yy){var s=0;for(xx=x-1;xx>=0&&0==this._cells[3*((y+yy)*nWidth+xx)];--xx,++s);for(xx=s;xx>0;--xx)this._cells[3*((y+yy)*nWidth+x-xx)+1]=xx,this._check(xx>0)}if(y>0)for(xx=x;xx<x+w;++xx){for(s=0,yy=y-1;yy>=0&&0==this._cells[3*(xx+yy*nWidth)];--yy,s++);for(yy=s;yy>0;--yy)this._cells[3*(xx+(y-yy)*nWidth)+2]=yy,this._check(yy>0)}},__proto._check=function(ret){0==ret&&console.log("xtexMerger 错误啦")},__proto._clear=function(){this._texCount=0;for(var y=0;y<this._height;y++)this._rowInfo[y].spaceCount=this._width;for(var i=0;i<this._height;i++)for(var j=0;j<this._width;j++){var tm=3*(i*this._width+j);this._cells[tm]=0,this._cells[tm+1]=this._width-j,this._cells[tm+2]=this._width-i}this._failSize.width=this._width+1,this._failSize.height=this._height+1},AtlasGrid.__init$=function(){TexRowInfo=function(){function TexRowInfo(){this.spaceCount=0}return __class(TexRowInfo,""),TexRowInfo}(),TexMergeTexSize=function(){function TexMergeTexSize(){this.width=0,this.height=0}return __class(TexMergeTexSize,""),TexMergeTexSize}()},AtlasGrid}(),AtlasResourceManager=function(){function AtlasResourceManager(width,height,gridSize,maxTexNum){this._currentAtlasCount=0,this._maxAtlaserCount=0,this._width=0,this._height=0,this._gridSize=0,this._gridNumX=0,this._gridNumY=0,this._init=!1,this._curAtlasIndex=0,this._setAtlasParam=!1,this._atlaserArray=null,this._needGC=!1,this._setAtlasParam=!0,this._width=width,this._height=height,this._gridSize=gridSize,this._maxAtlaserCount=maxTexNum,this._gridNumX=width/gridSize,this._gridNumY=height/gridSize,this._curAtlasIndex=0,this._atlaserArray=[]}__class(AtlasResourceManager,"laya.webgl.atlas.AtlasResourceManager");var __proto=AtlasResourceManager.prototype;return __proto.setAtlasParam=function(width,height,gridSize,maxTexNum){if(1==this._setAtlasParam)return AtlasResourceManager._sid_=0,this._width=width,this._height=height,this._gridSize=gridSize,this._maxAtlaserCount=maxTexNum,this._gridNumX=width/gridSize,this._gridNumY=height/gridSize,this._curAtlasIndex=0,this.freeAll(),!0;throw console.log("设置大图合集参数错误，只能在开始页面设置各种参数"),-1},__proto.pushData=function(texture){this._setAtlasParam=!1;for(var nImageGridX=Math.ceil((texture.bitmap.width+2)/this._gridSize),nImageGridY=Math.ceil((texture.bitmap.height+2)/this._gridSize),bSuccess=!1,k=0;k<2;k++){for(var maxAtlaserCount=this._maxAtlaserCount,i=0;i<maxAtlaserCount;i++){var altasIndex=(this._curAtlasIndex+i)%maxAtlaserCount;this._atlaserArray.length-1>=altasIndex||this._atlaserArray.push(new Atlaser(this._gridNumX,this._gridNumY,this._width,this._height,AtlasResourceManager._sid_++));var atlas=this._atlaserArray[altasIndex],bitmap=texture.bitmap,webGLImageIndex=atlas.inAtlasWebGLImagesKey.indexOf(bitmap),offsetX=0,offsetY=0;if(-1!=webGLImageIndex){var offset=atlas.InAtlasWebGLImagesOffsetValue[webGLImageIndex];offsetX=offset[0],offsetY=offset[1],atlas.addToAtlas(texture,offsetX,offsetY),bSuccess=!0,this._curAtlasIndex=altasIndex;break}var fillInfo=atlas.addTex(1,nImageGridX,nImageGridY);if(fillInfo.ret){offsetX=fillInfo.x*this._gridSize+1,offsetY=fillInfo.y*this._gridSize+1,bitmap.lock=!0,atlas.addToAtlasTexture(bitmap,offsetX,offsetY),atlas.addToAtlas(texture,offsetX,offsetY),bSuccess=!0,this._curAtlasIndex=altasIndex;break}}if(bSuccess)break;this._atlaserArray.push(new Atlaser(this._gridNumX,this._gridNumY,this._width,this._height,AtlasResourceManager._sid_++)),this._needGC=!0,this.garbageCollection(),this._curAtlasIndex=this._atlaserArray.length-1}return bSuccess||console.log(">>>AtlasManager pushData error"),bSuccess},__proto.addToAtlas=function(tex){laya.webgl.atlas.AtlasResourceManager.instance.pushData(tex)},__proto.garbageCollection=function(){if(!0===this._needGC){for(var n=this._atlaserArray.length-this._maxAtlaserCount,i=0;i<n;i++)this._atlaserArray[i].dispose();this._atlaserArray.splice(0,n),this._needGC=!1}return!0},__proto.freeAll=function(){for(var i=0,n=this._atlaserArray.length;i<n;i++)this._atlaserArray[i].dispose();this._atlaserArray.length=0,this._curAtlasIndex=0},__proto.getAtlaserCount=function(){return this._atlaserArray.length},__proto.getAtlaserByIndex=function(index){return this._atlaserArray[index]},__getset(1,AtlasResourceManager,"instance",function(){return AtlasResourceManager._Instance||(AtlasResourceManager._Instance=new AtlasResourceManager(laya.webgl.atlas.AtlasResourceManager.atlasTextureWidth,laya.webgl.atlas.AtlasResourceManager.atlasTextureHeight,16,laya.webgl.atlas.AtlasResourceManager.maxTextureCount)),AtlasResourceManager._Instance}),__getset(1,AtlasResourceManager,"enabled",function(){return AtlasResourceManager._enabled}),__getset(1,AtlasResourceManager,"atlasLimitWidth",function(){return AtlasResourceManager._atlasLimitWidth},function(value){AtlasResourceManager._atlasLimitWidth=value}),__getset(1,AtlasResourceManager,"atlasLimitHeight",function(){return AtlasResourceManager._atlasLimitHeight},function(value){AtlasResourceManager._atlasLimitHeight=value}),AtlasResourceManager._enable=function(){AtlasResourceManager._enabled=!0,Config.atlasEnable=!0},AtlasResourceManager._disable=function(){AtlasResourceManager._enabled=!1,Config.atlasEnable=!1},AtlasResourceManager.__init__=function(){AtlasResourceManager.atlasTextureWidth=2048,AtlasResourceManager.atlasTextureHeight=2048,AtlasResourceManager.maxTextureCount=6,AtlasResourceManager.atlasLimitWidth=512,AtlasResourceManager.atlasLimitHeight=512},AtlasResourceManager._enabled=!1,AtlasResourceManager._atlasLimitWidth=0,AtlasResourceManager._atlasLimitHeight=0,AtlasResourceManager.gridSize=16,AtlasResourceManager.atlasTextureWidth=0,AtlasResourceManager.atlasTextureHeight=0,AtlasResourceManager.maxTextureCount=0,AtlasResourceManager._atlasRestore=0,AtlasResourceManager.BOARDER_TYPE_NO=0,AtlasResourceManager.BOARDER_TYPE_RIGHT=1,AtlasResourceManager.BOARDER_TYPE_LEFT=2,AtlasResourceManager.BOARDER_TYPE_BOTTOM=4,AtlasResourceManager.BOARDER_TYPE_TOP=8,AtlasResourceManager.BOARDER_TYPE_ALL=15,AtlasResourceManager._sid_=0,AtlasResourceManager._Instance=null,AtlasResourceManager}(),MergeFillInfo=function(){function MergeFillInfo(){this.x=0,this.y=0,this.ret=!1,this.ret=!1,this.x=0,this.y=0}return __class(MergeFillInfo,"laya.webgl.atlas.MergeFillInfo"),MergeFillInfo}(),BlendMode=function(){function BlendMode(){}return __class(BlendMode,"laya.webgl.canvas.BlendMode"),BlendMode._init_=function(gl){BlendMode.fns=[BlendMode.BlendNormal,BlendMode.BlendAdd,BlendMode.BlendMultiply,BlendMode.BlendScreen,BlendMode.BlendOverlay,BlendMode.BlendLight,BlendMode.BlendMask,BlendMode.BlendDestinationOut],BlendMode.targetFns=[BlendMode.BlendNormalTarget,BlendMode.BlendAddTarget,BlendMode.BlendMultiplyTarget,BlendMode.BlendScreenTarget,BlendMode.BlendOverlayTarget,BlendMode.BlendLightTarget,BlendMode.BlendMask,BlendMode.BlendDestinationOut]},BlendMode.BlendNormal=function(gl){gl.blendFuncSeparate(770,771,1,1)},BlendMode.BlendAdd=function(gl){gl.blendFunc(770,772)},BlendMode.BlendMultiply=function(gl){gl.blendFunc(774,771)},BlendMode.BlendScreen=function(gl){gl.blendFunc(770,1)},BlendMode.BlendOverlay=function(gl){gl.blendFunc(1,769)},BlendMode.BlendLight=function(gl){gl.blendFunc(770,1)},BlendMode.BlendNormalTarget=function(gl){gl.blendFuncSeparate(770,771,1,771)},BlendMode.BlendAddTarget=function(gl){gl.blendFunc(770,772)},BlendMode.BlendMultiplyTarget=function(gl){gl.blendFunc(774,771)},BlendMode.BlendScreenTarget=function(gl){gl.blendFunc(770,1)},BlendMode.BlendOverlayTarget=function(gl){gl.blendFunc(1,769)},BlendMode.BlendLightTarget=function(gl){gl.blendFunc(770,1)},BlendMode.BlendMask=function(gl){gl.blendFunc(0,770)},BlendMode.BlendDestinationOut=function(gl){gl.blendFunc(0,0)},BlendMode.activeBlendFunction=null,BlendMode.NAMES=["normal","add","multiply","screen","overlay","light","mask","destination-out"],BlendMode.TOINT={normal:0,add:1,multiply:2,screen:3,lighter:1,overlay:4,light:5,mask:6,"destination-out":7},BlendMode.NORMAL="normal",BlendMode.ADD="add",BlendMode.MULTIPLY="multiply",BlendMode.SCREEN="screen",BlendMode.LIGHT="light",BlendMode.OVERLAY="overlay",BlendMode.DESTINATIONOUT="destination-out",BlendMode.fns=[],BlendMode.targetFns=[],BlendMode}(),DrawStyle=function(){function DrawStyle(value){this._color=Color.create("black"),this.setValue(value)}__class(DrawStyle,"laya.webgl.canvas.DrawStyle");var __proto=DrawStyle.prototype;return __proto.setValue=function(value){if(value){if("string"==typeof value)return void(this._color=Color.create(value));if(value instanceof laya.utils.Color)return void(this._color=value)}},__proto.reset=function(){this._color=Color.create("black")},__proto.equal=function(value){return"string"==typeof value?this._color.strColor===value:value instanceof laya.utils.Color&&this._color.numColor===value.numColor},__proto.toColorStr=function(){return this._color.strColor},DrawStyle.create=function(value){if(value){var color;if("string"==typeof value?color=Color.create(value):value instanceof laya.utils.Color&&(color=value),color)return color._drawStyle||(color._drawStyle=new DrawStyle(value))}return null},DrawStyle.DEFAULT=new DrawStyle("#000000"),DrawStyle}(),Path=function(){function Path(){this._x=0,this._y=0,this.dirty=!1,this.offset=0,this.count=0,this.geoStart=0,this.tempArray=[],this.closePath=!1,this.geomatrys=[];WebGL.mainContext;this.ib=IndexBuffer2D.create(35048),this.vb=VertexBuffer2D.create(5)}__class(Path,"laya.webgl.canvas.Path");var __proto=Path.prototype;return __proto.addPoint=function(pointX,pointY){this.tempArray.push(pointX,pointY)},__proto.getEndPointX=function(){return this.tempArray[this.tempArray.length-2]},__proto.getEndPointY=function(){return this.tempArray[this.tempArray.length-1]},__proto.polygon=function(x,y,points,color,borderWidth,borderColor){var geo;return this.geomatrys.push(this._curGeomatry=geo=new Polygon(x,y,points,color,borderWidth,borderColor)),color||(geo.fill=!1),void 0==borderColor&&(geo.borderWidth=0),geo},__proto.setGeomtry=function(shape){this.geomatrys.push(this._curGeomatry=shape)},__proto.drawLine=function(x,y,points,width,color){var geo;return this.closePath?this.geomatrys.push(this._curGeomatry=geo=new LoopLine(x,y,points,width,color)):this.geomatrys.push(this._curGeomatry=geo=new Line(x,y,points,width,color)),geo.fill=!1,geo},__proto.update=function(){var si=this.ib.byteLength,len=this.geomatrys.length;this.offset=si;for(var i=this.geoStart;i<len;i++)this.geomatrys[i].getData(this.ib,this.vb,this.vb.byteLength/20);this.geoStart=len,this.count=(this.ib.byteLength-si)/CONST3D2D.BYTES_PIDX},__proto.reset=function(){this.vb.clear(),this.ib.clear(),this.offset=this.count=this.geoStart=0,this.geomatrys.length=0},Path}(),SaveBase=function(){function SaveBase(){}__class(SaveBase,"laya.webgl.canvas.save.SaveBase");var __proto=SaveBase.prototype;return Laya.imps(__proto,{"laya.webgl.canvas.save.ISaveData":!0}),__proto.isSaveMark=function(){return!1},__proto.restore=function(context){this._dataObj[this._valueName]=this._value,SaveBase._cache[SaveBase._cache._length++]=this,this._newSubmit&&(context._curSubmit=Submit.RENDERBASE,context._renderKey=0)},SaveBase._createArray=function(){var value=[];return value._length=0,value},SaveBase._init=function(){var namemap=SaveBase._namemap={};return namemap[1]="ALPHA",namemap[2]="fillStyle",namemap[8]="font",namemap[256]="lineWidth",namemap[512]="strokeStyle",namemap[8192]="_mergeID",namemap[1024]=namemap[2048]=namemap[4096]=[],namemap[16384]="textBaseline",namemap[32768]="textAlign",namemap[65536]="_nBlendType",namemap[524288]="shader",namemap[1048576]="filters",namemap},SaveBase.save=function(context,type,dataObj,newSubmit){if((context._saveMark._saveuse&type)!==type){context._saveMark._saveuse|=type;var cache=SaveBase._cache,o=cache._length>0?cache[--cache._length]:new SaveBase;o._value=dataObj[o._valueName=SaveBase._namemap[type]],o._dataObj=dataObj,o._newSubmit=newSubmit;var _save=context._save;_save[_save._length++]=o}},SaveBase._cache=laya.webgl.canvas.save.SaveBase._createArray(),SaveBase._namemap=SaveBase._init(),SaveBase}(),SaveClipRect=function(){function SaveClipRect(){this._clipRect=new Rectangle}__class(SaveClipRect,"laya.webgl.canvas.save.SaveClipRect");var __proto=SaveClipRect.prototype;return Laya.imps(__proto,{"laya.webgl.canvas.save.ISaveData":!0}),__proto.isSaveMark=function(){return!1},__proto.restore=function(context){context._clipRect=this._clipSaveRect,SaveClipRect._cache[SaveClipRect._cache._length++]=this,this._submitScissor.submitLength=context._submits._length-this._submitScissor.submitIndex,context._curSubmit=Submit.RENDERBASE,context._renderKey=0},SaveClipRect.save=function(context,submitScissor){if(131072!=(131072&context._saveMark._saveuse)){context._saveMark._saveuse|=131072;var cache=SaveClipRect._cache,o=cache._length>0?cache[--cache._length]:new SaveClipRect;o._clipSaveRect=context._clipRect,context._clipRect=o._clipRect.copyFrom(context._clipRect),o._submitScissor=submitScissor;var _save=context._save;_save[_save._length++]=o}},SaveClipRect._cache=SaveBase._createArray(),SaveClipRect}(),SaveMark=function(){function SaveMark(){this._saveuse=0}__class(SaveMark,"laya.webgl.canvas.save.SaveMark");var __proto=SaveMark.prototype;return Laya.imps(__proto,{"laya.webgl.canvas.save.ISaveData":!0}),__proto.isSaveMark=function(){return!0},__proto.restore=function(context){context._saveMark=this._preSaveMark,SaveMark._no[SaveMark._no._length++]=this},SaveMark.Create=function(context){var no=SaveMark._no,o=no._length>0?no[--no._length]:new SaveMark;return o._saveuse=0,o._preSaveMark=context._saveMark,context._saveMark=o,o},SaveMark._no=SaveBase._createArray(),SaveMark}(),SaveTransform=function(){function SaveTransform(){this._matrix=new Matrix}__class(SaveTransform,"laya.webgl.canvas.save.SaveTransform");var __proto=SaveTransform.prototype;return Laya.imps(__proto,{"laya.webgl.canvas.save.ISaveData":!0}),__proto.isSaveMark=function(){return!1},__proto.restore=function(context){context._curMat=this._savematrix,SaveTransform._no[SaveTransform._no._length++]=this},SaveTransform.save=function(context){var _saveMark=context._saveMark;if(2048!=(2048&_saveMark._saveuse)){_saveMark._saveuse|=2048;var no=SaveTransform._no,o=no._length>0?no[--no._length]:new SaveTransform;o._savematrix=context._curMat,context._curMat=context._curMat.copyTo(o._matrix);var _save=context._save;_save[_save._length++]=o}},SaveTransform._no=SaveBase._createArray(),SaveTransform}(),SaveTranslate=function(){function SaveTranslate(){}__class(SaveTranslate,"laya.webgl.canvas.save.SaveTranslate");var __proto=SaveTranslate.prototype;return Laya.imps(__proto,{"laya.webgl.canvas.save.ISaveData":!0}),__proto.isSaveMark=function(){return!1},__proto.restore=function(context){context._curMat;context._x=this._x,context._y=this._y,SaveTranslate._no[SaveTranslate._no._length++]=this},SaveTranslate.save=function(context){var no=SaveTranslate._no,o=no._length>0?no[--no._length]:new SaveTranslate;o._x=context._x,o._y=context._y;var _save=context._save;_save[_save._length++]=o},SaveTranslate._no=SaveBase._createArray(),SaveTranslate}(),RenderTargetMAX=function(){function RenderTargetMAX(){this.target=null,this.repaint=!1,this._width=NaN,this._height=NaN,this._clipRect=new Rectangle}__class(RenderTargetMAX,"laya.webgl.resource.RenderTargetMAX");var __proto=RenderTargetMAX.prototype;return __proto.size=function(w,h){var _$this=this;if(this._width===w&&this._height===h)return this.repaint=!0,void(this.target.bitmap._released=!0);this.repaint=!0,this._width=w,this._height=h,this.target?this.target.size(w,h):this.target=RenderTarget2D.create(w,h),this.target.hasListener("recovered")||this.target.on("recovered",this,function(e){_$this.repaint=!0})},__proto._flushToTarget=function(context,target){if(!target._destroy){var worldScissorTest=RenderState2D.worldScissorTest,preworldClipRect=RenderState2D.worldClipRect;RenderState2D.worldClipRect=this._clipRect,this._clipRect.x=this._clipRect.y=0,this._clipRect.width=this._width,this._clipRect.height=this._height,RenderState2D.worldScissorTest=!1,WebGL.mainContext.disable(3089);var preAlpha=RenderState2D.worldAlpha,preMatrix4=RenderState2D.worldMatrix4,preMatrix=RenderState2D.worldMatrix,preFilters=RenderState2D.worldFilters,preShaderDefines=RenderState2D.worldShaderDefines;if(RenderState2D.worldMatrix=Matrix.EMPTY,RenderState2D.restoreTempArray(),RenderState2D.worldMatrix4=RenderState2D.TEMPMAT4_ARRAY,RenderState2D.worldAlpha=1,RenderState2D.worldFilters=null,RenderState2D.worldShaderDefines=null,BaseShader.activeShader=null,target.start(),Config.showCanvasMark?target.clear(0,1,0,.3):target.clear(0,0,0,0),context.flush(),target.end(),BaseShader.activeShader=null,RenderState2D.worldAlpha=preAlpha,RenderState2D.worldMatrix4=preMatrix4,RenderState2D.worldMatrix=preMatrix,RenderState2D.worldFilters=preFilters,RenderState2D.worldShaderDefines=preShaderDefines,RenderState2D.worldScissorTest=worldScissorTest,worldScissorTest){var y=RenderState2D.height-preworldClipRect.y-preworldClipRect.height;WebGL.mainContext.scissor(preworldClipRect.x,y,preworldClipRect.width,preworldClipRect.height),WebGL.mainContext.enable(3089)}RenderState2D.worldClipRect=preworldClipRect}},__proto.flush=function(context){this.repaint&&(this._flushToTarget(context,this.target),this.repaint=!1)},__proto.drawTo=function(context,x,y,width,height){context.drawTexture(this.target.getTexture(),x,y,width,height,0,0)},__proto.destroy=function(){this.target&&(this.target.destroy(),this.target=null)},RenderTargetMAX}(),Shader2D=function(){function Shader2D(){this.ALPHA=1,this.shaderType=0,this.defines=new ShaderDefines2D}return __class(Shader2D,"laya.webgl.shader.d2.Shader2D"),Shader2D.__init__=function(){Shader.addInclude("parts/ColorFilter_ps_uniform.glsl","uniform vec4 colorAlpha;\nuniform mat4 colorMat;"),Shader.addInclude("parts/ColorFilter_ps_logic.glsl","gl_FragColor = gl_FragColor * colorMat + colorAlpha/255.0;"),Shader.addInclude("parts/GlowFilter_ps_uniform.glsl","uniform vec4 u_color;\nuniform float u_strength;\nuniform float u_blurX;\nuniform float u_blurY;\nuniform float u_offsetX;\nuniform float u_offsetY;\nuniform float u_textW;\nuniform float u_textH;"),Shader.addInclude("parts/GlowFilter_ps_logic.glsl","const float c_IterationTime = 10.0;\nfloat floatIterationTotalTime = c_IterationTime * c_IterationTime;\nvec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\nvec2 vec2FilterDir = vec2(-(u_offsetX)/u_textW,-(u_offsetY)/u_textH);\nvec2 vec2FilterOff = vec2(u_blurX/u_textW/c_IterationTime * 2.0,u_blurY/u_textH/c_IterationTime * 2.0);\nfloat maxNum = u_blurX * u_blurY;\nvec2 vec2Off = vec2(0.0,0.0);\nfloat floatOff = c_IterationTime/2.0;\nfor(float i = 0.0;i<=c_IterationTime; ++i){\n\tfor(float j = 0.0;j<=c_IterationTime; ++j){\n\t\tvec2Off = vec2(vec2FilterOff.x * (i - floatOff),vec2FilterOff.y * (j - floatOff));\n\t\tvec4Color += texture2D(texture, v_texcoord + vec2FilterDir + vec2Off)/floatIterationTotalTime;\n\t}\n}\ngl_FragColor = vec4(u_color.rgb,vec4Color.a * u_strength);"),Shader.addInclude("parts/BlurFilter_ps_logic.glsl","gl_FragColor =   blur();\ngl_FragColor.w*=alpha;"),Shader.addInclude("parts/BlurFilter_ps_uniform.glsl","uniform float strength;\nuniform vec2 blurInfo;\n\n#define PI 3.141593\n\nfloat sigma=strength/3.0;//3σ以外影响很小。即当σ=1的时候，半径为3\nfloat sig2 = sigma*sigma;\nfloat _2sig2 = 2.0*sig2;\n//return 1.0/(2*PI*sig2)*exp(-(x*x+y*y)/_2sig2)\nfloat gauss1 = 1.0/(2.0*PI*sig2);\n\nfloat getGaussian(float x, float y){\n    return gauss1*exp(-(x*x+y*y)/_2sig2);\n}\n\nvec4 blur(){\n    const float blurw = 9.0;\n    vec4 vec4Color = vec4(0.0,0.0,0.0,0.0);\n    vec2 halfsz=vec2(blurw,blurw)/2.0/blurInfo;    \n    vec2 startpos=v_texcoord-halfsz;\n    vec2 ctexcoord = startpos;\n    vec2 step = 1.0/blurInfo;  //每个像素      \n    \n    for(float y = 0.0;y<=blurw; ++y){\n        ctexcoord.x=startpos.x;\n        for(float x = 0.0;x<=blurw; ++x){\n            //TODO 纹理坐标的固定偏移应该在vs中处理\n            vec4Color += texture2D(texture, ctexcoord)*getGaussian(x-blurw/2.0,y-blurw/2.0);\n            ctexcoord.x+=step.x;\n        }\n        ctexcoord.y+=step.y;\n    }\n    return vec4Color;\n}"),Shader.addInclude("parts/ColorAdd_ps_uniform.glsl","uniform vec4 colorAdd;\n"),Shader.addInclude("parts/ColorAdd_ps_logic.glsl","gl_FragColor = vec4(colorAdd.rgb,colorAdd.a*gl_FragColor.a);");var vs,ps;vs="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",ps='precision mediump float;\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec4 color= texture2D(texture, v_texcoord);\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',Shader.preCompile2D(0,1,vs,ps,null),vs="attribute vec4 position;\nuniform vec2 size;\nuniform mat4 mmat;\nvoid main() {\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n}",ps='precision mediump float;\nuniform vec4 color;\nuniform float alpha;\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\nvoid main() {\n\tvec4 a = vec4(color.r, color.g, color.b, color.a);\n\ta.w = alpha;\n\tgl_FragColor = a;\n\t#include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n}',Shader.preCompile2D(0,2,vs,ps,null),vs="attribute vec4 position;\nattribute vec3 a_color;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nuniform vec2 u_pos;\nuniform vec2 size;\nvarying vec3 color;\nvoid main(){\n  vec4 tPos = vec4(position.x + u_pos.x,position.y + u_pos.y,position.z,position.w);\n  vec4 pos=mmat*u_mmat2*tPos;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  color=a_color;\n}",ps="precision mediump float;\n//precision mediump float;\nvarying vec3 color;\nuniform float alpha;\nvoid main(){\n\t//vec4 a=vec4(color.r, color.g, color.b, 1);\n\t//a.a*=alpha;\n    gl_FragColor=vec4(color.r, color.g, color.b, alpha);\n}",Shader.preCompile2D(0,4,vs,ps,null),vs="attribute vec4 position;\nattribute vec2 texcoord;\nuniform vec2 size;\n\n#ifdef WORLDMAT\nuniform mat4 mmat;\n#endif\nvarying vec2 v_texcoord;\nvoid main() {\n  #ifdef WORLDMAT\n  vec4 pos=mmat*position;\n  gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  #else\n  gl_Position =vec4((position.x/size.x-0.5)*2.0,(0.5-position.y/size.y)*2.0,position.z,1.0);\n  #endif\n  \n  v_texcoord = texcoord;\n}",ps='precision highp float;\n//precision highp float;\nvarying vec2 v_texcoord;\nuniform sampler2D texture;\nuniform float alpha;\nuniform vec4 u_TexRange;\nuniform vec2 u_offset;\n#include?BLUR_FILTER  "parts/BlurFilter_ps_uniform.glsl";\n#include?COLOR_FILTER "parts/ColorFilter_ps_uniform.glsl";\n#include?GLOW_FILTER "parts/GlowFilter_ps_uniform.glsl";\n#include?COLOR_ADD "parts/ColorAdd_ps_uniform.glsl";\n\nvoid main() {\n   vec2 newTexCoord;\n   newTexCoord.x = mod(u_offset.x + v_texcoord.x,u_TexRange.y) + u_TexRange.x;\n   newTexCoord.y = mod(u_offset.y + v_texcoord.y,u_TexRange.w) + u_TexRange.z;\n   vec4 color= texture2D(texture, newTexCoord);\n   color.a*=alpha;\n   gl_FragColor=color;\n   #include?COLOR_ADD "parts/ColorAdd_ps_logic.glsl";   \n   #include?BLUR_FILTER  "parts/BlurFilter_ps_logic.glsl";\n   #include?COLOR_FILTER "parts/ColorFilter_ps_logic.glsl";\n   #include?GLOW_FILTER "parts/GlowFilter_ps_logic.glsl";\n}',Shader.preCompile2D(0,256,vs,ps,null),vs="attribute vec2 position;\nattribute vec2 texcoord;\nattribute vec4 color;\nuniform vec2 size;\nuniform float offsetX;\nuniform float offsetY;\nuniform mat4 mmat;\nuniform mat4 u_mmat2;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nvoid main() {\n  vec4 pos=mmat*u_mmat2*vec4(offsetX+position.x,offsetY+position.y,0,1 );\n  gl_Position = vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0);\n  v_color = color;\n  v_texcoord = texcoord;  \n}",ps="precision mediump float;\nvarying vec2 v_texcoord;\nvarying vec4 v_color;\nuniform sampler2D texture;\nuniform float alpha;\nvoid main() {\n\tvec4 t_color = texture2D(texture, v_texcoord);\n\tgl_FragColor = t_color.rgba * v_color;\n\tgl_FragColor.a = gl_FragColor.a * alpha;\n}",Shader.preCompile2D(0,512,vs,ps,null)},Shader2D}(),ShaderDefines=function(){function ShaderDefines(name2int,int2name,int2nameMap){this._value=0,this._name2int=name2int,this._int2name=int2name,this._int2nameMap=int2nameMap}__class(ShaderDefines,"laya.webgl.shader.ShaderDefines");var __proto=ShaderDefines.prototype;return __proto.add=function(value){return"string"==typeof value&&(value=this._name2int[value]),this._value|=value,this._value},__proto.addInt=function(value){return this._value|=value,this._value},__proto.remove=function(value){return"string"==typeof value&&(value=this._name2int[value]),this._value&=~value,this._value},__proto.isDefine=function(def){return(this._value&def)===def},__proto.getValue=function(){return this._value},__proto.setValue=function(value){this._value=value},__proto.toNameDic=function(){var r=this._int2nameMap[this._value];return r||ShaderDefines._toText(this._value,this._int2name,this._int2nameMap)},ShaderDefines._reg=function(name,value,_name2int,_int2name){_name2int[name]=value,_int2name[value]=name},ShaderDefines._toText=function(value,_int2name,_int2nameMap){var r=_int2nameMap[value];if(r)return r;for(var o={},d=1,i=0;i<32&&!((d=1<<i)>value);i++)if(value&d){var name=_int2name[d];name&&(o[name]="")}return _int2nameMap[value]=o,o},ShaderDefines._toInt=function(names,_name2int){for(var words=names.split("."),num=0,i=0,n=words.length;i<n;i++){var value=_name2int[words[i]];if(!value)throw new Error("Defines to int err:"+names+"/"+words[i]);num|=value}return num},ShaderDefines}(),SkinMesh=function(){function SkinMesh(){this.mVBBuffer=null,this.mIBBuffer=null,this.mVBData=null,this.mIBData=null,this.mEleNum=0,this.mTexture=null,this.transform=null,this._vs=null,this._ps=null,this._indexStart=-1,this._verticles=null,this._uvs=null,this._tempMat16=RenderState2D.getMatrArray()}__class(SkinMesh,"laya.webgl.shader.d2.skinAnishader.SkinMesh");var __proto=SkinMesh.prototype;return __proto.init=function(texture,vs,ps){if(vs)this._vs=vs;else{this._vs=[];var tWidth=texture.width,tHeight=texture.height;this._vs.push(0,0,0,0,1,1,1,1),this._vs.push(tWidth,0,1,0,1,1,1,1),this._vs.push(tWidth,tHeight,1,1,1,1,1,1),this._vs.push(0,tHeight,0,1,1,1,1,1)}ps?this._ps=ps:(SkinMesh._defaultPS||(SkinMesh._defaultPS=[],SkinMesh._defaultPS.push(0,1,3,3,1,2)),this._ps=SkinMesh._defaultPS),this.mVBData=new Float32Array(this._vs),this.mIBData=new Uint16Array(this._ps.length),this.mIBData.start=-1,this.mEleNum=this._ps.length,this.mTexture=texture},__proto.init2=function(texture,vs,ps,verticles,uvs){ps?this._ps=ps:(this._ps=[],this._ps.push(0,1,3,3,1,2)),this._verticles=verticles,this._uvs=uvs,this.mEleNum=this._ps.length,this.mTexture=texture,(Render.isConchNode||Render.isConchApp)&&(this._initMyData(),this.mVBData=new Float32Array(this._vs))},__proto._initMyData=function(){var vsI=0,vI=0,tempVLen=4*this._verticles.length;this._vs=SkinMesh._tempVS;var insertNew=!1;if(Render.isConchNode||Render.isConchApp?(this._vs.length=tempVLen,insertNew=!0):this._vs.length<tempVLen&&(this._vs.length=tempVLen,insertNew=!0),SkinMesh._tVSLen=tempVLen,insertNew)for(;vsI<tempVLen;)this._vs[vsI]=this._verticles[vI],this._vs[vsI+1]=this._verticles[vI+1],this._vs[vsI+2]=this._uvs[vI],this._vs[vsI+3]=this._uvs[vI+1],this._vs[vsI+4]=1,this._vs[vsI+5]=1,this._vs[vsI+6]=1,this._vs[vsI+7]=1,vsI+=8,vI+=2;else for(;vsI<tempVLen;)this._vs[vsI]=this._verticles[vI],this._vs[vsI+1]=this._verticles[vI+1],this._vs[vsI+2]=this._uvs[vI],this._vs[vsI+3]=this._uvs[vI+1],vsI+=8,vI+=2},__proto.getData2=function(vb,ib,start){this.mVBBuffer=vb,this.mIBBuffer=ib,this._initMyData(),vb.appendEx2(this._vs,Float32Array,SkinMesh._tVSLen,4),this._indexStart=ib.byteLength;var tIB;(tIB=SkinMesh._tempIB).length<this._ps.length&&(tIB.length=this._ps.length);for(var i=0,n=this._ps.length;i<n;i++)tIB[i]=this._ps[i]+start;ib.appendEx2(tIB,Uint16Array,this._ps.length,2)},__proto.getData=function(vb,ib,start){if(this.mVBBuffer=vb,this.mIBBuffer=ib,vb.append(this.mVBData),this._indexStart=ib.byteLength,this.mIBData.start!=start){for(var i=0,n=this._ps.length;i<n;i++)this.mIBData[i]=this._ps[i]+start;this.mIBData.start=start}ib.append(this.mIBData)},__proto.render=function(context,x,y){if(Render.isWebGL&&this.mTexture){context._renderKey=0,context._shader2D.glTexture=null,SkinMeshBuffer.getInstance().addSkinMesh(this);var tempSubmit=Submit.createShape(context,this.mIBBuffer,this.mVBBuffer,this.mEleNum,this._indexStart,Value2D.create(512,0));this.transform||(this.transform=Matrix.EMPTY),this.transform.translate(x,y),Matrix.mul16(this.transform,context._curMat,this._tempMat16),this.transform.translate(-x,-y);var tShaderValue=tempSubmit.shaderValue;tShaderValue.textureHost=this.mTexture,tShaderValue.offsetX=0,tShaderValue.offsetY=0,tShaderValue.u_mmat2=this._tempMat16,tShaderValue.ALPHA=context._shader2D.ALPHA,context._submits[context._submits._length++]=tempSubmit}else Render.isConchApp&&this.mTexture&&(this.transform||(this.transform=Matrix.EMPTY),context.setSkinMesh&&context.setSkinMesh(x,y,this._ps,this.mVBData,this.mEleNum,0,this.mTexture,this.transform))},SkinMesh._tempVS=[],SkinMesh._tempIB=[],SkinMesh._defaultPS=null,SkinMesh._tVSLen=0,SkinMesh}(),SkinMeshBuffer=function(){function SkinMeshBuffer(){this.ib=null,this.vb=null;WebGL.mainContext;this.ib=IndexBuffer2D.create(35048),this.vb=VertexBuffer2D.create(8)}__class(SkinMeshBuffer,"laya.webgl.shader.d2.skinAnishader.SkinMeshBuffer");var __proto=SkinMeshBuffer.prototype;return __proto.addSkinMesh=function(skinMesh){skinMesh.getData2(this.vb,this.ib,this.vb.byteLength/32)},__proto.reset=function(){this.vb.clear(),this.ib.clear()},SkinMeshBuffer.getInstance=function(){return SkinMeshBuffer.instance=SkinMeshBuffer.instance||new SkinMeshBuffer},SkinMeshBuffer.instance=null,SkinMeshBuffer}(),BasePoly=function(){function BasePoly(x,y,width,height,edges,color,borderWidth,borderColor,round){this.r0=0,this.fill=!0,this.r1=Math.PI/2,void 0===round&&(round=0),this.x=x,this.y=y,this.width=width,this.height=height,this.edges=edges,this.color=color,this.borderWidth=borderWidth,this.borderColor=borderColor}__class(BasePoly,"laya.webgl.shapes.BasePoly");var __proto=BasePoly.prototype;return Laya.imps(__proto,{"laya.webgl.shapes.IShape":!0}),__proto.getData=function(ib,vb,start){},__proto.rebuild=function(points){},__proto.setMatrix=function(mat){},__proto.needUpdate=function(mat){return!0},__proto.sector=function(outVert,outIndex,start){var x=this.x,y=this.y,edges=this.edges,seg=(this.r1-this.r0)/edges,w=this.width,h=this.height,color=this.color,r=(color>>16&255)/255,g=(color>>8&255)/255,b=(255&color)/255;outVert.push(x,y,r,g,b);for(var i=0;i<edges+1;i++)outVert.push(x+Math.sin(seg*i+this.r0)*w,y+Math.cos(seg*i+this.r0)*h),outVert.push(r,g,b);for(i=0;i<edges;i++)outIndex.push(start,start+i+1,start+i+2)},__proto.createLine2=function(p,indices,lineWidth,len,outVertex,indexCount){var px,py,p1x,p1y,p2x,p2y,p3x,p3y,perpx,perpy,perp2x,perp2y,a1,b1,c1,a2,b2,c2,denom,dist,points=p.concat(),result=outVertex,color=this.borderColor,r=(color>>16&255)/255,g=(color>>8&255)/255,b=(255&color)/255,length=points.length/2,iStart=len,w=lineWidth/2;p1x=points[0],p1y=points[1],perpy=p1x-(p2x=points[2]),perpx=(perpx=-(p1y-(p2y=points[3])))/(dist=Math.sqrt(perpx*perpx+perpy*perpy))*w,perpy=perpy/dist*w,result.push(p1x-perpx+this.x,p1y-perpy+this.y,r,g,b,p1x+perpx+this.x,p1y+perpy+this.y,r,g,b);for(var i=1;i<length-1;i++)p1x=points[2*(i-1)],p1y=points[2*(i-1)+1],p2x=points[2*i],p2y=points[2*i+1],p3x=points[2*(i+1)],p3y=points[2*(i+1)+1],perpy=p1x-p2x,perp2y=p2x-p3x,c1=(-(perpx=(perpx=-(p1y-p2y))/(dist=Math.sqrt(perpx*perpx+perpy*perpy))*w)+p1x)*(-(perpy=perpy/dist*w)+p2y)-(-perpx+p2x)*(-perpy+p1y),c2=(-(perp2x=(perp2x=-(p2y-p3y))/(dist=Math.sqrt(perp2x*perp2x+perp2y*perp2y))*w)+p3x)*(-(perp2y=perp2y/dist*w)+p2y)-(-perp2x+p2x)*(-perp2y+p3y),denom=(a1=-perpy+p1y-(-perpy+p2y))*(b2=-perp2x+p2x-(-perp2x+p3x))-(a2=-perp2y+p3y-(-perp2y+p2y))*(b1=-perpx+p2x-(-perpx+p1x)),Math.abs(denom)<.1?(denom+=10.1,result.push(p2x-perpx+this.x,p2y-perpy+this.y,r,g,b,p2x+perpx+this.x,p2y+perpy+this.y,r,g,b)):(((px=(b1*c2-b2*c1)/denom)-p2x)*(px-p2x)+((py=(a2*c1-a1*c2)/denom)-p2y)+(py-p2y),result.push(px+this.x,py+this.y,r,g,b,p2x-(px-p2x)+this.x,p2y-(py-p2y)+this.y,r,g,b));p1x=points[points.length-4],p1y=points[points.length-3],perpy=p1x-(p2x=points[points.length-2]),perpx=(perpx=-(p1y-(p2y=points[points.length-1])))/(dist=Math.sqrt(perpx*perpx+perpy*perpy))*w,perpy=perpy/dist*w,result.push(p2x-perpx+this.x,p2y-perpy+this.y,r,g,b,p2x+perpx+this.x,p2y+perpy+this.y,r,g,b);var groupLen=indexCount;for(i=1;i<groupLen;i++)indices.push(iStart+2*(i-1),iStart+2*(i-1)+1,iStart+2*i+1,iStart+2*i+1,iStart+2*i,iStart+2*(i-1));return result},__proto.createLine=function(p,indices,lineWidth,len){var points=p.concat(),result=p,color=this.borderColor,r=(color>>16&255)/255,g=(color>>8&255)/255,b=(255&color)/255;points.splice(0,5);var px,py,p1x,p1y,p2x,p2y,p3x,p3y,perpx,perpy,perp2x,perp2y,a1,b1,c1,a2,b2,c2,denom,dist,length=points.length/5,iStart=len,w=lineWidth/2;p1x=points[0],p1y=points[1],perpy=p1x-(p2x=points[5]),perpx=(perpx=-(p1y-(p2y=points[6])))/(dist=Math.sqrt(perpx*perpx+perpy*perpy))*w,perpy=perpy/dist*w,result.push(p1x-perpx,p1y-perpy,r,g,b,p1x+perpx,p1y+perpy,r,g,b);for(var i=1;i<length-1;i++)p1x=points[5*(i-1)],p1y=points[5*(i-1)+1],p2x=points[5*i],p2y=points[5*i+1],p3x=points[5*(i+1)],p3y=points[5*(i+1)+1],perpy=p1x-p2x,perp2y=p2x-p3x,c1=(-(perpx=(perpx=-(p1y-p2y))/(dist=Math.sqrt(perpx*perpx+perpy*perpy))*w)+p1x)*(-(perpy=perpy/dist*w)+p2y)-(-perpx+p2x)*(-perpy+p1y),c2=(-(perp2x=(perp2x=-(p2y-p3y))/(dist=Math.sqrt(perp2x*perp2x+perp2y*perp2y))*w)+p3x)*(-(perp2y=perp2y/dist*w)+p2y)-(-perp2x+p2x)*(-perp2y+p3y),denom=(a1=-perpy+p1y-(-perpy+p2y))*(b2=-perp2x+p2x-(-perp2x+p3x))-(a2=-perp2y+p3y-(-perp2y+p2y))*(b1=-perpx+p2x-(-perpx+p1x)),Math.abs(denom)<.1?(denom+=10.1,result.push(p2x-perpx,p2y-perpy,r,g,b,p2x+perpx,p2y+perpy,r,g,b)):(((px=(b1*c2-b2*c1)/denom)-p2x)*(px-p2x)+((py=(a2*c1-a1*c2)/denom)-p2y)+(py-p2y),result.push(px,py,r,g,b,p2x-(px-p2x),p2y-(py-p2y),r,g,b));p1x=points[points.length-10],p1y=points[points.length-9],perpy=p1x-(p2x=points[points.length-5]),perpx=(perpx=-(p1y-(p2y=points[points.length-4])))/(dist=Math.sqrt(perpx*perpx+perpy*perpy))*w,perpy=perpy/dist*w,result.push(p2x-perpx,p2y-perpy,r,g,b,p2x+perpx,p2y+perpy,r,g,b);var groupLen=this.edges+1;for(i=1;i<groupLen;i++)indices.push(iStart+2*(i-1),iStart+2*(i-1)+1,iStart+2*i+1,iStart+2*i+1,iStart+2*i,iStart+2*(i-1));return result},__proto.createLoopLine=function(p,indices,lineWidth,len,outVertex,outIndex){var points=p.concat(),result=outVertex||p,color=this.borderColor,r=(color>>16&255)/255,g=(color>>8&255)/255,b=(255&color)/255;points.splice(0,5);var firstPoint=[points[0],points[1]],lastPoint=[points[points.length-5],points[points.length-4]],midPointX=lastPoint[0]+.5*(firstPoint[0]-lastPoint[0]),midPointY=lastPoint[1]+.5*(firstPoint[1]-lastPoint[1]);points.unshift(midPointX,midPointY,0,0,0),points.push(midPointX,midPointY,0,0,0);var px,py,p1x,p1y,p2x,p2y,p3x,p3y,perpx,perpy,perp2x,perp2y,a1,b1,c1,a2,b2,c2,denom,dist,length=points.length/5,iStart=len,w=lineWidth/2;p1x=points[0],p1y=points[1],perpy=p1x-(p2x=points[5]),perpx=(perpx=-(p1y-(p2y=points[6])))/(dist=Math.sqrt(perpx*perpx+perpy*perpy))*w,perpy=perpy/dist*w,result.push(p1x-perpx,p1y-perpy,r,g,b,p1x+perpx,p1y+perpy,r,g,b);for(var i=1;i<length-1;i++)p1x=points[5*(i-1)],p1y=points[5*(i-1)+1],p2x=points[5*i],p2y=points[5*i+1],p3x=points[5*(i+1)],p3y=points[5*(i+1)+1],perpy=p1x-p2x,perp2y=p2x-p3x,c1=(-(perpx=(perpx=-(p1y-p2y))/(dist=Math.sqrt(perpx*perpx+perpy*perpy))*w)+p1x)*(-(perpy=perpy/dist*w)+p2y)-(-perpx+p2x)*(-perpy+p1y),c2=(-(perp2x=(perp2x=-(p2y-p3y))/(dist=Math.sqrt(perp2x*perp2x+perp2y*perp2y))*w)+p3x)*(-(perp2y=perp2y/dist*w)+p2y)-(-perp2x+p2x)*(-perp2y+p3y),denom=(a1=-perpy+p1y-(-perpy+p2y))*(b2=-perp2x+p2x-(-perp2x+p3x))-(a2=-perp2y+p3y-(-perp2y+p2y))*(b1=-perpx+p2x-(-perpx+p1x)),Math.abs(denom)<.1?(denom+=10.1,result.push(p2x-perpx,p2y-perpy,r,g,b,p2x+perpx,p2y+perpy,r,g,b)):(((px=(b1*c2-b2*c1)/denom)-p2x)*(px-p2x)+((py=(a2*c1-a1*c2)/denom)-p2y)+(py-p2y),result.push(px,py,r,g,b,p2x-(px-p2x),p2y-(py-p2y),r,g,b));outIndex&&(indices=outIndex);var groupLen=this.edges+1;for(i=1;i<groupLen;i++)indices.push(iStart+2*(i-1),iStart+2*(i-1)+1,iStart+2*i+1,iStart+2*i+1,iStart+2*i,iStart+2*(i-1));return indices.push(iStart+2*(i-1),iStart+2*(i-1)+1,iStart+1,iStart+1,iStart,iStart+2*(i-1)),result},BasePoly}(),Submit=(function(){function GeometryData(lineWidth,lineColor,lineAlpha,fillColor,fillAlpha,fill,shape){this.lineWidth=lineWidth,this.lineColor=lineColor,this.lineAlpha=lineAlpha,this.fillColor=fillColor,this.fillAlpha=fillAlpha,this.shape=shape,this.fill=fill}__class(GeometryData,"laya.webgl.shapes.GeometryData");var __proto=GeometryData.prototype;__proto.clone=function(){return new GeometryData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},__proto.getIndexData=function(){return null},__proto.getVertexData=function(){return null},__proto.destroy=function(){this.shape=null}}(),function(){function Vertex(p){if(p instanceof Float32Array)this.points=p;else if(p instanceof Array){p.length;this.points=new Float32Array(p)}}__class(Vertex,"laya.webgl.shapes.Vertex");var __proto=Vertex.prototype;Laya.imps(__proto,{"laya.webgl.shapes.IShape":!0}),__proto.getData=function(ib,vb,start){},__proto.needUpdate=function(mat){return!1},__proto.rebuild=function(points){},__proto.setMatrix=function(mat){}}(),function(){function Submit(renderType){void 0===renderType&&(renderType=1e4),this._renderType=renderType}__class(Submit,"laya.webgl.submit.Submit");var __proto=Submit.prototype;return Laya.imps(__proto,{"laya.webgl.submit.ISubmit":!0}),__proto.releaseRender=function(){var cache=Submit._cache;cache[cache._length++]=this,this.shaderValue.release(),this._vb=null},__proto.getRenderType=function(){return this._renderType},__proto.renderSubmit=function(){if(0===this._numEle)return 1;var _tex=this.shaderValue.textureHost;if(_tex){var source=_tex.source;if(!_tex.bitmap||!source)return 1;this.shaderValue.texture=source}this._vb.bind_upload(this._ib);var gl=WebGL.mainContext;return this.shaderValue.upload(),BlendMode.activeBlendFunction!==this._blendFn&&(gl.enable(3042),this._blendFn(gl),BlendMode.activeBlendFunction=this._blendFn),Stat.drawCall++,Stat.trianglesFaces+=this._numEle/3,gl.drawElements(4,this._numEle,5123,this._startIdx),1},Submit.__init__=function(){var s=Submit.RENDERBASE=new Submit(-1);s.shaderValue=new Value2D(0,0),s.shaderValue.ALPHA=-1234},Submit.create=function(context,ib,vb,pos,sv){var o=Submit._cache._length?Submit._cache[--Submit._cache._length]:new Submit;null==vb&&((vb=o._selfVb||(o._selfVb=VertexBuffer2D.create(-1))).clear(),pos=0),o._ib=ib,o._vb=vb,o._startIdx=pos*CONST3D2D.BYTES_PIDX,o._numEle=0;var blendType=context._nBlendType;o._blendFn=context._targets?BlendMode.targetFns[blendType]:BlendMode.fns[blendType],o.shaderValue=sv,o.shaderValue.setValue(context._shader2D);var filters=context._shader2D.filters;return filters&&o.shaderValue.setFilters(filters),o},Submit.createShape=function(ctx,ib,vb,numEle,offset,sv){var o=Submit._cache._length?Submit._cache[--Submit._cache._length]:new Submit;o._ib=ib,o._vb=vb,o._numEle=numEle,o._startIdx=offset,o.shaderValue=sv,o.shaderValue.setValue(ctx._shader2D);var blendType=ctx._nBlendType;return o._blendFn=ctx._targets?BlendMode.targetFns[blendType]:BlendMode.fns[blendType],o},Submit.TYPE_2D=1e4,Submit.TYPE_CANVAS=10003,Submit.TYPE_CMDSETRT=10004,Submit.TYPE_CUSTOM=10005,Submit.TYPE_BLURRT=10006,Submit.TYPE_CMDDESTORYPRERT=10007,Submit.TYPE_DISABLESTENCIL=10008,Submit.TYPE_OTHERIBVB=10009,Submit.TYPE_PRIMITIVE=10010,Submit.TYPE_RT=10011,Submit.TYPE_BLUR_RT=10012,Submit.TYPE_TARGET=10013,Submit.TYPE_CHANGE_VALUE=10014,Submit.TYPE_SHAPE=10015,Submit.TYPE_TEXTURE=10016,Submit.TYPE_FILLTEXTURE=10017,Submit.RENDERBASE=null,Submit._cache=(Submit._cache=[],Submit._cache._length=0,Submit._cache),Submit}()),SubmitCMD=function(){function SubmitCMD(){this.fun=null,this.args=null}__class(SubmitCMD,"laya.webgl.submit.SubmitCMD");var __proto=SubmitCMD.prototype;return Laya.imps(__proto,{"laya.webgl.submit.ISubmit":!0}),__proto.renderSubmit=function(){return this.fun.apply(null,this.args),1},__proto.getRenderType=function(){return 0},__proto.releaseRender=function(){var cache=SubmitCMD._cache;cache[cache._length++]=this},SubmitCMD.create=function(args,fun){var o=SubmitCMD._cache._length?SubmitCMD._cache[--SubmitCMD._cache._length]:new SubmitCMD;return o.fun=fun,o.args=args,o},SubmitCMD._cache=(SubmitCMD._cache=[],SubmitCMD._cache._length=0,SubmitCMD._cache),SubmitCMD}(),SubmitCMDScope=function(){function SubmitCMDScope(){this.variables={}}__class(SubmitCMDScope,"laya.webgl.submit.SubmitCMDScope");var __proto=SubmitCMDScope.prototype;return __proto.getValue=function(name){return this.variables[name]},__proto.addValue=function(name,value){return this.variables[name]=value},__proto.setValue=function(name,value){return this.variables.hasOwnProperty(name)?this.variables[name]=value:null},__proto.clear=function(){for(var key in this.variables)delete this.variables[key]},__proto.recycle=function(){this.clear(),SubmitCMDScope.POOL.push(this)},SubmitCMDScope.create=function(){var scope=SubmitCMDScope.POOL.pop();return scope||(scope=new SubmitCMDScope),scope},SubmitCMDScope.POOL=[],SubmitCMDScope}(),SubmitOtherIBVB=function(){function SubmitOtherIBVB(){this.offset=0,this.startIndex=0,this._mat=Matrix.create()}__class(SubmitOtherIBVB,"laya.webgl.submit.SubmitOtherIBVB");var __proto=SubmitOtherIBVB.prototype;return Laya.imps(__proto,{"laya.webgl.submit.ISubmit":!0}),__proto.releaseRender=function(){var cache=SubmitOtherIBVB._cache;cache[cache._length++]=this},__proto.getRenderType=function(){return 10009},__proto.renderSubmit=function(){var _tex=this._shaderValue.textureHost;if(_tex){var source=_tex.source;if(!_tex.bitmap||!source)return 1;this._shaderValue.texture=source}this._vb.bind_upload(this._ib);var w=RenderState2D.worldMatrix4,wmat=Matrix.TEMP;Matrix.mulPre(this._mat,w[0],w[1],w[4],w[5],w[12],w[13],wmat);var tmp=RenderState2D.worldMatrix4=SubmitOtherIBVB.tempMatrix4;tmp[0]=wmat.a,tmp[1]=wmat.b,tmp[4]=wmat.c,tmp[5]=wmat.d,tmp[12]=wmat.tx,tmp[13]=wmat.ty,this._shader._offset=this.offset,this._shaderValue.refresh(),this._shader.upload(this._shaderValue),this._shader._offset=0;var gl=WebGL.mainContext;return BlendMode.activeBlendFunction!==this._blendFn&&(gl.enable(3042),this._blendFn(gl),BlendMode.activeBlendFunction=this._blendFn),Stat.drawCall++,Stat.trianglesFaces+=this._numEle/3,gl.drawElements(4,this._numEle,5123,this.startIndex),RenderState2D.worldMatrix4=w,BaseShader.activeShader=null,1},SubmitOtherIBVB.create=function(context,vb,ib,numElement,shader,shaderValue,startIndex,offset,type){void 0===type&&(type=0);var o=SubmitOtherIBVB._cache._length?SubmitOtherIBVB._cache[--SubmitOtherIBVB._cache._length]:new SubmitOtherIBVB;o._ib=ib,o._vb=vb,o._numEle=numElement,o._shader=shader,o._shaderValue=shaderValue;var blendType=context._nBlendType;switch(o._blendFn=context._targets?BlendMode.targetFns[blendType]:BlendMode.fns[blendType],type){case 0:o.offset=0,o.startIndex=offset/(CONST3D2D.BYTES_PE*vb.vertexStride)*1.5,o.startIndex*=CONST3D2D.BYTES_PIDX;break;case 1:o.startIndex=startIndex,o.offset=offset}return o},SubmitOtherIBVB._cache=(SubmitOtherIBVB._cache=[],SubmitOtherIBVB._cache._length=0,SubmitOtherIBVB._cache),SubmitOtherIBVB.tempMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],SubmitOtherIBVB}(),SubmitScissor=function(){function SubmitScissor(){this.submitIndex=0,this.submitLength=0,this.context=null,this.clipRect=new Rectangle,this.screenRect=new Rectangle}__class(SubmitScissor,"laya.webgl.submit.SubmitScissor");var __proto=SubmitScissor.prototype;return Laya.imps(__proto,{"laya.webgl.submit.ISubmit":!0}),__proto._scissor=function(x,y,w,h){var m=RenderState2D.worldMatrix4,a=m[0],d=m[5];if(x=x*a+m[12],y=y*d+m[13],w*=a,h*=d,w<1||h<1)return!1;var r=x+w,b=y+h;x<0&&(x=0,w=r-x),y<0&&(y=0,h=b-y);var screen=RenderState2D.worldClipRect;if(x=Math.max(x,screen.x),y=Math.max(y,screen.y),w=Math.min(r,screen.right)-x,h=Math.min(b,screen.bottom)-y,w<1||h<1)return!1;var worldScissorTest=RenderState2D.worldScissorTest;return this.screenRect.copyFrom(screen),screen.x=x,screen.y=y,screen.width=w,screen.height=h,RenderState2D.worldScissorTest=!0,y=RenderState2D.height-y-h,WebGL.mainContext.scissor(x,y,w,h),WebGL.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),worldScissorTest?(y=RenderState2D.height-this.screenRect.y-this.screenRect.height,WebGL.mainContext.scissor(this.screenRect.x,y,this.screenRect.width,this.screenRect.height),WebGL.mainContext.enable(3089)):(WebGL.mainContext.disable(3089),RenderState2D.worldScissorTest=!1),screen.copyFrom(this.screenRect),!0},__proto._scissorWithTagart=function(x,y,w,h){if(w<1||h<1)return!1;var r=x+w,b=y+h;x<0&&(x=0,w=r-x),y<0&&(y=0,h=b-y);var screen=RenderState2D.worldClipRect;if(x=Math.max(x,screen.x),y=Math.max(y,screen.y),w=Math.min(r,screen.right)-x,h=Math.min(b,screen.bottom)-y,w<1||h<1)return!1;var worldScissorTest=RenderState2D.worldScissorTest;return this.screenRect.copyFrom(screen),RenderState2D.worldScissorTest=!0,screen.x=x,screen.y=y,screen.width=w,screen.height=h,y=RenderState2D.height-y-h,WebGL.mainContext.scissor(x,y,w,h),WebGL.mainContext.enable(3089),this.context.submitElement(this.submitIndex,this.submitIndex+this.submitLength),worldScissorTest?(y=RenderState2D.height-this.screenRect.y-this.screenRect.height,WebGL.mainContext.scissor(this.screenRect.x,y,this.screenRect.width,this.screenRect.height),WebGL.mainContext.enable(3089)):(WebGL.mainContext.disable(3089),RenderState2D.worldScissorTest=!1),screen.copyFrom(this.screenRect),!0},__proto.renderSubmit=function(){return this.submitLength=Math.min(this.context._submits._length-1,this.submitLength),this.submitLength<1||this.clipRect.width<1||this.clipRect.height<1?this.submitLength+1:(this.context._targets?this._scissorWithTagart(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height):this._scissor(this.clipRect.x,this.clipRect.y,this.clipRect.width,this.clipRect.height),this.submitLength+1)},__proto.getRenderType=function(){return 0},__proto.releaseRender=function(){var cache=SubmitScissor._cache;cache[cache._length++]=this,this.context=null},SubmitScissor.create=function(context){var o=SubmitScissor._cache._length?SubmitScissor._cache[--SubmitScissor._cache._length]:new SubmitScissor;return o.context=context,o},SubmitScissor._cache=(SubmitScissor._cache=[],SubmitScissor._cache._length=0,SubmitScissor._cache),SubmitScissor}(),SubmitStencil=function(){function SubmitStencil(){this.step=0,this.blendMode=null,this.level=0}__class(SubmitStencil,"laya.webgl.submit.SubmitStencil");var __proto=SubmitStencil.prototype;return Laya.imps(__proto,{"laya.webgl.submit.ISubmit":!0}),__proto.renderSubmit=function(){switch(this.step){case 1:this.do1();break;case 2:this.do2();break;case 3:this.do3();break;case 4:this.do4();break;case 5:this.do5();break;case 6:this.do6()}return 1},__proto.getRenderType=function(){return 0},__proto.releaseRender=function(){var cache=SubmitStencil._cache;cache[cache._length++]=this},__proto.do1=function(){var gl=WebGL.mainContext;gl.enable(2960),gl.clear(1024),gl.colorMask(!1,!1,!1,!1),gl.stencilFunc(514,this.level,255),gl.stencilOp(7680,7680,7682)},__proto.do2=function(){var gl=WebGL.mainContext;gl.stencilFunc(514,this.level+1,255),gl.colorMask(!0,!0,!0,!0),gl.stencilOp(7680,7680,7680)},__proto.do3=function(){var gl=WebGL.mainContext;gl.colorMask(!0,!0,!0,!0),gl.stencilOp(7680,7680,7680),gl.clear(1024),gl.disable(2960)},__proto.do4=function(){var gl=WebGL.mainContext;gl.enable(2960),gl.clear(1024),gl.colorMask(!1,!1,!1,!1),gl.stencilFunc(519,this.level,255),gl.stencilOp(7680,7680,5386)},__proto.do5=function(){var gl=WebGL.mainContext;gl.stencilFunc(514,255,255),gl.colorMask(!0,!0,!0,!0),gl.stencilOp(7680,7680,7680)},__proto.do6=function(){var gl=WebGL.mainContext;BlendMode.targetFns[BlendMode.TOINT[this.blendMode]](gl)},SubmitStencil.create=function(step){var o=SubmitStencil._cache._length?SubmitStencil._cache[--SubmitStencil._cache._length]:new SubmitStencil;return o.step=step,o},SubmitStencil._cache=(SubmitStencil._cache=[],SubmitStencil._cache._length=0,SubmitStencil._cache),SubmitStencil}(),SubmitTarget=function(){function SubmitTarget(){this._renderType=0,this._vb=null,this._ib=null,this._startIdx=0,this._numEle=0,this.shaderValue=null,this.blendType=0,this.proName=null,this.scope=null}__class(SubmitTarget,"laya.webgl.submit.SubmitTarget");var __proto=SubmitTarget.prototype;return Laya.imps(__proto,{"laya.webgl.submit.ISubmit":!0}),__proto.renderSubmit=function(){this._vb.bind_upload(this._ib);var target=this.scope.getValue(this.proName);return target&&(this.shaderValue.texture=target.source,this.shaderValue.strength&&!this.shaderValue.blurInfo&&(this.shaderValue.blurInfo=[target.width,target.height]),this.shaderValue.upload(),this.blend(),Stat.drawCall++,Stat.trianglesFaces+=this._numEle/3,WebGL.mainContext.drawElements(4,this._numEle,5123,this._startIdx)),1},__proto.blend=function(){if(BlendMode.activeBlendFunction!==BlendMode.fns[this.blendType]){var gl=WebGL.mainContext;gl.enable(3042),BlendMode.fns[this.blendType](gl),BlendMode.activeBlendFunction=BlendMode.fns[this.blendType]}},__proto.getRenderType=function(){return 0},__proto.releaseRender=function(){var cache=SubmitTarget._cache;cache[cache._length++]=this},SubmitTarget.create=function(context,ib,vb,pos,sv,proName){var o=SubmitTarget._cache._length?SubmitTarget._cache[--SubmitTarget._cache._length]:new SubmitTarget;return o._ib=ib,o._vb=vb,o.proName=proName,o._startIdx=pos*CONST3D2D.BYTES_PIDX,o._numEle=0,o.blendType=context._nBlendType,o.shaderValue=sv,o.shaderValue.setValue(context._shader2D),o},SubmitTarget._cache=(SubmitTarget._cache=[],SubmitTarget._cache._length=0,SubmitTarget._cache),SubmitTarget}(),CharSegment=function(){function CharSegment(){this._sourceStr=null}__class(CharSegment,"laya.webgl.text.CharSegment");var __proto=CharSegment.prototype;return Laya.imps(__proto,{"laya.webgl.text.ICharSegment":!0}),__proto.textToSpit=function(str){this._sourceStr=str},__proto.getChar=function(i){return this._sourceStr.charAt(i)},__proto.getCharCode=function(i){return this._sourceStr.charCodeAt(i)},__proto.length=function(){return this._sourceStr.length},CharSegment}(),DrawText=function(){function DrawText(){}var CharValue;return __class(DrawText,"laya.webgl.text.DrawText"),DrawText.__init__=function(){DrawText._charsTemp=new Array,DrawText._drawValue=new CharValue,DrawText._charSeg=new CharSegment},DrawText.customCharSeg=function(charseg){DrawText._charSeg=charseg},DrawText.getChar=function(char,id,drawValue){return DrawText._charsCache[id]=WebGLCharImage.createOneChar(char,drawValue)},DrawText._drawSlow=function(save,ctx,txt,words,curMat,font,textAlign,fillColor,borderColor,lineWidth,x,y,sx,sy){var oneChar,htmlWord,drawValue=DrawText._drawValue.value(font,fillColor,borderColor,lineWidth,sx,sy),i=0,n=0,chars=DrawText._charsTemp,width=0,id=NaN;if(words)for(chars.length=words.length,i=0,n=words.length;i<n;i++)id=(htmlWord=words[i]).charNum+drawValue.txtID,chars[i]=oneChar=DrawText._charsCache[id]||DrawText.getChar(htmlWord.char,id,drawValue),oneChar.active();else{txt instanceof laya.utils.WordText?DrawText._charSeg.textToSpit(txt.toString()):DrawText._charSeg.textToSpit(txt);var len=DrawText._charSeg.length();for(chars.length=len,i=0,n=len;i<n;i++)id=DrawText._charSeg.getCharCode(i)+drawValue.txtID,chars[i]=oneChar=DrawText._charsCache[id]||DrawText.getChar(DrawText._charSeg.getChar(i),id,drawValue),oneChar.active(),width+=oneChar.cw}var dx=0;null!==textAlign&&"left"!==textAlign&&(dx=-("center"==textAlign?width/2:width));var texture,value,bdSz=NaN,saveLength=0;if(words)for(i=0,n=chars.length;i<n;i++)(oneChar=chars[i]).isSpace||(htmlWord=words[i],bdSz=oneChar.borderSize,texture=oneChar.texture,ctx._drawText(texture,x+dx+htmlWord.x*sx-bdSz,y+htmlWord.y*sy-bdSz,texture.width,texture.height,curMat,0,0,0,0));else{for(i=0,n=chars.length;i<n;i++)(oneChar=chars[i]).isSpace||(bdSz=oneChar.borderSize,texture=oneChar.texture,ctx._drawText(texture,x+dx-bdSz,y-bdSz,texture.width,texture.height,curMat,0,0,0,0),save&&((value=save[saveLength++])||(value=save[saveLength-1]=[]),value[0]=texture,value[1]=dx-bdSz,value[2]=-bdSz)),dx+=oneChar.cw;save&&(save.length=saveLength)}},DrawText._drawFast=function(save,ctx,curMat,x,y){for(var texture,value,i=0,n=save.length;i<n;i++)(texture=(value=save[i])[0]).active(),ctx._drawText(texture,x+value[1],y+value[2],texture.width,texture.height,curMat,0,0,0,0)},DrawText.drawText=function(ctx,txt,words,curMat,font,textAlign,fillColor,borderColor,lineWidth,x,y){if(!(txt&&0===txt.length||words&&0===words.length)){var sx=curMat.a,sy=curMat.d;(0!==curMat.b||0!==curMat.c)&&(sx=sy=1);var scale=1!==sx||1!==sy;if(scale&&Laya.stage.transform){var t=Laya.stage.transform;scale=t.a===sx&&t.d===sy}else scale=!1;if(scale?((curMat=curMat.copyTo(WebGLContext2D._tmpMatrix)).scale(1/sx,1/sy),curMat._checkTransform(),x*=sx,y*=sy):sx=sy=1,words)DrawText._drawSlow(null,ctx,txt,words,curMat,font,textAlign,fillColor,borderColor,lineWidth,x,y,sx,sy);else{if(null===txt.toUpperCase){var idNum=sx+1e5*sy,myCache=txt;return void(myCache.changed||myCache.id!==idNum?(myCache.id=idNum,myCache.changed=!1,DrawText._drawSlow(myCache.save,ctx,txt,words,curMat,font,textAlign,fillColor,borderColor,lineWidth,x,y,sx,sy)):DrawText._drawFast(myCache.save,ctx,curMat,x,y))}var id=txt+font.toString()+fillColor+borderColor+lineWidth+sx+sy+textAlign,cache=DrawText._textsCache[id];cache?DrawText._drawFast(cache,ctx,curMat,x,y):(DrawText._textsCache.__length||(DrawText._textsCache.__length=0),DrawText._textsCache.__length>Config.WebGLTextCacheCount&&(DrawText._textsCache={},DrawText._textsCache.__length=0,DrawText._curPoolIndex=0),DrawText._textCachesPool[DrawText._curPoolIndex]?(cache=DrawText._textsCache[id]=DrawText._textCachesPool[DrawText._curPoolIndex],cache.length=0):DrawText._textCachesPool[DrawText._curPoolIndex]=cache=DrawText._textsCache[id]=[],DrawText._textsCache.__length++,DrawText._curPoolIndex++,DrawText._drawSlow(cache,ctx,txt,words,curMat,font,textAlign,fillColor,borderColor,lineWidth,x,y,sx,sy))}}},DrawText._charsTemp=null,DrawText._textCachesPool=[],DrawText._curPoolIndex=0,DrawText._charsCache={},DrawText._textsCache={},DrawText._drawValue=null,DrawText.d=[],DrawText._charSeg=null,DrawText.__init$=function(){CharValue=function(){function CharValue(){}return __class(CharValue,""),CharValue.prototype.value=function(font,fillColor,borderColor,lineWidth,scaleX,scaleY){this.font=font,this.fillColor=fillColor,this.borderColor=borderColor,this.lineWidth=lineWidth,this.scaleX=scaleX,this.scaleY=scaleY;var key=font.toString()+scaleX+scaleY+lineWidth+fillColor+borderColor;return this.txtID=CharValue._keymap[key],this.txtID||(this.txtID=1e-7*++CharValue._keymapCount,CharValue._keymap[key]=this.txtID),this},CharValue.clear=function(){CharValue._keymap={},CharValue._keymapCount=1},CharValue._keymap={},CharValue._keymapCount=1,CharValue}()},DrawText}(),FontInContext=function(){function FontInContext(font){this._index=0,this._size=14,this._italic=-2,this.setFont(font||"14px Arial")}__class(FontInContext,"laya.webgl.text.FontInContext");var __proto=FontInContext.prototype;return __proto.setFont=function(value){this._words=value.split(" ");for(var i=0,n=this._words.length;i<n;i++)if(this._words[i].indexOf("px")>0){this._index=i;break}this._size=parseInt(this._words[this._index]),this._text=null,this._italic=-2},__proto.getItalic=function(){return-2===this._italic&&(this._italic=this.hasType("italic")),this._italic},__proto.hasType=function(name){for(var i=0,n=this._words.length;i<n;i++)if(this._words[i]===name)return i;return-1},__proto.removeType=function(name){for(var i=0,n=this._words.length;i<n;i++)if(this._words[i]===name){this._words.splice(i,1),this._index>i&&this._index--;break}this._text=null,this._italic=-2},__proto.copyTo=function(dec){return dec._text=this._text,dec._size=this._size,dec._index=this._index,dec._words=this._words.slice(),dec._italic=-2,dec},__proto.toString=function(){return this._text?this._text:this._text=this._words.join(" ")},__getset(0,__proto,"size",function(){return this._size},function(value){this._size=value,this._words[this._index]=value+"px",this._text=null}),FontInContext.create=function(font){var r=FontInContext._cache[font];return r||(r=FontInContext._cache[font]=new FontInContext(font))},FontInContext.EMPTY=new FontInContext,FontInContext._cache={},FontInContext}(),CONST3D2D=function(){function CONST3D2D(){}return __class(CONST3D2D,"laya.webgl.utils.CONST3D2D"),CONST3D2D.defaultMatrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],CONST3D2D.defaultMinusYMatrix4=[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],CONST3D2D.uniformMatrix3=[1,0,0,0,0,1,0,0,0,0,1,0],CONST3D2D._TMPARRAY=[],CONST3D2D._OFFSETX=0,CONST3D2D._OFFSETY=0,__static(CONST3D2D,["BYTES_PE",function(){return this.BYTES_PE=Float32Array.BYTES_PER_ELEMENT},"BYTES_PIDX",function(){return this.BYTES_PIDX=Uint16Array.BYTES_PER_ELEMENT}]),CONST3D2D}(),GlUtils=function(){function GlUtils(){}return __class(GlUtils,"laya.webgl.utils.GlUtils"),GlUtils.make2DProjection=function(width,height,depth){return[2/width,0,0,0,0,-2/height,0,0,0,0,2/depth,0,-1,1,0,1]},GlUtils.fillIBQuadrangle=function(buffer,count){if(count>65535/4)throw Error("IBQuadrangle count:"+count+" must<:"+Math.floor(65535/4));count=Math.floor(count),buffer._resizeBuffer(6*(count+1)*2,!1),buffer.byteLength=buffer.bufferLength;for(var bufferData=buffer.getUint16Array(),idx=0,i=0;i<count;i++)bufferData[idx++]=4*i,bufferData[idx++]=4*i+2,bufferData[idx++]=4*i+1,bufferData[idx++]=4*i,bufferData[idx++]=4*i+3,bufferData[idx++]=4*i+2;return buffer.setNeedUpload(),!0},GlUtils.expandIBQuadrangle=function(buffer,count){buffer.bufferLength>=6*count*2||GlUtils.fillIBQuadrangle(buffer,count)},GlUtils.mathCeilPowerOfTwo=function(value){return value--,value|=value>>1,value|=value>>2,value|=value>>4,value|=value>>8,value|=value>>16,++value},GlUtils.fillQuadrangleImgVb=function(vb,x,y,point4,uv,m,_x,_y){"use strict";var vpos=16+(vb._byteLength>>2);vb.byteLength=vpos<<2;var vbdata=vb.getFloat32Array();vbdata[(vpos-=16)+2]=uv[0],vbdata[vpos+3]=uv[1],vbdata[vpos+6]=uv[2],vbdata[vpos+7]=uv[3],vbdata[vpos+10]=uv[4],vbdata[vpos+11]=uv[5],vbdata[vpos+14]=uv[6],vbdata[vpos+15]=uv[7];var a=m.a,b=m.b,c=m.c,d=m.d;if(1!==a||0!==b||0!==c||1!==d){m.bTransform=!0;var tx=m.tx+_x,ty=m.ty+_y;vbdata[vpos]=(point4[0]+x)*a+(point4[1]+y)*c+tx,vbdata[vpos+1]=(point4[0]+x)*b+(point4[1]+y)*d+ty,vbdata[vpos+4]=(point4[2]+x)*a+(point4[3]+y)*c+tx,vbdata[vpos+5]=(point4[2]+x)*b+(point4[3]+y)*d+ty,vbdata[vpos+8]=(point4[4]+x)*a+(point4[5]+y)*c+tx,vbdata[vpos+9]=(point4[4]+x)*b+(point4[5]+y)*d+ty,vbdata[vpos+12]=(point4[6]+x)*a+(point4[7]+y)*c+tx,vbdata[vpos+13]=(point4[6]+x)*b+(point4[7]+y)*d+ty}else m.bTransform=!1,x+=m.tx+_x,y+=m.ty+_y,vbdata[vpos]=x+point4[0],vbdata[vpos+1]=y+point4[1],vbdata[vpos+4]=x+point4[2],vbdata[vpos+5]=y+point4[3],vbdata[vpos+8]=x+point4[4],vbdata[vpos+9]=y+point4[5],vbdata[vpos+12]=x+point4[6],vbdata[vpos+13]=y+point4[7];return vb._upload=!0,!0},GlUtils.fillTranglesVB=function(vb,x,y,points,m,_x,_y){"use strict";var vpos=(vb._byteLength>>2)+points.length;vb.byteLength=vpos<<2;var vbdata=vb.getFloat32Array();vpos-=points.length;for(var len=points.length,a=m.a,b=m.b,c=m.c,d=m.d,i=0;i<len;i+=4)if(vbdata[vpos+i+2]=points[i+2],vbdata[vpos+i+3]=points[i+3],1!==a||0!==b||0!==c||1!==d){m.bTransform=!0;var tx=m.tx+_x,ty=m.ty+_y;vbdata[vpos+i]=(points[i]+x)*a+(points[i+1]+y)*c+tx,vbdata[vpos+i+1]=(points[i]+x)*b+(points[i+1]+y)*d+ty}else m.bTransform=!1,x+=m.tx+_x,y+=m.ty+_y,vbdata[vpos+i]=x+points[i],vbdata[vpos+i+1]=y+points[i+1];return vb._upload=!0,!0},GlUtils.copyPreImgVb=function(vb,dx,dy){var vpos=vb._byteLength>>2;vb.byteLength=vpos+16<<2;for(var vbdata=vb.getFloat32Array(),i=0,ci=vpos-16;i<4;i++)vbdata[vpos]=vbdata[ci]+dx,++ci,vbdata[++vpos]=vbdata[ci]+dy,++ci,vbdata[++vpos]=vbdata[ci],++ci,vbdata[++vpos]=vbdata[ci],++vpos,++ci;vb._upload=!0},GlUtils.fillRectImgVb=function(vb,clip,x,y,width,height,uv,m,_x,_y,dx,dy,round){void 0===round&&(round=!1);var toBx,toBy,toEx,toEy,cBx,cBy,cEx,cEy,w0,h0,tx,ty,finalX,finalY,offsetX,offsetY,mType=1,a=m.a,b=m.b,c=m.c,d=m.d,useClip=clip.width<99999999;if(1!==a||0!==b||0!==c||1!==d?(m.bTransform=!0,0===b&&0===c&&(mType=23,w0=width+x,h0=height+y,toBx=a*x+(tx=m.tx+_x),toEx=a*w0+tx,toBy=d*y+(ty=m.ty+_y),toEy=d*h0+ty)):(mType=23,m.bTransform=!1,toEx=(toBx=x+m.tx+_x)+width,toEy=(toBy=y+m.ty+_y)+height),useClip&&(cBx=clip.x,cBy=clip.y,cEx=clip.width+cBx,cEy=clip.height+cBy),1!==mType&&(Math.min(toBx,toEx)>=cEx||Math.min(toBy,toEy)>=cEy||Math.max(toEx,toBx)<=cBx||Math.max(toEy,toBy)<=cBy))return!1;var vpos=vb._byteLength>>2;vb.byteLength=vpos+16<<2;var vbdata=vb.getFloat32Array();switch(vbdata[vpos+2]=uv[0],vbdata[vpos+3]=uv[1],vbdata[vpos+6]=uv[2],vbdata[vpos+7]=uv[3],vbdata[vpos+10]=uv[4],vbdata[vpos+11]=uv[5],vbdata[vpos+14]=uv[6],vbdata[vpos+15]=uv[7],mType){case 1:tx=m.tx+_x,ty=m.ty+_y;var w1=x,h1=y,aw1=a*w1,ch1=c*h1,dh1=d*h1,bw1=b*w1,aw0=a*(w0=width+x),ch0=c*(h0=height+y),dh0=d*h0,bw0=b*w0;round?(finalX=aw1+ch1+tx,offsetX=Math.round(finalX)-finalX,finalY=dh1+bw1+ty,offsetY=Math.round(finalY)-finalY,vbdata[vpos]=finalX+offsetX,vbdata[vpos+1]=finalY+offsetY,vbdata[vpos+4]=aw0+ch1+tx+offsetX,vbdata[vpos+5]=dh1+bw0+ty+offsetY,vbdata[vpos+8]=aw0+ch0+tx+offsetX,vbdata[vpos+9]=dh0+bw0+ty+offsetY,vbdata[vpos+12]=aw1+ch0+tx+offsetX,vbdata[vpos+13]=dh0+bw1+ty+offsetY):(vbdata[vpos]=aw1+ch1+tx,vbdata[vpos+1]=dh1+bw1+ty,vbdata[vpos+4]=aw0+ch1+tx,vbdata[vpos+5]=dh1+bw0+ty,vbdata[vpos+8]=aw0+ch0+tx,vbdata[vpos+9]=dh0+bw0+ty,vbdata[vpos+12]=aw1+ch0+tx,vbdata[vpos+13]=dh0+bw1+ty);break;case 23:round?(finalX=toBx+dx,offsetX=Math.round(finalX)-finalX,finalY=toBy,offsetY=Math.round(finalY)-finalY,vbdata[vpos]=finalX+offsetX,vbdata[vpos+1]=finalY+offsetY,vbdata[vpos+4]=toEx+dx+offsetX,vbdata[vpos+5]=toBy+offsetY,vbdata[vpos+8]=toEx+offsetX,vbdata[vpos+9]=toEy+offsetY,vbdata[vpos+12]=toBx+offsetX,vbdata[vpos+13]=toEy+offsetY):(vbdata[vpos]=toBx+dx,vbdata[vpos+1]=toBy,vbdata[vpos+4]=toEx+dx,vbdata[vpos+5]=toBy,vbdata[vpos+8]=toEx,vbdata[vpos+9]=toEy,vbdata[vpos+12]=toBx,vbdata[vpos+13]=toEy)}return vb._upload=!0,!0},GlUtils.fillLineVb=function(vb,clip,fx,fy,tx,ty,width,mat){"use strict";var linew=.5*width,data=GlUtils._fillLineArray,perpx=-(fy-ty),perpy=fx-tx,dist=Math.sqrt(perpx*perpx+perpy*perpy);perpx/=dist,perpy/=dist,perpx*=linew,perpy*=linew,data[0]=fx-perpx,data[1]=fy-perpy,data[4]=fx+perpx,data[5]=fy+perpy,data[8]=tx+perpx,data[9]=ty+perpy,data[12]=tx-perpx,data[13]=ty-perpy,mat&&mat.transformPointArray(data,data);var vpos=16+(vb._byteLength>>2);return vb.byteLength=vpos<<2,vb.insertData(data,vpos-16),!0},GlUtils._fillLineArray=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],GlUtils}(),RenderState2D=(function(){function MatirxArray(){}__class(MatirxArray,"laya.webgl.utils.MatirxArray"),MatirxArray.ArrayMul=function(a,b,o){if(a)if(b)for(var ai0=NaN,ai1=NaN,ai2=NaN,ai3=NaN,i=0;i<4;i++)ai0=a[i],ai1=a[i+4],ai2=a[i+8],ai3=a[i+12],o[i]=ai0*b[0]+ai1*b[1]+ai2*b[2]+ai3*b[3],o[i+4]=ai0*b[4]+ai1*b[5]+ai2*b[6]+ai3*b[7],o[i+8]=ai0*b[8]+ai1*b[9]+ai2*b[10]+ai3*b[11],o[i+12]=ai0*b[12]+ai1*b[13]+ai2*b[14]+ai3*b[15];else MatirxArray.copyArray(a,o);else MatirxArray.copyArray(b,o)},MatirxArray.copyArray=function(f,t){if(f&&t)for(var i=0;i<f.length;i++)t[i]=f[i]}}(),function(){function RenderState2D(){}return __class(RenderState2D,"laya.webgl.utils.RenderState2D"),RenderState2D.getMatrArray=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},RenderState2D.mat2MatArray=function(mat,matArray){var m=mat,m4=matArray;return m4[0]=m.a,m4[1]=m.b,m4[4]=m.c,m4[5]=m.d,m4[12]=m.tx,m4[13]=m.ty,matArray},RenderState2D.restoreTempArray=function(){RenderState2D.TEMPMAT4_ARRAY[0]=1,RenderState2D.TEMPMAT4_ARRAY[1]=0,RenderState2D.TEMPMAT4_ARRAY[4]=0,RenderState2D.TEMPMAT4_ARRAY[5]=1,RenderState2D.TEMPMAT4_ARRAY[12]=0,RenderState2D.TEMPMAT4_ARRAY[13]=0},RenderState2D.clear=function(){RenderState2D.worldScissorTest=!1,RenderState2D.worldShaderDefines=null,RenderState2D.worldFilters=null,RenderState2D.worldAlpha=1,RenderState2D.worldClipRect.x=RenderState2D.worldClipRect.y=0,RenderState2D.worldClipRect.width=RenderState2D.width,RenderState2D.worldClipRect.height=RenderState2D.height,RenderState2D.curRenderTarget=null},RenderState2D._MAXSIZE=99999999,RenderState2D.EMPTYMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],RenderState2D.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],RenderState2D.worldMatrix4=RenderState2D.TEMPMAT4_ARRAY,RenderState2D.worldAlpha=1,RenderState2D.worldScissorTest=!1,RenderState2D.worldFilters=null,RenderState2D.worldShaderDefines=null,RenderState2D.worldClipRect=new Rectangle(0,0,99999999,99999999),RenderState2D.curRenderTarget=null,RenderState2D.width=0,RenderState2D.height=0,__static(RenderState2D,["worldMatrix",function(){return this.worldMatrix=new Matrix}]),RenderState2D}()),ShaderCompile=function(){function ShaderCompile(name,vs,ps,nameMap,includeFiles){function split(str){for(var words=str.split(" "),out=[],i=0;i<words.length;i++)words[i].length>0&&out.push(words[i]);return out}function c(script){var words,condition,i=0,n=0,ofs=0,top=new ShaderScriptBlock(0,null,null,null),parent=top,lines=script.split("\n");for(i=0,n=lines.length;i<n;i++){var line=lines[i];if(line.indexOf("#ifdef")>=0)words=split(line),parent=new ShaderScriptBlock(1,words[1],"",parent);else if(line.indexOf("#else")>=0)condition=parent.condition,(parent=new ShaderScriptBlock(2,null,"",parent.parent)).condition=condition;else if(line.indexOf("#endif")>=0)parent=parent.parent;else if(line.indexOf("#include")>=0){var fname=(words=split(line))[1],chr=fname.charAt(0);'"'!==chr&&"'"!==chr||(ofs=(fname=fname.substr(1,fname.length-2)).lastIndexOf(chr))>0&&(fname=fname.substr(0,ofs));var str=(ofs=words[0].indexOf("?"))>0?words[0].substr(ofs+1):words[0];new ShaderScriptBlock(1,str,includeFiles[fname],parent)}else parent.childs.length>0&&0===parent.childs[parent.childs.length-1].type?parent.childs[parent.childs.length-1].text+="\n"+line:new ShaderScriptBlock(0,null,line,parent)}return top}this._VSTXT=vs,this._PSTXT=ps,this._VS=c(vs),this._PS=c(ps),this._nameMap=nameMap}var ShaderScriptBlock;return __class(ShaderCompile,"laya.webgl.utils.ShaderCompile"),ShaderCompile.prototype.createShader=function(define,shaderName,createShader){var defMap={},defineStr="";if(define)for(var i in define)defineStr+="#define "+i+"\n",defMap[i]=!0;var vs=this._VS.toscript(defMap,[]),ps=this._PS.toscript(defMap,[]);return(createShader||Shader.create)(defineStr+vs.join("\n"),defineStr+ps.join("\n"),shaderName,this._nameMap)},ShaderCompile.IFDEF_NO=0,ShaderCompile.IFDEF_YES=1,ShaderCompile.IFDEF_ELSE=2,ShaderCompile.__init$=function(){ShaderScriptBlock=function(){function ShaderScriptBlock(type,condition,text,parent){if(this.childs=new Array,this.type=type,this.text=text,this.parent=parent,parent&&parent.childs.push(this),condition){for(var newcondition="",preIsParam=!1,isParam=!1,i=0,n=condition.length;i<n;i++){var c=condition.charAt(i);preIsParam!=(isParam="!&|() \t".indexOf(c)<0)&&(isParam&&(newcondition+="this."),preIsParam=isParam),newcondition+=c}this.condition=RunDriver.createShaderCondition(newcondition)}}return __class(ShaderScriptBlock,""),ShaderScriptBlock.prototype.toscript=function(def,out){if(0===this.type&&this.text&&out.push(this.text),this.childs.length<1&&!this.text)return out;if(0!==this.type){var ifdef=!!this.condition.call(def);if(2===this.type&&(ifdef=!ifdef),!ifdef)return out;this.text&&out.push(this.text)}return this.childs.length>0&&this.childs.forEach(function(o,index,arr){o.toscript(def,out)}),out},ShaderScriptBlock}()},ShaderCompile}(),WebGL=function(){function WebGL(){}return __class(WebGL,"laya.webgl.WebGL"),WebGL._arrayBufferSlice=function(){for(var _this=this,sz=_this.length,dec=new ArrayBuffer(_this.length),i=0;i<sz;i++)dec[i]=_this[i];return dec},WebGL._uint8ArraySlice=function(){for(var _this=this,sz=_this.length,dec=new Uint8Array(_this.length),i=0;i<sz;i++)dec[i]=_this[i];return dec},WebGL._float32ArraySlice=function(){for(var _this=this,sz=_this.length,dec=new Float32Array(_this.length),i=0;i<sz;i++)dec[i]=_this[i];return dec},WebGL._uint16ArraySlice=function(__arg){var dec,arg=arguments,_this=this,sz=0,i=0;if(0===arg.length)for(sz=_this.length,dec=new Uint16Array(sz),i=0;i<sz;i++)dec[i]=_this[i];else if(2===arg.length){var start=arg[0],end=arg[1];if(end>start)for(sz=end-start,dec=new Uint16Array(sz),i=start;i<end;i++)dec[i-start]=_this[i];else dec=new Uint16Array(0)}return dec},WebGL.expandContext=function(){var from=Context.prototype,to=CanvasRenderingContext2D.prototype;to.fillTrangles=from.fillTrangles,Buffer2D.__int__(null),to.setIBVB=function(x,y,ib,vb,numElement,mat,shader,shaderValues,startIndex,offset){void 0===startIndex&&(startIndex=0),void 0===offset&&(offset=0),null===ib&&(this._ib=this._ib||IndexBuffer2D.QuadrangleIB,ib=this._ib,GlUtils.expandIBQuadrangle(ib,vb.byteLength/64+8)),this._setIBVB(x,y,ib,vb,numElement,mat,shader,shaderValues,startIndex,offset)},to.fillTrangles=function(tex,x,y,points,m){this._curMat=this._curMat||Matrix.create(),this._vb=this._vb||VertexBuffer2D.create(),this._ib||(this._ib=IndexBuffer2D.create(),GlUtils.fillIBQuadrangle(this._ib,length/4));var vb=this._vb,length=points.length>>4;GlUtils.fillTranglesVB(vb,x,y,points,m||this._curMat,0,0),GlUtils.expandIBQuadrangle(this._ib,vb.byteLength/64+8);var shaderValues=new Value2D(1,0);shaderValues.textureHost=tex;var sd=new Shader2X("attribute vec2 position; attribute vec2 texcoord; uniform vec2 size; uniform mat4 mmat; varying vec2 v_texcoord; void main() { vec4 p=vec4(position.xy,0.0,1.0);vec4 pos=mmat*p; gl_Position =vec4((pos.x/size.x-0.5)*2.0,(0.5-pos.y/size.y)*2.0,pos.z,1.0); v_texcoord = texcoord; }","precision mediump float; varying vec2 v_texcoord; uniform sampler2D texture; void main() {vec4 color= texture2D(texture, v_texcoord); color.a*=1.0; gl_FragColor= color;}");vb._vertType=3,this._setIBVB(x,y,this._ib,vb,6*length,m,sd,shaderValues,0,0)}},WebGL.enable=function(){if(Render.isConchApp&&!Render.isConchWebGL)return RunDriver.skinAniSprite=function(){return new SkinMesh},WebGL.expandContext(),!1;if(!WebGL.isWebGLSupported())return!1;if(Render.isWebGL)return!0;HTMLImage.create=function(src,def){return new WebGLImage(src,def)},Render.WebGL=WebGL,Render.isWebGL=!0,DrawText.__init__(),RunDriver.createRenderSprite=function(type,next){return new RenderSprite3D(type,next)},RunDriver.createWebGLContext2D=function(c){return new WebGLContext2D(c)},RunDriver.changeWebGLSize=function(width,height){laya.webgl.WebGL.onStageResize(width,height)},RunDriver.createGraphics=function(){return new GraphicsGL};var action=RunDriver.createFilterAction;return RunDriver.createFilterAction=action||function(type){return new ColorFilterActionGL},RunDriver.clear=function(color){if(RenderState2D.worldScissorTest&&laya.webgl.WebGL.mainContext.disable(3089),null==color)Render.context.ctx.clearBG(0,0,0,0);else{var c=Color.create(color)._color;Render.context.ctx.clearBG(c[0],c[1],c[2],c[3])}RenderState2D.clear()},RunDriver.addToAtlas=function(texture,force){void 0===force&&(force=!1);var bitmap=texture.bitmap;Render.optimizeTextureMemory(texture.url,texture)?Laya.__typeof(bitmap,"laya.webgl.resource.IMergeAtlasBitmap")&&bitmap.allowMerageInAtlas&&bitmap.on("recovered",texture,texture.addTextureToAtlas):bitmap.enableMerageInAtlas=!1},AtlasResourceManager._enable(),RunDriver.beginFlush=function(){for(var atlasResourceManager=AtlasResourceManager.instance,count=atlasResourceManager.getAtlaserCount(),i=0;i<count;i++){var atlerCanvas=atlasResourceManager.getAtlaserByIndex(i).texture;atlerCanvas._flashCacheImageNeedFlush&&RunDriver.flashFlushImage(atlerCanvas)}},RunDriver.drawToCanvas=function(sprite,_renderType,canvasWidth,canvasHeight,offsetX,offsetY){var renderTarget=new RenderTarget2D(canvasWidth,canvasHeight,6408,5121,0,!1);renderTarget.start(),renderTarget.clear(1,0,0,1),sprite.render(Render.context,-offsetX,RenderState2D.height-canvasHeight-offsetY),Render.context.flush(),renderTarget.end();var pixels=renderTarget.getData(0,0,renderTarget.width,renderTarget.height);return renderTarget.dispose(),pixels},RunDriver.createFilterAction=function(type){var action;switch(type){case 32:action=new ColorFilterActionGL}return action},RunDriver.addTextureToAtlas=function(texture){texture._uvID++,AtlasResourceManager._atlasRestore++,texture.bitmap.enableMerageInAtlas&&AtlasResourceManager.instance.addToAtlas(texture)},RunDriver.getTexturePixels=function(value,x,y,width,height){Render.context.ctx.clear();var tSprite=new Sprite;tSprite.graphics.drawTexture(value,-x,-y);var tRenderTarget=RenderTarget2D.create(width,height);tRenderTarget.start(),tRenderTarget.clear(0,0,0,0),tSprite.render(Render.context,0,0),Render.context.ctx.flush(),tRenderTarget.end();for(var tUint8Array=tRenderTarget.getData(0,0,width,height),tArray=[],tIndex=0,i=height-1;i>=0;i--)for(var j=0;j<width;j++)tIndex=4*(i*width+j),tArray.push(tUint8Array[tIndex]),tArray.push(tUint8Array[tIndex+1]),tArray.push(tUint8Array[tIndex+2]),tArray.push(tUint8Array[tIndex+3]);return tArray},RunDriver.skinAniSprite=function(){return new SkinMesh},Filter._filterStart=function(scope,sprite,context,x,y){var b=scope.getValue("bounds"),source=RenderTarget2D.create(b.width,b.height);if(source.start(),source.clear(0,0,0,0),scope.addValue("src",source),scope.addValue("ScissorTest",RenderState2D.worldScissorTest),RenderState2D.worldScissorTest){var tClilpRect=new Rectangle;tClilpRect.copyFrom(context.ctx._clipRect),scope.addValue("clipRect",tClilpRect),RenderState2D.worldScissorTest=!1,laya.webgl.WebGL.mainContext.disable(3089)}},Filter._filterEnd=function(scope,sprite,context,x,y){var b=scope.getValue("bounds");scope.getValue("src").end();var out=RenderTarget2D.create(b.width,b.height);out.start(),out.clear(0,0,0,0),scope.addValue("out",out),sprite._set$P("_filterCache",out),sprite._set$P("_isHaveGlowFilter",scope.getValue("_isHaveGlowFilter"))},Filter._EndTarget=function(scope,context){if(scope.getValue("src").recycle(),scope.getValue("out").end(),scope.getValue("ScissorTest")){RenderState2D.worldScissorTest=!0,laya.webgl.WebGL.mainContext.enable(3089),context.ctx.save();var tClipRect=scope.getValue("clipRect");context.ctx.clipRect(tClipRect.x,tClipRect.y,tClipRect.width,tClipRect.height)}},Filter._useSrc=function(scope){var source=scope.getValue("out");source.end(),(source=scope.getValue("src")).start(),source.clear(0,0,0,0)},Filter._endSrc=function(scope){scope.getValue("src").end()},Filter._useOut=function(scope){var source=scope.getValue("src");source.end(),(source=scope.getValue("out")).start(),source.clear(0,0,0,0)},Filter._endOut=function(scope){scope.getValue("out").end()},Filter._recycleScope=function(scope){scope.recycle()},Filter._filter=function(sprite,context,x,y){var next=this._next;if(next){var filters=sprite.filters,len=filters.length;if(1==len&&32==filters[0].type)return context.ctx.save(),context.ctx.setFilters([filters[0]]),next._fun.call(next,sprite,context,x,y),void context.ctx.restore();var shaderValue,b,scope=SubmitCMDScope.create(),p=Point.TEMP,tMatrix=context.ctx._getTransformMatrix(),mat=Matrix.create();tMatrix.copyTo(mat);var tPadding=0,tHalfPadding=0,tIsHaveGlowFilter=!1,out=sprite._$P._filterCache?sprite._$P._filterCache:null;if(!out||sprite._repaint){tIsHaveGlowFilter=sprite._isHaveGlowFilter(),scope.addValue("_isHaveGlowFilter",tIsHaveGlowFilter),tIsHaveGlowFilter&&(tPadding=50,tHalfPadding=25),(b=new Rectangle).copyFrom(sprite.getSelfBounds()),b.x+=sprite.x,b.y+=sprite.y,b.x-=sprite.pivotX+4,b.y-=sprite.pivotY+4;var tSX=b.x,tSY=b.y;if(b.width+=tPadding+8,b.height+=tPadding+8,p.x=b.x*mat.a+b.y*mat.c,p.y=b.y*mat.d+b.x*mat.b,b.x=p.x,b.y=p.y,p.x=b.width*mat.a+b.height*mat.c,p.y=b.height*mat.d+b.width*mat.b,b.width=p.x,b.height=p.y,b.width<=0||b.height<=0)return;out&&out.recycle(),scope.addValue("bounds",b);var submit=SubmitCMD.create([scope,sprite,context,0,0],Filter._filterStart);context.addRenderObject(submit),context.ctx._renderKey=0,context.ctx._shader2D.glTexture=null;var tX=sprite.x-tSX+tHalfPadding,tY=sprite.y-tSY+tHalfPadding;next._fun.call(next,sprite,context,tX,tY),submit=SubmitCMD.create([scope,sprite,context,0,0],Filter._filterEnd),context.addRenderObject(submit);for(var i=0;i<len;i++)0!=i&&(submit=SubmitCMD.create([scope],Filter._useSrc),context.addRenderObject(submit),shaderValue=Value2D.create(1,0),Matrix.TEMP.identity(),context.ctx.drawTarget(scope,0,0,b.width,b.height,Matrix.TEMP,"out",shaderValue,null,BlendMode.TOINT.overlay),submit=SubmitCMD.create([scope],Filter._useOut),context.addRenderObject(submit)),filters[i].action.apply3d(scope,sprite,context,0,0);submit=SubmitCMD.create([scope,context],Filter._EndTarget),context.addRenderObject(submit)}else{if((tIsHaveGlowFilter=!!sprite._$P._isHaveGlowFilter&&sprite._$P._isHaveGlowFilter)&&(tPadding=50,tHalfPadding=25),(b=sprite.getBounds()).width<=0||b.height<=0)return;b.width+=tPadding,b.height+=tPadding,p.x=b.x*mat.a+b.y*mat.c,p.y=b.y*mat.d+b.x*mat.b,b.x=p.x,b.y=p.y,p.x=b.width*mat.a+b.height*mat.c,p.y=b.height*mat.d+b.width*mat.b,b.width=p.x,b.height=p.y,scope.addValue("out",out)}x=x-tHalfPadding-sprite.x,y=y-tHalfPadding-sprite.y,p.setTo(x,y),mat.transformPoint(p),x=p.x+b.x,y=p.y+b.y,shaderValue=Value2D.create(1,0),Matrix.TEMP.identity(),context.ctx.drawTarget(scope,x,y,b.width,b.height,Matrix.TEMP,"out",shaderValue,null,BlendMode.TOINT.overlay),submit=SubmitCMD.create([scope],Filter._recycleScope),context.addRenderObject(submit),mat.destroy()}},Float32Array.prototype.slice||(Float32Array.prototype.slice=WebGL._float32ArraySlice),Uint16Array.prototype.slice||(Uint16Array.prototype.slice=WebGL._uint16ArraySlice),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=WebGL._uint8ArraySlice),ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=WebGL._arrayBufferSlice),!0},WebGL.isWebGLSupported=function(){for(var gl,canvas=Browser.createElement("canvas"),names=["webgl","experimental-webgl","webkit-3d","moz-webgl"],i=0;i<names.length;i++){try{gl=canvas.getContext(names[i])}catch(e){}if(gl)return names[i]}return null},WebGL.onStageResize=function(width,height){null!=WebGL.mainContext&&(WebGL.mainContext.viewport(0,0,width,height),RenderState2D.width=width,RenderState2D.height=height)},WebGL.isExperimentalWebgl=function(){return WebGL._isExperimentalWebgl},WebGL.addRenderFinish=function(){(WebGL._isExperimentalWebgl||Render.isFlash)&&(RunDriver.endFinish=function(){Render.context.ctx.finish()})},WebGL.removeRenderFinish=function(){WebGL._isExperimentalWebgl&&(RunDriver.endFinish=function(){})},WebGL.onInvalidGLRes=function(){AtlasResourceManager.instance.freeAll(),ResourceManager.releaseContentManagers(!0),WebGL.doNodeRepaint(Laya.stage),WebGL.mainContext.viewport(0,0,RenderState2D.width,RenderState2D.height),Laya.stage.event("devicelost")},WebGL.doNodeRepaint=function(sprite){0==sprite.numChildren&&sprite.repaint();for(var i=0;i<sprite.numChildren;i++)WebGL.doNodeRepaint(sprite.getChildAt(i))},WebGL.init=function(canvas,width,height){WebGL.mainCanvas=canvas,HTMLCanvas._createContext=function(canvas){return new WebGLContext2D(canvas)};var webGLName=WebGL.isWebGLSupported(),gl=WebGL.mainContext=RunDriver.newWebGLContext(canvas,webGLName);WebGL._isExperimentalWebgl="webgl"!=webGLName&&(Browser.onWeiXin||Browser.onMQQBrowser),WebGL.frameShaderHighPrecision=!1;try{laya.webgl.WebGL.mainContext.getShaderPrecisionFormat(35632,36338).precision?WebGL.frameShaderHighPrecision=!0:WebGL.frameShaderHighPrecision=!1}catch(e){}if(Browser.window.SetupWebglContext&&Browser.window.SetupWebglContext(gl),gl.deleteTexture1=gl.deleteTexture,gl.deleteTexture=function(t){t==WebGLContext.curBindTexValue&&(WebGLContext.curBindTexValue=null),gl.deleteTexture1(t)},WebGL.onStageResize(width,height),null==WebGL.mainContext)throw new Error("webGL getContext err!");System.__init__(),AtlasResourceManager.__init__(),ShaderDefines2D.__init__(),Submit.__init__(),WebGLContext2D.__init__(),Value2D.__init__(),Shader2D.__init__(),Buffer2D.__int__(gl),BlendMode._init_(gl),Render.isConchApp&&conch.setOnInvalidGLRes(WebGL.onInvalidGLRes)},WebGL.mainCanvas=null,WebGL.mainContext=null,WebGL.antialias=!0,WebGL.frameShaderHighPrecision=!1,WebGL._bg_null=[0,0,0,0],WebGL._isExperimentalWebgl=!1,WebGL}(),WebGLContext=function(){function WebGLContext(){}return __class(WebGLContext,"laya.webgl.WebGLContext"),WebGLContext.UseProgram=function(program){return WebGLContext._useProgram!==program&&(WebGL.mainContext.useProgram(program),WebGLContext._useProgram=program,!0)},WebGLContext.setDepthTest=function(gl,value){value!==WebGLContext._depthTest&&(WebGLContext._depthTest=value,value?gl.enable(2929):gl.disable(2929))},WebGLContext.setDepthMask=function(gl,value){value!==WebGLContext._depthMask&&(WebGLContext._depthMask=value,gl.depthMask(value))},WebGLContext.setDepthFunc=function(gl,value){value!==WebGLContext._depthFunc&&(WebGLContext._depthFunc=value,gl.depthFunc(value))},WebGLContext.setBlend=function(gl,value){value!==WebGLContext._blend&&(WebGLContext._blend=value,value?gl.enable(3042):gl.disable(3042))},WebGLContext.setBlendFunc=function(gl,sFactor,dFactor){(sFactor!==WebGLContext._sFactor||dFactor!==WebGLContext._dFactor)&&(WebGLContext._sFactor=sFactor,WebGLContext._dFactor=dFactor,gl.blendFunc(sFactor,dFactor))},WebGLContext.setCullFace=function(gl,value){value!==WebGLContext._cullFace&&(WebGLContext._cullFace=value,value?gl.enable(2884):gl.disable(2884))},WebGLContext.setFrontFace=function(gl,value){value!==WebGLContext._frontFace&&(WebGLContext._frontFace=value,gl.frontFace(value))},WebGLContext.bindTexture=function(gl,target,texture){gl.bindTexture(target,texture),WebGLContext.curBindTexTarget=target,WebGLContext.curBindTexValue=texture},WebGLContext.DEPTH_BUFFER_BIT=256,WebGLContext.STENCIL_BUFFER_BIT=1024,WebGLContext.COLOR_BUFFER_BIT=16384,WebGLContext.POINTS=0,WebGLContext.LINES=1,WebGLContext.LINE_LOOP=2,WebGLContext.LINE_STRIP=3,WebGLContext.TRIANGLES=4,WebGLContext.TRIANGLE_STRIP=5,WebGLContext.TRIANGLE_FAN=6,WebGLContext.ZERO=0,WebGLContext.ONE=1,WebGLContext.SRC_COLOR=768,WebGLContext.ONE_MINUS_SRC_COLOR=769,WebGLContext.SRC_ALPHA=770,WebGLContext.ONE_MINUS_SRC_ALPHA=771,WebGLContext.DST_ALPHA=772,WebGLContext.ONE_MINUS_DST_ALPHA=773,WebGLContext.DST_COLOR=774,WebGLContext.ONE_MINUS_DST_COLOR=775,WebGLContext.SRC_ALPHA_SATURATE=776,WebGLContext.FUNC_ADD=32774,WebGLContext.BLEND_EQUATION=32777,WebGLContext.BLEND_EQUATION_RGB=32777,WebGLContext.BLEND_EQUATION_ALPHA=34877,WebGLContext.FUNC_SUBTRACT=32778,WebGLContext.FUNC_REVERSE_SUBTRACT=32779,WebGLContext.BLEND_DST_RGB=32968,WebGLContext.BLEND_SRC_RGB=32969,WebGLContext.BLEND_DST_ALPHA=32970,WebGLContext.BLEND_SRC_ALPHA=32971,WebGLContext.CONSTANT_COLOR=32769,WebGLContext.ONE_MINUS_CONSTANT_COLOR=32770,WebGLContext.CONSTANT_ALPHA=32771,WebGLContext.ONE_MINUS_CONSTANT_ALPHA=32772,WebGLContext.BLEND_COLOR=32773,WebGLContext.ARRAY_BUFFER=34962,WebGLContext.ELEMENT_ARRAY_BUFFER=34963,WebGLContext.ARRAY_BUFFER_BINDING=34964,WebGLContext.ELEMENT_ARRAY_BUFFER_BINDING=34965,WebGLContext.STREAM_DRAW=35040,WebGLContext.STATIC_DRAW=35044,WebGLContext.DYNAMIC_DRAW=35048,WebGLContext.BUFFER_SIZE=34660,WebGLContext.BUFFER_USAGE=34661,WebGLContext.CURRENT_VERTEX_ATTRIB=34342,WebGLContext.FRONT=1028,WebGLContext.BACK=1029,WebGLContext.CULL_FACE=2884,WebGLContext.FRONT_AND_BACK=1032,WebGLContext.BLEND=3042,WebGLContext.DITHER=3024,WebGLContext.STENCIL_TEST=2960,WebGLContext.DEPTH_TEST=2929,WebGLContext.SCISSOR_TEST=3089,WebGLContext.POLYGON_OFFSET_FILL=32823,WebGLContext.SAMPLE_ALPHA_TO_COVERAGE=32926,WebGLContext.SAMPLE_COVERAGE=32928,WebGLContext.NO_ERROR=0,WebGLContext.INVALID_ENUM=1280,WebGLContext.INVALID_VALUE=1281,WebGLContext.INVALID_OPERATION=1282,WebGLContext.OUT_OF_MEMORY=1285,WebGLContext.CW=2304,WebGLContext.CCW=2305,WebGLContext.LINE_WIDTH=2849,WebGLContext.ALIASED_POINT_SIZE_RANGE=33901,WebGLContext.ALIASED_LINE_WIDTH_RANGE=33902,WebGLContext.CULL_FACE_MODE=2885,WebGLContext.FRONT_FACE=2886,WebGLContext.DEPTH_RANGE=2928,WebGLContext.DEPTH_WRITEMASK=2930,WebGLContext.DEPTH_CLEAR_VALUE=2931,WebGLContext.DEPTH_FUNC=2932,WebGLContext.STENCIL_CLEAR_VALUE=2961,WebGLContext.STENCIL_FUNC=2962,WebGLContext.STENCIL_FAIL=2964,WebGLContext.STENCIL_PASS_DEPTH_FAIL=2965,WebGLContext.STENCIL_PASS_DEPTH_PASS=2966,WebGLContext.STENCIL_REF=2967,WebGLContext.STENCIL_VALUE_MASK=2963,WebGLContext.STENCIL_WRITEMASK=2968,WebGLContext.STENCIL_BACK_FUNC=34816,WebGLContext.STENCIL_BACK_FAIL=34817,WebGLContext.STENCIL_BACK_PASS_DEPTH_FAIL=34818,WebGLContext.STENCIL_BACK_PASS_DEPTH_PASS=34819,WebGLContext.STENCIL_BACK_REF=36003,WebGLContext.STENCIL_BACK_VALUE_MASK=36004,WebGLContext.STENCIL_BACK_WRITEMASK=36005,WebGLContext.VIEWPORT=2978,WebGLContext.SCISSOR_BOX=3088,WebGLContext.COLOR_CLEAR_VALUE=3106,WebGLContext.COLOR_WRITEMASK=3107,WebGLContext.UNPACK_ALIGNMENT=3317,WebGLContext.PACK_ALIGNMENT=3333,WebGLContext.MAX_TEXTURE_SIZE=3379,WebGLContext.MAX_VIEWPORT_DIMS=3386,WebGLContext.SUBPIXEL_BITS=3408,WebGLContext.RED_BITS=3410,WebGLContext.GREEN_BITS=3411,WebGLContext.BLUE_BITS=3412,WebGLContext.ALPHA_BITS=3413,WebGLContext.DEPTH_BITS=3414,WebGLContext.STENCIL_BITS=3415,WebGLContext.POLYGON_OFFSET_UNITS=10752,WebGLContext.POLYGON_OFFSET_FACTOR=32824,WebGLContext.TEXTURE_BINDING_2D=32873,WebGLContext.SAMPLE_BUFFERS=32936,WebGLContext.SAMPLES=32937,WebGLContext.SAMPLE_COVERAGE_VALUE=32938,WebGLContext.SAMPLE_COVERAGE_INVERT=32939,WebGLContext.NUM_COMPRESSED_TEXTURE_FORMATS=34466,WebGLContext.COMPRESSED_TEXTURE_FORMATS=34467,WebGLContext.DONT_CARE=4352,WebGLContext.FASTEST=4353,WebGLContext.NICEST=4354,WebGLContext.GENERATE_MIPMAP_HINT=33170,WebGLContext.BYTE=5120,WebGLContext.UNSIGNED_BYTE=5121,WebGLContext.SHORT=5122,WebGLContext.UNSIGNED_SHORT=5123,WebGLContext.INT=5124,WebGLContext.UNSIGNED_INT=5125,WebGLContext.FLOAT=5126,WebGLContext.DEPTH_COMPONENT=6402,WebGLContext.ALPHA=6406,WebGLContext.RGB=6407,WebGLContext.RGBA=6408,WebGLContext.LUMINANCE=6409,WebGLContext.LUMINANCE_ALPHA=6410,WebGLContext.UNSIGNED_SHORT_4_4_4_4=32819,WebGLContext.UNSIGNED_SHORT_5_5_5_1=32820,WebGLContext.UNSIGNED_SHORT_5_6_5=33635,WebGLContext.FRAGMENT_SHADER=35632,WebGLContext.VERTEX_SHADER=35633,WebGLContext.MAX_VERTEX_ATTRIBS=34921,WebGLContext.MAX_VERTEX_UNIFORM_VECTORS=36347,WebGLContext.MAX_VARYING_VECTORS=36348,WebGLContext.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661,WebGLContext.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660,WebGLContext.MAX_TEXTURE_IMAGE_UNITS=34930,WebGLContext.MAX_FRAGMENT_UNIFORM_VECTORS=36349,WebGLContext.SHADER_TYPE=35663,WebGLContext.DELETE_STATUS=35712,WebGLContext.LINK_STATUS=35714,WebGLContext.VALIDATE_STATUS=35715,WebGLContext.ATTACHED_SHADERS=35717,WebGLContext.ACTIVE_UNIFORMS=35718,WebGLContext.ACTIVE_ATTRIBUTES=35721,WebGLContext.SHADING_LANGUAGE_VERSION=35724,WebGLContext.CURRENT_PROGRAM=35725,WebGLContext.NEVER=512,WebGLContext.LESS=513,WebGLContext.EQUAL=514,WebGLContext.LEQUAL=515,WebGLContext.GREATER=516,WebGLContext.NOTEQUAL=517,WebGLContext.GEQUAL=518,WebGLContext.ALWAYS=519,WebGLContext.KEEP=7680,WebGLContext.REPLACE=7681,WebGLContext.INCR=7682,WebGLContext.DECR=7683,WebGLContext.INVERT=5386,WebGLContext.INCR_WRAP=34055,WebGLContext.DECR_WRAP=34056,WebGLContext.VENDOR=7936,WebGLContext.RENDERER=7937,WebGLContext.VERSION=7938,WebGLContext.NEAREST=9728,WebGLContext.LINEAR=9729,WebGLContext.NEAREST_MIPMAP_NEAREST=9984,WebGLContext.LINEAR_MIPMAP_NEAREST=9985,WebGLContext.NEAREST_MIPMAP_LINEAR=9986,WebGLContext.LINEAR_MIPMAP_LINEAR=9987,WebGLContext.TEXTURE_MAG_FILTER=10240,WebGLContext.TEXTURE_MIN_FILTER=10241,WebGLContext.TEXTURE_WRAP_S=10242,WebGLContext.TEXTURE_WRAP_T=10243,WebGLContext.TEXTURE_2D=3553,WebGLContext.TEXTURE=5890,WebGLContext.TEXTURE_CUBE_MAP=34067,WebGLContext.TEXTURE_BINDING_CUBE_MAP=34068,WebGLContext.TEXTURE_CUBE_MAP_POSITIVE_X=34069,WebGLContext.TEXTURE_CUBE_MAP_NEGATIVE_X=34070,WebGLContext.TEXTURE_CUBE_MAP_POSITIVE_Y=34071,WebGLContext.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072,WebGLContext.TEXTURE_CUBE_MAP_POSITIVE_Z=34073,WebGLContext.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074,WebGLContext.MAX_CUBE_MAP_TEXTURE_SIZE=34076,WebGLContext.TEXTURE0=33984,WebGLContext.TEXTURE1=33985,WebGLContext.TEXTURE2=33986,WebGLContext.TEXTURE3=33987,WebGLContext.TEXTURE4=33988,WebGLContext.TEXTURE5=33989,WebGLContext.TEXTURE6=33990,WebGLContext.TEXTURE7=33991,WebGLContext.TEXTURE8=33992,WebGLContext.TEXTURE9=33993,WebGLContext.TEXTURE10=33994,WebGLContext.TEXTURE11=33995,WebGLContext.TEXTURE12=33996,WebGLContext.TEXTURE13=33997,WebGLContext.TEXTURE14=33998,WebGLContext.TEXTURE15=33999,WebGLContext.TEXTURE16=34e3,WebGLContext.TEXTURE17=34001,WebGLContext.TEXTURE18=34002,WebGLContext.TEXTURE19=34003,WebGLContext.TEXTURE20=34004,WebGLContext.TEXTURE21=34005,WebGLContext.TEXTURE22=34006,WebGLContext.TEXTURE23=34007,WebGLContext.TEXTURE24=34008,WebGLContext.TEXTURE25=34009,WebGLContext.TEXTURE26=34010,WebGLContext.TEXTURE27=34011,WebGLContext.TEXTURE28=34012,WebGLContext.TEXTURE29=34013,WebGLContext.TEXTURE30=34014,WebGLContext.TEXTURE31=34015,WebGLContext.ACTIVE_TEXTURE=34016,WebGLContext.REPEAT=10497,WebGLContext.CLAMP_TO_EDGE=33071,WebGLContext.MIRRORED_REPEAT=33648,WebGLContext.FLOAT_VEC2=35664,WebGLContext.FLOAT_VEC3=35665,WebGLContext.FLOAT_VEC4=35666,WebGLContext.INT_VEC2=35667,WebGLContext.INT_VEC3=35668,WebGLContext.INT_VEC4=35669,WebGLContext.BOOL=35670,WebGLContext.BOOL_VEC2=35671,WebGLContext.BOOL_VEC3=35672,WebGLContext.BOOL_VEC4=35673,WebGLContext.FLOAT_MAT2=35674,WebGLContext.FLOAT_MAT3=35675,WebGLContext.FLOAT_MAT4=35676,WebGLContext.SAMPLER_2D=35678,WebGLContext.SAMPLER_CUBE=35680,WebGLContext.VERTEX_ATTRIB_ARRAY_ENABLED=34338,WebGLContext.VERTEX_ATTRIB_ARRAY_SIZE=34339,WebGLContext.VERTEX_ATTRIB_ARRAY_STRIDE=34340,WebGLContext.VERTEX_ATTRIB_ARRAY_TYPE=34341,WebGLContext.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922,WebGLContext.VERTEX_ATTRIB_ARRAY_POINTER=34373,WebGLContext.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975,WebGLContext.COMPILE_STATUS=35713,WebGLContext.LOW_FLOAT=36336,WebGLContext.MEDIUM_FLOAT=36337,WebGLContext.HIGH_FLOAT=36338,WebGLContext.LOW_INT=36339,WebGLContext.MEDIUM_INT=36340,WebGLContext.HIGH_INT=36341,WebGLContext.FRAMEBUFFER=36160,WebGLContext.RENDERBUFFER=36161,WebGLContext.RGBA4=32854,WebGLContext.RGB5_A1=32855,WebGLContext.RGB565=36194,WebGLContext.DEPTH_COMPONENT16=33189,WebGLContext.STENCIL_INDEX=6401,WebGLContext.STENCIL_INDEX8=36168,WebGLContext.DEPTH_STENCIL=34041,WebGLContext.RENDERBUFFER_WIDTH=36162,WebGLContext.RENDERBUFFER_HEIGHT=36163,WebGLContext.RENDERBUFFER_INTERNAL_FORMAT=36164,WebGLContext.RENDERBUFFER_RED_SIZE=36176,WebGLContext.RENDERBUFFER_GREEN_SIZE=36177,WebGLContext.RENDERBUFFER_BLUE_SIZE=36178,WebGLContext.RENDERBUFFER_ALPHA_SIZE=36179,WebGLContext.RENDERBUFFER_DEPTH_SIZE=36180,WebGLContext.RENDERBUFFER_STENCIL_SIZE=36181,WebGLContext.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048,WebGLContext.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049,WebGLContext.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050,WebGLContext.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051,WebGLContext.COLOR_ATTACHMENT0=36064,WebGLContext.DEPTH_ATTACHMENT=36096,WebGLContext.STENCIL_ATTACHMENT=36128,WebGLContext.DEPTH_STENCIL_ATTACHMENT=33306,WebGLContext.NONE=0,WebGLContext.FRAMEBUFFER_COMPLETE=36053,WebGLContext.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054,WebGLContext.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055,WebGLContext.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057,WebGLContext.FRAMEBUFFER_UNSUPPORTED=36061,WebGLContext.FRAMEBUFFER_BINDING=36006,WebGLContext.RENDERBUFFER_BINDING=36007,WebGLContext.MAX_RENDERBUFFER_SIZE=34024,WebGLContext.INVALID_FRAMEBUFFER_OPERATION=1286,WebGLContext.UNPACK_FLIP_Y_WEBGL=37440,WebGLContext.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441,WebGLContext.CONTEXT_LOST_WEBGL=37442,WebGLContext.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443,WebGLContext.BROWSER_DEFAULT_WEBGL=37444,WebGLContext._useProgram=null,WebGLContext._depthTest=!0,WebGLContext._depthMask=!0,WebGLContext._blend=!1,WebGLContext._cullFace=!1,WebGLContext.curBindTexTarget=null,WebGLContext.curBindTexValue=null,__static(WebGLContext,["_depthFunc",function(){return this._depthFunc=513},"_sFactor",function(){return this._sFactor=1},"_dFactor",function(){return this._dFactor=0},"_frontFace",function(){return this._frontFace=2305}]),WebGLContext}(),GraphicsGL=function(_super){function GraphicsGL(){GraphicsGL.__super.call(this)}__class(GraphicsGL,"laya.webgl.display.GraphicsGL",_super);var __proto=GraphicsGL.prototype;return __proto.setShader=function(shader){this._saveToCmd(Render.context._setShader,[shader])},__proto.setIBVB=function(x,y,ib,vb,numElement,shader){this._saveToCmd(Render.context._setIBVB,[x,y,ib,vb,numElement,shader])},__proto.drawParticle=function(x,y,ps){var pt=RunDriver.createParticleTemplate2D(ps);pt.x=x,pt.y=y,this._saveToCmd(Render.context._drawParticle,[pt])},GraphicsGL}(Graphics),WebGLContext2D=function(_super){function WebGLContext2D(c){this._x=0,this._y=0,this._id=++WebGLContext2D._COUNT,this._path=null,this._drawCount=1,this._maxNumEle=0,this._clear=!1,this._isMain=!1,this._atlasResourceChange=0,this._submits=[],this._curSubmit=null,this._ib=null,this._vb=null,this._nBlendType=0,this._saveMark=null,this.mId=-1,this.mHaveKey=!1,this.mHaveLineKey=!1,this.mX=0,this.mY=0,WebGLContext2D.__super.call(this),this._width=99999999,this._height=99999999,this._clipRect=WebGLContext2D.MAXCLIPRECT,this._shader2D=new Shader2D,this.mOutPoint,this._canvas=c,this._curMat=Matrix.create(),Render.isFlash?(this._ib=IndexBuffer2D.create(35044),GlUtils.fillIBQuadrangle(this._ib,16)):this._ib=IndexBuffer2D.QuadrangleIB,this._vb=VertexBuffer2D.create(-1),this._other=ContextParams.DEFAULT,this._save=[SaveMark.Create(this)],this._save.length=10,this.clear()}var ContextParams;__class(WebGLContext2D,"laya.webgl.canvas.WebGLContext2D",_super);var __proto=WebGLContext2D.prototype;return __proto.setIsMainContext=function(){this._isMain=!0},__proto.clearBG=function(r,g,b,a){var gl=WebGL.mainContext;gl.clearColor(r,g,b,a),gl.clear(16640)},__proto._getSubmits=function(){return this._submits},__proto.destroy=function(){this._curMat&&this._curMat.destroy(),this._targets&&this._targets.destroy(),this._vb&&this._vb.releaseResource(),this._ib&&this._ib!=IndexBuffer2D.QuadrangleIB&&this._ib.releaseResource()},__proto.clear=function(){this._vb.clear(),this._targets&&(this._targets.repaint=!0),this._other=ContextParams.DEFAULT,this._clear=!0,this._repaint=!1,this._drawCount=1,this._renderKey=0,this._other.lineWidth=this._shader2D.ALPHA=1,this._nBlendType=0,this._clipRect=WebGLContext2D.MAXCLIPRECT,this._curSubmit=Submit.RENDERBASE,this._shader2D.glTexture=null,this._shader2D.fillStyle=this._shader2D.strokeStyle=DrawStyle.DEFAULT;for(var i=0,n=this._submits._length;i<n;i++)this._submits[i].releaseRender();this._submits._length=0,this._curMat.identity(),this._other.clear(),this._saveMark=this._save[0],this._save._length=1},__proto.size=function(w,h){this._width=w,this._height=h,this._targets&&this._targets.size(w,h),this._canvas.memorySize-=this._canvas.memorySize},__proto._getTransformMatrix=function(){return this._curMat},__proto.translate=function(x,y){0===x&&0===y||(SaveTranslate.save(this),this._curMat.bTransform&&(SaveTransform.save(this),this._curMat.transformPointN(Point.TEMP.setTo(x,y)),x=Point.TEMP.x,y=Point.TEMP.y),this._x+=x,this._y+=y)},__proto.save=function(){this._save[this._save._length++]=SaveMark.Create(this)},__proto.restore=function(){var sz=this._save._length;if(!(sz<1))for(var i=sz-1;i>=0;i--){var o=this._save[i];if(o.restore(this),o.isSaveMark())return void(this._save._length=i)}},__proto.measureText=function(text){return RunDriver.measureText(text,this._other.font.toString())},__proto._fillText=function(txt,words,x,y,fontStr,color,strokeColor,lineWidth,textAlign){var shader=this._shader2D,curShader=this._curSubmit.shaderValue,font=fontStr?FontInContext.create(fontStr):this._other.font;if(AtlasResourceManager.enabled)shader.ALPHA!==curShader.ALPHA&&(shader.glTexture=null),DrawText.drawText(this,txt,words,this._curMat,font,textAlign||this._other.textAlign,color,strokeColor,lineWidth,x,y);else{this._shader2D.defines.getValue();var colorAdd=color?Color.create(color)._color:shader.colorAdd;shader.ALPHA===curShader.ALPHA&&colorAdd===shader.colorAdd&&curShader.colorAdd===shader.colorAdd||(shader.glTexture=null,shader.colorAdd=colorAdd),DrawText.drawText(this,txt,words,this._curMat,font,textAlign||this._other.textAlign,color,strokeColor,lineWidth,x,y)}},__proto.fillWords=function(words,x,y,fontStr,color){words.length>0&&this._fillText(null,words,x,y,fontStr,color,null,-1,null)},__proto.fillText=function(txt,x,y,fontStr,color,textAlign){txt.length>0&&this._fillText(txt,null,x,y,fontStr,color,null,-1,textAlign)},__proto.strokeText=function(txt,x,y,fontStr,color,lineWidth,textAlign){0!==txt.length&&this._fillText(txt,null,x,y,fontStr,null,color,lineWidth||1,textAlign)},__proto.fillBorderText=function(txt,x,y,fontStr,fillColor,borderColor,lineWidth,textAlign){0!==txt.length&&this._fillBorderText(txt,null,x,y,fontStr,fillColor,borderColor,lineWidth,textAlign)},__proto._fillBorderText=function(txt,words,x,y,fontStr,fillColor,borderColor,lineWidth,textAlign){if(!AtlasResourceManager.enabled)return this._fillText(txt,words,x,y,fontStr,null,borderColor,lineWidth||1,textAlign),void this._fillText(txt,words,x,y,fontStr,fillColor,null,-1,textAlign);var shader=this._shader2D,curShader=this._curSubmit.shaderValue;shader.ALPHA!==curShader.ALPHA&&(shader.glTexture=null);var font=fontStr?(WebGLContext2D._fontTemp.setFont(fontStr),WebGLContext2D._fontTemp):this._other.font;DrawText.drawText(this,txt,words,this._curMat,font,textAlign||this._other.textAlign,fillColor,borderColor,lineWidth||1,x,y)},__proto.fillBorderWords=function(words,x,y,font,color,borderColor,lineWidth){words&&0!==words.length&&this._fillBorderText(null,words,x,y,font,color,borderColor,lineWidth,null)},__proto.fillRect=function(x,y,width,height,fillStyle){var vb=this._vb;if(GlUtils.fillRectImgVb(vb,this._clipRect,x,y,width,height,Texture.DEF_UV,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var pre=this._shader2D.fillStyle;fillStyle&&(this._shader2D.fillStyle=DrawStyle.create(fillStyle));var shader=this._shader2D,curShader=this._curSubmit.shaderValue;if(shader.fillStyle!==curShader.fillStyle||shader.ALPHA!==curShader.ALPHA){shader.glTexture=null;var submit=this._curSubmit=Submit.create(this,this._ib,vb,(vb._byteLength-64)/32*3,Value2D.create(2,0));submit.shaderValue.color=shader.fillStyle._color._color,submit.shaderValue.ALPHA=shader.ALPHA,this._submits[this._submits._length++]=submit}this._curSubmit._numEle+=6,this._shader2D.fillStyle=pre}},__proto.fillTexture=function(texture,x,y,width,height,type,offset,other){if(texture.loaded&&texture.bitmap&&texture.source){var vb=this._vb,w=texture.bitmap.width,h=texture.bitmap.height,uv=texture.uv,ox=offset.x%texture.width,oy=offset.y%texture.height;if(w!=other.w||h!=other.h){if(!other.w&&!other.h)switch(other.oy=other.ox=0,type){case"repeat":other.width=width,other.height=height;break;case"repeat-x":other.width=width,oy<0?texture.height+oy>height?other.height=height:other.height=texture.height+oy:(other.oy=oy,texture.height+oy>height?other.height=height-oy:other.height=texture.height);break;case"repeat-y":ox<0?texture.width+ox>width?other.width=width:other.width=texture.width+ox:(other.ox=ox,texture.width+ox>width?other.width=width-ox:other.width=texture.width),other.height=height;break;default:other.width=width,other.height=height}other.w=w,other.h=h,other.uv=[0,0,other.width/w,0,other.width/w,other.height/h,0,other.height/h]}if(x+=other.ox,y+=other.oy,ox-=other.ox,oy-=other.oy,GlUtils.fillRectImgVb(vb,this._clipRect,x,y,other.width,other.height,other.uv,this._curMat,this._x,this._y,0,0)){this._renderKey=0;var submit=SubmitTexture.create(this,this._ib,vb,(vb._byteLength-64)/32*3,Value2D.create(256,0));this._submits[this._submits._length++]=submit;var shaderValue=submit.shaderValue;shaderValue.textureHost=texture;var tTextureX=uv[0]*w,tTextureY=uv[1]*h,tTextureW=(uv[2]-uv[0])*w,tTextureH=(uv[5]-uv[3])*h,tx=-ox/w,ty=-oy/h;shaderValue.u_TexRange[0]=tTextureX/w,shaderValue.u_TexRange[1]=tTextureW/w,shaderValue.u_TexRange[2]=tTextureY/h,shaderValue.u_TexRange[3]=tTextureH/h,shaderValue.u_offset[0]=tx,shaderValue.u_offset[1]=ty,AtlasResourceManager.enabled&&!this._isMain&&submit.addTexture(texture,(vb._byteLength>>2)-16),this._curSubmit=submit,submit._renderType=10017,submit._numEle+=6}}else this.sprite&&Laya.timer.callLater(this,this._repaintSprite)},__proto.setShader=function(shader){SaveBase.save(this,524288,this._shader2D,!0),this._shader2D.shader=shader},__proto.setFilters=function(value){SaveBase.save(this,1048576,this._shader2D,!0),this._shader2D.filters=value,this._curSubmit=Submit.RENDERBASE,this._renderKey=0,this._drawCount++},__proto.drawTexture=function(tex,x,y,width,height,tx,ty){this._drawTextureM(tex,x,y,width,height,tx,ty,null,1)},__proto.addTextureVb=function(invb,x,y){var finalVB=this._curSubmit._vb||this._vb,vpos=finalVB._byteLength>>2;finalVB.byteLength=vpos+16<<2;for(var vbdata=finalVB.getFloat32Array(),i=0;i<16;i+=4)vbdata[vpos++]=invb[i]+x,vbdata[vpos++]=invb[i+1]+y,vbdata[vpos++]=invb[i+2],vbdata[vpos++]=invb[i+3];this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),finalVB._upload=!0},__proto.willDrawTexture=function(tex,alpha){if(!(tex.loaded&&tex.bitmap&&tex.source))return this.sprite&&Laya.timer.callLater(this,this._repaintSprite),0;var webGLImg=tex.bitmap,rid=webGLImg.id+this._shader2D.ALPHA*alpha+10016;if(rid==this._renderKey)return rid;var shader=this._shader2D,preAlpha=shader.ALPHA,curShader=this._curSubmit.shaderValue;shader.ALPHA*=alpha,this._renderKey=rid,this._drawCount++,shader.glTexture=webGLImg;var vb=this._vb,submit=null,vbSize=vb._byteLength/32*3;return submit=SubmitTexture.create(this,this._ib,vb,vbSize,Value2D.create(1,0)),this._submits[this._submits._length++]=submit,submit.shaderValue.textureHost=tex,submit._renderType=10016,submit._preIsSameTextureShader=10016===this._curSubmit._renderType&&shader.ALPHA===curShader.ALPHA,this._curSubmit=submit,shader.ALPHA=preAlpha,rid},__proto.drawTextures=function(tex,pos,tx,ty){if(tex.loaded&&tex.bitmap&&tex.source){var pre=this._clipRect;if(this._clipRect=WebGLContext2D.MAXCLIPRECT,this._drawTextureM(tex,pos[0],pos[1],tex.width,tex.height,tx,ty,null,1)){if(this._clipRect=pre,Stat.drawCall+=pos.length/2,!(pos.length<4)){for(var finalVB=this._curSubmit._vb||this._vb,sx=this._curMat.a,sy=this._curMat.d,i=2,sz=pos.length;i<sz;i+=2)GlUtils.copyPreImgVb(finalVB,(pos[i]-pos[i-2])*sx,(pos[i+1]-pos[i-1])*sy),this._curSubmit._numEle+=6;this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle)}}else alert("drawTextures err")}else this.sprite&&Laya.timer.callLater(this,this._repaintSprite)},__proto._drawTextureM=function(tex,x,y,width,height,tx,ty,m,alpha){if(!(tex.loaded&&tex.bitmap&&tex.source))return this.sprite&&Laya.timer.callLater(this,this._repaintSprite),!1;var finalVB=this._curSubmit._vb||this._vb,webGLImg=tex.bitmap;x+=tx,y+=ty,this._drawCount++;var rid=webGLImg.id+this._shader2D.ALPHA*alpha+10016;if(rid!=this._renderKey){this._renderKey=rid;var curShader=this._curSubmit.shaderValue,shader=this._shader2D,alphaBack=shader.ALPHA;shader.ALPHA*=alpha,shader.glTexture=webGLImg;var vb=this._vb,submit=null,vbSize=vb._byteLength/32*3;submit=SubmitTexture.create(this,this._ib,vb,vbSize,Value2D.create(1,0)),this._submits[this._submits._length++]=submit,submit.shaderValue.textureHost=tex,submit._renderType=10016,submit._preIsSameTextureShader=10016===this._curSubmit._renderType&&shader.ALPHA===curShader.ALPHA,this._curSubmit=submit,finalVB=this._curSubmit._vb||this._vb,shader.ALPHA=alphaBack}return!!GlUtils.fillRectImgVb(finalVB,this._clipRect,x,y,width||tex.width,height||tex.height,tex.uv,m||this._curMat,this._x,this._y,0,0)&&(AtlasResourceManager.enabled&&!this._isMain&&this._curSubmit.addTexture(tex,(finalVB._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle),!0)},__proto._repaintSprite=function(){this.sprite.repaint()},__proto._drawText=function(tex,x,y,width,height,m,tx,ty,dx,dy){var webGLImg=tex.bitmap;this._drawCount++;var rid=webGLImg.id+this._shader2D.ALPHA+10016;if(rid!=this._renderKey){this._renderKey=rid;var curShader=this._curSubmit.shaderValue,shader=this._shader2D;shader.glTexture=webGLImg;var vb=this._vb,submit=null,vbSize=vb._byteLength/32*3;(submit=AtlasResourceManager.enabled?SubmitTexture.create(this,this._ib,vb,vbSize,Value2D.create(1,0)):SubmitTexture.create(this,this._ib,vb,vbSize,TextSV.create()))._preIsSameTextureShader=10016===this._curSubmit._renderType&&shader.ALPHA===curShader.ALPHA,this._submits[this._submits._length++]=submit,submit.shaderValue.textureHost=tex,submit._renderType=10016,this._curSubmit=submit}tex.active();var finalVB=this._curSubmit._vb||this._vb;GlUtils.fillRectImgVb(finalVB,this._clipRect,x+tx,y+ty,width||tex.width,height||tex.height,tex.uv,m||this._curMat,this._x,this._y,dx,dy,!0)&&(AtlasResourceManager.enabled&&!this._isMain&&this._curSubmit.addTexture(tex,(finalVB._byteLength>>2)-16),this._curSubmit._numEle+=6,this._maxNumEle=Math.max(this._maxNumEle,this._curSubmit._numEle))},__proto.drawTextureWithTransform=function(tex,x,y,width,height,transform,tx,ty,alpha){var curMat=this._curMat,prex=this._x,prey=this._y;(0!==tx||0!==ty)&&(this._x=tx*curMat.a+ty*curMat.c,this._y=ty*curMat.d+tx*curMat.b),transform&&curMat.bTransform?(Matrix.mul(transform,curMat,WebGLContext2D._tmpMatrix),(transform=WebGLContext2D._tmpMatrix)._checkTransform()):(this._x+=curMat.tx,this._y+=curMat.ty),this._drawTextureM(tex,x,y,width,height,0,0,transform,alpha),this._x=prex,this._y=prey},__proto.fillQuadrangle=function(tex,x,y,point4,m){var submit=this._curSubmit,vb=this._vb,shader=this._shader2D,curShader=submit.shaderValue;if(this._renderKey=0,tex.bitmap){var t_tex=tex.bitmap;shader.glTexture==t_tex&&shader.ALPHA===curShader.ALPHA||(shader.glTexture=t_tex,(submit=this._curSubmit=Submit.create(this,this._ib,vb,vb._byteLength/32*3,Value2D.create(1,0))).shaderValue.glTexture=t_tex,this._submits[this._submits._length++]=submit),GlUtils.fillQuadrangleImgVb(vb,x,y,point4,tex.uv,m||this._curMat,this._x,this._y)}else submit.shaderValue.fillStyle&&submit.shaderValue.fillStyle.equal(tex)&&shader.ALPHA===curShader.ALPHA||(shader.glTexture=null,(submit=this._curSubmit=Submit.create(this,this._ib,vb,vb._byteLength/32*3,Value2D.create(2,0))).shaderValue.defines.add(2),submit.shaderValue.fillStyle=DrawStyle.create(tex),this._submits[this._submits._length++]=submit),GlUtils.fillQuadrangleImgVb(vb,x,y,point4,Texture.DEF_UV,m||this._curMat,this._x,this._y);submit._numEle+=6},__proto.drawTexture2=function(x,y,pivotX,pivotY,transform,alpha,blendMode,args){var curMat=this._curMat;if(this._x=x*curMat.a+y*curMat.c,this._y=y*curMat.d+x*curMat.b,transform&&(curMat.bTransform||transform.bTransform?(Matrix.mul(transform,curMat,WebGLContext2D._tmpMatrix),transform=WebGLContext2D._tmpMatrix):(this._x+=transform.tx+curMat.tx,this._y+=transform.ty+curMat.ty,transform=Matrix.EMPTY)),1!==alpha||blendMode){var preAlpha=this._shader2D.ALPHA,preblendType=this._nBlendType;this._shader2D.ALPHA=alpha,blendMode&&(this._nBlendType=BlendMode.TOINT(blendMode)),this._drawTextureM(args[0],args[1]-pivotX,args[2]-pivotY,args[3],args[4],0,0,transform,1),this._shader2D.ALPHA=preAlpha,this._nBlendType=preblendType}else this._drawTextureM(args[0],args[1]-pivotX,args[2]-pivotY,args[3],args[4],0,0,transform,1);this._x=this._y=0},__proto.drawCanvas=function(canvas,x,y,width,height){var src=canvas.context;if(this._renderKey=0,src._targets)this._submits[this._submits._length++]=SubmitCanvas.create(src,0,null),this._curSubmit=Submit.RENDERBASE,src._targets.drawTo(this,x,y,width,height);else{var submit=this._submits[this._submits._length++]=SubmitCanvas.create(src,this._shader2D.ALPHA,this._shader2D.filters),sx=width/canvas.width,sy=height/canvas.height,mat=submit._matrix;this._curMat.copyTo(mat),1!=sx&&1!=sy&&mat.scale(sx,sy);var tx=mat.tx,ty=mat.ty;mat.tx=mat.ty=0,mat.transformPoint(Point.TEMP.setTo(x,y)),mat.translate(Point.TEMP.x+tx,Point.TEMP.y+ty),this._curSubmit=Submit.RENDERBASE}Config.showCanvasMark&&(this.save(),this.lineWidth=4,this.strokeStyle=src._targets?"yellow":"green",this.strokeRect(x-1,y-1,width+2,height+2,1),this.strokeRect(x,y,width,height,1),this.restore())},__proto.drawTarget=function(scope,x,y,width,height,m,proName,shaderValue,uv,blend){void 0===blend&&(blend=-1);var vb=this._vb;if(GlUtils.fillRectImgVb(vb,this._clipRect,x,y,width,height,uv||Texture.DEF_UV,m||this._curMat,this._x,this._y,0,0)){this._renderKey=0,this._shader2D.glTexture=null;this._curSubmit.shaderValue;var submit=this._curSubmit=SubmitTarget.create(this,this._ib,vb,(vb._byteLength-64)/32*3,shaderValue,proName);submit.blendType=-1==blend?this._nBlendType:blend,submit.scope=scope,this._submits[this._submits._length++]=submit,this._curSubmit._numEle+=6}},__proto.transform=function(a,b,c,d,tx,ty){SaveTransform.save(this),Matrix.mul(Matrix.TEMP.setTo(a,b,c,d,tx,ty),this._curMat,this._curMat),this._curMat._checkTransform()},__proto.setTransformByMatrix=function(value){value.copyTo(this._curMat)},__proto.transformByMatrix=function(value){SaveTransform.save(this),Matrix.mul(value,this._curMat,this._curMat),this._curMat._checkTransform()},__proto.rotate=function(angle){SaveTransform.save(this),this._curMat.rotateEx(angle)},__proto.scale=function(scaleX,scaleY){SaveTransform.save(this),this._curMat.scaleEx(scaleX,scaleY)},__proto.clipRect=function(x,y,width,height){width*=this._curMat.a,height*=this._curMat.d;var p=Point.TEMP;this._curMat.transformPoint(p.setTo(x,y)),this._renderKey=0;var submit=this._curSubmit=SubmitScissor.create(this);this._submits[this._submits._length++]=submit,submit.submitIndex=this._submits._length,submit.submitLength=9999999,SaveClipRect.save(this,submit);var clip=this._clipRect,x1=clip.x,y1=clip.y,r=p.x+width,b=p.y+height;x1<p.x&&(clip.x=p.x),y1<p.y&&(clip.y=p.y),clip.width=Math.min(r,x1+clip.width)-clip.x,clip.height=Math.min(b,y1+clip.height)-clip.y,this._shader2D.glTexture=null,submit.clipRect.copyFrom(clip),this._curSubmit=Submit.RENDERBASE},__proto.setIBVB=function(x,y,ib,vb,numElement,mat,shader,shaderValues,startIndex,offset,type){if(void 0===startIndex&&(startIndex=0),void 0===offset&&(offset=0),void 0===type&&(type=0),null===ib){if(Render.isFlash){var falshVB=vb;falshVB._selfIB||(falshVB._selfIB=IndexBuffer2D.create(35044)),falshVB._selfIB.clear(),ib=falshVB._selfIB}else ib=this._ib;GlUtils.expandIBQuadrangle(ib,vb.byteLength/(4*vb.vertexStride*4))}if(!shaderValues||!shader)throw Error("setIBVB must input:shader shaderValues");var submit=SubmitOtherIBVB.create(this,vb,ib,numElement,shader,shaderValues,startIndex,offset,type);mat||(mat=Matrix.EMPTY),mat.translate(x,y),Matrix.mul(mat,this._curMat,submit._mat),mat.translate(-x,-y),this._submits[this._submits._length++]=submit,this._curSubmit=Submit.RENDERBASE,this._renderKey=0},__proto.addRenderObject=function(o){this._submits[this._submits._length++]=o},__proto.fillTrangles=function(tex,x,y,points,m){var submit=this._curSubmit,vb=this._vb,shader=this._shader2D,curShader=submit.shaderValue,length=points.length>>4,t_tex=tex.bitmap;this._renderKey=0,shader.glTexture==t_tex&&shader.ALPHA===curShader.ALPHA||((submit=this._curSubmit=Submit.create(this,this._ib,vb,vb._byteLength/32*3,Value2D.create(1,0))).shaderValue.textureHost=tex,this._submits[this._submits._length++]=submit),GlUtils.fillTranglesVB(vb,x,y,points,m||this._curMat,this._x,this._y),submit._numEle+=6*length},__proto.submitElement=function(start,end){var renderList=this._submits;for(end<0&&(end=renderList._length);start<end;)start+=renderList[start].renderSubmit()},__proto.finish=function(){WebGL.mainContext.finish()},__proto.flush=function(){var maxNum=Math.max(this._vb.byteLength/64,this._maxNumEle/6)+8;if(maxNum>this._ib.bufferLength/12&&GlUtils.expandIBQuadrangle(this._ib,maxNum),!this._isMain&&AtlasResourceManager.enabled&&AtlasResourceManager._atlasRestore>this._atlasResourceChange){this._atlasResourceChange=AtlasResourceManager._atlasRestore;for(var renderList=this._submits,i=0,s=renderList._length;i<s;i++){var submit=renderList[i];10016===submit.getRenderType()&&submit.checkTexture()}}return this.submitElement(0,this._submits._length),this._path&&this._path.reset(),SkinMeshBuffer.instance&&SkinMeshBuffer.getInstance().reset(),this._curSubmit=Submit.RENDERBASE,this._renderKey=0,this._submits._length},__proto.setPathId=function(id){if(this.mId=id,-1!=this.mId){this.mHaveKey=!1;var tVGM=VectorGraphManager.getInstance();tVGM.shapeDic[this.mId]&&(this.mHaveKey=!0),this.mHaveLineKey=!1,tVGM.shapeLineDic[this.mId]&&(this.mHaveLineKey=!0)}},__proto.movePath=function(x,y){x=this._curMat.a*x+this._curMat.c*y+this._curMat.tx,y=this._curMat.b*x+this._curMat.d*y+this._curMat.ty,this.mX+=x,this.mY+=y},__proto.beginPath=function(){var tPath=this._getPath();tPath.tempArray.length=0,tPath.closePath=!1,this.mX=0,this.mY=0},__proto.closePath=function(){this._path.closePath=!0},__proto.fill=function(isConvexPolygon){void 0===isConvexPolygon&&(isConvexPolygon=!1);var tPath=this._getPath();this.drawPoly(0,0,tPath.tempArray,this.fillStyle._color.numColor,0,0,isConvexPolygon)},__proto.stroke=function(){var tPath=this._getPath();if(this.lineWidth>0){if(-1==this.mId)tPath.drawLine(0,0,tPath.tempArray,this.lineWidth,this.strokeStyle._color.numColor);else if(this.mHaveLineKey){var tShapeLine=VectorGraphManager.getInstance().shapeLineDic[this.mId];tShapeLine.rebuild(tPath.tempArray),tPath.setGeomtry(tShapeLine)}else VectorGraphManager.getInstance().addLine(this.mId,tPath.drawLine(0,0,tPath.tempArray,this.lineWidth,this.strokeStyle._color.numColor));tPath.update();var tPosArray=[this.mX,this.mY],tempSubmit=Submit.createShape(this,tPath.ib,tPath.vb,tPath.count,tPath.offset,Value2D.create(4,0));tempSubmit.shaderValue.ALPHA=this._shader2D.ALPHA,tempSubmit.shaderValue.u_pos=tPosArray,tempSubmit.shaderValue.u_mmat2=RenderState2D.TEMPMAT4_ARRAY,this._submits[this._submits._length++]=tempSubmit}},__proto.line=function(fromX,fromY,toX,toY,lineWidth,mat){var submit=this._curSubmit,vb=this._vb;if(GlUtils.fillLineVb(vb,this._clipRect,fromX,fromY,toX,toY,lineWidth,mat)){this._renderKey=0;var shader=this._shader2D,curShader=submit.shaderValue;shader.strokeStyle===curShader.strokeStyle&&shader.ALPHA===curShader.ALPHA||(shader.glTexture=null,(submit=this._curSubmit=Submit.create(this,this._ib,vb,(vb._byteLength-64)/32*3,Value2D.create(2,0))).shaderValue.strokeStyle=shader.strokeStyle,submit.shaderValue.mainID=2,submit.shaderValue.ALPHA=shader.ALPHA,this._submits[this._submits._length++]=submit),submit._numEle+=6}},__proto.moveTo=function(x,y,b){void 0===b&&(b=!0);var tPath=this._getPath();b&&(x=this._curMat.a*x+this._curMat.c*y,y=this._curMat.b*x+this._curMat.d*y),tPath.addPoint(x,y)},__proto.lineTo=function(x,y,b){void 0===b&&(b=!0);var tPath=this._getPath();b&&(x=this._curMat.a*x+this._curMat.c*y,y=this._curMat.b*x+this._curMat.d*y),tPath.addPoint(x,y)},__proto.drawCurves=function(x,y,args){this.setPathId(-1),this.beginPath(),this.strokeStyle=args[3],this.lineWidth=args[4];var points=args[2];x+=args[0],y+=args[1],this.movePath(x,y),this.moveTo(points[0],points[1]);for(var i=2,n=points.length;i<n;)this.quadraticCurveTo(points[i++],points[i++],points[i++],points[i++]);this.stroke()},__proto.arcTo=function(x1,y1,x2,y2,r){if(-1==this.mId||!this.mHaveKey){var tPath=this._getPath(),x0=tPath.getEndPointX(),y0=tPath.getEndPointY(),dx0=NaN,dy0=NaN,dx1=NaN,dy1=NaN,a=NaN,d=NaN,cx=NaN,cy=NaN,a0=NaN,a1=NaN,dir=!1;x1=this._curMat.a*x1+this._curMat.c*y1,y1=this._curMat.b*x1+this._curMat.d*y1,x2=this._curMat.a*x2+this._curMat.c*y2,y2=this._curMat.b*x2+this._curMat.d*y2,r=this._curMat.a*r+this._curMat.c*r,dx0=x0-x1,dy0=y0-y1,dx1=x2-x1,dy1=y2-y1,Point.TEMP.setTo(dx0,dy0),Point.TEMP.normalize(),dx0=Point.TEMP.x,dy0=Point.TEMP.y,Point.TEMP.setTo(dx1,dy1),Point.TEMP.normalize(),dx1=Point.TEMP.x,dy1=Point.TEMP.y,a=Math.acos(dx0*dx1+dy0*dy1),(d=r/Math.tan(a/2))>1e4?this.lineTo(x1,y1):(dx0*dy1-dx1*dy0<=0?(cx=x1+dx0*d+dy0*r,cy=y1+dy0*d-dx0*r,a0=Math.atan2(dx0,-dy0),a1=Math.atan2(-dx1,dy1),dir=!1):(cx=x1+dx0*d-dy0*r,cy=y1+dy0*d+dx0*r,a0=Math.atan2(-dx0,dy0),a1=Math.atan2(dx1,-dy1),dir=!0),this.arc(cx,cy,r,a0,a1,dir,!1))}},__proto.arc=function(cx,cy,r,startAngle,endAngle,counterclockwise,b){if(void 0===counterclockwise&&(counterclockwise=!1),void 0===b&&(b=!0),-1!=this.mId){var tShape=VectorGraphManager.getInstance().shapeDic[this.mId];if(tShape&&this.mHaveKey&&!tShape.needUpdate(this._curMat))return;cx=0,cy=0}var a=0,da=0,hda=0,kappa=0,x=0,y=0,i=0,ndivs=0;if(da=endAngle-startAngle,counterclockwise)if(Math.abs(da)>=2*Math.PI)da=2*-Math.PI;else for(;da>0;)da-=2*Math.PI;else if(Math.abs(da)>=2*Math.PI)da=2*Math.PI;else for(;da<0;)da+=2*Math.PI;hda=da/(ndivs=r<101?Math.max(10,da*r/5):r<201?Math.max(10,da*r/20):Math.max(10,da*r/40))/2,kappa=Math.abs(4/3*(1-Math.cos(hda))/Math.sin(hda)),counterclockwise&&(kappa=-kappa);var tPath=this._getPath();for(i=0;i<=ndivs;i++)a=startAngle+da*(i/ndivs),x=cx+Math.cos(a)*r,y=cy+Math.sin(a)*r,b&&(x=this._curMat.a*x+this._curMat.c*y,y=this._curMat.b*x+this._curMat.d*y),x==this._path.getEndPointX()&&y==this._path.getEndPointY()||tPath.addPoint(x,y);x=cx+Math.cos(endAngle)*r,y=cy+Math.sin(endAngle)*r,b&&(x=this._curMat.a*x+this._curMat.c*y,y=this._curMat.b*x+this._curMat.d*y),x==this._path.getEndPointX()&&y==this._path.getEndPointY()||tPath.addPoint(x,y)},__proto.quadraticCurveTo=function(cpx,cpy,x,y){var tBezier=Bezier.I;x=this._curMat.a*x+this._curMat.c*y,y=this._curMat.b*x+this._curMat.d*y,cpx=this._curMat.a*cpx+this._curMat.c*cpy,cpy=this._curMat.b*cpx+this._curMat.d*cpy;for(var tArray=tBezier.getBezierPoints([this._path.getEndPointX(),this._path.getEndPointY(),cpx,cpy,x,y],30,2),i=0,n=tArray.length/2;i<n;i++)this.lineTo(tArray[2*i],tArray[2*i+1],!1);this.lineTo(x,y,!1)},__proto.rect=function(x,y,width,height){this._other=this._other.make(),this._other.path||(this._other.path=new Path),this._other.path.rect(x,y,width,height)},__proto.strokeRect=function(x,y,width,height,parameterLineWidth){var tW=.5*parameterLineWidth;this.line(x-tW,y,x+width+tW,y,parameterLineWidth,this._curMat),this.line(x+width,y,x+width,y+height,parameterLineWidth,this._curMat),this.line(x,y,x,y+height,parameterLineWidth,this._curMat),this.line(x-tW,y+height,x+width+tW,y+height,parameterLineWidth,this._curMat)},__proto.clip=function(){},__proto.drawPoly=function(x,y,points,color,lineWidth,boderColor,isConvexPolygon){void 0===isConvexPolygon&&(isConvexPolygon=!1),this._renderKey=0,this._shader2D.glTexture=null;var tPath=this._getPath();if(-1==this.mId)tPath.polygon(x,y,points,color,lineWidth||1,boderColor);else if(this.mHaveKey){var tShape=VectorGraphManager.getInstance().shapeDic[this.mId];tShape.setMatrix(this._curMat),tShape.rebuild(tPath.tempArray),tPath.setGeomtry(tShape)}else{var t=tPath.polygon(x,y,points,color,lineWidth||1,boderColor);VectorGraphManager.getInstance().addShape(this.mId,t),t.setMatrix(this._curMat)}tPath.update();var tempSubmit,tPosArray=[this.mX,this.mY];if(!isConvexPolygon){var submit=SubmitStencil.create(4);this.addRenderObject(submit),(tempSubmit=Submit.createShape(this,tPath.ib,tPath.vb,tPath.count,tPath.offset,Value2D.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,tempSubmit.shaderValue.u_pos=tPosArray,tempSubmit.shaderValue.u_mmat2=RenderState2D.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=tempSubmit,submit=SubmitStencil.create(5),this.addRenderObject(submit)}if(tempSubmit=Submit.createShape(this,tPath.ib,tPath.vb,tPath.count,tPath.offset,Value2D.create(4,0)),tempSubmit.shaderValue.ALPHA=this._shader2D.ALPHA,tempSubmit.shaderValue.u_pos=tPosArray,tempSubmit.shaderValue.u_mmat2=RenderState2D.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=tempSubmit,isConvexPolygon||(submit=SubmitStencil.create(3),this.addRenderObject(submit)),lineWidth>0){if(this.mHaveLineKey){var tShapeLine=VectorGraphManager.getInstance().shapeLineDic[this.mId];tShapeLine.rebuild(tPath.tempArray),tPath.setGeomtry(tShapeLine)}else VectorGraphManager.getInstance().addShape(this.mId,tPath.drawLine(x,y,points,lineWidth,boderColor));tPath.update(),(tempSubmit=Submit.createShape(this,tPath.ib,tPath.vb,tPath.count,tPath.offset,Value2D.create(4,0))).shaderValue.ALPHA=this._shader2D.ALPHA,tempSubmit.shaderValue.u_mmat2=RenderState2D.EMPTYMAT4_ARRAY,this._submits[this._submits._length++]=tempSubmit}},__proto.drawParticle=function(x,y,pt){pt.x=x,pt.y=y,this._submits[this._submits._length++]=pt},__proto._getPath=function(){return this._path||(this._path=new Path)},__getset(0,__proto,"globalCompositeOperation",function(){return BlendMode.NAMES[this._nBlendType]},function(value){var n=BlendMode.TOINT[value];null==n||this._nBlendType===n||(SaveBase.save(this,65536,this,!0),this._curSubmit=Submit.RENDERBASE,this._renderKey=0,this._nBlendType=n)}),__getset(0,__proto,"strokeStyle",function(){return this._shader2D.strokeStyle},function(value){this._shader2D.strokeStyle.equal(value)||(SaveBase.save(this,512,this._shader2D,!1),this._shader2D.strokeStyle=DrawStyle.create(value))}),__getset(0,__proto,"globalAlpha",function(){return this._shader2D.ALPHA},function(value){(value=Math.floor(1e3*value)/1e3)!=this._shader2D.ALPHA&&(SaveBase.save(this,1,this._shader2D,!0),this._shader2D.ALPHA=value)}),__getset(0,__proto,"asBitmap",null,function(value){if(value){if(this._targets||(this._targets=new RenderTargetMAX),this._targets.repaint=!0,!this._width||!this._height)throw Error("asBitmap no size!");this._targets.size(this._width,this._height)}else this._targets=null}),__getset(0,__proto,"fillStyle",function(){return this._shader2D.fillStyle},function(value){this._shader2D.fillStyle.equal(value)||(SaveBase.save(this,2,this._shader2D,!1),this._shader2D.fillStyle=DrawStyle.create(value))}),__getset(0,__proto,"textAlign",function(){return this._other.textAlign},function(value){this._other.textAlign===value||(this._other=this._other.make(),SaveBase.save(this,32768,this._other,!1),this._other.textAlign=value)}),__getset(0,__proto,"lineWidth",function(){return this._other.lineWidth},function(value){this._other.lineWidth===value||(this._other=this._other.make(),SaveBase.save(this,256,this._other,!1),this._other.lineWidth=value)}),__getset(0,__proto,"textBaseline",function(){return this._other.textBaseline},function(value){this._other.textBaseline===value||(this._other=this._other.make(),SaveBase.save(this,16384,this._other,!1),this._other.textBaseline=value)}),__getset(0,__proto,"font",null,function(str){str!=this._other.font.toString()&&(this._other=this._other.make(),SaveBase.save(this,8,this._other,!1),this._other.font===FontInContext.EMPTY?this._other.font=new FontInContext(str):this._other.font.setFont(str))}),WebGLContext2D.__init__=function(){ContextParams.DEFAULT=new ContextParams},WebGLContext2D._SUBMITVBSIZE=32e3,WebGLContext2D._MAXSIZE=99999999,WebGLContext2D._RECTVBSIZE=16,WebGLContext2D.MAXCLIPRECT=new Rectangle(0,0,99999999,99999999),WebGLContext2D._COUNT=0,WebGLContext2D._tmpMatrix=new Matrix,__static(WebGLContext2D,["_fontTemp",function(){return this._fontTemp=new FontInContext},"_drawStyleTemp",function(){return this._drawStyleTemp=new DrawStyle(null)}]),WebGLContext2D.__init$=function(){ContextParams=function(){function ContextParams(){this.lineWidth=1,this.path=null,this.textAlign=null,this.textBaseline=null,this.font=FontInContext.EMPTY}__class(ContextParams,"");var __proto=ContextParams.prototype;return __proto.clear=function(){this.lineWidth=1,this.path&&this.path.clear(),this.textAlign=this.textBaseline=null,this.font=FontInContext.EMPTY},__proto.make=function(){return this===ContextParams.DEFAULT?new ContextParams:this},ContextParams.DEFAULT=null,ContextParams}()},WebGLContext2D}(Context),Value2D=function(_super){function Value2D(mainID,subID){this.size=[0,0],this.alpha=1,this.ALPHA=1,this.subID=0,this._cacheID=0,Value2D.__super.call(this),this.defines=new ShaderDefines2D,this.position=Value2D._POSITION,this.mainID=mainID,this.subID=subID,this.textureHost=null,this.texture=null,this.fillStyle=null,this.color=null,this.strokeStyle=null,this.colorAdd=null,this.glTexture=null,this.u_mmat2=null,this._cacheID=mainID|subID,this._inClassCache=Value2D._cache[this._cacheID],mainID>0&&!this._inClassCache&&(this._inClassCache=Value2D._cache[this._cacheID]=[],this._inClassCache._length=0),this.clear()}__class(Value2D,"laya.webgl.shader.d2.value.Value2D",_super);var __proto=Value2D.prototype;return __proto.setValue=function(value){},__proto.refresh=function(){var size=this.size;return size[0]=RenderState2D.width,size[1]=RenderState2D.height,this.alpha=this.ALPHA*RenderState2D.worldAlpha,this.mmat=RenderState2D.worldMatrix4,this},__proto._ShaderWithCompile=function(){return Shader.withCompile2D(0,this.mainID,this.defines.toNameDic(),this.mainID|this.defines._value,Shader2X.create)},__proto._withWorldShaderDefines=function(){var defs=RenderState2D.worldShaderDefines,sd=Shader.sharders[this.mainID|this.defines._value|defs.getValue()];if(!sd){var dic,name,def={};dic=this.defines.toNameDic();for(name in dic)def[name]="";dic=defs.toNameDic();for(name in dic)def[name]="";sd=Shader.withCompile2D(0,this.mainID,def,this.mainID|this.defines._value|defs.getValue(),Shader2X.create)}var worldFilters=RenderState2D.worldFilters;if(!worldFilters)return sd;for(var f,n=worldFilters.length,i=0;i<n;i++)(f=worldFilters[i])&&f.action.setValue(this);return sd},__proto.upload=function(){var renderstate2d=RenderState2D;this.alpha=this.ALPHA*renderstate2d.worldAlpha,RenderState2D.worldMatrix4!==RenderState2D.TEMPMAT4_ARRAY&&this.defines.add(128);var params,sd=renderstate2d.worldShaderDefines?this._withWorldShaderDefines():Shader.sharders[this.mainID|this.defines._value]||this._ShaderWithCompile();this.size[0]=renderstate2d.width,this.size[1]=renderstate2d.height,this.mmat=renderstate2d.worldMatrix4,BaseShader.activeShader!==sd?(sd._shaderValueWidth!==renderstate2d.width||sd._shaderValueHeight!==renderstate2d.height?(sd._shaderValueWidth=renderstate2d.width,sd._shaderValueHeight=renderstate2d.height):params=sd._params2dQuick2||sd._make2dQuick2(),sd.upload(this,params)):(sd._shaderValueWidth!==renderstate2d.width||sd._shaderValueHeight!==renderstate2d.height?(sd._shaderValueWidth=renderstate2d.width,sd._shaderValueHeight=renderstate2d.height):params=sd._params2dQuick1||sd._make2dQuick1(),sd.upload(this,params))},__proto.setFilters=function(value){if(this.filters=value,value)for(var f,n=value.length,i=0;i<n;i++)(f=value[i])&&(this.defines.add(f.type),f.action.setValue(this))},__proto.clear=function(){this.defines.setValue(this.subID)},__proto.release=function(){this._inClassCache[this._inClassCache._length++]=this,this.fillStyle=null,this.strokeStyle=null,this.clear()},Value2D._initone=function(type,classT){Value2D._typeClass[type]=classT,Value2D._cache[type]=[],Value2D._cache[type]._length=0},Value2D.__init__=function(){Value2D._POSITION=[2,5126,!1,4*CONST3D2D.BYTES_PE,0],Value2D._TEXCOORD=[2,5126,!1,4*CONST3D2D.BYTES_PE,2*CONST3D2D.BYTES_PE],Value2D._initone(2,Color2dSV),Value2D._initone(4,PrimitiveSV),Value2D._initone(256,FillTextureSV),Value2D._initone(512,SkinSV),Value2D._initone(1,TextureSV),Value2D._initone(65,TextSV),Value2D._initone(9,TextureSV)},Value2D.create=function(mainType,subType){var types=Value2D._cache[mainType|subType];return types._length?types[--types._length]:new Value2D._typeClass[mainType|subType](subType)},Value2D._POSITION=null,Value2D._TEXCOORD=null,Value2D._cache=[],Value2D._typeClass=[],Value2D.TEMPMAT4_ARRAY=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],Value2D}(ShaderValue),RenderSprite3D=function(_super){function RenderSprite3D(type,next){RenderSprite3D.__super.call(this,type,next)}__class(RenderSprite3D,"laya.webgl.utils.RenderSprite3D",_super);var __proto=RenderSprite3D.prototype;return __proto.onCreate=function(type){switch(type){case 8:return void(this._fun=this._blend);case 4:return void(this._fun=this._transform)}},__proto._mask=function(sprite,context,x,y){var submitCMD,submitStencil,next=this._next,mask=sprite.mask;if(mask){context.ctx.save();var preBlendMode=context.ctx.globalCompositeOperation,tRect=new Rectangle;if(tRect.copyFrom(mask.getBounds()),tRect.width=Math.round(tRect.width),tRect.height=Math.round(tRect.height),tRect.x=Math.round(tRect.x),tRect.y=Math.round(tRect.y),tRect.width>0&&tRect.height>0){var scope=SubmitCMDScope.create();scope.addValue("bounds",tRect),submitCMD=SubmitCMD.create([scope,context],laya.webgl.utils.RenderSprite3D.tmpTarget),context.addRenderObject(submitCMD),mask.render(context,-tRect.x,-tRect.y),submitCMD=SubmitCMD.create([scope],laya.webgl.utils.RenderSprite3D.endTmpTarget),context.addRenderObject(submitCMD),context.ctx.save(),context.clipRect(x+tRect.x,y+tRect.y,tRect.width,tRect.height),next._fun.call(next,sprite,context,x,y),context.ctx.restore(),submitStencil=SubmitStencil.create(6),preBlendMode=context.ctx.globalCompositeOperation,submitStencil.blendMode="mask",context.addRenderObject(submitStencil),Matrix.TEMP.identity();var shaderValue=Value2D.create(1,0),uv=Texture.INV_UV,w=tRect.width,h=tRect.height;(tRect.width<32||tRect.height<32)&&((uv=RenderSprite3D.tempUV)[0]=0,uv[1]=0,uv[2]=tRect.width>=32?1:tRect.width/32,uv[3]=0,uv[4]=tRect.width>=32?1:tRect.width/32,uv[5]=tRect.height>=32?1:tRect.height/32,uv[6]=0,uv[7]=tRect.height>=32?1:tRect.height/32,tRect.width=tRect.width>=32?tRect.width:32,tRect.height=tRect.height>=32?tRect.height:32,uv[1]*=-1,uv[3]*=-1,uv[5]*=-1,uv[7]*=-1,uv[1]+=1,uv[3]+=1,uv[5]+=1,uv[7]+=1),context.ctx.drawTarget(scope,x+tRect.x,y+tRect.y,w,h,Matrix.TEMP,"tmpTarget",shaderValue,uv,6),submitCMD=SubmitCMD.create([scope],laya.webgl.utils.RenderSprite3D.recycleTarget),context.addRenderObject(submitCMD),(submitStencil=SubmitStencil.create(6)).blendMode=preBlendMode,context.addRenderObject(submitStencil)}context.ctx.restore()}else next._fun.call(next,sprite,context,x,y)},__proto._blend=function(sprite,context,x,y){var style=sprite._style,next=this._next;style.blendMode?(context.ctx.save(),context.ctx.globalCompositeOperation=style.blendMode,next._fun.call(next,sprite,context,x,y),context.ctx.restore()):next._fun.call(next,sprite,context,x,y)},__proto._transform=function(sprite,context,x,y){"use strict";var transform=sprite.transform,_next=this._next;if(transform&&_next!=RenderSprite.NORENDER){var ctx=context.ctx;sprite._style;transform.tx=x,transform.ty=y;var m2=ctx._getTransformMatrix(),m1=m2.clone();Matrix.mul(transform,m2,m2),m2._checkTransform(),transform.tx=transform.ty=0,_next._fun.call(_next,sprite,context,0,0),m1.copyTo(m2),m1.destroy()}else _next._fun.call(_next,sprite,context,x,y)},RenderSprite3D.tmpTarget=function(scope,context){var b=scope.getValue("bounds"),tmpTarget=RenderTarget2D.create(b.width,b.height);tmpTarget.start(),tmpTarget.clear(0,0,0,0),scope.addValue("tmpTarget",tmpTarget)},RenderSprite3D.endTmpTarget=function(scope){scope.getValue("tmpTarget").end()},RenderSprite3D.recycleTarget=function(scope){scope.getValue("tmpTarget").recycle(),scope.recycle()},__static(RenderSprite3D,["tempUV",function(){return this.tempUV=new Array(8)}]),RenderSprite3D}(RenderSprite),ColorFilterActionGL=function(_super){function ColorFilterActionGL(){this.data=null,ColorFilterActionGL.__super.call(this)}__class(ColorFilterActionGL,"laya.filters.webgl.ColorFilterActionGL",_super);var __proto=ColorFilterActionGL.prototype;return Laya.imps(__proto,{"laya.filters.IFilterActionGL":!0}),__proto.setValue=function(shader){shader.colorMat=this.data._mat,shader.colorAlpha=this.data._alpha},__proto.apply3d=function(scope,sprite,context,x,y){var b=scope.getValue("bounds"),shaderValue=Value2D.create(1,0);shaderValue.setFilters([this.data]);var tMatrix=Matrix.TEMP;tMatrix.identity(),context.ctx.drawTarget(scope,0,0,b.width,b.height,tMatrix,"src",shaderValue)},ColorFilterActionGL}(FilterActionGL),Atlaser=function(_super){function Atlaser(gridNumX,gridNumY,width,height,atlasID){this._atlasCanvas=null,this._inAtlasTextureKey=null,this._inAtlasTextureBitmapValue=null,this._inAtlasTextureOriUVValue=null,this._InAtlasWebGLImagesKey=null,this._InAtlasWebGLImagesOffsetValue=null,Atlaser.__super.call(this,gridNumX,gridNumY,atlasID),this._inAtlasTextureKey=[],this._inAtlasTextureBitmapValue=[],this._inAtlasTextureOriUVValue=[],this._InAtlasWebGLImagesKey=[],this._InAtlasWebGLImagesOffsetValue=[],this._atlasCanvas=new AtlasWebGLCanvas,this._atlasCanvas.width=width,this._atlasCanvas.height=height,this._atlasCanvas.activeResource(),this._atlasCanvas.lock=!0}__class(Atlaser,"laya.webgl.atlas.Atlaser",_super);var __proto=Atlaser.prototype;return __proto.computeUVinAtlasTexture=function(texture,oriUV,offsetX,offsetY){var _width=AtlasResourceManager.atlasTextureWidth,_height=AtlasResourceManager.atlasTextureHeight,u1=offsetX/_width,v1=offsetY/_height,u2=(offsetX+texture.bitmap.width)/_width,v2=(offsetY+texture.bitmap.height)/_height,inAltasUVWidth=texture.bitmap.width/_width,inAltasUVHeight=texture.bitmap.height/_height;texture.uv=[u1+oriUV[0]*inAltasUVWidth,v1+oriUV[1]*inAltasUVHeight,u2-(1-oriUV[2])*inAltasUVWidth,v1+oriUV[3]*inAltasUVHeight,u2-(1-oriUV[4])*inAltasUVWidth,v2-(1-oriUV[5])*inAltasUVHeight,u1+oriUV[6]*inAltasUVWidth,v2-(1-oriUV[7])*inAltasUVHeight]},__proto.addToAtlasTexture=function(mergeAtlasBitmap,offsetX,offsetY){mergeAtlasBitmap instanceof laya.webgl.resource.WebGLImage&&(this._InAtlasWebGLImagesKey.push(mergeAtlasBitmap),this._InAtlasWebGLImagesOffsetValue.push([offsetX,offsetY])),this._atlasCanvas.texSubImage2D(offsetX,offsetY,mergeAtlasBitmap.atlasSource),mergeAtlasBitmap.clearAtlasSource()},__proto.addToAtlas=function(texture,offsetX,offsetY){var oriUV=texture.uv.slice(),oriBitmap=texture.bitmap;this._inAtlasTextureKey.push(texture),this._inAtlasTextureOriUVValue.push(oriUV),this._inAtlasTextureBitmapValue.push(oriBitmap),this.computeUVinAtlasTexture(texture,oriUV,offsetX,offsetY),texture.bitmap=this._atlasCanvas},__proto.clear=function(){for(var i=0,n=this._inAtlasTextureKey.length;i<n;i++)this._inAtlasTextureKey[i].bitmap=this._inAtlasTextureBitmapValue[i],this._inAtlasTextureKey[i].uv=this._inAtlasTextureOriUVValue[i],this._inAtlasTextureKey[i].bitmap.lock=!1,this._inAtlasTextureKey[i].bitmap.releaseResource();this._inAtlasTextureKey.length=0,this._inAtlasTextureBitmapValue.length=0,this._inAtlasTextureOriUVValue.length=0,this._InAtlasWebGLImagesKey.length=0,this._InAtlasWebGLImagesOffsetValue.length=0},__proto.dispose=function(){this.clear(),this._atlasCanvas.dispose()},__getset(0,__proto,"InAtlasWebGLImagesOffsetValue",function(){return this._InAtlasWebGLImagesOffsetValue}),__getset(0,__proto,"texture",function(){return this._atlasCanvas}),__getset(0,__proto,"inAtlasWebGLImagesKey",function(){return this._InAtlasWebGLImagesKey}),Atlaser}(AtlasGrid),ShaderDefines2D=function(_super){function ShaderDefines2D(){ShaderDefines2D.__super.call(this,ShaderDefines2D.__name2int,ShaderDefines2D.__int2name,ShaderDefines2D.__int2nameMap)}return __class(ShaderDefines2D,"laya.webgl.shader.d2.ShaderDefines2D",_super),ShaderDefines2D.__init__=function(){ShaderDefines2D.reg("TEXTURE2D",1),ShaderDefines2D.reg("COLOR2D",2),ShaderDefines2D.reg("PRIMITIVE",4),ShaderDefines2D.reg("GLOW_FILTER",8),ShaderDefines2D.reg("BLUR_FILTER",16),ShaderDefines2D.reg("COLOR_FILTER",32),ShaderDefines2D.reg("COLOR_ADD",64),ShaderDefines2D.reg("WORLDMAT",128),ShaderDefines2D.reg("FILLTEXTURE",256)},ShaderDefines2D.reg=function(name,value){ShaderDefines._reg(name,value,ShaderDefines2D.__name2int,ShaderDefines2D.__int2name)},ShaderDefines2D.toText=function(value,int2name,int2nameMap){return ShaderDefines._toText(value,int2name,int2nameMap)},ShaderDefines2D.toInt=function(names){return ShaderDefines._toInt(names,ShaderDefines2D.__name2int)},ShaderDefines2D.TEXTURE2D=1,ShaderDefines2D.COLOR2D=2,ShaderDefines2D.PRIMITIVE=4,ShaderDefines2D.FILTERGLOW=8,ShaderDefines2D.FILTERBLUR=16,ShaderDefines2D.FILTERCOLOR=32,ShaderDefines2D.COLORADD=64,ShaderDefines2D.WORLDMAT=128,ShaderDefines2D.FILLTEXTURE=256,ShaderDefines2D.SKINMESH=512,ShaderDefines2D.__name2int={},ShaderDefines2D.__int2name=[],ShaderDefines2D.__int2nameMap=[],ShaderDefines2D}(ShaderDefines),Line=(function(_super){function Ellipse(x,y,width,height,color,borderWidth,borderColor){Ellipse.__super.call(this,x,y,width,height,40,color,borderWidth,borderColor)}__class(Ellipse,"laya.webgl.shapes.Ellipse",_super)}(BasePoly),function(_super){function Line(x,y,points,borderWidth,color){this._points=[],this.rebuild(points),Line.__super.call(this,x,y,0,0,0,color,borderWidth,color,0)}__class(Line,"laya.webgl.shapes.Line",_super);var __proto=Line.prototype;return __proto.rebuild=function(points){var len=points.length;len!=this._points.length&&(this.mUint16Array=new Uint16Array(6*(len/2-1)),this.mFloat32Array=new Float32Array(5*len)),this._points.length=0;for(var tCurrX=NaN,tCurrY=NaN,tLastX=-1,tLastY=-1,tLen=points.length/2,i=0;i<tLen;i++)tCurrX=points[2*i],tCurrY=points[2*i+1],(Math.abs(tLastX-tCurrX)>.01||Math.abs(tLastY-tCurrY)>.01)&&this._points.push(tCurrX,tCurrY),tLastX=tCurrX,tLastY=tCurrY},__proto.getData=function(ib,vb,start){var indices=[],verts=[];this.borderWidth>0&&this.createLine2(this._points,indices,this.borderWidth,start,verts,this._points.length/2),this.mUint16Array.set(indices,0),this.mFloat32Array.set(verts,0),ib.append(this.mUint16Array),vb.append(this.mFloat32Array)},Line}(BasePoly)),LoopLine=function(_super){function LoopLine(x,y,points,width,color){this._points=[];for(var tCurrX=NaN,tCurrY=NaN,tLastX=-1,tLastY=-1,tLen=points.length/2-1,i=0;i<tLen;i++)tCurrX=points[2*i],tCurrY=points[2*i+1],(Math.abs(tLastX-tCurrX)>.01||Math.abs(tLastY-tCurrY)>.01)&&this._points.push(tCurrX,tCurrY),tLastX=tCurrX,tLastY=tCurrY;tCurrX=points[2*tLen],tCurrY=points[2*tLen+1],tLastX=this._points[0],tLastY=this._points[1],(Math.abs(tLastX-tCurrX)>.01||Math.abs(tLastY-tCurrY)>.01)&&this._points.push(tCurrX,tCurrY),LoopLine.__super.call(this,x,y,0,0,this._points.length/2,0,width,color)}__class(LoopLine,"laya.webgl.shapes.LoopLine",_super);var __proto=LoopLine.prototype;return __proto.getData=function(ib,vb,start){if(this.borderWidth>0){for(var color=this.color,r=(color>>16&255)/255,g=(color>>8&255)/255,b=(255&color)/255,verts=[],tCurrX=0,tCurrY=0,indices=[],tLen=Math.floor(this._points.length/2),i=0;i<tLen;i++)tCurrX=this._points[2*i],tCurrY=this._points[2*i+1],verts.push(this.x+tCurrX,this.y+tCurrY,r,g,b);this.createLoopLine(verts,indices,this.borderWidth,start+verts.length/5),ib.append(new Uint16Array(indices)),vb.append(new Float32Array(verts))}},__proto.createLoopLine=function(p,indices,lineWidth,len,outVertex,outIndex){p.length;var points=p.concat(),result=outVertex||p,color=this.borderColor,r=(color>>16&255)/255,g=(color>>8&255)/255,b=(255&color)/255,firstPoint=[points[0],points[1]],lastPoint=[points[points.length-5],points[points.length-4]],midPointX=lastPoint[0]+.5*(firstPoint[0]-lastPoint[0]),midPointY=lastPoint[1]+.5*(firstPoint[1]-lastPoint[1]);points.unshift(midPointX,midPointY,0,0,0),points.push(midPointX,midPointY,0,0,0);var px,py,p1x,p1y,p2x,p2y,p3x,p3y,perpx,perpy,perp2x,perp2y,a1,b1,c1,a2,b2,c2,denom,dist,length=points.length/5,iStart=len,w=lineWidth/2;p1x=points[0],p1y=points[1],perpy=p1x-(p2x=points[5]),perpx=(perpx=-(p1y-(p2y=points[6])))/(dist=Math.sqrt(perpx*perpx+perpy*perpy))*w,perpy=perpy/dist*w,result.push(p1x-perpx,p1y-perpy,r,g,b,p1x+perpx,p1y+perpy,r,g,b);for(var i=1;i<length-1;i++)p1x=points[5*(i-1)],p1y=points[5*(i-1)+1],p2x=points[5*i],p2y=points[5*i+1],p3x=points[5*(i+1)],p3y=points[5*(i+1)+1],perpy=p1x-p2x,perp2y=p2x-p3x,c1=(-(perpx=(perpx=-(p1y-p2y))/(dist=Math.sqrt(perpx*perpx+perpy*perpy))*w)+p1x)*(-(perpy=perpy/dist*w)+p2y)-(-perpx+p2x)*(-perpy+p1y),c2=(-(perp2x=(perp2x=-(p2y-p3y))/(dist=Math.sqrt(perp2x*perp2x+perp2y*perp2y))*w)+p3x)*(-(perp2y=perp2y/dist*w)+p2y)-(-perp2x+p2x)*(-perp2y+p3y),denom=(a1=-perpy+p1y-(-perpy+p2y))*(b2=-perp2x+p2x-(-perp2x+p3x))-(a2=-perp2y+p3y-(-perp2y+p2y))*(b1=-perpx+p2x-(-perpx+p1x)),Math.abs(denom)<.1?(denom+=10.1,result.push(p2x-perpx,p2y-perpy,r,g,b,p2x+perpx,p2y+perpy,r,g,b)):(((px=(b1*c2-b2*c1)/denom)-p2x)*(px-p2x)+((py=(a2*c1-a1*c2)/denom)-p2y)+(py-p2y),result.push(px,py,r,g,b,p2x-(px-p2x),p2y-(py-p2y),r,g,b));outIndex&&(indices=outIndex);var groupLen=this.edges+1;for(i=1;i<groupLen;i++)indices.push(iStart+2*(i-1),iStart+2*(i-1)+1,iStart+2*i+1,iStart+2*i+1,iStart+2*i,iStart+2*(i-1));return indices.push(iStart+2*(i-1),iStart+2*(i-1)+1,iStart+1,iStart+1,iStart,iStart+2*(i-1)),result},LoopLine}(BasePoly),Polygon=function(_super){function Polygon(x,y,points,color,borderWidth,borderColor){this._points=null,this._start=-1,this._repaint=!1,this._mat=Matrix.create(),this._points=points.slice(0,points.length),Polygon.__super.call(this,x,y,0,0,this._points.length/2,color,borderWidth,borderColor)}__class(Polygon,"laya.webgl.shapes.Polygon",_super);var __proto=Polygon.prototype;return __proto.rebuild=function(point){this._repaint||(this._points.length=0,this._points=this._points.concat(point))},__proto.setMatrix=function(mat){mat.copyTo(this._mat)},__proto.needUpdate=function(mat){return this._repaint=this._mat.a==mat.a&&this._mat.b==mat.b&&this._mat.c==mat.c&&this._mat.d==mat.d&&this._mat.tx==mat.tx&&this._mat.ty==mat.ty,!this._repaint},__proto.getData=function(ib,vb,start){var indices,i=0,tArray=this._points,tLen=0;if(this.mUint16Array&&this.mFloat32Array&&this._repaint){if(this._start!=start){for(this._start=start,indices=[],tLen=Math.floor(tArray.length/2),i=2;i<tLen;i++)indices.push(start,start+i-1,start+i);this.mUint16Array=new Uint16Array(indices)}}else{this._start=start,indices=[];var verts=[],color=this.color,r=(color>>16&255)/255,g=(color>>8&255)/255,b=(255&color)/255;for(tLen=Math.floor(tArray.length/2),i=0;i<tLen;i++)verts.push(this.x+tArray[2*i],this.y+tArray[2*i+1],r,g,b);for(i=2;i<tLen;i++)indices.push(start,start+i-1,start+i);this.mUint16Array=new Uint16Array(indices),this.mFloat32Array=new Float32Array(verts)}ib.append(this.mUint16Array),vb.append(this.mFloat32Array)},Polygon}(BasePoly),SubmitCanvas=function(_super){function SubmitCanvas(){this._matrix=new Matrix,this._matrix4=CONST3D2D.defaultMatrix4.concat(),SubmitCanvas.__super.call(this,1e4),this.shaderValue=new Value2D(0,0)}__class(SubmitCanvas,"laya.webgl.submit.SubmitCanvas",_super);var __proto=SubmitCanvas.prototype;return __proto.renderSubmit=function(){if(this._ctx_src._targets)return this._ctx_src._targets.flush(this._ctx_src),1;var preAlpha=RenderState2D.worldAlpha,preMatrix4=RenderState2D.worldMatrix4,preMatrix=RenderState2D.worldMatrix,preFilters=RenderState2D.worldFilters,preWorldShaderDefines=RenderState2D.worldShaderDefines,v=this.shaderValue,m=this._matrix,m4=this._matrix4,mout=Matrix.TEMP;return Matrix.mul(m,preMatrix,mout),m4[0]=mout.a,m4[1]=mout.b,m4[4]=mout.c,m4[5]=mout.d,m4[12]=mout.tx,m4[13]=mout.ty,RenderState2D.worldMatrix=mout.clone(),RenderState2D.worldMatrix4=m4,RenderState2D.worldAlpha=RenderState2D.worldAlpha*v.alpha,v.filters&&v.filters.length&&(RenderState2D.worldFilters=v.filters,RenderState2D.worldShaderDefines=v.defines),this._ctx_src.flush(),RenderState2D.worldAlpha=preAlpha,RenderState2D.worldMatrix4=preMatrix4,RenderState2D.worldMatrix.destroy(),RenderState2D.worldMatrix=preMatrix,RenderState2D.worldFilters=preFilters,RenderState2D.worldShaderDefines=preWorldShaderDefines,1},__proto.releaseRender=function(){var cache=SubmitCanvas._cache;cache[cache._length++]=this},__proto.getRenderType=function(){return 10003},SubmitCanvas.create=function(ctx_src,alpha,filters){var o=SubmitCanvas._cache._length?SubmitCanvas._cache[--SubmitCanvas._cache._length]:new SubmitCanvas;o._ctx_src=ctx_src;var v=o.shaderValue;return v.alpha=alpha,v.defines.setValue(0),filters&&filters.length&&v.setFilters(filters),o},SubmitCanvas._cache=(SubmitCanvas._cache=[],SubmitCanvas._cache._length=0,SubmitCanvas._cache),SubmitCanvas}(Submit),SubmitTexture=function(_super){function SubmitTexture(renderType){this._preIsSameTextureShader=!1,this._isSameTexture=!0,this._texs=new Array,this._texsID=new Array,this._vbPos=new Array,void 0===renderType&&(renderType=1e4),SubmitTexture.__super.call(this,renderType)}__class(SubmitTexture,"laya.webgl.submit.SubmitTexture",_super);var __proto=SubmitTexture.prototype;return __proto.releaseRender=function(){var cache=SubmitTexture._cache;cache[cache._length++]=this,this.shaderValue.release(),this._preIsSameTextureShader=!1,this._vb=null,this._texs.length=0,this._vbPos.length=0,this._isSameTexture=!0},__proto.addTexture=function(tex,vbpos){this._texsID[this._texs.length]=tex._uvID,this._texs.push(tex),this._vbPos.push(vbpos)},__proto.checkTexture=function(){if(this._texs.length<1)this._isSameTexture=!0;else{var webGLImg=this.shaderValue.textureHost.bitmap;if(null!==webGLImg)for(var vbdata=this._vb.getFloat32Array(),i=0,s=this._texs.length;i<s;i++){var tex=this._texs[i];tex.active();var newUV=tex.uv;if(this._texsID[i]!==tex._uvID){this._texsID[i]=tex._uvID;var vbPos=this._vbPos[i];vbdata[vbPos+2]=newUV[0],vbdata[vbPos+3]=newUV[1],vbdata[vbPos+6]=newUV[2],vbdata[vbPos+7]=newUV[3],vbdata[vbPos+10]=newUV[4],vbdata[vbPos+11]=newUV[5],vbdata[vbPos+14]=newUV[6],vbdata[vbPos+15]=newUV[7],this._vb.setNeedUpload()}tex.bitmap!==webGLImg&&(this._isSameTexture=!1)}}},__proto.renderSubmit=function(){if(0===this._numEle)return SubmitTexture._shaderSet=!1,1;var _tex=this.shaderValue.textureHost;if(_tex){var source=_tex.source;if(!_tex.bitmap||!source)return SubmitTexture._shaderSet=!1,1;this.shaderValue.texture=source}this._vb.bind_upload(this._ib);var gl=WebGL.mainContext;if(BlendMode.activeBlendFunction!==this._blendFn&&(gl.enable(3042),this._blendFn(gl),BlendMode.activeBlendFunction=this._blendFn),Stat.drawCall++,Stat.trianglesFaces+=this._numEle/3,this._preIsSameTextureShader&&BaseShader.activeShader&&SubmitTexture._shaderSet?BaseShader.activeShader.uploadTexture2D(this.shaderValue.texture):this.shaderValue.upload(),SubmitTexture._shaderSet=!0,this._texs.length>1&&!this._isSameTexture)for(var webGLImg=_tex.bitmap,index=0,shader=BaseShader.activeShader,i=0,s=this._texs.length;i<s;i++){var tex2=this._texs[i];tex2.bitmap===webGLImg&&i+1!==s||(shader.uploadTexture2D(tex2.source),gl.drawElements(4,6*(i-index+1),5123,this._startIdx+6*index*CONST3D2D.BYTES_PIDX),webGLImg=tex2.bitmap,index=i)}else gl.drawElements(4,this._numEle,5123,this._startIdx);return 1},SubmitTexture.create=function(context,ib,vb,pos,sv){var o=SubmitTexture._cache._length?SubmitTexture._cache[--SubmitTexture._cache._length]:new SubmitTexture;null==vb&&((vb=o._selfVb||(o._selfVb=VertexBuffer2D.create(-1))).clear(),pos=0),o._ib=ib,o._vb=vb,o._startIdx=pos*CONST3D2D.BYTES_PIDX,o._numEle=0;var blendType=context._nBlendType;o._blendFn=context._targets?BlendMode.targetFns[blendType]:BlendMode.fns[blendType],o.shaderValue=sv,o.shaderValue.setValue(context._shader2D);var filters=context._shader2D.filters;return filters&&o.shaderValue.setFilters(filters),o},SubmitTexture._cache=(SubmitTexture._cache=[],SubmitTexture._cache._length=0,SubmitTexture._cache),SubmitTexture._shaderSet=!0,SubmitTexture}(Submit),BaseShader=function(_super){function BaseShader(){BaseShader.__super.call(this)}return __class(BaseShader,"laya.webgl.shader.BaseShader",_super),BaseShader.activeShader=null,BaseShader.bindShader=null,BaseShader}(Resource),RenderTarget2D=function(_super){function RenderTarget2D(width,height,surfaceFormat,surfaceType,depthStencilFormat,mipMap,repeat,minFifter,magFifter){this._type=0,this._svWidth=NaN,this._svHeight=NaN,this._preRenderTarget=null,this._alreadyResolved=!1,this._looked=!1,this._surfaceFormat=0,this._surfaceType=0,this._depthStencilFormat=0,this._mipMap=!1,this._repeat=!1,this._minFifter=0,this._magFifter=0,this._destroy=!1,void 0===surfaceFormat&&(surfaceFormat=6408),void 0===surfaceType&&(surfaceType=5121),void 0===depthStencilFormat&&(depthStencilFormat=34041),void 0===mipMap&&(mipMap=!1),void 0===repeat&&(repeat=!1),void 0===minFifter&&(minFifter=-1),void 0===magFifter&&(magFifter=-1),this._type=1,this._w=width,this._h=height,this._surfaceFormat=surfaceFormat,this._surfaceType=surfaceType,this._depthStencilFormat=depthStencilFormat,this._mipMap=mipMap,this._repeat=repeat,this._minFifter=minFifter,this._magFifter=magFifter,this._createWebGLRenderTarget(),this.bitmap.lock=!0,RenderTarget2D.__super.call(this,this.bitmap,Texture.INV_UV)}__class(RenderTarget2D,"laya.webgl.resource.RenderTarget2D",_super);var __proto=RenderTarget2D.prototype;return Laya.imps(__proto,{"laya.resource.IDispose":!0}),__proto.getType=function(){return this._type},__proto.getTexture=function(){return this},__proto.size=function(w,h){this._w!=w||this._h!=h?(this._w=w,this._h=h,this.release(),0!=this._w&&0!=this._h&&this._createWebGLRenderTarget()):this.bitmap._released=!0},__proto.release=function(){this.destroy()},__proto.recycle=function(){RenderTarget2D.POOL.push(this)},__proto.start=function(){var gl=WebGL.mainContext;return this._preRenderTarget=RenderState2D.curRenderTarget,RenderState2D.curRenderTarget=this,gl.bindFramebuffer(36160,this.bitmap.frameBuffer),this._alreadyResolved=!1,1==this._type&&(gl.viewport(0,0,this._w,this._h),this._svWidth=RenderState2D.width,this._svHeight=RenderState2D.height,RenderState2D.width=this._w,RenderState2D.height=this._h,BaseShader.activeShader=null),this},__proto.clear=function(r,g,b,a){void 0===r&&(r=0),void 0===g&&(g=0),void 0===b&&(b=0),void 0===a&&(a=1);var gl=WebGL.mainContext;gl.clearColor(r,g,b,a);var clearFlag=16384;switch(this._depthStencilFormat){case 33189:clearFlag|=256;break;case 36168:clearFlag|=1024;break;case 34041:clearFlag|=256,clearFlag|=1024}gl.clear(clearFlag)},__proto.end=function(){var gl=WebGL.mainContext;gl.bindFramebuffer(36160,this._preRenderTarget?this._preRenderTarget.bitmap.frameBuffer:null),this._alreadyResolved=!0,RenderState2D.curRenderTarget=this._preRenderTarget,1==this._type?(gl.viewport(0,0,this._svWidth,this._svHeight),RenderState2D.width=this._svWidth,RenderState2D.height=this._svHeight,BaseShader.activeShader=null):gl.viewport(0,0,Laya.stage.width,Laya.stage.height)},__proto.getData=function(x,y,width,height){var gl=WebGL.mainContext;if(gl.bindFramebuffer(36160,this.bitmap.frameBuffer),!(36053===gl.checkFramebufferStatus(36160)))return gl.bindFramebuffer(36160,null),null;var pixels=new Uint8Array(this._w*this._h*4);return gl.readPixels(x,y,width,height,this._surfaceFormat,this._surfaceType,pixels),gl.bindFramebuffer(36160,null),pixels},__proto.destroy=function(foreDiposeTexture){void 0===foreDiposeTexture&&(foreDiposeTexture=!1),this._destroy||(this._loaded=!1,this.bitmap.dispose(),this.bitmap=null,this._alreadyResolved=!1,this._destroy=!0,_super.prototype.destroy.call(this))},__proto.dispose=function(){},__proto._createWebGLRenderTarget=function(){this.bitmap=new WebGLRenderTarget(this.width,this.height,this._surfaceFormat,this._surfaceType,this._depthStencilFormat,this._mipMap,this._repeat,this._minFifter,this._magFifter),this.bitmap.activeResource(),this._alreadyResolved=!0,this._destroy=!1,this._loaded=!0,this.bitmap.on("recovered",this,function(e){this.event("recovered")})},__getset(0,__proto,"surfaceFormat",function(){return this._surfaceFormat}),__getset(0,__proto,"magFifter",function(){return this._magFifter}),__getset(0,__proto,"surfaceType",function(){return this._surfaceType}),__getset(0,__proto,"mipMap",function(){return this._mipMap}),__getset(0,__proto,"depthStencilFormat",function(){return this._depthStencilFormat}),__getset(0,__proto,"minFifter",function(){return this._minFifter}),__getset(0,__proto,"source",function(){return this._alreadyResolved?_super.prototype._$get_source.call(this):null}),RenderTarget2D.create=function(w,h,surfaceFormat,surfaceType,depthStencilFormat,mipMap,repeat,minFifter,magFifter){void 0===surfaceFormat&&(surfaceFormat=6408),void 0===surfaceType&&(surfaceType=5121),void 0===depthStencilFormat&&(depthStencilFormat=34041),void 0===mipMap&&(mipMap=!1),void 0===repeat&&(repeat=!1),void 0===minFifter&&(minFifter=-1),void 0===magFifter&&(magFifter=-1);var t=RenderTarget2D.POOL.pop();return t||(t=new RenderTarget2D(w,h)),t.bitmap&&t._w==w&&t._h==h&&t._surfaceFormat==surfaceFormat&&t._surfaceType==surfaceType&&t._depthStencilFormat==depthStencilFormat&&t._mipMap==mipMap&&t._repeat==repeat&&t._minFifter==minFifter&&t._magFifter==magFifter||(t._w=w,t._h=h,t._surfaceFormat=surfaceFormat,t._surfaceType=surfaceType,t._depthStencilFormat=depthStencilFormat,t._mipMap=mipMap,t._repeat=repeat,t._minFifter=minFifter,t._magFifter=magFifter,t.release(),t._createWebGLRenderTarget()),t},RenderTarget2D.TYPE2D=1,RenderTarget2D.TYPE3D=2,RenderTarget2D.POOL=[],RenderTarget2D}(Texture),Buffer=function(_super){function Buffer(){this._glBuffer=null,this._buffer=null,this._bufferType=0,this._bufferUsage=0,this._byteLength=0,Buffer.__super.call(this),Buffer._gl=WebGL.mainContext}__class(Buffer,"laya.webgl.utils.Buffer",_super);var __proto=Buffer.prototype;return __proto._bind=function(){this.activeResource(),Buffer._bindActive[this._bufferType]===this._glBuffer||(Buffer._gl.bindBuffer(this._bufferType,Buffer._bindActive[this._bufferType]=this._glBuffer),BaseShader.activeShader=null)},__proto.recreateResource=function(){this.startCreate(),this._glBuffer||(this._glBuffer=Buffer._gl.createBuffer()),this.completeCreate()},__proto.detoryResource=function(){this._glBuffer&&(WebGL.mainContext.deleteBuffer(this._glBuffer),this._glBuffer=null),this.memorySize=0},__proto.dispose=function(){this.resourceManager.removeResource(this),_super.prototype.dispose.call(this)},__getset(0,__proto,"byteLength",function(){return this._byteLength}),__getset(0,__proto,"bufferType",function(){return this._bufferType}),__getset(0,__proto,"bufferUsage",function(){return this._bufferUsage}),Buffer._gl=null,Buffer._bindActive={},Buffer}(Resource),SkinSV=function(_super){function SkinSV(type){this.texcoord=null,this.offsetX=300,this.offsetY=0,SkinSV.__super.call(this,512,0);var _vlen=8*CONST3D2D.BYTES_PE;this.position=[2,5126,!1,_vlen,0],this.texcoord=[2,5126,!1,_vlen,2*CONST3D2D.BYTES_PE],this.color=[4,5126,!1,_vlen,4*CONST3D2D.BYTES_PE]}return __class(SkinSV,"laya.webgl.shader.d2.skinAnishader.SkinSV",_super),SkinSV}(Value2D),Color2dSV=function(_super){function Color2dSV(args){Color2dSV.__super.call(this,2,0),this.color=[]}return __class(Color2dSV,"laya.webgl.shader.d2.value.Color2dSV",_super),Color2dSV.prototype.setValue=function(value){value.fillStyle&&(this.color=value.fillStyle._color._color),value.strokeStyle&&(this.color=value.strokeStyle._color._color)},Color2dSV}(Value2D),FillTextureSV=function(_super){function FillTextureSV(type){this.u_colorMatrix=null,this.strength=0,this.colorMat=null,this.colorAlpha=null,this.u_TexRange=[0,1,0,1],this.u_offset=[0,0],this.texcoord=Value2D._TEXCOORD,FillTextureSV.__super.call(this,256,0)}__class(FillTextureSV,"laya.webgl.shader.d2.value.FillTextureSV",_super);var __proto=FillTextureSV.prototype;return __proto.setValue=function(vo){this.ALPHA=vo.ALPHA,vo.filters&&this.setFilters(vo.filters)},__proto.clear=function(){this.texture=null,this.shader=null,this.defines.setValue(0)},FillTextureSV}(Value2D),TextureSV=function(_super){function TextureSV(subID){this.u_colorMatrix=null,this.strength=0,this.blurInfo=null,this.colorMat=null,this.colorAlpha=null,this.texcoord=Value2D._TEXCOORD,void 0===subID&&(subID=0),TextureSV.__super.call(this,1,subID)}__class(TextureSV,"laya.webgl.shader.d2.value.TextureSV",_super);var __proto=TextureSV.prototype;return __proto.setValue=function(vo){this.ALPHA=vo.ALPHA,vo.filters&&this.setFilters(vo.filters)},__proto.clear=function(){this.texture=null,this.shader=null,this.defines.setValue(0)},TextureSV}(Value2D),PrimitiveSV=function(_super){function PrimitiveSV(args){this.a_color=null,this.u_pos=[0,0],PrimitiveSV.__super.call(this,4,0),this.position=[2,5126,!1,5*CONST3D2D.BYTES_PE,0],this.a_color=[3,5126,!1,5*CONST3D2D.BYTES_PE,2*CONST3D2D.BYTES_PE]}return __class(PrimitiveSV,"laya.webgl.shader.d2.value.PrimitiveSV",_super),PrimitiveSV}(Value2D),AtlasWebGLCanvas=function(_super){function AtlasWebGLCanvas(){this._flashCacheImage=null,this._flashCacheImageNeedFlush=!1,AtlasWebGLCanvas.__super.call(this)}__class(AtlasWebGLCanvas,"laya.webgl.atlas.AtlasWebGLCanvas",_super);var __proto=AtlasWebGLCanvas.prototype;return __proto.recreateResource=function(){this.startCreate();var gl=WebGL.mainContext,glTex=this._source=gl.createTexture(),preTarget=WebGLContext.curBindTexTarget,preTexture=WebGLContext.curBindTexValue;WebGLContext.bindTexture(gl,3553,glTex),gl.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),gl.texParameteri(3553,10241,9729),gl.texParameteri(3553,10240,9729),gl.texParameteri(3553,10242,33071),gl.texParameteri(3553,10243,33071),preTarget&&preTexture&&WebGLContext.bindTexture(gl,preTarget,preTexture),this.memorySize=this._w*this._h*4,this.completeCreate()},__proto.detoryResource=function(){this._source&&(WebGL.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},__proto.texSubImage2D=function(xoffset,yoffset,bitmap){if(Render.isFlash){this._flashCacheImage||(this._flashCacheImage=HTMLImage.create(null),this._flashCacheImage.image.createCanvas(this._w,this._h));var bmData=bitmap.bitmapdata;xoffset-1>=0&&this._flashCacheImage.image.copyPixels(bmData,0,0,bmData.width-1,bmData.height,xoffset,yoffset),xoffset+1<=this._w&&this._flashCacheImage.image.copyPixels(bmData,0,0,bmData.width+1,bmData.height,xoffset,yoffset),yoffset-1>=0&&this._flashCacheImage.image.copyPixels(bmData,0,0,bmData.width,bmData.height-1,xoffset,yoffset),yoffset+1<=this._h&&this._flashCacheImage.image.copyPixels(bmData,0,0,bmData.width+1,bmData.height,xoffset,yoffset),this._flashCacheImage.image.copyPixels(bmData,0,0,bmData.width,bmData.height,xoffset,yoffset),this._flashCacheImageNeedFlush||(this._flashCacheImageNeedFlush=!0)}else{var gl=WebGL.mainContext,preTarget=WebGLContext.curBindTexTarget,preTexture=WebGLContext.curBindTexValue;WebGLContext.bindTexture(gl,3553,this._source),xoffset-1>=0&&gl.texSubImage2D(3553,0,xoffset-1,yoffset,6408,5121,bitmap),xoffset+1<=this._w&&gl.texSubImage2D(3553,0,xoffset+1,yoffset,6408,5121,bitmap),yoffset-1>=0&&gl.texSubImage2D(3553,0,xoffset,yoffset-1,6408,5121,bitmap),yoffset+1<=this._h&&gl.texSubImage2D(3553,0,xoffset,yoffset+1,6408,5121,bitmap),gl.texSubImage2D(3553,0,xoffset,yoffset,6408,5121,bitmap),preTarget&&preTexture&&WebGLContext.bindTexture(gl,preTarget,preTexture)}},__proto.texSubImage2DPixel=function(xoffset,yoffset,width,height,pixel){var gl=WebGL.mainContext,preTarget=WebGLContext.curBindTexTarget,preTexture=WebGLContext.curBindTexValue;WebGLContext.bindTexture(gl,3553,this._source);var pixels=new Uint8Array(pixel.data);gl.texSubImage2D(3553,0,xoffset,yoffset,width,height,6408,5121,pixels),preTarget&&preTexture&&WebGLContext.bindTexture(gl,preTarget,preTexture)},__getset(0,__proto,"width",_super.prototype._$get_width,function(value){this._w=value}),__getset(0,__proto,"height",_super.prototype._$get_height,function(value){this._h=value}),AtlasWebGLCanvas}(Bitmap),WebGLCharImage=(function(_super){function WebGLCanvas(type){this._is2D=!1;var _$this=this;if(WebGLCanvas.__super.call(this),this._canvas=this,"2D"===type||"AUTO"===type&&!Render.isWebGL){this._is2D=!0,this._canvas=this._source=Browser.createElement("canvas"),this.iscpuSource=!0;var o=this;o.getContext=function(contextID,other){if(_$this._ctx)return _$this._ctx;var ctx=_$this._ctx=_$this._canvas.getContext(contextID,other);return ctx&&(ctx._canvas=o,ctx.size=function(){}),ctx}}else this._canvas={}}__class(WebGLCanvas,"laya.webgl.resource.WebGLCanvas",_super);var __proto=WebGLCanvas.prototype;__proto.clear=function(){this._ctx&&this._ctx.clear()},__proto.destroy=function(){this._ctx&&this._ctx.destroy(),this._ctx=null},__proto._setContext=function(context){this._ctx=context},__proto.getContext=function(contextID,other){return this._ctx?this._ctx:this._ctx=WebGLCanvas._createContext(this)},__proto.size=function(w,h){this._w==w&&this._h==h||(this._w=w,this._h=h,this._ctx&&this._ctx.size(w,h),this._canvas&&(this._canvas.height=h,this._canvas.width=w))},__proto.recreateResource=function(){this.startCreate(),this.createWebGlTexture(),this.completeCreate()},__proto.detoryResource=function(){this._source&&!this.iscpuSource&&(WebGL.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},__proto.createWebGlTexture=function(){var gl=WebGL.mainContext;if(!this._canvas)throw"create GLTextur err:no data:"+this._canvas;var glTex=this._source=gl.createTexture();this.iscpuSource=!1;var preTarget=WebGLContext.curBindTexTarget,preTexture=WebGLContext.curBindTexValue;WebGLContext.bindTexture(gl,3553,glTex),gl.texImage2D(3553,0,6408,this._w,this._h,0,6408,5121,null),gl.texParameteri(3553,10240,9729),gl.texParameteri(3553,10241,9729),gl.texParameteri(3553,10242,33071),gl.texParameteri(3553,10243,33071),this.memorySize=this._w*this._h*4,preTarget&&preTexture&&WebGLContext.bindTexture(gl,preTarget,preTexture),this._canvas=null},__proto.texSubImage2D=function(webglCanvas,xoffset,yoffset){var gl=WebGL.mainContext,preTarget=WebGLContext.curBindTexTarget,preTexture=WebGLContext.curBindTexValue;WebGLContext.bindTexture(gl,3553,this._source),gl.texSubImage2D(3553,0,xoffset,yoffset,6408,5121,webglCanvas._source),preTarget&&preTexture&&WebGLContext.bindTexture(gl,preTarget,preTexture)},__getset(0,__proto,"canvas",function(){return this._canvas}),__getset(0,__proto,"context",function(){return this._ctx}),__getset(0,__proto,"asBitmap",null,function(value){this._ctx&&(this._ctx.asBitmap=value)}),WebGLCanvas.create=function(type){return new WebGLCanvas(type)},WebGLCanvas._createContext=null}(Bitmap),function(_super){function WebGLCharImage(content,drawValue){this.CborderSize=12,WebGLCharImage.__super.call(this),this.char=content,this.isSpace=" "===content,this.xs=drawValue.scaleX,this.ys=drawValue.scaleY,this.font=drawValue.font.toString(),this.fontSize=drawValue.font.size,this.fillColor=drawValue.fillColor,this.borderColor=drawValue.borderColor,this.lineWidth=drawValue.lineWidth;var pCanvas,bIsConchApp=Render.isConchApp;bIsConchApp?((pCanvas=ConchTextCanvas)._source=ConchTextCanvas,pCanvas._source.canvas=ConchTextCanvas):pCanvas=Browser.canvas.source,this.canvas=pCanvas,this._enableMerageInAtlas=!0,this._ctx=bIsConchApp?pCanvas:this.canvas.getContext("2d",void 0);var t=null;bIsConchApp?(this._ctx.font=this.font,t=this._ctx.measureText(this.char),this.cw=t.width*this.xs,this.ch=t.height*this.ys):(t=Utils.measureText(this.char,this.font),this.cw=t.width*this.xs,this.ch=t.height*this.ys),this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.texture=new Texture(this)}__class(WebGLCharImage,"laya.webgl.resource.WebGLCharImage",_super);var __proto=WebGLCharImage.prototype;return Laya.imps(__proto,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),__proto.active=function(){this.texture.active()},__proto.recreateResource=function(){this.startCreate();var bIsConchApp=Render.isConchApp;if(this.onresize(this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this.canvas&&(this.canvas.height=this._h,this.canvas.width=this._w),bIsConchApp){var nFontSize=this.fontSize;1==this.xs&&1==this.ys||(nFontSize=parseInt(nFontSize*(this.xs>this.ys?this.xs:this.ys)+""));var sFont="normal 100 "+nFontSize+"px Arial";this.borderColor&&(sFont+=" 1 "+this.borderColor),this._ctx.font=sFont,this._ctx.textBaseline="top",this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,this.CborderSize,this.CborderSize,null,null,null)}else this._ctx.save(),this._ctx.clearRect(0,0,this.cw+2*this.CborderSize,this.ch+2*this.CborderSize),this._ctx.font=this.font,this._ctx.textBaseline="top",this._ctx.translate(this.CborderSize,this.CborderSize),1==this.xs&&1==this.ys||this._ctx.scale(this.xs,this.ys),this.fillColor&&this.borderColor?(this._ctx.strokeStyle=this.borderColor,this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null),this._ctx.fillStyle=this.fillColor,this._ctx.fillText(this.char,0,0,null,null,null)):-1===this.lineWidth?(this._ctx.fillStyle=this.fillColor?this.fillColor:"white",this._ctx.fillText(this.char,0,0,null,null,null)):(this._ctx.strokeStyle=this.borderColor?this.borderColor:"white",this._ctx.lineWidth=this.lineWidth,this._ctx.strokeText(this.char,0,0,null,null,0,null)),this._ctx.restore();this.borderSize=this.CborderSize,this.completeCreate()},__proto.onresize=function(w,h){if(this._w=w,this._h=h,!(this._w<AtlasResourceManager.atlasLimitWidth&&this._h<AtlasResourceManager.atlasLimitHeight))throw this._allowMerageInAtlas=!1,new Error("文字尺寸超出大图合集限制！");this._allowMerageInAtlas=!0},__proto.clearAtlasSource=function(){},__getset(0,__proto,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),__getset(0,__proto,"atlasSource",function(){return this.canvas}),__getset(0,__proto,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(value){this._enableMerageInAtlas=value}),WebGLCharImage.createOneChar=function(content,drawValue){return new WebGLCharImage(content,drawValue)},WebGLCharImage}(Bitmap)),WebGLRenderTarget=function(_super){function WebGLRenderTarget(width,height,surfaceFormat,surfaceType,depthStencilFormat,mipMap,repeat,minFifter,magFifter){void 0===surfaceFormat&&(surfaceFormat=6408),void 0===surfaceType&&(surfaceType=5121),void 0===depthStencilFormat&&(depthStencilFormat=34041),void 0===mipMap&&(mipMap=!1),void 0===repeat&&(repeat=!1),void 0===minFifter&&(minFifter=-1),void 0===magFifter&&(magFifter=1),WebGLRenderTarget.__super.call(this),this._w=width,this._h=height,this._surfaceFormat=surfaceFormat,this._surfaceType=surfaceType,this._depthStencilFormat=depthStencilFormat,this._mipMap=mipMap,this._repeat=repeat,this._minFifter=minFifter,this._magFifter=magFifter}__class(WebGLRenderTarget,"laya.webgl.resource.WebGLRenderTarget",_super);var __proto=WebGLRenderTarget.prototype;return __proto.recreateResource=function(){this.startCreate();var gl=WebGL.mainContext;this._frameBuffer||(this._frameBuffer=gl.createFramebuffer()),this._source||(this._source=gl.createTexture());var preTarget=WebGLContext.curBindTexTarget,preTexture=WebGLContext.curBindTexValue;WebGLContext.bindTexture(gl,3553,this._source),gl.texImage2D(3553,0,6408,this._w,this._h,0,this._surfaceFormat,this._surfaceType,null);var minFifter=this._minFifter,magFifter=this._magFifter,repeat=this._repeat?10497:33071;if(Arith.isPOT(this._w,this._h)?(this._mipMap?-1!==minFifter||(minFifter=9987):-1!==minFifter||(minFifter=9729),-1!==magFifter||(magFifter=9729),gl.texParameteri(3553,10241,minFifter),gl.texParameteri(3553,10240,magFifter),gl.texParameteri(3553,10242,repeat),gl.texParameteri(3553,10243,repeat),this._mipMap&&gl.generateMipmap(3553)):(-1!==minFifter||(minFifter=9729),-1!==magFifter||(magFifter=9729),gl.texParameteri(3553,10241,minFifter),gl.texParameteri(3553,10240,magFifter),gl.texParameteri(3553,10242,33071),gl.texParameteri(3553,10243,33071)),gl.bindFramebuffer(36160,this._frameBuffer),gl.framebufferTexture2D(36160,36064,3553,this._source,0),this._depthStencilFormat)switch(this._depthStencilBuffer||(this._depthStencilBuffer=gl.createRenderbuffer()),gl.bindRenderbuffer(36161,this._depthStencilBuffer),gl.renderbufferStorage(36161,this._depthStencilFormat,this._w,this._h),this._depthStencilFormat){case 33189:gl.framebufferRenderbuffer(36160,36096,36161,this._depthStencilBuffer);break;case 36168:gl.framebufferRenderbuffer(36160,36128,36161,this._depthStencilBuffer);break;case 34041:gl.framebufferRenderbuffer(36160,33306,36161,this._depthStencilBuffer)}gl.bindFramebuffer(36160,null),preTarget&&preTexture&&WebGLContext.bindTexture(gl,preTarget,preTexture),gl.bindRenderbuffer(36161,null),this.memorySize=this._w*this._h*4,this.completeCreate()},__proto.detoryResource=function(){this._frameBuffer&&(WebGL.mainContext.deleteTexture(this._source),WebGL.mainContext.deleteFramebuffer(this._frameBuffer),WebGL.mainContext.deleteRenderbuffer(this._depthStencilBuffer),this._source=null,this._frameBuffer=null,this._depthStencilBuffer=null,this.memorySize=0)},__getset(0,__proto,"depthStencilBuffer",function(){return this._depthStencilBuffer}),__getset(0,__proto,"frameBuffer",function(){return this._frameBuffer}),WebGLRenderTarget}(Bitmap),Shader=(function(_super){function WebGLSubImage(canvas,offsetX,offsetY,width,height,atlasImage,src,enableMerageInAtlas){this.offsetX=0,this.offsetY=0,void 0===enableMerageInAtlas&&(enableMerageInAtlas=!0),WebGLSubImage.__super.call(this),this.repeat=!0,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,this.atlasImage=atlasImage,this.canvas=canvas,this._ctx=canvas.getContext("2d",void 0),this._w=width,this._h=height,this.offsetX=offsetX,this.offsetY=offsetY,this.src=src,this._enableMerageInAtlas=enableMerageInAtlas}__class(WebGLSubImage,"laya.webgl.resource.WebGLSubImage",_super);var __proto=WebGLSubImage.prototype;Laya.imps(__proto,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),__proto.size=function(w,h){this._w=w,this._h=h,this._ctx&&this._ctx.size(w,h),this.canvas&&(this.canvas.height=h,this.canvas.width=w)},__proto.recreateResource=function(){this.startCreate(),this.size(this._w,this._h),this._ctx.drawImage(this.atlasImage,this.offsetX,this.offsetY,this._w,this._h,0,0,this._w,this._h),!(AtlasResourceManager.enabled&&this._allowMerageInAtlas)&&this.createWebGlTexture(),this.completeCreate()},__proto.createWebGlTexture=function(){var gl=WebGL.mainContext;if(!this.canvas)throw"create GLTextur err:no data:"+this.canvas;var glTex=this._source=gl.createTexture(),preTarget=WebGLContext.curBindTexTarget,preTexture=WebGLContext.curBindTexValue;WebGLContext.bindTexture(gl,3553,glTex),gl.texImage2D(3553,0,6408,6408,5121,this.canvas);var minFifter=this.minFifter,magFifter=this.magFifter,repeat=this.repeat?10497:33071;Arith.isPOT(this.width,this.height)?(this.mipmap?-1!==minFifter||(minFifter=9987):-1!==minFifter||(minFifter=9729),-1!==magFifter||(magFifter=9729),gl.texParameteri(3553,10240,magFifter),gl.texParameteri(3553,10241,minFifter),gl.texParameteri(3553,10242,repeat),gl.texParameteri(3553,10243,repeat),this.mipmap&&gl.generateMipmap(3553)):(-1!==minFifter||(minFifter=9729),-1!==magFifter||(magFifter=9729),gl.texParameteri(3553,10241,minFifter),gl.texParameteri(3553,10240,magFifter),gl.texParameteri(3553,10242,33071),gl.texParameteri(3553,10243,33071)),preTarget&&preTexture&&WebGLContext.bindTexture(gl,preTarget,preTexture),this.canvas=null,this.memorySize=this._w*this._h*4},__proto.detoryResource=function(){AtlasResourceManager.enabled&&this._allowMerageInAtlas||!this._source||(WebGL.mainContext.deleteTexture(this._source),this._source=null,this.memorySize=0)},__proto.clearAtlasSource=function(){this.canvas=null},__proto.dispose=function(){this.resourceManager.removeResource(this),_super.prototype.dispose.call(this)},__getset(0,__proto,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),__getset(0,__proto,"atlasSource",function(){return this.canvas}),__getset(0,__proto,"enableMerageInAtlas",function(){return this._allowMerageInAtlas},function(value){this._allowMerageInAtlas=value})}(Bitmap),function(_super){function Shader(vs,ps,saveName,nameMap){if(this.customCompile=!1,this._curActTexIndex=0,this.tag={},this._program=null,this._params=null,this._paramsMap={},this._offset=0,Shader.__super.call(this),!vs||!ps)throw"Shader Error";(Render.isConchApp||Render.isFlash)&&(this.customCompile=!0),this._id=++Shader._count,this._vs=vs,this._ps=ps,this._nameMap=nameMap||{},null!=saveName&&(Shader.sharders[saveName]=this)}__class(Shader,"laya.webgl.shader.Shader",_super);var __proto=Shader.prototype;return __proto.recreateResource=function(){this.startCreate(),this._compile(),this.completeCreate(),this.memorySize=0},__proto.detoryResource=function(){WebGL.mainContext.deleteShader(this._vshader),WebGL.mainContext.deleteShader(this._pshader),WebGL.mainContext.deleteProgram(this._program),this._vshader=this._pshader=this._program=null,this._params=null,this._paramsMap={},this.memorySize=0,this._curActTexIndex=0},__proto._compile=function(){if(this._vs&&this._ps&&!this._params){this._reCompile=!0,this._params=[];var result,text=[this._vs,this._ps];this.customCompile&&(result=this._preGetParams(this._vs,this._ps));var gl=WebGL.mainContext;if(this._program=gl.createProgram(),this._vshader=Shader._createShader(gl,text[0],35633),this._pshader=Shader._createShader(gl,text[1],35632),gl.attachShader(this._program,this._vshader),gl.attachShader(this._program,this._pshader),gl.linkProgram(this._program),!this.customCompile&&!gl.getProgramParameter(this._program,35714))throw gl.getProgramInfoLog(this._program);var one,i=0,n=0,attribNum=this.customCompile?result.attributes.length:gl.getProgramParameter(this._program,35721);for(i=0;i<attribNum;i++){var attrib=this.customCompile?result.attributes[i]:gl.getActiveAttrib(this._program,i);one={vartype:"attribute",ivartype:0,attrib:attrib,location:gl.getAttribLocation(this._program,attrib.name),name:attrib.name,type:attrib.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0},this._params.push(one)}var nUniformNum=this.customCompile?result.uniforms.length:gl.getProgramParameter(this._program,35718);for(i=0;i<nUniformNum;i++){var uniform=this.customCompile?result.uniforms[i]:gl.getActiveUniform(this._program,i);(one={vartype:"uniform",ivartype:1,attrib:attrib,location:gl.getUniformLocation(this._program,uniform.name),name:uniform.name,type:uniform.type,isArray:!1,isSame:!1,preValue:null,indexOfParams:0}).name.indexOf("[0]")>0&&(one.name=one.name.substr(0,one.name.length-3),one.isArray=!0,one.location=gl.getUniformLocation(this._program,one.name)),this._params.push(one)}for(i=0,n=this._params.length;i<n;i++)if(one=this._params[i],one.indexOfParams=i,one.index=1,one.value=[one.location,null],one.codename=one.name,one.name=this._nameMap[one.codename]?this._nameMap[one.codename]:one.codename,this._paramsMap[one.name]=one,one._this=this,one.uploadedValue=[],"attribute"!==one.vartype)switch(one.type){case 5124:one.fun=one.isArray?this._uniform1iv:this._uniform1i;break;case 5126:one.fun=one.isArray?this._uniform1fv:this._uniform1f;break;case 35664:one.fun=one.isArray?this._uniform_vec2v:this._uniform_vec2;break;case 35665:one.fun=one.isArray?this._uniform_vec3v:this._uniform_vec3;break;case 35666:one.fun=one.isArray?this._uniform_vec4v:this._uniform_vec4;break;case 35678:one.fun=this._uniform_sampler2D;break;case 35680:one.fun=this._uniform_samplerCube;break;case 35676:one.fun=this._uniformMatrix4fv;break;case 35670:one.fun=this._uniform1i;break;case 35674:case 35675:default:throw new Error("compile shader err!")}else one.fun=this._attribute}},__proto.getUniform=function(name){return this._paramsMap[name]},__proto._attribute=function(one,value){var gl=WebGL.mainContext;return gl.enableVertexAttribArray(one.location),gl.vertexAttribPointer(one.location,value[0],value[1],value[2],value[3],value[4]+this._offset),2},__proto._uniform1f=function(one,value){var uploadedValue=one.uploadedValue;return uploadedValue[0]!==value?(WebGL.mainContext.uniform1f(one.location,uploadedValue[0]=value),1):0},__proto._uniform1fv=function(one,value){if(value.length<4){var uploadedValue=one.uploadedValue;return uploadedValue[0]!==value[0]||uploadedValue[1]!==value[1]||uploadedValue[2]!==value[2]||uploadedValue[3]!==value[3]?(WebGL.mainContext.uniform1fv(one.location,value),uploadedValue[0]=value[0],uploadedValue[1]=value[1],uploadedValue[2]=value[2],uploadedValue[3]=value[3],1):0}return WebGL.mainContext.uniform1fv(one.location,value),1},__proto._uniform_vec2=function(one,value){var uploadedValue=one.uploadedValue;return uploadedValue[0]!==value[0]||uploadedValue[1]!==value[1]?(WebGL.mainContext.uniform2f(one.location,uploadedValue[0]=value[0],uploadedValue[1]=value[1]),1):0},__proto._uniform_vec2v=function(one,value){if(value.length<2){var uploadedValue=one.uploadedValue;return uploadedValue[0]!==value[0]||uploadedValue[1]!==value[1]||uploadedValue[2]!==value[2]||uploadedValue[3]!==value[3]?(WebGL.mainContext.uniform2fv(one.location,value),uploadedValue[0]=value[0],uploadedValue[1]=value[1],uploadedValue[2]=value[2],uploadedValue[3]=value[3],1):0}return WebGL.mainContext.uniform2fv(one.location,value),1},__proto._uniform_vec3=function(one,value){var uploadedValue=one.uploadedValue;return uploadedValue[0]!==value[0]||uploadedValue[1]!==value[1]||uploadedValue[2]!==value[2]?(WebGL.mainContext.uniform3f(one.location,uploadedValue[0]=value[0],uploadedValue[1]=value[1],uploadedValue[2]=value[2]),1):0},__proto._uniform_vec3v=function(one,value){return WebGL.mainContext.uniform3fv(one.location,value),1},__proto._uniform_vec4=function(one,value){var uploadedValue=one.uploadedValue;return uploadedValue[0]!==value[0]||uploadedValue[1]!==value[1]||uploadedValue[2]!==value[2]||uploadedValue[3]!==value[3]?(WebGL.mainContext.uniform4f(one.location,uploadedValue[0]=value[0],uploadedValue[1]=value[1],uploadedValue[2]=value[2],uploadedValue[3]=value[3]),1):0},__proto._uniform_vec4v=function(one,value){return WebGL.mainContext.uniform4fv(one.location,value),1},__proto._uniformMatrix2fv=function(one,value){return WebGL.mainContext.uniformMatrix2fv(one.location,!1,value),1},__proto._uniformMatrix3fv=function(one,value){return WebGL.mainContext.uniformMatrix3fv(one.location,!1,value),1},__proto._uniformMatrix4fv=function(one,value){return WebGL.mainContext.uniformMatrix4fv(one.location,!1,value),1},__proto._uniform1i=function(one,value){var uploadedValue=one.uploadedValue;return uploadedValue[0]!==value?(WebGL.mainContext.uniform1i(one.location,uploadedValue[0]=value),1):0},__proto._uniform1iv=function(one,value){return WebGL.mainContext.uniform1iv(one.location,value),1},__proto._uniform_ivec2=function(one,value){var uploadedValue=one.uploadedValue;return uploadedValue[0]!==value[0]||uploadedValue[1]!==value[1]?(WebGL.mainContext.uniform2i(one.location,uploadedValue[0]=value[0],uploadedValue[1]=value[1]),1):0},__proto._uniform_ivec2v=function(one,value){return WebGL.mainContext.uniform2iv(one.location,value),1},__proto._uniform_vec3i=function(one,value){var uploadedValue=one.uploadedValue;return uploadedValue[0]!==value[0]||uploadedValue[1]!==value[1]||uploadedValue[2]!==value[2]?(WebGL.mainContext.uniform3i(one.location,uploadedValue[0]=value[0],uploadedValue[1]=value[1],uploadedValue[2]=value[2]),1):0},__proto._uniform_vec3vi=function(one,value){return WebGL.mainContext.uniform3iv(one.location,value),1},__proto._uniform_vec4i=function(one,value){var uploadedValue=one.uploadedValue;return uploadedValue[0]!==value[0]||uploadedValue[1]!==value[1]||uploadedValue[2]!==value[2]||uploadedValue[3]!==value[3]?(WebGL.mainContext.uniform4i(one.location,uploadedValue[0]=value[0],uploadedValue[1]=value[1],uploadedValue[2]=value[2],uploadedValue[3]=value[3]),1):0},__proto._uniform_vec4vi=function(one,value){return WebGL.mainContext.uniform4iv(one.location,value),1},__proto._uniform_sampler2D=function(one,value){var gl=WebGL.mainContext,uploadedValue=one.uploadedValue;return null==uploadedValue[0]?(uploadedValue[0]=this._curActTexIndex,gl.uniform1i(one.location,this._curActTexIndex),gl.activeTexture(Shader._TEXTURES[this._curActTexIndex]),WebGLContext.bindTexture(gl,3553,value),this._curActTexIndex++,1):(gl.activeTexture(Shader._TEXTURES[uploadedValue[0]]),WebGLContext.bindTexture(gl,3553,value),0)},__proto._uniform_samplerCube=function(one,value){var gl=WebGL.mainContext,uploadedValue=one.uploadedValue;return null==uploadedValue[0]?(uploadedValue[0]=this._curActTexIndex,gl.uniform1i(one.location,this._curActTexIndex),gl.activeTexture(Shader._TEXTURES[this._curActTexIndex]),WebGLContext.bindTexture(gl,34067,value),this._curActTexIndex++,1):(gl.activeTexture(Shader._TEXTURES[uploadedValue[0]]),WebGLContext.bindTexture(gl,34067,value),0)},__proto._noSetValue=function(one){console.log("no....:"+one.name)},__proto.uploadOne=function(name,value){this.activeResource(),WebGLContext.UseProgram(this._program);var one=this._paramsMap[name];one.fun.call(this,one,value)},__proto.uploadTexture2D=function(value){Stat.shaderCall++;var gl=WebGL.mainContext;gl.activeTexture(33984),WebGLContext.bindTexture(gl,3553,value)},__proto.upload=function(shaderValue,params){BaseShader.activeShader=this,BaseShader.bindShader=this,this.activeResource(),WebGLContext.UseProgram(this._program),this._reCompile?(params=this._params,this._reCompile=!1):params=params||this._params;for(var one,value,n=params.length,shaderCall=0,i=0;i<n;i++)null!==(value=shaderValue[(one=params[i]).name])&&(shaderCall+=one.fun.call(this,one,value));Stat.shaderCall+=shaderCall},__proto.uploadArray=function(shaderValue,length,_bufferUsage){BaseShader.activeShader=this,BaseShader.bindShader=this,this.activeResource(),WebGLContext.UseProgram(this._program);this._params;for(var value,one,shaderCall=0,i=length-2;i>=0;i-=2)(one=this._paramsMap[shaderValue[i]])&&null!=(value=shaderValue[i+1])&&(_bufferUsage&&_bufferUsage[one.name]&&_bufferUsage[one.name].bind(),shaderCall+=one.fun.call(this,one,value));Stat.shaderCall+=shaderCall},__proto.getParams=function(){return this._params},__proto._preGetParams=function(vs,ps){var text=[vs,ps],result={},attributes=[],uniforms=[],definesInfo={},definesName=[];result.attributes=attributes,result.uniforms=uniforms,result.defines=definesInfo;for(var removeAnnotation=new RegExp("(/\\*([^*]|[\\r\\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+/)|(//.*)","g"),reg=new RegExp("(\".*\")|('.*')|([#\\w\\*-\\.+/()=<>{}\\\\]+)|([,;:\\\\])","g"),i=0,n=0,s=0;s<2;s++){text[s]=text[s].replace(removeAnnotation,"");var tempelse,words=text[s].match(reg);for(i=0,n=words.length;i<n;i++){var word=words[i];if("attribute"==word||"uniform"==word)i=this.parseOne(attributes,uniforms,words,i,word,!0);else{if("#define"==word){definesName[word=words[++i]]=1;continue}if("#ifdef"==word){definesInfo[tempelse=words[++i]]=definesInfo[tempelse]||[];for(i++;i<n;i++)if("attribute"==(word=words[i])||"uniform"==word)i=this.parseOne(attributes,uniforms,words,i,word,definesName[tempelse]);else if("#else"==word)for(i++;i<n;i++)if("attribute"==(word=words[i])||"uniform"==word)i=this.parseOne(attributes,uniforms,words,i,word,!definesName[tempelse]);else if("#endif"==word)break}}}}return result},__proto.parseOne=function(attributes,uniforms,words,i,word,b){var one={type:Shader.shaderParamsMap[words[i+1]],name:words[i+2],size:isNaN(parseInt(words[i+3]))?1:parseInt(words[i+3])};return b&&("attribute"==word?attributes.push(one):uniforms.push(one)),":"==words[i+3]&&(one.type=words[i+4],i+=2),i+=2},__proto.dispose=function(){this.resourceManager.removeResource(this),laya.resource.Resource.prototype.dispose.call(this)},Shader.getShader=function(name){return Shader.sharders[name]},Shader.create=function(vs,ps,saveName,nameMap){return new Shader(vs,ps,saveName,nameMap)},Shader.withCompile=function(nameID,define,shaderName,createShader){if(shaderName&&Shader.sharders[shaderName])return Shader.sharders[shaderName];var pre=Shader._preCompileShader[2e-4*nameID];if(!pre)throw new Error("withCompile shader err!"+nameID);return pre.createShader(define,shaderName,createShader)},Shader.withCompile2D=function(nameID,mainID,define,shaderName,createShader){if(shaderName&&Shader.sharders[shaderName])return Shader.sharders[shaderName];var pre=Shader._preCompileShader[2e-4*nameID+mainID];if(!pre)throw new Error("withCompile shader err!"+nameID+" "+mainID);return pre.createShader(define,shaderName,createShader)},Shader.addInclude=function(fileName,txt){if(!txt||0===txt.length)throw new Error("add shader include file err:"+fileName);if(Shader._includeFiles[fileName])throw new Error("add shader include file err, has add:"+fileName);Shader._includeFiles[fileName]=txt},Shader.preCompile=function(nameID,vs,ps,nameMap){var id=2e-4*nameID;Shader._preCompileShader[id]=new ShaderCompile(id,vs,ps,nameMap,Shader._includeFiles)},Shader.preCompile2D=function(nameID,mainID,vs,ps,nameMap){var id=2e-4*nameID+mainID;Shader._preCompileShader[id]=new ShaderCompile(id,vs,ps,nameMap,Shader._includeFiles)},Shader._createShader=function(gl,str,type){var shader=gl.createShader(type);if(gl.shaderSource(shader,str),gl.compileShader(shader),!gl.getShaderParameter(shader,35713))throw gl.getShaderInfoLog(shader);return shader},Shader._TEXTURES=[33984,33985,33986,33987,33988,33989,33990,,33991,33992],Shader._includeFiles={},Shader._count=0,Shader._preCompileShader={},Shader.SHADERNAME2ID=2e-4,Shader.sharders=(Shader.sharders=[],Shader.sharders.length=32,Shader.sharders),__static(Shader,["shaderParamsMap",function(){return this.shaderParamsMap={float:5126,int:5124,bool:35670,vec2:35664,vec3:35665,vec4:35666,ivec2:35667,ivec3:35668,ivec4:35669,bvec2:35671,bvec3:35672,bvec4:35673,mat2:35674,mat3:35675,mat4:35676,sampler2D:35678,samplerCube:35680}},"nameKey",function(){return this.nameKey=new StringKey}]),Shader}(BaseShader)),Buffer2D=function(_super){function Buffer2D(){this._maxsize=0,this._upload=!0,this._uploadSize=0,Buffer2D.__super.call(this),this.lock=!0}__class(Buffer2D,"laya.webgl.utils.Buffer2D",_super);var __proto=Buffer2D.prototype;return __proto._bufferData=function(){this._maxsize=Math.max(this._maxsize,this._byteLength),Stat.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,Buffer._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),Buffer._gl.bufferSubData(this._bufferType,0,this._buffer)},__proto._bufferSubData=function(offset,dataStart,dataLength){if(void 0===offset&&(offset=0),void 0===dataStart&&(dataStart=0),void 0===dataLength&&(dataLength=0),this._maxsize=Math.max(this._maxsize,this._byteLength),Stat.loopCount%30==0&&(this._buffer.byteLength>this._maxsize+64&&(this.memorySize=this._buffer.byteLength,this._buffer=this._buffer.slice(0,this._maxsize+64),this._checkArrayUse()),this._maxsize=this._byteLength),this._uploadSize<this._buffer.byteLength&&(this._uploadSize=this._buffer.byteLength,Buffer._gl.bufferData(this._bufferType,this._uploadSize,this._bufferUsage),this.memorySize=this._uploadSize),dataStart||dataLength){var subBuffer=this._buffer.slice(dataStart,dataLength);Buffer._gl.bufferSubData(this._bufferType,offset,subBuffer)}else Buffer._gl.bufferSubData(this._bufferType,offset,this._buffer)},__proto._checkArrayUse=function(){},__proto._bind_upload=function(){return!!this._upload&&(this._upload=!1,this._bind(),this._bufferData(),!0)},__proto._bind_subUpload=function(offset,dataStart,dataLength){return void 0===offset&&(offset=0),void 0===dataStart&&(dataStart=0),void 0===dataLength&&(dataLength=0),!!this._upload&&(this._upload=!1,this._bind(),this._bufferSubData(offset,dataStart,dataLength),!0)},__proto._resizeBuffer=function(nsz,copy){if(nsz<this._buffer.byteLength)return this;if(this.memorySize=nsz,copy&&this._buffer&&this._buffer.byteLength>0){var newbuffer=new ArrayBuffer(nsz);new Uint8Array(newbuffer).set(new Uint8Array(this._buffer),0),this._buffer=newbuffer}else this._buffer=new ArrayBuffer(nsz);return this._checkArrayUse(),this._upload=!0,this},__proto.append=function(data){this._upload=!0;var n,byteLen=0;byteLen=data.byteLength,data instanceof Uint8Array?(this._resizeBuffer(this._byteLength+byteLen,!0),n=new Uint8Array(this._buffer,this._byteLength)):data instanceof Uint16Array?(this._resizeBuffer(this._byteLength+byteLen,!0),n=new Uint16Array(this._buffer,this._byteLength)):data instanceof Float32Array&&(this._resizeBuffer(this._byteLength+byteLen,!0),n=new Float32Array(this._buffer,this._byteLength)),n.set(data,0),this._byteLength+=byteLen,this._checkArrayUse()},__proto.appendEx=function(data,type){this._upload=!0;var byteLen=0;byteLen=data.byteLength,this._resizeBuffer(this._byteLength+byteLen,!0),new type(this._buffer,this._byteLength).set(data,0),this._byteLength+=byteLen,this._checkArrayUse()},__proto.appendEx2=function(data,type,dataLen,perDataLen){void 0===perDataLen&&(perDataLen=1),this._upload=!0;var n,byteLen=0;byteLen=dataLen*perDataLen,this._resizeBuffer(this._byteLength+byteLen,!0),n=new type(this._buffer,this._byteLength);var i=0;for(i=0;i<dataLen;i++)n[i]=data[i];this._byteLength+=byteLen,this._checkArrayUse()},__proto.getBuffer=function(){return this._buffer},__proto.setNeedUpload=function(){this._upload=!0},__proto.getNeedUpload=function(){return this._upload},__proto.upload=function(){var scuess=this._bind_upload();return Buffer._gl.bindBuffer(this._bufferType,null),Buffer._bindActive[this._bufferType]=null,BaseShader.activeShader=null,scuess},__proto.subUpload=function(offset,dataStart,dataLength){void 0===offset&&(offset=0),void 0===dataStart&&(dataStart=0),void 0===dataLength&&(dataLength=0);var scuess=this._bind_subUpload();return Buffer._gl.bindBuffer(this._bufferType,null),Buffer._bindActive[this._bufferType]=null,BaseShader.activeShader=null,scuess},__proto.detoryResource=function(){_super.prototype.detoryResource.call(this),this._upload=!0,this._uploadSize=0},__proto.clear=function(){this._byteLength=0,this._upload=!0},__getset(0,__proto,"bufferLength",function(){return this._buffer.byteLength}),__getset(0,__proto,"byteLength",_super.prototype._$get_byteLength,function(value){this._byteLength!==value&&(value<=this._buffer.byteLength||this._resizeBuffer(2*value+256,!0),this._byteLength=value)}),Buffer2D.__int__=function(gl){IndexBuffer2D.QuadrangleIB=IndexBuffer2D.create(35044),GlUtils.fillIBQuadrangle(IndexBuffer2D.QuadrangleIB,16)},Buffer2D.FLOAT32=4,Buffer2D.SHORT=2,Buffer2D}(Buffer),TextSV=(function(_super){function GlowSV(args){this.u_blurX=!1,this.u_color=null,this.u_offset=null,this.u_strength=NaN,this.u_texW=0,this.u_texH=0,GlowSV.__super.call(this,9)}__class(GlowSV,"laya.webgl.shader.d2.value.GlowSV",_super);var __proto=GlowSV.prototype;__proto.setValue=function(vo){_super.prototype.setValue.call(this,vo)},__proto.clear=function(){_super.prototype.clear.call(this)}}(TextureSV),function(_super){function TextSV(args){TextSV.__super.call(this,64),this.defines.add(64)}__class(TextSV,"laya.webgl.shader.d2.value.TextSV",_super);var __proto=TextSV.prototype;return __proto.release=function(){TextSV.pool[TextSV._length++]=this,this.clear()},__proto.clear=function(){_super.prototype.clear.call(this)},TextSV.create=function(){return TextSV._length?TextSV.pool[--TextSV._length]:new TextSV(null)},TextSV.pool=[],TextSV._length=0,TextSV}(TextureSV)),Shader2X=function(_super){function Shader2X(vs,ps,saveName,nameMap){this._params2dQuick1=null,this._params2dQuick2=null,this._shaderValueWidth=NaN,this._shaderValueHeight=NaN,Shader2X.__super.call(this,vs,ps,saveName,nameMap)}__class(Shader2X,"laya.webgl.shader.d2.Shader2X",_super);var __proto=Shader2X.prototype;return __proto.upload2dQuick1=function(shaderValue){this.upload(shaderValue,this._params2dQuick1||this._make2dQuick1())},__proto._make2dQuick1=function(){if(!this._params2dQuick1){this.activeResource(),this._params2dQuick1=[];for(var one,params=this._params,i=0,n=params.length;i<n;i++)one=params[i],(Render.isFlash||"size"!==one.name&&"mmat"!==one.name&&"position"!==one.name&&"texcoord"!==one.name)&&this._params2dQuick1.push(one)}return this._params2dQuick1},__proto.detoryResource=function(){_super.prototype.detoryResource.call(this),this._params2dQuick1=null,this._params2dQuick2=null},__proto.upload2dQuick2=function(shaderValue){this.upload(shaderValue,this._params2dQuick2||this._make2dQuick2())},__proto._make2dQuick2=function(){if(!this._params2dQuick2){this.activeResource(),this._params2dQuick2=[];for(var one,params=this._params,i=0,n=params.length;i<n;i++)one=params[i],(Render.isFlash||"size"!==one.name)&&this._params2dQuick2.push(one)}return this._params2dQuick2},Shader2X.create=function(vs,ps,saveName,nameMap){return new Shader2X(vs,ps,saveName,nameMap)},Shader2X}(Shader),IndexBuffer2D=function(_super){function IndexBuffer2D(bufferUsage){this._uint8Array=null,this._uint16Array=null,void 0===bufferUsage&&(bufferUsage=35044),IndexBuffer2D.__super.call(this),this._bufferUsage=bufferUsage,this._bufferType=34963,Render.isFlash||(this._buffer=new ArrayBuffer(8))}__class(IndexBuffer2D,"laya.webgl.utils.IndexBuffer2D",_super);var __proto=IndexBuffer2D.prototype;return __proto._checkArrayUse=function(){this._uint8Array&&(this._uint8Array=new Uint8Array(this._buffer)),this._uint16Array&&(this._uint16Array=new Uint16Array(this._buffer))},__proto.getUint8Array=function(){return this._uint8Array||(this._uint8Array=new Uint8Array(this._buffer))},__proto.getUint16Array=function(){return this._uint16Array||(this._uint16Array=new Uint16Array(this._buffer))},IndexBuffer2D.QuadrangleIB=null,IndexBuffer2D.create=function(bufferUsage){return void 0===bufferUsage&&(bufferUsage=35044),new IndexBuffer2D(bufferUsage)},IndexBuffer2D}(Buffer2D),VertexBuffer2D=function(_super){function VertexBuffer2D(vertexStride,bufferUsage){this._floatArray32=null,this._vertexStride=0,VertexBuffer2D.__super.call(this),this._vertexStride=vertexStride,this._bufferUsage=bufferUsage,this._bufferType=34962,Render.isFlash||(this._buffer=new ArrayBuffer(8)),this.getFloat32Array()}__class(VertexBuffer2D,"laya.webgl.utils.VertexBuffer2D",_super);var __proto=VertexBuffer2D.prototype;return __proto.getFloat32Array=function(){return this._floatArray32||(this._floatArray32=new Float32Array(this._buffer))},__proto.bind=function(ibBuffer){ibBuffer&&ibBuffer._bind(),this._bind()},__proto.insertData=function(data,pos){this.getFloat32Array().set(data,pos),this._upload=!0},__proto.bind_upload=function(ibBuffer){ibBuffer._bind_upload()||ibBuffer._bind(),this._bind_upload()||this._bind()},__proto._checkArrayUse=function(){this._floatArray32&&(this._floatArray32=new Float32Array(this._buffer))},__proto.detoryResource=function(){_super.prototype.detoryResource.call(this);for(var i=0;i<10;i++)WebGL.mainContext.disableVertexAttribArray(i)},__getset(0,__proto,"vertexStride",function(){return this._vertexStride}),VertexBuffer2D.create=function(vertexStride,bufferUsage){return void 0===bufferUsage&&(bufferUsage=35048),new VertexBuffer2D(vertexStride,bufferUsage)},VertexBuffer2D}(Buffer2D),WebGLImage=function(_super){function WebGLImage(src,def){this._image=null,this._allowMerageInAtlas=!1,this._enableMerageInAtlas=!1,this.repeat=!1,this.mipmap=!1,this.minFifter=0,this.magFifter=0,WebGLImage.__super.call(this,src,def),this.repeat=!1,this.mipmap=!1,this.minFifter=-1,this.magFifter=-1,"string"==typeof src?(this._src=src,this._image=new Browser.window.Image,def&&(def.onload&&(this.onload=def.onload),def.onerror&&(this.onerror=def.onerror),def.onCreate&&def.onCreate(this)),this._image.crossOrigin=src&&0==src.indexOf("data:")?null:"",src&&(this._image.src=src)):(this._src=def,this._image=src.source,this.onresize()),src&&(this._image.src=src),this._enableMerageInAtlas=!0}__class(WebGLImage,"laya.webgl.resource.WebGLImage",_super);var __proto=WebGLImage.prototype;return Laya.imps(__proto,{"laya.webgl.resource.IMergeAtlasBitmap":!0}),__proto._init_=function(src,def){},__proto._createWebGlTexture=function(){if(!this._image)throw"create GLTextur err:no data:"+this._image;var gl=WebGL.mainContext,glTex=this._source=gl.createTexture(),preTarget=WebGLContext.curBindTexTarget,preTexture=WebGLContext.curBindTexValue;WebGLContext.bindTexture(gl,3553,glTex),gl.texImage2D(3553,0,6408,6408,5121,this._image);var minFifter=this.minFifter,magFifter=this.magFifter,repeat=this.repeat?10497:33071,isPot=Arith.isPOT(this._w,this._h);isPot?(this.mipmap?-1!==minFifter||(minFifter=9987):-1!==minFifter||(minFifter=9729),-1!==magFifter||(magFifter=9729),gl.texParameteri(3553,10241,minFifter),gl.texParameteri(3553,10240,magFifter),gl.texParameteri(3553,10242,repeat),gl.texParameteri(3553,10243,repeat),this.mipmap&&gl.generateMipmap(3553)):(-1!==minFifter||(minFifter=9729),-1!==magFifter||(magFifter=9729),gl.texParameteri(3553,10241,minFifter),gl.texParameteri(3553,10240,magFifter),gl.texParameteri(3553,10242,33071),gl.texParameteri(3553,10243,33071)),preTarget&&preTexture&&WebGLContext.bindTexture(gl,preTarget,preTexture),this._image.onload=null,this._image=null,this.memorySize=isPot?this._w*this._h*4*(1+1/3):this._w*this._h*4,this._recreateLock=!1},__proto.recreateResource=function(){var _$this=this;if(null!=this._src&&""!==this._src)if(this._needReleaseAgain=!1,this._image){if(this._recreateLock)return;this.startCreate(),this._allowMerageInAtlas&&this._enableMerageInAtlas?(this.memorySize=0,this._recreateLock=!1):this._createWebGlTexture(),this.completeCreate()}else{this._recreateLock=!0,this.startCreate();var _this=this;this._image=new Browser.window.Image,this._image.crossOrigin=0==this._src.indexOf("data:")?null:"",this._image.onload=function(){if(_this._needReleaseAgain)return _this._needReleaseAgain=!1,_this._image.onload=null,void(_this._image=null);_this._allowMerageInAtlas&&_this._enableMerageInAtlas?(_$this.memorySize=0,_$this._recreateLock=!1):_this._createWebGlTexture(),_this.completeCreate()},this._image.src=this._src}},__proto.detoryResource=function(){this._recreateLock&&(this._needReleaseAgain=!0),this._source&&(WebGL.mainContext.deleteTexture(this._source),this._source=null,this._image=null,this.memorySize=0)},__proto.onresize=function(){this._w=this._image.width,this._h=this._image.height,AtlasResourceManager.enabled&&this._w<AtlasResourceManager.atlasLimitWidth&&this._h<AtlasResourceManager.atlasLimitHeight?this._allowMerageInAtlas=!0:this._allowMerageInAtlas=!1},__proto.clearAtlasSource=function(){this._image=null},__getset(0,__proto,"image",function(){return this._image}),__getset(0,__proto,"allowMerageInAtlas",function(){return this._allowMerageInAtlas}),__getset(0,__proto,"atlasSource",function(){return this._image}),__getset(0,__proto,"enableMerageInAtlas",function(){return this._enableMerageInAtlas},function(value){this._enableMerageInAtlas=value}),__getset(0,__proto,"onload",null,function(value){var _$this=this;this._onload=value,this._image&&(this._image.onload=null!=this._onload?function(){_$this.onresize(),_$this._onload()}:null)}),__getset(0,__proto,"onerror",null,function(value){var _$this=this;this._onerror=value,this._image&&(this._image.onerror=null!=this._onerror?function(){_$this._onerror()}:null)}),WebGLImage}(HTMLImage);Laya.__init([DrawText,AtlasGrid,WebGLContext2D,ShaderCompile])}(0,0,Laya),function(window,document,Laya){Laya.un,Laya.uns;var __static=Laya.static,__class=Laya.class,__getset=Laya.getset,Animation=(Laya.__newvec,laya.display.Animation),ClassUtils=laya.utils.ClassUtils,ColorFilter=laya.filters.ColorFilter,Ease=laya.utils.Ease,Event=laya.events.Event,Font=laya.display.css.Font,FrameAnimation=laya.display.FrameAnimation,Graphics=laya.display.Graphics,Handler=laya.utils.Handler,Input=laya.display.Input,Loader=laya.net.Loader,Point=(laya.display.Node,laya.maths.Point),Rectangle=laya.maths.Rectangle,Render=laya.renders.Render,Sprite=laya.display.Sprite,Text=laya.display.Text,Texture=laya.resource.Texture,Tween=laya.utils.Tween,Utils=laya.utils.Utils;Laya.interface("laya.ui.IItem"),Laya.interface("laya.ui.ISelect"),Laya.interface("laya.ui.IRender"),Laya.interface("laya.ui.IComponent"),Laya.interface("laya.ui.IBox","IComponent");var LayoutStyle=function(){function LayoutStyle(){this.enable=!1,this.top=NaN,this.bottom=NaN,this.left=NaN,this.right=NaN,this.centerX=NaN,this.centerY=NaN,this.anchorX=NaN,this.anchorY=NaN}return __class(LayoutStyle,"laya.ui.LayoutStyle"),__static(LayoutStyle,["EMPTY",function(){return this.EMPTY=new LayoutStyle}]),LayoutStyle}(),Styles=function(){function Styles(){}return __class(Styles,"laya.ui.Styles"),Styles.labelColor="#000000",Styles.buttonStateNum=3,Styles.scrollBarMinNum=15,Styles.scrollBarDelayTime=500,__static(Styles,["defaultSizeGrid",function(){return this.defaultSizeGrid=[4,4,4,4,0]},"labelPadding",function(){return this.labelPadding=[2,2,2,2]},"inputLabelPadding",function(){return this.inputLabelPadding=[1,1,1,3]},"buttonLabelColors",function(){return this.buttonLabelColors=["#32556b","#32cc6b","#ff0000","#C0C0C0"]},"comboBoxItemColors",function(){return this.comboBoxItemColors=["#5e95b6","#ffffff","#000000","#8fa4b1","#ffffff"]}]),Styles}(),UIUtils=function(){function UIUtils(){}return __class(UIUtils,"laya.ui.UIUtils"),UIUtils.fillArray=function(arr,str,type){var temp=arr.concat();if(str)for(var a=str.split(","),i=0,n=Math.min(temp.length,a.length);i<n;i++){var value=a[i];temp[i]="true"==value||"false"!=value&&value,null!=type&&(temp[i]=type(value))}return temp},UIUtils.toColor=function(color){return Utils.toHexColor(color)},UIUtils.gray=function(traget,isGray){void 0===isGray&&(isGray=!0),isGray?UIUtils.addFilter(traget,UIUtils.grayFilter):UIUtils.clearFilter(traget,ColorFilter)},UIUtils.addFilter=function(target,filter){var filters=target.filters||[];filters.push(filter),target.filters=filters},UIUtils.clearFilter=function(target,filterType){var filters=target.filters;if(null!=filters&&filters.length>0){for(var i=filters.length-1;i>-1;i--){var filter=filters[i];Laya.__typeof(filter,filterType)&&filters.splice(i,1)}target.filters=filters}},__static(UIUtils,["grayFilter",function(){return this.grayFilter=new ColorFilter([.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,.3086,.6094,.082,0,0,0,0,0,1,0])}]),UIUtils}(),UIConfig=function(){function UIConfig(){}return __class(UIConfig,"UIConfig"),UIConfig.touchScrollEnable=!0,UIConfig.mouseWheelEnable=!0,UIConfig.showButtons=!0,UIConfig.popupBgColor="#000000",UIConfig.popupBgAlpha=.5,UIConfig.closeDialogOnSide=!0,UIConfig}(),AutoBitmap=function(_super){function AutoBitmap(){this.autoCacheCmd=!0,this._width=0,this._height=0,this._source=null,this._sizeGrid=null,this._isChanged=!1,this._offset=null,AutoBitmap.__super.call(this)}__class(AutoBitmap,"laya.ui.AutoBitmap",_super);var __proto=AutoBitmap.prototype;return __proto.destroy=function(){_super.prototype.destroy.call(this),this._source=null,this._sizeGrid=null,this._offset=null},__proto._setChanged=function(){this._isChanged||(this._isChanged=!0,Laya.timer.callLater(this,this.changeSource))},__proto.changeSource=function(){AutoBitmap.cacheCount++>50&&AutoBitmap.clearCache(),this._isChanged=!1;var source=this._source;if(source&&source.bitmap){var width=this.width,height=this.height,sizeGrid=this._sizeGrid,sw=source.sourceWidth,sh=source.sourceHeight;if(!sizeGrid||sw===width&&sh===height)this.cleanByTexture(source,this._offset?this._offset[0]:0,this._offset?this._offset[1]:0,width,height);else{source.$_GID||(source.$_GID=Utils.getGID());var key=source.$_GID+"."+width+"."+height+"."+sizeGrid.join(".");if(AutoBitmap.cmdCaches[key])return void(this.cmds=AutoBitmap.cmdCaches[key]);this.clear();var top=sizeGrid[0],right=sizeGrid[1],bottom=sizeGrid[2],left=sizeGrid[3],repeat=sizeGrid[4];left+right>width&&(right=0),left&&top&&this.drawTexture(AutoBitmap.getTexture(source,0,0,left,top),0,0,left,top),right&&top&&this.drawTexture(AutoBitmap.getTexture(source,sw-right,0,right,top),width-right,0,right,top),left&&bottom&&this.drawTexture(AutoBitmap.getTexture(source,0,sh-bottom,left,bottom),0,height-bottom,left,bottom),right&&bottom&&this.drawTexture(AutoBitmap.getTexture(source,sw-right,sh-bottom,right,bottom),width-right,height-bottom,right,bottom),top&&this.drawBitmap(repeat,AutoBitmap.getTexture(source,left,0,sw-left-right,top),left,0,width-left-right,top),bottom&&this.drawBitmap(repeat,AutoBitmap.getTexture(source,left,sh-bottom,sw-left-right,bottom),left,height-bottom,width-left-right,bottom),left&&this.drawBitmap(repeat,AutoBitmap.getTexture(source,0,top,left,sh-top-bottom),0,top,left,height-top-bottom),right&&this.drawBitmap(repeat,AutoBitmap.getTexture(source,sw-right,top,right,sh-top-bottom),width-right,top,right,height-top-bottom),this.drawBitmap(repeat,AutoBitmap.getTexture(source,left,top,sw-left-right,sh-top-bottom),left,top,width-left-right,height-top-bottom),this.autoCacheCmd&&!Render.isConchApp&&(AutoBitmap.cmdCaches[key]=this.cmds)}this._repaint()}},__proto.drawBitmap=function(repeat,tex,x,y,width,height){void 0===width&&(width=0),void 0===height&&(height=0),!repeat||tex.width==width&&tex.height==height?this.drawTexture(tex,x,y,width,height):this.fillTexture(tex,x,y,width,height)},__getset(0,__proto,"sizeGrid",function(){return this._sizeGrid},function(value){this._sizeGrid=value,this._setChanged()}),__getset(0,__proto,"width",function(){return this._width?this._width:this._source?this._source.sourceWidth:0},function(value){this._width!=value&&(this._width=value,this._setChanged())}),__getset(0,__proto,"height",function(){return this._height?this._height:this._source?this._source.sourceHeight:0},function(value){this._height!=value&&(this._height=value,this._setChanged())}),__getset(0,__proto,"source",function(){return this._source},function(value){value?(this._source=value,this._setChanged()):(this._source=null,this.clear())}),AutoBitmap.getTexture=function(tex,x,y,width,height){width<=0&&(width=1),height<=0&&(height=1),tex.$_GID||(tex.$_GID=Utils.getGID());var key=tex.$_GID+"."+x+"."+y+"."+width+"."+height,texture=AutoBitmap.textureCache[key];return texture||(texture=AutoBitmap.textureCache[key]=Texture.createFromTexture(tex,x,y,width,height)),texture},AutoBitmap.clearCache=function(){AutoBitmap.cacheCount=0,AutoBitmap.cmdCaches={},AutoBitmap.textureCache={}},AutoBitmap.setCache=function(key,value){AutoBitmap.cacheCount++,AutoBitmap.textureCache[key]=value},AutoBitmap.getCache=function(key){return AutoBitmap.textureCache[key]},AutoBitmap.cmdCaches={},AutoBitmap.cacheCount=0,AutoBitmap.textureCache={},AutoBitmap}(Graphics),Component=(function(_super){function UIEvent(){UIEvent.__super.call(this)}__class(UIEvent,"laya.ui.UIEvent",_super),UIEvent.SHOW_TIP="showtip",UIEvent.HIDE_TIP="hidetip"}(Event),function(_super){function Component(){this._comXml=null,this._dataSource=null,this._toolTip=null,this._tag=null,this._disabled=!1,this._gray=!1,Component.__super.call(this),this._layout=LayoutStyle.EMPTY,this.preinitialize(),this.createChildren(),this.initialize()}__class(Component,"laya.ui.Component",_super);var __proto=Component.prototype;return Laya.imps(__proto,{"laya.ui.IComponent":!0}),__proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),_super.prototype.destroy.call(this,destroyChild),this._dataSource=this._layout=null,this._tag=null,this._toolTip=null},__proto.preinitialize=function(){},__proto.createChildren=function(){},__proto.initialize=function(){},__proto.callLater=function(method,args){Laya.timer.callLater(this,method,args)},__proto.runCallLater=function(method){Laya.timer.runCallLater(this,method)},__proto.commitMeasure=function(){},__proto.changeSize=function(){this.event("resize")},__proto.getLayout=function(){return this._layout===LayoutStyle.EMPTY&&(this._layout=new LayoutStyle),this._layout},__proto.onRemoved=function(){this.parent.off("resize",this,this.onCompResize)},__proto.onAdded=function(){this.parent.on("resize",this,this.onCompResize),this.resetLayoutX(),this.resetLayoutY()},__proto.onCompResize=function(){this._layout&&this._layout.enable&&(this.resetLayoutX(),this.resetLayoutY())},__proto.resetLayoutX=function(){var layout=this._layout;isNaN(layout.anchorX)||(this.pivotX=layout.anchorX*this.width);var parent=this.parent;parent&&(isNaN(layout.centerX)?isNaN(layout.left)?isNaN(layout.right)||(this.x=Math.round(parent.width-this.displayWidth-layout.right+this.pivotX*this.scaleX)):(this.x=Math.round(layout.left+this.pivotX*this.scaleX),isNaN(layout.right)||(this.width=(parent._width-layout.left-layout.right)/this.scaleX)):this.x=Math.round(.5*(parent.width-this.displayWidth)+layout.centerX+this.pivotX*this.scaleX))},__proto.resetLayoutY=function(){var layout=this._layout;isNaN(layout.anchorY)||(this.pivotY=layout.anchorY*this.height);var parent=this.parent;parent&&(isNaN(layout.centerY)?isNaN(layout.top)?isNaN(layout.bottom)||(this.y=Math.round(parent.height-this.displayHeight-layout.bottom+this.pivotY*this.scaleY)):(this.y=Math.round(layout.top+this.pivotY*this.scaleY),isNaN(layout.bottom)||(this.height=(parent._height-layout.top-layout.bottom)/this.scaleY)):this.y=Math.round(.5*(parent.height-this.displayHeight)+layout.centerY+this.pivotY*this.scaleY))},__proto.onMouseOver=function(e){Laya.stage.event("showtip",this._toolTip)},__proto.onMouseOut=function(e){Laya.stage.event("hidetip",this._toolTip)},__getset(0,__proto,"displayWidth",function(){return this.width*this.scaleX}),__getset(0,__proto,"width",function(){return this._width?this._width:this.measureWidth},function(value){this._width!=value&&(this._width=value,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerX)&&isNaN(this._layout.right)&&isNaN(this._layout.anchorX)||this.resetLayoutX())}),__getset(0,__proto,"measureWidth",function(){var max=0;this.commitMeasure();for(var i=this.numChildren-1;i>-1;i--){var comp=this.getChildAt(i);comp.visible&&(max=Math.max(comp.x+comp.width*comp.scaleX,max))}return max}),__getset(0,__proto,"layOutEabled",null,function(value){this._layout&&this._layout.enable!=value&&(this._layout.enable=value,this.parent?this.onAdded():(this.on("added",this,this.onAdded),this.on("removed",this,this.onRemoved)))}),__getset(0,__proto,"displayHeight",function(){return this.height*this.scaleY}),__getset(0,__proto,"height",function(){return this._height?this._height:this.measureHeight},function(value){this._height!=value&&(this._height=value,this.conchModel&&this.conchModel.size(this._width,this._height),this.callLater(this.changeSize),!this._layout.enable||isNaN(this._layout.centerY)&&isNaN(this._layout.bottom)&&isNaN(this._layout.anchorY)||this.resetLayoutY())}),__getset(0,__proto,"dataSource",function(){return this._dataSource},function(value){this._dataSource=value;for(var prop in this._dataSource)this.hasOwnProperty(prop)&&(this[prop]=this._dataSource[prop])}),__getset(0,__proto,"scaleY",_super.prototype._$get_scaleY,function(value){_super.prototype._$get_scaleY.call(this)!=value&&(_super.prototype._$set_scaleY.call(this,value),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutY())}),__getset(0,__proto,"measureHeight",function(){var max=0;this.commitMeasure();for(var i=this.numChildren-1;i>-1;i--){var comp=this.getChildAt(i);comp.visible&&(max=Math.max(comp.y+comp.height*comp.scaleY,max))}return max}),__getset(0,__proto,"scaleX",_super.prototype._$get_scaleX,function(value){_super.prototype._$get_scaleX.call(this)!=value&&(_super.prototype._$set_scaleX.call(this,value),this.callLater(this.changeSize),this._layout.enable&&this.resetLayoutX())}),__getset(0,__proto,"top",function(){return this._layout.top},function(value){this.getLayout().top=value,this.layOutEabled=!0,this.resetLayoutY()}),__getset(0,__proto,"bottom",function(){return this._layout.bottom},function(value){this.getLayout().bottom=value,this.layOutEabled=!0,this.resetLayoutY()}),__getset(0,__proto,"left",function(){return this._layout.left},function(value){this.getLayout().left=value,this.layOutEabled=!0,this.resetLayoutX()}),__getset(0,__proto,"right",function(){return this._layout.right},function(value){this.getLayout().right=value,this.layOutEabled=!0,this.resetLayoutX()}),__getset(0,__proto,"centerX",function(){return this._layout.centerX},function(value){this.getLayout().centerX=value,this.layOutEabled=!0,this.resetLayoutX()}),__getset(0,__proto,"centerY",function(){return this._layout.centerY},function(value){this.getLayout().centerY=value,this.layOutEabled=!0,this.resetLayoutY()}),__getset(0,__proto,"anchorX",function(){return this._layout.anchorX},function(value){this.getLayout().anchorX=value,this.layOutEabled=!0,this.resetLayoutX()}),__getset(0,__proto,"anchorY",function(){return this._layout.anchorY},function(value){this.getLayout().anchorY=value,this.layOutEabled=!0,this.resetLayoutY()}),__getset(0,__proto,"tag",function(){return this._tag},function(value){this._tag=value}),__getset(0,__proto,"toolTip",function(){return this._toolTip},function(value){this._toolTip!=value&&(this._toolTip=value,null!=value?(this.on("mouseover",this,this.onMouseOver),this.on("mouseout",this,this.onMouseOut)):(this.off("mouseover",this,this.onMouseOver),this.off("mouseout",this,this.onMouseOut)))}),__getset(0,__proto,"comXml",function(){return this._comXml},function(value){this._comXml=value}),__getset(0,__proto,"gray",function(){return this._gray},function(value){value!==this._gray&&(this._gray=value,UIUtils.gray(this,value))}),__getset(0,__proto,"disabled",function(){return this._disabled},function(value){value!==this._disabled&&(this.gray=this._disabled=value,this.mouseEnabled=!value)}),Component}(Sprite)),DialogManager=function(_super){function DialogManager(){this.lockLayer=null,this.popupEffect=function(dialog){dialog.scale(1,1),Tween.from(dialog,{x:Laya.stage.width/2,y:Laya.stage.height/2,scaleX:0,scaleY:0},300,Ease.backOut)},this.closeEffect=function(dialog){var _this=this;Tween.to(dialog,{x:Laya.stage.width/2,y:Laya.stage.height/2,scaleX:0,scaleY:0},300,Ease.strongOut,Handler.create(_this,_this._doClose,[dialog]))},DialogManager.__super.call(this),this.maskLayer=new Sprite,this.mouseEnabled=this.maskLayer.mouseEnabled=!0,this.zOrder=1e3,Laya.stage.addChild(this),Laya.stage.on("resize",this,this._onResize),UIConfig.closeDialogOnSide&&this.maskLayer.on("click",this,this._closeOnSide),this._onResize(null)}__class(DialogManager,"laya.ui.DialogManager",_super);var __proto=DialogManager.prototype;return __proto._closeOnSide=function(){var dialog=this.getChildAt(this.numChildren-1);dialog instanceof laya.ui.Dialog&&dialog.close("side")},__proto.setLockView=function(value){this.lockLayer||(this.lockLayer=new Box,this.lockLayer.mouseEnabled=!0,this.lockLayer.size(Laya.stage.width,Laya.stage.height)),this.lockLayer.removeChildren(),value&&(value.centerX=value.centerY=0,this.lockLayer.addChild(value))},__proto._onResize=function(e){var width=this.maskLayer.width=Laya.stage.width,height=this.maskLayer.height=Laya.stage.height;this.lockLayer&&this.lockLayer.size(width,height),this.maskLayer.graphics.clear(),this.maskLayer.graphics.drawRect(0,0,width,height,UIConfig.popupBgColor),this.maskLayer.alpha=UIConfig.popupBgAlpha;for(var i=this.numChildren-1;i>-1;i--){var item=this.getChildAt(i);item.popupCenter&&this._centerDialog(item)}},__proto._centerDialog=function(dialog){dialog.x=Math.round((Laya.stage.width-dialog.width>>1)+dialog.pivotX),dialog.y=Math.round((Laya.stage.height-dialog.height>>1)+dialog.pivotY)},__proto.open=function(dialog,closeOther){void 0===closeOther&&(closeOther=!1),closeOther&&this.removeChildren(),dialog.popupCenter&&this._centerDialog(dialog),this.addChild(dialog),(dialog.isModal||this._$P.hasZorder)&&this.timer.callLater(this,this._checkMask),this.popupEffect&&this.popupEffect(dialog),this.event("open")},__proto.lock=function(value){this.lockLayer&&(value?this.addChild(this.lockLayer):this.lockLayer.removeSelf())},__proto.close=function(dialog){null!=this.closeEffect?this.closeEffect(dialog):this._doClose(dialog)},__proto._doClose=function(dialog){dialog.removeSelf(),dialog.isModal&&this._checkMask(),dialog.closeHandler&&dialog.closeHandler.run(),this.event("close")},__proto.closeAll=function(){this.removeChildren(),this.event("close")},__proto.getDialogsByGroup=function(group){for(var arr=[],i=this.numChildren-1;i>-1;i--){var item=this.getChildAt(i);item.group===group&&arr.push(item)}return arr},__proto.closeByGround=function(group){for(var arr=[],i=this.numChildren-1;i>-1;i--){var item=this.getChildAt(i);item.group===group&&item.close()}return arr},__proto._checkMask=function(){this.maskLayer.removeSelf();for(var i=this.numChildren-1;i>-1;i--){var dialog=this.getChildAt(i);if(dialog&&dialog.isModal)return void this.addChildAt(this.maskLayer,i)}},DialogManager}(Sprite),Box=function(_super){function Box(){Box.__super.call(this)}__class(Box,"laya.ui.Box",_super);var __proto=Box.prototype;return Laya.imps(__proto,{"laya.ui.IBox":!0}),__getset(0,__proto,"dataSource",_super.prototype._$get_dataSource,function(value){this._dataSource=value;for(var name in value){var comp=this.getChildByName(name);comp?comp.dataSource=value[name]:this.hasOwnProperty(name)&&(this[name]=value[name])}}),Box}(Component),Button=function(_super){function Button(skin,label){this.toggle=!1,this._bitmap=null,this._text=null,this._strokeColors=null,this._state=0,this._selected=!1,this._skin=null,this._autoSize=!0,this._sources=null,this._clickHandler=null,this._stateChanged=!1,Button.__super.call(this),this._labelColors=Styles.buttonLabelColors,this._stateNum=Styles.buttonStateNum,void 0===label&&(label=""),this.skin=skin,this.label=label}__class(Button,"laya.ui.Button",_super);var __proto=Button.prototype;return Laya.imps(__proto,{"laya.ui.ISelect":!0}),__proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),_super.prototype.destroy.call(this,destroyChild),this._bitmap&&this._bitmap.destroy(),this._text&&this._text.destroy(destroyChild),this._bitmap=null,this._text=null,this._clickHandler=null,this._labelColors=this._sources=this._strokeColors=null},__proto.createChildren=function(){this.graphics=this._bitmap=new AutoBitmap},__proto.createText=function(){this._text||(this._text=new Text,this._text.overflow=Text.HIDDEN,this._text.align="center",this._text.valign="middle")},__proto.initialize=function(){this.on("mouseover",this,this.onMouse),this.on("mouseout",this,this.onMouse),this.on("mousedown",this,this.onMouse),this.on("mouseup",this,this.onMouse),this.on("click",this,this.onMouse)},__proto.onMouse=function(e){if(!1!==this.toggle||!this._selected)return"click"===e.type?(this.toggle&&(this.selected=!this._selected),void(this._clickHandler&&this._clickHandler.run())):void(!this._selected&&(this.state=Button.stateMap[e.type]))},__proto.changeClips=function(){var img=Loader.getRes(this._skin);if(img){var width=img.sourceWidth,height=img.sourceHeight/this._stateNum,key=this._skin+this._stateNum,clips=AutoBitmap.getCache(key);if(clips)this._sources=clips;else{if(this._sources=[],1===this._stateNum)this._sources.push(img);else for(var i=0;i<this._stateNum;i++)this._sources.push(Texture.createFromTexture(img,0,height*i,width,height));AutoBitmap.setCache(key,this._sources)}this._autoSize?(this._bitmap.width=this._width||width,this._bitmap.height=this._height||height,this._text&&(this._text.width=this._bitmap.width,this._text.height=this._bitmap.height)):this._text&&(this._text.x=width)}},__proto.changeState=function(){this._stateChanged=!1,this.runCallLater(this.changeClips);var index=this._state<this._stateNum?this._state:this._stateNum-1;this._sources&&(this._bitmap.source=this._sources[index]),this.label&&(this._text.color=this._labelColors[index],this._strokeColors&&(this._text.strokeColor=this._strokeColors[index]))},__proto._setStateChanged=function(){this._stateChanged||(this._stateChanged=!0,this.callLater(this.changeState))},__getset(0,__proto,"labelStrokeColor",function(){return this.createText(),this._text.strokeColor},function(value){this.createText(),this._text.strokeColor=value}),__getset(0,__proto,"measureHeight",function(){return this.runCallLater(this.changeClips),this._text?Math.max(this._bitmap.height,this._text.height):this._bitmap.height}),__getset(0,__proto,"skin",function(){return this._skin},function(value){this._skin!=value&&(this._skin=value,this.callLater(this.changeClips),this._setStateChanged())}),__getset(0,__proto,"state",function(){return this._state},function(value){this._state!=value&&(this._state=value,this._setStateChanged())}),__getset(0,__proto,"text",function(){return this.createText(),this._text}),__getset(0,__proto,"stateNum",function(){return this._stateNum},function(value){this._stateNum!=value&&(this._stateNum=value<1?1:value>3?3:value,this.callLater(this.changeClips))}),__getset(0,__proto,"strokeColors",function(){return this._strokeColors?this._strokeColors.join(","):""},function(value){this._strokeColors=UIUtils.fillArray(Styles.buttonLabelColors,value,String),this._setStateChanged()}),__getset(0,__proto,"labelColors",function(){return this._labelColors.join(",")},function(value){this._labelColors=UIUtils.fillArray(Styles.buttonLabelColors,value,String),this._setStateChanged()}),__getset(0,__proto,"measureWidth",function(){return this.runCallLater(this.changeClips),this._autoSize?this._bitmap.width:(this.runCallLater(this.changeState),this._bitmap.width+(this._text?this._text.width:0))}),__getset(0,__proto,"label",function(){return this._text?this._text.text:null},function(value){(this._text||value)&&(this.createText(),this._text.text!=value&&(value&&!this._text.displayedInStage&&this.addChild(this._text),this._text.text=(value+"").replace(/\\n/g,"\n"),this._setStateChanged()))}),__getset(0,__proto,"selected",function(){return this._selected},function(value){this._selected!=value&&(this._selected=value,this.state=this._selected?2:0,this.event("change"))}),__getset(0,__proto,"labelPadding",function(){return this.createText(),this._text.padding.join(",")},function(value){this.createText(),this._text.padding=UIUtils.fillArray(Styles.labelPadding,value,Number)}),__getset(0,__proto,"labelSize",function(){return this.createText(),this._text.fontSize},function(value){this.createText(),this._text.fontSize=value}),__getset(0,__proto,"labelStroke",function(){return this.createText(),this._text.stroke},function(value){this.createText(),this._text.stroke=value}),__getset(0,__proto,"labelBold",function(){return this.createText(),this._text.bold},function(value){this.createText(),this._text.bold=value}),__getset(0,__proto,"labelFont",function(){return this.createText(),this._text.font},function(value){this.createText(),this._text.font=value}),__getset(0,__proto,"labelAlign",function(){return this.createText(),this._text.align},function(value){this.createText(),this._text.align=value}),__getset(0,__proto,"clickHandler",function(){return this._clickHandler},function(value){this._clickHandler=value}),__getset(0,__proto,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(value){this._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,value,Number)}),__getset(0,__proto,"width",_super.prototype._$get_width,function(value){_super.prototype._$set_width.call(this,value),this._autoSize&&(this._bitmap.width=value,this._text&&(this._text.width=value))}),__getset(0,__proto,"height",_super.prototype._$get_height,function(value){_super.prototype._$set_height.call(this,value),this._autoSize&&(this._bitmap.height=value,this._text&&(this._text.height=value))}),__getset(0,__proto,"dataSource",_super.prototype._$get_dataSource,function(value){this._dataSource=value,"number"==typeof value||"string"==typeof value?this.label=value+"":_super.prototype._$set_dataSource.call(this,value)}),__getset(0,__proto,"iconOffset",function(){return this._bitmap._offset?this._bitmap._offset.join(","):null},function(value){this._bitmap._offset=value?UIUtils.fillArray([1,1],value,Number):[]}),__static(Button,["stateMap",function(){return this.stateMap={mouseup:0,mouseover:1,mousedown:2,mouseout:0}}]),Button}(Component),Clip=function(_super){function Clip(url,clipX,clipY){this._sources=null,this._bitmap=null,this._skin=null,this._clipX=1,this._clipY=1,this._clipWidth=0,this._clipHeight=0,this._autoPlay=!1,this._interval=50,this._complete=null,this._isPlaying=!1,this._index=0,this._clipChanged=!1,this._group=null,Clip.__super.call(this),void 0===clipX&&(clipX=1),void 0===clipY&&(clipY=1),this._clipX=clipX,this._clipY=clipY,this.skin=url}__class(Clip,"laya.ui.Clip",_super);var __proto=Clip.prototype;return __proto.destroy=function(clearFromCache){void 0===clearFromCache&&(clearFromCache=!1),_super.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null,this._sources=null},__proto.dispose=function(){this.destroy(!0),Laya.loader.clearRes(this._skin)},__proto.createChildren=function(){this.graphics=this._bitmap=new AutoBitmap},__proto.initialize=function(){this.on("display",this,this._onDisplay),this.on("undisplay",this,this._onDisplay)},__proto._onDisplay=function(e){this._isPlaying?this._displayedInStage?this.play():this.stop():this._autoPlay&&this._displayedInStage&&this.play()},__proto.changeClip=function(){if(this._clipChanged=!1,this._skin){var img=Loader.getRes(this._skin);img?this.loadComplete(this._skin,img):Laya.loader.load(this._skin,Handler.create(this,this.loadComplete,[this._skin]))}},__proto.loadComplete=function(url,img){if(url===this._skin&&img){this._clipWidth||(this._clipWidth=Math.ceil(img.sourceWidth/this._clipX)),this._clipHeight||(this._clipHeight=Math.ceil(img.sourceHeight/this._clipY));var key=this._skin+this._clipWidth+this._clipHeight,clips=AutoBitmap.getCache(key);if(clips)this._sources=clips;else{this._sources=[];for(var i=0;i<this._clipY;i++)for(var j=0;j<this._clipX;j++)this._sources.push(Texture.createFromTexture(img,this._clipWidth*j,this._clipHeight*i,this._clipWidth,this._clipHeight));AutoBitmap.setCache(key,this._sources)}this.index=this._index,this.event("loaded"),this.onCompResize()}},__proto.play=function(){this._isPlaying=!0,this.index=0,this._index++,Laya.timer.loop(this.interval,this,this._loop)},__proto._loop=function(){this._style.visible&&this._sources&&(this.index=this._index,++this._index>=this._sources.length&&(this._index=0))},__proto.stop=function(){this._isPlaying=!1,Laya.timer.clear(this,this._loop)},__proto._setClipChanged=function(){this._clipChanged||(this._clipChanged=!0,this.callLater(this.changeClip))},__getset(0,__proto,"interval",function(){return this._interval},function(value){this._interval!=value&&(this._interval=value,this._isPlaying&&this.play())}),__getset(0,__proto,"skin",function(){return this._skin},function(value){this._skin!=value&&(this._skin=value,value?this._setClipChanged():this._bitmap.source=null)}),__getset(0,__proto,"sources",function(){return this._sources},function(value){this._sources=value,this.index=this._index,this.event("loaded")}),__getset(0,__proto,"clipX",function(){return this._clipX},function(value){this._clipX=value,this._setClipChanged()}),__getset(0,__proto,"clipY",function(){return this._clipY},function(value){this._clipY=value,this._setClipChanged()}),__getset(0,__proto,"total",function(){return this.runCallLater(this.changeClip),this._sources?this._sources.length:0}),__getset(0,__proto,"clipWidth",function(){return this._clipWidth},function(value){this._clipWidth=value,this._setClipChanged()}),__getset(0,__proto,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(value){this._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,value,Number)}),__getset(0,__proto,"group",function(){return this._group},function(value){value&&this._skin&&Loader.setGroup(this._skin,value),this._group=value}),__getset(0,__proto,"clipHeight",function(){return this._clipHeight},function(value){this._clipHeight=value,this._setClipChanged()}),__getset(0,__proto,"width",_super.prototype._$get_width,function(value){_super.prototype._$set_width.call(this,value),this._bitmap.width=value}),__getset(0,__proto,"height",_super.prototype._$get_height,function(value){_super.prototype._$set_height.call(this,value),this._bitmap.height=value}),__getset(0,__proto,"measureWidth",function(){return this.runCallLater(this.changeClip),this._bitmap.width}),__getset(0,__proto,"measureHeight",function(){return this.runCallLater(this.changeClip),this._bitmap.height}),__getset(0,__proto,"index",function(){return this._index},function(value){this._index=value,this._bitmap&&this._sources&&(this._bitmap.source=this._sources[value]),this.event("change")}),__getset(0,__proto,"autoPlay",function(){return this._autoPlay},function(value){this._autoPlay!=value&&(this._autoPlay=value,value?this.play():this.stop())}),__getset(0,__proto,"isPlaying",function(){return this._isPlaying},function(value){this._isPlaying=value}),__getset(0,__proto,"dataSource",_super.prototype._$get_dataSource,function(value){this._dataSource=value,"number"==typeof value&&Math.floor(value)==value||"string"==typeof value?this.index=parseInt(value):_super.prototype._$set_dataSource.call(this,value)}),__getset(0,__proto,"bitmap",function(){return this._bitmap}),Clip}(Component),ColorPicker=function(_super){function ColorPicker(){this.changeHandler=null,this._gridSize=11,this._bgColor="#ffffff",this._borderColor="#000000",this._inputColor="#000000",this._inputBgColor="#efefef",this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=[],this._selectedColor="#000000",this._panelChanged=!1,ColorPicker.__super.call(this)}__class(ColorPicker,"laya.ui.ColorPicker",_super);var __proto=ColorPicker.prototype;return __proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),_super.prototype.destroy.call(this,destroyChild),this._colorPanel&&this._colorPanel.destroy(destroyChild),this._colorButton&&this._colorButton.destroy(destroyChild),this._colorPanel=null,this._colorTiles=null,this._colorBlock=null,this._colorInput=null,this._colorButton=null,this._colors=null,this.changeHandler=null},__proto.createChildren=function(){this.addChild(this._colorButton=new Button),this._colorPanel=new Box,this._colorPanel.size(230,166),this._colorPanel.addChild(this._colorTiles=new Sprite),this._colorPanel.addChild(this._colorBlock=new Sprite),this._colorPanel.addChild(this._colorInput=new Input)},__proto.initialize=function(){this._colorButton.on("click",this,this.onColorButtonClick),this._colorBlock.pos(5,5),this._colorInput.pos(60,5),this._colorInput.size(60,20),this._colorInput.on("change",this,this.onColorInputChange),this._colorInput.on("keydown",this,this.onColorFieldKeyDown),this._colorTiles.pos(5,30),this._colorTiles.on("mousemove",this,this.onColorTilesMouseMove),this._colorTiles.on("click",this,this.onColorTilesClick),this._colorTiles.size(20*this._gridSize,12*this._gridSize),this._colorPanel.on("mousedown",this,this.onPanelMouseDown),this.bgColor=this._bgColor},__proto.onPanelMouseDown=function(e){e.stopPropagation()},__proto.changePanel=function(){this._panelChanged=!1;var g=this._colorPanel.graphics;g.clear(),g.drawRect(0,0,230,166,this._bgColor,this._borderColor),this.drawBlock(this._selectedColor),this._colorInput.borderColor=this._borderColor,this._colorInput.bgColor=this._inputBgColor,this._colorInput.color=this._inputColor,(g=this._colorTiles.graphics).clear();for(var mainColors=[0,3355443,6710886,10066329,13421772,16777215,16711680,65280,255,16776960,65535,16711935],i=0;i<12;i++)for(var j=0;j<20;j++){var color=0;color=0===j?mainColors[i]:1===j?0:51*(((3*i+j/6)%3<<0)+3*(i/6<<0))<<16|j%6*51<<8|(i<<0)%6*51;var strColor=UIUtils.toColor(color);this._colors.push(strColor);var x=j*this._gridSize,y=i*this._gridSize;g.drawRect(x,y,this._gridSize,this._gridSize,strColor,"#000000")}},__proto.onColorButtonClick=function(e){this._colorPanel.parent?this.close():this.open()},__proto.open=function(){var p=this.localToGlobal(new Point),px=p.x+this._colorPanel.width<=Laya.stage.width?p.x:Laya.stage.width-this._colorPanel.width,py=p.y+this._colorButton.height;py=py+this._colorPanel.height<=Laya.stage.height?py:p.y-this._colorPanel.height,this._colorPanel.pos(px,py),Laya.stageBox.addChild(this._colorPanel),Laya.stage.on("mousedown",this,this.removeColorBox)},__proto.close=function(){Laya.stage.off("mousedown",this,this.removeColorBox),this._colorPanel.removeSelf()},__proto.removeColorBox=function(e){this.close()},__proto.onColorFieldKeyDown=function(e){13==e.keyCode&&(this._colorInput.text?this.selectedColor=this._colorInput.text:this.selectedColor=null,this.close(),e.stopPropagation())},__proto.onColorInputChange=function(e){this._colorInput.text?this.drawBlock(this._colorInput.text):this.drawBlock("#FFFFFF")},__proto.onColorTilesClick=function(e){this.selectedColor=this.getColorByMouse(),this.close()},__proto.onColorTilesMouseMove=function(e){this._colorInput.focus=!1;var color=this.getColorByMouse();this._colorInput.text=color,this.drawBlock(color)},__proto.getColorByMouse=function(){var point=this._colorTiles.getMousePoint(),x=Math.floor(point.x/this._gridSize),y=Math.floor(point.y/this._gridSize);return this._colors[20*y+x]},__proto.drawBlock=function(color){var g=this._colorBlock.graphics;g.clear();var showColor=color||"#ffffff";g.drawRect(0,0,50,20,showColor,this._borderColor),color||g.drawLine(0,0,50,20,"#ff0000")},__proto.changeColor=function(){var g=this.graphics;g.clear();var showColor=this._selectedColor||"#000000";g.drawRect(0,0,this._colorButton.width,this._colorButton.height,showColor)},__proto._setPanelChanged=function(){this._panelChanged||(this._panelChanged=!0,this.callLater(this.changePanel))},__getset(0,__proto,"inputBgColor",function(){return this._inputBgColor},function(value){this._inputBgColor=value,this._setPanelChanged()}),__getset(0,__proto,"selectedColor",function(){return this._selectedColor},function(value){this._selectedColor!=value&&(this._selectedColor=this._colorInput.text=value,this.drawBlock(value),this.changeColor(),this.changeHandler&&this.changeHandler.runWith(this._selectedColor),this.event("change",Event.EMPTY.setTo("change",this,this)))}),__getset(0,__proto,"skin",function(){return this._colorButton.skin},function(value){this._colorButton.skin=value,this.changeColor()}),__getset(0,__proto,"bgColor",function(){return this._bgColor},function(value){this._bgColor=value,this._setPanelChanged()}),__getset(0,__proto,"borderColor",function(){return this._borderColor},function(value){this._borderColor=value,this._setPanelChanged()}),__getset(0,__proto,"inputColor",function(){return this._inputColor},function(value){this._inputColor=value,this._setPanelChanged()}),ColorPicker}(Component),ComboBox=function(_super){function ComboBox(skin,labels){this._visibleNum=6,this._button=null,this._list=null,this._isOpen=!1,this._scrollBar=null,this._itemSize=12,this._labels=[],this._selectedIndex=-1,this._selectHandler=null,this._itemHeight=NaN,this._listHeight=NaN,this._listChanged=!1,this._itemChanged=!1,this._scrollBarSkin=null,this.itemRender=null,ComboBox.__super.call(this),this._itemColors=Styles.comboBoxItemColors,this.skin=skin,this.labels=labels}__class(ComboBox,"laya.ui.ComboBox",_super);var __proto=ComboBox.prototype;return __proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),_super.prototype.destroy.call(this,destroyChild),this._button&&this._button.destroy(destroyChild),this._list&&this._list.destroy(destroyChild),this._scrollBar&&this._scrollBar.destroy(destroyChild),this._button=null,this._list=null,this._scrollBar=null,this._itemColors=null,this._labels=null,this._selectHandler=null},__proto.createChildren=function(){this.addChild(this._button=new Button),this._button.text.align="left",this._button.labelPadding="0,0,0,5",this._button.on("mousedown",this,this.onButtonMouseDown)},__proto._createList=function(){this._list=new List,this._list.selectEnable=!0,this._list.on("mousedown",this,this.onListDown),this._list.mouseHandler=Handler.create(this,this.onlistItemMouse,null,!1),this._scrollBarSkin&&(this._list.addChild(this._scrollBar=new VScrollBar),this._scrollBar.skin=this._scrollBarSkin,this._scrollBar.name="scrollBar",this._scrollBar.y=1,this._scrollBar.on("mousedown",this,this.onScrollBarDown))},__proto.onListDown=function(e){e.stopPropagation()},__proto.onScrollBarDown=function(e){e.stopPropagation()},__proto.onButtonMouseDown=function(e){this.callLater(this.switchTo,[!this._isOpen])},__proto.changeList=function(){this._listChanged=!1;var labelWidth=this.width-2,labelColor=this._itemColors[2];this._itemHeight=this._itemSize+6,this._list.itemRender=this.itemRender||{type:"Box",child:[{type:"Label",props:{name:"label",x:1,padding:"3,3,3,3",width:labelWidth,height:this._itemHeight,fontSize:this._itemSize,color:labelColor}}]},this._list.repeatY=this._visibleNum,this._scrollBar&&(this._scrollBar.x=this.width-this._scrollBar.width-1),this._list.refresh()},__proto.onlistItemMouse=function(e,index){var type=e.type;if("mouseover"===type||"mouseout"===type){var box=this._list.getCell(index);if(!box)return;var label=box.getChildByName("label");label&&("mouseover"===type?(label.bgColor=this._itemColors[0],label.color=this._itemColors[1]):(label.bgColor=null,label.color=this._itemColors[2]))}else"click"===type&&(this.selectedIndex=index,this.isOpen=!1)},__proto.switchTo=function(value){this.isOpen=value},__proto.changeOpen=function(){this.isOpen=!this._isOpen},__proto.changeItem=function(){this._itemChanged=!1,this.runCallLater(this.changeList),this._listHeight=this._labels.length>0?Math.min(this._visibleNum,this._labels.length)*this._itemHeight:this._itemHeight,this._scrollBar&&(this._scrollBar.height=this._listHeight-2);var g=this._list.graphics;g.clear(),g.drawRect(0,0,this.width-1,this._listHeight,this._itemColors[4],this._itemColors[3]);var a=this._list.array||[];a.length=0;for(var i=0,n=this._labels.length;i<n;i++)a.push({label:this._labels[i]});this._list.array=a,this._visibleNum>a.length?this._list.height=this._listHeight:this._list.height=0},__proto.changeSelected=function(){this._button.label=this.selectedLabel},__proto.removeList=function(e){this.isOpen=!1},__getset(0,__proto,"selectedIndex",function(){return this._selectedIndex},function(value){this._selectedIndex!=value&&(this._selectedIndex=value,this._labels.length>0?this.changeSelected():this.callLater(this.changeSelected),this.event("change",[Event.EMPTY.setTo("change",this,this)]),this._selectHandler&&this._selectHandler.runWith(this._selectedIndex))}),__getset(0,__proto,"measureHeight",function(){return this._button.height}),__getset(0,__proto,"skin",function(){return this._button.skin},function(value){this._button.skin!=value&&(this._button.skin=value,this._listChanged=!0)}),__getset(0,__proto,"measureWidth",function(){return this._button.width}),__getset(0,__proto,"width",_super.prototype._$get_width,function(value){_super.prototype._$set_width.call(this,value),this._button.width=this._width,this._itemChanged=!0,this._listChanged=!0}),__getset(0,__proto,"selectedLabel",function(){return this._selectedIndex>-1&&this._selectedIndex<this._labels.length?this._labels[this._selectedIndex]:null},function(value){this.selectedIndex=this._labels.indexOf(value)}),__getset(0,__proto,"labels",function(){return this._labels.join(",")},function(value){this._labels.length>0&&(this.selectedIndex=-1),value?this._labels=value.split(","):this._labels.length=0,this._itemChanged=!0}),__getset(0,__proto,"height",_super.prototype._$get_height,function(value){_super.prototype._$set_height.call(this,value),this._button.height=this._height}),__getset(0,__proto,"selectHandler",function(){return this._selectHandler},function(value){this._selectHandler=value}),__getset(0,__proto,"visibleNum",function(){return this._visibleNum},function(value){this._visibleNum=value,this._listChanged=!0}),__getset(0,__proto,"labelBold",function(){return this._button.text.bold},function(value){this._button.text.bold=value}),__getset(0,__proto,"itemColors",function(){return String(this._itemColors)},function(value){this._itemColors=UIUtils.fillArray(this._itemColors,value,String),this._listChanged=!0}),__getset(0,__proto,"itemSize",function(){return this._itemSize},function(value){this._itemSize=value,this._listChanged=!0}),__getset(0,__proto,"scrollBar",function(){return this._scrollBar}),__getset(0,__proto,"isOpen",function(){return this._isOpen},function(value){if(this._isOpen!=value)if(this._isOpen=value,this._button.selected=this._isOpen,this._isOpen){this._list||this._createList(),this._listChanged&&this.changeList(),this._itemChanged&&this.changeItem();var p=this.localToGlobal(Point.TEMP.setTo(0,0)),py=p.y+this._button.height;py=py+this._listHeight<=Laya.stage.height?py:p.y-this._listHeight,this._list.pos(p.x,py),Laya.stageBox.addChild(this._list),Laya.stage.once("mousedown",this,this.removeList),this._list.selectedIndex=this._selectedIndex}else this._list&&this._list.removeSelf()}),__getset(0,__proto,"scrollBarSkin",function(){return this._scrollBarSkin},function(value){this._scrollBarSkin=value}),__getset(0,__proto,"sizeGrid",function(){return this._button.sizeGrid},function(value){this._button.sizeGrid=value}),__getset(0,__proto,"button",function(){return this._button}),__getset(0,__proto,"list",function(){return this._list||this._createList(),this._list}),__getset(0,__proto,"dataSource",_super.prototype._$get_dataSource,function(value){this._dataSource=value,"number"==typeof value&&Math.floor(value)==value||"string"==typeof value?this.selectedIndex=parseInt(value):value instanceof Array?this.labels=value.join(","):_super.prototype._$set_dataSource.call(this,value)}),__getset(0,__proto,"labelColors",function(){return this._button.labelColors},function(value){this._button.labelColors!=value&&(this._button.labelColors=value)}),__getset(0,__proto,"labelPadding",function(){return this._button.text.padding.join(",")},function(value){this._button.text.padding=UIUtils.fillArray(Styles.labelPadding,value,Number)}),__getset(0,__proto,"labelSize",function(){return this._button.text.fontSize},function(value){this._button.text.fontSize=value}),__getset(0,__proto,"labelFont",function(){return this._button.text.font},function(value){this._button.text.font=value}),__getset(0,__proto,"stateNum",function(){return this._button.stateNum},function(value){this._button.stateNum=value}),ComboBox}(Component),ScrollBar=function(_super){function ScrollBar(skin){this.rollRatio=.95,this.changeHandler=null,this.scaleBar=!0,this.autoHide=!1,this.elasticDistance=0,this.elasticBackTime=500,this.upButton=null,this.downButton=null,this.slider=null,this._scrollSize=1,this._skin=null,this._thumbPercent=1,this._target=null,this._lastPoint=null,this._lastOffset=0,this._checkElastic=!1,this._isElastic=!1,this._value=NaN,this._hide=!1,this._clickOnly=!0,this._offsets=null,ScrollBar.__super.call(this),this._showButtons=UIConfig.showButtons,this._touchScrollEnable=UIConfig.touchScrollEnable,this._mouseWheelEnable=UIConfig.mouseWheelEnable,this.skin=skin,this.max=1}__class(ScrollBar,"laya.ui.ScrollBar",_super);var __proto=ScrollBar.prototype;return __proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),this.stopScroll(),_super.prototype.destroy.call(this,destroyChild),this.upButton&&this.upButton.destroy(destroyChild),this.downButton&&this.downButton.destroy(destroyChild),this.slider&&this.slider.destroy(destroyChild),this.upButton=this.downButton=null,this.slider=null,this.changeHandler=null,this._offsets=null},__proto.createChildren=function(){this.addChild(this.slider=new Slider),this.addChild(this.upButton=new Button),this.addChild(this.downButton=new Button)},__proto.initialize=function(){this.slider.showLabel=!1,this.slider.on("change",this,this.onSliderChange),this.slider.setSlider(0,0,0),this.upButton.on("mousedown",this,this.onButtonMouseDown),this.downButton.on("mousedown",this,this.onButtonMouseDown)},__proto.onSliderChange=function(){this.value=this.slider.value},__proto.onButtonMouseDown=function(e){var isUp=e.currentTarget===this.upButton;this.slide(isUp),Laya.timer.once(Styles.scrollBarDelayTime,this,this.startLoop,[isUp]),Laya.stage.once("mouseup",this,this.onStageMouseUp)},__proto.startLoop=function(isUp){Laya.timer.frameLoop(1,this,this.slide,[isUp])},__proto.slide=function(isUp){isUp?this.value-=this._scrollSize:this.value+=this._scrollSize},__proto.onStageMouseUp=function(e){Laya.timer.clear(this,this.startLoop),Laya.timer.clear(this,this.slide)},__proto.changeScrollBar=function(){this.upButton.visible=this._showButtons,this.downButton.visible=this._showButtons,this._showButtons&&(this.upButton.skin=this._skin.replace(".png","$up.png"),this.downButton.skin=this._skin.replace(".png","$down.png")),this.slider.isVertical?this.slider.y=this._showButtons?this.upButton.height:0:this.slider.x=this._showButtons?this.upButton.width:0,this.resetPositions()},__proto.changeSize=function(){_super.prototype.changeSize.call(this),this.resetPositions(),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value)},__proto.resetPositions=function(){this.slider.isVertical?this.slider.height=this.height-(this._showButtons?this.upButton.height+this.downButton.height:0):this.slider.width=this.width-(this._showButtons?this.upButton.width+this.downButton.width:0),this.resetButtonPosition()},__proto.resetButtonPosition=function(){this.slider.isVertical?this.downButton.y=this.slider.y+this.slider.height:this.downButton.x=this.slider.x+this.slider.width},__proto.setScroll=function(min,max,value){this.runCallLater(this.changeSize),this.slider.setSlider(min,max,value),this.slider.bar.visible=max>0,!this._hide&&this.autoHide&&(this.visible=!1)},__proto.onTargetMouseWheel=function(e){this.value-=e.delta*this._scrollSize,this.target=this._target},__proto.onTargetMouseDown=function(e){this._clickOnly=!0,this._lastOffset=0,this._checkElastic=!1,this._lastPoint||(this._lastPoint=new Point),this._lastPoint.setTo(Laya.stage.mouseX,Laya.stage.mouseY),Laya.timer.clear(this,this.tweenMove),Tween.clearTween(this),Laya.stage.once("mouseup",this,this.onStageMouseUp2),Laya.stage.once("mouseout",this,this.onStageMouseUp2),Laya.timer.frameLoop(1,this,this.loop)},__proto.loop=function(){var mouseY=Laya.stage.mouseY,mouseX=Laya.stage.mouseX;if(this._lastOffset=this.isVertical?mouseY-this._lastPoint.y:mouseX-this._lastPoint.x,this._clickOnly){if(!(Math.abs(this._lastOffset*(this.isVertical?Laya.stage._canvasTransform.getScaleY():Laya.stage._canvasTransform.getScaleX()))>1))return;this._clickOnly=!1,this._offsets||(this._offsets=[]),this._offsets.length=0,this._target.mouseEnabled=!1,!this.hide&&this.autoHide&&(this.alpha=1,this.visible=!0),this.event("start")}this._offsets.push(this._lastOffset),this._lastPoint.x=mouseX,this._lastPoint.y=mouseY,0!==this._lastOffset&&(this._checkElastic||(this.elasticDistance>0?this._checkElastic||0==this._lastOffset||(this._checkElastic=!0,this._lastOffset>0&&this._value<=this.min||this._lastOffset<0&&this._value>=this.max?this._isElastic=!0:this._isElastic=!1):this._checkElastic=!0),this._checkElastic&&(this._isElastic?this._value<=this.min?this.value-=this._lastOffset*Math.max(0,1-(this.min-this._value)/this.elasticDistance):this._value>=this.max&&(this.value-=this._lastOffset*Math.max(0,1-(this._value-this.max)/this.elasticDistance)):this.value-=this._lastOffset))},__proto.onStageMouseUp2=function(e){if(Laya.stage.off("mouseup",this,this.onStageMouseUp2),Laya.stage.off("mouseout",this,this.onStageMouseUp2),Laya.timer.clear(this,this.loop),!this._clickOnly)if(this._target.mouseEnabled=!0,this._isElastic)this._value<this.min?Tween.to(this,{value:this.min},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver)):this._value>this.max&&Tween.to(this,{value:this.max},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver));else{this._offsets.length<1&&(this._offsets[0]=this.isVertical?Laya.stage.mouseY-this._lastPoint.y:Laya.stage.mouseX-this._lastPoint.x);for(var offset=0,n=Math.min(this._offsets.length,3),i=0;i<n;i++)offset+=this._offsets[this._offsets.length-1-i];if(this._lastOffset=offset/n,(offset=Math.abs(this._lastOffset))<2)return void this.event("end");offset>60&&(this._lastOffset=this._lastOffset>0?60:-60),Laya.timer.frameLoop(1,this,this.tweenMove)}},__proto.elasticOver=function(){this._isElastic=!1,!this.hide&&this.autoHide&&Tween.to(this,{alpha:0},500),this.event("end")},__proto.tweenMove=function(){this._lastOffset*=this.rollRatio;var tarSpeed=NaN;if(this.elasticDistance>0&&(this._lastOffset>0&&this.value<=this.min?(this._isElastic=!0,tarSpeed=.5*-(this.min-this.elasticDistance-this.value),this._lastOffset>tarSpeed&&(this._lastOffset=tarSpeed)):this._lastOffset<0&&this.value>=this.max&&(this._isElastic=!0,tarSpeed=.5*-(this.max+this.elasticDistance-this.value),this._lastOffset<tarSpeed&&(this._lastOffset=tarSpeed))),this.value-=this._lastOffset,Math.abs(this._lastOffset)<1){if(Laya.timer.clear(this,this.tweenMove),this._isElastic)return void(this._value<this.min?Tween.to(this,{value:this.min},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver)):this._value>this.max?Tween.to(this,{value:this.max},this.elasticBackTime,Ease.sineOut,Handler.create(this,this.elasticOver)):this.elasticOver());this.event("end"),!this.hide&&this.autoHide&&Tween.to(this,{alpha:0},500)}},__proto.stopScroll=function(){this.onStageMouseUp2(null),Laya.timer.clear(this,this.tweenMove),Tween.clearTween(this)},__getset(0,__proto,"measureHeight",function(){return this.slider.isVertical?100:this.slider.height}),__getset(0,__proto,"skin",function(){return this._skin},function(value){this._skin!=value&&(this._skin=value,this.slider.skin=this._skin,this.callLater(this.changeScrollBar))}),__getset(0,__proto,"max",function(){return this.slider.max},function(value){this.slider.max=value}),__getset(0,__proto,"showButtons",function(){return this._showButtons},function(value){this._showButtons=value,this.callLater(this.changeScrollBar)}),__getset(0,__proto,"measureWidth",function(){return this.slider.isVertical?this.slider.width:100}),__getset(0,__proto,"min",function(){return this.slider.min},function(value){this.slider.min=value}),__getset(0,__proto,"value",function(){return this._value},function(v){v!==this._value&&(this._isElastic?this._value=v:(this.slider.value=v,this._value=this.slider.value),this.event("change"),this.changeHandler&&this.changeHandler.runWith(this.value))}),__getset(0,__proto,"isVertical",function(){return this.slider.isVertical},function(value){this.slider.isVertical=value}),__getset(0,__proto,"sizeGrid",function(){return this.slider.sizeGrid},function(value){this.slider.sizeGrid=value}),__getset(0,__proto,"scrollSize",function(){return this._scrollSize},function(value){this._scrollSize=value}),__getset(0,__proto,"dataSource",_super.prototype._$get_dataSource,function(value){this._dataSource=value,"number"==typeof value||"string"==typeof value?this.value=Number(value):_super.prototype._$set_dataSource.call(this,value)}),__getset(0,__proto,"thumbPercent",function(){return this._thumbPercent},function(value){this.runCallLater(this.changeScrollBar),this.runCallLater(this.changeSize),value=value>=1?.99:value,this._thumbPercent=value,this.scaleBar&&(this.slider.isVertical?this.slider.bar.height=Math.max(this.slider.height*value,Styles.scrollBarMinNum):this.slider.bar.width=Math.max(this.slider.width*value,Styles.scrollBarMinNum))}),__getset(0,__proto,"target",function(){return this._target},function(value){this._target&&(this._target.off("mousewheel",this,this.onTargetMouseWheel),this._target.off("mousedown",this,this.onTargetMouseDown)),this._target=value,value&&(this._mouseWheelEnable&&this._target.on("mousewheel",this,this.onTargetMouseWheel),this._touchScrollEnable&&this._target.on("mousedown",this,this.onTargetMouseDown))}),__getset(0,__proto,"hide",function(){return this._hide},function(value){this._hide=value,this.visible=!value}),__getset(0,__proto,"touchScrollEnable",function(){return this._touchScrollEnable},function(value){this._touchScrollEnable=value,this.target=this._target}),__getset(0,__proto,"mouseWheelEnable",function(){return this._mouseWheelEnable},function(value){this._mouseWheelEnable=value}),__getset(0,__proto,"tick",function(){return this.slider.tick},function(value){this.slider.tick=value}),ScrollBar}(Component),Slider=function(_super){function Slider(skin){this.changeHandler=null,this.isVertical=!0,this.showLabel=!0,this._allowClickBack=!1,this._max=100,this._min=0,this._tick=1,this._value=0,this._skin=null,this._bg=null,this._bar=null,this._tx=NaN,this._ty=NaN,this._maxMove=NaN,this._globalSacle=null,Slider.__super.call(this),this.skin=skin}__class(Slider,"laya.ui.Slider",_super);var __proto=Slider.prototype;return __proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),_super.prototype.destroy.call(this,destroyChild),this._bg&&this._bg.destroy(destroyChild),this._bar&&this._bar.destroy(destroyChild),this._bg=null,this._bar=null,this.changeHandler=null},__proto.createChildren=function(){this.addChild(this._bg=new Image),this.addChild(this._bar=new Button)},__proto.initialize=function(){this._bar.on("mousedown",this,this.onBarMouseDown),this._bg.sizeGrid=this._bar.sizeGrid="4,4,4,4,0",this.allowClickBack=!0},__proto.onBarMouseDown=function(e){this._globalSacle||(this._globalSacle=new Point),this._globalSacle.setTo(this.globalScaleX,this.globalScaleY),this._maxMove=this.isVertical?this.height-this._bar.height:this.width-this._bar.width,this._tx=Laya.stage.mouseX,this._ty=Laya.stage.mouseY,Laya.stage.on("mousemove",this,this.mouseMove),Laya.stage.once("mouseup",this,this.mouseUp),this.showValueText()},__proto.showValueText=function(){if(this.showLabel){var label=laya.ui.Slider.label;this.addChild(label),label.textField.changeText(this._value+""),this.isVertical?(label.x=this._bar.x+20,label.y=.5*(this._bar.height-label.height)+this._bar.y):(label.y=this._bar.y-20,label.x=.5*(this._bar.width-label.width)+this._bar.x)}},__proto.hideValueText=function(){laya.ui.Slider.label&&laya.ui.Slider.label.removeSelf()},__proto.mouseUp=function(e){Laya.stage.off("mousemove",this,this.mouseMove),this.sendChangeEvent("changed"),this.hideValueText()},__proto.mouseMove=function(e){var oldValue=this._value;this.isVertical?(this._bar.y+=(Laya.stage.mouseY-this._ty)/this._globalSacle.y,this._bar.y>this._maxMove?this._bar.y=this._maxMove:this._bar.y<0&&(this._bar.y=0),this._value=this._bar.y/this._maxMove*(this._max-this._min)+this._min):(this._bar.x+=(Laya.stage.mouseX-this._tx)/this._globalSacle.x,this._bar.x>this._maxMove?this._bar.x=this._maxMove:this._bar.x<0&&(this._bar.x=0),this._value=this._bar.x/this._maxMove*(this._max-this._min)+this._min),this._tx=Laya.stage.mouseX,this._ty=Laya.stage.mouseY;var pow=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*pow)/pow,this._value!=oldValue&&this.sendChangeEvent(),this.showValueText()},__proto.sendChangeEvent=function(type){void 0===type&&(type="change"),this.event(type),this.changeHandler&&this.changeHandler.runWith(this._value)},__proto.setBarPoint=function(){this.isVertical?this._bar.x=Math.round(.5*(this._bg.width-this._bar.width)):this._bar.y=Math.round(.5*(this._bg.height-this._bar.height))},__proto.changeSize=function(){_super.prototype.changeSize.call(this),this.isVertical?this._bg.height=this.height:this._bg.width=this.width,this.setBarPoint(),this.changeValue()},__proto.setSlider=function(min,max,value){this._value=-1,this._min=min,this._max=max>min?max:min,this.value=value<min?min:value>max?max:value},__proto.changeValue=function(){var pow=Math.pow(10,(this._tick+"").length-1);this._value=Math.round(Math.round(this._value/this._tick)*this._tick*pow)/pow,this._value=this._value>this._max?this._max:this._value<this._min?this._min:this._value;var num=this._max-this._min;0===num&&(num=1),this.isVertical?this._bar.y=(this._value-this._min)/num*(this.height-this._bar.height):this._bar.x=(this._value-this._min)/num*(this.width-this._bar.width)},__proto.onBgMouseDown=function(e){var point=this._bg.getMousePoint();this.isVertical?this.value=point.y/(this.height-this._bar.height)*(this._max-this._min)+this._min:this.value=point.x/(this.width-this._bar.width)*(this._max-this._min)+this._min},__getset(0,__proto,"measureHeight",function(){return Math.max(this._bg.height,this._bar.height)}),__getset(0,__proto,"skin",function(){return this._skin},function(value){this._skin!=value&&(this._skin=value,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.setBarPoint())}),__getset(0,__proto,"allowClickBack",function(){return this._allowClickBack},function(value){this._allowClickBack!=value&&(this._allowClickBack=value,value?this._bg.on("mousedown",this,this.onBgMouseDown):this._bg.off("mousedown",this,this.onBgMouseDown))}),__getset(0,__proto,"max",function(){return this._max},function(value){this._max!=value&&(this._max=value,this.callLater(this.changeValue))}),__getset(0,__proto,"measureWidth",function(){return Math.max(this._bg.width,this._bar.width)}),__getset(0,__proto,"tick",function(){return this._tick},function(value){this._tick!=value&&(this._tick=value,this.callLater(this.changeValue))}),__getset(0,__proto,"sizeGrid",function(){return this._bg.sizeGrid},function(value){this._bg.sizeGrid=value,this._bar.sizeGrid=value}),__getset(0,__proto,"min",function(){return this._min},function(value){this._min!=value&&(this._min=value,this.callLater(this.changeValue))}),__getset(0,__proto,"value",function(){return this._value},function(num){if(this._value!=num){var oldValue=this._value;this._value=num,this.changeValue(),this._value!=oldValue&&this.sendChangeEvent()}}),__getset(0,__proto,"dataSource",_super.prototype._$get_dataSource,function(value){this._dataSource=value,"number"==typeof value||"string"==typeof value?this.value=Number(value):_super.prototype._$set_dataSource.call(this,value)}),__getset(0,__proto,"bar",function(){return this._bar}),__static(Slider,["label",function(){return this.label=new Label}]),Slider}(Component),Image=function(_super){function Image(skin){this._bitmap=null,this._skin=null,this._group=null,Image.__super.call(this),this.skin=skin}__class(Image,"laya.ui.Image",_super);var __proto=Image.prototype;return __proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),_super.prototype.destroy.call(this,!0),this._bitmap&&this._bitmap.destroy(),this._bitmap=null},__proto.dispose=function(){this.destroy(!0),Laya.loader.clearRes(this._skin)},__proto.createChildren=function(){this.graphics=this._bitmap=new AutoBitmap,this._bitmap.autoCacheCmd=!1},__proto.setSource=function(url,img){url===this._skin&&img&&(this.source=img,this.onCompResize())},__getset(0,__proto,"source",function(){return this._bitmap.source},function(value){this._bitmap&&(this._bitmap.source=value,this.event("loaded"),this.repaint())}),__getset(0,__proto,"dataSource",_super.prototype._$get_dataSource,function(value){this._dataSource=value,"string"==typeof value?this.skin=value:_super.prototype._$set_dataSource.call(this,value)}),__getset(0,__proto,"measureHeight",function(){return this._bitmap.height}),__getset(0,__proto,"skin",function(){return this._skin},function(value){if(this._skin!=value)if(this._skin=value,value){var source=Loader.getRes(value);source?(this.source=source,this.onCompResize()):Laya.loader.load(this._skin,Handler.create(this,this.setSource,[this._skin]),null,"image",1,!0,this._group)}else this.source=null}),__getset(0,__proto,"group",function(){return this._group},function(value){value&&this._skin&&Loader.setGroup(this._skin,value),this._group=value}),__getset(0,__proto,"sizeGrid",function(){return this._bitmap.sizeGrid?this._bitmap.sizeGrid.join(","):null},function(value){this._bitmap.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,value,Number)}),__getset(0,__proto,"measureWidth",function(){return this._bitmap.width}),__getset(0,__proto,"width",_super.prototype._$get_width,function(value){_super.prototype._$set_width.call(this,value),this._bitmap.width=0==value?1e-7:value}),__getset(0,__proto,"height",_super.prototype._$get_height,function(value){_super.prototype._$set_height.call(this,value),this._bitmap.height=0==value?1e-7:value}),Image}(Component),Label=function(_super){function Label(text){this._tf=null,Label.__super.call(this),void 0===text&&(text=""),Font.defaultColor=Styles.labelColor,this.text=text}__class(Label,"laya.ui.Label",_super);var __proto=Label.prototype;return __proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),_super.prototype.destroy.call(this,destroyChild),this._tf=null},__proto.createChildren=function(){this.addChild(this._tf=new Text)},__proto.changeText=function(text){this._tf.changeText(text)},__getset(0,__proto,"padding",function(){return this._tf.padding.join(",")},function(value){this._tf.padding=UIUtils.fillArray(Styles.labelPadding,value,Number)}),__getset(0,__proto,"bold",function(){return this._tf.bold},function(value){this._tf.bold=value}),__getset(0,__proto,"align",function(){return this._tf.align},function(value){this._tf.align=value}),__getset(0,__proto,"text",function(){return this._tf.text},function(value){this._tf.text!=value&&(value&&(value=(value+"").replace(Label._textReg,"\n")),this._tf.text=value,this.event("change"))}),__getset(0,__proto,"italic",function(){return this._tf.italic},function(value){this._tf.italic=value}),__getset(0,__proto,"wordWrap",function(){return this._tf.wordWrap},function(value){this._tf.wordWrap=value}),__getset(0,__proto,"font",function(){return this._tf.font},function(value){this._tf.font=value}),__getset(0,__proto,"dataSource",_super.prototype._$get_dataSource,function(value){this._dataSource=value,"number"==typeof value||"string"==typeof value?this.text=value+"":_super.prototype._$set_dataSource.call(this,value)}),__getset(0,__proto,"color",function(){return this._tf.color},function(value){this._tf.color=value}),__getset(0,__proto,"valign",function(){return this._tf.valign},function(value){this._tf.valign=value}),__getset(0,__proto,"leading",function(){return this._tf.leading},function(value){this._tf.leading=value}),__getset(0,__proto,"fontSize",function(){return this._tf.fontSize},function(value){this._tf.fontSize=value}),__getset(0,__proto,"bgColor",function(){return this._tf.bgColor},function(value){this._tf.bgColor=value}),__getset(0,__proto,"borderColor",function(){return this._tf.borderColor},function(value){this._tf.borderColor=value}),__getset(0,__proto,"stroke",function(){return this._tf.stroke},function(value){this._tf.stroke=value}),__getset(0,__proto,"strokeColor",function(){return this._tf.strokeColor},function(value){this._tf.strokeColor=value}),__getset(0,__proto,"textField",function(){return this._tf}),__getset(0,__proto,"measureWidth",function(){return this._tf.width}),__getset(0,__proto,"measureHeight",function(){return this._tf.height}),__getset(0,__proto,"width",function(){return this._width||this._tf.text?_super.prototype._$get_width.call(this):0},function(value){_super.prototype._$set_width.call(this,value),this._tf.width=value}),__getset(0,__proto,"height",function(){return this._height||this._tf.text?_super.prototype._$get_height.call(this):0},function(value){_super.prototype._$set_height.call(this,value),this._tf.height=value}),__getset(0,__proto,"overflow",function(){return this._tf.overflow},function(value){this._tf.overflow=value}),__getset(0,__proto,"underline",function(){return this._tf.underline},function(value){this._tf.underline=value}),__getset(0,__proto,"underlineColor",function(){return this._tf.underlineColor},function(value){this._tf.underlineColor=value}),__static(Label,["_textReg",function(){return this._textReg=new RegExp("\\\\n","g")}]),Label}(Component),ProgressBar=function(_super){function ProgressBar(skin){this.changeHandler=null,this._bg=null,this._bar=null,this._skin=null,this._value=.5,ProgressBar.__super.call(this),this.skin=skin}__class(ProgressBar,"laya.ui.ProgressBar",_super);var __proto=ProgressBar.prototype;return __proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),_super.prototype.destroy.call(this,destroyChild),this._bg&&this._bg.destroy(destroyChild),this._bar&&this._bar.destroy(destroyChild),this._bg=this._bar=null,this.changeHandler=null},__proto.createChildren=function(){this.addChild(this._bg=new Image),this.addChild(this._bar=new Image),this._bar._bitmap.autoCacheCmd=!1},__proto.changeValue=function(){if(this.sizeGrid){var grid=this.sizeGrid.split(","),left=Number(grid[3]),right=Number(grid[1]),sw=(this.width-left-right)*this._value;this._bar.width=left+right+sw,this._bar.visible=this._bar.width>left+right}else this._bar.width=this.width*this._value},__getset(0,__proto,"measureHeight",function(){return this._bg.height}),__getset(0,__proto,"skin",function(){return this._skin},function(value){this._skin!=value&&(this._skin=value,this._bg.skin=this._skin,this._bar.skin=this._skin.replace(".png","$bar.png"),this.callLater(this.changeValue))}),__getset(0,__proto,"measureWidth",function(){return this._bg.width}),__getset(0,__proto,"height",_super.prototype._$get_height,function(value){_super.prototype._$set_height.call(this,value),this._bg.height=this._height,this._bar.height=this._height}),__getset(0,__proto,"bar",function(){return this._bar}),__getset(0,__proto,"value",function(){return this._value},function(num){this._value!=num&&(num=num>1?1:num<0?0:num,this._value=num,this.callLater(this.changeValue),this.event("change"),this.changeHandler&&this.changeHandler.runWith(num))}),__getset(0,__proto,"bg",function(){return this._bg}),__getset(0,__proto,"sizeGrid",function(){return this._bg.sizeGrid},function(value){this._bg.sizeGrid=this._bar.sizeGrid=value}),__getset(0,__proto,"width",_super.prototype._$get_width,function(value){_super.prototype._$set_width.call(this,value),this._bg.width=this._width,this.callLater(this.changeValue)}),__getset(0,__proto,"dataSource",_super.prototype._$get_dataSource,function(value){this._dataSource=value,"number"==typeof value||"string"==typeof value?this.value=Number(value):_super.prototype._$set_dataSource.call(this,value)}),ProgressBar}(Component),FrameClip=(function(_super){function TipManager(){this._tipBox=null,this._tipText=null,this._defaultTipHandler=null,TipManager.__super.call(this),this._tipBox=new Component,this._tipBox.addChild(this._tipText=new Text),this._tipText.x=this._tipText.y=5,this._tipText.color=TipManager.tipTextColor,this._defaultTipHandler=this._showDefaultTip,Laya.stage.on("showtip",this,this._onStageShowTip),Laya.stage.on("hidetip",this,this._onStageHideTip),this.zOrder=1100}__class(TipManager,"laya.ui.TipManager",_super);var __proto=TipManager.prototype;__proto._onStageHideTip=function(e){Laya.timer.clear(this,this._showTip),this.closeAll(),this.removeSelf()},__proto._onStageShowTip=function(data){Laya.timer.once(TipManager.tipDelay,this,this._showTip,[data],!0)},__proto._showTip=function(tip){if("string"==typeof tip){var text=String(tip);Boolean(text)&&this._defaultTipHandler(text)}else tip instanceof laya.utils.Handler?tip.run():"function"==typeof tip&&tip.apply();Laya.stage.on("mousemove",this,this._onStageMouseMove),Laya.stage.on("mousedown",this,this._onStageMouseDown),this._onStageMouseMove(null)},__proto._onStageMouseDown=function(e){this.closeAll()},__proto._onStageMouseMove=function(e){this._showToStage(this,TipManager.offsetX,TipManager.offsetY)},__proto._showToStage=function(dis,offX,offY){void 0===offX&&(offX=0),void 0===offY&&(offY=0);var rec=dis.getBounds();dis.x=Laya.stage.mouseX+offX,dis.y=Laya.stage.mouseY+offY,dis.x+rec.width>Laya.stage.width&&(dis.x-=rec.width+offX),dis.y+rec.height>Laya.stage.height&&(dis.y-=rec.height+offY)},__proto.closeAll=function(){Laya.timer.clear(this,this._showTip),Laya.stage.off("mousemove",this,this._onStageMouseMove),Laya.stage.off("mousedown",this,this._onStageMouseDown),this.removeChildren()},__proto.showDislayTip=function(tip){this.addChild(tip),this._showToStage(this),Laya.stageBox.addChild(this)},__proto._showDefaultTip=function(text){this._tipText.text=text;var g=this._tipBox.graphics;g.clear(),g.drawRect(0,0,this._tipText.width+10,this._tipText.height+10,TipManager.tipBackColor),this.addChild(this._tipBox),this._showToStage(this),Laya.stageBox.addChild(this)},__getset(0,__proto,"defaultTipHandler",function(){return this._defaultTipHandler},function(value){this._defaultTipHandler=value}),TipManager.offsetX=10,TipManager.offsetY=15,TipManager.tipTextColor="#ffffff",TipManager.tipBackColor="#111111",TipManager.tipDelay=200}(Component),function(_super){function FrameClip(){FrameClip.__super.call(this)}return __class(FrameClip,"laya.ui.FrameClip",_super),FrameClip}(FrameAnimation)),View=function(_super){function View(){this._idMap=null,this._aniList=null,View.__super.call(this)}__class(View,"laya.ui.View",_super);var __proto=View.prototype;return __proto.createView=function(uiView){if(uiView.animations&&!this._idMap&&(this._idMap={}),View.createComp(uiView,this,this),uiView.animations){var tAni,tAniO,anilist=[],animations=uiView.animations,i=0,len=animations.length;for(i=0;i<len;i++){switch(tAni=new FrameClip,tAniO=animations[i],tAni._setUp(this._idMap,tAniO),this[tAniO.name]=tAni,tAni._setControlNode(this),tAniO.action){case 1:tAni.play(0,!1);break;case 2:tAni.play(0,!0)}anilist.push(tAni)}this._aniList=anilist}this._width>0&&null==uiView.props.hitTestPrior&&!this.mouseThrough&&(this.hitTestPrior=!0)},__proto.loadUI=function(path){var uiView=View.uiMap[path];uiView&&this.createView(uiView)},__proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),this._aniList&&(this._aniList.length=0),this._idMap=null,this._aniList=null,laya.ui.Component.prototype.destroy.call(this,destroyChild)},View._regs=function(){var key;for(key in View.uiClassMap)ClassUtils.regClass(key,View.uiClassMap[key])},View.createComp=function(uiView,comp,view){if(!(comp=comp||View.getCompInstance(uiView)))return console.log("can not create:"+uiView.type),null;var child=uiView.child;if(child)for(var i=0,n=child.length;i<n;i++){var node=child[i];if(!comp.hasOwnProperty("itemRender")||"render"!=node.props.name&&"render"!==node.props.renderType)if("Graphic"==node.type)ClassUtils.addGraphicsToSprite(node,comp);else if(ClassUtils.isDrawType(node.type))ClassUtils.addGraphicToSprite(node,comp,!0);else{var tChild=View.createComp(node,null,view);"Script"==node.type?tChild.owner=comp:"mask"==node.props.renderType||"mask"==node.props.name?comp.mask=tChild:tChild instanceof laya.display.Sprite&&comp.addChild(tChild)}else comp.itemRender=node}var props=uiView.props;for(var prop in props){var value=props[prop];View.setCompValue(comp,prop,value,view)}return Laya.__typeof(comp,"laya.ui.IItem")&&comp.initItems(),uiView.compId&&view&&view._idMap&&(view._idMap[uiView.compId]=comp),comp},View.setCompValue=function(comp,prop,value,view){"var"===prop&&view?view[value]=comp:"x"===prop||"y"===prop||"width"===prop||"height"===prop||"number"==typeof comp[prop]?comp[prop]=parseFloat(value):comp[prop]="true"===value||"false"!==value&&value},View.getCompInstance=function(json){var compClass,runtime=json.props?json.props.runtime:"";return compClass=runtime?View.viewClassMap[runtime]||View.uiClassMap[runtime]||Laya.__classmap[runtime]:View.uiClassMap[json.type],compClass?new compClass:null},View.regComponent=function(key,compClass){View.uiClassMap[key]=compClass,ClassUtils.regClass(key,compClass)},View.regViewRuntime=function(key,compClass){View.viewClassMap[key]=compClass},View.uiMap={},View.viewClassMap={},__static(View,["uiClassMap",function(){return this.uiClassMap={ViewStack:ViewStack,LinkButton:Button,TextArea:TextArea,ColorPicker:ColorPicker,Box:Box,Button:Button,CheckBox:CheckBox,Clip:Clip,ComboBox:ComboBox,Component:Component,HScrollBar:HScrollBar,HSlider:HSlider,Image:Image,Label:Label,List:List,Panel:Panel,ProgressBar:ProgressBar,Radio:Radio,RadioGroup:RadioGroup,ScrollBar:ScrollBar,Slider:Slider,Tab:Tab,TextInput:TextInput,View:View,VScrollBar:VScrollBar,VSlider:VSlider,Tree:Tree,HBox:HBox,VBox:VBox,Sprite:Sprite,Animation:Animation,Text:Text}}]),View.__init$=function(){View._regs()},View}(Box),CheckBox=function(_super){function CheckBox(skin,label){void 0===label&&(label=""),CheckBox.__super.call(this,skin,label)}__class(CheckBox,"laya.ui.CheckBox",_super);var __proto=CheckBox.prototype;return __proto.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!0,this._autoSize=!1},__proto.initialize=function(){_super.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0},__getset(0,__proto,"dataSource",_super.prototype._$get_dataSource,function(value){this._dataSource=value,"boolean"==typeof value?this.selected=value:"string"==typeof value?this.selected="true"===value:_super.prototype._$set_dataSource.call(this,value)}),CheckBox}(Button),LayoutBox=function(_super){function LayoutBox(){this._space=0,this._align="none",this._itemChanged=!1,LayoutBox.__super.call(this)}__class(LayoutBox,"laya.ui.LayoutBox",_super);var __proto=LayoutBox.prototype;return __proto.addChild=function(child){return child.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChild.call(this,child)},__proto.onResize=function(e){this._setItemChanged()},__proto.addChildAt=function(child,index){return child.on("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.addChildAt.call(this,child,index)},__proto.removeChild=function(child){return child.off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChild.call(this,child)},__proto.removeChildAt=function(index){return this.getChildAt(index).off("resize",this,this.onResize),this._setItemChanged(),laya.display.Node.prototype.removeChildAt.call(this,index)},__proto.refresh=function(){this._setItemChanged()},__proto.changeItems=function(){this._itemChanged=!1},__proto.sortItem=function(items){items&&items.sort(function(a,b){return a.y-b.y})},__proto._setItemChanged=function(){this._itemChanged||(this._itemChanged=!0,this.callLater(this.changeItems))},__getset(0,__proto,"space",function(){return this._space},function(value){this._space=value,this._setItemChanged()}),__getset(0,__proto,"align",function(){return this._align},function(value){this._align=value,this._setItemChanged()}),LayoutBox}(Box),List=function(_super){function List(){this.selectHandler=null,this.renderHandler=null,this.mouseHandler=null,this.selectEnable=!1,this.totalPage=0,this._content=null,this._scrollBar=null,this._itemRender=null,this._repeatX=0,this._repeatY=0,this._repeatX2=0,this._repeatY2=0,this._spaceX=0,this._spaceY=0,this._array=null,this._startIndex=0,this._selectedIndex=-1,this._page=0,this._isVertical=!0,this._cellSize=20,this._cellOffset=0,this._isMoved=!1,this.cacheContent=!1,this._createdLine=0,this._cellChanged=!1,List.__super.call(this),this._cells=[]}__class(List,"laya.ui.List",_super);var __proto=List.prototype;return Laya.imps(__proto,{"laya.ui.IRender":!0,"laya.ui.IItem":!0}),__proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),this._content&&this._content.destroy(destroyChild),this._scrollBar&&this._scrollBar.destroy(destroyChild),laya.ui.Component.prototype.destroy.call(this,destroyChild),this._content=null,this._scrollBar=null,this._itemRender=null,this._cells=null,this._array=null,this.selectHandler=this.renderHandler=this.mouseHandler=null},__proto.createChildren=function(){this.addChild(this._content=new Box)},__proto.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=_super.prototype._$get_cacheAs.call(this)),_super.prototype._$set_cacheAs.call(this,"none"),this._scrollBar.once("end",this,this.onScrollEnd)},__proto.onScrollEnd=function(){_super.prototype._$set_cacheAs.call(this,this._$P.cacheAs)},__proto.changeCells=function(){if(this._cellChanged=!1,this._itemRender){for(var i=this._cells.length-1;i>-1;i--)this._cells[i].destroy();this._cells.length=0,this.scrollBar=this.getChildByName("scrollBar");var cell=this.createItem(),cellWidth=cell.width+this._spaceX||1,cellHeight=cell.height+this._spaceY||1;this._width>0&&(this._repeatX2=this._isVertical?Math.round(this._width/cellWidth):Math.ceil(this._width/cellWidth)),this._height>0&&(this._repeatY2=this._isVertical?Math.ceil(this._height/cellHeight):Math.round(this._height/cellHeight));var listWidth=this._width?this._width:cellWidth*this.repeatX-this._spaceX,listHeight=this._height?this._height:cellHeight*this.repeatY-this._spaceY;this._cellSize=this._isVertical?cellHeight:cellWidth,this._cellOffset=this._isVertical?cellHeight*Math.max(this._repeatY2,this._repeatY)-listHeight-this._spaceY:cellWidth*Math.max(this._repeatX2,this._repeatX)-listWidth-this._spaceX,this._isVertical&&this._scrollBar?this._scrollBar.height=listHeight:!this._isVertical&&this._scrollBar&&(this._scrollBar.width=listWidth),this.setContentSize(listWidth,listHeight);var numX=this._isVertical?this.repeatX:this.repeatY,numY=(this._isVertical?this.repeatY:this.repeatX)+(this._scrollBar?1:0);this._createItems(0,numX,numY),this._createdLine=numY,this._array&&(this.array=this._array,this.runCallLater(this.renderItems))}},__proto._createItems=function(startY,numX,numY){var box=this._content,cell=this.createItem(),cellWidth=cell.width+this._spaceX,cellHeight=cell.height+this._spaceY;if(this.cacheContent){var cacheBox=new Box;cacheBox.cacheAsBitmap=!0,cacheBox.pos((this._isVertical?0:startY)*cellWidth,(this._isVertical?startY:0)*cellHeight),this._content.addChild(cacheBox),this._content.optimizeScrollRect=!0,box=cacheBox}for(var k=startY;k<numY;k++)for(var l=0;l<numX;l++)(cell=this.createItem()).x=(this._isVertical?l:k)*cellWidth-box.x,cell.y=(this._isVertical?k:l)*cellHeight-box.y,cell.name="item"+(k*numX+l),box.addChild(cell),this.addCell(cell)},__proto.createItem=function(){return"function"==typeof this._itemRender?new this._itemRender:View.createComp(this._itemRender)},__proto.addCell=function(cell){cell.on("click",this,this.onCellMouse),cell.on("rightclick",this,this.onCellMouse),cell.on("mouseover",this,this.onCellMouse),cell.on("mouseout",this,this.onCellMouse),cell.on("mousedown",this,this.onCellMouse),cell.on("mouseup",this,this.onCellMouse),this._cells.push(cell)},__proto.initItems=function(){if(!this._itemRender&&null!=this.getChildByName("item0")){this.repeatX=1;var count=0;count=0;for(var i=0;i<1e4;i++){var cell=this.getChildByName("item"+i);{if(!cell)break;this.addCell(cell),count++}}this.repeatY=count}},__proto.setContentSize=function(width,height){this._content.width=width,this._content.height=height,this._scrollBar&&(this._content.scrollRect||(this._content.scrollRect=new Rectangle),this._content.scrollRect.setTo(0,0,width,height),this._content.conchModel&&this._content.conchModel.scrollRect(0,0,width,height),this.event("resize"))},__proto.onCellMouse=function(e){"mousedown"===e.type&&(this._isMoved=!1);var cell=e.currentTarget,index=this._startIndex+this._cells.indexOf(cell);index<0||("click"===e.type||"rightclick"===e.type?this.selectEnable&&!this._isMoved?this.selectedIndex=index:this.changeCellState(cell,!0,0):"mouseover"!==e.type&&"mouseout"!==e.type||this._selectedIndex===index||this.changeCellState(cell,"mouseover"===e.type,0),this.mouseHandler&&this.mouseHandler.runWith([e,index]))},__proto.changeCellState=function(cell,visable,index){var selectBox=cell.getChildByName("selectBox");selectBox&&(this.selectEnable=!0,selectBox.visible=visable,selectBox.index=index)},__proto.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this.width,this.height),this._scrollBar&&Laya.timer.once(10,this,this.onScrollBarChange)},__proto.onScrollBarChange=function(e){this.runCallLater(this.changeCells);var scrollValue=this._scrollBar.value,lineX=this._isVertical?this.repeatX:this.repeatY,lineY=this._isVertical?this.repeatY:this.repeatX,scrollLine=Math.floor(scrollValue/this._cellSize);if(this.cacheContent)num=lineY+1,this._createdLine-scrollLine<num&&(this._createItems(this._createdLine,lineX,this._createdLine+num),this._createdLine+=num,this.renderItems(this._createdLine*lineX,0));else{var index=scrollLine*lineX;if(index>this._startIndex){var num=index-this._startIndex,down=!0,toIndex=this._startIndex+lineX*(lineY+1);this._isMoved=!0}else index<this._startIndex&&(num=this._startIndex-index,down=!1,toIndex=this._startIndex-1,this._isMoved=!0);for(var i=0;i<num;i++){if(down){var cell=this._cells.shift();this._cells[this._cells.length]=cell;var cellIndex=toIndex+i}else cell=this._cells.pop(),this._cells.unshift(cell),cellIndex=toIndex-i;var pos=Math.floor(cellIndex/lineX)*this._cellSize;this._isVertical?cell.y=pos:cell.x=pos,this.renderItem(cell,cellIndex)}this._startIndex=index,this.changeSelectStatus()}var r=this._content.scrollRect;this._isVertical?r.y=scrollValue:r.x=scrollValue,this._content.conchModel&&this._content.conchModel.scrollRect(r.x,r.y,r.width,r.height),this.repaint()},__proto.posCell=function(cell,cellIndex){if(this._scrollBar){var lineX=this._isVertical?this.repeatX:this.repeatY,pos=(this._isVertical?this.repeatY:this.repeatX,Math.floor(cellIndex/lineX)*this._cellSize);this._isVertical?cell.y=pos:cell.x=pos}},__proto.changeSelectStatus=function(){for(var i=0,n=this._cells.length;i<n;i++)this.changeCellState(this._cells[i],this._selectedIndex===this._startIndex+i,1)},__proto.renderItems=function(from,to){void 0===from&&(from=0),void 0===to&&(to=0);for(var i=0,n=to||this._cells.length;i<n;i++)this.renderItem(this._cells[i],this._startIndex+i);this.changeSelectStatus()},__proto.renderItem=function(cell,index){index>=0&&index<this._array.length?(cell.visible=!0,cell.dataSource=this._array[index],this.cacheContent||this.posCell(cell,index),this.hasListener("render")&&this.event("render",[cell,index]),this.renderHandler&&this.renderHandler.runWith([cell,index])):(cell.visible=!1,cell.dataSource=null)},__proto.refresh=function(){this.array=this._array},__proto.getItem=function(index){return index>-1&&index<this._array.length?this._array[index]:null},__proto.changeItem=function(index,source){index>-1&&index<this._array.length&&(this._array[index]=source,index>=this._startIndex&&index<this._startIndex+this._cells.length&&this.renderItem(this.getCell(index),index))},__proto.setItem=function(index,source){this.changeItem(index,source)},__proto.addItem=function(souce){this._array.push(souce),this.array=this._array},__proto.addItemAt=function(souce,index){this._array.splice(index,0,souce),this.array=this._array},__proto.deleteItem=function(index){this._array.splice(index,1),this.array=this._array},__proto.getCell=function(index){return this.runCallLater(this.changeCells),index>-1&&this._cells?this._cells[(index-this._startIndex)%this._cells.length]:null},__proto.scrollTo=function(index){if(this._scrollBar){var numX=this._isVertical?this.repeatX:this.repeatY;this._scrollBar.value=Math.floor(index/numX)*this._cellSize}else this.startIndex=index},__proto.tweenTo=function(index,time,complete){if(void 0===time&&(time=200),this._scrollBar){var numX=this._isVertical?this.repeatX:this.repeatY;Tween.to(this._scrollBar,{value:Math.floor(index/numX)*this._cellSize},time,null,complete,0,!0)}else this.startIndex=index,complete&&complete.run()},__proto._setCellChanged=function(){this._cellChanged||(this._cellChanged=!0,this.callLater(this.changeCells))},__proto.commitMeasure=function(){this.runCallLater(this.changeCells)},__getset(0,__proto,"cacheAs",_super.prototype._$get_cacheAs,function(value){_super.prototype._$set_cacheAs.call(this,value),this._scrollBar&&(this._$P.cacheAs=null,"none"!==value?this._scrollBar.on("start",this,this.onScrollStart):this._scrollBar.off("start",this,this.onScrollStart))}),__getset(0,__proto,"content",function(){return this._content}),__getset(0,__proto,"height",_super.prototype._$get_height,function(value){_super.prototype._$set_height.call(this,value),this._setCellChanged()}),__getset(0,__proto,"itemRender",function(){return this._itemRender},function(value){this._itemRender=value,this._setCellChanged()}),__getset(0,__proto,"vScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(value){this.removeChildByName("scrollBar");var scrollBar=new VScrollBar;scrollBar.name="scrollBar",scrollBar.right=0,value&&" "!=value&&(scrollBar.skin=value),this.scrollBar=scrollBar,this.addChild(scrollBar),this._setCellChanged()}),__getset(0,__proto,"page",function(){return this._page},function(value){this._page=value,this._array&&(this._page=value>0?value:0,this._page=this._page<this.totalPage?this._page:this.totalPage-1,this.startIndex=this._page*this.repeatX*this.repeatY)}),__getset(0,__proto,"hScrollBarSkin",function(){return this._scrollBar?this._scrollBar.skin:null},function(value){this.removeChildByName("scrollBar");var scrollBar=new HScrollBar;scrollBar.name="scrollBar",scrollBar.bottom=0,value&&" "!=value&&(scrollBar.skin=value),this.scrollBar=scrollBar,this.addChild(scrollBar),this._setCellChanged()}),__getset(0,__proto,"repeatX",function(){return this._repeatX>0?this._repeatX:this._repeatX2>0?this._repeatX2:1},function(value){this._repeatX=value,this._setCellChanged()}),__getset(0,__proto,"scrollBar",function(){return this._scrollBar},function(value){this._scrollBar!=value&&(this._scrollBar=value,value&&(this.addChild(this._scrollBar),this._scrollBar.on("change",this,this.onScrollBarChange),this._isVertical=this._scrollBar.isVertical))}),__getset(0,__proto,"width",_super.prototype._$get_width,function(value){_super.prototype._$set_width.call(this,value),this._setCellChanged()}),__getset(0,__proto,"repeatY",function(){return this._repeatY>0?this._repeatY:this._repeatY2>0?this._repeatY2:1},function(value){this._repeatY=value,this._setCellChanged()}),__getset(0,__proto,"spaceX",function(){return this._spaceX},function(value){this._spaceX=value,this._setCellChanged()}),__getset(0,__proto,"spaceY",function(){return this._spaceY},function(value){this._spaceY=value,this._setCellChanged()}),__getset(0,__proto,"selectedIndex",function(){return this._selectedIndex},function(value){this._selectedIndex!=value&&(this._selectedIndex=value,this.changeSelectStatus(),this.event("change"),this.selectHandler&&this.selectHandler.runWith(value))}),__getset(0,__proto,"selectedItem",function(){return-1!=this._selectedIndex?this._array[this._selectedIndex]:null},function(value){this.selectedIndex=this._array.indexOf(value)}),__getset(0,__proto,"length",function(){return this._array?this._array.length:0}),__getset(0,__proto,"selection",function(){return this.getCell(this._selectedIndex)},function(value){this.selectedIndex=this._startIndex+this._cells.indexOf(value)}),__getset(0,__proto,"startIndex",function(){return this._startIndex},function(value){this._startIndex=value>0?value:0,this.callLater(this.renderItems)}),__getset(0,__proto,"array",function(){return this._array},function(value){this.runCallLater(this.changeCells),this._array=value||[];var length=this._array.length;if(this.totalPage=Math.ceil(length/(this.repeatX*this.repeatY)),this._selectedIndex=this._selectedIndex<length?this._selectedIndex:length-1,this.startIndex=this._startIndex,this._scrollBar){this._scrollBar.stopScroll();var numX=this._isVertical?this.repeatX:this.repeatY,numY=this._isVertical?this.repeatY:this.repeatX,lineCount=Math.ceil(length/numX);(this._cellOffset>0?this.totalPage+1:this.totalPage)>1?(this._scrollBar.scrollSize=this._cellSize,this._scrollBar.thumbPercent=numY/lineCount,this._scrollBar.setScroll(0,(lineCount-numY)*this._cellSize+this._cellOffset,this._isVertical?this._content.scrollRect.y:this._content.scrollRect.x),this._scrollBar.target=this._content):(this._scrollBar.setScroll(0,0,0),this._scrollBar.target=this._content)}}),__getset(0,__proto,"dataSource",_super.prototype._$get_dataSource,function(value){this._dataSource=value,"number"==typeof value&&Math.floor(value)==value||"string"==typeof value?this.selectedIndex=parseInt(value):value instanceof Array?this.array=value:_super.prototype._$set_dataSource.call(this,value)}),__getset(0,__proto,"cells",function(){return this.runCallLater(this.changeCells),this._cells}),List}(Box),HScrollBar=function(_super){function HScrollBar(){HScrollBar.__super.call(this)}return __class(HScrollBar,"laya.ui.HScrollBar",_super),HScrollBar.prototype.initialize=function(){_super.prototype.initialize.call(this),this.slider.isVertical=!1},HScrollBar}(ScrollBar),Panel=function(_super){function Panel(){this._content=null,this._vScrollBar=null,this._hScrollBar=null,this._scrollChanged=!1,Panel.__super.call(this),this.width=this.height=100,this._content.optimizeScrollRect=!0}__class(Panel,"laya.ui.Panel",_super);var __proto=Panel.prototype;return __proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),laya.ui.Component.prototype.destroy.call(this,destroyChild),this._content&&this._content.destroy(destroyChild),this._vScrollBar&&this._vScrollBar.destroy(destroyChild),this._hScrollBar&&this._hScrollBar.destroy(destroyChild),this._vScrollBar=null,this._hScrollBar=null,this._content=null},__proto.destroyChildren=function(){this._content.destroyChildren()},__proto.createChildren=function(){laya.display.Node.prototype.addChild.call(this,this._content=new Box)},__proto.addChild=function(child){return child.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChild(child)},__proto.onResize=function(){this._setScrollChanged()},__proto.addChildAt=function(child,index){return child.on("resize",this,this.onResize),this._setScrollChanged(),this._content.addChildAt(child,index)},__proto.removeChild=function(child){return child.off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChild(child)},__proto.removeChildAt=function(index){return this.getChildAt(index).off("resize",this,this.onResize),this._setScrollChanged(),this._content.removeChildAt(index)},__proto.removeChildren=function(beginIndex,endIndex){void 0===beginIndex&&(beginIndex=0),void 0===endIndex&&(endIndex=2147483647);for(var i=this._content.numChildren-1;i>-1;i--)this._content.removeChildAt(i);return this._setScrollChanged(),this},__proto.getChildAt=function(index){return this._content.getChildAt(index)},__proto.getChildByName=function(name){return this._content.getChildByName(name)},__proto.getChildIndex=function(child){return this._content.getChildIndex(child)},__proto.changeScroll=function(){this._scrollChanged=!1;var contentW=this.contentWidth,contentH=this.contentHeight,vscroll=this._vScrollBar,hscroll=this._hScrollBar,vShow=vscroll&&contentH>this._height,hShow=hscroll&&contentW>this._width,showWidth=vShow?this._width-vscroll.width:this._width,showHeight=hShow?this._height-hscroll.height:this._height;vscroll&&(vscroll.x=this._width-vscroll.width,vscroll.y=0,vscroll.height=this._height-(hShow?hscroll.height:0),vscroll.scrollSize=Math.max(.033*this._height,1),vscroll.thumbPercent=showHeight/contentH,vscroll.setScroll(0,contentH-showHeight,vscroll.value)),hscroll&&(hscroll.x=0,hscroll.y=this._height-hscroll.height,hscroll.width=this._width-(vShow?vscroll.width:0),hscroll.scrollSize=Math.max(.033*this._width,1),hscroll.thumbPercent=showWidth/contentW,hscroll.setScroll(0,contentW-showWidth,hscroll.value))},__proto.changeSize=function(){laya.ui.Component.prototype.changeSize.call(this),this.setContentSize(this._width,this._height)},__proto.setContentSize=function(width,height){var content=this._content;content.width=width,content.height=height,content.scrollRect||(content.scrollRect=new Rectangle),content.scrollRect.setTo(0,0,width,height),content.conchModel&&content.conchModel.scrollRect(0,0,width,height)},__proto.onScrollBarChange=function(scrollBar){var rect=this._content.scrollRect;if(rect){var start=Math.round(scrollBar.value);scrollBar.isVertical?rect.y=start:rect.x=start,this._content.conchModel&&this._content.conchModel.scrollRect(rect.x,rect.y,rect.width,rect.height)}},__proto.scrollTo=function(x,y){void 0===x&&(x=0),void 0===y&&(y=0),this.vScrollBar&&(this.vScrollBar.value=y),this.hScrollBar&&(this.hScrollBar.value=x)},__proto.refresh=function(){this.changeScroll()},__proto.onScrollStart=function(){this._$P.cacheAs||(this._$P.cacheAs=_super.prototype._$get_cacheAs.call(this)),_super.prototype._$set_cacheAs.call(this,"none"),this._hScrollBar&&this._hScrollBar.once("end",this,this.onScrollEnd),this._vScrollBar&&this._vScrollBar.once("end",this,this.onScrollEnd)},__proto.onScrollEnd=function(){_super.prototype._$set_cacheAs.call(this,this._$P.cacheAs)},__proto._setScrollChanged=function(){this._scrollChanged||(this._scrollChanged=!0,this.callLater(this.changeScroll))},__getset(0,__proto,"numChildren",function(){return this._content.numChildren}),__getset(0,__proto,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(value){null==this._hScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._hScrollBar=new HScrollBar),this._hScrollBar.on("change",this,this.onScrollBarChange,[this._hScrollBar]),this._hScrollBar.target=this._content,this._setScrollChanged()),this._hScrollBar.skin=value}),__getset(0,__proto,"contentWidth",function(){for(var max=0,i=this._content.numChildren-1;i>-1;i--){var comp=this._content.getChildAt(i);max=Math.max(comp.x+comp.width*comp.scaleX,max)}return max}),__getset(0,__proto,"contentHeight",function(){for(var max=0,i=this._content.numChildren-1;i>-1;i--){var comp=this._content.getChildAt(i);max=Math.max(comp.y+comp.height*comp.scaleY,max)}return max}),__getset(0,__proto,"width",_super.prototype._$get_width,function(value){_super.prototype._$set_width.call(this,value),this._setScrollChanged()}),__getset(0,__proto,"hScrollBar",function(){return this._hScrollBar}),__getset(0,__proto,"content",function(){return this._content}),__getset(0,__proto,"height",_super.prototype._$get_height,function(value){_super.prototype._$set_height.call(this,value),this._setScrollChanged()}),__getset(0,__proto,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(value){null==this._vScrollBar&&(laya.display.Node.prototype.addChild.call(this,this._vScrollBar=new VScrollBar),this._vScrollBar.on("change",this,this.onScrollBarChange,[this._vScrollBar]),this._vScrollBar.target=this._content,this._setScrollChanged()),this._vScrollBar.skin=value}),__getset(0,__proto,"vScrollBar",function(){return this._vScrollBar}),__getset(0,__proto,"cacheAs",_super.prototype._$get_cacheAs,function(value){_super.prototype._$set_cacheAs.call(this,value),this._$P.cacheAs=null,"none"!==value?(this._hScrollBar&&this._hScrollBar.on("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.on("start",this,this.onScrollStart)):(this._hScrollBar&&this._hScrollBar.off("start",this,this.onScrollStart),this._vScrollBar&&this._vScrollBar.off("start",this,this.onScrollStart))}),Panel}(Box),UIGroup=function(_super){function UIGroup(labels,skin){this.selectHandler=null,this._items=null,this._selectedIndex=-1,this._skin=null,this._direction="horizontal",this._space=0,this._labels=null,this._labelColors=null,this._labelStrokeColor=null,this._strokeColors=null,this._labelStroke=NaN,this._labelSize=0,this._labelBold=!1,this._labelPadding=null,this._labelAlign=null,this._stateNum=0,this._labelChanged=!1,UIGroup.__super.call(this),this.skin=skin,this.labels=labels}__class(UIGroup,"laya.ui.UIGroup",_super);var __proto=UIGroup.prototype;return Laya.imps(__proto,{"laya.ui.IItem":!0}),__proto.preinitialize=function(){this.mouseEnabled=!0},__proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),laya.ui.Component.prototype.destroy.call(this,destroyChild),this._items&&(this._items.length=0),this._items=null,this.selectHandler=null},__proto.addItem=function(item,autoLayOut){void 0===autoLayOut&&(autoLayOut=!0);var display=item,index=this._items.length;if(display.name="item"+index,this.addChild(display),this.initItems(),autoLayOut&&index>0){var preItem=this._items[index-1];"horizontal"==this._direction?display.x=preItem.x+preItem.width+this._space:display.y=preItem.y+preItem.height+this._space}else autoLayOut&&(display.x=0,display.y=0);return index},__proto.delItem=function(item,autoLayOut){void 0===autoLayOut&&(autoLayOut=!0);var index=this._items.indexOf(item);if(-1!=index){var display=item;this.removeChild(display);for(var i=index+1,n=this._items.length;i<n;i++){var child=this._items[i];child.name="item"+(i-1),autoLayOut&&("horizontal"==this._direction?child.x-=display.width+this._space:child.y-=display.height+this._space)}if(this.initItems(),this._selectedIndex>-1){var newIndex=0;newIndex=this._selectedIndex<this._items.length?this._selectedIndex:this._selectedIndex-1,this._selectedIndex=-1,this.selectedIndex=newIndex}}},__proto.initItems=function(){this._items||(this._items=[]),this._items.length=0;for(var i=0;i<1e4;i++){var item=this.getChildByName("item"+i);if(null==item)break;this._items.push(item),item.selected=i===this._selectedIndex,item.clickHandler=Handler.create(this,this.itemClick,[i],!1)}},__proto.itemClick=function(index){this.selectedIndex=index},__proto.setSelect=function(index,selected){this._items&&index>-1&&index<this._items.length&&(this._items[index].selected=selected)},__proto.createItem=function(skin,label){return null},__proto.changeLabels=function(){if(this._labelChanged=!1,this._items)for(var left=0,i=0,n=this._items.length;i<n;i++){var btn=this._items[i];this._skin&&(btn.skin=this._skin),this._labelColors&&(btn.labelColors=this._labelColors),this._labelSize&&(btn.labelSize=this._labelSize),this._labelStroke&&(btn.labelStroke=this._labelStroke),this._labelStrokeColor&&(btn.labelStrokeColor=this._labelStrokeColor),this._strokeColors&&(btn.strokeColors=this._strokeColors),this._labelBold&&(btn.labelBold=this._labelBold),this._labelPadding&&(btn.labelPadding=this._labelPadding),this._labelAlign&&(btn.labelAlign=this._labelAlign),this._stateNum&&(btn.stateNum=this._stateNum),"horizontal"===this._direction?(btn.y=0,btn.x=left,left+=btn.width+this._space):(btn.x=0,btn.y=left,left+=btn.height+this._space)}this.changeSize()},__proto.commitMeasure=function(){this.runCallLater(this.changeLabels)},__proto._setLabelChanged=function(){this._labelChanged||(this._labelChanged=!0,this.callLater(this.changeLabels))},__getset(0,__proto,"labelStrokeColor",function(){return this._labelStrokeColor},function(value){this._labelStrokeColor!=value&&(this._labelStrokeColor=value,this._setLabelChanged())}),__getset(0,__proto,"skin",function(){return this._skin},function(value){this._skin!=value&&(this._skin=value,this._setLabelChanged())}),__getset(0,__proto,"selectedIndex",function(){return this._selectedIndex},function(value){this._selectedIndex!=value&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=value,this.setSelect(value,!0),this.event("change"),this.selectHandler&&this.selectHandler.runWith(this._selectedIndex))}),__getset(0,__proto,"labels",function(){return this._labels},function(value){if(this._labels!=value){if(this._labels=value,this.removeChildren(),this._setLabelChanged(),this._labels)for(var a=this._labels.split(","),i=0,n=a.length;i<n;i++){var item=this.createItem(this._skin,a[i]);item.name="item"+i,this.addChild(item)}this.initItems()}}),__getset(0,__proto,"strokeColors",function(){return this._strokeColors},function(value){this._strokeColors!=value&&(this._strokeColors=value,this._setLabelChanged())}),__getset(0,__proto,"labelColors",function(){return this._labelColors},function(value){this._labelColors!=value&&(this._labelColors=value,this._setLabelChanged())}),__getset(0,__proto,"labelStroke",function(){return this._labelStroke},function(value){this._labelStroke!=value&&(this._labelStroke=value,this._setLabelChanged())}),__getset(0,__proto,"labelSize",function(){return this._labelSize},function(value){this._labelSize!=value&&(this._labelSize=value,this._setLabelChanged())}),__getset(0,__proto,"stateNum",function(){return this._stateNum},function(value){this._stateNum!=value&&(this._stateNum=value,this._setLabelChanged())}),__getset(0,__proto,"labelBold",function(){return this._labelBold},function(value){this._labelBold!=value&&(this._labelBold=value,this._setLabelChanged())}),__getset(0,__proto,"labelPadding",function(){return this._labelPadding},function(value){this._labelPadding!=value&&(this._labelPadding=value,this._setLabelChanged())}),__getset(0,__proto,"direction",function(){return this._direction},function(value){this._direction=value,this._setLabelChanged()}),__getset(0,__proto,"space",function(){return this._space},function(value){this._space=value,this._setLabelChanged()}),__getset(0,__proto,"items",function(){return this._items}),__getset(0,__proto,"selection",function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(value){this.selectedIndex=this._items.indexOf(value)}),__getset(0,__proto,"dataSource",_super.prototype._$get_dataSource,function(value){this._dataSource=value,"number"==typeof value&&Math.floor(value)==value||"string"==typeof value?this.selectedIndex=parseInt(value):value instanceof Array?this.labels=value.join(","):_super.prototype._$set_dataSource.call(this,value)}),UIGroup}(Box),HSlider=function(_super){function HSlider(skin){HSlider.__super.call(this,skin),this.isVertical=!1}return __class(HSlider,"laya.ui.HSlider",_super),HSlider}(Slider),Radio=function(_super){function Radio(skin,label){this._value=null,void 0===label&&(label=""),Radio.__super.call(this,skin,label)}__class(Radio,"laya.ui.Radio",_super);var __proto=Radio.prototype;return __proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),_super.prototype.destroy.call(this,destroyChild),this._value=null},__proto.preinitialize=function(){laya.ui.Component.prototype.preinitialize.call(this),this.toggle=!1,this._autoSize=!1},__proto.initialize=function(){_super.prototype.initialize.call(this),this.createText(),this._text.align="left",this._text.valign="top",this._text.width=0,this.on("click",this,this.onClick)},__proto.onClick=function(e){this.selected=!0},__getset(0,__proto,"value",function(){return null!=this._value?this._value:this.label},function(obj){this._value=obj}),Radio}(Button),Tree=function(_super){function Tree(){this._list=null,this._source=null,this._renderHandler=null,this._spaceLeft=10,this._spaceBottom=0,this._keepStatus=!0,Tree.__super.call(this),this.width=this.height=200}__class(Tree,"laya.ui.Tree",_super);var __proto=Tree.prototype;return Laya.imps(__proto,{"laya.ui.IRender":!0}),__proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),laya.ui.Component.prototype.destroy.call(this,destroyChild),this._list&&this._list.destroy(destroyChild),this._list=null,this._source=null,this._renderHandler=null},__proto.createChildren=function(){this.addChild(this._list=new List),this._list.renderHandler=Handler.create(this,this.renderItem,null,!1),this._list.repeatX=1,this._list.on("change",this,this.onListChange)},__proto.onListChange=function(e){this.event("change")},__proto.getArray=function(){var item,arr=[];for(var $each_item in this._source)item=this._source[$each_item],this.getParentOpenStatus(item)&&(item.x=this._spaceLeft*this.getDepth(item),arr.push(item));return arr},__proto.getDepth=function(item,num){return void 0===num&&(num=0),null==item.nodeParent?num:this.getDepth(item.nodeParent,num+1)},__proto.getParentOpenStatus=function(item){var parent=item.nodeParent;return null==parent||!!parent.isOpen&&(null==parent.nodeParent||this.getParentOpenStatus(parent))},__proto.renderItem=function(cell,index){var item=cell.dataSource;if(item){cell.left=item.x;var arrow=cell.getChildByName("arrow");arrow&&(item.hasChild?(arrow.visible=!0,arrow.index=item.isOpen?1:0,arrow.tag=index,arrow.off("click",this,this.onArrowClick),arrow.on("click",this,this.onArrowClick)):arrow.visible=!1);var folder=cell.getChildByName("folder");folder&&(2==folder.clipY?folder.index=item.isDirectory?0:1:folder.index=item.isDirectory?item.isOpen?1:0:2),this._renderHandler&&this._renderHandler.runWith([cell,index])}},__proto.onArrowClick=function(e){var index=e.currentTarget.tag;this._list.array[index].isOpen=!this._list.array[index].isOpen,this._list.array=this.getArray()},__proto.setItemState=function(index,isOpen){this._list.array[index]&&(this._list.array[index].isOpen=isOpen,this._list.array=this.getArray())},__proto.fresh=function(){this._list.array=this.getArray(),this.repaint()},__proto.parseXml=function(xml,source,nodeParent,isRoot){var obj,list=xml.childNodes,childCount=list.length;if(!isRoot){obj={};var attrs,list2=xml.attributes;for(var $each_attrs in list2){var prop=(attrs=list2[$each_attrs]).nodeName,value=attrs.nodeValue;obj[prop]="true"==value||"false"!=value&&value}obj.nodeParent=nodeParent,childCount>0&&(obj.isDirectory=!0),obj.hasChild=childCount>0,source.push(obj)}for(var i=0;i<childCount;i++){var node=list[i];this.parseXml(node,source,obj,!1)}},__proto.parseOpenStatus=function(oldSource,newSource){for(var i=0,n=newSource.length;i<n;i++){var newItem=newSource[i];if(newItem.isDirectory)for(var j=0,m=oldSource.length;j<m;j++){var oldItem=oldSource[j];if(oldItem.isDirectory&&this.isSameParent(oldItem,newItem)&&newItem.label==oldItem.label){newItem.isOpen=oldItem.isOpen;break}}}},__proto.isSameParent=function(item1,item2){return null==item1.nodeParent&&null==item2.nodeParent||null!=item1.nodeParent&&null!=item2.nodeParent&&(item1.nodeParent.label==item2.nodeParent.label&&this.isSameParent(item1.nodeParent,item2.nodeParent))},__proto.filter=function(key){if(Boolean(key)){var result=[];this.getFilterSource(this._source,result,key),this._list.array=result}else this._list.array=this.getArray()},__proto.getFilterSource=function(array,result,key){key=key.toLocaleLowerCase();var item;for(var $each_item in array)!(item=array[$each_item]).isDirectory&&String(item.label).toLowerCase().indexOf(key)>-1&&(item.x=0,result.push(item)),item.child&&item.child.length>0&&this.getFilterSource(item.child,result,key)},__getset(0,__proto,"spaceBottom",function(){return this._list.spaceY},function(value){this._list.spaceY=value}),__getset(0,__proto,"keepStatus",function(){return this._keepStatus},function(value){this._keepStatus=value}),__getset(0,__proto,"itemRender",function(){return this._list.itemRender},function(value){this._list.itemRender=value}),__getset(0,__proto,"array",function(){return this._list.array},function(value){this._keepStatus&&this._list.array&&value&&this.parseOpenStatus(this._list.array,value),this._source=value,this._list.array=this.getArray()}),__getset(0,__proto,"mouseHandler",function(){return this._list.mouseHandler},function(value){this._list.mouseHandler=value}),__getset(0,__proto,"dataSource",_super.prototype._$get_dataSource,function(value){this._dataSource=value,_super.prototype._$set_dataSource.call(this,value)}),__getset(0,__proto,"source",function(){return this._source}),__getset(0,__proto,"scrollBar",function(){return this._list.scrollBar}),__getset(0,__proto,"list",function(){return this._list}),__getset(0,__proto,"scrollBarSkin",function(){return this._list.vScrollBarSkin},function(value){this._list.vScrollBarSkin=value}),__getset(0,__proto,"renderHandler",function(){return this._renderHandler},function(value){this._renderHandler=value}),__getset(0,__proto,"selectedIndex",function(){return this._list.selectedIndex},function(value){this._list.selectedIndex=value}),__getset(0,__proto,"spaceLeft",function(){return this._spaceLeft},function(value){this._spaceLeft=value}),__getset(0,__proto,"selectedItem",function(){return this._list.selectedItem},function(value){this._list.selectedItem=value}),__getset(0,__proto,"width",_super.prototype._$get_width,function(value){_super.prototype._$set_width.call(this,value),this._list.width=value}),__getset(0,__proto,"height",_super.prototype._$get_height,function(value){_super.prototype._$set_height.call(this,value),this._list.height=value}),__getset(0,__proto,"xml",null,function(value){var arr=[];this.parseXml(value.childNodes[0],arr,null,!0),this.array=arr}),__getset(0,__proto,"selectedPath",function(){return this._list.selectedItem?this._list.selectedItem.path:null}),Tree}(Box),ViewStack=function(_super){function ViewStack(){this._items=null,this._selectedIndex=0,ViewStack.__super.call(this),this._setIndexHandler=Handler.create(this,this.setIndex,null,!1)}__class(ViewStack,"laya.ui.ViewStack",_super);var __proto=ViewStack.prototype;return Laya.imps(__proto,{"laya.ui.IItem":!0}),__proto.setItems=function(views){this.removeChildren();for(var index=0,i=0,n=views.length;i<n;i++){var item=views[i];item&&(item.name="item"+index,this.addChild(item),index++)}this.initItems()},__proto.addItem=function(view){view.name="item"+this._items.length,this.addChild(view),this.initItems()},__proto.initItems=function(){this._items=[];for(var i=0;i<1e4;i++){var item=this.getChildByName("item"+i);if(null==item)break;this._items.push(item),item.visible=i==this._selectedIndex}},__proto.setSelect=function(index,selected){this._items&&index>-1&&index<this._items.length&&(this._items[index].visible=selected)},__proto.setIndex=function(index){this.selectedIndex=index},__getset(0,__proto,"dataSource",_super.prototype._$get_dataSource,function(value){if(this._dataSource=value,"number"==typeof value&&Math.floor(value)==value||"string"==typeof value)this.selectedIndex=parseInt(value);else for(var prop in this._dataSource)this.hasOwnProperty(prop)&&(this[prop]=this._dataSource[prop])}),__getset(0,__proto,"selectedIndex",function(){return this._selectedIndex},function(value){this._selectedIndex!=value&&(this.setSelect(this._selectedIndex,!1),this._selectedIndex=value,this.setSelect(this._selectedIndex,!0))}),__getset(0,__proto,"selection",function(){return this._selectedIndex>-1&&this._selectedIndex<this._items.length?this._items[this._selectedIndex]:null},function(value){this.selectedIndex=this._items.indexOf(value)}),__getset(0,__proto,"items",function(){return this._items}),__getset(0,__proto,"setIndexHandler",function(){return this._setIndexHandler},function(value){this._setIndexHandler=value}),ViewStack}(Box),VScrollBar=function(_super){function VScrollBar(){VScrollBar.__super.call(this)}return __class(VScrollBar,"laya.ui.VScrollBar",_super),VScrollBar}(ScrollBar),TextInput=function(_super){function TextInput(text){this._bg=null,this._skin=null,TextInput.__super.call(this),void 0===text&&(text=""),this.text=text,this.skin=this.skin}__class(TextInput,"laya.ui.TextInput",_super);var __proto=TextInput.prototype;return __proto.preinitialize=function(){this.mouseEnabled=!0},__proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),_super.prototype.destroy.call(this,destroyChild),this._bg&&this._bg.destroy(),this._bg=null},__proto.createChildren=function(){this.addChild(this._tf=new Input),this._tf.padding=Styles.inputLabelPadding,this._tf.on("input",this,this._onInput),this._tf.on("enter",this,this._onEnter),this._tf.on("blur",this,this._onBlur),this._tf.on("focus",this,this._onFocus)},__proto._onFocus=function(){this.event("focus",this)},__proto._onBlur=function(){this.event("blur",this)},__proto._onInput=function(){this.event("input",this)},__proto._onEnter=function(){this.event("enter",this)},__proto.initialize=function(){this.width=128,this.height=22},__proto.select=function(){this._tf.select()},__proto.setSelection=function(startIndex,endIndex){this._tf.setSelection(startIndex,endIndex)},__getset(0,__proto,"bg",function(){return this._bg},function(value){this.graphics=this._bg=value}),__getset(0,__proto,"multiline",function(){return this._tf.multiline},function(value){this._tf.multiline=value}),__getset(0,__proto,"inputElementYAdjuster",function(){return this._tf.inputElementYAdjuster},function(value){this._tf.inputElementYAdjuster=value}),__getset(0,__proto,"skin",function(){return this._skin},function(value){this._skin!=value&&(this._skin=value,this._bg||(this.graphics=this._bg=new AutoBitmap),this._bg.source=Loader.getRes(this._skin),this._width&&(this._bg.width=this._width),this._height&&(this._bg.height=this._height))}),__getset(0,__proto,"sizeGrid",function(){return this._bg&&this._bg.sizeGrid?this._bg.sizeGrid.join(","):null},function(value){this._bg||(this.graphics=this._bg=new AutoBitmap),this._bg.sizeGrid=UIUtils.fillArray(Styles.defaultSizeGrid,value,Number)}),__getset(0,__proto,"inputElementXAdjuster",function(){return this._tf.inputElementXAdjuster},function(value){this._tf.inputElementXAdjuster=value}),__getset(0,__proto,"width",_super.prototype._$get_width,function(value){_super.prototype._$set_width.call(this,value),this._bg&&(this._bg.width=value)}),__getset(0,__proto,"height",_super.prototype._$get_height,function(value){_super.prototype._$set_height.call(this,value),this._bg&&(this._bg.height=value)}),__getset(0,__proto,"editable",function(){return this._tf.editable},function(value){this._tf.editable=value}),__getset(0,__proto,"restrict",function(){return this._tf.restrict},function(pattern){this._tf.restrict=pattern}),__getset(0,__proto,"prompt",function(){return this._tf.prompt},function(value){this._tf.prompt=value}),__getset(0,__proto,"promptColor",function(){return this._tf.promptColor},function(value){this._tf.promptColor=value}),__getset(0,__proto,"maxChars",function(){return this._tf.maxChars},function(value){this._tf.maxChars=value}),__getset(0,__proto,"focus",function(){return this._tf.focus},function(value){this._tf.focus=value}),__getset(0,__proto,"type",function(){return this._tf.type},function(value){this._tf.type=value}),__getset(0,__proto,"asPassword",function(){return this._tf.asPassword},function(value){this._tf.asPassword=value}),TextInput}(Label),VSlider=function(_super){function VSlider(){VSlider.__super.call(this)}return __class(VSlider,"laya.ui.VSlider",_super),VSlider}(Slider),Dialog=function(_super){function Dialog(){this.popupCenter=!0,this.closeHandler=null,this.group=null,this.isModal=!1,this._dragArea=null,Dialog.__super.call(this)}__class(Dialog,"laya.ui.Dialog",_super);var __proto=Dialog.prototype;return __proto.initialize=function(){this._dealDragArea(),this.on("click",this,this._onClick)},__proto._dealDragArea=function(){var dragTarget=this.getChildByName("drag");dragTarget&&(this.dragArea=dragTarget.x+","+dragTarget.y+","+dragTarget.width+","+dragTarget.height,dragTarget.removeSelf())},__proto._onClick=function(e){var btn=e.target;if(btn)switch(btn.name){case"close":case"cancel":case"sure":case"no":case"ok":case"yes":this.close(btn.name)}},__proto.show=function(closeOther){void 0===closeOther&&(closeOther=!1),this._open(!1,closeOther)},__proto.popup=function(closeOther){void 0===closeOther&&(closeOther=!1),this._open(!0,closeOther)},__proto._open=function(modal,closeOther){Dialog.manager.lock(!1),this.isModal=modal,Dialog.manager.open(this,closeOther)},__proto.close=function(type){Dialog.manager.close(this)},__proto._onMouseDown=function(e){var point=this.getMousePoint();this._dragArea.contains(point.x,point.y)?this.startDrag():this.stopDrag()},__getset(0,__proto,"dragArea",function(){return this._dragArea?this._dragArea.toString():null},function(value){if(value){var a=UIUtils.fillArray([0,0,0,0],value,Number);this._dragArea=new Rectangle(a[0],a[1],a[2],a[3]),this.on("mousedown",this,this._onMouseDown)}else this._dragArea=null,this.off("mousedown",this,this._onMouseDown)}),__getset(0,__proto,"isPopup",function(){return null!=this.parent}),__getset(0,__proto,"zOrder",_super.prototype._$get_zOrder,function(value){_super.prototype._$set_zOrder.call(this,value),Dialog.manager._checkMask()}),__getset(1,Dialog,"manager",function(){return Dialog._manager=Dialog._manager||new DialogManager},function(value){Dialog._manager=value}),Dialog.setLockView=function(view){Dialog.manager.setLockView(view)},Dialog.lock=function(value){Dialog.manager.lock(value)},Dialog.closeAll=function(){Dialog.manager.closeAll()},Dialog.getDialogsByGroup=function(group){return Dialog.manager.getDialogsByGroup(group)},Dialog.closeByGround=function(group){return Dialog.manager.closeByGround(group)},Dialog.CLOSE="close",Dialog.CANCEL="cancel",Dialog.SURE="sure",Dialog.NO="no",Dialog.OK="ok",Dialog.YES="yes",Dialog._manager=null,Dialog}(View),HBox=function(_super){function HBox(){HBox.__super.call(this)}__class(HBox,"laya.ui.HBox",_super);var __proto=HBox.prototype;return __proto.sortItem=function(items){items&&items.sort(function(a,b){return a.x-b.x})},__proto.changeItems=function(){this._itemChanged=!1;for(var items=[],maxHeight=0,i=0,n=this.numChildren;i<n;i++){var item=this.getChildAt(i);item&&(items.push(item),maxHeight=Math.max(maxHeight,item.height*item.scaleY))}this.sortItem(items);var left=0;for(i=0,n=this.numChildren;i<n;i++)(item=items[i]).x=left,left+=item.width*item.scaleX+this._space,"top"==this._align?item.y=0:"middle"==this._align?item.y=.5*(maxHeight-item.height*item.scaleY):"bottom"==this._align&&(item.y=maxHeight-item.height*item.scaleY);this.changeSize()},HBox.NONE="none",HBox.TOP="top",HBox.MIDDLE="middle",HBox.BOTTOM="bottom",HBox}(LayoutBox),VBox=function(_super){function VBox(){VBox.__super.call(this)}return __class(VBox,"laya.ui.VBox",_super),VBox.prototype.changeItems=function(){this._itemChanged=!1;for(var items=[],maxWidth=0,i=0,n=this.numChildren;i<n;i++){var item=this.getChildAt(i);item&&(items.push(item),maxWidth=Math.max(maxWidth,item.width*item.scaleX))}this.sortItem(items);var top=0;for(i=0,n=this.numChildren;i<n;i++)(item=items[i]).y=top,top+=item.height*item.scaleY+this._space,"left"==this._align?item.x=0:"center"==this._align?item.x=.5*(maxWidth-item.width*item.scaleX):"right"==this._align&&(item.x=maxWidth-item.width*item.scaleX);this.changeSize()},VBox.NONE="none",VBox.LEFT="left",VBox.CENTER="center",VBox.RIGHT="right",VBox}(LayoutBox),RadioGroup=function(_super){function RadioGroup(){RadioGroup.__super.call(this)}return __class(RadioGroup,"laya.ui.RadioGroup",_super),RadioGroup.prototype.createItem=function(skin,label){return new Radio(skin,label)},RadioGroup}(UIGroup),Tab=function(_super){function Tab(){Tab.__super.call(this)}return __class(Tab,"laya.ui.Tab",_super),Tab.prototype.createItem=function(skin,label){return new Button(skin,label)},Tab}(UIGroup),TextArea=function(_super){function TextArea(text){this._vScrollBar=null,this._hScrollBar=null,void 0===text&&(text=""),TextArea.__super.call(this,text)}__class(TextArea,"laya.ui.TextArea",_super);var __proto=TextArea.prototype;return __proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),_super.prototype.destroy.call(this,destroyChild),this._vScrollBar&&this._vScrollBar.destroy(),this._hScrollBar&&this._hScrollBar.destroy(),this._vScrollBar=null,this._hScrollBar=null},__proto.initialize=function(){this.width=180,this.height=150,this._tf.wordWrap=!0,this.multiline=!0},__proto.onVBarChanged=function(e){this._tf.scrollY!=this._vScrollBar.value&&(this._tf.scrollY=this._vScrollBar.value)},__proto.onHBarChanged=function(e){this._tf.scrollX!=this._hScrollBar.value&&(this._tf.scrollX=this._hScrollBar.value)},__proto.changeScroll=function(){var vShow=this._vScrollBar&&this._tf.maxScrollY>0,hShow=this._hScrollBar&&this._tf.maxScrollX>0,showWidth=vShow?this._width-this._vScrollBar.width:this._width,showHeight=hShow?this._height-this._hScrollBar.height:this._height,padding=this._tf.padding||Styles.labelPadding;this._tf.width=showWidth,this._tf.height=showHeight,this._vScrollBar&&(this._vScrollBar.x=this._width-this._vScrollBar.width-padding[2],this._vScrollBar.y=padding[1],this._vScrollBar.height=this._height-(hShow?this._hScrollBar.height:0)-padding[1]-padding[3],this._vScrollBar.scrollSize=1,this._vScrollBar.thumbPercent=showHeight/Math.max(this._tf.textHeight,showHeight),this._vScrollBar.setScroll(1,this._tf.maxScrollY,this._tf.scrollY),this._vScrollBar.visible=vShow),this._hScrollBar&&(this._hScrollBar.x=padding[0],this._hScrollBar.y=this._height-this._hScrollBar.height-padding[3],this._hScrollBar.width=this._width-(vShow?this._vScrollBar.width:0)-padding[0]-padding[2],this._hScrollBar.scrollSize=Math.max(.033*showWidth,1),this._hScrollBar.thumbPercent=showWidth/Math.max(this._tf.textWidth,showWidth),this._hScrollBar.setScroll(0,this.maxScrollX,this.scrollX),this._hScrollBar.visible=hShow)},__proto.scrollTo=function(y){this.commitMeasure(),this._tf.scrollY=y},__getset(0,__proto,"scrollY",function(){return this._tf.scrollY}),__getset(0,__proto,"width",_super.prototype._$get_width,function(value){_super.prototype._$set_width.call(this,value),this.callLater(this.changeScroll)}),__getset(0,__proto,"hScrollBar",function(){return this._hScrollBar}),__getset(0,__proto,"height",_super.prototype._$get_height,function(value){_super.prototype._$set_height.call(this,value),this.callLater(this.changeScroll)}),__getset(0,__proto,"maxScrollX",function(){return this._tf.maxScrollX}),__getset(0,__proto,"vScrollBarSkin",function(){return this._vScrollBar?this._vScrollBar.skin:null},function(value){null==this._vScrollBar&&(this.addChild(this._vScrollBar=new VScrollBar),this._vScrollBar.on("change",this,this.onVBarChanged),this._vScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._vScrollBar.skin=value}),__getset(0,__proto,"hScrollBarSkin",function(){return this._hScrollBar?this._hScrollBar.skin:null},function(value){null==this._hScrollBar&&(this.addChild(this._hScrollBar=new HScrollBar),this._hScrollBar.on("change",this,this.onHBarChanged),this._hScrollBar.mouseWheelEnable=!1,this._hScrollBar.target=this._tf,this.callLater(this.changeScroll)),this._hScrollBar.skin=value}),__getset(0,__proto,"vScrollBar",function(){return this._vScrollBar}),__getset(0,__proto,"maxScrollY",function(){return this._tf.maxScrollY}),__getset(0,__proto,"scrollX",function(){return this._tf.scrollX}),TextArea}(TextInput);!function(_super){function AsynDialog(){this._uiView=null,AsynDialog.__super.call(this)}__class(AsynDialog,"laya.ui.AsynDialog",_super);var __proto=AsynDialog.prototype;__proto.createView=function(uiView){this._uiView=uiView},__proto.ready=function(){this._uiView&&(laya.ui.View.prototype.createView.call(this,this._uiView),this._uiView=null),this._dealDragArea(),this.callLater(this.event,["ready"])},__proto.show=function(closeOther){void 0===closeOther&&(closeOther=!1),Dialog.manager.lock(!0),this.once("ready",this,this._open,[!1,closeOther])},__proto.popup=function(closeOther){void 0===closeOther&&(closeOther=!1),Dialog.manager.lock(!0),this.once("ready",this,this._open,[!0,closeOther])}}(Dialog);Laya.__init([View])}(0,0,Laya),function(window,document,Laya){Laya.un,Laya.uns;var __static=Laya.static,__class=Laya.class,__getset=Laya.getset,__newvec=Laya.__newvec,Bezier=laya.maths.Bezier,Browser=laya.utils.Browser,Byte=laya.utils.Byte,EventDispatcher=(laya.events.Event,laya.events.EventDispatcher),Graphics=laya.display.Graphics,Handler=laya.utils.Handler,Loader=laya.net.Loader,MathUtil=laya.maths.MathUtil,Matrix=laya.maths.Matrix,Render=laya.renders.Render,Resource=laya.resource.Resource,RunDriver=laya.utils.RunDriver,Sprite=laya.display.Sprite,Stat=laya.utils.Stat,Texture=laya.resource.Texture,URL=laya.net.URL,Utils=laya.utils.Utils,Bone=(function(){function AnimationState(){}__class(AnimationState,"laya.ani.AnimationState"),AnimationState.stopped=0,AnimationState.paused=1,AnimationState.playing=2}(),function(){function Bone(){this.name=null,this.root=null,this.parentBone=null,this.length=10,this.transform=null,this.inheritScale=!0,this.inheritRotation=!0,this.rotation=NaN,this.resultRotation=NaN,this.d=-1,this._tempMatrix=null,this._sprite=null,this.resultTransform=new Transform,this.resultMatrix=new Matrix,this._children=[]}__class(Bone,"laya.ani.bone.Bone");var __proto=Bone.prototype;return __proto.setTempMatrix=function(matrix){this._tempMatrix=matrix;var i=0,n=0;for(i=0,n=this._children.length;i<n;i++)this._children[i].setTempMatrix(this._tempMatrix)},__proto.update=function(pMatrix){this.rotation=this.transform.skX;var tResultMatrix;if(pMatrix)tResultMatrix=this.resultTransform.getMatrix(),Matrix.mul(tResultMatrix,pMatrix,this.resultMatrix),this.resultRotation=this.rotation;else if(this.resultRotation=this.rotation+this.parentBone.resultRotation,this.parentBone)if(this.inheritRotation&&this.inheritScale)tResultMatrix=this.resultTransform.getMatrix(),Matrix.mul(tResultMatrix,this.parentBone.resultMatrix,this.resultMatrix);else{var parent=this.parentBone,tAngle=NaN,cos=NaN,sin=NaN,tParentMatrix=this.parentBone.resultMatrix;tResultMatrix=this.resultTransform.getMatrix();var worldX=tParentMatrix.a*tResultMatrix.tx+tParentMatrix.c*tResultMatrix.ty+tParentMatrix.tx,worldY=tParentMatrix.b*tResultMatrix.tx+tParentMatrix.d*tResultMatrix.ty+tParentMatrix.ty,tTestMatrix=new Matrix;this.inheritRotation?(tAngle=Math.atan2(parent.resultMatrix.b,parent.resultMatrix.a),cos=Math.cos(tAngle),sin=Math.sin(tAngle),tTestMatrix.setTo(cos,sin,-sin,cos,0,0),Matrix.mul(this._tempMatrix,tTestMatrix,Matrix.TEMP),Matrix.TEMP.copyTo(tTestMatrix),tResultMatrix=this.resultTransform.getMatrix(),Matrix.mul(tResultMatrix,tTestMatrix,this.resultMatrix),this.resultMatrix.tx=worldX,this.resultMatrix.ty=worldY):(this.inheritScale,tResultMatrix=this.resultTransform.getMatrix(),Matrix.TEMP.identity(),Matrix.TEMP.d=this.d,Matrix.mul(tResultMatrix,Matrix.TEMP,this.resultMatrix),this.resultMatrix.tx=worldX,this.resultMatrix.ty=worldY)}else(tResultMatrix=this.resultTransform.getMatrix()).copyTo(this.resultMatrix);var i=0,n=0;for(i=0,n=this._children.length;i<n;i++)this._children[i].update()},__proto.updateChild=function(){var i=0,n=0;for(i=0,n=this._children.length;i<n;i++)this._children[i].update()},__proto.setRotation=function(rd){this._sprite&&(this._sprite.rotation=180*rd/Math.PI)},__proto.updateDraw=function(x,y){Bone.ShowBones&&!Bone.ShowBones[this.name]||(this._sprite?(this._sprite.x=x+this.resultMatrix.tx,this._sprite.y=y+this.resultMatrix.ty):(this._sprite=new Sprite,this._sprite.graphics.drawCircle(0,0,5,"#ff0000"),this._sprite.graphics.drawLine(0,0,this.length,0,"#00ff00"),this._sprite.graphics.fillText(this.name,0,0,"20px Arial","#00ff00","center"),Laya.stage.addChild(this._sprite),this._sprite.x=x+this.resultMatrix.tx,this._sprite.y=y+this.resultMatrix.ty));var i=0,n=0;for(i=0,n=this._children.length;i<n;i++)this._children[i].updateDraw(x,y)},__proto.addChild=function(bone){this._children.push(bone),bone.parentBone=this},__proto.findBone=function(boneName){if(this.name==boneName)return this;var tBone,tResult,i=0,n=0;for(i=0,n=this._children.length;i<n;i++)if(tBone=this._children[i],tResult=tBone.findBone(boneName))return tResult;return null},__proto.localToWorld=function(local){var localX=local[0],localY=local[1];local[0]=localX*this.resultMatrix.a+localY*this.resultMatrix.c+this.resultMatrix.tx,local[1]=localX*this.resultMatrix.b+localY*this.resultMatrix.d+this.resultMatrix.ty},Bone.ShowBones={},Bone}()),BoneSlot=function(){function BoneSlot(){this.name=null,this.parent=null,this.attachmentName=null,this.srcDisplayIndex=-1,this.type="src",this.templet=null,this.currSlotData=null,this.currTexture=null,this.currDisplayData=null,this.displayIndex=-1,this._diyTexture=null,this._parentMatrix=null,this._resultMatrix=null,this._replaceDic={},this._curDiyUV=null,this._curDiyVS=null,this._skinSprite=null,this.deformData=null,this._mVerticleArr=null}__class(BoneSlot,"laya.ani.bone.BoneSlot");var __proto=BoneSlot.prototype;return __proto.showSlotData=function(slotData,freshIndex){void 0===freshIndex&&(freshIndex=!0),this.currSlotData=slotData,freshIndex&&(this.displayIndex=this.srcDisplayIndex),this.currDisplayData=null,this.currTexture=null},__proto.showDisplayByName=function(name){this.currSlotData&&this.showDisplayByIndex(this.currSlotData.getDisplayByName(name))},__proto.replaceDisplayByName=function(tarName,newName){if(this.currSlotData){var preIndex=0;preIndex=this.currSlotData.getDisplayByName(tarName);var newIndex=0;newIndex=this.currSlotData.getDisplayByName(newName),this.replaceDisplayByIndex(preIndex,newIndex)}},__proto.replaceDisplayByIndex=function(tarIndex,newIndex){this.currSlotData&&(this._replaceDic[tarIndex]=newIndex,this.displayIndex==tarIndex&&this.showDisplayByIndex(tarIndex))},__proto.showDisplayByIndex=function(index){if(this._replaceDic[index]&&(index=this._replaceDic[index]),this.currSlotData&&index>-1&&index<this.currSlotData.displayArr.length){if(this.displayIndex=index,this.currDisplayData=this.currSlotData.displayArr[index],this.currDisplayData){var tName=this.currDisplayData.name;this.currTexture=this.templet.getTexture(tName),this.currTexture&&Render.isWebGL&&0==this.currDisplayData.type&&this.currDisplayData.uvs&&(this.currTexture=this.currDisplayData.createTexture(this.currTexture))}}else this.displayIndex=-1,this.currDisplayData=null,this.currTexture=null},__proto.replaceSkin=function(_texture){this._diyTexture=_texture,this._curDiyUV&&(this._curDiyUV.length=0)},__proto.setParentMatrix=function(parentMatrix){this._parentMatrix=parentMatrix},__proto.draw=function(graphics,boneMatrixArray,noUseSave,alpha){if(void 0===noUseSave&&(noUseSave=!1),void 0===alpha&&(alpha=1),(null!=this._diyTexture||null!=this.currTexture)&&null!=this.currDisplayData||this.currDisplayData&&3==this.currDisplayData.type){var tTexture=this.currTexture;this._diyTexture&&(tTexture=this._diyTexture);var tSkinSprite;switch(this.currDisplayData.type){case 0:if(graphics){var tCurrentMatrix=this.getDisplayMatrix();if(this._parentMatrix){var tRotateKey=!1;if(tCurrentMatrix){Matrix.mul(tCurrentMatrix,this._parentMatrix,Matrix.TEMP);var tResultMatrix;if(noUseSave?(null==this._resultMatrix&&(this._resultMatrix=new Matrix),tResultMatrix=this._resultMatrix):tResultMatrix=new Matrix,!Render.isWebGL&&this.currDisplayData.uvs||Render.isWebGL&&this._diyTexture&&this.currDisplayData.uvs){var tTestMatrix=BoneSlot._tempMatrix;tTestMatrix.identity(),this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(tTestMatrix.d=-1),this.currDisplayData.uvs[0]>this.currDisplayData.uvs[4]&&this.currDisplayData.uvs[1]>this.currDisplayData.uvs[5]&&(tRotateKey=!0,tTestMatrix.rotate(-Math.PI/2)),Matrix.mul(tTestMatrix,Matrix.TEMP,tResultMatrix)}else Matrix.TEMP.copyTo(tResultMatrix);tRotateKey?graphics.drawTexture(tTexture,-this.currDisplayData.height/2,-this.currDisplayData.width/2,this.currDisplayData.height,this.currDisplayData.width,tResultMatrix):graphics.drawTexture(tTexture,-this.currDisplayData.width/2,-this.currDisplayData.height/2,this.currDisplayData.width,this.currDisplayData.height,tResultMatrix)}}}break;case 1:if(noUseSave?(null==this._skinSprite&&(this._skinSprite=RunDriver.skinAniSprite()),tSkinSprite=this._skinSprite):tSkinSprite=RunDriver.skinAniSprite(),null==tSkinSprite)return;var tIBArray;if(null==this.currDisplayData.bones){var tVertices=this.currDisplayData.weights;this.deformData&&(tVertices=this.deformData);var tUVs;this._diyTexture?(this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=UVTools.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=UVTools.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),tUVs=this._curDiyUV):tUVs=this.currDisplayData.uvs,this._mVerticleArr=tVertices;this.currDisplayData.triangles.length;tIBArray=this.currDisplayData.triangles,tSkinSprite.init2(tTexture,null,tIBArray,this._mVerticleArr,tUVs);var tCurrentMatrix2=this.getDisplayMatrix();if(this._parentMatrix&&tCurrentMatrix2){Matrix.mul(tCurrentMatrix2,this._parentMatrix,Matrix.TEMP);var tResultMatrix2;noUseSave?(null==this._resultMatrix&&(this._resultMatrix=new Matrix),tResultMatrix2=this._resultMatrix):tResultMatrix2=new Matrix,Matrix.TEMP.copyTo(tResultMatrix2),tSkinSprite.transform=tResultMatrix2}}else this.skinMesh(boneMatrixArray,tSkinSprite,alpha);graphics.drawSkin(tSkinSprite);break;case 2:if(noUseSave?(null==this._skinSprite&&(this._skinSprite=RunDriver.skinAniSprite()),tSkinSprite=this._skinSprite):tSkinSprite=RunDriver.skinAniSprite(),null==tSkinSprite)return;this.skinMesh(boneMatrixArray,tSkinSprite,alpha),graphics.drawSkin(tSkinSprite)}}},__proto.skinMesh=function(boneMatrixArray,skinSprite,alpha){var tUvs,tTexture=this.currTexture,tBones=this.currDisplayData.bones;this._diyTexture?(tTexture=this._diyTexture,this._curDiyUV||(this._curDiyUV=[]),0==this._curDiyUV.length&&(this._curDiyUV=UVTools.getRelativeUV(this.currTexture.uv,this.currDisplayData.uvs,this._curDiyUV),this._curDiyUV=UVTools.getAbsoluteUV(this._diyTexture.uv,this._curDiyUV,this._curDiyUV)),tUvs=this._curDiyUV):tUvs=this.currDisplayData.uvs;var tIBArray,tMatrix,tWeights=this.currDisplayData.weights,tTriangles=this.currDisplayData.triangles,tRx=0,tRy=0,nn=0,tX=NaN,tY=NaN,tB=0,tWeight=0,tVertices=[],i=0,n=0;if(this.deformData&&this.deformData.length>0){var f=0;for(i=0,n=tBones.length;i<n;){for(nn=tBones[i++]+i,tRx=0,tRy=0;i<nn;i++)tMatrix=boneMatrixArray[tBones[i]],tX=tWeights[tB]+this.deformData[f++],tY=tWeights[tB+1]+this.deformData[f++],tWeight=tWeights[tB+2],tRx+=(tX*tMatrix.a+tY*tMatrix.c+tMatrix.tx)*tWeight,tRy+=(tX*tMatrix.b+tY*tMatrix.d+tMatrix.ty)*tWeight,tB+=3;tVertices.push(tRx,tRy)}}else for(i=0,n=tBones.length;i<n;){for(nn=tBones[i++]+i,tRx=0,tRy=0;i<nn;i++)tMatrix=boneMatrixArray[tBones[i]],tX=tWeights[tB],tY=tWeights[tB+1],tWeight=tWeights[tB+2],tRx+=(tX*tMatrix.a+tY*tMatrix.c+tMatrix.tx)*tWeight,tRy+=(tX*tMatrix.b+tY*tMatrix.d+tMatrix.ty)*tWeight,tB+=3;tVertices.push(tRx,tRy)}this._mVerticleArr=tVertices,tIBArray=tTriangles,skinSprite.init2(tTexture,null,tIBArray,this._mVerticleArr,tUvs)},__proto.drawBonePoint=function(graphics){graphics&&this._parentMatrix&&graphics.drawCircle(this._parentMatrix.tx,this._parentMatrix.ty,5,"#ff0000")},__proto.getDisplayMatrix=function(){return this.currDisplayData?this.currDisplayData.transform.getMatrix():null},__proto.getMatrix=function(){return this._resultMatrix},__proto.copy=function(){var tBoneSlot=new BoneSlot;return tBoneSlot.type="copy",tBoneSlot.name=this.name,tBoneSlot.attachmentName=this.attachmentName,tBoneSlot.srcDisplayIndex=this.srcDisplayIndex,tBoneSlot.parent=this.parent,tBoneSlot.displayIndex=this.displayIndex,tBoneSlot.templet=this.templet,tBoneSlot.currSlotData=this.currSlotData,tBoneSlot.currTexture=this.currTexture,tBoneSlot.currDisplayData=this.currDisplayData,tBoneSlot},__static(BoneSlot,["_tempMatrix",function(){return this._tempMatrix=new Matrix}]),BoneSlot}(),DeformAniData=function(){function DeformAniData(){this.skinName=null,this.deformSlotDataList=[]}return __class(DeformAniData,"laya.ani.bone.DeformAniData"),DeformAniData}(),DeformSlotData=function(){function DeformSlotData(){this.deformSlotDisplayList=[]}return __class(DeformSlotData,"laya.ani.bone.DeformSlotData"),DeformSlotData}(),DeformSlotDisplayData=function(){function DeformSlotDisplayData(){this.boneSlot=null,this.slotIndex=-1,this.attachment=null,this.deformData=null,this.frameIndex=0,this.timeList=[],this.vectices=[],this.tweenKeyList=[]}__class(DeformSlotDisplayData,"laya.ani.bone.DeformSlotDisplayData");var __proto=DeformSlotDisplayData.prototype;return __proto.binarySearch1=function(values,target){var low=0,high=values.length-2;if(0==high)return 1;for(var current=high>>>1;;){if(values[Math.floor(current+1)]<=target?low=current+1:high=current,low==high)return low+1;current=low+high>>>1}return 0},__proto.apply=function(time,boneSlot,alpha){if(void 0===alpha&&(alpha=1),time+=.05,!(this.timeList.length<=0)){var i=0;if(!(time<this.timeList[0])){var tVertexCount=this.vectices[0].length,tVertices=[],tFrameIndex=this.binarySearch1(this.timeList,time);if(this.frameIndex=tFrameIndex,time>=this.timeList[this.timeList.length-1]){var lastVertices=this.vectices[this.vectices.length-1];if(alpha<1)for(i=0;i<tVertexCount;i++)tVertices[i]+=(lastVertices[i]-tVertices[i])*alpha;else for(i=0;i<tVertexCount;i++)tVertices[i]=lastVertices[i];this.deformData=tVertices}else{this.tweenKeyList[this.frameIndex];var tPrevVertices=this.vectices[this.frameIndex-1],tNextVertices=this.vectices[this.frameIndex],tPreFrameTime=this.timeList[this.frameIndex-1],tFrameTime=this.timeList[this.frameIndex];alpha=this.tweenKeyList[tFrameIndex-1]?(time-tPreFrameTime)/(tFrameTime-tPreFrameTime):0;var tPrev=NaN;for(i=0;i<tVertexCount;i++)tPrev=tPrevVertices[i],tVertices[i]=tPrev+(tNextVertices[i]-tPrev)*alpha;this.deformData=tVertices}}}},DeformSlotDisplayData}(),DrawOrderData=function(){function DrawOrderData(){this.time=NaN,this.drawOrder=[]}return __class(DrawOrderData,"laya.ani.bone.DrawOrderData"),DrawOrderData}(),EventData=function(){function EventData(){this.name=null,this.intValue=0,this.floatValue=NaN,this.stringValue=null,this.time=NaN}return __class(EventData,"laya.ani.bone.EventData"),EventData}(),IkConstraint=function(){function IkConstraint(data,bones){this._targetBone=null,this._bones=null,this._data=null,this.name=null,this.mix=NaN,this.bendDirection=NaN,this.isSpine=!0,this._sp=null,this.isDebug=!1,this._data=data,this._targetBone=bones[data.targetBoneIndex],this.isSpine=data.isSpine,null==this._bones&&(this._bones=[]),this._bones.length=0;for(var i=0,n=data.boneIndexs.length;i<n;i++)this._bones.push(bones[data.boneIndexs[i]]);this.name=data.name,this.mix=data.mix,this.bendDirection=data.bendDirection}__class(IkConstraint,"laya.ani.bone.IkConstraint");var __proto=IkConstraint.prototype;return __proto.apply=function(){switch(this._bones.length){case 1:this._applyIk1(this._bones[0],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.mix);break;case 2:this.isSpine?this._applyIk2(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix):this._applyIk3(this._bones[0],this._bones[1],this._targetBone.resultMatrix.tx,this._targetBone.resultMatrix.ty,this.bendDirection,this.mix)}},__proto._applyIk1=function(bone,targetX,targetY,alpha){var pp=bone.parentBone,id=1/(pp.resultMatrix.a*pp.resultMatrix.d-pp.resultMatrix.b*pp.resultMatrix.c),x=targetX-pp.resultMatrix.tx,y=targetY-pp.resultMatrix.ty,tx=(x*pp.resultMatrix.d-y*pp.resultMatrix.c)*id-bone.transform.x,ty=(y*pp.resultMatrix.a-x*pp.resultMatrix.b)*id-bone.transform.y,rotationIK=Math.atan2(ty,tx)*IkConstraint.radDeg-0-bone.transform.skX;bone.transform.scX<0&&(rotationIK+=180),rotationIK>180?rotationIK-=360:rotationIK<-180&&(rotationIK+=360),bone.transform.skX=bone.transform.skY=bone.transform.skX+rotationIK*alpha,bone.update()},__proto.updatePos=function(x,y){this._sp&&this._sp.pos(x,y)},__proto._applyIk2=function(parent,child,targetX,targetY,bendDir,alpha){if(0!=alpha){var px=parent.resultTransform.x,py=parent.resultTransform.y,psx=parent.transform.scX,psy=parent.transform.scY,csx=child.transform.scX,os1=0,os2=0,s2=0;psx<0?(psx=-psx,os1=180,s2=-1):(os1=0,s2=1),psy<0&&(psy=-psy,s2=-s2),csx<0?(csx=-csx,os2=180):os2=0;var cx=child.resultTransform.x,cy=NaN,cwx=NaN,cwy=NaN,a=parent.resultMatrix.a,b=parent.resultMatrix.c,c=parent.resultMatrix.b,d=parent.resultMatrix.d,u=Math.abs(psx-psy)<=1e-4;u?(cwx=a*cx+b*(cy=child.resultTransform.y)+parent.resultMatrix.tx,cwy=c*cx+d*cy+parent.resultMatrix.ty):(cy=0,cwx=a*cx+parent.resultMatrix.tx,cwy=c*cx+parent.resultMatrix.ty),this.isDebug&&(this._sp||(this._sp=new Sprite,Laya.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(targetX,targetY,15,"#ffff00"),this._sp.graphics.drawCircle(cwx,cwy,15,"#ff00ff")),parent.setRotation(Math.atan2(cwy-parent.resultMatrix.ty,cwx-parent.resultMatrix.tx));var pp=parent.parentBone;a=pp.resultMatrix.a,b=pp.resultMatrix.c,c=pp.resultMatrix.b;var id=1/(a*(d=pp.resultMatrix.d)-b*c),x=targetX-pp.resultMatrix.tx,y=targetY-pp.resultMatrix.ty,tx=(x*d-y*b)*id-px,ty=(y*a-x*c)*id-py,dx=((x=cwx-pp.resultMatrix.tx)*d-(y=cwy-pp.resultMatrix.ty)*b)*id-px,dy=(y*a-x*c)*id-py,l1=Math.sqrt(dx*dx+dy*dy),l2=child.length*csx,a1=NaN,a2=NaN;if(u){var cos=(tx*tx+ty*ty-l1*l1-(l2*=psx)*l2)/(2*l1*l2);cos<-1?cos=-1:cos>1&&(cos=1),a2=Math.acos(cos)*bendDir,a=l1+l2*cos,b=l2*Math.sin(a2),a1=Math.atan2(ty*a-tx*b,tx*a+ty*b)}else{var aa=(a=psx*l2)*a,bb=(b=psy*l2)*b,dd=tx*tx+ty*ty,ta=Math.atan2(ty,tx),c1=-2*bb*l1,c2=bb-aa;if((d=c1*c1-4*c2*(c=bb*l1*l1+aa*dd-aa*bb))>0){var q=Math.sqrt(d);c1<0&&(q=-q);var r0=(q=-(c1+q)/2)/c2,r1=c/q,r=Math.abs(r0)<Math.abs(r1)?r0:r1;r*r<=dd&&(y=Math.sqrt(dd-r*r)*bendDir,a1=ta-Math.atan2(y,r),a2=Math.atan2(y/psy,(r-l1)/psx))}var minAngle=0,minDist=Number.MAX_VALUE,minX=0,minY=0,maxAngle=0,maxDist=0,maxX=0,maxY=0;(d=(x=l1+a)*x)>maxDist&&(maxAngle=0,maxDist=d,maxX=x),(d=(x=l1-a)*x)<minDist&&(minAngle=Math.PI,minDist=d,minX=x);var angle=Math.acos(-a*l1/(aa-bb));(d=(x=a*Math.cos(angle)+l1)*x+(y=b*Math.sin(angle))*y)<minDist&&(minAngle=angle,minDist=d,minX=x,minY=y),d>maxDist&&(maxAngle=angle,maxDist=d,maxX=x,maxY=y),dd<=(minDist+maxDist)/2?(a1=ta-Math.atan2(minY*bendDir,minX),a2=minAngle*bendDir):(a1=ta-Math.atan2(maxY*bendDir,maxX),a2=maxAngle*bendDir)}var os=Math.atan2(cy,cx)*s2,rotation=parent.resultTransform.skX;(a1=(a1-os)*IkConstraint.radDeg+os1-rotation)>180?a1-=360:a1<-180&&(a1+=360),parent.resultTransform.x=px,parent.resultTransform.y=py,parent.resultTransform.skX=parent.resultTransform.skY=rotation+a1*alpha,rotation=child.resultTransform.skX,rotation%=360,(a2=((a2+os)*IkConstraint.radDeg-0)*s2+os2-rotation)>180?a2-=360:a2<-180&&(a2+=360),child.resultTransform.x=cx,child.resultTransform.y=cy,child.resultTransform.skX=child.resultTransform.skY=child.resultTransform.skY+a2*alpha,parent.update()}},__proto._applyIk3=function(parent,child,targetX,targetY,bendDir,alpha){if(0!=alpha){var cwx=NaN,cwy=NaN,x=child.resultMatrix.a*child.length,y=child.resultMatrix.b*child.length,lLL=x*x+y*y,lL=Math.sqrt(lLL),parentX=parent.resultMatrix.tx,parentY=parent.resultMatrix.ty,childX=child.resultMatrix.tx,childY=child.resultMatrix.ty,dX=childX-parentX,dY=childY-parentY,lPP=dX*dX+dY*dY,lP=Math.sqrt(lPP),lTT=(dX=targetX-parent.resultMatrix.tx)*dX+(dY=targetY-parent.resultMatrix.ty)*dY,lT=Math.sqrt(lTT);if(lL+lP<=lT||lT+lL<=lP||lT+lP<=lL){var rate=NaN;childX=parentX+(rate=lL+lP<=lT?1:-1)*(targetX-parentX)*lP/lT,childY=parentY+rate*(targetY-parentY)*lP/lT}else{var h=(lPP-lLL+lTT)/(2*lTT),r=Math.sqrt(lPP-h*h*lTT)/lT,hX=parentX+dX*h,hY=parentY+dY*h,rX=-dY*r,rY=dX*r;bendDir>0?(childX=hX-rX,childY=hY-rY):(childX=hX+rX,childY=hY+rY)}cwx=childX,cwy=childY,this.isDebug&&(this._sp||(this._sp=new Sprite,Laya.stage.addChild(this._sp)),this._sp.graphics.clear(),this._sp.graphics.drawCircle(parentX,parentY,15,"#ff00ff"),this._sp.graphics.drawCircle(targetX,targetY,15,"#ffff00"),this._sp.graphics.drawCircle(cwx,cwy,15,"#ff00ff"));var pRotation=NaN;pRotation=Math.atan2(cwy-parent.resultMatrix.ty,cwx-parent.resultMatrix.tx),parent.setRotation(pRotation);var pTarMatrix;(pTarMatrix=IkConstraint._tempMatrix).identity(),pTarMatrix.rotate(pRotation),pTarMatrix.scale(parent.resultMatrix.getScaleX(),parent.resultMatrix.getScaleY()),pTarMatrix.translate(parent.resultMatrix.tx,parent.resultMatrix.ty),pTarMatrix.copyTo(parent.resultMatrix),parent.updateChild();var childRotation=NaN;childRotation=Math.atan2(targetY-cwy,targetX-cwx),child.setRotation(childRotation);var childTarMatrix;(childTarMatrix=IkConstraint._tempMatrix).identity(),childTarMatrix.rotate(childRotation),childTarMatrix.scale(child.resultMatrix.getScaleX(),child.resultMatrix.getScaleY()),childTarMatrix.translate(cwx,cwy),pTarMatrix.copyTo(child.resultMatrix),child.updateChild()}},__static(IkConstraint,["radDeg",function(){return this.radDeg=180/Math.PI},"degRad",function(){return this.degRad=Math.PI/180},"_tempMatrix",function(){return this._tempMatrix=new Matrix}]),IkConstraint}(),IkConstraintData=function(){function IkConstraintData(){this.name=null,this.targetBoneName=null,this.bendDirection=1,this.mix=1,this.isSpine=!0,this.targetBoneIndex=-1,this.boneNames=[],this.boneIndexs=[]}return __class(IkConstraintData,"laya.ani.bone.IkConstraintData"),IkConstraintData}(),PathConstraint=function(){function PathConstraint(data,bones){this.target=null,this.data=null,this.bones=null,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this._debugKey=!1,this._spaces=null,this._segments=[],this._curves=[],this.data=data,this.position=data.position,this.spacing=data.spacing,this.rotateMix=data.rotateMix,this.translateMix=data.translateMix,this.bones=[];for(var tBoneIds=this.data.bones,i=0,n=tBoneIds.length;i<n;i++)this.bones.push(bones[tBoneIds[i]])}__class(PathConstraint,"laya.ani.bone.PathConstraint");var __proto=PathConstraint.prototype;return __proto.apply=function(boneList,graphics){var tTranslateMix=this.translateMix,tRotateMix=this.translateMix,tRotate=tRotateMix>0,tSpacingMode=this.data.spacingMode,tLengthSpacing="length"==tSpacingMode,tRotateMode=this.data.rotateMode,tTangents="tangent"==tRotateMode,tScale="chainScale"==tRotateMode,lengths=[],boneCount=this.bones.length,spacesCount=tTangents?boneCount:boneCount+1,spaces=[];this._spaces=spaces,spaces[0]=this.position;var spacing=this.spacing;if(tScale||tLengthSpacing)for(var i=0,n=spacesCount-1;i<n;){var bone=this.bones[i],length=bone.length,x=length*bone.resultMatrix.a,y=length*bone.resultMatrix.b;length=Math.sqrt(x*x+y*y),tScale&&(lengths[i]=length),spaces[++i]=tLengthSpacing?Math.max(0,length+spacing):spacing}else for(i=1;i<spacesCount;i++)spaces[i]=spacing;var positions=this.computeWorldPositions(this.target,boneList,graphics,spacesCount,tTangents,"percent"==this.data.positionMode,"percent"==tSpacingMode);if(this._debugKey){for(i=0;i<positions.length;i++)graphics.drawCircle(positions[i++],positions[i++],5,"#00ff00");var tLinePos=[];for(i=0;i<positions.length;i++)tLinePos.push(positions[i++],positions[i++]);graphics.drawLines(0,0,tLinePos,"#ff0000")}var boneX=positions[0],boneY=positions[1],offsetRotation=this.data.offsetRotation,tip="chain"==tRotateMode&&0==offsetRotation,p=NaN;for(i=0,p=3;i<boneCount;i++,p+=3){(bone=this.bones[i]).resultMatrix.tx+=(boneX-bone.resultMatrix.tx)*tTranslateMix,bone.resultMatrix.ty+=(boneY-bone.resultMatrix.ty)*tTranslateMix;var dx=(x=positions[p])-boneX,dy=(y=positions[p+1])-boneY;if(tScale&&0!=(length=lengths[i])){var s=(Math.sqrt(dx*dx+dy*dy)/length-1)*tRotateMix+1;bone.resultMatrix.a*=s,bone.resultMatrix.c*=s}if(boneX=x,boneY=y,tRotate){var a=bone.resultMatrix.a,b=bone.resultMatrix.c,c=bone.resultMatrix.b,d=bone.resultMatrix.d,r=NaN,cos=NaN,sin=NaN;r=tTangents?positions[p-1]:0==spaces[i+1]?positions[p+2]:Math.atan2(dy,dx),r-=Math.atan2(c,a)-offsetRotation/180*Math.PI,tip&&(cos=Math.cos(r),sin=Math.sin(r),boneX+=((length=bone.length)*(cos*a-sin*c)-dx)*tRotateMix,boneY+=(length*(sin*a+cos*c)-dy)*tRotateMix),r>Math.PI?r-=2*Math.PI:r<-Math.PI&&(r+=2*Math.PI),r*=tRotateMix,cos=Math.cos(r),sin=Math.sin(r),bone.resultMatrix.a=cos*a-sin*c,bone.resultMatrix.c=cos*b-sin*d,bone.resultMatrix.b=sin*a+cos*c,bone.resultMatrix.d=sin*b+cos*d}}},__proto.computeWorldVertices2=function(boneSlot,boneList,start,count,worldVertices,offset){var tMatrix,tBones=boneSlot.currDisplayData.bones,tWeights=boneSlot.currDisplayData.weights,i=(boneSlot.currDisplayData.triangles,0),v=0,skip=0,n=0,w=0,b=0,wx=0,wy=0,vx=0,vy=0;for(i=0;i<start;i+=2)v+=(n=tBones[v])+1,skip+=n;var skeletonBones=boneList;for(w=offset,b=3*skip;w<count;w+=2){for(wx=0,wy=0,n=tBones[v++],n+=v;v<n;v++,b+=3){tMatrix=skeletonBones[tBones[v]].resultMatrix,vx=tWeights[b],vy=tWeights[b+1];var weight=tWeights[b+2];wx+=(vx*tMatrix.a+vy*tMatrix.c+tMatrix.tx)*weight,wy+=(vx*tMatrix.b+vy*tMatrix.d+tMatrix.ty)*weight}worldVertices[w]=wx,worldVertices[w+1]=wy}},__proto.computeWorldPositions=function(boneSlot,boneList,graphics,spacesCount,tangents,percentPosition,percentSpacing){boneSlot.currDisplayData.bones,boneSlot.currDisplayData.weights,boneSlot.currDisplayData.triangles;var tVertices=[],i=0,verticesLength=boneSlot.currDisplayData.verLen,position=this.position,spaces=this._spaces,world=[],out=[],curveCount=verticesLength/6,prevCurve=-1,pathLength=NaN,o=0,curve=0,p=NaN,space=NaN,prev=NaN,length=NaN;if(curveCount--,verticesLength-=4,this.computeWorldVertices2(boneSlot,boneList,2,verticesLength,tVertices,0),this._debugKey)for(i=0;i<tVertices.length;)graphics.drawCircle(tVertices[i++],tVertices[i++],10,"#ff0000");world=tVertices,this._curves.length=curveCount;var curves=this._curves;pathLength=0;var x1=world[0],y1=world[1],cx1=0,cy1=0,cx2=0,cy2=0,x2=0,y2=0,tmpx=NaN,tmpy=NaN,dddfx=NaN,dddfy=NaN,ddfx=NaN,ddfy=NaN,dfx=NaN,dfy=NaN,w=0;for(i=0,w=2;i<curveCount;i++,w+=6)cx1=world[w],cy1=world[w+1],cx2=world[w+2],cy2=world[w+3],ddfx=2*(tmpx=.1875*(x1-2*cx1+cx2))+(dddfx=.09375*(3*(cx1-cx2)-x1+(x2=world[w+4]))),ddfy=2*(tmpy=.1875*(y1-2*cy1+cy2))+(dddfy=.09375*(3*(cy1-cy2)-y1+(y2=world[w+5]))),dfx=.75*(cx1-x1)+tmpx+.16666667*dddfx,dfy=.75*(cy1-y1)+tmpy+.16666667*dddfy,pathLength+=Math.sqrt(dfx*dfx+dfy*dfy),dfx+=ddfx,dfy+=ddfy,ddfx+=dddfx,ddfy+=dddfy,pathLength+=Math.sqrt(dfx*dfx+dfy*dfy),dfx+=ddfx,dfy+=ddfy,pathLength+=Math.sqrt(dfx*dfx+dfy*dfy),dfx+=ddfx+dddfx,dfy+=ddfy+dddfy,pathLength+=Math.sqrt(dfx*dfx+dfy*dfy),curves[i]=pathLength,x1=x2,y1=y2;if(percentPosition&&(position*=pathLength),percentSpacing)for(i=0;i<spacesCount;i++)spaces[i]*=pathLength;var segments=this._segments,curveLength=0,segment=0;for(i=0,o=0,curve=0,segment=0;i<spacesCount;i++,o+=3)if(space=spaces[i],position+=space,(p=position)<0)this.addBeforePosition(p,world,0,out,o);else if(p>pathLength)this.addAfterPosition(p-pathLength,world,verticesLength-4,out,o);else{for(;;curve++)if(length=curves[curve],!(p>length)){0==curve?p/=length:p=(p-(prev=curves[curve-1]))/(length-prev);break}if(curve!=prevCurve){prevCurve=curve;var ii=6*curve;for(x1=world[ii],y1=world[ii+1],cx1=world[ii+2],cy1=world[ii+3],cx2=world[ii+4],cy2=world[ii+5],ddfx=2*(tmpx=.03*(x1-2*cx1+cx2))+(dddfx=.006*(3*(cx1-cx2)-x1+(x2=world[ii+6]))),ddfy=2*(tmpy=.03*(y1-2*cy1+cy2))+(dddfy=.006*(3*(cy1-cy2)-y1+(y2=world[ii+7]))),dfx=.3*(cx1-x1)+tmpx+.16666667*dddfx,dfy=.3*(cy1-y1)+tmpy+.16666667*dddfy,curveLength=Math.sqrt(dfx*dfx+dfy*dfy),segments[0]=curveLength,ii=1;ii<8;ii++)dfx+=ddfx,dfy+=ddfy,ddfx+=dddfx,ddfy+=dddfy,curveLength+=Math.sqrt(dfx*dfx+dfy*dfy),segments[ii]=curveLength;dfx+=ddfx,dfy+=ddfy,curveLength+=Math.sqrt(dfx*dfx+dfy*dfy),segments[8]=curveLength,dfx+=ddfx+dddfx,dfy+=ddfy+dddfy,curveLength+=Math.sqrt(dfx*dfx+dfy*dfy),segments[9]=curveLength,segment=0}for(p*=curveLength;;segment++)if(length=segments[segment],!(p>length)){0==segment?p/=length:p=segment+(p-(prev=segments[segment-1]))/(length-prev);break}this.addCurvePosition(.1*p,x1,y1,cx1,cy1,cx2,cy2,x2,y2,out,o,tangents||i>0&&0==space)}return out},__proto.addBeforePosition=function(p,temp,i,out,o){var x1=temp[i],y1=temp[i+1],dx=temp[i+2]-x1,dy=temp[i+3]-y1,r=Math.atan2(dy,dx);out[o]=x1+p*Math.cos(r),out[o+1]=y1+p*Math.sin(r),out[o+2]=r},__proto.addAfterPosition=function(p,temp,i,out,o){var x1=temp[i+2],y1=temp[i+3],dx=x1-temp[i],dy=y1-temp[i+1],r=Math.atan2(dy,dx);out[o]=x1+p*Math.cos(r),out[o+1]=y1+p*Math.sin(r),out[o+2]=r},__proto.addCurvePosition=function(p,x1,y1,cx1,cy1,cx2,cy2,x2,y2,out,o,tangents){0==p&&(p=1e-4);var tt=p*p,ttt=tt*p,u=1-p,uu=u*u,uuu=uu*u,ut=u*p,ut3=3*ut,uut3=u*ut3,utt3=ut3*p,x=x1*uuu+cx1*uut3+cx2*utt3+x2*ttt,y=y1*uuu+cy1*uut3+cy2*utt3+y2*ttt;out[o]=x,out[o+1]=y,out[o+2]=tangents?Math.atan2(y-(y1*uu+cy1*ut*2+cy2*tt),x-(x1*uu+cx1*ut*2+cx2*tt)):0},PathConstraint.NONE=-1,PathConstraint.BEFORE=-2,PathConstraint.AFTER=-3,PathConstraint}(),PathConstraintData=function(){function PathConstraintData(){this.name=null,this.target=null,this.positionMode=null,this.spacingMode=null,this.rotateMode=null,this.offsetRotation=NaN,this.position=NaN,this.spacing=NaN,this.rotateMix=NaN,this.translateMix=NaN,this.bones=[]}return __class(PathConstraintData,"laya.ani.bone.PathConstraintData"),PathConstraintData}(),SkinData=function(){function SkinData(){this.name=null,this.slotArr=[]}return __class(SkinData,"laya.ani.bone.SkinData"),SkinData}(),SkinSlotDisplayData=function(){function SkinSlotDisplayData(){this.name=null,this.attachmentName=null,this.type=0,this.transform=null,this.width=NaN,this.height=NaN,this.texture=null,this.bones=null,this.uvs=null,this.weights=null,this.triangles=null,this.vertices=null,this.lengths=null,this.verLen=0}__class(SkinSlotDisplayData,"laya.ani.bone.SkinSlotDisplayData");var __proto=SkinSlotDisplayData.prototype;return __proto.createTexture=function(currTexture){return this.texture?this.texture:(this.texture=new Texture(currTexture.bitmap,this.uvs),this.uvs[0]>this.uvs[4]&&this.uvs[1]>this.uvs[5]?(this.texture.width=currTexture.height,this.texture.height=currTexture.width,this.texture.offsetX=-currTexture.offsetX,this.texture.offsetY=-currTexture.offsetY,this.texture.sourceWidth=currTexture.sourceHeight,this.texture.sourceHeight=currTexture.sourceWidth):(this.texture.width=currTexture.width,this.texture.height=currTexture.height,this.texture.offsetX=-currTexture.offsetX,this.texture.offsetY=-currTexture.offsetY,this.texture.sourceWidth=currTexture.sourceWidth,this.texture.sourceHeight=currTexture.sourceHeight),this.texture)},__proto.destory=function(){this.texture&&this.texture.destroy()},SkinSlotDisplayData}(),SlotData=function(){function SlotData(){this.name=null,this.displayArr=[]}return __class(SlotData,"laya.ani.bone.SlotData"),SlotData.prototype.getDisplayByName=function(name){for(var i=0,n=this.displayArr.length;i<n;i++)if(this.displayArr[i].attachmentName==name)return i;return-1},SlotData}(),TfConstraint=function(){function TfConstraint(data,bones){this._data=null,this._bones=null,this.target=null,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this._temp=__newvec(2,0),this._data=data,null==this._bones&&(this._bones=[]),this.target=bones[data.targetIndex];var j=0,n=0;for(j=0,n=data.boneIndexs.length;j<n;j++)this._bones.push(bones[data.boneIndexs[j]]);this.rotateMix=data.rotateMix,this.translateMix=data.translateMix,this.scaleMix=data.scaleMix,this.shearMix=data.shearMix}return __class(TfConstraint,"laya.ani.bone.TfConstraint"),TfConstraint.prototype.apply=function(){for(var tTfBone,ta=this.target.resultMatrix.a,tb=this.target.resultMatrix.b,tc=this.target.resultMatrix.c,td=this.target.resultMatrix.d,j=0,n=this._bones.length;j<n;j++){if(tTfBone=this._bones[j],this.rotateMix>0){var a=tTfBone.resultMatrix.a,b=tTfBone.resultMatrix.b,c=tTfBone.resultMatrix.c,d=tTfBone.resultMatrix.d,r=Math.atan2(tc,ta)-Math.atan2(c,a)+this._data.offsetRotation*Math.PI/180;r>Math.PI?r-=2*Math.PI:r<-Math.PI&&(r+=2*Math.PI),r*=this.rotateMix;var cos=Math.cos(r),sin=Math.sin(r);tTfBone.resultMatrix.a=cos*a-sin*c,tTfBone.resultMatrix.b=cos*b-sin*d,tTfBone.resultMatrix.c=sin*a+cos*c,tTfBone.resultMatrix.d=sin*b+cos*d}if(this.translateMix&&(this._temp[0]=this._data.offsetX,this._temp[1]=this._data.offsetY,this.target.localToWorld(this._temp),tTfBone.resultMatrix.tx+=(this._temp[0]-tTfBone.resultMatrix.tx)*this.translateMix,tTfBone.resultMatrix.ty+=(this._temp[1]-tTfBone.resultMatrix.ty)*this.translateMix,tTfBone.updateChild()),this.scaleMix>0){var bs=Math.sqrt(tTfBone.resultMatrix.a*tTfBone.resultMatrix.a+tTfBone.resultMatrix.c*tTfBone.resultMatrix.c),ts=Math.sqrt(ta*ta+tc*tc),s=bs>1e-5?(bs+(ts-bs+this._data.offsetScaleX)*this.scaleMix)/bs:0;tTfBone.resultMatrix.a*=s,tTfBone.resultMatrix.c*=s,bs=Math.sqrt(tTfBone.resultMatrix.b*tTfBone.resultMatrix.b+tTfBone.resultMatrix.d*tTfBone.resultMatrix.d),ts=Math.sqrt(tb*tb+td*td),s=bs>1e-5?(bs+(ts-bs+this._data.offsetScaleY)*this.scaleMix)/bs:0,tTfBone.resultMatrix.b*=s,tTfBone.resultMatrix.d*=s}if(this.shearMix>0){b=tTfBone.resultMatrix.b,d=tTfBone.resultMatrix.d;var by=Math.atan2(d,b);(r=Math.atan2(td,tb)-Math.atan2(tc,ta)-(by-Math.atan2(tTfBone.resultMatrix.c,tTfBone.resultMatrix.a)))>Math.PI?r-=2*Math.PI:r<-Math.PI&&(r+=2*Math.PI),r=by+(r+this._data.offsetShearY*Math.PI/180)*this.shearMix,s=Math.sqrt(b*b+d*d),tTfBone.resultMatrix.b=Math.cos(r)*s,tTfBone.resultMatrix.d=Math.sin(r)*s}}},TfConstraint}(),TfConstraintData=function(){function TfConstraintData(){this.name=null,this.targetIndex=0,this.rotateMix=NaN,this.translateMix=NaN,this.scaleMix=NaN,this.shearMix=NaN,this.offsetRotation=NaN,this.offsetX=NaN,this.offsetY=NaN,this.offsetScaleX=NaN,this.offsetScaleY=NaN,this.offsetShearY=NaN,this.boneIndexs=[]}return __class(TfConstraintData,"laya.ani.bone.TfConstraintData"),TfConstraintData}(),Transform=function(){function Transform(){this.skX=0,this.skY=0,this.scX=1,this.scY=1,this.x=0,this.y=0,this.skewX=0,this.skewY=0,this.mMatrix=null}__class(Transform,"laya.ani.bone.Transform");var __proto=Transform.prototype;return __proto.initData=function(data){void 0!=data.x&&(this.x=data.x),void 0!=data.y&&(this.y=data.y),void 0!=data.skX&&(this.skX=data.skX),void 0!=data.skY&&(this.skY=data.skY),void 0!=data.scX&&(this.scX=data.scX),void 0!=data.scY&&(this.scY=data.scY)},__proto.getMatrix=function(){var tMatrix;return(tMatrix=this.mMatrix?this.mMatrix:this.mMatrix=new Matrix).identity(),tMatrix.scale(this.scX,this.scY),(this.skewX||this.skewY)&&this.skew(tMatrix,this.skewX*Math.PI/180,this.skewY*Math.PI/180),tMatrix.rotate(this.skX*Math.PI/180),tMatrix.translate(this.x,this.y),tMatrix},__proto.skew=function(m,x,y){var sinX=Math.sin(y),cosX=Math.cos(y),sinY=Math.sin(x),cosY=Math.cos(x);return m.setTo(m.a*cosY-m.b*sinX,m.a*sinY+m.b*cosX,m.c*cosY-m.d*sinX,m.c*sinY+m.d*cosX,m.tx*cosY-m.ty*sinX,m.tx*sinY+m.ty*cosX),m},Transform}(),UVTools=function(){function UVTools(){}return __class(UVTools,"laya.ani.bone.UVTools"),UVTools.getRelativeUV=function(bigUV,smallUV,rst){var startX=bigUV[0],width=bigUV[2]-bigUV[0],startY=bigUV[1],height=bigUV[5]-bigUV[1];rst||(rst=[]),rst.length=smallUV.length;var i=0,len=0;len=rst.length;var dWidth=1/width,dHeight=1/height;for(i=0;i<len;i+=2)rst[i]=(smallUV[i]-startX)*dWidth,rst[i+1]=(smallUV[i+1]-startY)*dHeight;return rst},UVTools.getAbsoluteUV=function(bigUV,smallUV,rst){if(0==bigUV[0]&&0==bigUV[1]&&1==bigUV[4]&&1==bigUV[5])return rst?(Utils.copyArray(rst,smallUV),rst):smallUV;var startX=bigUV[0],width=bigUV[2]-bigUV[0],startY=bigUV[1],height=bigUV[5]-bigUV[1];rst||(rst=[]),rst.length=smallUV.length;var i=0,len=0;for(len=rst.length,i=0;i<len;i+=2)rst[i]=smallUV[i]*width+startX,rst[i+1]=smallUV[i+1]*height+startY;return rst},UVTools}(),BezierLerp=function(){function BezierLerp(){}return __class(BezierLerp,"laya.ani.math.BezierLerp"),BezierLerp.getBezierRate=function(t,px0,py0,px1,py1){var key=BezierLerp._getBezierParamKey(px0,py0,px1,py1),vKey=100*key+t;if(BezierLerp._bezierResultCache[vKey])return BezierLerp._bezierResultCache[vKey];var points=BezierLerp._getBezierPoints(px0,py0,px1,py1,key),i=0,len=0;for(len=points.length,i=0;i<len;i+=2)if(t<=points[i])return BezierLerp._bezierResultCache[vKey]=points[i+1],points[i+1];return BezierLerp._bezierResultCache[vKey]=1,1},BezierLerp._getBezierParamKey=function(px0,py0,px1,py1){return 100*(100*(100*(100*px0+py0)+px1)+py1)},BezierLerp._getBezierPoints=function(px0,py0,px1,py1,key){if(BezierLerp._bezierPointsCache[key])return BezierLerp._bezierPointsCache[key];var controlPoints;controlPoints=[0,0,px0,py0,px1,py1,1,1];var points;return points=(new Bezier).getBezierPoints(controlPoints,100,3),BezierLerp._bezierPointsCache[key]=points,points},BezierLerp._bezierResultCache={},BezierLerp._bezierPointsCache={},BezierLerp}(),AnimationPlayer=function(_super){function AnimationPlayer(){this._destroyed=!1,this._templet=null,this._currentTime=NaN,this._currentFrameTime=NaN,this._playStart=NaN,this._playEnd=NaN,this._playDuration=NaN,this._overallDuration=NaN,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=NaN,this._startUpdateLoopCount=NaN,this._currentAnimationClipIndex=0,this._currentKeyframeIndex=0,this._paused=!1,this._cacheFrameRate=0,this._cacheFrameRateInterval=NaN,this._cachePlayRate=NaN,this._fullFrames=null,this.isCache=!0,this.playbackRate=1,this.returnToZeroStopped=!0,AnimationPlayer.__super.call(this),this._destroyed=!1,this._currentAnimationClipIndex=-1,this._currentKeyframeIndex=-1,this._currentTime=0,this._overallDuration=Number.MAX_VALUE,this._stopWhenCircleFinish=!1,this._elapsedPlaybackTime=0,this._startUpdateLoopCount=-1,this._cachePlayRate=1,this.cacheFrameRate=60}__class(AnimationPlayer,"laya.ani.AnimationPlayer",_super);var __proto=AnimationPlayer.prototype;return Laya.imps(__proto,{"laya.resource.IDestroy":!0}),__proto._onTempletLoadedComputeFullKeyframeIndices=function(cachePlayRate,cacheFrameRate,templet){this._templet===templet&&this._cachePlayRate===cachePlayRate&&this._cacheFrameRate===cacheFrameRate&&this._computeFullKeyframeIndices()},__proto._computeFullKeyframeIndices=function(){for(var anifullFrames=this._fullFrames=[],templet=this._templet,cacheFrameInterval=this._cacheFrameRateInterval*this._cachePlayRate,i=0,iNum=templet.getAnimationCount();i<iNum;i++){for(var aniFullFrame=[],j=0,jNum=templet.getAnimation(i).nodes.length;j<jNum;j++){for(var node=templet.getAnimation(i).nodes[j],frameCount=Math.floor(node.playTime/cacheFrameInterval+.01),nodeFullFrames=new Uint16Array(frameCount+1),lastFrameIndex=-1,n=0,nNum=node.keyFrame.length;n<nNum;n++){var keyFrame=node.keyFrame[n],tm=keyFrame.startTime,endTm=tm+keyFrame.duration+cacheFrameInterval;do{for(var frameIndex=Math.floor(tm/cacheFrameInterval+.5),k=lastFrameIndex+1;k<frameIndex;k++)nodeFullFrames[k]=n;lastFrameIndex=frameIndex,nodeFullFrames[frameIndex]=n,tm+=cacheFrameInterval}while(tm<=endTm)}aniFullFrame.push(nodeFullFrames)}anifullFrames.push(aniFullFrame)}},__proto._onAnimationTempletLoaded=function(){this.destroyed||this._calculatePlayDuration()},__proto._calculatePlayDuration=function(){if(0!==this.state){var oriDuration=this._templet.getAniDuration(this._currentAnimationClipIndex);0===this._playEnd&&(this._playEnd=oriDuration),this._playEnd>oriDuration&&(this._playEnd=oriDuration),this._playDuration=this._playEnd-this._playStart}},__proto._destroy=function(){this.offAll(),this._templet=null,this._fullFrames=null,this._destroyed=!0},__proto.play=function(index,playbackRate,overallDuration,playStart,playEnd){if(void 0===index&&(index=0),void 0===playbackRate&&(playbackRate=1),void 0===overallDuration&&(overallDuration=2147483647),void 0===playStart&&(playStart=0),void 0===playEnd&&(playEnd=0),!this._templet)throw new Error("AnimationPlayer:templet must not be null,maybe you need to set url.");if(overallDuration<0||playStart<0||playEnd<0)throw new Error("AnimationPlayer:overallDuration,playStart and playEnd must large than zero.");if(0!==playEnd&&playStart>playEnd)throw new Error("AnimationPlayer:start must less than end.");this._currentTime=0,this._currentFrameTime=0,this._elapsedPlaybackTime=0,this.playbackRate=playbackRate,this._overallDuration=overallDuration,this._playStart=playStart,this._playEnd=playEnd,this._paused=!1,this._currentAnimationClipIndex=index,this._currentKeyframeIndex=0,this._startUpdateLoopCount=Stat.loopCount,this.event("played"),this._templet.loaded?this._calculatePlayDuration():this._templet.once("loaded",this,this._onAnimationTempletLoaded),this.update(0)},__proto.playByFrame=function(index,playbackRate,overallDuration,playStartFrame,playEndFrame,fpsIn3DBuilder){void 0===index&&(index=0),void 0===playbackRate&&(playbackRate=1),void 0===overallDuration&&(overallDuration=2147483647),void 0===playStartFrame&&(playStartFrame=0),void 0===playEndFrame&&(playEndFrame=0),void 0===fpsIn3DBuilder&&(fpsIn3DBuilder=30);var interval=1e3/fpsIn3DBuilder;this.play(index,playbackRate,overallDuration,playStartFrame*interval,playEndFrame*interval)},__proto.stop=function(immediate){void 0===immediate&&(immediate=!0),immediate?(this._currentAnimationClipIndex=-1,this.event("stopped")):this._stopWhenCircleFinish=!0},__proto.update=function(elapsedTime){if(-1!==this._currentAnimationClipIndex&&!this._paused&&this._templet&&this._templet.loaded){var cacheFrameInterval=this._cacheFrameRateInterval*this._cachePlayRate,time=0;this._startUpdateLoopCount!==Stat.loopCount&&(time=elapsedTime*this.playbackRate,this._elapsedPlaybackTime+=time);var currentAniClipPlayDuration=this.playDuration;if(0!==this._overallDuration&&this._elapsedPlaybackTime>=this._overallDuration||0===this._overallDuration&&this._elapsedPlaybackTime>=currentAniClipPlayDuration)return this._currentTime=currentAniClipPlayDuration,this._currentKeyframeIndex=Math.floor(currentAniClipPlayDuration/cacheFrameInterval+.01),this._currentFrameTime=this._currentKeyframeIndex*cacheFrameInterval,this._currentAnimationClipIndex=-1,void this.event("stopped");if(time+=this._currentTime,currentAniClipPlayDuration>0){for(;time>=currentAniClipPlayDuration;){if(this._stopWhenCircleFinish)return this._currentAnimationClipIndex=-1,this._stopWhenCircleFinish=!1,void this.event("stopped");time-=currentAniClipPlayDuration,this.event("complete")}this._currentTime=time,this._currentKeyframeIndex=Math.floor(this.currentPlayTime/cacheFrameInterval),this._currentFrameTime=this._currentKeyframeIndex*cacheFrameInterval}else{if(this._stopWhenCircleFinish)return this._currentAnimationClipIndex=-1,this._stopWhenCircleFinish=!1,void this.event("stopped");this._currentTime=this._currentFrameTime=this._currentKeyframeIndex=0,this.event("complete")}}},__getset(0,__proto,"playEnd",function(){return this._playEnd}),__getset(0,__proto,"templet",function(){return this._templet},function(value){0===!this.state&&this.stop(!0),this._templet!==value&&(this._templet=value,value.loaded?this._computeFullKeyframeIndices():value.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,this._cacheFrameRate]))}),__getset(0,__proto,"playStart",function(){return this._playStart}),__getset(0,__proto,"playDuration",function(){return this._playDuration}),__getset(0,__proto,"state",function(){return-1===this._currentAnimationClipIndex?0:this._paused?1:2}),__getset(0,__proto,"currentKeyframeIndex",function(){return this._currentKeyframeIndex}),__getset(0,__proto,"overallDuration",function(){return this._overallDuration}),__getset(0,__proto,"currentFrameTime",function(){return this._currentFrameTime}),__getset(0,__proto,"currentAnimationClipIndex",function(){return this._currentAnimationClipIndex}),__getset(0,__proto,"currentPlayTime",function(){return this._currentTime+this._playStart}),__getset(0,__proto,"cachePlayRate",function(){return this._cachePlayRate},function(value){this._cachePlayRate!==value&&(this._cachePlayRate=value,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[value,this._cacheFrameRate])))}),__getset(0,__proto,"cacheFrameRate",function(){return this._cacheFrameRate},function(value){this._cacheFrameRate!==value&&(this._cacheFrameRate=value,this._cacheFrameRateInterval=1e3/this._cacheFrameRate,this._templet&&(this._templet.loaded?this._computeFullKeyframeIndices():this._templet.once("loaded",this,this._onTempletLoadedComputeFullKeyframeIndices,[this._cachePlayRate,value])))}),__getset(0,__proto,"currentTime",null,function(value){if(-1!==this._currentAnimationClipIndex&&this._templet&&this._templet.loaded){if(value<this._playStart||value>this._playEnd)throw new Error("AnimationPlayer:value must large than playStartTime,small than playEndTime.");this._startUpdateLoopCount=Stat.loopCount;var cacheFrameInterval=this._cacheFrameRateInterval*this._cachePlayRate;this._currentTime=value,this._currentKeyframeIndex=Math.floor(this.currentPlayTime/cacheFrameInterval),this._currentFrameTime=this._currentKeyframeIndex*cacheFrameInterval}}),__getset(0,__proto,"paused",function(){return this._paused},function(value){this._paused=value,value&&this.event("paused")}),__getset(0,__proto,"cacheFrameRateInterval",function(){return this._cacheFrameRateInterval}),__getset(0,__proto,"destroyed",function(){return this._destroyed}),AnimationPlayer}(EventDispatcher),GraphicsAni=function(_super){function GraphicsAni(){GraphicsAni.__super.call(this),Render.isConchNode&&(this.drawSkin=function(skin){skin.transform||(skin.transform=Matrix.EMPTY),this.setSkinMesh&&this.setSkinMesh(skin._ps,skin.mVBData,skin.mEleNum,0,skin.mTexture,skin.transform)})}return __class(GraphicsAni,"laya.ani.GraphicsAni",_super),GraphicsAni.prototype.drawSkin=function(skin){var arr=[skin];this._saveToCmd(Render._context._drawSkin,arr)},GraphicsAni}(Graphics),AnimationTemplet=function(_super){function AnimationTemplet(){this._aniMap={},this.unfixedLastAniIndex=-1,AnimationTemplet.__super.call(this),this._anis=new Array}__class(AnimationTemplet,"laya.ani.AnimationTemplet",_super);var __proto=AnimationTemplet.prototype;return __proto._endLoaded=function(){this._loaded=!0,this.event("loaded",this)},__proto.parse=function(data){var i=0,j=0,k=0,n=0,l=0,m=0,o=0,read=new Byte(data);this._aniVersion=read.readUTFString();var aniClassName=read.readUTFString();this.aniClassName=aniClassName;var publicData,strList=read.readUTFString().split("\n"),aniCount=read.getUint8(),publicDataPos=read.getUint32(),publicExtDataPos=read.getUint32();publicDataPos>0&&(publicData=data.slice(publicDataPos,publicExtDataPos));var publicRead=new Byte(publicData);for(publicExtDataPos>0&&(this._publicExtData=data.slice(publicExtDataPos,data.byteLength)),this._useParent=!!read.getUint8(),this._anis.length=aniCount,i=0;i<aniCount;i++){var ani=this._anis[i]={};ani.nodes=new Array;var name=ani.name=strList[read.getUint16()];this._aniMap[name]=i,ani.bone3DMap={},ani.playTime=read.getFloat32();var boneCount=ani.nodes.length=read.getUint8();for(ani.totalKeyframesLength=0,j=0;j<boneCount;j++){var node=ani.nodes[j]={};node.childs=[];var nameIndex=read.getInt16();nameIndex>=0&&(node.name=strList[nameIndex],ani.bone3DMap[node.name]=j),node.keyFrame=new Array,node.parentIndex=read.getInt16(),-1==node.parentIndex?node.parent=null:node.parent=ani.nodes[node.parentIndex],node.lerpType=read.getUint8();var keyframeParamsOffset=read.getUint32();publicRead.pos=keyframeParamsOffset;var keyframeDataCount=node.keyframeWidth=publicRead.getUint16();if(ani.totalKeyframesLength+=keyframeDataCount,0===node.lerpType||1===node.lerpType)for(node.interpolationMethod=[],node.interpolationMethod.length=keyframeDataCount,k=0;k<keyframeDataCount;k++)node.interpolationMethod[k]=AnimationTemplet.interpolation[publicRead.getUint8()];null!=node.parent&&node.parent.childs.push(node);var privateDataLen=read.getUint16();privateDataLen>0&&(node.extenData=data.slice(read.pos,read.pos+privateDataLen),read.pos+=privateDataLen);var keyframeCount=read.getUint16();node.keyFrame.length=keyframeCount;var startTime=0;for(k=0,n=keyframeCount;k<n;k++){var keyFrame=node.keyFrame[k]={};if(keyFrame.duration=read.getFloat32(),keyFrame.startTime=startTime,2===node.lerpType){keyFrame.interpolationData=[];var interDataLength=read.getUint8(),lerpType=0;switch(lerpType=read.getFloat32()){case 254:for(keyFrame.interpolationData.length=keyframeDataCount,o=0;o<keyframeDataCount;o++)keyFrame.interpolationData[o]=0;break;case 255:for(keyFrame.interpolationData.length=keyframeDataCount,o=0;o<keyframeDataCount;o++)keyFrame.interpolationData[o]=5;break;default:for(keyFrame.interpolationData.push(lerpType),m=1;m<interDataLength;m++)keyFrame.interpolationData.push(read.getFloat32())}}for(keyFrame.data=new Float32Array(keyframeDataCount),keyFrame.dData=new Float32Array(keyframeDataCount),keyFrame.nextData=new Float32Array(keyframeDataCount),l=0;l<keyframeDataCount;l++)keyFrame.data[l]=read.getFloat32(),keyFrame.data[l]>-1e-8&&keyFrame.data[l]<1e-8&&(keyFrame.data[l]=0);startTime+=keyFrame.duration}node.playTime=ani.playTime,this._calculateKeyFrame(node,keyframeCount,keyframeDataCount)}}},__proto._calculateKeyFrame=function(node,keyframeCount,keyframeDataCount){var keyFrames=node.keyFrame;keyFrames[keyframeCount]=keyFrames[0];for(var i=0;i<keyframeCount;i++)for(var keyFrame=keyFrames[i],j=0;j<keyframeDataCount;j++)keyFrame.dData[j]=0===keyFrame.duration?0:(keyFrames[i+1].data[j]-keyFrame.data[j])/keyFrame.duration,keyFrame.nextData[j]=keyFrames[i+1].data[j];keyFrames.length--},__proto.onAsynLoaded=function(url,data,params){this.parse(data),this._endLoaded()},__proto.getAnimationCount=function(){return this._anis.length},__proto.getAnimation=function(aniIndex){return this._anis[aniIndex]},__proto.getAniDuration=function(aniIndex){return this._anis[aniIndex].playTime},__proto.getNodes=function(aniIndex){return this._anis[aniIndex].nodes},__proto.getNodeIndexWithName=function(aniIndex,name){return this._anis[aniIndex].bone3DMap[name]},__proto.getNodeCount=function(aniIndex){return this._anis[aniIndex].nodes.length},__proto.getTotalkeyframesLength=function(aniIndex){return this._anis[aniIndex].totalKeyframesLength},__proto.getPublicExtData=function(){return this._publicExtData},__proto.getAnimationDataWithCache=function(key,cacheDatas,aniIndex,frameIndex){var aniDatas=cacheDatas[aniIndex];if(aniDatas){var keyDatas=aniDatas[key];return keyDatas?keyDatas[frameIndex]:null}return null},__proto.setAnimationDataWithCache=function(key,cacheDatas,aniIndex,frameIndex,data){var aniDatas=cacheDatas[aniIndex]||(cacheDatas[aniIndex]={});(aniDatas[key]||(aniDatas[key]=[]))[frameIndex]=data},__proto.getOriginalData=function(aniIndex,originalData,nodesFrameIndices,frameIndex,playCurTime){for(var nodes=this._anis[aniIndex].nodes,j=0,i=0,n=nodes.length,outOfs=0;i<n;i++){var key,node=nodes[i];key=node.keyFrame[nodesFrameIndices[i][frameIndex]],node.dataOffset=outOfs;var dt=playCurTime-key.startTime;switch(node.lerpType){case 0:case 1:for(j=0;j<node.keyframeWidth;)j+=node.interpolationMethod[j](node,j,originalData,outOfs+j,key.data,dt,key.dData,key.duration,key.nextData);break;case 2:var interpolationData=key.interpolationData,interDataLen=interpolationData.length,dataIndex=0;for(j=0;j<interDataLen;){var type=interpolationData[j];switch(type){case 6:case 7:j+=AnimationTemplet.interpolation[type](node,dataIndex,originalData,outOfs+dataIndex,key.data,dt,key.dData,key.duration,key.nextData,interpolationData,j+1);break;default:j+=AnimationTemplet.interpolation[type](node,dataIndex,originalData,outOfs+dataIndex,key.data,dt,key.dData,key.duration,key.nextData)}dataIndex++}}outOfs+=node.keyframeWidth}},__proto.getNodesCurrentFrameIndex=function(aniIndex,playCurTime){var nodes=this._anis[aniIndex].nodes;aniIndex!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(nodes.length),this.unfixedCurrentTimes=new Float32Array(nodes.length),this.unfixedLastAniIndex=aniIndex);for(var i=0,n=nodes.length;i<n;i++){var node=nodes[i];for(playCurTime<this.unfixedCurrentTimes[i]&&(this.unfixedCurrentFrameIndexes[i]=0),this.unfixedCurrentTimes[i]=playCurTime;this.unfixedCurrentFrameIndexes[i]<node.keyFrame.length&&!(node.keyFrame[this.unfixedCurrentFrameIndexes[i]].startTime>this.unfixedCurrentTimes[i]);)this.unfixedCurrentFrameIndexes[i]++;this.unfixedCurrentFrameIndexes[i]--}return this.unfixedCurrentFrameIndexes},__proto.getOriginalDataUnfixedRate=function(aniIndex,originalData,playCurTime){var nodes=this._anis[aniIndex].nodes;aniIndex!==this.unfixedLastAniIndex&&(this.unfixedCurrentFrameIndexes=new Uint32Array(nodes.length),this.unfixedCurrentTimes=new Float32Array(nodes.length),this.unfixedKeyframes=__newvec(nodes.length),this.unfixedLastAniIndex=aniIndex);for(var j=0,i=0,n=nodes.length,outOfs=0;i<n;i++){var node=nodes[i];for(playCurTime<this.unfixedCurrentTimes[i]&&(this.unfixedCurrentFrameIndexes[i]=0),this.unfixedCurrentTimes[i]=playCurTime;this.unfixedCurrentFrameIndexes[i]<node.keyFrame.length&&!(node.keyFrame[this.unfixedCurrentFrameIndexes[i]].startTime>this.unfixedCurrentTimes[i]);)this.unfixedKeyframes[i]=node.keyFrame[this.unfixedCurrentFrameIndexes[i]],this.unfixedCurrentFrameIndexes[i]++;var key=this.unfixedKeyframes[i];node.dataOffset=outOfs;var dt=playCurTime-key.startTime;switch(node.lerpType){case 0:case 1:for(j=0;j<node.keyframeWidth;)j+=node.interpolationMethod[j](node,j,originalData,outOfs+j,key.data,dt,key.dData,key.duration,key.nextData);break;case 2:var interpolationData=key.interpolationData,interDataLen=interpolationData.length,dataIndex=0;for(j=0;j<interDataLen;){var type=interpolationData[j];switch(type){case 6:case 7:j+=AnimationTemplet.interpolation[type](node,dataIndex,originalData,outOfs+dataIndex,key.data,dt,key.dData,key.duration,key.nextData,interpolationData,j+1);break;default:j+=AnimationTemplet.interpolation[type](node,dataIndex,originalData,outOfs+dataIndex,key.data,dt,key.dData,key.duration,key.nextData)}dataIndex++}}outOfs+=node.keyframeWidth}},__proto.dispose=function(){this.resourceManager&&this.resourceManager.removeResource(this),_super.prototype.dispose.call(this)},AnimationTemplet._LinearInterpolation_0=function(bone,index,out,outOfs,data,dt,dData,duration,nextData,interData){return out[outOfs]=data[index]+dt*dData[index],1},AnimationTemplet._QuaternionInterpolation_1=function(bone,index,out,outOfs,data,dt,dData,duration,nextData,interData){var amount=0===duration?0:dt/duration;return MathUtil.slerpQuaternionArray(data,index,nextData,index,amount,out,outOfs),4},AnimationTemplet._AngleInterpolation_2=function(bone,index,out,outOfs,data,dt,dData,duration,nextData,interData){return 0},AnimationTemplet._RadiansInterpolation_3=function(bone,index,out,outOfs,data,dt,dData,duration,nextData,interData){return 0},AnimationTemplet._Matrix4x4Interpolation_4=function(bone,index,out,outOfs,data,dt,dData,duration,nextData,interData){for(var i=0;i<16;i++,index++)out[outOfs+i]=data[index]+dt*dData[index];return 16},AnimationTemplet._NoInterpolation_5=function(bone,index,out,outOfs,data,dt,dData,duration,nextData,interData){return out[outOfs]=data[index],1},AnimationTemplet._BezierInterpolation_6=function(bone,index,out,outOfs,data,dt,dData,duration,nextData,interData,offset){return void 0===offset&&(offset=0),out[outOfs]=data[index]+(nextData[index]-data[index])*BezierLerp.getBezierRate(dt/duration,interData[offset],interData[offset+1],interData[offset+2],interData[offset+3]),5},AnimationTemplet._BezierInterpolation_7=function(bone,index,out,outOfs,data,dt,dData,duration,nextData,interData,offset){return void 0===offset&&(offset=0),out[outOfs]=interData[offset+4]+interData[offset+5]*BezierLerp.getBezierRate((.001*dt+interData[offset+6])/interData[offset+7],interData[offset],interData[offset+1],interData[offset+2],interData[offset+3]),9},AnimationTemplet.load=function(url){return Laya.loader.create(url,null,null,AnimationTemplet)},AnimationTemplet.interpolation=[AnimationTemplet._LinearInterpolation_0,AnimationTemplet._QuaternionInterpolation_1,AnimationTemplet._AngleInterpolation_2,AnimationTemplet._RadiansInterpolation_3,AnimationTemplet._Matrix4x4Interpolation_4,AnimationTemplet._NoInterpolation_5,AnimationTemplet._BezierInterpolation_6,AnimationTemplet._BezierInterpolation_7],AnimationTemplet.LAYA_ANIMATION_VISION="LAYAANIMATION:1.6.0",AnimationTemplet}(Resource),Skeleton=function(_super){function Skeleton(templet,aniMode){this._templet=null,this._player=null,this._curOriginalData=null,this._boneMatrixArray=[],this._lastTime=0,this._currAniName=null,this._currAniIndex=-1,this._pause=!0,this._aniClipIndex=-1,this._clipIndex=-1,this._skinIndex=0,this._skinName="default",this._aniMode=0,this._graphicsCache=null,this._boneSlotDic=null,this._bindBoneBoneSlotDic=null,this._boneSlotArray=null,this._index=-1,this._total=-1,this._indexControl=!1,this._aniPath=null,this._texturePath=null,this._complete=null,this._loadAniMode=0,this._yReverseMatrix=null,this._ikArr=null,this._tfArr=null,this._pathDic=null,this._rootBone=null,this._boneList=null,this._aniSectionDic=null,this._eventIndex=0,this._drawOrderIndex=0,this._drawOrder=null,this._lastAniClipIndex=-1,this._lastUpdateAniClipIndex=-1,Skeleton.__super.call(this),void 0===aniMode&&(aniMode=0),templet&&this.init(templet,aniMode)}__class(Skeleton,"laya.ani.bone.Skeleton",_super);var __proto=Skeleton.prototype;return __proto.init=function(templet,aniMode){void 0===aniMode&&(aniMode=0);var i=0,n=0;if(1==aniMode)for(this._graphicsCache=[],i=0,n=templet.getAnimationCount();i<n;i++)this._graphicsCache.push([]);if(this._yReverseMatrix=templet.yReverseMatrix,this._aniMode=aniMode,this._templet=templet,this._player=new AnimationPlayer,this._player.cacheFrameRate=templet.rate,this._player.templet=templet,this._player.play(),this._parseSrcBoneMatrix(),this._boneList=templet.mBoneArr,this._rootBone=templet.mRootBone,this._aniSectionDic=templet.aniSectionDic,templet.ikArr.length>0)for(this._ikArr=[],i=0,n=templet.ikArr.length;i<n;i++)this._ikArr.push(new IkConstraint(templet.ikArr[i],this._boneList));if(templet.pathArr.length>0){var tPathData,tPathConstraint;null==this._pathDic&&(this._pathDic={});var tBoneSlot;for(i=0,n=templet.pathArr.length;i<n;i++)tPathData=templet.pathArr[i],tPathConstraint=new PathConstraint(tPathData,this._boneList),(tBoneSlot=this._boneSlotDic[tPathData.name])&&((tPathConstraint=new PathConstraint(tPathData,this._boneList)).target=tBoneSlot),this._pathDic[tPathData.name]=tPathConstraint}if(templet.tfArr.length>0)for(this._tfArr=[],i=0,n=templet.tfArr.length;i<n;i++)this._tfArr.push(new TfConstraint(templet.tfArr[i],this._boneList));if(templet.skinDataArray.length>0){var tSkinData=this._templet.skinDataArray[this._skinIndex];this._skinName=tSkinData.name}this._player.on("played",this,this._onPlay),this._player.on("stopped",this,this._onStop),this._player.on("paused",this,this._onPause)},__proto.load=function(path,complete,aniMode){void 0===aniMode&&(aniMode=0),this._aniPath=path,this._complete=complete,this._loadAniMode=aniMode,this._texturePath=path.replace(".sk",".png").replace(".bin",".png"),Laya.loader.load([{url:path,type:"arraybuffer"},{url:this._texturePath,type:"image"}],Handler.create(this,this._onLoaded))},__proto._onLoaded=function(){var tTexture=Loader.getRes(this._texturePath),arraybuffer=Loader.getRes(this._aniPath);if(null!=tTexture&&null!=arraybuffer){null==Templet.TEMPLET_DICTIONARY&&(Templet.TEMPLET_DICTIONARY={});var tFactory;(tFactory=Templet.TEMPLET_DICTIONARY[this._aniPath])?tFactory.isParseFail?this._parseFail():this._parseComplete():((tFactory=new Templet).url=this._aniPath,Templet.TEMPLET_DICTIONARY[this._aniPath]=tFactory,tFactory.on("complete",this,this._parseComplete),tFactory.on("error",this,this._parseFail),tFactory.parseData(tTexture,arraybuffer))}},__proto._parseComplete=function(){var tTemple=Templet.TEMPLET_DICTIONARY[this._aniPath];tTemple&&(this.init(tTemple,this._loadAniMode),this.play(0,!0)),this._complete&&this._complete.runWith(this)},__proto._parseFail=function(){console.log("[Error]:"+this._aniPath+"解析失败")},__proto._onPlay=function(){this.event("played")},__proto._onStop=function(){var tEventData,tEventArr=this._templet.eventAniArr[this._aniClipIndex];if(tEventArr&&this._eventIndex<tEventArr.length)for(;this._eventIndex<tEventArr.length;this._eventIndex++)(tEventData=tEventArr[this._eventIndex]).time>=this._player.playStart&&tEventData.time<=this._player.playEnd&&this.event("label",tEventData);this._eventIndex=0,this._drawOrder=null,this.event("stopped")},__proto._onPause=function(){this.event("paused")},__proto._parseSrcBoneMatrix=function(){var i=0,n=0;for(n=this._templet.srcBoneMatrixArr.length,i=0;i<n;i++)this._boneMatrixArray.push(new Matrix);if(0==this._aniMode)this._boneSlotDic=this._templet.boneSlotDic,this._bindBoneBoneSlotDic=this._templet.bindBoneBoneSlotDic,this._boneSlotArray=this._templet.boneSlotArray;else{null==this._boneSlotDic&&(this._boneSlotDic={}),null==this._bindBoneBoneSlotDic&&(this._bindBoneBoneSlotDic={}),null==this._boneSlotArray&&(this._boneSlotArray=[]);var tBS,tBSArr,tArr=this._templet.boneSlotArray;for(i=0,n=tArr.length;i<n;i++)tBS=tArr[i],null==(tBSArr=this._bindBoneBoneSlotDic[tBS.parent])&&(this._bindBoneBoneSlotDic[tBS.parent]=tBSArr=[]),this._boneSlotDic[tBS.name]=tBS=tBS.copy(),tBSArr.push(tBS),this._boneSlotArray.push(tBS)}},__proto._emitMissedEvents=function(startTime,endTime,startIndex){void 0===startIndex&&(startIndex=0);var tEventArr=this._templet.eventAniArr[this._player.currentAnimationClipIndex];if(tEventArr){var tEventData,i=0,len=0;for(len=tEventArr.length,i=startIndex;i<len;i++)(tEventData=tEventArr[i]).time>=this._player.playStart&&tEventData.time<=this._player.playEnd&&this.event("label",tEventData)}},__proto._update=function(autoKey){if(void 0===autoKey&&(autoKey=!0),!(this._pause||autoKey&&this._indexControl)){var tCurrTime=Laya.timer.currTimer,preIndex=this._player.currentKeyframeIndex;if(autoKey?this._player.update(tCurrTime-this._lastTime):preIndex=-1,this._lastTime=tCurrTime,this._index=this._clipIndex=this._player.currentKeyframeIndex,!(this._index<0||this._clipIndex==preIndex&&this._lastUpdateAniClipIndex==this._aniClipIndex)){this._lastUpdateAniClipIndex=this._aniClipIndex,preIndex>this._clipIndex&&0!=this._eventIndex&&(this._emitMissedEvents(this._player.playStart,this._player.playEnd,this._eventIndex),this._eventIndex=0);var tEventData,tEventArr=this._templet.eventAniArr[this._aniClipIndex];tEventArr&&this._eventIndex<tEventArr.length&&((tEventData=tEventArr[this._eventIndex]).time>=this._player.playStart&&tEventData.time<=this._player.playEnd?this._player.currentPlayTime>=tEventData.time&&(this.event("label",tEventData),this._eventIndex++):this._eventIndex++);var tGraphics;if(0==this._aniMode){if(tGraphics=this._templet.getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=tGraphics&&(this.graphics=tGraphics));var i=0,minIndex=0;for(minIndex=this._clipIndex;!this._templet.getGrahicsDataWithCache(this._aniClipIndex,minIndex-1)&&minIndex>0;)minIndex--;if(minIndex<this._clipIndex)for(i=minIndex;i<this._clipIndex;i++)this._createGraphics(i)}else if(1==this._aniMode){if(tGraphics=this._getGrahicsDataWithCache(this._aniClipIndex,this._clipIndex))return void(this.graphics!=tGraphics&&(this.graphics=tGraphics));for(minIndex=this._clipIndex;!this._getGrahicsDataWithCache(this._aniClipIndex,minIndex-1)&&minIndex>0;)minIndex--;if(minIndex<this._clipIndex)for(i=minIndex;i<this._clipIndex;i++)this._createGraphics(i)}this._createGraphics()}}},__proto._createGraphics=function(_clipIndex){void 0===_clipIndex&&(_clipIndex=-1),-1==_clipIndex&&(_clipIndex=this._clipIndex);var tDrawOrderData,curTime=_clipIndex*this._player.cacheFrameRateInterval,tDrawOrderArr=this._templet.drawOrderAniArr[this._aniClipIndex];if(tDrawOrderArr&&tDrawOrderArr.length>0)for(this._drawOrderIndex=0,tDrawOrderData=tDrawOrderArr[this._drawOrderIndex];curTime>=tDrawOrderData.time&&(this._drawOrder=tDrawOrderData.drawOrder,!(++this._drawOrderIndex>=tDrawOrderArr.length));)tDrawOrderData=tDrawOrderArr[this._drawOrderIndex];var tGraphics;0==this._aniMode||1==this._aniMode?this.graphics=new GraphicsAni:this.graphics instanceof laya.ani.GraphicsAni?this.graphics.clear():this.graphics=new GraphicsAni,tGraphics=this.graphics;var bones=this._templet.getNodes(this._aniClipIndex);this._templet.getOriginalData(this._aniClipIndex,this._curOriginalData,this._player._fullFrames[this._aniClipIndex],_clipIndex,curTime);var tDBBoneSlot,tDBBoneSlotArr,tParentTransform,tSrcBone,tSectionArr=this._aniSectionDic[this._aniClipIndex],tStartIndex=0,i=0,j=0,k=0,n=0,boneCount=this._templet.srcBoneMatrixArr.length;for(i=0,n=tSectionArr[0];i<boneCount;i++)tSrcBone=this._boneList[i],tParentTransform=this._templet.srcBoneMatrixArr[i],tSrcBone.resultTransform.scX=tParentTransform.scX*this._curOriginalData[tStartIndex++],tSrcBone.resultTransform.skX=tParentTransform.skX+this._curOriginalData[tStartIndex++],tSrcBone.resultTransform.skY=tParentTransform.skY+this._curOriginalData[tStartIndex++],tSrcBone.resultTransform.scY=tParentTransform.scY*this._curOriginalData[tStartIndex++],tSrcBone.resultTransform.x=tParentTransform.x+this._curOriginalData[tStartIndex++],tSrcBone.resultTransform.y=tParentTransform.y+this._curOriginalData[tStartIndex++],8===this._templet.tMatrixDataLen&&(tSrcBone.resultTransform.skewX=tParentTransform.skewX+this._curOriginalData[tStartIndex++],tSrcBone.resultTransform.skewY=tParentTransform.skewY+this._curOriginalData[tStartIndex++]);var tBoneData,tSlotDic={},tSlotAlphaDic={};for(n+=tSectionArr[1];i<n;i++)tSlotDic[(tBoneData=bones[i]).name]=this._curOriginalData[tStartIndex++],tSlotAlphaDic[tBoneData.name]=this._curOriginalData[tStartIndex++],this._curOriginalData[tStartIndex++],this._curOriginalData[tStartIndex++],this._curOriginalData[tStartIndex++],this._curOriginalData[tStartIndex++];var tBendDirectionDic={},tMixDic={};for(n+=tSectionArr[2];i<n;i++)tBendDirectionDic[(tBoneData=bones[i]).name]=this._curOriginalData[tStartIndex++],tMixDic[tBoneData.name]=this._curOriginalData[tStartIndex++],this._curOriginalData[tStartIndex++],this._curOriginalData[tStartIndex++],this._curOriginalData[tStartIndex++],this._curOriginalData[tStartIndex++];if(this._pathDic){var tPathConstraint;for(n+=tSectionArr[3];i<n;i++)if(tBoneData=bones[i],tPathConstraint=this._pathDic[tBoneData.name])switch(new Byte(tBoneData.extenData).getByte()){case 1:tPathConstraint.position=this._curOriginalData[tStartIndex++];break;case 2:tPathConstraint.spacing=this._curOriginalData[tStartIndex++];break;case 3:tPathConstraint.rotateMix=this._curOriginalData[tStartIndex++],tPathConstraint.translateMix=this._curOriginalData[tStartIndex++]}}if(this._yReverseMatrix?this._rootBone.update(this._yReverseMatrix):this._rootBone.update(Matrix.TEMP.identity()),this._ikArr){var tIkConstraint;for(i=0,n=this._ikArr.length;i<n;i++)tIkConstraint=this._ikArr[i],tBendDirectionDic.hasOwnProperty(tIkConstraint.name)&&(tIkConstraint.bendDirection=tBendDirectionDic[tIkConstraint.name]),tMixDic.hasOwnProperty(tIkConstraint.name)&&(tIkConstraint.mix=tMixDic[tIkConstraint.name]),tIkConstraint.apply()}if(this._pathDic)for(var tPathStr in this._pathDic)(tPathConstraint=this._pathDic[tPathStr]).apply(this._boneList,tGraphics);if(this._tfArr){for(i=0,k=this._tfArr.length;i<k;i++)this._tfArr[i].apply()}for(i=0,k=this._boneList.length;i<k;i++)if(tSrcBone=this._boneList[i],tDBBoneSlotArr=this._bindBoneBoneSlotDic[tSrcBone.name],tSrcBone.resultMatrix.copyTo(this._boneMatrixArray[i]),tDBBoneSlotArr)for(j=0,n=tDBBoneSlotArr.length;j<n;j++)(tDBBoneSlot=tDBBoneSlotArr[j])&&tDBBoneSlot.setParentMatrix(tSrcBone.resultMatrix);var tDeformAniData,tDeformDic={},tDeformAniArr=this._templet.deformAniArr;if(tDeformAniArr&&tDeformAniArr.length>0){if(this._lastAniClipIndex!=this._aniClipIndex)for(this._lastAniClipIndex=this._aniClipIndex,i=0,n=this._boneSlotArray.length;i<n;i++)(tDBBoneSlot=this._boneSlotArray[i]).deformData=null;var tSkinDeformAni=tDeformAniArr[this._aniClipIndex];tDeformAniData=tSkinDeformAni.default,this._setDeform(tDeformAniData,tDeformDic,this._boneSlotArray,curTime);var tSkin;for(tSkin in tSkinDeformAni)"default"!=tSkin&&tSkin!=this._skinName&&(tDeformAniData=tSkinDeformAni[tSkin],this._setDeform(tDeformAniData,tDeformDic,this._boneSlotArray,curTime));tDeformAniData=tSkinDeformAni[this._skinName],this._setDeform(tDeformAniData,tDeformDic,this._boneSlotArray,curTime)}var tSlotData2,tSlotData3,tObject;if(this._drawOrder)for(i=0,n=this._drawOrder.length;i<n;i++)tSlotData2=tSlotDic[(tDBBoneSlot=this._boneSlotArray[this._drawOrder[i]]).name],tSlotData3=tSlotAlphaDic[tDBBoneSlot.name],isNaN(tSlotData3)||(tGraphics.save(),tGraphics.alpha(tSlotData3)),isNaN(tSlotData2)||-2==tSlotData2||(this._templet.attachmentNames?tDBBoneSlot.showDisplayByName(this._templet.attachmentNames[tSlotData2]):tDBBoneSlot.showDisplayByIndex(tSlotData2)),tDeformDic[this._drawOrder[i]]?(tObject=tDeformDic[this._drawOrder[i]],tDBBoneSlot.currDisplayData&&tObject[tDBBoneSlot.currDisplayData.attachmentName]?tDBBoneSlot.deformData=tObject[tDBBoneSlot.currDisplayData.attachmentName]:tDBBoneSlot.deformData=null):tDBBoneSlot.deformData=null,isNaN(tSlotData3)?tDBBoneSlot.draw(tGraphics,this._boneMatrixArray,2==this._aniMode):tDBBoneSlot.draw(tGraphics,this._boneMatrixArray,2==this._aniMode,tSlotData3),isNaN(tSlotData3)||tGraphics.restore();else for(i=0,n=this._boneSlotArray.length;i<n;i++)tSlotData2=tSlotDic[(tDBBoneSlot=this._boneSlotArray[i]).name],tSlotData3=tSlotAlphaDic[tDBBoneSlot.name],isNaN(tSlotData3)||(tGraphics.save(),tGraphics.alpha(tSlotData3)),isNaN(tSlotData2)||-2==tSlotData2||(this._templet.attachmentNames?tDBBoneSlot.showDisplayByName(this._templet.attachmentNames[tSlotData2]):tDBBoneSlot.showDisplayByIndex(tSlotData2)),tDeformDic[i]?(tObject=tDeformDic[i],tDBBoneSlot.currDisplayData&&tObject[tDBBoneSlot.currDisplayData.attachmentName]?tDBBoneSlot.deformData=tObject[tDBBoneSlot.currDisplayData.attachmentName]:tDBBoneSlot.deformData=null):tDBBoneSlot.deformData=null,isNaN(tSlotData3)?tDBBoneSlot.draw(tGraphics,this._boneMatrixArray,2==this._aniMode):tDBBoneSlot.draw(tGraphics,this._boneMatrixArray,2==this._aniMode,tSlotData3),isNaN(tSlotData3)||tGraphics.restore();0==this._aniMode?this._templet.setGrahicsDataWithCache(this._aniClipIndex,_clipIndex,tGraphics):1==this._aniMode&&this._setGrahicsDataWithCache(this._aniClipIndex,_clipIndex,tGraphics)},__proto._setDeform=function(tDeformAniData,tDeformDic,_boneSlotArray,curTime){if(tDeformAniData){var tDeformSlotData,tDeformSlotDisplayData,tDBBoneSlot,i=0,n=0,j=0;if(tDeformAniData)for(i=0,n=tDeformAniData.deformSlotDataList.length;i<n;i++)for(tDeformSlotData=tDeformAniData.deformSlotDataList[i],j=0;j<tDeformSlotData.deformSlotDisplayList.length;j++)tDBBoneSlot=_boneSlotArray[(tDeformSlotDisplayData=tDeformSlotData.deformSlotDisplayList[j]).slotIndex],tDeformSlotDisplayData.apply(curTime,tDBBoneSlot),tDeformDic[tDeformSlotDisplayData.slotIndex]||(tDeformDic[tDeformSlotDisplayData.slotIndex]={}),tDeformDic[tDeformSlotDisplayData.slotIndex][tDeformSlotDisplayData.attachment]=tDeformSlotDisplayData.deformData}},__proto.getAnimNum=function(){return this._templet.getAnimationCount()},__proto.getAniNameByIndex=function(index){return this._templet.getAniNameByIndex(index)},__proto.getSlotByName=function(name){return this._boneSlotDic[name]},__proto.showSkinByName=function(name,freshSlotIndex){void 0===freshSlotIndex&&(freshSlotIndex=!0),this.showSkinByIndex(this._templet.getSkinIndexByName(name),freshSlotIndex)},__proto.showSkinByIndex=function(skinIndex,freshSlotIndex){void 0===freshSlotIndex&&(freshSlotIndex=!0);for(var i=0;i<this._boneSlotArray.length;i++)this._boneSlotArray[i].showSlotData(null,freshSlotIndex);if(this._templet.showSkinByIndex(this._boneSlotDic,skinIndex,freshSlotIndex)){var tSkinData=this._templet.skinDataArray[skinIndex];this._skinIndex=skinIndex,this._skinName=tSkinData.name}this._clearCache()},__proto.showSlotSkinByIndex=function(slotName,index){if(0!=this._aniMode){var tBoneSlot=this.getSlotByName(slotName);tBoneSlot&&tBoneSlot.showDisplayByIndex(index),this._clearCache()}},__proto.showSlotSkinByName=function(slotName,name){if(0!=this._aniMode){var tBoneSlot=this.getSlotByName(slotName);tBoneSlot&&tBoneSlot.showDisplayByName(name),this._clearCache()}},__proto.replaceSlotSkinName=function(slotName,oldName,newName){if(0!=this._aniMode){var tBoneSlot=this.getSlotByName(slotName);tBoneSlot&&tBoneSlot.replaceDisplayByName(oldName,newName),this._clearCache()}},__proto.replaceSlotSkinByIndex=function(slotName,oldIndex,newIndex){if(0!=this._aniMode){var tBoneSlot=this.getSlotByName(slotName);tBoneSlot&&tBoneSlot.replaceDisplayByIndex(oldIndex,newIndex),this._clearCache()}},__proto.setSlotSkin=function(slotName,texture){if(0!=this._aniMode){var tBoneSlot=this.getSlotByName(slotName);tBoneSlot&&tBoneSlot.replaceSkin(texture),this._clearCache()}},__proto._clearCache=function(){if(1==this._aniMode)for(var i=0,n=this._graphicsCache.length;i<n;i++)this._graphicsCache[i].length=0},__proto.play=function(nameOrIndex,loop,force,start,end,freshSkin){void 0===force&&(force=!0),void 0===start&&(start=0),void 0===end&&(end=0),void 0===freshSkin&&(freshSkin=!0),this._indexControl=!1;var index=-1,duration=NaN;if(duration=loop?2147483647:0,"string"==typeof nameOrIndex)for(var i=0,n=this._templet.getAnimationCount();i<n;i++){var animation=this._templet.getAnimation(i);if(animation&&nameOrIndex==animation.name){index=i;break}}else index=nameOrIndex;index>-1&&index<this.getAnimNum()&&(this._aniClipIndex=index,(force||this._pause||this._currAniIndex!=index)&&(this._currAniIndex=index,this._curOriginalData=new Float32Array(this._templet.getTotalkeyframesLength(index)),this._drawOrder=null,this._eventIndex=0,this._player.play(index,this._player.playbackRate,duration,start,end),freshSkin&&this._templet.showSkinByIndex(this._boneSlotDic,this._skinIndex),this._pause&&(this._pause=!1,this._lastTime=Browser.now(),Laya.stage.frameLoop(1,this,this._update,null,!0)),this._update()))},__proto.stop=function(){this._pause||(this._pause=!0,this._player&&this._player.stop(!0),Laya.timer.clear(this,this._update))},__proto.playbackRate=function(value){this._player&&(this._player.playbackRate=value)},__proto.paused=function(){this._pause||(this._pause=!0,this._player&&(this._player.paused=!0),Laya.timer.clear(this,this._update))},__proto.resume=function(){this._indexControl=!1,this._pause&&(this._pause=!1,this._player&&(this._player.paused=!1),this._lastTime=Browser.now(),Laya.stage.frameLoop(1,this,this._update,null,!0))},__proto._getGrahicsDataWithCache=function(aniIndex,frameIndex){return this._graphicsCache[aniIndex][frameIndex]},__proto._setGrahicsDataWithCache=function(aniIndex,frameIndex,graphics){this._graphicsCache[aniIndex][frameIndex]=graphics},__proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),_super.prototype.destroy.call(this,destroyChild),this._templet=null,this._player.offAll(),this._player=null,this._curOriginalData=null,this._boneMatrixArray.length=0,this._lastTime=0,Laya.timer.clear(this,this._update)},__getset(0,__proto,"url",function(){return this._aniPath},function(path){this.load(path)}),__getset(0,__proto,"index",function(){return this._index},function(value){this.player&&(this._index=value,this._player.currentTime=1e3*this._index/this._player.cacheFrameRate,this._indexControl=!0,this._update(!1))}),__getset(0,__proto,"total",function(){return this._templet&&this._player?this._total=Math.floor(this._templet.getAniDuration(this._player.currentAnimationClipIndex)/1e3*this._player.cacheFrameRate):this._total=-1,this._total}),__getset(0,__proto,"player",function(){return this._player}),Skeleton}(Sprite),Templet=(function(_super){function MovieClip(parentMovieClip){this._start=0,this._Pos=0,this._data=null,this._curIndex=0,this._preIndex=0,this._playIndex=0,this._playing=!1,this._ended=!0,this._count=0,this._ids=null,this._loadedImage={},this._idOfSprite=null,this._parentMovieClip=null,this._movieClipList=null,this._labels=null,this.basePath=null,this._atlasPath=null,this._url=null,this._isRoot=!1,this.interval=30,this.loop=!1,MovieClip.__super.call(this),this._ids={},this._idOfSprite=[],this._reset(),this._playing=!1,this._parentMovieClip=parentMovieClip,parentMovieClip?(this._isRoot=!1,this._movieClipList=parentMovieClip._movieClipList,this._movieClipList.push(this)):(this._movieClipList=[this],this._isRoot=!0)}__class(MovieClip,"laya.ani.swf.MovieClip",_super);var __proto=MovieClip.prototype;__proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),this._clear(),_super.prototype.destroy.call(this,destroyChild)},__proto._setDisplay=function(value){_super.prototype._setDisplay.call(this,value),this._isRoot&&this._$3__onDisplay()},__proto._$3__onDisplay=function(){this._displayedInStage?Laya.timer.loop(this.interval,this,this.updates,null,!0):Laya.timer.clear(this,this.updates)},__proto.updates=function(){if(!this._parentMovieClip){var i=0,len=0;for(len=this._movieClipList.length,i=0;i<len;i++)this._movieClipList[i]&&this._movieClipList[i]._update()}},__proto.addLabel=function(label,index){this._labels||(this._labels={}),this._labels[index]=label},__proto.removeLabel=function(label){if(label){if(!this._labels)for(var name in this._labels)if(this._labels[name]===label){delete this._labels[name];break}}else this._labels=null},__proto._update=function(){if(this._data&&this._playing){if(++this._playIndex>=this._count){if(!this.loop)return this._playIndex--,void this.stop();this._playIndex=0}this._parse(this._playIndex),this._labels&&this._labels[this._playIndex]&&this.event("label",this._labels[this._playIndex])}},__proto.stop=function(){this._playing=!1},__proto.gotoAndStop=function(index){this.index=index,this.stop()},__proto._clear=function(){if(this.stop(),this._idOfSprite.length=0,!this._parentMovieClip){Laya.timer.clear(this,this.updates);var i=0,len=0;for(len=this._movieClipList.length,i=0;i<len;i++)this._movieClipList[i]!=this&&this._movieClipList[i]._clear();this._movieClipList.length=0}var key;for(key in this._loadedImage)this._loadedImage[key]&&(Loader.clearRes(key),this._loadedImage[key]=!1);this.removeChildren(),this.graphics=null,this._parentMovieClip=null},__proto.play=function(index,loop){void 0===index&&(index=0),void 0===loop&&(loop=!0),this.loop=loop,this._playing=!0,this._data&&this._displayFrame(index)},__proto._displayFrame=function(frameIndex){void 0===frameIndex&&(frameIndex=-1),-1!=frameIndex&&(this._curIndex>frameIndex&&this._reset(),this._parse(frameIndex))},__proto._reset=function(rm){void 0===rm&&(rm=!0),rm&&1!=this._curIndex&&this.removeChildren(),this._preIndex=this._curIndex=-1,this._Pos=this._start},__proto._parse=function(frameIndex){var mc,sp,eStr,key=0,tPos=0,ttype=0,ifAdd=!1,_idOfSprite=this._idOfSprite,_data=this._data;for(this._ended&&this._reset(),_data.pos=this._Pos,this._ended=!1,this._playIndex=frameIndex,this._curIndex>frameIndex&&frameIndex<this._preIndex&&(this._reset(!0),_data.pos=this._Pos);this._curIndex<=frameIndex&&!this._ended;)switch(_data.getUint16()){case 12:if(key=_data.getUint16(),tPos=this._ids[_data.getUint16()],this._Pos=_data.pos,_data.pos=tPos,0==(ttype=_data.getUint8())){var pid=_data.getUint16();if(!(sp=_idOfSprite[key])){sp=_idOfSprite[key]=new Sprite;var spp=new Sprite;spp.loadImage(this.basePath+pid+".png"),this._loadedImage[this.basePath+pid+".png"]=!0,sp.addChild(spp),spp.size(_data.getFloat32(),_data.getFloat32());var mat=_data._getMatrix();spp.transform=mat}sp.alpha=1}else 1==ttype&&((mc=_idOfSprite[key])||(_idOfSprite[key]=mc=new MovieClip(this),mc.interval=this.interval,mc._ids=this._ids,mc.basePath=this.basePath,mc._setData(_data,tPos),mc._initState(),mc.play(0)),mc.alpha=1);_data.pos=this._Pos;break;case 3:var node=_idOfSprite[_data.getUint16()];node&&(this.addChild(node),node.zOrder=_data.getUint16(),ifAdd=!0);break;case 4:(node=_idOfSprite[_data.getUint16()])&&node.removeSelf();break;case 5:_idOfSprite[_data.getUint16()][MovieClip._ValueList[_data.getUint16()]]=_data.getFloat32();break;case 6:_idOfSprite[_data.getUint16()].visible=_data.getUint8()>0;break;case 7:var mt=(sp=_idOfSprite[_data.getUint16()]).transform||Matrix.create();mt.setTo(_data.getFloat32(),_data.getFloat32(),_data.getFloat32(),_data.getFloat32(),_data.getFloat32(),_data.getFloat32()),sp.transform=mt;break;case 8:_idOfSprite[_data.getUint16()].setPos(_data.getFloat32(),_data.getFloat32());break;case 9:_idOfSprite[_data.getUint16()].setSize(_data.getFloat32(),_data.getFloat32());break;case 10:_idOfSprite[_data.getUint16()].alpha=_data.getFloat32();break;case 11:_idOfSprite[_data.getUint16()].setScale(_data.getFloat32(),_data.getFloat32());break;case 98:eStr=_data.getString(),this.event(eStr),"stop"==eStr&&this.stop();break;case 99:this._curIndex=_data.getUint16(),ifAdd&&this.updateZOrder();break;case 100:this._count=this._curIndex+1,this._ended=!0,this._playing&&(this.event("enterframe"),this.event("end"),this.event("complete")),this._reset(!1)}this._playing&&!this._ended&&this.event("enterframe"),this._Pos=_data.pos},__proto._setData=function(data,start){this._data=data,this._start=start+3},__proto.load=function(url,atlas,atlasPath){void 0===atlas&&(atlas=!1),this._url=url=URL.formatURL(url),atlas&&(this._atlasPath=atlasPath||url.split(".swf")[0]+".json"),this.stop(),this._clear(),this._movieClipList=[this];var urls;urls=[{url:url,type:"arraybuffer"}],this._atlasPath&&urls.push({url:this._atlasPath,type:"atlas"}),Laya.loader.load(urls,Handler.create(this,this._onLoaded))},__proto._onLoaded=function(){var data;(data=Loader.getRes(this._url))?(this.basePath=this._atlasPath?Loader.getAtlas(this._atlasPath).dir:this._url.split(".swf")[0]+"/image/",this._initData(data)):this.event("error","file not find")},__proto._initState=function(){this._reset(),this._ended=!1;var preState=this._playing;for(this._playing=!1,this._curIndex=0;!this._ended;)this._parse(++this._curIndex);this._playing=preState},__proto._initData=function(data){this._data=new Byte(data);var i=0,len=this._data.getUint16();for(i=0;i<len;i++)this._ids[this._data.getInt16()]=this._data.getInt32();this.interval=1e3/this._data.getUint16(),this._setData(this._data,this._ids[32767]),this._initState(),this.play(0),this.event("loaded"),this._parentMovieClip||Laya.timer.loop(this.interval,this,this.updates,null,!0)},__getset(0,__proto,"index",function(){return this._playIndex},function(value){this._playIndex=value,this._data&&this._displayFrame(this._playIndex),this._labels&&this._labels[value]&&this.event("label",this._labels[value])}),__getset(0,__proto,"count",function(){return this._count}),__getset(0,__proto,"playing",function(){return this._playing}),__getset(0,__proto,"url",null,function(path){this.load(path)}),MovieClip._ValueList=["x","y","width","height","scaleX","scaleY","rotation","alpha"]}(Sprite),function(_super){function Templet(){this._mainTexture=null,this._textureJson=null,this._graphicsCache=[],this.srcBoneMatrixArr=[],this.ikArr=[],this.tfArr=[],this.pathArr=[],this.boneSlotDic={},this.bindBoneBoneSlotDic={},this.boneSlotArray=[],this.skinDataArray=[],this.skinDic={},this.subTextureDic={},this.isParseFail=!1,this.yReverseMatrix=null,this.drawOrderAniArr=[],this.eventAniArr=[],this.attachmentNames=null,this.deformAniArr=[],this._rate=30,this.aniSectionDic={},this._skBufferUrl=null,this._textureDic={},this._loadList=null,this._path=null,this.tMatrixDataLen=0,this.mRootBone=null,Templet.__super.call(this),this.skinSlotDisplayDataArr=[],this.mBoneArr=[]}__class(Templet,"laya.ani.bone.Templet",_super);var __proto=Templet.prototype;return __proto.loadAni=function(url){this._skBufferUrl=url,Laya.loader.load(url,Handler.create(this,this.onComplete),null,"arraybuffer")},__proto.onComplete=function(content){var tSkBuffer=Loader.getRes(this._skBufferUrl);this._path=this._skBufferUrl.slice(0,this._skBufferUrl.lastIndexOf("/"))+"/",this.parseData(null,tSkBuffer)},__proto.parseData=function(texture,skeletonData,playbackRate){void 0===playbackRate&&(playbackRate=30),this._mainTexture=texture,this._mainTexture&&Render.isWebGL&&texture.bitmap&&(texture.bitmap.enableMerageInAtlas=!1),this._rate=playbackRate,this.parse(skeletonData)},__proto.buildArmature=function(aniMode){return void 0===aniMode&&(aniMode=0),new Skeleton(this,aniMode)},__proto.parse=function(data){_super.prototype.parse.call(this,data),this._endLoaded(),this._aniVersion!=AnimationTemplet.LAYA_ANIMATION_VISION&&(console.log("[Error] 版本不一致，请使用IDE版本（1.6.0）重新导出"),this._loaded=!1),this._loaded?this._mainTexture?this._parsePublicExtData():this._parseTexturePath():(this.event("error",this),this.isParseFail=!0)},__proto._parseTexturePath=function(){var i=0;this._loadList=[];var tSrcTexturePath,tByte=new Byte(this.getPublicExtData()),tWidth=0,tHeight=0,tTempleData=0,tTextureLen=tByte.getInt32(),tTextureName=tByte.readUTFString(),tTextureNameArr=tTextureName.split("\n");for(i=0;i<tTextureLen;i++)tSrcTexturePath=this._path+tTextureNameArr[2*i],tTextureName=tTextureNameArr[2*i+1],tByte.getFloat32(),tByte.getFloat32(),tWidth=tByte.getFloat32(),tHeight=tByte.getFloat32(),tTempleData=tByte.getFloat32(),isNaN(tTempleData)?0:tTempleData,tTempleData=tByte.getFloat32(),isNaN(tTempleData)?0:tTempleData,tTempleData=tByte.getFloat32(),isNaN(tTempleData)?tWidth:tTempleData,tTempleData=tByte.getFloat32(),isNaN(tTempleData)?tHeight:tTempleData,-1==this._loadList.indexOf(tSrcTexturePath)&&this._loadList.push(tSrcTexturePath);Laya.loader.load(this._loadList,Handler.create(this,this._textureComplete))},__proto._textureComplete=function(){for(var tTexture,tTextureName,i=0,n=this._loadList.length;i<n;i++)tTextureName=this._loadList[i],tTexture=this._textureDic[tTextureName]=Loader.getRes(tTextureName),Render.isWebGL&&tTexture&&tTexture.bitmap&&(tTexture.bitmap.enableMerageInAtlas=!1);this._parsePublicExtData()},__proto._parsePublicExtData=function(){var i=0,j=0,k=0,l=0,n=0;for(i=0,n=this.getAnimationCount();i<n;i++)this._graphicsCache.push([]);var isSpine=!1;isSpine="Dragon"!=this.aniClassName;var tTexture,tSrcTexturePath,tByte=new Byte(this.getPublicExtData()),tX=0,tY=0,tWidth=0,tHeight=0,tFrameX=0,tFrameY=0,tFrameWidth=0,tFrameHeight=0,tTempleData=0,tTextureLen=tByte.getInt32(),tTextureName=tByte.readUTFString(),tTextureNameArr=tTextureName.split("\n");for(i=0;i<tTextureLen;i++)tTexture=this._mainTexture,tSrcTexturePath=this._path+tTextureNameArr[2*i],tTextureName=tTextureNameArr[2*i+1],null==this._mainTexture&&(tTexture=this._textureDic[tSrcTexturePath]),tX=tByte.getFloat32(),tY=tByte.getFloat32(),tWidth=tByte.getFloat32(),tHeight=tByte.getFloat32(),tTempleData=tByte.getFloat32(),tFrameX=isNaN(tTempleData)?0:tTempleData,tTempleData=tByte.getFloat32(),tFrameY=isNaN(tTempleData)?0:tTempleData,tTempleData=tByte.getFloat32(),tFrameWidth=isNaN(tTempleData)?tWidth:tTempleData,tTempleData=tByte.getFloat32(),tFrameHeight=isNaN(tTempleData)?tHeight:tTempleData,this.subTextureDic[tTextureName]=Texture.create(tTexture,tX,tY,tWidth,tHeight,-tFrameX,-tFrameY,tFrameWidth,tFrameHeight);this._mainTexture=tTexture;var tSectionArr,tAniCount=tByte.getUint16();for(i=0;i<tAniCount;i++)(tSectionArr=[]).push(tByte.getUint16()),tSectionArr.push(tByte.getUint16()),tSectionArr.push(tByte.getUint16()),tSectionArr.push(tByte.getUint16()),this.aniSectionDic[i]=tSectionArr;var tBone,tParentBone,tName,tParentName,tRootBone,tBoneLen=tByte.getInt16(),tBoneDic={};for(i=0;i<tBoneLen;i++)tBone=new Bone,0==i?tRootBone=tBone:tBone.root=tRootBone,tBone.d=isSpine?-1:1,tName=tByte.readUTFString(),tParentName=tByte.readUTFString(),tBone.length=tByte.getFloat32(),1==tByte.getByte()&&(tBone.inheritRotation=!1),1==tByte.getByte()&&(tBone.inheritScale=!1),tBone.name=tName,tParentName&&((tParentBone=tBoneDic[tParentName])?tParentBone.addChild(tBone):this.mRootBone=tBone),tBoneDic[tName]=tBone,this.mBoneArr.push(tBone);this.tMatrixDataLen=tByte.getUint16();var tResultTransform,tLen=tByte.getUint16(),boneLength=Math.floor(tLen/this.tMatrixDataLen),tMatrixArray=this.srcBoneMatrixArr;for(i=0;i<boneLength;i++)(tResultTransform=new Transform).scX=tByte.getFloat32(),tResultTransform.skX=tByte.getFloat32(),tResultTransform.skY=tByte.getFloat32(),tResultTransform.scY=tByte.getFloat32(),tResultTransform.x=tByte.getFloat32(),tResultTransform.y=tByte.getFloat32(),8===this.tMatrixDataLen&&(tResultTransform.skewX=tByte.getFloat32(),tResultTransform.skewY=tByte.getFloat32()),tMatrixArray.push(tResultTransform),(tBone=this.mBoneArr[i]).transform=tResultTransform;var tIkConstraintData,tIkLen=tByte.getUint16(),tIkBoneLen=0;for(i=0;i<tIkLen;i++){for(tIkConstraintData=new IkConstraintData,tIkBoneLen=tByte.getUint16(),j=0;j<tIkBoneLen;j++)tIkConstraintData.boneNames.push(tByte.readUTFString()),tIkConstraintData.boneIndexs.push(tByte.getInt16());tIkConstraintData.name=tByte.readUTFString(),tIkConstraintData.targetBoneName=tByte.readUTFString(),tIkConstraintData.targetBoneIndex=tByte.getInt16(),tIkConstraintData.bendDirection=tByte.getFloat32(),tIkConstraintData.mix=tByte.getFloat32(),tIkConstraintData.isSpine=isSpine,this.ikArr.push(tIkConstraintData)}var tTfConstraintData,tTfLen=tByte.getUint16(),tTfBoneLen=0;for(i=0;i<tTfLen;i++){for(tTfConstraintData=new TfConstraintData,tTfBoneLen=tByte.getUint16(),j=0;j<tTfBoneLen;j++)tTfConstraintData.boneIndexs.push(tByte.getInt16());tTfConstraintData.name=tByte.getUTFString(),tTfConstraintData.targetIndex=tByte.getInt16(),tTfConstraintData.rotateMix=tByte.getFloat32(),tTfConstraintData.translateMix=tByte.getFloat32(),tTfConstraintData.scaleMix=tByte.getFloat32(),tTfConstraintData.shearMix=tByte.getFloat32(),tTfConstraintData.offsetRotation=tByte.getFloat32(),tTfConstraintData.offsetX=tByte.getFloat32(),tTfConstraintData.offsetY=tByte.getFloat32(),tTfConstraintData.offsetScaleX=tByte.getFloat32(),tTfConstraintData.offsetScaleY=tByte.getFloat32(),tTfConstraintData.offsetShearY=tByte.getFloat32(),this.tfArr.push(tTfConstraintData)}var tPathConstraintData,tPathLen=tByte.getUint16(),tPathBoneLen=0;for(i=0;i<tPathLen;i++){for((tPathConstraintData=new PathConstraintData).name=tByte.readUTFString(),tPathBoneLen=tByte.getUint16(),j=0;j<tPathBoneLen;j++)tPathConstraintData.bones.push(tByte.getInt16());tPathConstraintData.target=tByte.readUTFString(),tPathConstraintData.positionMode=tByte.readUTFString(),tPathConstraintData.spacingMode=tByte.readUTFString(),tPathConstraintData.rotateMode=tByte.readUTFString(),tPathConstraintData.offsetRotation=tByte.getFloat32(),tPathConstraintData.position=tByte.getFloat32(),tPathConstraintData.spacing=tByte.getFloat32(),tPathConstraintData.rotateMix=tByte.getFloat32(),tPathConstraintData.translateMix=tByte.getFloat32(),this.pathArr.push(tPathConstraintData)}var tDeformAniData,tDeformSlotData,tDeformSlotDisplayData,tDeformVectices,tDeformSlotLen=0,tDeformSlotDisplayLen=0,tDeformTimeLen=0,tDTime=NaN,tDeformVecticesLen=0,tDeformAniLen=tByte.getInt16();for(i=0;i<tDeformAniLen;i++){var tDeformSkinLen=tByte.getUint8(),tSkinDic={};this.deformAniArr.push(tSkinDic);for(var f=0;f<tDeformSkinLen;f++)for((tDeformAniData=new DeformAniData).skinName=tByte.getUTFString(),tSkinDic[tDeformAniData.skinName]=tDeformAniData,tDeformSlotLen=tByte.getInt16(),j=0;j<tDeformSlotLen;j++)for(tDeformSlotData=new DeformSlotData,tDeformAniData.deformSlotDataList.push(tDeformSlotData),tDeformSlotDisplayLen=tByte.getInt16(),k=0;k<tDeformSlotDisplayLen;k++)for(tDeformSlotDisplayData=new DeformSlotDisplayData,tDeformSlotData.deformSlotDisplayList.push(tDeformSlotDisplayData),tDeformSlotDisplayData.slotIndex=tByte.getInt16(),tDeformSlotDisplayData.attachment=tByte.getUTFString(),tDeformTimeLen=tByte.getInt16(),l=0;l<tDeformTimeLen;l++)for(1==tByte.getByte()?tDeformSlotDisplayData.tweenKeyList.push(!0):tDeformSlotDisplayData.tweenKeyList.push(!1),tDTime=tByte.getFloat32(),tDeformSlotDisplayData.timeList.push(tDTime),tDeformVectices=[],tDeformSlotDisplayData.vectices.push(tDeformVectices),tDeformVecticesLen=tByte.getInt16(),n=0;n<tDeformVecticesLen;n++)tDeformVectices.push(tByte.getFloat32())}var tDrawOrderArr,tDrawOrderData,tDrawOrderAniLen=tByte.getInt16(),tDrawOrderLen=0,tDoLen=0;for(i=0;i<tDrawOrderAniLen;i++){for(tDrawOrderLen=tByte.getInt16(),tDrawOrderArr=[],j=0;j<tDrawOrderLen;j++){for((tDrawOrderData=new DrawOrderData).time=tByte.getFloat32(),tDoLen=tByte.getInt16(),k=0;k<tDoLen;k++)tDrawOrderData.drawOrder.push(tByte.getInt16());tDrawOrderArr.push(tDrawOrderData)}this.drawOrderAniArr.push(tDrawOrderArr)}var tEventArr,tEventData,tEventAniLen=tByte.getInt16(),tEventLen=0;for(i=0;i<tEventAniLen;i++){for(tEventLen=tByte.getInt16(),tEventArr=[],j=0;j<tEventLen;j++)(tEventData=new EventData).name=tByte.getUTFString(),tEventData.intValue=tByte.getInt32(),tEventData.floatValue=tByte.getFloat32(),tEventData.stringValue=tByte.getUTFString(),tEventData.time=tByte.getFloat32(),tEventArr.push(tEventData);this.eventAniArr.push(tEventArr)}var tAttachmentLen=tByte.getInt16();if(tAttachmentLen>0)for(this.attachmentNames=[],i=0;i<tAttachmentLen;i++)this.attachmentNames.push(tByte.getUTFString());var tDBBoneSlot,tDBBoneSlotArr,tBoneSlotLen=tByte.getInt16();for(i=0;i<tBoneSlotLen;i++)(tDBBoneSlot=new BoneSlot).name=tByte.readUTFString(),tDBBoneSlot.parent=tByte.readUTFString(),tDBBoneSlot.attachmentName=tByte.readUTFString(),tDBBoneSlot.srcDisplayIndex=tDBBoneSlot.displayIndex=tByte.getInt16(),tDBBoneSlot.templet=this,this.boneSlotDic[tDBBoneSlot.name]=tDBBoneSlot,null==(tDBBoneSlotArr=this.bindBoneBoneSlotDic[tDBBoneSlot.parent])&&(this.bindBoneBoneSlotDic[tDBBoneSlot.parent]=tDBBoneSlotArr=[]),tDBBoneSlotArr.push(tDBBoneSlot),this.boneSlotArray.push(tDBBoneSlot);var tSkinData,tSlotData,tDisplayData,tNameArray=tByte.readUTFString().split("\n"),tNameStartIndex=0,tSkinDataLen=tByte.getUint8(),tSlotDataLen=0,tDisplayDataLen=0,tUvLen=0,tWeightLen=0,tTriangleLen=0,tVerticeLen=0,tLengthLen=0;for(i=0;i<tSkinDataLen;i++){for((tSkinData=new SkinData).name=tNameArray[tNameStartIndex++],tSlotDataLen=tByte.getUint8(),j=0;j<tSlotDataLen;j++){for((tSlotData=new SlotData).name=tNameArray[tNameStartIndex++],tDBBoneSlot=this.boneSlotDic[tSlotData.name],tDisplayDataLen=tByte.getUint8(),k=0;k<tDisplayDataLen;k++){if(tDisplayData=new SkinSlotDisplayData,this.skinSlotDisplayDataArr.push(tDisplayData),tDisplayData.name=tNameArray[tNameStartIndex++],tDisplayData.attachmentName=tNameArray[tNameStartIndex++],tDisplayData.transform=new Transform,tDisplayData.transform.scX=tByte.getFloat32(),tDisplayData.transform.skX=tByte.getFloat32(),tDisplayData.transform.skY=tByte.getFloat32(),tDisplayData.transform.scY=tByte.getFloat32(),tDisplayData.transform.x=tByte.getFloat32(),tDisplayData.transform.y=tByte.getFloat32(),tSlotData.displayArr.push(tDisplayData),tDisplayData.width=tByte.getFloat32(),tDisplayData.height=tByte.getFloat32(),tDisplayData.type=tByte.getUint8(),tDisplayData.verLen=tByte.getUint16(),(tBoneLen=tByte.getUint16())>0)for(tDisplayData.bones=[],l=0;l<tBoneLen;l++){var tBoneId=tByte.getUint16();tDisplayData.bones.push(tBoneId)}if((tUvLen=tByte.getUint16())>0)for(tDisplayData.uvs=[],l=0;l<tUvLen;l++)tDisplayData.uvs.push(tByte.getFloat32());if((tWeightLen=tByte.getUint16())>0)for(tDisplayData.weights=[],l=0;l<tWeightLen;l++)tDisplayData.weights.push(tByte.getFloat32());if((tTriangleLen=tByte.getUint16())>0)for(tDisplayData.triangles=[],l=0;l<tTriangleLen;l++)tDisplayData.triangles.push(tByte.getUint16());if((tVerticeLen=tByte.getUint16())>0)for(tDisplayData.vertices=[],l=0;l<tVerticeLen;l++)tDisplayData.vertices.push(tByte.getFloat32());if((tLengthLen=tByte.getUint16())>0)for(tDisplayData.lengths=[],l=0;l<tLengthLen;l++)tDisplayData.lengths.push(tByte.getFloat32())}tSkinData.slotArr.push(tSlotData)}this.skinDic[tSkinData.name]=tSkinData,this.skinDataArray.push(tSkinData)}1==tByte.getUint8()?(this.yReverseMatrix=new Matrix(1,0,0,-1,0,0),tRootBone&&tRootBone.setTempMatrix(this.yReverseMatrix)):tRootBone&&tRootBone.setTempMatrix(new Matrix),this.showSkinByIndex(this.boneSlotDic,0),this.event("complete",this)},__proto.getTexture=function(name){var tTexture=this.subTextureDic[name];return null==tTexture?this._mainTexture:tTexture},__proto.showSkinByIndex=function(boneSlotDic,skinIndex,freshDisplayIndex){if(void 0===freshDisplayIndex&&(freshDisplayIndex=!0),skinIndex<0&&skinIndex>=this.skinDataArray.length)return!1;var tBoneSlot,tSlotData,i=0,n=0,tSkinData=this.skinDataArray[skinIndex];if(tSkinData){for(i=0,n=tSkinData.slotArr.length;i<n;i++)(tSlotData=tSkinData.slotArr[i])&&(tBoneSlot=boneSlotDic[tSlotData.name])&&(tBoneSlot.showSlotData(tSlotData,freshDisplayIndex),freshDisplayIndex&&"undefined"!=tBoneSlot.attachmentName&&"null"!=tBoneSlot.attachmentName?tBoneSlot.showDisplayByName(tBoneSlot.attachmentName):tBoneSlot.showDisplayByIndex(tBoneSlot.displayIndex));return!0}return!1},__proto.getSkinIndexByName=function(skinName){for(var i=0,n=this.skinDataArray.length;i<n;i++)if(this.skinDataArray[i].name==skinName)return i;return-1},__proto.getGrahicsDataWithCache=function(aniIndex,frameIndex){return this._graphicsCache[aniIndex][frameIndex]},__proto.setGrahicsDataWithCache=function(aniIndex,frameIndex,graphics){this._graphicsCache[aniIndex][frameIndex]=graphics},__proto.destroy=function(){for(var $each_tTexture in this.subTextureDic)this.subTextureDic[$each_tTexture].destroy();for($each_tTexture in this._textureDic)this._textureDic[$each_tTexture].destroy();for(var i=0,n=this.skinSlotDisplayDataArr.length;i<n;i++)this.skinSlotDisplayDataArr[i].destory();this.skinSlotDisplayDataArr.length=0,this.url&&delete Templet.TEMPLET_DICTIONARY[this.url],this.dispose()},__proto.getAniNameByIndex=function(index){var tAni=this.getAnimation(index);return tAni?tAni.name:null},__getset(0,__proto,"rate",function(){return this._rate}),Templet.TEMPLET_DICTIONARY=null,Templet}(AnimationTemplet))}(0,0,Laya),function(window,document,Laya){Laya.un,Laya.uns;var __static=Laya.static,__class=Laya.class,__getset=Laya.getset,BlendMode=(Laya.__newvec,laya.webgl.canvas.BlendMode),HTMLCanvas=(laya.events.Event,laya.resource.HTMLCanvas),Handler=laya.utils.Handler,IndexBuffer2D=laya.webgl.utils.IndexBuffer2D,MathUtil=(laya.net.Loader,laya.maths.MathUtil),Matrix=laya.maths.Matrix,Render=laya.renders.Render,Shader=(laya.renders.RenderContext,laya.renders.RenderSprite,laya.webgl.shader.Shader),Sprite=laya.display.Sprite,Stat=(laya.display.Stage,laya.utils.Stat),Texture=laya.resource.Texture,Utils=(laya.utils.Timer,laya.utils.Utils),Value2D=laya.webgl.shader.d2.value.Value2D,VertexBuffer2D=laya.webgl.utils.VertexBuffer2D,WebGL=laya.webgl.WebGL,EmitterBase=(laya.webgl.WebGLContext,function(){function EmitterBase(){this._frameTime=0,this._emissionRate=60,this._emissionTime=0,this.minEmissionTime=1/60,this._particleTemplate=null}__class(EmitterBase,"laya.particle.emitter.EmitterBase");var __proto=EmitterBase.prototype;return __proto.start=function(duration){void 0===duration&&(duration=1.7976931348623157e308),0!=this._emissionRate&&(this._emissionTime=duration)},__proto.stop=function(){this._emissionTime=0},__proto.clear=function(){this._emissionTime=0},__proto.emit=function(){},__proto.advanceTime=function(passedTime){if(void 0===passedTime&&(passedTime=1),this._emissionTime-=passedTime,!(this._emissionTime<0||(this._frameTime+=passedTime,this._frameTime<this.minEmissionTime)))for(;this._frameTime>this.minEmissionTime;)this._frameTime-=this.minEmissionTime,this.emit()},__getset(0,__proto,"particleTemplate",null,function(particleTemplate){this._particleTemplate=particleTemplate}),__getset(0,__proto,"emissionRate",function(){return this._emissionRate},function(_emissionRate){_emissionRate<=0||(this._emissionRate=_emissionRate,_emissionRate>0&&(this.minEmissionTime=1/_emissionRate))}),EmitterBase}()),ParticleData=function(){function ParticleData(){this.position=null,this.velocity=null,this.startColor=null,this.endColor=null,this.sizeRotation=null,this.radius=null,this.radian=null,this.durationAddScale=NaN,this.time=NaN}return __class(ParticleData,"laya.particle.ParticleData"),ParticleData.Create=function(settings,position,velocity,time){var particleData=new ParticleData;particleData.position=position,MathUtil.scaleVector3(velocity,settings.emitterVelocitySensitivity,ParticleData._tempVelocity);var horizontalVelocity=MathUtil.lerp(settings.minHorizontalVelocity,settings.maxHorizontalVelocity,Math.random()),horizontalAngle=Math.random()*Math.PI*2;ParticleData._tempVelocity[0]+=horizontalVelocity*Math.cos(horizontalAngle),ParticleData._tempVelocity[2]+=horizontalVelocity*Math.sin(horizontalAngle),ParticleData._tempVelocity[1]+=MathUtil.lerp(settings.minVerticalVelocity,settings.maxVerticalVelocity,Math.random()),particleData.velocity=ParticleData._tempVelocity,particleData.startColor=ParticleData._tempStartColor,particleData.endColor=ParticleData._tempEndColor;var i=0;if(settings.disableColor){for(i=0;i<3;i++)particleData.startColor[i]=255,particleData.endColor[i]=255;particleData.startColor[i]=MathUtil.lerp(settings.minStartColor[i],settings.maxStartColor[i],Math.random()),particleData.endColor[i]=MathUtil.lerp(settings.minEndColor[i],settings.maxEndColor[i],Math.random())}else if(settings.colorComponentInter)for(i=0;i<4;i++)particleData.startColor[i]=MathUtil.lerp(settings.minStartColor[i],settings.maxStartColor[i],Math.random()),particleData.endColor[i]=MathUtil.lerp(settings.minEndColor[i],settings.maxEndColor[i],Math.random());else MathUtil.lerpVector4(settings.minStartColor,settings.maxStartColor,Math.random(),particleData.startColor),MathUtil.lerpVector4(settings.minEndColor,settings.maxEndColor,Math.random(),particleData.endColor);particleData.sizeRotation=ParticleData._tempSizeRotation;var sizeRandom=Math.random();particleData.sizeRotation[0]=MathUtil.lerp(settings.minStartSize,settings.maxStartSize,sizeRandom),particleData.sizeRotation[1]=MathUtil.lerp(settings.minEndSize,settings.maxEndSize,sizeRandom),particleData.sizeRotation[2]=MathUtil.lerp(settings.minRotateSpeed,settings.maxRotateSpeed,Math.random()),particleData.radius=ParticleData._tempRadius;var radiusRandom=Math.random();particleData.radius[0]=MathUtil.lerp(settings.minStartRadius,settings.maxStartRadius,radiusRandom),particleData.radius[1]=MathUtil.lerp(settings.minEndRadius,settings.maxEndRadius,radiusRandom),particleData.radian=ParticleData._tempRadian,particleData.radian[0]=MathUtil.lerp(settings.minHorizontalStartRadian,settings.maxHorizontalStartRadian,Math.random()),particleData.radian[1]=MathUtil.lerp(settings.minVerticalStartRadian,settings.maxVerticalStartRadian,Math.random());var useEndRadian=settings.useEndRadian;return particleData.radian[2]=useEndRadian?MathUtil.lerp(settings.minHorizontalEndRadian,settings.maxHorizontalEndRadian,Math.random()):particleData.radian[0],particleData.radian[3]=useEndRadian?MathUtil.lerp(settings.minVerticalEndRadian,settings.maxVerticalEndRadian,Math.random()):particleData.radian[1],particleData.durationAddScale=settings.ageAddScale*Math.random(),particleData.time=time,particleData},__static(ParticleData,["_tempVelocity",function(){return this._tempVelocity=new Float32Array(3)},"_tempStartColor",function(){return this._tempStartColor=new Float32Array(4)},"_tempEndColor",function(){return this._tempEndColor=new Float32Array(4)},"_tempSizeRotation",function(){return this._tempSizeRotation=new Float32Array(3)},"_tempRadius",function(){return this._tempRadius=new Float32Array(2)},"_tempRadian",function(){return this._tempRadian=new Float32Array(4)}]),ParticleData}(),ParticleSetting=(function(){function ParticleEmitter(templet,particlesPerSecond,initialPosition){this._templet=null,this._timeBetweenParticles=NaN,this._previousPosition=null,this._timeLeftOver=0,this._tempVelocity=new Float32Array([0,0,0]),this._tempPosition=new Float32Array([0,0,0]),this._templet=templet,this._timeBetweenParticles=1/particlesPerSecond,this._previousPosition=initialPosition}__class(ParticleEmitter,"laya.particle.ParticleEmitter"),ParticleEmitter.prototype.update=function(elapsedTime,newPosition){if((elapsedTime/=1e3)>0){MathUtil.subtractVector3(newPosition,this._previousPosition,this._tempVelocity),MathUtil.scaleVector3(this._tempVelocity,1/elapsedTime,this._tempVelocity);for(var timeToSpend=this._timeLeftOver+elapsedTime,currentTime=-this._timeLeftOver;timeToSpend>this._timeBetweenParticles;)currentTime+=this._timeBetweenParticles,timeToSpend-=this._timeBetweenParticles,MathUtil.lerpVector3(this._previousPosition,newPosition,currentTime/elapsedTime,this._tempPosition),this._templet.addParticleArray(this._tempPosition,this._tempVelocity);this._timeLeftOver=timeToSpend}this._previousPosition[0]=newPosition[0],this._previousPosition[1]=newPosition[1],this._previousPosition[2]=newPosition[2]}}(),function(){function ParticleSetting(){this.textureName=null,this.textureCount=1,this.maxPartices=100,this.duration=1,this.ageAddScale=0,this.emitterVelocitySensitivity=1,this.minStartSize=100,this.maxStartSize=100,this.minEndSize=100,this.maxEndSize=100,this.minHorizontalVelocity=0,this.maxHorizontalVelocity=0,this.minVerticalVelocity=0,this.maxVerticalVelocity=0,this.endVelocity=1,this.minRotateSpeed=0,this.maxRotateSpeed=0,this.minStartRadius=0,this.maxStartRadius=0,this.minEndRadius=0,this.maxEndRadius=0,this.minHorizontalStartRadian=0,this.maxHorizontalStartRadian=0,this.minVerticalStartRadian=0,this.maxVerticalStartRadian=0,this.useEndRadian=!0,this.minHorizontalEndRadian=0,this.maxHorizontalEndRadian=0,this.minVerticalEndRadian=0,this.maxVerticalEndRadian=0,this.colorComponentInter=!1,this.disableColor=!1,this.blendState=0,this.emitterType="null",this.emissionRate=0,this.sphereEmitterRadius=1,this.sphereEmitterVelocity=0,this.sphereEmitterVelocityAddVariance=0,this.ringEmitterRadius=30,this.ringEmitterVelocity=0,this.ringEmitterVelocityAddVariance=0,this.ringEmitterUp=2,this.gravity=new Float32Array([0,0,0]),this.minStartColor=new Float32Array([1,1,1,1]),this.maxStartColor=new Float32Array([1,1,1,1]),this.minEndColor=new Float32Array([1,1,1,1]),this.maxEndColor=new Float32Array([1,1,1,1]),this.pointEmitterPosition=new Float32Array([0,0,0]),this.pointEmitterPositionVariance=new Float32Array([0,0,0]),this.pointEmitterVelocity=new Float32Array([0,0,0]),this.pointEmitterVelocityAddVariance=new Float32Array([0,0,0]),this.boxEmitterCenterPosition=new Float32Array([0,0,0]),this.boxEmitterSize=new Float32Array([0,0,0]),this.boxEmitterVelocity=new Float32Array([0,0,0]),this.boxEmitterVelocityAddVariance=new Float32Array([0,0,0]),this.sphereEmitterCenterPosition=new Float32Array([0,0,0]),this.ringEmitterCenterPosition=new Float32Array([0,0,0]),this.positionVariance=new Float32Array([0,0,0])}return __class(ParticleSetting,"laya.particle.ParticleSetting"),ParticleSetting.checkSetting=function(setting){var key;for(key in ParticleSetting._defaultSetting)setting.hasOwnProperty(key)||(setting[key]=ParticleSetting._defaultSetting[key])},__static(ParticleSetting,["_defaultSetting",function(){return this._defaultSetting=new ParticleSetting}]),ParticleSetting}()),ParticleTemplateBase=function(){function ParticleTemplateBase(){this.settings=null,this.texture=null}return __class(ParticleTemplateBase,"laya.particle.ParticleTemplateBase"),ParticleTemplateBase.prototype.addParticleArray=function(position,velocity){},ParticleTemplateBase}(),CanvasShader=function(){function CanvasShader(){this.u_Duration=NaN,this.u_EndVelocity=NaN,this.u_Gravity=null,this.a_Position=null,this.a_Velocity=null,this.a_StartColor=null,this.a_EndColor=null,this.a_SizeRotation=null,this.a_Radius=null,this.a_Radian=null,this.a_AgeAddScale=NaN,this.gl_Position=null,this.v_Color=null,this.oSize=NaN,this._color=new Float32Array(4),this._position=new Float32Array(3)}__class(CanvasShader,"laya.particle.particleUtils.CanvasShader");var __proto=CanvasShader.prototype;return __proto.getLen=function(position){return Math.sqrt(position[0]*position[0]+position[1]*position[1]+position[2]*position[2])},__proto.ComputeParticlePosition=function(position,velocity,age,normalizedAge){this._position[0]=position[0],this._position[1]=position[1],this._position[2]=position[2];var startVelocity=this.getLen(velocity),velocityIntegral=startVelocity*normalizedAge+(startVelocity*this.u_EndVelocity-startVelocity)*normalizedAge*normalizedAge/2,lenVelocity=NaN;lenVelocity=this.getLen(velocity);var i=0;for(3,i=0;i<3;i++)this._position[i]+=this._position[i]+velocity[i]/lenVelocity*velocityIntegral*this.u_Duration,this._position[i]+=this.u_Gravity[i]*age*normalizedAge;var radius=MathUtil.lerp(this.a_Radius[0],this.a_Radius[1],normalizedAge),radianHorizontal=MathUtil.lerp(this.a_Radian[0],this.a_Radian[2],normalizedAge),radianVertical=MathUtil.lerp(this.a_Radian[1],this.a_Radian[3],normalizedAge),r=Math.cos(radianVertical)*radius;return this._position[1]+=Math.sin(radianVertical)*radius,this._position[0]+=Math.cos(radianHorizontal)*r,this._position[2]+=Math.sin(radianHorizontal)*r,new Float32Array([this._position[0],this._position[1],0,1])},__proto.ComputeParticleSize=function(startSize,endSize,normalizedAge){return MathUtil.lerp(startSize,endSize,normalizedAge)},__proto.ComputeParticleRotation=function(rot,age){return rot*age},__proto.ComputeParticleColor=function(startColor,endColor,normalizedAge){var rst=this._color;return MathUtil.lerpVector4(startColor,endColor,normalizedAge,rst),rst[3]=rst[3]*normalizedAge*(1-normalizedAge)*(1-normalizedAge)*6.7,rst},__proto.clamp=function(value,min,max){return value<min?min:value>max?max:value},__proto.getData=function(age){age*=1+this.a_AgeAddScale;var normalizedAge=this.clamp(age/this.u_Duration,0,1);this.gl_Position=this.ComputeParticlePosition(this.a_Position,this.a_Velocity,age,normalizedAge);var pSize=this.ComputeParticleSize(this.a_SizeRotation[0],this.a_SizeRotation[1],normalizedAge),rotation=this.ComputeParticleRotation(this.a_SizeRotation[2],age);this.v_Color=this.ComputeParticleColor(this.a_StartColor,this.a_EndColor,normalizedAge);var matric=new Matrix,scale=NaN;scale=pSize/this.oSize*2,matric.scale(scale,scale),matric.rotate(rotation),matric.setTranslate(this.gl_Position[0],-this.gl_Position[1]);var alpha=NaN;return alpha=this.v_Color[3],[this.v_Color,alpha,matric,this.v_Color[0]*alpha,this.v_Color[1]*alpha,this.v_Color[2]*alpha]},CanvasShader}(),CMDParticle=function(){function CMDParticle(){this.maxIndex=0,this.cmds=null,this.id=0}return __class(CMDParticle,"laya.particle.particleUtils.CMDParticle"),CMDParticle.prototype.setCmds=function(cmds){this.cmds=cmds,this.maxIndex=cmds.length-1},CMDParticle}(),PicTool=function(){function PicTool(){}return __class(PicTool,"laya.particle.particleUtils.PicTool"),PicTool.getCanvasPic=function(img,color){img=img.bitmap;var canvas=new HTMLCanvas("2D"),ctx=canvas.getContext("2d");canvas.size(img.width,img.height);var red=color>>16&255,green=color>>8&255,blue=255&color;if(Render.isConchApp&&ctx.setFilter(red/255,green/255,blue/255,0),ctx.drawImage(img.source,0,0),!Render.isConchApp){for(var imgdata=ctx.getImageData(0,0,canvas.width,canvas.height),data=imgdata.data,i=0,n=data.length;i<n;i+=4)0!=data[i+3]&&(data[i]=red,data[i+1]=green,data[i+2]=blue);ctx.putImageData(imgdata,0,0)}return canvas},PicTool.getRGBPic=function(img){return[new Texture(PicTool.getCanvasPic(img,16711680)),new Texture(PicTool.getCanvasPic(img,65280)),new Texture(PicTool.getCanvasPic(img,255))]},PicTool}(),Emitter2D=function(_super){function Emitter2D(_template){this.setting=null,this._posRange=null,this._canvasTemplate=null,this._emitFun=null,Emitter2D.__super.call(this),this.template=_template}__class(Emitter2D,"laya.particle.emitter.Emitter2D",_super);var __proto=Emitter2D.prototype;return __proto.emit=function(){_super.prototype.emit.call(this),null!=this._emitFun&&this._emitFun()},__proto.getRandom=function(value){return(2*Math.random()-1)*value},__proto.webGLEmit=function(){var pos=new Float32Array(3);pos[0]=this.getRandom(this._posRange[0]),pos[1]=this.getRandom(this._posRange[1]),pos[2]=this.getRandom(this._posRange[2]);var v=new Float32Array(3);v[0]=0,v[1]=0,v[2]=0,this._particleTemplate.addParticleArray(pos,v)},__proto.canvasEmit=function(){var pos=new Float32Array(3);pos[0]=this.getRandom(this._posRange[0]),pos[1]=this.getRandom(this._posRange[1]),pos[2]=this.getRandom(this._posRange[2]);var v=new Float32Array(3);v[0]=0,v[1]=0,v[2]=0,this._particleTemplate.addParticleArray(pos,v)},__getset(0,__proto,"template",function(){return this._particleTemplate},function(template){this._particleTemplate=template,template||(this._emitFun=null,this.setting=null,this._posRange=null),this.setting=template.settings,this._posRange=this.setting.positionVariance,this._particleTemplate instanceof laya.particle.ParticleTemplate2D?this._emitFun=this.webGLEmit:this._particleTemplate instanceof laya.particle.ParticleTemplateCanvas&&(this._canvasTemplate=template,this._emitFun=this.canvasEmit)}),Emitter2D}(EmitterBase),ParticleTemplateWebGL=function(_super){function ParticleTemplateWebGL(parSetting){this._vertices=null,this._vertexBuffer=null,this._indexBuffer=null,this._floatCountPerVertex=29,this._firstActiveElement=0,this._firstNewElement=0,this._firstFreeElement=0,this._firstRetiredElement=0,this._currentTime=0,this._drawCounter=0,ParticleTemplateWebGL.__super.call(this),this.settings=parSetting}__class(ParticleTemplateWebGL,"laya.particle.ParticleTemplateWebGL",_super);var __proto=ParticleTemplateWebGL.prototype;return __proto.initialize=function(){this._vertices=new Float32Array(this.settings.maxPartices*this._floatCountPerVertex*4);for(var particleOffset=0,i=0;i<this.settings.maxPartices;i++){var random=Math.random(),cornerYSegement=this.settings.textureCount?1/this.settings.textureCount:1,cornerY=NaN;for(cornerY=0;cornerY<this.settings.textureCount&&!(random<cornerY+cornerYSegement);cornerY+=cornerYSegement);particleOffset=i*this._floatCountPerVertex*4,this._vertices[particleOffset+0*this._floatCountPerVertex+0]=-1,this._vertices[particleOffset+0*this._floatCountPerVertex+1]=-1,this._vertices[particleOffset+0*this._floatCountPerVertex+2]=0,this._vertices[particleOffset+0*this._floatCountPerVertex+3]=cornerY,this._vertices[particleOffset+1*this._floatCountPerVertex+0]=1,this._vertices[particleOffset+1*this._floatCountPerVertex+1]=-1,this._vertices[particleOffset+1*this._floatCountPerVertex+2]=1,this._vertices[particleOffset+1*this._floatCountPerVertex+3]=cornerY,this._vertices[particleOffset+2*this._floatCountPerVertex+0]=1,this._vertices[particleOffset+2*this._floatCountPerVertex+1]=1,this._vertices[particleOffset+2*this._floatCountPerVertex+2]=1,this._vertices[particleOffset+2*this._floatCountPerVertex+3]=cornerY+cornerYSegement,this._vertices[particleOffset+3*this._floatCountPerVertex+0]=-1,this._vertices[particleOffset+3*this._floatCountPerVertex+1]=1,this._vertices[particleOffset+3*this._floatCountPerVertex+2]=0,this._vertices[particleOffset+3*this._floatCountPerVertex+3]=cornerY+cornerYSegement}},__proto.loadContent=function(){},__proto.update=function(elapsedTime){this._currentTime+=elapsedTime/1e3,this.retireActiveParticles(),this.freeRetiredParticles(),this._firstActiveElement==this._firstFreeElement&&(this._currentTime=0),this._firstRetiredElement==this._firstActiveElement&&(this._drawCounter=0)},__proto.retireActiveParticles=function(){for(var particleDuration=this.settings.duration;this._firstActiveElement!=this._firstNewElement;){var index=this._firstActiveElement*this._floatCountPerVertex*4+28;if(this._currentTime-this._vertices[index]<particleDuration)break;this._vertices[index]=this._drawCounter,++this._firstActiveElement>=this.settings.maxPartices&&(this._firstActiveElement=0)}},__proto.freeRetiredParticles=function(){for(;this._firstRetiredElement!=this._firstActiveElement&&!(this._drawCounter-this._vertices[this._firstRetiredElement*this._floatCountPerVertex*4+28]<3);)++this._firstRetiredElement>=this.settings.maxPartices&&(this._firstRetiredElement=0)},__proto.addNewParticlesToVertexBuffer=function(){},__proto.addParticleArray=function(position,velocity){var nextFreeParticle=this._firstFreeElement+1;if(nextFreeParticle>=this.settings.maxPartices&&(nextFreeParticle=0),nextFreeParticle!==this._firstRetiredElement){for(var particleData=ParticleData.Create(this.settings,position,velocity,this._currentTime),startIndex=this._firstFreeElement*this._floatCountPerVertex*4,i=0;i<4;i++){var j=0,offset=0;for(j=0,offset=4;j<3;j++)this._vertices[startIndex+i*this._floatCountPerVertex+offset+j]=particleData.position[j];for(j=0,offset=7;j<3;j++)this._vertices[startIndex+i*this._floatCountPerVertex+offset+j]=particleData.velocity[j];for(j=0,offset=10;j<4;j++)this._vertices[startIndex+i*this._floatCountPerVertex+offset+j]=particleData.startColor[j];for(j=0,offset=14;j<4;j++)this._vertices[startIndex+i*this._floatCountPerVertex+offset+j]=particleData.endColor[j];for(j=0,offset=18;j<3;j++)this._vertices[startIndex+i*this._floatCountPerVertex+offset+j]=particleData.sizeRotation[j];for(j=0,offset=21;j<2;j++)this._vertices[startIndex+i*this._floatCountPerVertex+offset+j]=particleData.radius[j];for(j=0,offset=23;j<4;j++)this._vertices[startIndex+i*this._floatCountPerVertex+offset+j]=particleData.radian[j];this._vertices[startIndex+i*this._floatCountPerVertex+27]=particleData.durationAddScale,this._vertices[startIndex+i*this._floatCountPerVertex+28]=particleData.time}this._firstFreeElement=nextFreeParticle}},ParticleTemplateWebGL}(ParticleTemplateBase),ParticleTemplateCanvas=function(_super){function ParticleTemplateCanvas(particleSetting){this._ready=!1,this.textureList=[],this.particleList=[],this.pX=0,this.pY=0,this.activeParticles=[],this.deadParticles=[],this.iList=[],this._maxNumParticles=0,this.textureWidth=NaN,this.dTextureWidth=NaN,this.colorChange=!0,this.step=1/60,this.canvasShader=new CanvasShader,ParticleTemplateCanvas.__super.call(this),this.settings=particleSetting,this._maxNumParticles=particleSetting.maxPartices,this.texture=new Texture,this.texture.on("loaded",this,this._textureLoaded),this.texture.load(particleSetting.textureName)}__class(ParticleTemplateCanvas,"laya.particle.ParticleTemplateCanvas",_super);var __proto=ParticleTemplateCanvas.prototype;return __proto._textureLoaded=function(e){this.setTexture(this.texture),this._ready=!0},__proto.clear=function(clearTexture){void 0===clearTexture&&(clearTexture=!0),this.deadParticles.length=0,this.activeParticles.length=0,this.textureList.length=0},__proto.setTexture=function(texture){this.texture=texture,this.textureWidth=texture.width,this.dTextureWidth=1/this.textureWidth,this.pX=.5*-texture.width,this.pY=.5*-texture.height,this.textureList=ParticleTemplateCanvas.changeTexture(texture,this.textureList),this.particleList.length=0,this.deadParticles.length=0,this.activeParticles.length=0},__proto._createAParticleData=function(position,velocity){this.canvasShader.u_EndVelocity=this.settings.endVelocity,this.canvasShader.u_Gravity=this.settings.gravity,this.canvasShader.u_Duration=this.settings.duration;var particle;particle=ParticleData.Create(this.settings,position,velocity,0),this.canvasShader.a_Position=particle.position,this.canvasShader.a_Velocity=particle.velocity,this.canvasShader.a_StartColor=particle.startColor,this.canvasShader.a_EndColor=particle.endColor,this.canvasShader.a_SizeRotation=particle.sizeRotation,this.canvasShader.a_Radius=particle.radius,this.canvasShader.a_Radian=particle.radian,this.canvasShader.a_AgeAddScale=particle.durationAddScale,this.canvasShader.oSize=this.textureWidth;var rst=new CMDParticle,i=0,len=this.settings.duration/(1+particle.durationAddScale),params=[];for(i=0;i<len;i+=this.step)params.push(this.canvasShader.getData(i));return rst.id=this.particleList.length,this.particleList.push(rst),rst.setCmds(params),rst},__proto.addParticleArray=function(position,velocity){if(this._ready){var tParticle;this.particleList.length<this._maxNumParticles?(tParticle=this._createAParticleData(position,velocity),this.iList[tParticle.id]=0,this.activeParticles.push(tParticle)):this.deadParticles.length>0&&(tParticle=this.deadParticles.pop(),this.iList[tParticle.id]=0,this.activeParticles.push(tParticle))}},__proto.advanceTime=function(passedTime){if(void 0===passedTime&&(passedTime=1),this._ready){var tcmd,particleList=this.activeParticles,pool=this.deadParticles,i=0,len=particleList.length,tI=0,iList=this.iList;for(i=len-1;i>-1;i--)(tI=iList[(tcmd=particleList[i]).id])>=tcmd.maxIndex?(tI=0,particleList.splice(i,1),pool.push(tcmd)):tI+=1,iList[tcmd.id]=tI}},__proto.render=function(context,x,y){this._ready&&(this.activeParticles.length<1||this.textureList.length<2||(this.settings.disableColor?this.noColorRender(context,x,y):this.canvasRender(context,x,y)))},__proto.noColorRender=function(context,x,y){var tcmd,tParam,particleList=this.activeParticles,i=0,len=particleList.length,tAlpha=NaN,px=this.pX,py=this.pY,pw=2*-px,ph=2*-py,tI=0,iList=(this.textureList,this.iList),preAlpha=NaN;for(context.translate(x,y),preAlpha=context.ctx.globalAlpha,i=0;i<len;i++)tI=iList[(tcmd=particleList[i]).id],(tParam=tcmd.cmds[tI])&&((tAlpha=tParam[1])<=.01||(context.setAlpha(preAlpha*tAlpha),context.drawTextureWithTransform(this.texture,px,py,pw,ph,tParam[2],1)));context.setAlpha(preAlpha),context.translate(-x,-y)},__proto.canvasRender=function(context,x,y){var tcmd,tParam,preB,particleList=this.activeParticles,i=0,len=particleList.length,px=this.pX,py=this.pY,pw=2*-px,ph=2*-py,tI=0,textureList=this.textureList,iList=this.iList,preAlpha=NaN;for(context.translate(x,y),preAlpha=context.ctx.globalAlpha,preB=context.ctx.globalCompositeOperation,context.blendMode("lighter"),i=0;i<len;i++)tI=iList[(tcmd=particleList[i]).id],(tParam=tcmd.cmds[tI])&&(tParam[1]<=.01||(context.save(),context.transformByMatrix(tParam[2]),tParam[3]>.01&&(context.setAlpha(preAlpha*tParam[3]),context.drawTexture(textureList[0],px,py,pw,ph)),tParam[4]>.01&&(context.setAlpha(preAlpha*tParam[4]),context.drawTexture(textureList[1],px,py,pw,ph)),tParam[5]>.01&&(context.setAlpha(preAlpha*tParam[5]),context.drawTexture(textureList[2],px,py,pw,ph)),context.restore()));context.setAlpha(preAlpha),context.translate(-x,-y),context.blendMode(preB)},ParticleTemplateCanvas.changeTexture=function(texture,rst,settings){return rst||(rst=[]),rst.length=0,settings&&settings.disableColor?rst.push(texture,texture,texture):Utils.copyArray(rst,PicTool.getRGBPic(texture)),rst},ParticleTemplateCanvas}(ParticleTemplateBase),ParticleTemplate2D=function(_super){function ParticleTemplate2D(parSetting){this._vertexBuffer2D=null,this._indexBuffer2D=null,this.x=0,this.y=0,this._blendFn=null,this._startTime=0,this.sv=new ParticleShaderValue,ParticleTemplate2D.__super.call(this,parSetting);var _this=this;Laya.loader.load(this.settings.textureName,Handler.create(null,function(texture){texture.bitmap.enableMerageInAtlas=!1,_this.texture=texture})),this.sv.u_Duration=this.settings.duration,this.sv.u_Gravity=this.settings.gravity,this.sv.u_EndVelocity=this.settings.endVelocity,this._blendFn=BlendMode.fns[parSetting.blendState],this.initialize(),this._vertexBuffer=this._vertexBuffer2D=VertexBuffer2D.create(-1,35048),this._indexBuffer=this._indexBuffer2D=IndexBuffer2D.create(35044),this.loadContent()}__class(ParticleTemplate2D,"laya.particle.ParticleTemplate2D",_super);var __proto=ParticleTemplate2D.prototype;return Laya.imps(__proto,{"laya.webgl.submit.ISubmit":!0}),__proto.getRenderType=function(){return-111},__proto.releaseRender=function(){},__proto.addParticleArray=function(position,velocity){position[0]+=this.x,position[1]+=this.y,_super.prototype.addParticleArray.call(this,position,velocity)},__proto.loadContent=function(){for(var indexes=new Uint16Array(6*this.settings.maxPartices),i=0;i<this.settings.maxPartices;i++)indexes[6*i+0]=4*i+0,indexes[6*i+1]=4*i+1,indexes[6*i+2]=4*i+2,indexes[6*i+3]=4*i+0,indexes[6*i+4]=4*i+2,indexes[6*i+5]=4*i+3;this._indexBuffer2D.clear(),this._indexBuffer2D.append(indexes),this._indexBuffer2D.upload()},__proto.addNewParticlesToVertexBuffer=function(){this._vertexBuffer2D.clear(),this._vertexBuffer2D.append(this._vertices);var start=0;this._firstNewElement<this._firstFreeElement?(start=4*this._firstNewElement*this._floatCountPerVertex*4,this._vertexBuffer2D.subUpload(start,start,start+4*(this._firstFreeElement-this._firstNewElement)*this._floatCountPerVertex*4)):(start=4*this._firstNewElement*this._floatCountPerVertex*4,this._vertexBuffer2D.subUpload(start,start,start+4*(this.settings.maxPartices-this._firstNewElement)*this._floatCountPerVertex*4),this._firstFreeElement>0&&(this._vertexBuffer2D.setNeedUpload(),this._vertexBuffer2D.subUpload(0,0,4*this._firstFreeElement*this._floatCountPerVertex*4))),this._firstNewElement=this._firstFreeElement},__proto.renderSubmit=function(){if(this.texture&&this.texture.loaded){if(this.update(Laya.timer.delta),this.sv.u_CurrentTime=this._currentTime,this._firstNewElement!=this._firstFreeElement&&this.addNewParticlesToVertexBuffer(),this.blend(),this._firstActiveElement!=this._firstFreeElement){WebGL.mainContext;this._vertexBuffer2D.bind(this._indexBuffer2D),this.sv.u_texture=this.texture.source,this.sv.upload(),this._firstActiveElement<this._firstFreeElement?WebGL.mainContext.drawElements(4,6*(this._firstFreeElement-this._firstActiveElement),5123,6*this._firstActiveElement*2):(WebGL.mainContext.drawElements(4,6*(this.settings.maxPartices-this._firstActiveElement),5123,6*this._firstActiveElement*2),this._firstFreeElement>0&&WebGL.mainContext.drawElements(4,6*this._firstFreeElement,5123,0)),Stat.drawCall++}this._drawCounter++}return 1},__proto.blend=function(){if(BlendMode.activeBlendFunction!==this._blendFn){var gl=WebGL.mainContext;gl.enable(3042),this._blendFn(gl),BlendMode.activeBlendFunction=this._blendFn}},__proto.dispose=function(){this._indexBuffer2D.dispose()},ParticleTemplate2D.activeBlendType=-1,ParticleTemplate2D}(ParticleTemplateWebGL),ParticleShaderValue=function(_super){function ParticleShaderValue(){this.a_CornerTextureCoordinate=[4,5126,!1,116,0],this.a_Position=[3,5126,!1,116,16],this.a_Velocity=[3,5126,!1,116,28],this.a_StartColor=[4,5126,!1,116,40],this.a_EndColor=[4,5126,!1,116,56],this.a_SizeRotation=[3,5126,!1,116,72],this.a_Radius=[2,5126,!1,116,84],this.a_Radian=[4,5126,!1,116,92],this.a_AgeAddScale=[1,5126,!1,116,108],this.a_Time=[1,5126,!1,116,112],this.u_CurrentTime=NaN,this.u_Duration=NaN,this.u_Gravity=null,this.u_EndVelocity=NaN,this.u_texture=null,ParticleShaderValue.__super.call(this,0,0)}return __class(ParticleShaderValue,"laya.particle.shader.value.ParticleShaderValue",_super),ParticleShaderValue.prototype.upload=function(){this.refresh(),ParticleShaderValue.pShader.upload(this)},__static(ParticleShaderValue,["pShader",function(){return this.pShader=new ParticleShader}]),ParticleShaderValue}(Value2D),ParticleShader=(function(_super){function Particle2D(setting){this._matrix4=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this._particleTemplate=null,this._canvasTemplate=null,this._emitter=null,this.autoPlay=!0,Particle2D.__super.call(this),setting&&this.setParticleSetting(setting)}__class(Particle2D,"laya.particle.Particle2D",_super);var __proto=Particle2D.prototype;__proto.load=function(url){Laya.loader.load(url,Handler.create(this,this.setParticleSetting),null,"json")},__proto.setParticleSetting=function(setting){var _$this=this;if(!setting)return this.stop();if(ParticleSetting.checkSetting(setting),window.ConchParticleTemplate2D&&!Render.isWebGL||(this.customRenderEnable=!0),Render.isWebGL)this._particleTemplate=new ParticleTemplate2D(setting),this.graphics._saveToCmd(Render.context._drawParticle,[this._particleTemplate]);else{if(Render.isConchApp&&window.ConchParticleTemplate2D){this._particleTemplate=new ConchParticleTemplate2D;var _this=this;return Laya.loader.load(setting.textureName,Handler.create(null,function(texture){_this._particleTemplate.texture=texture,_this._particleTemplate.settings=setting,Render.isConchNode?_this.graphics.drawParticle(_this._particleTemplate):_this.graphics._saveToCmd(Render.context._drawParticle,[_$this._particleTemplate])})),this._emitter={start:function(){}},this.play=this._particleTemplate.play.bind(this._particleTemplate),this.stop=this._particleTemplate.stop.bind(this._particleTemplate),void(this.autoPlay&&this.play())}this._particleTemplate=this._canvasTemplate=new ParticleTemplateCanvas(setting)}this._emitter?this._emitter.template=this._particleTemplate:this._emitter=new Emitter2D(this._particleTemplate),this.autoPlay&&(this.emitter.start(),this.play())},__proto.play=function(){Laya.timer.frameLoop(1,this,this._loop)},__proto.stop=function(){Laya.timer.clear(this,this._loop)},__proto._loop=function(){this.advanceTime(1/60)},__proto.advanceTime=function(passedTime){void 0===passedTime&&(passedTime=1),this._canvasTemplate&&this._canvasTemplate.advanceTime(passedTime),this._emitter&&this._emitter.advanceTime(passedTime)},__proto.customRender=function(context,x,y){Render.isWebGL&&(this._matrix4[0]=context.ctx._curMat.a,this._matrix4[1]=context.ctx._curMat.b,this._matrix4[4]=context.ctx._curMat.c,this._matrix4[5]=context.ctx._curMat.d,this._matrix4[12]=context.ctx._curMat.tx,this._matrix4[13]=context.ctx._curMat.ty,this._particleTemplate.sv.u_mmat=this._matrix4),this._canvasTemplate&&this._canvasTemplate.render(context,x,y)},__proto.destroy=function(destroyChild){void 0===destroyChild&&(destroyChild=!0),this._particleTemplate instanceof laya.particle.ParticleTemplate2D&&this._particleTemplate.dispose(),_super.prototype.destroy.call(this,destroyChild)},__getset(0,__proto,"url",null,function(url){this.load(url)}),__getset(0,__proto,"emitter",function(){return this._emitter})}(Sprite),function(_super){function ParticleShader(){ParticleShader.__super.call(this,ParticleShader.vs,ParticleShader.ps,"ParticleShader")}return __class(ParticleShader,"laya.particle.shader.ParticleShader",_super),__static(ParticleShader,["vs",function(){return this.vs="attribute vec4 a_CornerTextureCoordinate;\nattribute vec3 a_Position;\nattribute vec3 a_Velocity;\nattribute vec4 a_StartColor;\nattribute vec4 a_EndColor;\nattribute vec3 a_SizeRotation;\nattribute vec2 a_Radius;\nattribute vec4 a_Radian;\nattribute float a_AgeAddScale;\nattribute float a_Time;\n\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\n\nuniform float u_CurrentTime;\nuniform float u_Duration;\nuniform float u_EndVelocity;\nuniform vec3 u_Gravity;\n\n#ifdef PARTICLE3D\n uniform mat4 u_WorldMat;\n uniform mat4 u_View;\n uniform mat4 u_Projection;\n uniform vec2 u_ViewportScale;\n#else\n uniform vec2 size;\n uniform mat4 mmat;\n uniform mat4 u_mmat;\n#endif\n\nvec4 ComputeParticlePosition(in vec3 position, in vec3 velocity,in float age,in float normalizedAge)\n{\n\n   float startVelocity = length(velocity);//起始标量速度\n   float endVelocity = startVelocity * u_EndVelocity;//结束标量速度\n\n   float velocityIntegral = startVelocity * normalizedAge +(endVelocity - startVelocity) * normalizedAge *normalizedAge/2.0;//计算当前速度的标量（单位空间），vt=v0*t+(1/2)*a*(t^2)\n   \n   vec3 addPosition = normalize(velocity) * velocityIntegral * u_Duration;//计算受自身速度影响的位置，转换标量到矢量    \n   addPosition += u_Gravity * age * normalizedAge;//计算受重力影响的位置\n   \n   float radius=mix(a_Radius.x, a_Radius.y, normalizedAge); //计算粒子受半径和角度影响（无需计算角度和半径时，可用宏定义优化屏蔽此计算）\n   float radianHorizontal =mix(a_Radian.x,a_Radian.z,normalizedAge);\n   float radianVertical =mix(a_Radian.y,a_Radian.w,normalizedAge);\n   \n   float r =cos(radianVertical)* radius;\n   addPosition.y += sin(radianVertical) * radius;\n\t\n   addPosition.x += cos(radianHorizontal) *r;\n   addPosition.z += sin(radianHorizontal) *r;\n  \n   #ifdef PARTICLE3D\n   position+=addPosition;\n    return  u_Projection*u_View*u_WorldMat*(vec4(position, 1.0));\n   #else\n   addPosition.y=-addPosition.y;//2D粒子位置更新需要取负，2D粒子坐标系Y轴正向朝上\n   position+=addPosition;\n    return  vec4(position,1.0);\n   #endif\n}\n\nfloat ComputeParticleSize(in float startSize,in float endSize, in float normalizedAge)\n{    \n    float size = mix(startSize, endSize, normalizedAge);\n    \n\t#ifdef PARTICLE3D\n    //Project the size into screen coordinates.\n     return size * u_Projection[1][1];\n\t#else\n\t return size;\n\t#endif\n}\n\nmat2 ComputeParticleRotation(in float rot,in float age)\n{    \n    float rotation =rot * age;\n    //计算2x2旋转矩阵.\n    float c = cos(rotation);\n    float s = sin(rotation);\n    return mat2(c, -s, s, c);\n}\n\nvec4 ComputeParticleColor(in vec4 startColor,in vec4 endColor,in float normalizedAge)\n{\n\tvec4 color=mix(startColor,endColor,normalizedAge);\n    //硬编码设置，使粒子淡入很快，淡出很慢,6.7的缩放因子把置归一在0到1之间，可以谷歌x*(1-x)*(1-x)*6.7的制图表\n    color.a *= normalizedAge * (1.0-normalizedAge) * (1.0-normalizedAge) * 6.7;\n   \n    return color;\n}\n\nvoid main()\n{\n   float age = u_CurrentTime - a_Time;\n   age *= 1.0 + a_AgeAddScale;\n   float normalizedAge = clamp(age / u_Duration,0.0,1.0);\n   gl_Position = ComputeParticlePosition(a_Position, a_Velocity, age, normalizedAge);//计算粒子位置\n   float pSize = ComputeParticleSize(a_SizeRotation.x,a_SizeRotation.y, normalizedAge);\n   mat2 rotation = ComputeParticleRotation(a_SizeRotation.z, age);\n\t\n   #ifdef PARTICLE3D\n\tgl_Position.xy += (rotation*a_CornerTextureCoordinate.xy) * pSize * u_ViewportScale;\n   #else\n    mat4 mat=u_mmat*mmat;\n    gl_Position=vec4((mat*gl_Position).xy,0.0,1.0);\n\tgl_Position.xy += (rotation*a_CornerTextureCoordinate.xy) * pSize*vec2(mat[0][0],mat[1][1]);\n    gl_Position=vec4((gl_Position.x/size.x-0.5)*2.0,(0.5-gl_Position.y/size.y)*2.0,0.0,1.0);\n   #endif\n   \n   v_Color = ComputeParticleColor(a_StartColor,a_EndColor, normalizedAge);\n   v_TextureCoordinate =a_CornerTextureCoordinate.zw;\n}\n\n"},"ps",function(){return this.ps="#ifdef FSHIGHPRECISION\nprecision highp float;\n#else\nprecision mediump float;\n#endif\n\nvarying vec4 v_Color;\nvarying vec2 v_TextureCoordinate;\nuniform sampler2D u_texture;\n\nvoid main()\n{\t\n\tgl_FragColor=texture2D(u_texture,v_TextureCoordinate)*v_Color;\n}"}]),ParticleShader}(Shader))}(window,0,Laya),function(window,document,Laya){Laya.un,Laya.uns,Laya.static;var __class=Laya.class,__getset=Laya.getset,BlendMode=(Laya.__newvec,laya.webgl.canvas.BlendMode),Color=(laya.utils.Browser,laya.utils.Color),ColorFilterAction=laya.filters.ColorFilterAction,ColorFilterActionGL=laya.filters.webgl.ColorFilterActionGL,Filter=laya.filters.Filter,FilterActionGL=laya.filters.webgl.FilterActionGL,Matrix=laya.maths.Matrix,Render=(laya.maths.Rectangle,laya.renders.Render),RenderTarget2D=(laya.renders.RenderContext,laya.webgl.resource.RenderTarget2D),RunDriver=laya.utils.RunDriver,SubmitCMD=(laya.webgl.shader.d2.ShaderDefines2D,laya.display.Sprite,laya.webgl.submit.SubmitCMD),Texture=laya.resource.Texture,Value2D=laya.webgl.shader.d2.value.Value2D,FilterAction=function(){function FilterAction(){this.data=null}__class(FilterAction,"laya.filters.FilterAction");var __proto=FilterAction.prototype;return Laya.imps(__proto,{"laya.filters.IFilterAction":!0}),__proto.apply=function(data){return null},FilterAction}(),WebGLFilter=function(){function WebGLFilter(){}return __class(WebGLFilter,"laya.filters.WebGLFilter"),WebGLFilter.enable=function(){WebGLFilter.isInit||(WebGLFilter.isInit=!0,Render.isWebGL&&(RunDriver.createFilterAction=function(type){var action;switch(type){case 32:action=new ColorFilterActionGL;break;case 16:action=new BlurFilterActionGL;break;case 8:action=new GlowFilterActionGL}return action}))},WebGLFilter.isInit=!1,WebGLFilter.__init$=function(){RunDriver.createFilterAction=function(type){var action;switch(type){case 16:case 8:action=new FilterAction;break;case 32:action=new ColorFilterAction}return action}},WebGLFilter}(),BlurFilterActionGL=(function(_super){function BlurFilter(strength){this.strength=NaN,BlurFilter.__super.call(this),void 0===strength&&(strength=4),Render.isWebGL&&WebGLFilter.enable(),this.strength=strength,this._action=RunDriver.createFilterAction(16),this._action.data=this}__class(BlurFilter,"laya.filters.BlurFilter",_super);var __proto=BlurFilter.prototype;__proto.callNative=function(sp){sp.conchModel&&sp.conchModel.blurFilter&&sp.conchModel.blurFilter(this.strength)},__getset(0,__proto,"action",function(){return this._action}),__getset(0,__proto,"type",function(){return 16})}(Filter),function(_super){function GlowFilter(color,blur,offX,offY){this._color=null,GlowFilter.__super.call(this),this._elements=new Float32Array(9),void 0===blur&&(blur=4),void 0===offX&&(offX=6),void 0===offY&&(offY=6),Render.isWebGL&&WebGLFilter.enable(),this._color=new Color(color),this.blur=blur,this.offX=offX,this.offY=offY,this._action=RunDriver.createFilterAction(8),this._action.data=this}__class(GlowFilter,"laya.filters.GlowFilter",_super);var __proto=GlowFilter.prototype;__proto.getColor=function(){return this._color._color},__proto.callNative=function(sp){sp.conchModel&&sp.conchModel.glowFilter&&sp.conchModel.glowFilter(this._color.strColor,this._elements[4],this._elements[5],this._elements[6])},__getset(0,__proto,"type",function(){return 8}),__getset(0,__proto,"action",function(){return this._action}),__getset(0,__proto,"offY",function(){return this._elements[6]},function(value){this._elements[6]=value}),__getset(0,__proto,"offX",function(){return this._elements[5]},function(value){this._elements[5]=value}),__getset(0,__proto,"blur",function(){return this._elements[4]},function(value){this._elements[4]=value})}(Filter),function(_super){function BlurFilterActionGL(){this.data=null,BlurFilterActionGL.__super.call(this)}__class(BlurFilterActionGL,"laya.filters.webgl.BlurFilterActionGL",_super);var __proto=BlurFilterActionGL.prototype;return __proto.setValueMix=function(shader){shader.defines.add(this.data.type)},__proto.apply3d=function(scope,sprite,context,x,y){var b=scope.getValue("bounds"),shaderValue=Value2D.create(1,0);shaderValue.setFilters([this.data]),Matrix.EMPTY.identity(),context.ctx.drawTarget(scope,0,0,b.width,b.height,Matrix.EMPTY,"src",shaderValue),shaderValue.setFilters(null)},__proto.setValue=function(shader){shader.strength=this.data.strength},__getset(0,__proto,"typeMix",function(){return 16}),BlurFilterActionGL}(FilterActionGL)),GlowFilterActionGL=function(_super){function GlowFilterActionGL(){this.data=null,this._initKey=!1,this._textureWidth=0,this._textureHeight=0,GlowFilterActionGL.__super.call(this)}__class(GlowFilterActionGL,"laya.filters.webgl.GlowFilterActionGL",_super);var __proto=GlowFilterActionGL.prototype;return Laya.imps(__proto,{"laya.filters.IFilterActionGL":!0}),__proto.setValueMix=function(shader){},__proto.apply3d=function(scope,sprite,context,x,y){var b=scope.getValue("bounds");scope.addValue("color",this.data.getColor());var w=b.width,h=b.height;this._textureWidth=w,this._textureHeight=h;var submit=SubmitCMD.create([scope,sprite,context,0,0],GlowFilterActionGL.tmpTarget);context.ctx.addRenderObject(submit);var shaderValue,mat=Matrix.TEMP;return mat.identity(),(shaderValue=Value2D.create(1,0)).setFilters([this.data]),context.ctx.drawTarget(scope,0,0,this._textureWidth,this._textureHeight,mat,"src",shaderValue,null,BlendMode.TOINT.overlay),submit=SubmitCMD.create([scope,sprite,context,0,0],GlowFilterActionGL.startOut),context.ctx.addRenderObject(submit),shaderValue=Value2D.create(1,0),context.ctx.drawTarget(scope,0,0,this._textureWidth,this._textureHeight,mat,"tmpTarget",shaderValue,Texture.INV_UV,BlendMode.TOINT.overlay),shaderValue=Value2D.create(1,0),context.ctx.drawTarget(scope,0,0,this._textureWidth,this._textureHeight,mat,"src",shaderValue),submit=SubmitCMD.create([scope,sprite,context,0,0],GlowFilterActionGL.recycleTarget),context.ctx.addRenderObject(submit),null},__proto.setSpriteWH=function(sprite){this._textureWidth=sprite.width,this._textureHeight=sprite.height},__proto.setValue=function(shader){shader.u_offsetX=this.data.offX,shader.u_offsetY=-this.data.offY,shader.u_strength=1,shader.u_blurX=this.data.blur,shader.u_blurY=this.data.blur,shader.u_textW=this._textureWidth,shader.u_textH=this._textureHeight,shader.u_color=this.data.getColor()},__getset(0,__proto,"typeMix",function(){return 8}),GlowFilterActionGL.tmpTarget=function(scope,sprite,context,x,y){var b=scope.getValue("bounds");scope.getValue("out").end();var tmpTarget=RenderTarget2D.create(b.width,b.height);tmpTarget.start();var color=scope.getValue("color");color&&tmpTarget.clear(color[0],color[1],color[2],0),scope.addValue("tmpTarget",tmpTarget)},GlowFilterActionGL.startOut=function(scope,sprite,context,x,y){scope.getValue("tmpTarget").end();var out=scope.getValue("out");out.start();var color=scope.getValue("color");color&&out.clear(color[0],color[1],color[2],0)},GlowFilterActionGL.recycleTarget=function(scope,sprite,context,x,y){scope.getValue("src");scope.getValue("tmpTarget").recycle()},GlowFilterActionGL}(FilterActionGL);Laya.__init([WebGLFilter])}(0,0,Laya),function(global,factory){"function"==typeof define&&define.amd?define([],factory):"function"==typeof require&&"object"==typeof module&&module&&module.exports?module.exports=factory():(global.dcodeIO=global.dcodeIO||{}).Long=factory()}(this,function(){"use strict";function Long(low,high,unsigned){this.low=0|low,this.high=0|high,this.unsigned=!!unsigned}function isLong(obj){return!0===(obj&&obj.__isLong__)}function fromInt(value,unsigned){var obj,cachedObj,cache;return unsigned?(value>>>=0,(cache=0<=value&&value<256)&&(cachedObj=UINT_CACHE[value])?cachedObj:(obj=fromBits(value,(0|value)<0?-1:0,!0),cache&&(UINT_CACHE[value]=obj),obj)):(value|=0,(cache=-128<=value&&value<128)&&(cachedObj=INT_CACHE[value])?cachedObj:(obj=fromBits(value,value<0?-1:0,!1),cache&&(INT_CACHE[value]=obj),obj))}function fromNumber(value,unsigned){if(isNaN(value)||!isFinite(value))return unsigned?UZERO:ZERO;if(unsigned){if(value<0)return UZERO;if(value>=TWO_PWR_64_DBL)return MAX_UNSIGNED_VALUE}else{if(value<=-TWO_PWR_63_DBL)return MIN_VALUE;if(value+1>=TWO_PWR_63_DBL)return MAX_VALUE}return value<0?fromNumber(-value,unsigned).neg():fromBits(value%TWO_PWR_32_DBL|0,value/TWO_PWR_32_DBL|0,unsigned)}function fromBits(lowBits,highBits,unsigned){return new Long(lowBits,highBits,unsigned)}function fromString(str,unsigned,radix){if(0===str.length)throw Error("empty string");if("NaN"===str||"Infinity"===str||"+Infinity"===str||"-Infinity"===str)return ZERO;if("number"==typeof unsigned?(radix=unsigned,unsigned=!1):unsigned=!!unsigned,(radix=radix||10)<2||36<radix)throw RangeError("radix");var p;if((p=str.indexOf("-"))>0)throw Error("interior hyphen");if(0===p)return fromString(str.substring(1),unsigned,radix).neg();for(var radixToPower=fromNumber(pow_dbl(radix,8)),result=ZERO,i=0;i<str.length;i+=8){var size=Math.min(8,str.length-i),value=parseInt(str.substring(i,i+size),radix);if(size<8){var power=fromNumber(pow_dbl(radix,size));result=result.mul(power).add(fromNumber(value))}else result=(result=result.mul(radixToPower)).add(fromNumber(value))}return result.unsigned=unsigned,result}function fromValue(val){return val instanceof Long?val:"number"==typeof val?fromNumber(val):"string"==typeof val?fromString(val):fromBits(val.low,val.high,val.unsigned)}Long.prototype.__isLong__,Object.defineProperty(Long.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),Long.isLong=isLong;var INT_CACHE={},UINT_CACHE={};Long.fromInt=fromInt,Long.fromNumber=fromNumber,Long.fromBits=fromBits;var pow_dbl=Math.pow;Long.fromString=fromString,Long.fromValue=fromValue;var TWO_PWR_32_DBL=4294967296,TWO_PWR_64_DBL=TWO_PWR_32_DBL*TWO_PWR_32_DBL,TWO_PWR_63_DBL=TWO_PWR_64_DBL/2,TWO_PWR_24=fromInt(1<<24),ZERO=fromInt(0);Long.ZERO=ZERO;var UZERO=fromInt(0,!0);Long.UZERO=UZERO;var ONE=fromInt(1);Long.ONE=ONE;var UONE=fromInt(1,!0);Long.UONE=UONE;var NEG_ONE=fromInt(-1);Long.NEG_ONE=NEG_ONE;var MAX_VALUE=fromBits(-1,2147483647,!1);Long.MAX_VALUE=MAX_VALUE;var MAX_UNSIGNED_VALUE=fromBits(-1,-1,!0);Long.MAX_UNSIGNED_VALUE=MAX_UNSIGNED_VALUE;var MIN_VALUE=fromBits(0,-2147483648,!1);Long.MIN_VALUE=MIN_VALUE;var LongPrototype=Long.prototype;return LongPrototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},LongPrototype.toNumber=function(){return this.unsigned?(this.high>>>0)*TWO_PWR_32_DBL+(this.low>>>0):this.high*TWO_PWR_32_DBL+(this.low>>>0)},LongPrototype.toString=function(radix){if((radix=radix||10)<2||36<radix)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(MIN_VALUE)){var radixLong=fromNumber(radix),div=this.div(radixLong),rem1=div.mul(radixLong).sub(this);return div.toString(radix)+rem1.toInt().toString(radix)}return"-"+this.neg().toString(radix)}for(var radixToPower=fromNumber(pow_dbl(radix,6),this.unsigned),rem=this,result="";;){var remDiv=rem.div(radixToPower),digits=(rem.sub(remDiv.mul(radixToPower)).toInt()>>>0).toString(radix);if((rem=remDiv).isZero())return digits+result;for(;digits.length<6;)digits="0"+digits;result=""+digits+result}},LongPrototype.getHighBits=function(){return this.high},LongPrototype.getHighBitsUnsigned=function(){return this.high>>>0},LongPrototype.getLowBits=function(){return this.low},LongPrototype.getLowBitsUnsigned=function(){return this.low>>>0},LongPrototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(MIN_VALUE)?64:this.neg().getNumBitsAbs();for(var val=0!=this.high?this.high:this.low,bit=31;bit>0&&0==(val&1<<bit);bit--);return 0!=this.high?bit+33:bit+1},LongPrototype.isZero=function(){return 0===this.high&&0===this.low},LongPrototype.isNegative=function(){return!this.unsigned&&this.high<0},LongPrototype.isPositive=function(){return this.unsigned||this.high>=0},LongPrototype.isOdd=function(){return 1==(1&this.low)},LongPrototype.isEven=function(){return 0==(1&this.low)},LongPrototype.equals=function(other){return isLong(other)||(other=fromValue(other)),(this.unsigned===other.unsigned||this.high>>>31!=1||other.high>>>31!=1)&&(this.high===other.high&&this.low===other.low)},LongPrototype.eq=LongPrototype.equals,LongPrototype.notEquals=function(other){return!this.eq(other)},LongPrototype.neq=LongPrototype.notEquals,LongPrototype.lessThan=function(other){return this.comp(other)<0},LongPrototype.lt=LongPrototype.lessThan,LongPrototype.lessThanOrEqual=function(other){return this.comp(other)<=0},LongPrototype.lte=LongPrototype.lessThanOrEqual,LongPrototype.greaterThan=function(other){return this.comp(other)>0},LongPrototype.gt=LongPrototype.greaterThan,LongPrototype.greaterThanOrEqual=function(other){return this.comp(other)>=0},LongPrototype.gte=LongPrototype.greaterThanOrEqual,LongPrototype.compare=function(other){if(isLong(other)||(other=fromValue(other)),this.eq(other))return 0;var thisNeg=this.isNegative(),otherNeg=other.isNegative();return thisNeg&&!otherNeg?-1:!thisNeg&&otherNeg?1:this.unsigned?other.high>>>0>this.high>>>0||other.high===this.high&&other.low>>>0>this.low>>>0?-1:1:this.sub(other).isNegative()?-1:1},LongPrototype.comp=LongPrototype.compare,LongPrototype.negate=function(){return!this.unsigned&&this.eq(MIN_VALUE)?MIN_VALUE:this.not().add(ONE)},LongPrototype.neg=LongPrototype.negate,LongPrototype.add=function(addend){isLong(addend)||(addend=fromValue(addend));var a48=this.high>>>16,a32=65535&this.high,a16=this.low>>>16,a00=65535&this.low,b48=addend.high>>>16,b32=65535&addend.high,b16=addend.low>>>16,c48=0,c32=0,c16=0,c00=0;return c00+=a00+(65535&addend.low),c16+=c00>>>16,c00&=65535,c16+=a16+b16,c32+=c16>>>16,c16&=65535,c32+=a32+b32,c48+=c32>>>16,c32&=65535,c48+=a48+b48,c48&=65535,fromBits(c16<<16|c00,c48<<16|c32,this.unsigned)},LongPrototype.subtract=function(subtrahend){return isLong(subtrahend)||(subtrahend=fromValue(subtrahend)),this.add(subtrahend.neg())},LongPrototype.sub=LongPrototype.subtract,LongPrototype.multiply=function(multiplier){if(this.isZero())return ZERO;if(isLong(multiplier)||(multiplier=fromValue(multiplier)),multiplier.isZero())return ZERO;if(this.eq(MIN_VALUE))return multiplier.isOdd()?MIN_VALUE:ZERO;if(multiplier.eq(MIN_VALUE))return this.isOdd()?MIN_VALUE:ZERO;if(this.isNegative())return multiplier.isNegative()?this.neg().mul(multiplier.neg()):this.neg().mul(multiplier).neg();if(multiplier.isNegative())return this.mul(multiplier.neg()).neg();if(this.lt(TWO_PWR_24)&&multiplier.lt(TWO_PWR_24))return fromNumber(this.toNumber()*multiplier.toNumber(),this.unsigned);var a48=this.high>>>16,a32=65535&this.high,a16=this.low>>>16,a00=65535&this.low,b48=multiplier.high>>>16,b32=65535&multiplier.high,b16=multiplier.low>>>16,b00=65535&multiplier.low,c48=0,c32=0,c16=0,c00=0;return c00+=a00*b00,c16+=c00>>>16,c00&=65535,c16+=a16*b00,c32+=c16>>>16,c16&=65535,c16+=a00*b16,c32+=c16>>>16,c16&=65535,c32+=a32*b00,c48+=c32>>>16,c32&=65535,c32+=a16*b16,c48+=c32>>>16,c32&=65535,c32+=a00*b32,c48+=c32>>>16,c32&=65535,c48+=a48*b00+a32*b16+a16*b32+a00*b48,c48&=65535,fromBits(c16<<16|c00,c48<<16|c32,this.unsigned)},LongPrototype.mul=LongPrototype.multiply,LongPrototype.divide=function(divisor){if(isLong(divisor)||(divisor=fromValue(divisor)),divisor.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?UZERO:ZERO;var approx,rem,res;if(this.unsigned){if(divisor.unsigned||(divisor=divisor.toUnsigned()),divisor.gt(this))return UZERO;if(divisor.gt(this.shru(1)))return UONE;res=UZERO}else{if(this.eq(MIN_VALUE))return divisor.eq(ONE)||divisor.eq(NEG_ONE)?MIN_VALUE:divisor.eq(MIN_VALUE)?ONE:(approx=this.shr(1).div(divisor).shl(1),approx.eq(ZERO)?divisor.isNegative()?ONE:NEG_ONE:(rem=this.sub(divisor.mul(approx)),res=approx.add(rem.div(divisor))));if(divisor.eq(MIN_VALUE))return this.unsigned?UZERO:ZERO;if(this.isNegative())return divisor.isNegative()?this.neg().div(divisor.neg()):this.neg().div(divisor).neg();if(divisor.isNegative())return this.div(divisor.neg()).neg();res=ZERO}for(rem=this;rem.gte(divisor);){approx=Math.max(1,Math.floor(rem.toNumber()/divisor.toNumber()));for(var log2=Math.ceil(Math.log(approx)/Math.LN2),delta=log2<=48?1:pow_dbl(2,log2-48),approxRes=fromNumber(approx),approxRem=approxRes.mul(divisor);approxRem.isNegative()||approxRem.gt(rem);)approxRem=(approxRes=fromNumber(approx-=delta,this.unsigned)).mul(divisor);approxRes.isZero()&&(approxRes=ONE),res=res.add(approxRes),rem=rem.sub(approxRem)}return res},LongPrototype.div=LongPrototype.divide,LongPrototype.modulo=function(divisor){return isLong(divisor)||(divisor=fromValue(divisor)),this.sub(this.div(divisor).mul(divisor))},LongPrototype.mod=LongPrototype.modulo,LongPrototype.not=function(){return fromBits(~this.low,~this.high,this.unsigned)},LongPrototype.and=function(other){return isLong(other)||(other=fromValue(other)),fromBits(this.low&other.low,this.high&other.high,this.unsigned)},LongPrototype.or=function(other){return isLong(other)||(other=fromValue(other)),fromBits(this.low|other.low,this.high|other.high,this.unsigned)},LongPrototype.xor=function(other){return isLong(other)||(other=fromValue(other)),fromBits(this.low^other.low,this.high^other.high,this.unsigned)},LongPrototype.shiftLeft=function(numBits){return isLong(numBits)&&(numBits=numBits.toInt()),0==(numBits&=63)?this:numBits<32?fromBits(this.low<<numBits,this.high<<numBits|this.low>>>32-numBits,this.unsigned):fromBits(0,this.low<<numBits-32,this.unsigned)},LongPrototype.shl=LongPrototype.shiftLeft,LongPrototype.shiftRight=function(numBits){return isLong(numBits)&&(numBits=numBits.toInt()),0==(numBits&=63)?this:numBits<32?fromBits(this.low>>>numBits|this.high<<32-numBits,this.high>>numBits,this.unsigned):fromBits(this.high>>numBits-32,this.high>=0?0:-1,this.unsigned)},LongPrototype.shr=LongPrototype.shiftRight,LongPrototype.shiftRightUnsigned=function(numBits){if(isLong(numBits)&&(numBits=numBits.toInt()),0===(numBits&=63))return this;var high=this.high;return numBits<32?fromBits(this.low>>>numBits|high<<32-numBits,high>>>numBits,this.unsigned):32===numBits?fromBits(high,0,this.unsigned):fromBits(high>>>numBits-32,0,this.unsigned)},LongPrototype.shru=LongPrototype.shiftRightUnsigned,LongPrototype.toSigned=function(){return this.unsigned?fromBits(this.low,this.high,!1):this},LongPrototype.toUnsigned=function(){return this.unsigned?this:fromBits(this.low,this.high,!0)},LongPrototype.toBytes=function(le){return le?this.toBytesLE():this.toBytesBE()},LongPrototype.toBytesLE=function(){var hi=this.high,lo=this.low;return[255&lo,lo>>>8&255,lo>>>16&255,lo>>>24&255,255&hi,hi>>>8&255,hi>>>16&255,hi>>>24&255]},LongPrototype.toBytesBE=function(){var hi=this.high,lo=this.low;return[hi>>>24&255,hi>>>16&255,hi>>>8&255,255&hi,lo>>>24&255,lo>>>16&255,lo>>>8&255,255&lo]},Long}),function(global,factory){"function"==typeof define&&define.amd?define(["long"],factory):"function"==typeof require&&"object"==typeof module&&module&&module.exports?module.exports=function(){var Long;try{Long=require("long")}catch(e){}return factory(Long)}():(global.dcodeIO=global.dcodeIO||{}).ByteBuffer=factory(global.dcodeIO.Long)}(this,function(Long){"use strict";function stringSource(s){var i=0;return function(){return i<s.length?s.charCodeAt(i++):null}}function stringDestination(){var cs=[],ps=[];return function(){if(0===arguments.length)return ps.join("")+stringFromCharCode.apply(String,cs);cs.length+arguments.length>1024&&(ps.push(stringFromCharCode.apply(String,cs)),cs.length=0),Array.prototype.push.apply(cs,arguments)}}function ieee754_read(buffer,offset,isLE,mLen,nBytes){var e,m,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,nBits=-7,i=isLE?nBytes-1:0,d=isLE?-1:1,s=buffer[offset+i];for(i+=d,e=s&(1<<-nBits)-1,s>>=-nBits,nBits+=eLen;nBits>0;e=256*e+buffer[offset+i],i+=d,nBits-=8);for(m=e&(1<<-nBits)-1,e>>=-nBits,nBits+=mLen;nBits>0;m=256*m+buffer[offset+i],i+=d,nBits-=8);if(0===e)e=1-eBias;else{if(e===eMax)return m?NaN:1/0*(s?-1:1);m+=Math.pow(2,mLen),e-=eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)}function ieee754_write(buffer,value,offset,isLE,mLen,nBytes){var e,m,c,eLen=8*nBytes-mLen-1,eMax=(1<<eLen)-1,eBias=eMax>>1,rt=23===mLen?Math.pow(2,-24)-Math.pow(2,-77):0,i=isLE?0:nBytes-1,d=isLE?1:-1,s=value<0||0===value&&1/value<0?1:0;for(value=Math.abs(value),isNaN(value)||value===1/0?(m=isNaN(value)?1:0,e=eMax):(e=Math.floor(Math.log(value)/Math.LN2),value*(c=Math.pow(2,-e))<1&&(e--,c*=2),(value+=e+eBias>=1?rt/c:rt*Math.pow(2,1-eBias))*c>=2&&(e++,c/=2),e+eBias>=eMax?(m=0,e=eMax):e+eBias>=1?(m=(value*c-1)*Math.pow(2,mLen),e+=eBias):(m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen),e=0));mLen>=8;buffer[offset+i]=255&m,i+=d,m/=256,mLen-=8);for(e=e<<mLen|m,eLen+=mLen;eLen>0;buffer[offset+i]=255&e,i+=d,e/=256,eLen-=8);buffer[offset+i-d]|=128*s}var ByteBuffer=function(capacity,littleEndian,noAssert){if(void 0===capacity&&(capacity=ByteBuffer.DEFAULT_CAPACITY),void 0===littleEndian&&(littleEndian=ByteBuffer.DEFAULT_ENDIAN),void 0===noAssert&&(noAssert=ByteBuffer.DEFAULT_NOASSERT),!noAssert){if((capacity|=0)<0)throw RangeError("Illegal capacity");littleEndian=!!littleEndian,noAssert=!!noAssert}this.buffer=0===capacity?EMPTY_BUFFER:new ArrayBuffer(capacity),this.view=0===capacity?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=capacity,this.littleEndian=littleEndian,this.noAssert=noAssert};ByteBuffer.VERSION="5.0.1",ByteBuffer.LITTLE_ENDIAN=!0,ByteBuffer.BIG_ENDIAN=!1,ByteBuffer.DEFAULT_CAPACITY=16,ByteBuffer.DEFAULT_ENDIAN=ByteBuffer.BIG_ENDIAN,ByteBuffer.DEFAULT_NOASSERT=!1,ByteBuffer.Long=Long||null;var ByteBufferPrototype=ByteBuffer.prototype;ByteBufferPrototype.__isByteBuffer__,Object.defineProperty(ByteBufferPrototype,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var EMPTY_BUFFER=new ArrayBuffer(0),stringFromCharCode=String.fromCharCode;ByteBuffer.accessor=function(){return Uint8Array},ByteBuffer.allocate=function(capacity,littleEndian,noAssert){return new ByteBuffer(capacity,littleEndian,noAssert)},ByteBuffer.concat=function(buffers,encoding,littleEndian,noAssert){"boolean"!=typeof encoding&&"string"==typeof encoding||(noAssert=littleEndian,littleEndian=encoding,encoding=void 0);for(var length,capacity=0,i=0,k=buffers.length;i<k;++i)ByteBuffer.isByteBuffer(buffers[i])||(buffers[i]=ByteBuffer.wrap(buffers[i],encoding)),(length=buffers[i].limit-buffers[i].offset)>0&&(capacity+=length);if(0===capacity)return new ByteBuffer(0,littleEndian,noAssert);var bi,bb=new ByteBuffer(capacity,littleEndian,noAssert);for(i=0;i<k;)(length=(bi=buffers[i++]).limit-bi.offset)<=0||(bb.view.set(bi.view.subarray(bi.offset,bi.limit),bb.offset),bb.offset+=length);return bb.limit=bb.offset,bb.offset=0,bb},ByteBuffer.isByteBuffer=function(bb){return!0===(bb&&bb.__isByteBuffer__)},ByteBuffer.type=function(){return ArrayBuffer},ByteBuffer.wrap=function(buffer,encoding,littleEndian,noAssert){if("string"!=typeof encoding&&(noAssert=littleEndian,littleEndian=encoding,encoding=void 0),"string"==typeof buffer)switch(void 0===encoding&&(encoding="utf8"),encoding){case"base64":return ByteBuffer.fromBase64(buffer,littleEndian);case"hex":return ByteBuffer.fromHex(buffer,littleEndian);case"binary":return ByteBuffer.fromBinary(buffer,littleEndian);case"utf8":return ByteBuffer.fromUTF8(buffer,littleEndian);case"debug":return ByteBuffer.fromDebug(buffer,littleEndian);default:throw Error("Unsupported encoding: "+encoding)}if(null===buffer||"object"!=typeof buffer)throw TypeError("Illegal buffer");var bb;if(ByteBuffer.isByteBuffer(buffer))return bb=ByteBufferPrototype.clone.call(buffer),bb.markedOffset=-1,bb;if(buffer instanceof Uint8Array)bb=new ByteBuffer(0,littleEndian,noAssert),buffer.length>0&&(bb.buffer=buffer.buffer,bb.offset=buffer.byteOffset,bb.limit=buffer.byteOffset+buffer.byteLength,bb.view=new Uint8Array(buffer.buffer));else if(buffer instanceof ArrayBuffer)bb=new ByteBuffer(0,littleEndian,noAssert),buffer.byteLength>0&&(bb.buffer=buffer,bb.offset=0,bb.limit=buffer.byteLength,bb.view=buffer.byteLength>0?new Uint8Array(buffer):null);else{if("[object Array]"!==Object.prototype.toString.call(buffer))throw TypeError("Illegal buffer");(bb=new ByteBuffer(buffer.length,littleEndian,noAssert)).limit=buffer.length;for(var i=0;i<buffer.length;++i)bb.view[i]=buffer[i]}return bb},ByteBufferPrototype.writeBitSet=function(value,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if(!(value instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}var k,start=offset,bits=value.length,bytes=bits>>3,bit=0;for(offset+=this.writeVarint32(bits,offset);bytes--;)k=1&!!value[bit++]|(1&!!value[bit++])<<1|(1&!!value[bit++])<<2|(1&!!value[bit++])<<3|(1&!!value[bit++])<<4|(1&!!value[bit++])<<5|(1&!!value[bit++])<<6|(1&!!value[bit++])<<7,this.writeByte(k,offset++);if(bit<bits){var m=0;for(k=0;bit<bits;)k|=(1&!!value[bit++])<<m++;this.writeByte(k,offset++)}return relative?(this.offset=offset,this):offset-start},ByteBufferPrototype.readBitSet=function(offset){var relative=void 0===offset;relative&&(offset=this.offset);var k,ret=this.readVarint32(offset),bits=ret.value,bytes=bits>>3,bit=0,value=[];for(offset+=ret.length;bytes--;)k=this.readByte(offset++),value[bit++]=!!(1&k),value[bit++]=!!(2&k),value[bit++]=!!(4&k),value[bit++]=!!(8&k),value[bit++]=!!(16&k),value[bit++]=!!(32&k),value[bit++]=!!(64&k),value[bit++]=!!(128&k);if(bit<bits){var m=0;for(k=this.readByte(offset++);bit<bits;)value[bit++]=!!(k>>m++&1)}return relative&&(this.offset=offset),value},ByteBufferPrototype.readBytes=function(length,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+length>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+"+length+") <= "+this.buffer.byteLength)}var slice=this.slice(offset,offset+length);return relative&&(this.offset+=length),slice},ByteBufferPrototype.writeBytes=ByteBufferPrototype.append,ByteBufferPrototype.writeInt8=function(value,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof value||value%1!=0)throw TypeError("Illegal value: "+value+" (not an integer)");if(value|=0,"number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}offset+=1;var capacity0=this.buffer.byteLength;return offset>capacity0&&this.resize((capacity0*=2)>offset?capacity0:offset),offset-=1,this.view[offset]=value,relative&&(this.offset+=1),this},ByteBufferPrototype.writeByte=ByteBufferPrototype.writeInt8,ByteBufferPrototype.readInt8=function(offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+1) <= "+this.buffer.byteLength)}var value=this.view[offset];return 128==(128&value)&&(value=-(255-value+1)),relative&&(this.offset+=1),value},ByteBufferPrototype.readByte=ByteBufferPrototype.readInt8,ByteBufferPrototype.writeUint8=function(value,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof value||value%1!=0)throw TypeError("Illegal value: "+value+" (not an integer)");if(value>>>=0,"number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}offset+=1;var capacity1=this.buffer.byteLength;return offset>capacity1&&this.resize((capacity1*=2)>offset?capacity1:offset),offset-=1,this.view[offset]=value,relative&&(this.offset+=1),this},ByteBufferPrototype.writeUInt8=ByteBufferPrototype.writeUint8,ByteBufferPrototype.readUint8=function(offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+1) <= "+this.buffer.byteLength)}var value=this.view[offset];return relative&&(this.offset+=1),value},ByteBufferPrototype.readUInt8=ByteBufferPrototype.readUint8,ByteBufferPrototype.writeInt16=function(value,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof value||value%1!=0)throw TypeError("Illegal value: "+value+" (not an integer)");if(value|=0,"number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}offset+=2;var capacity2=this.buffer.byteLength;return offset>capacity2&&this.resize((capacity2*=2)>offset?capacity2:offset),offset-=2,this.littleEndian?(this.view[offset+1]=(65280&value)>>>8,this.view[offset]=255&value):(this.view[offset]=(65280&value)>>>8,this.view[offset+1]=255&value),relative&&(this.offset+=2),this},ByteBufferPrototype.writeShort=ByteBufferPrototype.writeInt16,ByteBufferPrototype.readInt16=function(offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+2) <= "+this.buffer.byteLength)}var value=0;return this.littleEndian?(value=this.view[offset],value|=this.view[offset+1]<<8):(value=this.view[offset]<<8,value|=this.view[offset+1]),32768==(32768&value)&&(value=-(65535-value+1)),relative&&(this.offset+=2),value},ByteBufferPrototype.readShort=ByteBufferPrototype.readInt16,ByteBufferPrototype.writeUint16=function(value,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof value||value%1!=0)throw TypeError("Illegal value: "+value+" (not an integer)");if(value>>>=0,"number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}offset+=2;var capacity3=this.buffer.byteLength;return offset>capacity3&&this.resize((capacity3*=2)>offset?capacity3:offset),offset-=2,this.littleEndian?(this.view[offset+1]=(65280&value)>>>8,this.view[offset]=255&value):(this.view[offset]=(65280&value)>>>8,this.view[offset+1]=255&value),relative&&(this.offset+=2),this},ByteBufferPrototype.writeUInt16=ByteBufferPrototype.writeUint16,ByteBufferPrototype.readUint16=function(offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+2) <= "+this.buffer.byteLength)}var value=0;return this.littleEndian?(value=this.view[offset],value|=this.view[offset+1]<<8):(value=this.view[offset]<<8,value|=this.view[offset+1]),relative&&(this.offset+=2),value},ByteBufferPrototype.readUInt16=ByteBufferPrototype.readUint16,ByteBufferPrototype.writeInt32=function(value,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof value||value%1!=0)throw TypeError("Illegal value: "+value+" (not an integer)");if(value|=0,"number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}offset+=4;var capacity4=this.buffer.byteLength;return offset>capacity4&&this.resize((capacity4*=2)>offset?capacity4:offset),offset-=4,this.littleEndian?(this.view[offset+3]=value>>>24&255,this.view[offset+2]=value>>>16&255,this.view[offset+1]=value>>>8&255,this.view[offset]=255&value):(this.view[offset]=value>>>24&255,this.view[offset+1]=value>>>16&255,this.view[offset+2]=value>>>8&255,this.view[offset+3]=255&value),relative&&(this.offset+=4),this},ByteBufferPrototype.writeInt=ByteBufferPrototype.writeInt32,ByteBufferPrototype.readInt32=function(offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+4) <= "+this.buffer.byteLength)}var value=0;return this.littleEndian?(value=this.view[offset+2]<<16,value|=this.view[offset+1]<<8,value|=this.view[offset],value+=this.view[offset+3]<<24>>>0):(value=this.view[offset+1]<<16,value|=this.view[offset+2]<<8,value|=this.view[offset+3],value+=this.view[offset]<<24>>>0),value|=0,relative&&(this.offset+=4),value},ByteBufferPrototype.readInt=ByteBufferPrototype.readInt32,ByteBufferPrototype.writeUint32=function(value,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof value||value%1!=0)throw TypeError("Illegal value: "+value+" (not an integer)");if(value>>>=0,"number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}offset+=4;var capacity5=this.buffer.byteLength;return offset>capacity5&&this.resize((capacity5*=2)>offset?capacity5:offset),offset-=4,this.littleEndian?(this.view[offset+3]=value>>>24&255,this.view[offset+2]=value>>>16&255,this.view[offset+1]=value>>>8&255,this.view[offset]=255&value):(this.view[offset]=value>>>24&255,this.view[offset+1]=value>>>16&255,this.view[offset+2]=value>>>8&255,this.view[offset+3]=255&value),relative&&(this.offset+=4),this},ByteBufferPrototype.writeUInt32=ByteBufferPrototype.writeUint32,ByteBufferPrototype.readUint32=function(offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+4) <= "+this.buffer.byteLength)}var value=0;return this.littleEndian?(value=this.view[offset+2]<<16,value|=this.view[offset+1]<<8,value|=this.view[offset],value+=this.view[offset+3]<<24>>>0):(value=this.view[offset+1]<<16,value|=this.view[offset+2]<<8,value|=this.view[offset+3],value+=this.view[offset]<<24>>>0),relative&&(this.offset+=4),value},ByteBufferPrototype.readUInt32=ByteBufferPrototype.readUint32,Long&&(ByteBufferPrototype.writeInt64=function(value,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"==typeof value)value=Long.fromNumber(value);else if("string"==typeof value)value=Long.fromString(value);else if(!(value&&value instanceof Long))throw TypeError("Illegal value: "+value+" (not an integer or Long)");if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}"number"==typeof value?value=Long.fromNumber(value):"string"==typeof value&&(value=Long.fromString(value)),offset+=8;var capacity6=this.buffer.byteLength;offset>capacity6&&this.resize((capacity6*=2)>offset?capacity6:offset),offset-=8;var lo=value.low,hi=value.high;return this.littleEndian?(this.view[offset+3]=lo>>>24&255,this.view[offset+2]=lo>>>16&255,this.view[offset+1]=lo>>>8&255,this.view[offset]=255&lo,offset+=4,this.view[offset+3]=hi>>>24&255,this.view[offset+2]=hi>>>16&255,this.view[offset+1]=hi>>>8&255,this.view[offset]=255&hi):(this.view[offset]=hi>>>24&255,this.view[offset+1]=hi>>>16&255,this.view[offset+2]=hi>>>8&255,this.view[offset+3]=255&hi,offset+=4,this.view[offset]=lo>>>24&255,this.view[offset+1]=lo>>>16&255,this.view[offset+2]=lo>>>8&255,this.view[offset+3]=255&lo),relative&&(this.offset+=8),this},ByteBufferPrototype.writeLong=ByteBufferPrototype.writeInt64,ByteBufferPrototype.readInt64=function(offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+8) <= "+this.buffer.byteLength)}var lo=0,hi=0;this.littleEndian?(lo=this.view[offset+2]<<16,lo|=this.view[offset+1]<<8,lo|=this.view[offset],lo+=this.view[offset+3]<<24>>>0,offset+=4,hi=this.view[offset+2]<<16,hi|=this.view[offset+1]<<8,hi|=this.view[offset],hi+=this.view[offset+3]<<24>>>0):(hi=this.view[offset+1]<<16,hi|=this.view[offset+2]<<8,hi|=this.view[offset+3],hi+=this.view[offset]<<24>>>0,offset+=4,lo=this.view[offset+1]<<16,lo|=this.view[offset+2]<<8,lo|=this.view[offset+3],lo+=this.view[offset]<<24>>>0);var value=new Long(lo,hi,!1);return relative&&(this.offset+=8),value},ByteBufferPrototype.readLong=ByteBufferPrototype.readInt64,ByteBufferPrototype.writeUint64=function(value,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"==typeof value)value=Long.fromNumber(value);else if("string"==typeof value)value=Long.fromString(value);else if(!(value&&value instanceof Long))throw TypeError("Illegal value: "+value+" (not an integer or Long)");if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}"number"==typeof value?value=Long.fromNumber(value):"string"==typeof value&&(value=Long.fromString(value)),offset+=8;var capacity7=this.buffer.byteLength;offset>capacity7&&this.resize((capacity7*=2)>offset?capacity7:offset),offset-=8;var lo=value.low,hi=value.high;return this.littleEndian?(this.view[offset+3]=lo>>>24&255,this.view[offset+2]=lo>>>16&255,this.view[offset+1]=lo>>>8&255,this.view[offset]=255&lo,offset+=4,this.view[offset+3]=hi>>>24&255,this.view[offset+2]=hi>>>16&255,this.view[offset+1]=hi>>>8&255,this.view[offset]=255&hi):(this.view[offset]=hi>>>24&255,this.view[offset+1]=hi>>>16&255,this.view[offset+2]=hi>>>8&255,this.view[offset+3]=255&hi,offset+=4,this.view[offset]=lo>>>24&255,this.view[offset+1]=lo>>>16&255,this.view[offset+2]=lo>>>8&255,this.view[offset+3]=255&lo),relative&&(this.offset+=8),this},ByteBufferPrototype.writeUInt64=ByteBufferPrototype.writeUint64,ByteBufferPrototype.readUint64=function(offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+8) <= "+this.buffer.byteLength)}var lo=0,hi=0;this.littleEndian?(lo=this.view[offset+2]<<16,lo|=this.view[offset+1]<<8,lo|=this.view[offset],lo+=this.view[offset+3]<<24>>>0,offset+=4,hi=this.view[offset+2]<<16,hi|=this.view[offset+1]<<8,hi|=this.view[offset],hi+=this.view[offset+3]<<24>>>0):(hi=this.view[offset+1]<<16,hi|=this.view[offset+2]<<8,hi|=this.view[offset+3],hi+=this.view[offset]<<24>>>0,offset+=4,lo=this.view[offset+1]<<16,lo|=this.view[offset+2]<<8,lo|=this.view[offset+3],lo+=this.view[offset]<<24>>>0);var value=new Long(lo,hi,!0);return relative&&(this.offset+=8),value},ByteBufferPrototype.readUInt64=ByteBufferPrototype.readUint64),ByteBufferPrototype.writeFloat32=function(value,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof value)throw TypeError("Illegal value: "+value+" (not a number)");if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}offset+=4;var capacity8=this.buffer.byteLength;return offset>capacity8&&this.resize((capacity8*=2)>offset?capacity8:offset),offset-=4,ieee754_write(this.view,value,offset,this.littleEndian,23,4),relative&&(this.offset+=4),this},ByteBufferPrototype.writeFloat=ByteBufferPrototype.writeFloat32,ByteBufferPrototype.readFloat32=function(offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+4) <= "+this.buffer.byteLength)}var value=ieee754_read(this.view,offset,this.littleEndian,23,4);return relative&&(this.offset+=4),value},ByteBufferPrototype.readFloat=ByteBufferPrototype.readFloat32,ByteBufferPrototype.writeFloat64=function(value,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof value)throw TypeError("Illegal value: "+value+" (not a number)");if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}offset+=8;var capacity9=this.buffer.byteLength;return offset>capacity9&&this.resize((capacity9*=2)>offset?capacity9:offset),offset-=8,ieee754_write(this.view,value,offset,this.littleEndian,52,8),relative&&(this.offset+=8),this},ByteBufferPrototype.writeDouble=ByteBufferPrototype.writeFloat64,ByteBufferPrototype.readFloat64=function(offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+8) <= "+this.buffer.byteLength)}var value=ieee754_read(this.view,offset,this.littleEndian,52,8);return relative&&(this.offset+=8),value},ByteBufferPrototype.readDouble=ByteBufferPrototype.readFloat64,ByteBuffer.MAX_VARINT32_BYTES=5,ByteBuffer.calculateVarint32=function(value){return value>>>=0,value<128?1:value<16384?2:value<1<<21?3:value<1<<28?4:5},ByteBuffer.zigZagEncode32=function(n){return((n|=0)<<1^n>>31)>>>0},ByteBuffer.zigZagDecode32=function(n){return n>>>1^-(1&n)|0},ByteBufferPrototype.writeVarint32=function(value,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof value||value%1!=0)throw TypeError("Illegal value: "+value+" (not an integer)");if(value|=0,"number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}var b,size=ByteBuffer.calculateVarint32(value);offset+=size;var capacity10=this.buffer.byteLength;for(offset>capacity10&&this.resize((capacity10*=2)>offset?capacity10:offset),offset-=size,value>>>=0;value>=128;)b=127&value|128,this.view[offset++]=b,value>>>=7;return this.view[offset++]=value,relative?(this.offset=offset,this):size},ByteBufferPrototype.writeVarint32ZigZag=function(value,offset){return this.writeVarint32(ByteBuffer.zigZagEncode32(value),offset)},ByteBufferPrototype.readVarint32=function(offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+1) <= "+this.buffer.byteLength)}var b,c=0,value=0;do{if(!this.noAssert&&offset>this.limit){var err=Error("Truncated");throw err.truncated=!0,err}b=this.view[offset++],c<5&&(value|=(127&b)<<7*c),++c}while(0!=(128&b));return value|=0,relative?(this.offset=offset,value):{value:value,length:c}},ByteBufferPrototype.readVarint32ZigZag=function(offset){var val=this.readVarint32(offset);return"object"==typeof val?val.value=ByteBuffer.zigZagDecode32(val.value):val=ByteBuffer.zigZagDecode32(val),val},Long&&(ByteBuffer.MAX_VARINT64_BYTES=10,ByteBuffer.calculateVarint64=function(value){"number"==typeof value?value=Long.fromNumber(value):"string"==typeof value&&(value=Long.fromString(value));var part0=value.toInt()>>>0,part1=value.shiftRightUnsigned(28).toInt()>>>0,part2=value.shiftRightUnsigned(56).toInt()>>>0;return 0==part2?0==part1?part0<16384?part0<128?1:2:part0<1<<21?3:4:part1<16384?part1<128?5:6:part1<1<<21?7:8:part2<128?9:10},ByteBuffer.zigZagEncode64=function(value){return"number"==typeof value?value=Long.fromNumber(value,!1):"string"==typeof value?value=Long.fromString(value,!1):!1!==value.unsigned&&(value=value.toSigned()),value.shiftLeft(1).xor(value.shiftRight(63)).toUnsigned()},ByteBuffer.zigZagDecode64=function(value){return"number"==typeof value?value=Long.fromNumber(value,!1):"string"==typeof value?value=Long.fromString(value,!1):!1!==value.unsigned&&(value=value.toSigned()),value.shiftRightUnsigned(1).xor(value.and(Long.ONE).toSigned().negate()).toSigned()},ByteBufferPrototype.writeVarint64=function(value,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"==typeof value)value=Long.fromNumber(value);else if("string"==typeof value)value=Long.fromString(value);else if(!(value&&value instanceof Long))throw TypeError("Illegal value: "+value+" (not an integer or Long)");if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}"number"==typeof value?value=Long.fromNumber(value,!1):"string"==typeof value?value=Long.fromString(value,!1):!1!==value.unsigned&&(value=value.toSigned());var size=ByteBuffer.calculateVarint64(value),part0=value.toInt()>>>0,part1=value.shiftRightUnsigned(28).toInt()>>>0,part2=value.shiftRightUnsigned(56).toInt()>>>0;offset+=size;var capacity11=this.buffer.byteLength;switch(offset>capacity11&&this.resize((capacity11*=2)>offset?capacity11:offset),offset-=size,size){case 10:this.view[offset+9]=part2>>>7&1;case 9:this.view[offset+8]=9!==size?128|part2:127&part2;case 8:this.view[offset+7]=8!==size?part1>>>21|128:part1>>>21&127;case 7:this.view[offset+6]=7!==size?part1>>>14|128:part1>>>14&127;case 6:this.view[offset+5]=6!==size?part1>>>7|128:part1>>>7&127;case 5:this.view[offset+4]=5!==size?128|part1:127&part1;case 4:this.view[offset+3]=4!==size?part0>>>21|128:part0>>>21&127;case 3:this.view[offset+2]=3!==size?part0>>>14|128:part0>>>14&127;case 2:this.view[offset+1]=2!==size?part0>>>7|128:part0>>>7&127;case 1:this.view[offset]=1!==size?128|part0:127&part0}return relative?(this.offset+=size,this):size},ByteBufferPrototype.writeVarint64ZigZag=function(value,offset){return this.writeVarint64(ByteBuffer.zigZagEncode64(value),offset)},ByteBufferPrototype.readVarint64=function(offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+1) <= "+this.buffer.byteLength)}var start=offset,part0=0,part1=0,part2=0,b=0;if(b=this.view[offset++],part0=127&b,128&b&&(b=this.view[offset++],part0|=(127&b)<<7,(128&b||this.noAssert&&void 0===b)&&(b=this.view[offset++],part0|=(127&b)<<14,(128&b||this.noAssert&&void 0===b)&&(b=this.view[offset++],part0|=(127&b)<<21,(128&b||this.noAssert&&void 0===b)&&(b=this.view[offset++],part1=127&b,(128&b||this.noAssert&&void 0===b)&&(b=this.view[offset++],part1|=(127&b)<<7,(128&b||this.noAssert&&void 0===b)&&(b=this.view[offset++],part1|=(127&b)<<14,(128&b||this.noAssert&&void 0===b)&&(b=this.view[offset++],part1|=(127&b)<<21,(128&b||this.noAssert&&void 0===b)&&(b=this.view[offset++],part2=127&b,(128&b||this.noAssert&&void 0===b)&&(b=this.view[offset++],part2|=(127&b)<<7,128&b||this.noAssert&&void 0===b))))))))))throw Error("Buffer overrun");var value=Long.fromBits(part0|part1<<28,part1>>>4|part2<<24,!1);return relative?(this.offset=offset,value):{value:value,length:offset-start}},ByteBufferPrototype.readVarint64ZigZag=function(offset){var val=this.readVarint64(offset);return val&&val.value instanceof Long?val.value=ByteBuffer.zigZagDecode64(val.value):val=ByteBuffer.zigZagDecode64(val),val}),ByteBufferPrototype.writeCString=function(str,offset){var relative=void 0===offset;relative&&(offset=this.offset);var i,k=str.length;if(!this.noAssert){if("string"!=typeof str)throw TypeError("Illegal str: Not a string");for(i=0;i<k;++i)if(0===str.charCodeAt(i))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}k=utfx.calculateUTF16asUTF8(stringSource(str))[1],offset+=k+1;var capacity12=this.buffer.byteLength;return offset>capacity12&&this.resize((capacity12*=2)>offset?capacity12:offset),offset-=k+1,utfx.encodeUTF16toUTF8(stringSource(str),function(b){this.view[offset++]=b}.bind(this)),this.view[offset++]=0,relative?(this.offset=offset,this):k},ByteBufferPrototype.readCString=function(offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+1) <= "+this.buffer.byteLength)}var sd,start=offset,b=-1;return utfx.decodeUTF8toUTF16(function(){if(0===b)return null;if(offset>=this.limit)throw RangeError("Illegal range: Truncated data, "+offset+" < "+this.limit);return b=this.view[offset++],0===b?null:b}.bind(this),sd=stringDestination(),!0),relative?(this.offset=offset,sd()):{string:sd(),length:offset-start}},ByteBufferPrototype.writeIString=function(str,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("string"!=typeof str)throw TypeError("Illegal str: Not a string");if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}var k,start=offset;k=utfx.calculateUTF16asUTF8(stringSource(str),this.noAssert)[1],offset+=4+k;var capacity13=this.buffer.byteLength;if(offset>capacity13&&this.resize((capacity13*=2)>offset?capacity13:offset),offset-=4+k,this.littleEndian?(this.view[offset+3]=k>>>24&255,this.view[offset+2]=k>>>16&255,this.view[offset+1]=k>>>8&255,this.view[offset]=255&k):(this.view[offset]=k>>>24&255,this.view[offset+1]=k>>>16&255,this.view[offset+2]=k>>>8&255,this.view[offset+3]=255&k),offset+=4,utfx.encodeUTF16toUTF8(stringSource(str),function(b){this.view[offset++]=b}.bind(this)),offset!==start+4+k)throw RangeError("Illegal range: Truncated data, "+offset+" == "+(offset+4+k));return relative?(this.offset=offset,this):offset-start},ByteBufferPrototype.readIString=function(offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+4) <= "+this.buffer.byteLength)}var start=offset,len=this.readUint32(offset),str=this.readUTF8String(len,ByteBuffer.METRICS_BYTES,offset+=4);return offset+=str.length,relative?(this.offset=offset,str.string):{string:str.string,length:offset-start}},ByteBuffer.METRICS_CHARS="c",ByteBuffer.METRICS_BYTES="b",ByteBufferPrototype.writeUTF8String=function(str,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}var k,start=offset;k=utfx.calculateUTF16asUTF8(stringSource(str))[1],offset+=k;var capacity14=this.buffer.byteLength;return offset>capacity14&&this.resize((capacity14*=2)>offset?capacity14:offset),offset-=k,utfx.encodeUTF16toUTF8(stringSource(str),function(b){this.view[offset++]=b}.bind(this)),relative?(this.offset=offset,this):offset-start},ByteBufferPrototype.writeString=ByteBufferPrototype.writeUTF8String,ByteBuffer.calculateUTF8Chars=function(str){return utfx.calculateUTF16asUTF8(stringSource(str))[0]},ByteBuffer.calculateUTF8Bytes=function(str){return utfx.calculateUTF16asUTF8(stringSource(str))[1]},ByteBuffer.calculateString=ByteBuffer.calculateUTF8Bytes,ByteBufferPrototype.readUTF8String=function(length,metrics,offset){"number"==typeof metrics&&(offset=metrics,metrics=void 0);var relative=void 0===offset;if(relative&&(offset=this.offset),void 0===metrics&&(metrics=ByteBuffer.METRICS_CHARS),!this.noAssert){if("number"!=typeof length||length%1!=0)throw TypeError("Illegal length: "+length+" (not an integer)");if(length|=0,"number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}var sd,i=0,start=offset;if(metrics===ByteBuffer.METRICS_CHARS){if(sd=stringDestination(),utfx.decodeUTF8(function(){return i<length&&offset<this.limit?this.view[offset++]:null}.bind(this),function(cp){++i,utfx.UTF8toUTF16(cp,sd)}),i!==length)throw RangeError("Illegal range: Truncated data, "+i+" == "+length);return relative?(this.offset=offset,sd()):{string:sd(),length:offset-start}}if(metrics===ByteBuffer.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+length>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+"+length+") <= "+this.buffer.byteLength)}var k=offset+length;if(utfx.decodeUTF8toUTF16(function(){return offset<k?this.view[offset++]:null}.bind(this),sd=stringDestination(),this.noAssert),offset!==k)throw RangeError("Illegal range: Truncated data, "+offset+" == "+k);return relative?(this.offset=offset,sd()):{string:sd(),length:offset-start}}throw TypeError("Unsupported metrics: "+metrics)},ByteBufferPrototype.readString=ByteBufferPrototype.readUTF8String,ByteBufferPrototype.writeVString=function(str,offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("string"!=typeof str)throw TypeError("Illegal str: Not a string");if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}var k,l,start=offset;k=utfx.calculateUTF16asUTF8(stringSource(str),this.noAssert)[1],l=ByteBuffer.calculateVarint32(k),offset+=l+k;var capacity15=this.buffer.byteLength;if(offset>capacity15&&this.resize((capacity15*=2)>offset?capacity15:offset),offset-=l+k,offset+=this.writeVarint32(k,offset),utfx.encodeUTF16toUTF8(stringSource(str),function(b){this.view[offset++]=b}.bind(this)),offset!==start+k+l)throw RangeError("Illegal range: Truncated data, "+offset+" == "+(offset+k+l));return relative?(this.offset=offset,this):offset-start},ByteBufferPrototype.readVString=function(offset){var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+1) <= "+this.buffer.byteLength)}var start=offset,len=this.readVarint32(offset),str=this.readUTF8String(len.value,ByteBuffer.METRICS_BYTES,offset+=len.length);return offset+=str.length,relative?(this.offset=offset,str.string):{string:str.string,length:offset-start}},ByteBufferPrototype.append=function(source,encoding,offset){"number"!=typeof encoding&&"string"==typeof encoding||(offset=encoding,encoding=void 0);var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}source instanceof ByteBuffer||(source=ByteBuffer.wrap(source,encoding));var length=source.limit-source.offset;if(length<=0)return this;offset+=length;var capacity16=this.buffer.byteLength;return offset>capacity16&&this.resize((capacity16*=2)>offset?capacity16:offset),offset-=length,this.view.set(source.view.subarray(source.offset,source.limit),offset),source.offset+=length,relative&&(this.offset+=length),this},ByteBufferPrototype.appendTo=function(target,offset){return target.append(this,offset),this},ByteBufferPrototype.assert=function(assert){return this.noAssert=!assert,this},ByteBufferPrototype.capacity=function(){return this.buffer.byteLength},ByteBufferPrototype.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},ByteBufferPrototype.clone=function(copy){var bb=new ByteBuffer(0,this.littleEndian,this.noAssert);return copy?(bb.buffer=new ArrayBuffer(this.buffer.byteLength),bb.view=new Uint8Array(bb.buffer)):(bb.buffer=this.buffer,bb.view=this.view),bb.offset=this.offset,bb.markedOffset=this.markedOffset,bb.limit=this.limit,bb},ByteBufferPrototype.compact=function(begin,end){if(void 0===begin&&(begin=this.offset),void 0===end&&(end=this.limit),!this.noAssert){if("number"!=typeof begin||begin%1!=0)throw TypeError("Illegal begin: Not an integer");if(begin>>>=0,"number"!=typeof end||end%1!=0)throw TypeError("Illegal end: Not an integer");if(end>>>=0,begin<0||begin>end||end>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+begin+" <= "+end+" <= "+this.buffer.byteLength)}if(0===begin&&end===this.buffer.byteLength)return this;var len=end-begin;if(0===len)return this.buffer=EMPTY_BUFFER,this.view=null,this.markedOffset>=0&&(this.markedOffset-=begin),this.offset=0,this.limit=0,this;var buffer=new ArrayBuffer(len),view=new Uint8Array(buffer);return view.set(this.view.subarray(begin,end)),this.buffer=buffer,this.view=view,this.markedOffset>=0&&(this.markedOffset-=begin),this.offset=0,this.limit=len,this},ByteBufferPrototype.copy=function(begin,end){if(void 0===begin&&(begin=this.offset),void 0===end&&(end=this.limit),!this.noAssert){if("number"!=typeof begin||begin%1!=0)throw TypeError("Illegal begin: Not an integer");if(begin>>>=0,"number"!=typeof end||end%1!=0)throw TypeError("Illegal end: Not an integer");if(end>>>=0,begin<0||begin>end||end>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+begin+" <= "+end+" <= "+this.buffer.byteLength)}if(begin===end)return new ByteBuffer(0,this.littleEndian,this.noAssert);var capacity=end-begin,bb=new ByteBuffer(capacity,this.littleEndian,this.noAssert);return bb.offset=0,bb.limit=capacity,bb.markedOffset>=0&&(bb.markedOffset-=begin),this.copyTo(bb,0,begin,end),bb},ByteBufferPrototype.copyTo=function(target,targetOffset,sourceOffset,sourceLimit){var relative,targetRelative;if(!this.noAssert&&!ByteBuffer.isByteBuffer(target))throw TypeError("Illegal target: Not a ByteBuffer");if(targetOffset=(targetRelative=void 0===targetOffset)?target.offset:0|targetOffset,sourceOffset=(relative=void 0===sourceOffset)?this.offset:0|sourceOffset,sourceLimit=void 0===sourceLimit?this.limit:0|sourceLimit,targetOffset<0||targetOffset>target.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+targetOffset+" <= "+target.buffer.byteLength);if(sourceOffset<0||sourceLimit>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+sourceOffset+" <= "+this.buffer.byteLength);var len=sourceLimit-sourceOffset;return 0===len?target:(target.ensureCapacity(targetOffset+len),target.view.set(this.view.subarray(sourceOffset,sourceLimit),targetOffset),relative&&(this.offset+=len),targetRelative&&(target.offset+=len),this)},ByteBufferPrototype.ensureCapacity=function(capacity){var current=this.buffer.byteLength;return current<capacity?this.resize((current*=2)>capacity?current:capacity):this},ByteBufferPrototype.fill=function(value,begin,end){var relative=void 0===begin;if(relative&&(begin=this.offset),"string"==typeof value&&value.length>0&&(value=value.charCodeAt(0)),void 0===begin&&(begin=this.offset),void 0===end&&(end=this.limit),!this.noAssert){if("number"!=typeof value||value%1!=0)throw TypeError("Illegal value: "+value+" (not an integer)");if(value|=0,"number"!=typeof begin||begin%1!=0)throw TypeError("Illegal begin: Not an integer");if(begin>>>=0,"number"!=typeof end||end%1!=0)throw TypeError("Illegal end: Not an integer");if(end>>>=0,begin<0||begin>end||end>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+begin+" <= "+end+" <= "+this.buffer.byteLength)}if(begin>=end)return this;for(;begin<end;)this.view[begin++]=value;return relative&&(this.offset=begin),this},ByteBufferPrototype.flip=function(){return this.limit=this.offset,this.offset=0,this},ByteBufferPrototype.mark=function(offset){if(offset=void 0===offset?this.offset:offset,!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=offset,this},ByteBufferPrototype.order=function(littleEndian){if(!this.noAssert&&"boolean"!=typeof littleEndian)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!littleEndian,this},ByteBufferPrototype.LE=function(littleEndian){return this.littleEndian=void 0===littleEndian||!!littleEndian,this},ByteBufferPrototype.BE=function(bigEndian){return this.littleEndian=void 0!==bigEndian&&!bigEndian,this},ByteBufferPrototype.prepend=function(source,encoding,offset){"number"!=typeof encoding&&"string"==typeof encoding||(offset=encoding,encoding=void 0);var relative=void 0===offset;if(relative&&(offset=this.offset),!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: "+offset+" (not an integer)");if((offset>>>=0)<0||offset+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+offset+" (+0) <= "+this.buffer.byteLength)}source instanceof ByteBuffer||(source=ByteBuffer.wrap(source,encoding));var len=source.limit-source.offset;if(len<=0)return this;var diff=len-offset;if(diff>0){var buffer=new ArrayBuffer(this.buffer.byteLength+diff),view=new Uint8Array(buffer);view.set(this.view.subarray(offset,this.buffer.byteLength),len),this.buffer=buffer,this.view=view,this.offset+=diff,this.markedOffset>=0&&(this.markedOffset+=diff),this.limit+=diff,offset+=diff}else new Uint8Array(this.buffer);return this.view.set(source.view.subarray(source.offset,source.limit),offset-len),source.offset=source.limit,relative&&(this.offset-=len),this},ByteBufferPrototype.prependTo=function(target,offset){return target.prepend(this,offset),this},ByteBufferPrototype.printDebug=function(out){"function"!=typeof out&&(out=console.log.bind(console)),out(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},ByteBufferPrototype.remaining=function(){return this.limit-this.offset},ByteBufferPrototype.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},ByteBufferPrototype.resize=function(capacity){if(!this.noAssert){if("number"!=typeof capacity||capacity%1!=0)throw TypeError("Illegal capacity: "+capacity+" (not an integer)");if((capacity|=0)<0)throw RangeError("Illegal capacity: 0 <= "+capacity)}if(this.buffer.byteLength<capacity){var buffer=new ArrayBuffer(capacity),view=new Uint8Array(buffer);view.set(this.view),this.buffer=buffer,this.view=view}return this},ByteBufferPrototype.reverse=function(begin,end){if(void 0===begin&&(begin=this.offset),void 0===end&&(end=this.limit),!this.noAssert){if("number"!=typeof begin||begin%1!=0)throw TypeError("Illegal begin: Not an integer");if(begin>>>=0,"number"!=typeof end||end%1!=0)throw TypeError("Illegal end: Not an integer");if(end>>>=0,begin<0||begin>end||end>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+begin+" <= "+end+" <= "+this.buffer.byteLength)}return begin===end?this:(Array.prototype.reverse.call(this.view.subarray(begin,end)),this)},ByteBufferPrototype.skip=function(length){if(!this.noAssert){if("number"!=typeof length||length%1!=0)throw TypeError("Illegal length: "+length+" (not an integer)");length|=0}var offset=this.offset+length;if(!this.noAssert&&(offset<0||offset>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+length+" <= "+this.buffer.byteLength);return this.offset=offset,this},ByteBufferPrototype.slice=function(begin,end){if(void 0===begin&&(begin=this.offset),void 0===end&&(end=this.limit),!this.noAssert){if("number"!=typeof begin||begin%1!=0)throw TypeError("Illegal begin: Not an integer");if(begin>>>=0,"number"!=typeof end||end%1!=0)throw TypeError("Illegal end: Not an integer");if(end>>>=0,begin<0||begin>end||end>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+begin+" <= "+end+" <= "+this.buffer.byteLength)}var bb=this.clone();return bb.offset=begin,bb.limit=end,bb},ByteBufferPrototype.toBuffer=function(forceCopy){var offset=this.offset,limit=this.limit;if(!this.noAssert){if("number"!=typeof offset||offset%1!=0)throw TypeError("Illegal offset: Not an integer");if(offset>>>=0,"number"!=typeof limit||limit%1!=0)throw TypeError("Illegal limit: Not an integer");if(limit>>>=0,offset<0||offset>limit||limit>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+offset+" <= "+limit+" <= "+this.buffer.byteLength)}if(!forceCopy&&0===offset&&limit===this.buffer.byteLength)return this.buffer;if(offset===limit)return EMPTY_BUFFER;var buffer=new ArrayBuffer(limit-offset);return new Uint8Array(buffer).set(new Uint8Array(this.buffer).subarray(offset,limit),0),buffer},ByteBufferPrototype.toArrayBuffer=ByteBufferPrototype.toBuffer,ByteBufferPrototype.toString=function(encoding,begin,end){if(void 0===encoding)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof encoding&&(encoding="utf8",begin=encoding,end=begin),encoding){case"utf8":return this.toUTF8(begin,end);case"base64":return this.toBase64(begin,end);case"hex":return this.toHex(begin,end);case"binary":return this.toBinary(begin,end);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+encoding)}};var lxiv=function(){for(var lxiv={},aout=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],ain=[],i=0,k=aout.length;i<k;++i)ain[aout[i]]=i;return lxiv.encode=function(src,dst){for(var b,t;null!==(b=src());)dst(aout[b>>2&63]),t=(3&b)<<4,null!==(b=src())?(dst(aout[63&((t|=b>>4&15)|b>>4&15)]),t=(15&b)<<2,null!==(b=src())?(dst(aout[63&(t|b>>6&3)]),dst(aout[63&b])):(dst(aout[63&t]),dst(61))):(dst(aout[63&t]),dst(61),dst(61))},lxiv.decode=function(src,dst){function fail(c){throw Error("Illegal character code: "+c)}for(var c,t1,t2;null!==(c=src());)if(void 0===(t1=ain[c])&&fail(c),null!==(c=src())&&(void 0===(t2=ain[c])&&fail(c),dst(t1<<2>>>0|(48&t2)>>4),null!==(c=src()))){if(void 0===(t1=ain[c])){if(61===c)break;fail(c)}if(dst((15&t2)<<4>>>0|(60&t1)>>2),null!==(c=src())){if(void 0===(t2=ain[c])){if(61===c)break;fail(c)}dst((3&t1)<<6>>>0|t2)}}},lxiv.test=function(str){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(str)},lxiv}();ByteBufferPrototype.toBase64=function(begin,end){if(void 0===begin&&(begin=this.offset),void 0===end&&(end=this.limit),begin|=0,end|=0,begin<0||end>this.capacity||begin>end)throw RangeError("begin, end");var sd;return lxiv.encode(function(){return begin<end?this.view[begin++]:null}.bind(this),sd=stringDestination()),sd()},ByteBuffer.fromBase64=function(str,littleEndian){if("string"!=typeof str)throw TypeError("str");var bb=new ByteBuffer(str.length/4*3,littleEndian),i=0;return lxiv.decode(stringSource(str),function(b){bb.view[i++]=b}),bb.limit=i,bb},ByteBuffer.btoa=function(str){return ByteBuffer.fromBinary(str).toBase64()},ByteBuffer.atob=function(b64){return ByteBuffer.fromBase64(b64).toBinary()},ByteBufferPrototype.toBinary=function(begin,end){if(void 0===begin&&(begin=this.offset),void 0===end&&(end=this.limit),begin|=0,end|=0,begin<0||end>this.capacity()||begin>end)throw RangeError("begin, end");if(begin===end)return"";for(var chars=[],parts=[];begin<end;)chars.push(this.view[begin++]),chars.length>=1024&&(parts.push(String.fromCharCode.apply(String,chars)),chars=[]);return parts.join("")+String.fromCharCode.apply(String,chars)},ByteBuffer.fromBinary=function(str,littleEndian){if("string"!=typeof str)throw TypeError("str");for(var charCode,i=0,k=str.length,bb=new ByteBuffer(k,littleEndian);i<k;){if((charCode=str.charCodeAt(i))>255)throw RangeError("illegal char code: "+charCode);bb.view[i++]=charCode}return bb.limit=k,bb},ByteBufferPrototype.toDebug=function(columns){for(var b,i=-1,k=this.buffer.byteLength,hex="",asc="",out="";i<k;){if(-1!==i&&(hex+=(b=this.view[i])<16?"0"+b.toString(16).toUpperCase():b.toString(16).toUpperCase(),columns&&(asc+=b>32&&b<127?String.fromCharCode(b):".")),++i,columns&&i>0&&i%16==0&&i!==k){for(;hex.length<51;)hex+=" ";out+=hex+asc+"\n",hex=asc=""}i===this.offset&&i===this.limit?hex+=i===this.markedOffset?"!":"|":i===this.offset?hex+=i===this.markedOffset?"[":"<":i===this.limit?hex+=i===this.markedOffset?"]":">":hex+=i===this.markedOffset?"'":columns||0!==i&&i!==k?" ":""}if(columns&&" "!==hex){for(;hex.length<51;)hex+=" ";out+=hex+asc+"\n"}return columns?out:hex},ByteBuffer.fromDebug=function(str,littleEndian,noAssert){for(var ch,b,k=str.length,bb=new ByteBuffer((k+1)/3|0,littleEndian,noAssert),i=0,j=0,rs=!1,ho=!1,hm=!1,hl=!1,fail=!1;i<k;){switch(ch=str.charAt(i++)){case"!":if(!noAssert){if(ho||hm||hl){fail=!0;break}ho=hm=hl=!0}bb.offset=bb.markedOffset=bb.limit=j,rs=!1;break;case"|":if(!noAssert){if(ho||hl){fail=!0;break}ho=hl=!0}bb.offset=bb.limit=j,rs=!1;break;case"[":if(!noAssert){if(ho||hm){fail=!0;break}ho=hm=!0}bb.offset=bb.markedOffset=j,rs=!1;break;case"<":if(!noAssert){if(ho){fail=!0;break}ho=!0}bb.offset=j,rs=!1;break;case"]":if(!noAssert){if(hl||hm){fail=!0;break}hl=hm=!0}bb.limit=bb.markedOffset=j,rs=!1;break;case">":if(!noAssert){if(hl){fail=!0;break}hl=!0}bb.limit=j,rs=!1;break;case"'":if(!noAssert){if(hm){fail=!0;break}hm=!0}bb.markedOffset=j,rs=!1;break;case" ":rs=!1;break;default:if(!noAssert&&rs){fail=!0;break}if(b=parseInt(ch+str.charAt(i++),16),!noAssert&&(isNaN(b)||b<0||b>255))throw TypeError("Illegal str: Not a debug encoded string");bb.view[j++]=b,rs=!0}if(fail)throw TypeError("Illegal str: Invalid symbol at "+i)}if(!noAssert){if(!ho||!hl)throw TypeError("Illegal str: Missing offset or limit");if(j<bb.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+j+" < "+k)}return bb},ByteBufferPrototype.toHex=function(begin,end){if(begin=void 0===begin?this.offset:begin,end=void 0===end?this.limit:end,!this.noAssert){if("number"!=typeof begin||begin%1!=0)throw TypeError("Illegal begin: Not an integer");if(begin>>>=0,"number"!=typeof end||end%1!=0)throw TypeError("Illegal end: Not an integer");if(end>>>=0,begin<0||begin>end||end>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+begin+" <= "+end+" <= "+this.buffer.byteLength)}for(var b,out=new Array(end-begin);begin<end;)(b=this.view[begin++])<16?out.push("0",b.toString(16)):out.push(b.toString(16));return out.join("")},ByteBuffer.fromHex=function(str,littleEndian,noAssert){if(!noAssert){if("string"!=typeof str)throw TypeError("Illegal str: Not a string");if(str.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var b,k=str.length,bb=new ByteBuffer(k/2|0,littleEndian),i=0,j=0;i<k;i+=2){if(b=parseInt(str.substring(i,i+2),16),!noAssert&&(!isFinite(b)||b<0||b>255))throw TypeError("Illegal str: Contains non-hex characters");bb.view[j++]=b}return bb.limit=j,bb};var utfx=function(){var utfx={};return utfx.MAX_CODEPOINT=1114111,utfx.encodeUTF8=function(src,dst){var cp=null;for("number"==typeof src&&(cp=src,src=function(){return null});null!==cp||null!==(cp=src());)cp<128?dst(127&cp):cp<2048?(dst(cp>>6&31|192),dst(63&cp|128)):cp<65536?(dst(cp>>12&15|224),dst(cp>>6&63|128),dst(63&cp|128)):(dst(cp>>18&7|240),dst(cp>>12&63|128),dst(cp>>6&63|128),dst(63&cp|128)),cp=null},utfx.decodeUTF8=function(src,dst){for(var a,b,c,d,fail=function(b){b=b.slice(0,b.indexOf(null));var err=Error(b.toString());throw err.name="TruncatedError",err.bytes=b,err};null!==(a=src());)if(0==(128&a))dst(a);else if(192==(224&a))null===(b=src())&&fail([a,b]),dst((31&a)<<6|63&b);else if(224==(240&a))(null===(b=src())||null===(c=src()))&&fail([a,b,c]),dst((15&a)<<12|(63&b)<<6|63&c);else{if(240!=(248&a))throw RangeError("Illegal starting byte: "+a);(null===(b=src())||null===(c=src())||null===(d=src()))&&fail([a,b,c,d]),dst((7&a)<<18|(63&b)<<12|(63&c)<<6|63&d)}},utfx.UTF16toUTF8=function(src,dst){for(var c1,c2=null;;){if(null===(c1=null!==c2?c2:src()))break;c1>=55296&&c1<=57343&&null!==(c2=src())&&c2>=56320&&c2<=57343?(dst(1024*(c1-55296)+c2-56320+65536),c2=null):dst(c1)}null!==c2&&dst(c2)},utfx.UTF8toUTF16=function(src,dst){var cp=null;for("number"==typeof src&&(cp=src,src=function(){return null});null!==cp||null!==(cp=src());)cp<=65535?dst(cp):(cp-=65536,dst(55296+(cp>>10)),dst(cp%1024+56320)),cp=null},utfx.encodeUTF16toUTF8=function(src,dst){utfx.UTF16toUTF8(src,function(cp){utfx.encodeUTF8(cp,dst)})},utfx.decodeUTF8toUTF16=function(src,dst){utfx.decodeUTF8(src,function(cp){utfx.UTF8toUTF16(cp,dst)})},utfx.calculateCodePoint=function(cp){return cp<128?1:cp<2048?2:cp<65536?3:4},utfx.calculateUTF8=function(src){for(var cp,l=0;null!==(cp=src());)l+=cp<128?1:cp<2048?2:cp<65536?3:4;return l},utfx.calculateUTF16asUTF8=function(src){var n=0,l=0;return utfx.UTF16toUTF8(src,function(cp){++n,l+=cp<128?1:cp<2048?2:cp<65536?3:4}),[n,l]},utfx}();return ByteBufferPrototype.toUTF8=function(begin,end){if(void 0===begin&&(begin=this.offset),void 0===end&&(end=this.limit),!this.noAssert){if("number"!=typeof begin||begin%1!=0)throw TypeError("Illegal begin: Not an integer");if(begin>>>=0,"number"!=typeof end||end%1!=0)throw TypeError("Illegal end: Not an integer");if(end>>>=0,begin<0||begin>end||end>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+begin+" <= "+end+" <= "+this.buffer.byteLength)}var sd;try{utfx.decodeUTF8toUTF16(function(){return begin<end?this.view[begin++]:null}.bind(this),sd=stringDestination())}catch(e){if(begin!==end)throw RangeError("Illegal range: Truncated data, "+begin+" != "+end)}return sd()},ByteBuffer.fromUTF8=function(str,littleEndian,noAssert){if(!noAssert&&"string"!=typeof str)throw TypeError("Illegal str: Not a string");var bb=new ByteBuffer(utfx.calculateUTF16asUTF8(stringSource(str),!0)[1],littleEndian,noAssert),i=0;return utfx.encodeUTF16toUTF8(stringSource(str),function(b){bb.view[i++]=b}),bb.limit=i,bb},ByteBuffer}),function(global,factory){"function"==typeof define&&define.amd?define(["bytebuffer"],factory):"function"==typeof require&&"object"==typeof module&&module&&module.exports?module.exports=factory(require("bytebuffer"),!0):(global.dcodeIO=global.dcodeIO||{}).ProtoBuf=factory(global.dcodeIO.ByteBuffer)}(this,function(ByteBuffer,isCommonJS){"use strict";var ProtoBuf={};return ProtoBuf.ByteBuffer=ByteBuffer,ProtoBuf.Long=ByteBuffer.Long||null,ProtoBuf.VERSION="5.0.1",ProtoBuf.WIRE_TYPES={},ProtoBuf.WIRE_TYPES.VARINT=0,ProtoBuf.WIRE_TYPES.BITS64=1,ProtoBuf.WIRE_TYPES.LDELIM=2,ProtoBuf.WIRE_TYPES.STARTGROUP=3,ProtoBuf.WIRE_TYPES.ENDGROUP=4,ProtoBuf.WIRE_TYPES.BITS32=5,ProtoBuf.PACKABLE_WIRE_TYPES=[ProtoBuf.WIRE_TYPES.VARINT,ProtoBuf.WIRE_TYPES.BITS64,ProtoBuf.WIRE_TYPES.BITS32],ProtoBuf.TYPES={int32:{name:"int32",wireType:ProtoBuf.WIRE_TYPES.VARINT,defaultValue:0},uint32:{name:"uint32",wireType:ProtoBuf.WIRE_TYPES.VARINT,defaultValue:0},sint32:{name:"sint32",wireType:ProtoBuf.WIRE_TYPES.VARINT,defaultValue:0},int64:{name:"int64",wireType:ProtoBuf.WIRE_TYPES.VARINT,defaultValue:ProtoBuf.Long?ProtoBuf.Long.ZERO:void 0},uint64:{name:"uint64",wireType:ProtoBuf.WIRE_TYPES.VARINT,defaultValue:ProtoBuf.Long?ProtoBuf.Long.UZERO:void 0},sint64:{name:"sint64",wireType:ProtoBuf.WIRE_TYPES.VARINT,defaultValue:ProtoBuf.Long?ProtoBuf.Long.ZERO:void 0},bool:{name:"bool",wireType:ProtoBuf.WIRE_TYPES.VARINT,defaultValue:!1},double:{name:"double",wireType:ProtoBuf.WIRE_TYPES.BITS64,defaultValue:0},string:{name:"string",wireType:ProtoBuf.WIRE_TYPES.LDELIM,defaultValue:""},bytes:{name:"bytes",wireType:ProtoBuf.WIRE_TYPES.LDELIM,defaultValue:null},fixed32:{name:"fixed32",wireType:ProtoBuf.WIRE_TYPES.BITS32,defaultValue:0},sfixed32:{name:"sfixed32",wireType:ProtoBuf.WIRE_TYPES.BITS32,defaultValue:0},fixed64:{name:"fixed64",wireType:ProtoBuf.WIRE_TYPES.BITS64,defaultValue:ProtoBuf.Long?ProtoBuf.Long.UZERO:void 0},sfixed64:{name:"sfixed64",wireType:ProtoBuf.WIRE_TYPES.BITS64,defaultValue:ProtoBuf.Long?ProtoBuf.Long.ZERO:void 0},float:{name:"float",wireType:ProtoBuf.WIRE_TYPES.BITS32,defaultValue:0},enum:{name:"enum",wireType:ProtoBuf.WIRE_TYPES.VARINT,defaultValue:0},message:{name:"message",wireType:ProtoBuf.WIRE_TYPES.LDELIM,defaultValue:null},group:{name:"group",wireType:ProtoBuf.WIRE_TYPES.STARTGROUP,defaultValue:null}},ProtoBuf.MAP_KEY_TYPES=[ProtoBuf.TYPES.int32,ProtoBuf.TYPES.sint32,ProtoBuf.TYPES.sfixed32,ProtoBuf.TYPES.uint32,ProtoBuf.TYPES.fixed32,ProtoBuf.TYPES.int64,ProtoBuf.TYPES.sint64,ProtoBuf.TYPES.sfixed64,ProtoBuf.TYPES.uint64,ProtoBuf.TYPES.fixed64,ProtoBuf.TYPES.bool,ProtoBuf.TYPES.string,ProtoBuf.TYPES.bytes],ProtoBuf.ID_MIN=1,ProtoBuf.ID_MAX=536870911,ProtoBuf.convertFieldsToCamelCase=!1,ProtoBuf.populateAccessors=!0,ProtoBuf.populateDefaults=!0,ProtoBuf.Util=function(){var Util={};return Util.IS_NODE=!("object"!=typeof process||process+""!="[object process]"||process.browser),Util.XHR=function(){for(var XMLHttpFactories=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],xhr=null,i=0;i<XMLHttpFactories.length;i++){try{xhr=XMLHttpFactories[i]()}catch(e){continue}break}if(!xhr)throw Error("XMLHttpRequest is not supported");return xhr},Util.fetch=function(path,callback){if(callback&&"function"!=typeof callback&&(callback=null),Util.IS_NODE){var fs=require("fs");if(callback)fs.readFile(path,function(err,data){callback(err?null:""+data)});else try{return fs.readFileSync(path)}catch(e){return null}}else{var xhr=Util.XHR();if(xhr.open("GET",path,!!callback),xhr.setRequestHeader("Accept","text/plain"),"function"==typeof xhr.overrideMimeType&&xhr.overrideMimeType("text/plain"),!callback)return xhr.send(null),200==xhr.status||0==xhr.status&&"string"==typeof xhr.responseText?xhr.responseText:null;if(xhr.onreadystatechange=function(){4==xhr.readyState&&callback(200==xhr.status||0==xhr.status&&"string"==typeof xhr.responseText?xhr.responseText:null)},4==xhr.readyState)return;xhr.send(null)}},Util.toCamelCase=function(str){return str.replace(/_([a-zA-Z])/g,function($0,$1){return $1.toUpperCase()})},Util}(),ProtoBuf.Lang={DELIM:/[\s\{\}=;:\[\],'"\(\)<>]/g,RULE:/^(?:required|optional|repeated|map)$/,TYPE:/^(?:double|float|int32|uint32|sint32|int64|uint64|sint64|fixed32|sfixed32|fixed64|sfixed64|bool|string|bytes)$/,NAME:/^[a-zA-Z_][a-zA-Z_0-9]*$/,TYPEDEF:/^[a-zA-Z][a-zA-Z_0-9]*$/,TYPEREF:/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)+$/,FQTYPEREF:/^(?:\.[a-zA-Z][a-zA-Z_0-9]*)+$/,NUMBER:/^-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+|([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?)|inf|nan)$/,NUMBER_DEC:/^(?:[1-9][0-9]*|0)$/,NUMBER_HEX:/^0[xX][0-9a-fA-F]+$/,NUMBER_OCT:/^0[0-7]+$/,NUMBER_FLT:/^([0-9]*(\.[0-9]*)?([Ee][+-]?[0-9]+)?|inf|nan)$/,BOOL:/^(?:true|false)$/i,ID:/^(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,NEGID:/^\-?(?:[1-9][0-9]*|0|0[xX][0-9a-fA-F]+|0[0-7]+)$/,WHITESPACE:/\s/,STRING:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,STRING_DQ:/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,STRING_SQ:/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g},ProtoBuf.DotProto=function(ProtoBuf,Lang){function mkId(value,mayBeNegative){var id=-1,sign=1;if("-"==value.charAt(0)&&(sign=-1,value=value.substring(1)),Lang.NUMBER_DEC.test(value))id=parseInt(value);else if(Lang.NUMBER_HEX.test(value))id=parseInt(value.substring(2),16);else{if(!Lang.NUMBER_OCT.test(value))throw Error("illegal id value: "+(sign<0?"-":"")+value);id=parseInt(value.substring(1),8)}if(id=sign*id|0,!mayBeNegative&&id<0)throw Error("illegal id value: "+(sign<0?"-":"")+value);return id}function mkNumber(val){var sign=1;if("-"==val.charAt(0)&&(sign=-1,val=val.substring(1)),Lang.NUMBER_DEC.test(val))return sign*parseInt(val,10);if(Lang.NUMBER_HEX.test(val))return sign*parseInt(val.substring(2),16);if(Lang.NUMBER_OCT.test(val))return sign*parseInt(val.substring(1),8);if("inf"===val)return sign*(1/0);if("nan"===val)return NaN;if(Lang.NUMBER_FLT.test(val))return sign*parseFloat(val);throw Error("illegal number value: "+(sign<0?"-":"")+val)}function setOption(options,name,value){void 0===options[name]?options[name]=value:(Array.isArray(options[name])||(options[name]=[options[name]]),options[name].push(value))}var DotProto={},Tokenizer=function(proto){this.source=proto+"",this.index=0,this.line=1,this.stack=[],this._stringOpen=null},TokenizerPrototype=Tokenizer.prototype;TokenizerPrototype._readString=function(){var re='"'===this._stringOpen?Lang.STRING_DQ:Lang.STRING_SQ;re.lastIndex=this.index-1;var match=re.exec(this.source);if(!match)throw Error("unterminated string");return this.index=re.lastIndex,this.stack.push(this._stringOpen),this._stringOpen=null,match[1]},TokenizerPrototype.next=function(){if(this.stack.length>0)return this.stack.shift();if(this.index>=this.source.length)return null;if(null!==this._stringOpen)return this._readString();var repeat,prev,next;do{for(repeat=!1;Lang.WHITESPACE.test(next=this.source.charAt(this.index));)if("\n"===next&&++this.line,++this.index===this.source.length)return null;if("/"===this.source.charAt(this.index))if(++this.index,"/"===this.source.charAt(this.index)){for(;"\n"!==this.source.charAt(++this.index);)if(this.index==this.source.length)return null;++this.index,++this.line,repeat=!0}else{if("*"!==(next=this.source.charAt(this.index)))return"/";do{if("\n"===next&&++this.line,++this.index===this.source.length)return null;prev=next,next=this.source.charAt(this.index)}while("*"!==prev||"/"!==next);++this.index,repeat=!0}}while(repeat);if(this.index===this.source.length)return null;var end=this.index;if(Lang.DELIM.lastIndex=0,!Lang.DELIM.test(this.source.charAt(end++)))for(;end<this.source.length&&!Lang.DELIM.test(this.source.charAt(end));)++end;var token=this.source.substring(this.index,this.index=end);return'"'!==token&&"'"!==token||(this._stringOpen=token),token},TokenizerPrototype.peek=function(){if(0===this.stack.length){var token=this.next();if(null===token)return null;this.stack.push(token)}return this.stack[0]},TokenizerPrototype.skip=function(expected){var actual=this.next();if(actual!==expected)throw Error("illegal '"+actual+"', '"+expected+"' expected")},TokenizerPrototype.omit=function(expected){return this.peek()===expected&&(this.next(),!0)},TokenizerPrototype.toString=function(){return"Tokenizer ("+this.index+"/"+this.source.length+" at line "+this.line+")"},DotProto.Tokenizer=Tokenizer;var Parser=function(source){this.tn=new Tokenizer(source),this.proto3=!1},ParserPrototype=Parser.prototype;return ParserPrototype.parse=function(){var token,weak,topLevel={name:"[ROOT]",package:null,messages:[],enums:[],imports:[],options:{},services:[]},head=!0;try{for(;token=this.tn.next();)switch(token){case"package":if(!head||null!==topLevel.package)throw Error("unexpected 'package'");if(token=this.tn.next(),!Lang.TYPEREF.test(token))throw Error("illegal package name: "+token);this.tn.skip(";"),topLevel.package=token;break;case"import":if(!head)throw Error("unexpected 'import'");("public"===(token=this.tn.peek())||(weak="weak"===token))&&this.tn.next(),token=this._readString(),this.tn.skip(";"),weak||topLevel.imports.push(token);break;case"syntax":if(!head)throw Error("unexpected 'syntax'");this.tn.skip("="),"proto3"===(topLevel.syntax=this._readString())&&(this.proto3=!0),this.tn.skip(";");break;case"message":this._parseMessage(topLevel,null),head=!1;break;case"enum":this._parseEnum(topLevel),head=!1;break;case"option":this._parseOption(topLevel);break;case"service":this._parseService(topLevel);break;case"extend":this._parseExtend(topLevel);break;default:throw Error("unexpected '"+token+"'")}}catch(e){throw e.message="Parse error at line "+this.tn.line+": "+e.message,e}return delete topLevel.name,topLevel},Parser.parse=function(source){return new Parser(source).parse()},ParserPrototype._readString=function(){var token,delim,value="";do{if("'"!==(delim=this.tn.next())&&'"'!==delim)throw Error("illegal string delimiter: "+delim);value+=this.tn.next(),this.tn.skip(delim),token=this.tn.peek()}while('"'===token||'"'===token);return value},ParserPrototype._readValue=function(mayBeTypeRef){var token=this.tn.peek();if('"'===token||"'"===token)return this._readString();if(this.tn.next(),Lang.NUMBER.test(token))return mkNumber(token);if(Lang.BOOL.test(token))return"true"===token.toLowerCase();if(mayBeTypeRef&&Lang.TYPEREF.test(token))return token;throw Error("illegal value: "+token)},ParserPrototype._parseOption=function(parent,isList){var token=this.tn.next(),custom=!1;if("("===token&&(custom=!0,token=this.tn.next()),!Lang.TYPEREF.test(token))throw Error("illegal option name: "+token);var name=token;custom&&(this.tn.skip(")"),name="("+name+")",token=this.tn.peek(),Lang.FQTYPEREF.test(token)&&(name+=token,this.tn.next())),this.tn.skip("="),this._parseOptionValue(parent,name),isList||this.tn.skip(";")},ParserPrototype._parseOptionValue=function(parent,name){var token=this.tn.peek();if("{"!==token)setOption(parent.options,name,this._readValue(!0));else for(this.tn.skip("{");"}"!==(token=this.tn.next());){if(!Lang.NAME.test(token))throw Error("illegal option name: "+name+"."+token);this.tn.omit(":")?setOption(parent.options,name+"."+token,this._readValue(!0)):this._parseOptionValue(parent,name+"."+token)}},ParserPrototype._parseService=function(parent){var token=this.tn.next();if(!Lang.NAME.test(token))throw Error("illegal service name at line "+this.tn.line+": "+token);var svc={name:token,rpc:{},options:{}};for(this.tn.skip("{");"}"!==(token=this.tn.next());)if("option"===token)this._parseOption(svc);else{if("rpc"!==token)throw Error("illegal service token: "+token);this._parseServiceRPC(svc)}this.tn.omit(";"),parent.services.push(svc)},ParserPrototype._parseServiceRPC=function(svc){var token=this.tn.next();if(!Lang.NAME.test(token))throw Error("illegal rpc service method name: "+token);var name=token,method={request:null,response:null,request_stream:!1,response_stream:!1,options:{}};if(this.tn.skip("("),"stream"===(token=this.tn.next()).toLowerCase()&&(method.request_stream=!0,token=this.tn.next()),!Lang.TYPEREF.test(token))throw Error("illegal rpc service request type: "+token);if(method.request=token,this.tn.skip(")"),"returns"!==(token=this.tn.next()).toLowerCase())throw Error("illegal rpc service request type delimiter: "+token);if(this.tn.skip("("),"stream"===(token=this.tn.next()).toLowerCase()&&(method.response_stream=!0,token=this.tn.next()),method.response=token,this.tn.skip(")"),"{"===(token=this.tn.peek())){for(this.tn.next();"}"!==(token=this.tn.next());){if("option"!==token)throw Error("illegal rpc service token: "+token);this._parseOption(method)}this.tn.omit(";")}else this.tn.skip(";");void 0===svc.rpc&&(svc.rpc={}),svc.rpc[name]=method},ParserPrototype._parseMessage=function(parent,fld){var isGroup=!!fld,token=this.tn.next(),msg={name:"",fields:[],enums:[],messages:[],options:{},services:[],oneofs:{}};if(!Lang.NAME.test(token))throw Error("illegal "+(isGroup?"group":"message")+" name: "+token);for(msg.name=token,isGroup&&(this.tn.skip("="),fld.id=mkId(this.tn.next()),msg.isGroup=!0),"["===(token=this.tn.peek())&&fld&&this._parseFieldOptions(fld),this.tn.skip("{");"}"!==(token=this.tn.next());)if(Lang.RULE.test(token))this._parseMessageField(msg,token);else if("oneof"===token)this._parseMessageOneOf(msg);else if("enum"===token)this._parseEnum(msg);else if("message"===token)this._parseMessage(msg);else if("option"===token)this._parseOption(msg);else if("service"===token)this._parseService(msg);else if("extensions"===token)msg.hasOwnProperty("extensions")?msg.extensions=msg.extensions.concat(this._parseExtensionRanges()):msg.extensions=this._parseExtensionRanges();else if("reserved"===token)this._parseIgnored();else if("extend"===token)this._parseExtend(msg);else{if(!Lang.TYPEREF.test(token))throw Error("illegal message token: "+token);if(!this.proto3)throw Error("illegal field rule: "+token);this._parseMessageField(msg,"optional",token)}return this.tn.omit(";"),parent.messages.push(msg),msg},ParserPrototype._parseIgnored=function(){for(;";"!==this.tn.peek();)this.tn.next();this.tn.skip(";")},ParserPrototype._parseMessageField=function(msg,rule,type){if(!Lang.RULE.test(rule))throw Error("illegal message field rule: "+rule);var token,fld={rule:rule,type:"",name:"",options:{},id:0};if("map"===rule){if(type)throw Error("illegal type: "+type);if(this.tn.skip("<"),token=this.tn.next(),!Lang.TYPE.test(token)&&!Lang.TYPEREF.test(token))throw Error("illegal message field type: "+token);if(fld.keytype=token,this.tn.skip(","),token=this.tn.next(),!Lang.TYPE.test(token)&&!Lang.TYPEREF.test(token))throw Error("illegal message field: "+token);if(fld.type=token,this.tn.skip(">"),token=this.tn.next(),!Lang.NAME.test(token))throw Error("illegal message field name: "+token);fld.name=token,this.tn.skip("="),fld.id=mkId(this.tn.next()),"["===(token=this.tn.peek())&&this._parseFieldOptions(fld),this.tn.skip(";")}else if("group"===(type=void 0!==type?type:this.tn.next())){var grp=this._parseMessage(msg,fld);if(!/^[A-Z]/.test(grp.name))throw Error("illegal group name: "+grp.name);fld.type=grp.name,fld.name=grp.name.toLowerCase(),this.tn.omit(";")}else{if(!Lang.TYPE.test(type)&&!Lang.TYPEREF.test(type))throw Error("illegal message field type: "+type);if(fld.type=type,token=this.tn.next(),!Lang.NAME.test(token))throw Error("illegal message field name: "+token);fld.name=token,this.tn.skip("="),fld.id=mkId(this.tn.next()),"["===(token=this.tn.peek())&&this._parseFieldOptions(fld),this.tn.skip(";")}return msg.fields.push(fld),fld},ParserPrototype._parseMessageOneOf=function(msg){var token=this.tn.next();if(!Lang.NAME.test(token))throw Error("illegal oneof name: "+token);var fld,name=token,fields=[];for(this.tn.skip("{");"}"!==(token=this.tn.next());)(fld=this._parseMessageField(msg,"optional",token)).oneof=name,fields.push(fld.id);this.tn.omit(";"),msg.oneofs[name]=fields},ParserPrototype._parseFieldOptions=function(fld){this.tn.skip("[");for(var first=!0;"]"!==this.tn.peek();)first||this.tn.skip(","),this._parseOption(fld,!0),first=!1;this.tn.next()},ParserPrototype._parseEnum=function(msg){var enm={name:"",values:[],options:{}},token=this.tn.next();if(!Lang.NAME.test(token))throw Error("illegal name: "+token);for(enm.name=token,this.tn.skip("{");"}"!==(token=this.tn.next());)if("option"===token)this._parseOption(enm);else{if(!Lang.NAME.test(token))throw Error("illegal name: "+token);this.tn.skip("=");var val={name:token,id:mkId(this.tn.next(),!0)};"["===(token=this.tn.peek())&&this._parseFieldOptions({options:{}}),this.tn.skip(";"),enm.values.push(val)}this.tn.omit(";"),msg.enums.push(enm)},ParserPrototype._parseExtensionRanges=function(){var token,range,value,ranges=[];do{for(range=[];;){switch(token=this.tn.next()){case"min":value=ProtoBuf.ID_MIN;break;case"max":value=ProtoBuf.ID_MAX;break;default:value=mkNumber(token)}if(range.push(value),2===range.length)break;if("to"!==this.tn.peek()){range.push(value);break}this.tn.next()}ranges.push(range)}while(this.tn.omit(","));return this.tn.skip(";"),ranges},ParserPrototype._parseExtend=function(parent){var token=this.tn.next();if(!Lang.TYPEREF.test(token))throw Error("illegal extend reference: "+token);var ext={ref:token,fields:[]};for(this.tn.skip("{");"}"!==(token=this.tn.next());)if(Lang.RULE.test(token))this._parseMessageField(ext,token);else{if(!Lang.TYPEREF.test(token))throw Error("illegal extend token: "+token);if(!this.proto3)throw Error("illegal field rule: "+token);this._parseMessageField(ext,"optional",token)}return this.tn.omit(";"),parent.messages.push(ext),ext},ParserPrototype.toString=function(){return"Parser at line "+this.tn.line},DotProto.Parser=Parser,DotProto}(ProtoBuf,ProtoBuf.Lang),ProtoBuf.Reflect=function(ProtoBuf){function mkDefault(type){if("string"==typeof type&&(type=ProtoBuf.TYPES[type]),void 0===type.defaultValue)throw Error("default value for type "+type.name+" is not supported");return type==ProtoBuf.TYPES.bytes?new ByteBuffer(0):type.defaultValue}function mkLong(value,unsigned){if(value&&"number"==typeof value.low&&"number"==typeof value.high&&"boolean"==typeof value.unsigned&&value.low===value.low&&value.high===value.high)return new ProtoBuf.Long(value.low,value.high,void 0===unsigned?value.unsigned:unsigned);if("string"==typeof value)return ProtoBuf.Long.fromString(value,unsigned||!1,10);if("number"==typeof value)return ProtoBuf.Long.fromNumber(value,unsigned||!1);throw Error("not convertible to Long")}function skipTillGroupEnd(expectedId,buf){var tag=buf.readVarint32(),wireType=7&tag,id=tag>>>3;switch(wireType){case ProtoBuf.WIRE_TYPES.VARINT:do{tag=buf.readUint8()}while(128==(128&tag));break;case ProtoBuf.WIRE_TYPES.BITS64:buf.offset+=8;break;case ProtoBuf.WIRE_TYPES.LDELIM:tag=buf.readVarint32(),buf.offset+=tag;break;case ProtoBuf.WIRE_TYPES.STARTGROUP:skipTillGroupEnd(id,buf);break;case ProtoBuf.WIRE_TYPES.ENDGROUP:if(id===expectedId)return!1;throw Error("Illegal GROUPEND after unknown group: "+id+" ("+expectedId+" expected)");case ProtoBuf.WIRE_TYPES.BITS32:buf.offset+=4;break;default:throw Error("Illegal wire type in unknown group "+expectedId+": "+wireType)}return!0}var Reflect={},T=function(builder,parent,name){this.builder=builder,this.parent=parent,this.name=name,this.className},TPrototype=T.prototype;TPrototype.fqn=function(){for(var name=this.name,ptr=this;;){if(null==(ptr=ptr.parent))break;name=ptr.name+"."+name}return name},TPrototype.toString=function(includeClass){return(includeClass?this.className+" ":"")+this.fqn()},TPrototype.build=function(){throw Error(this.toString(!0)+" cannot be built directly")},Reflect.T=T;var Namespace=function(builder,parent,name,options,syntax){T.call(this,builder,parent,name),this.className="Namespace",this.children=[],this.options=options||{},this.syntax=syntax||"proto2"},NamespacePrototype=Namespace.prototype=Object.create(T.prototype);NamespacePrototype.getChildren=function(type){if(null==(type=type||null))return this.children.slice();for(var children=[],i=0,k=this.children.length;i<k;++i)this.children[i]instanceof type&&children.push(this.children[i]);return children},NamespacePrototype.addChild=function(child){var other;if(other=this.getChild(child.name))if(other instanceof Message.Field&&other.name!==other.originalName&&null===this.getChild(other.originalName))other.name=other.originalName;else{if(!(child instanceof Message.Field&&child.name!==child.originalName&&null===this.getChild(child.originalName)))throw Error("Duplicate name in namespace "+this.toString(!0)+": "+child.name);child.name=child.originalName}this.children.push(child)},NamespacePrototype.getChild=function(nameOrId){for(var key="number"==typeof nameOrId?"id":"name",i=0,k=this.children.length;i<k;++i)if(this.children[i][key]===nameOrId)return this.children[i];return null},NamespacePrototype.resolve=function(qn,excludeNonNamespace){var part="string"==typeof qn?qn.split("."):qn,ptr=this,i=0;if(""===part[i]){for(;null!==ptr.parent;)ptr=ptr.parent;i++}var child;do{do{if(!(ptr instanceof Reflect.Namespace)){ptr=null;break}if(!(child=ptr.getChild(part[i]))||!(child instanceof Reflect.T)||excludeNonNamespace&&!(child instanceof Reflect.Namespace)){ptr=null;break}ptr=child,i++}while(i<part.length);if(null!=ptr)break;if(null!==this.parent)return this.parent.resolve(qn,excludeNonNamespace)}while(null!=ptr);return ptr},NamespacePrototype.qn=function(t){var part=[],ptr=t;do{part.unshift(ptr.name),ptr=ptr.parent}while(null!==ptr);for(var len=1;len<=part.length;len++){var qn=part.slice(part.length-len);if(t===this.resolve(qn,t instanceof Reflect.Namespace))return qn.join(".")}return t.fqn()},NamespacePrototype.build=function(){for(var child,ns={},children=this.children,i=0,k=children.length;i<k;++i)(child=children[i])instanceof Namespace&&(ns[child.name]=child.build());return Object.defineProperty&&Object.defineProperty(ns,"$options",{value:this.buildOpt()}),ns},NamespacePrototype.buildOpt=function(){for(var opt={},keys=Object.keys(this.options),i=0,k=keys.length;i<k;++i){var key=keys[i],val=this.options[keys[i]];opt[key]=val}return opt},NamespacePrototype.getOption=function(name){return void 0===name?this.options:void 0!==this.options[name]?this.options[name]:null},Reflect.Namespace=Namespace;var Element=function(type,resolvedType,isMapKey,syntax,name){if(this.type=type,this.resolvedType=resolvedType,this.isMapKey=isMapKey,this.syntax=syntax,this.name=name,isMapKey&&ProtoBuf.MAP_KEY_TYPES.indexOf(type)<0)throw Error("Invalid map key type: "+type.name)},ElementPrototype=Element.prototype;Element.defaultFieldValue=mkDefault,ElementPrototype.toString=function(){return(this.name||"")+(this.isMapKey?"map":"value")+" element"},ElementPrototype.verifyValue=function(value){function fail(val,msg){throw Error("Illegal value for "+self.toString(!0)+" of type "+self.type.name+": "+val+" ("+msg+")")}var self=this;switch(this.type){case ProtoBuf.TYPES.int32:case ProtoBuf.TYPES.sint32:case ProtoBuf.TYPES.sfixed32:return("number"!=typeof value||value===value&&value%1!=0)&&fail(typeof value,"not an integer"),value>4294967295?0|value:value;case ProtoBuf.TYPES.uint32:case ProtoBuf.TYPES.fixed32:return("number"!=typeof value||value===value&&value%1!=0)&&fail(typeof value,"not an integer"),value<0?value>>>0:value;case ProtoBuf.TYPES.int64:case ProtoBuf.TYPES.sint64:case ProtoBuf.TYPES.sfixed64:if(ProtoBuf.Long)try{return mkLong(value,!1)}catch(e){fail(typeof value,e.message)}else fail(typeof value,"requires Long.js");case ProtoBuf.TYPES.uint64:case ProtoBuf.TYPES.fixed64:if(ProtoBuf.Long)try{return mkLong(value,!0)}catch(e){fail(typeof value,e.message)}else fail(typeof value,"requires Long.js");case ProtoBuf.TYPES.bool:return"boolean"!=typeof value&&fail(typeof value,"not a boolean"),value;case ProtoBuf.TYPES.float:case ProtoBuf.TYPES.double:return"number"!=typeof value&&fail(typeof value,"not a number"),value;case ProtoBuf.TYPES.string:return"string"==typeof value||value&&value instanceof String||fail(typeof value,"not a string"),""+value;case ProtoBuf.TYPES.bytes:return ByteBuffer.isByteBuffer(value)?value:ByteBuffer.wrap(value,"base64");case ProtoBuf.TYPES.enum:var values=this.resolvedType.getChildren(ProtoBuf.Reflect.Enum.Value);for(i=0;i<values.length;i++){if(values[i].name==value)return values[i].id;if(values[i].id==value)return values[i].id}if("proto3"===this.syntax)return("number"!=typeof value||value===value&&value%1!=0)&&fail(typeof value,"not an integer"),(value>4294967295||value<0)&&fail(typeof value,"not in range for uint32"),value;fail(value,"not a valid enum value");case ProtoBuf.TYPES.group:case ProtoBuf.TYPES.message:if(value&&"object"==typeof value||fail(typeof value,"object expected"),value instanceof this.resolvedType.clazz)return value;if(value instanceof ProtoBuf.Builder.Message){var obj={};for(var i in value)value.hasOwnProperty(i)&&(obj[i]=value[i]);value=obj}return new this.resolvedType.clazz(value)}throw Error("[INTERNAL] Illegal value for "+this.toString(!0)+": "+value+" (undefined type "+this.type+")")},ElementPrototype.calculateLength=function(id,value){if(null===value)return 0;var n;switch(this.type){case ProtoBuf.TYPES.int32:return value<0?ByteBuffer.calculateVarint64(value):ByteBuffer.calculateVarint32(value);case ProtoBuf.TYPES.uint32:return ByteBuffer.calculateVarint32(value);case ProtoBuf.TYPES.sint32:return ByteBuffer.calculateVarint32(ByteBuffer.zigZagEncode32(value));case ProtoBuf.TYPES.fixed32:case ProtoBuf.TYPES.sfixed32:case ProtoBuf.TYPES.float:return 4;case ProtoBuf.TYPES.int64:case ProtoBuf.TYPES.uint64:return ByteBuffer.calculateVarint64(value);case ProtoBuf.TYPES.sint64:return ByteBuffer.calculateVarint64(ByteBuffer.zigZagEncode64(value));case ProtoBuf.TYPES.fixed64:case ProtoBuf.TYPES.sfixed64:return 8;case ProtoBuf.TYPES.bool:return 1;case ProtoBuf.TYPES.enum:return ByteBuffer.calculateVarint32(value);case ProtoBuf.TYPES.double:return 8;case ProtoBuf.TYPES.string:return n=ByteBuffer.calculateUTF8Bytes(value),ByteBuffer.calculateVarint32(n)+n;case ProtoBuf.TYPES.bytes:if(value.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+value.remaining()+" bytes remaining");return ByteBuffer.calculateVarint32(value.remaining())+value.remaining();case ProtoBuf.TYPES.message:return n=this.resolvedType.calculate(value),ByteBuffer.calculateVarint32(n)+n;case ProtoBuf.TYPES.group:return(n=this.resolvedType.calculate(value))+ByteBuffer.calculateVarint32(id<<3|ProtoBuf.WIRE_TYPES.ENDGROUP)}throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+value+" (unknown type)")},ElementPrototype.encodeValue=function(id,value,buffer){if(null===value)return buffer;switch(this.type){case ProtoBuf.TYPES.int32:value<0?buffer.writeVarint64(value):buffer.writeVarint32(value);break;case ProtoBuf.TYPES.uint32:buffer.writeVarint32(value);break;case ProtoBuf.TYPES.sint32:buffer.writeVarint32ZigZag(value);break;case ProtoBuf.TYPES.fixed32:buffer.writeUint32(value);break;case ProtoBuf.TYPES.sfixed32:buffer.writeInt32(value);break;case ProtoBuf.TYPES.int64:case ProtoBuf.TYPES.uint64:buffer.writeVarint64(value);break;case ProtoBuf.TYPES.sint64:buffer.writeVarint64ZigZag(value);break;case ProtoBuf.TYPES.fixed64:buffer.writeUint64(value);break;case ProtoBuf.TYPES.sfixed64:buffer.writeInt64(value);break;case ProtoBuf.TYPES.bool:"string"==typeof value?buffer.writeVarint32("false"===value.toLowerCase()?0:!!value):buffer.writeVarint32(value?1:0);break;case ProtoBuf.TYPES.enum:buffer.writeVarint32(value);break;case ProtoBuf.TYPES.float:buffer.writeFloat32(value);break;case ProtoBuf.TYPES.double:buffer.writeFloat64(value);break;case ProtoBuf.TYPES.string:buffer.writeVString(value);break;case ProtoBuf.TYPES.bytes:if(value.remaining()<0)throw Error("Illegal value for "+this.toString(!0)+": "+value.remaining()+" bytes remaining");var prevOffset=value.offset;buffer.writeVarint32(value.remaining()),buffer.append(value),value.offset=prevOffset;break;case ProtoBuf.TYPES.message:var bb=(new ByteBuffer).LE();this.resolvedType.encode(value,bb),buffer.writeVarint32(bb.offset),buffer.append(bb.flip());break;case ProtoBuf.TYPES.group:this.resolvedType.encode(value,buffer),buffer.writeVarint32(id<<3|ProtoBuf.WIRE_TYPES.ENDGROUP);break;default:throw Error("[INTERNAL] Illegal value to encode in "+this.toString(!0)+": "+value+" (unknown type)")}return buffer},ElementPrototype.decode=function(buffer,wireType,id){if(wireType!=this.type.wireType)throw Error("Unexpected wire type for element");var value,nBytes;switch(this.type){case ProtoBuf.TYPES.int32:return 0|buffer.readVarint32();case ProtoBuf.TYPES.uint32:return buffer.readVarint32()>>>0;case ProtoBuf.TYPES.sint32:return 0|buffer.readVarint32ZigZag();case ProtoBuf.TYPES.fixed32:return buffer.readUint32()>>>0;case ProtoBuf.TYPES.sfixed32:return 0|buffer.readInt32();case ProtoBuf.TYPES.int64:return buffer.readVarint64();case ProtoBuf.TYPES.uint64:return buffer.readVarint64().toUnsigned();case ProtoBuf.TYPES.sint64:return buffer.readVarint64ZigZag();case ProtoBuf.TYPES.fixed64:return buffer.readUint64();case ProtoBuf.TYPES.sfixed64:return buffer.readInt64();case ProtoBuf.TYPES.bool:return!!buffer.readVarint32();case ProtoBuf.TYPES.enum:return buffer.readVarint32();case ProtoBuf.TYPES.float:return buffer.readFloat();case ProtoBuf.TYPES.double:return buffer.readDouble();case ProtoBuf.TYPES.string:return buffer.readVString();case ProtoBuf.TYPES.bytes:if(nBytes=buffer.readVarint32(),buffer.remaining()<nBytes)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+nBytes+" required but got only "+buffer.remaining());return value=buffer.clone(),value.limit=value.offset+nBytes,buffer.offset+=nBytes,value;case ProtoBuf.TYPES.message:return nBytes=buffer.readVarint32(),this.resolvedType.decode(buffer,nBytes);case ProtoBuf.TYPES.group:return this.resolvedType.decode(buffer,-1,id)}throw Error("[INTERNAL] Illegal decode type")},ElementPrototype.valueFromString=function(str){if(!this.isMapKey)throw Error("valueFromString() called on non-map-key element");switch(this.type){case ProtoBuf.TYPES.int32:case ProtoBuf.TYPES.sint32:case ProtoBuf.TYPES.sfixed32:case ProtoBuf.TYPES.uint32:case ProtoBuf.TYPES.fixed32:return this.verifyValue(parseInt(str));case ProtoBuf.TYPES.int64:case ProtoBuf.TYPES.sint64:case ProtoBuf.TYPES.sfixed64:case ProtoBuf.TYPES.uint64:case ProtoBuf.TYPES.fixed64:return this.verifyValue(str);case ProtoBuf.TYPES.bool:return"true"===str;case ProtoBuf.TYPES.string:return this.verifyValue(str);case ProtoBuf.TYPES.bytes:return ByteBuffer.fromBinary(str)}},ElementPrototype.valueToString=function(value){if(!this.isMapKey)throw Error("valueToString() called on non-map-key element");return this.type===ProtoBuf.TYPES.bytes?value.toString("binary"):value.toString()},Reflect.Element=Element;var Message=function(builder,parent,name,options,isGroup,syntax){Namespace.call(this,builder,parent,name,options,syntax),this.className="Message",this.extensions=void 0,this.clazz=null,this.isGroup=!!isGroup,this._fields=null,this._fieldsById=null,this._fieldsByName=null},MessagePrototype=Message.prototype=Object.create(Namespace.prototype);MessagePrototype.build=function(rebuild){if(this.clazz&&!rebuild)return this.clazz;var clazz=function(ProtoBuf,T){function cloneRaw(obj,binaryAsBase64,longsAsStrings,resolvedType){if(null===obj||"object"!=typeof obj){if(resolvedType&&resolvedType instanceof ProtoBuf.Reflect.Enum){var name=ProtoBuf.Reflect.Enum.getName(resolvedType.object,obj);if(null!==name)return name}return obj}if(ByteBuffer.isByteBuffer(obj))return binaryAsBase64?obj.toBase64():obj.toBuffer();if(ProtoBuf.Long.isLong(obj))return longsAsStrings?obj.toString():ProtoBuf.Long.fromValue(obj);var clone;if(Array.isArray(obj))return clone=[],obj.forEach(function(v,k){clone[k]=cloneRaw(v,binaryAsBase64,longsAsStrings,resolvedType)}),clone;if(clone={},obj instanceof ProtoBuf.Map){for(var it=obj.entries(),e=it.next();!e.done;e=it.next())clone[obj.keyElem.valueToString(e.value[0])]=cloneRaw(e.value[1],binaryAsBase64,longsAsStrings,obj.valueElem.resolvedType);return clone}var type=obj.$type,field=void 0;for(var i in obj)obj.hasOwnProperty(i)&&(type&&(field=type.getChild(i))?clone[i]=cloneRaw(obj[i],binaryAsBase64,longsAsStrings,field.resolvedType):clone[i]=cloneRaw(obj[i],binaryAsBase64,longsAsStrings));return clone}var fields=T.getChildren(ProtoBuf.Reflect.Message.Field),oneofs=T.getChildren(ProtoBuf.Reflect.Message.OneOf),Message=function(values,var_args){ProtoBuf.Builder.Message.call(this);for(var i=0,k=oneofs.length;i<k;++i)this[oneofs[i].name]=null;for(i=0,k=fields.length;i<k;++i){var field=fields[i];this[field.name]=field.repeated?[]:field.map?new ProtoBuf.Map(field):null,!field.required&&"proto3"!==T.syntax||null===field.defaultValue||(this[field.name]=field.defaultValue)}if(arguments.length>0){var value;if(1!==arguments.length||null===values||"object"!=typeof values||!("function"!=typeof values.encode||values instanceof Message)||Array.isArray(values)||values instanceof ProtoBuf.Map||ByteBuffer.isByteBuffer(values)||values instanceof ArrayBuffer||ProtoBuf.Long&&values instanceof ProtoBuf.Long)for(i=0,k=arguments.length;i<k;++i)void 0!==(value=arguments[i])&&this.$set(fields[i].name,value);else this.$set(values)}},MessagePrototype=Message.prototype=Object.create(ProtoBuf.Builder.Message.prototype);MessagePrototype.add=function(key,value,noAssert){var field=T._fieldsByName[key];if(!noAssert){if(!field)throw Error(this+"#"+key+" is undefined");if(!(field instanceof ProtoBuf.Reflect.Message.Field))throw Error(this+"#"+key+" is not a field: "+field.toString(!0));if(!field.repeated)throw Error(this+"#"+key+" is not a repeated field");value=field.verifyValue(value,!0)}return null===this[key]&&(this[key]=[]),this[key].push(value),this},MessagePrototype.$add=MessagePrototype.add,MessagePrototype.set=function(keyOrObj,value,noAssert){if(keyOrObj&&"object"==typeof keyOrObj){noAssert=value;for(var ikey in keyOrObj)keyOrObj.hasOwnProperty(ikey)&&void 0!==(value=keyOrObj[ikey])&&this.$set(ikey,value,noAssert);return this}var field=T._fieldsByName[keyOrObj];if(noAssert)this[keyOrObj]=value;else{if(!field)throw Error(this+"#"+keyOrObj+" is not a field: undefined");if(!(field instanceof ProtoBuf.Reflect.Message.Field))throw Error(this+"#"+keyOrObj+" is not a field: "+field.toString(!0));this[field.name]=value=field.verifyValue(value)}if(field&&field.oneof){var currentField=this[field.oneof.name];null!==value?(null!==currentField&&currentField!==field.name&&(this[currentField]=null),this[field.oneof.name]=field.name):currentField===keyOrObj&&(this[field.oneof.name]=null)}return this},MessagePrototype.$set=MessagePrototype.set,MessagePrototype.get=function(key,noAssert){if(noAssert)return this[key];var field=T._fieldsByName[key];if(!(field&&field instanceof ProtoBuf.Reflect.Message.Field))throw Error(this+"#"+key+" is not a field: undefined");if(!(field instanceof ProtoBuf.Reflect.Message.Field))throw Error(this+"#"+key+" is not a field: "+field.toString(!0));return this[field.name]},MessagePrototype.$get=MessagePrototype.get;for(var i=0;i<fields.length;i++){var field=fields[i];field instanceof ProtoBuf.Reflect.Message.ExtensionField||T.builder.options.populateAccessors&&function(field){var Name=field.originalName.replace(/(_[a-zA-Z])/g,function(match){return match.toUpperCase().replace("_","")});Name=Name.substring(0,1).toUpperCase()+Name.substring(1);var name=field.originalName.replace(/([A-Z])/g,function(match){return"_"+match}),setter=function(value,noAssert){return this[field.name]=noAssert?value:field.verifyValue(value),this},getter=function(){return this[field.name]};null===T.getChild("set"+Name)&&(MessagePrototype["set"+Name]=setter),null===T.getChild("set_"+name)&&(MessagePrototype["set_"+name]=setter),null===T.getChild("get"+Name)&&(MessagePrototype["get"+Name]=getter),null===T.getChild("get_"+name)&&(MessagePrototype["get_"+name]=getter)}(field)}MessagePrototype.encode=function(buffer,noVerify){"boolean"==typeof buffer&&(noVerify=buffer,buffer=void 0);var isNew=!1;buffer||(buffer=new ByteBuffer,isNew=!0);var le=buffer.littleEndian;try{return T.encode(this,buffer.LE(),noVerify),(isNew?buffer.flip():buffer).LE(le)}catch(e){throw buffer.LE(le),e}},Message.encode=function(data,buffer,noVerify){return new Message(data).encode(buffer,noVerify)},MessagePrototype.calculate=function(){return T.calculate(this)},MessagePrototype.encodeDelimited=function(buffer,noVerify){var isNew=!1;buffer||(buffer=new ByteBuffer,isNew=!0);var enc=(new ByteBuffer).LE();return T.encode(this,enc,noVerify).flip(),buffer.writeVarint32(enc.remaining()),buffer.append(enc),isNew?buffer.flip():buffer},MessagePrototype.encodeAB=function(){try{return this.encode().toArrayBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toArrayBuffer()),e}},MessagePrototype.toArrayBuffer=MessagePrototype.encodeAB,MessagePrototype.encodeNB=function(){try{return this.encode().toBuffer()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBuffer()),e}},MessagePrototype.toBuffer=MessagePrototype.encodeNB,MessagePrototype.encode64=function(){try{return this.encode().toBase64()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toBase64()),e}},MessagePrototype.toBase64=MessagePrototype.encode64,MessagePrototype.encodeHex=function(){try{return this.encode().toHex()}catch(e){throw e.encoded&&(e.encoded=e.encoded.toHex()),e}},MessagePrototype.toHex=MessagePrototype.encodeHex,MessagePrototype.toRaw=function(binaryAsBase64,longsAsStrings){return cloneRaw(this,!!binaryAsBase64,!!longsAsStrings,this.$type)},MessagePrototype.encodeJSON=function(){return JSON.stringify(cloneRaw(this,!0,!0,this.$type))},Message.decode=function(buffer,length,enc){"string"==typeof length&&(enc=length,length=-1),"string"==typeof buffer&&(buffer=ByteBuffer.wrap(buffer,enc||"base64"));var le=(buffer=ByteBuffer.isByteBuffer(buffer)?buffer:ByteBuffer.wrap(buffer)).littleEndian;try{var msg=T.decode(buffer.LE());return buffer.LE(le),msg}catch(e){throw buffer.LE(le),e}},Message.decodeDelimited=function(buffer,enc){if("string"==typeof buffer&&(buffer=ByteBuffer.wrap(buffer,enc||"base64")),(buffer=ByteBuffer.isByteBuffer(buffer)?buffer:ByteBuffer.wrap(buffer)).remaining()<1)return null;var off=buffer.offset,len=buffer.readVarint32();if(buffer.remaining()<len)return buffer.offset=off,null;try{var msg=T.decode(buffer.slice(buffer.offset,buffer.offset+len).LE());return buffer.offset+=len,msg}catch(err){throw buffer.offset+=len,err}},Message.decode64=function(str){return Message.decode(str,"base64")},Message.decodeHex=function(str){return Message.decode(str,"hex")},Message.decodeJSON=function(str){return new Message(JSON.parse(str))},MessagePrototype.toString=function(){return T.toString()};return Object.defineProperty&&(Object.defineProperty(Message,"$options",{value:T.buildOpt()}),Object.defineProperty(MessagePrototype,"$options",{value:Message.$options}),Object.defineProperty(Message,"$type",{value:T}),Object.defineProperty(MessagePrototype,"$type",{value:T})),Message}(ProtoBuf,this);this._fields=[],this._fieldsById={},this._fieldsByName={};for(var child,i=0,k=this.children.length;i<k;i++)if((child=this.children[i])instanceof Enum||child instanceof Message||child instanceof Service){if(clazz.hasOwnProperty(child.name))throw Error("Illegal reflect child of "+this.toString(!0)+": "+child.toString(!0)+" cannot override static property '"+child.name+"'");clazz[child.name]=child.build()}else if(child instanceof Message.Field)child.build(),this._fields.push(child),this._fieldsById[child.id]=child,this._fieldsByName[child.name]=child;else if(!(child instanceof Message.OneOf||child instanceof Extension))throw Error("Illegal reflect child of "+this.toString(!0)+": "+this.children[i].toString(!0));return this.clazz=clazz},MessagePrototype.encode=function(message,buffer,noVerify){for(var field,val,fieldMissing=null,i=0,k=this._fields.length;i<k;++i)val=message[(field=this._fields[i]).name],field.required&&null===val?null===fieldMissing&&(fieldMissing=field):field.encode(noVerify?val:field.verifyValue(val),buffer,message);if(null!==fieldMissing){var err=Error("Missing at least one required field for "+this.toString(!0)+": "+fieldMissing);throw err.encoded=buffer,err}return buffer},MessagePrototype.calculate=function(message){for(var field,val,n=0,i=0,k=this._fields.length;i<k;++i){if(field=this._fields[i],val=message[field.name],field.required&&null===val)throw Error("Missing at least one required field for "+this.toString(!0)+": "+field);n+=field.calculate(val,message)}return n},MessagePrototype.decode=function(buffer,length,expectedGroupEndId){length="number"==typeof length?length:-1;for(var tag,wireType,id,field,start=buffer.offset,msg=new this.clazz;buffer.offset<start+length||-1===length&&buffer.remaining()>0;){if(tag=buffer.readVarint32(),wireType=7&tag,id=tag>>>3,wireType===ProtoBuf.WIRE_TYPES.ENDGROUP){if(id!==expectedGroupEndId)throw Error("Illegal group end indicator for "+this.toString(!0)+": "+id+" ("+(expectedGroupEndId?expectedGroupEndId+" expected":"not a group")+")");break}if(field=this._fieldsById[id]){if(field.repeated&&!field.options.packed)msg[field.name].push(field.decode(wireType,buffer));else if(field.map){var keyval=field.decode(wireType,buffer);msg[field.name].set(keyval[0],keyval[1])}else if(msg[field.name]=field.decode(wireType,buffer),field.oneof){var currentField=msg[field.oneof.name];null!==currentField&&currentField!==field.name&&(msg[currentField]=null),msg[field.oneof.name]=field.name}}else switch(wireType){case ProtoBuf.WIRE_TYPES.VARINT:buffer.readVarint32();break;case ProtoBuf.WIRE_TYPES.BITS32:buffer.offset+=4;break;case ProtoBuf.WIRE_TYPES.BITS64:buffer.offset+=8;break;case ProtoBuf.WIRE_TYPES.LDELIM:var len=buffer.readVarint32();buffer.offset+=len;break;case ProtoBuf.WIRE_TYPES.STARTGROUP:for(;skipTillGroupEnd(id,buffer););break;default:throw Error("Illegal wire type for unknown field "+id+" in "+this.toString(!0)+"#decode: "+wireType)}}for(var i=0,k=this._fields.length;i<k;++i)if(field=this._fields[i],null===msg[field.name])if("proto3"===this.syntax)msg[field.name]=field.defaultValue;else{if(field.required){var err=Error("Missing at least one required field for "+this.toString(!0)+": "+field.name);throw err.decoded=msg,err}ProtoBuf.populateDefaults&&null!==field.defaultValue&&(msg[field.name]=field.defaultValue)}return msg},Reflect.Message=Message;var Field=function(builder,message,rule,keytype,type,name,id,options,oneof,syntax){T.call(this,builder,message,name),this.className="Message.Field",this.required="required"===rule,this.repeated="repeated"===rule,this.map="map"===rule,this.keyType=keytype||null,this.type=type,this.resolvedType=null,this.id=id,this.options=options||{},this.defaultValue=null,this.oneof=oneof||null,this.syntax=syntax||"proto2",this.originalName=this.name,this.element=null,this.keyElement=null,!this.builder.options.convertFieldsToCamelCase||this instanceof Message.ExtensionField||(this.name=ProtoBuf.Util.toCamelCase(this.name))},FieldPrototype=Field.prototype=Object.create(T.prototype);FieldPrototype.build=function(){this.element=new Element(this.type,this.resolvedType,!1,this.syntax,this.name),this.map&&(this.keyElement=new Element(this.keyType,void 0,!0,this.syntax,this.name)),"proto3"!==this.syntax||this.repeated||this.map?void 0!==this.options.default&&(this.defaultValue=this.verifyValue(this.options.default)):this.defaultValue=Element.defaultFieldValue(this.type)},FieldPrototype.verifyValue=function(value,skipRepeated){function fail(val,msg){throw Error("Illegal value for "+self.toString(!0)+" of type "+self.type.name+": "+val+" ("+msg+")")}skipRepeated=skipRepeated||!1;var self=this;if(null===value)return this.required&&fail(typeof value,"required"),"proto3"===this.syntax&&this.type!==ProtoBuf.TYPES.message&&fail(typeof value,"proto3 field without field presence cannot be null"),null;var i;if(this.repeated&&!skipRepeated){Array.isArray(value)||(value=[value]);var res=[];for(i=0;i<value.length;i++)res.push(this.element.verifyValue(value[i]));return res}return this.map&&!skipRepeated?value instanceof ProtoBuf.Map?value:(value instanceof Object||fail(typeof value,"expected ProtoBuf.Map or raw object for map field"),new ProtoBuf.Map(this,value)):(!this.repeated&&Array.isArray(value)&&fail(typeof value,"no array expected"),this.element.verifyValue(value))},FieldPrototype.hasWirePresence=function(value,message){if("proto3"!==this.syntax)return null!==value;if(this.oneof&&message[this.oneof.name]===this.name)return!0;switch(this.type){case ProtoBuf.TYPES.int32:case ProtoBuf.TYPES.sint32:case ProtoBuf.TYPES.sfixed32:case ProtoBuf.TYPES.uint32:case ProtoBuf.TYPES.fixed32:return 0!==value;case ProtoBuf.TYPES.int64:case ProtoBuf.TYPES.sint64:case ProtoBuf.TYPES.sfixed64:case ProtoBuf.TYPES.uint64:case ProtoBuf.TYPES.fixed64:return 0!==value.low||0!==value.high;case ProtoBuf.TYPES.bool:return value;case ProtoBuf.TYPES.float:case ProtoBuf.TYPES.double:return 0!==value;case ProtoBuf.TYPES.string:return value.length>0;case ProtoBuf.TYPES.bytes:return value.remaining()>0;case ProtoBuf.TYPES.enum:return 0!==value;case ProtoBuf.TYPES.message:return null!==value;default:return!0}},FieldPrototype.encode=function(value,buffer,message){if(null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===value||this.repeated&&0==value.length)return buffer;try{if(this.repeated){var i;if(this.options.packed&&ProtoBuf.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){buffer.writeVarint32(this.id<<3|ProtoBuf.WIRE_TYPES.LDELIM),buffer.ensureCapacity(buffer.offset+=1);var start=buffer.offset;for(i=0;i<value.length;i++)this.element.encodeValue(this.id,value[i],buffer);var len=buffer.offset-start,varintLen=ByteBuffer.calculateVarint32(len);if(varintLen>1){var contents=buffer.slice(start,buffer.offset);start+=varintLen-1,buffer.offset=start,buffer.append(contents)}buffer.writeVarint32(len,start-varintLen)}else for(i=0;i<value.length;i++)buffer.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,value[i],buffer)}else this.map?value.forEach(function(val,key,m){var length=ByteBuffer.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,key)+ByteBuffer.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,val);buffer.writeVarint32(this.id<<3|ProtoBuf.WIRE_TYPES.LDELIM),buffer.writeVarint32(length),buffer.writeVarint32(8|this.keyType.wireType),this.keyElement.encodeValue(1,key,buffer),buffer.writeVarint32(16|this.type.wireType),this.element.encodeValue(2,val,buffer)},this):this.hasWirePresence(value,message)&&(buffer.writeVarint32(this.id<<3|this.type.wireType),this.element.encodeValue(this.id,value,buffer))}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+value+" ("+e+")")}return buffer},FieldPrototype.calculate=function(value,message){if(value=this.verifyValue(value),null===this.type||"object"!=typeof this.type)throw Error("[INTERNAL] Unresolved type in "+this.toString(!0)+": "+this.type);if(null===value||this.repeated&&0==value.length)return 0;var n=0;try{if(this.repeated){var i,ni;if(this.options.packed&&ProtoBuf.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0){for(n+=ByteBuffer.calculateVarint32(this.id<<3|ProtoBuf.WIRE_TYPES.LDELIM),ni=0,i=0;i<value.length;i++)ni+=this.element.calculateLength(this.id,value[i]);n+=ByteBuffer.calculateVarint32(ni),n+=ni}else for(i=0;i<value.length;i++)n+=ByteBuffer.calculateVarint32(this.id<<3|this.type.wireType),n+=this.element.calculateLength(this.id,value[i])}else this.map?value.forEach(function(val,key,m){var length=ByteBuffer.calculateVarint32(8|this.keyType.wireType)+this.keyElement.calculateLength(1,key)+ByteBuffer.calculateVarint32(16|this.type.wireType)+this.element.calculateLength(2,val);n+=ByteBuffer.calculateVarint32(this.id<<3|ProtoBuf.WIRE_TYPES.LDELIM),n+=ByteBuffer.calculateVarint32(length),n+=length},this):this.hasWirePresence(value,message)&&(n+=ByteBuffer.calculateVarint32(this.id<<3|this.type.wireType),n+=this.element.calculateLength(this.id,value))}catch(e){throw Error("Illegal value for "+this.toString(!0)+": "+value+" ("+e+")")}return n},FieldPrototype.decode=function(wireType,buffer,skipRepeated){var value,nBytes;if(!(!this.map&&wireType==this.type.wireType||!skipRepeated&&this.repeated&&this.options.packed&&wireType==ProtoBuf.WIRE_TYPES.LDELIM||this.map&&wireType==ProtoBuf.WIRE_TYPES.LDELIM))throw Error("Illegal wire type for field "+this.toString(!0)+": "+wireType+" ("+this.type.wireType+" expected)");if(wireType==ProtoBuf.WIRE_TYPES.LDELIM&&this.repeated&&this.options.packed&&ProtoBuf.PACKABLE_WIRE_TYPES.indexOf(this.type.wireType)>=0&&!skipRepeated){nBytes=buffer.readVarint32(),nBytes=buffer.offset+nBytes;for(var values=[];buffer.offset<nBytes;)values.push(this.decode(this.type.wireType,buffer,!0));return values}if(this.map){var key=Element.defaultFieldValue(this.keyType);if(value=Element.defaultFieldValue(this.type),nBytes=buffer.readVarint32(),buffer.remaining()<nBytes)throw Error("Illegal number of bytes for "+this.toString(!0)+": "+nBytes+" required but got only "+buffer.remaining());var msgbuf=buffer.clone();for(msgbuf.limit=msgbuf.offset+nBytes,buffer.offset+=nBytes;msgbuf.remaining()>0;){var tag=msgbuf.readVarint32();wireType=7&tag;var id=tag>>>3;if(1===id)key=this.keyElement.decode(msgbuf,wireType,id);else{if(2!==id)throw Error("Unexpected tag in map field key/value submessage");value=this.element.decode(msgbuf,wireType,id)}}return[key,value]}return this.element.decode(buffer,wireType,this.id)},Reflect.Message.Field=Field;var ExtensionField=function(builder,message,rule,type,name,id,options){Field.call(this,builder,message,rule,null,type,name,id,options),this.extension};ExtensionField.prototype=Object.create(Field.prototype),Reflect.Message.ExtensionField=ExtensionField;var OneOf=function(builder,message,name){T.call(this,builder,message,name),this.fields=[]};Reflect.Message.OneOf=OneOf;var Enum=function(builder,parent,name,options,syntax){Namespace.call(this,builder,parent,name,options,syntax),this.className="Enum",this.object=null};Enum.getName=function(enm,value){for(var key,keys=Object.keys(enm),i=0;i<keys.length;++i)if(enm[key=keys[i]]===value)return key;return null},(Enum.prototype=Object.create(Namespace.prototype)).build=function(rebuild){if(this.object&&!rebuild)return this.object;for(var enm=new ProtoBuf.Builder.Enum,values=this.getChildren(Enum.Value),i=0,k=values.length;i<k;++i)enm[values[i].name]=values[i].id;return Object.defineProperty&&Object.defineProperty(enm,"$options",{value:this.buildOpt(),enumerable:!1}),this.object=enm},Reflect.Enum=Enum;var Value=function(builder,enm,name,id){T.call(this,builder,enm,name),this.className="Enum.Value",this.id=id};Value.prototype=Object.create(T.prototype),Reflect.Enum.Value=Value;var Extension=function(builder,parent,name,field){T.call(this,builder,parent,name),this.field=field};Extension.prototype=Object.create(T.prototype),Reflect.Extension=Extension;var Service=function(builder,root,name,options){Namespace.call(this,builder,root,name,options),this.className="Service",this.clazz=null};(Service.prototype=Object.create(Namespace.prototype)).build=function(rebuild){return this.clazz&&!rebuild?this.clazz:this.clazz=function(ProtoBuf,T){for(var Service=function(rpcImpl){ProtoBuf.Builder.Service.call(this),this.rpcImpl=rpcImpl||function(name,msg,callback){setTimeout(callback.bind(this,Error("Not implemented, see: https://github.com/dcodeIO/ProtoBuf.js/wiki/Services")),0)}},ServicePrototype=Service.prototype=Object.create(ProtoBuf.Builder.Service.prototype),rpc=T.getChildren(ProtoBuf.Reflect.Service.RPCMethod),i=0;i<rpc.length;i++)!function(method){ServicePrototype[method.name]=function(req,callback){try{try{req=method.resolvedRequestType.clazz.decode(ByteBuffer.wrap(req))}catch(err){if(!(err instanceof TypeError))throw err}if(null===req||"object"!=typeof req)throw Error("Illegal arguments");req instanceof method.resolvedRequestType.clazz||(req=new method.resolvedRequestType.clazz(req)),this.rpcImpl(method.fqn(),req,function(err,res){if(err)callback(err);else{null===res&&(res="");try{res=method.resolvedResponseType.clazz.decode(res)}catch(notABuffer){}res&&res instanceof method.resolvedResponseType.clazz?callback(null,res):callback(Error("Illegal response type received in service method "+T.name+"#"+method.name))}})}catch(err){setTimeout(callback.bind(this,err),0)}},Service[method.name]=function(rpcImpl,req,callback){new Service(rpcImpl)[method.name](req,callback)},Object.defineProperty&&(Object.defineProperty(Service[method.name],"$options",{value:method.buildOpt()}),Object.defineProperty(ServicePrototype[method.name],"$options",{value:Service[method.name].$options}))}(rpc[i]);return Object.defineProperty&&(Object.defineProperty(Service,"$options",{value:T.buildOpt()}),Object.defineProperty(ServicePrototype,"$options",{value:Service.$options}),Object.defineProperty(Service,"$type",{value:T}),Object.defineProperty(ServicePrototype,"$type",{value:T})),Service}(ProtoBuf,this)},Reflect.Service=Service;var Method=function(builder,svc,name,options){T.call(this,builder,svc,name),this.className="Service.Method",this.options=options||{}};(Method.prototype=Object.create(T.prototype)).buildOpt=NamespacePrototype.buildOpt,Reflect.Service.Method=Method;var RPCMethod=function(builder,svc,name,request,response,request_stream,response_stream,options){Method.call(this,builder,svc,name,options),this.className="Service.RPCMethod",this.requestName=request,this.responseName=response,this.requestStream=request_stream,this.responseStream=response_stream,this.resolvedRequestType=null,this.resolvedResponseType=null};return RPCMethod.prototype=Object.create(Method.prototype),Reflect.Service.RPCMethod=RPCMethod,Reflect}(ProtoBuf),ProtoBuf.Builder=function(ProtoBuf,Lang,Reflect){function propagateSyntax(parent){parent.messages&&parent.messages.forEach(function(child){child.syntax=parent.syntax,propagateSyntax(child)}),parent.enums&&parent.enums.forEach(function(child){child.syntax=parent.syntax})}var Builder=function(options){this.ns=new Reflect.Namespace(this,null,""),this.ptr=this.ns,this.resolved=!1,this.result=null,this.files={},this.importRoot=null,this.options=options||{}},BuilderPrototype=Builder.prototype;return Builder.isMessage=function(def){return"string"==typeof def.name&&(void 0===def.values&&void 0===def.rpc)},Builder.isMessageField=function(def){return"string"==typeof def.rule&&"string"==typeof def.name&&"string"==typeof def.type&&void 0!==def.id},Builder.isEnum=function(def){return"string"==typeof def.name&&!(void 0===def.values||!Array.isArray(def.values)||0===def.values.length)},Builder.isService=function(def){return!("string"!=typeof def.name||"object"!=typeof def.rpc||!def.rpc)},Builder.isExtend=function(def){return"string"==typeof def.ref},BuilderPrototype.reset=function(){return this.ptr=this.ns,this},BuilderPrototype.define=function(namespace){if("string"!=typeof namespace||!Lang.TYPEREF.test(namespace))throw Error("illegal namespace: "+namespace);return namespace.split(".").forEach(function(part){var ns=this.ptr.getChild(part);null===ns&&this.ptr.addChild(ns=new Reflect.Namespace(this,this.ptr,part)),this.ptr=ns},this),this},BuilderPrototype.create=function(defs){if(!defs)return this;if(Array.isArray(defs)){if(0===defs.length)return this;defs=defs.slice()}else defs=[defs];for(var stack=[defs];stack.length>0;){if(defs=stack.pop(),!Array.isArray(defs))throw Error("not a valid namespace: "+JSON.stringify(defs));for(;defs.length>0;){var def=defs.shift();if(Builder.isMessage(def)){var obj=new Reflect.Message(this,this.ptr,def.name,def.options,def.isGroup,def.syntax),oneofs={};def.oneofs&&Object.keys(def.oneofs).forEach(function(name){obj.addChild(oneofs[name]=new Reflect.Message.OneOf(this,obj,name))},this),def.fields&&def.fields.forEach(function(fld){if(null!==obj.getChild(0|fld.id))throw Error("duplicate or invalid field id in "+obj.name+": "+fld.id);if(fld.options&&"object"!=typeof fld.options)throw Error("illegal field options in "+obj.name+"#"+fld.name);var oneof=null;if("string"==typeof fld.oneof&&!(oneof=oneofs[fld.oneof]))throw Error("illegal oneof in "+obj.name+"#"+fld.name+": "+fld.oneof);fld=new Reflect.Message.Field(this,obj,fld.rule,fld.keytype,fld.type,fld.name,fld.id,fld.options,oneof,def.syntax),oneof&&oneof.fields.push(fld),obj.addChild(fld)},this);var subObj=[];if(def.enums&&def.enums.forEach(function(enm){subObj.push(enm)}),def.messages&&def.messages.forEach(function(msg){subObj.push(msg)}),def.services&&def.services.forEach(function(svc){subObj.push(svc)}),def.extensions&&("number"==typeof def.extensions[0]?obj.extensions=[def.extensions]:obj.extensions=def.extensions),this.ptr.addChild(obj),subObj.length>0){stack.push(defs),defs=subObj,subObj=null,this.ptr=obj,obj=null;continue}subObj=null}else if(Builder.isEnum(def))obj=new Reflect.Enum(this,this.ptr,def.name,def.options,def.syntax),def.values.forEach(function(val){obj.addChild(new Reflect.Enum.Value(this,obj,val.name,val.id))},this),this.ptr.addChild(obj);else if(Builder.isService(def))obj=new Reflect.Service(this,this.ptr,def.name,def.options),Object.keys(def.rpc).forEach(function(name){var mtd=def.rpc[name];obj.addChild(new Reflect.Service.RPCMethod(this,obj,name,mtd.request,mtd.response,!!mtd.request_stream,!!mtd.response_stream,mtd.options))},this),this.ptr.addChild(obj);else{if(!Builder.isExtend(def))throw Error("not a valid definition: "+JSON.stringify(def));if(obj=this.ptr.resolve(def.ref,!0))def.fields.forEach(function(fld){if(null!==obj.getChild(0|fld.id))throw Error("duplicate extended field id in "+obj.name+": "+fld.id);if(obj.extensions){var valid=!1;if(obj.extensions.forEach(function(range){fld.id>=range[0]&&fld.id<=range[1]&&(valid=!0)}),!valid)throw Error("illegal extended field id in "+obj.name+": "+fld.id+" (not within valid ranges)")}var name=fld.name;this.options.convertFieldsToCamelCase&&(name=ProtoBuf.Util.toCamelCase(name));var field=new Reflect.Message.ExtensionField(this,obj,fld.rule,fld.type,this.ptr.fqn()+"."+name,fld.id,fld.options),ext=new Reflect.Extension(this,this.ptr,fld.name,field);field.extension=ext,this.ptr.addChild(ext),obj.addChild(field)},this);else if(!/\.?google\.protobuf\./.test(def.ref))throw Error("extended message "+def.ref+" is not defined")}def=null,obj=null}defs=null,this.ptr=this.ptr.parent}return this.resolved=!1,this.result=null,this},BuilderPrototype.import=function(json,filename){var delim="/";if("string"==typeof filename){if(ProtoBuf.Util.IS_NODE&&(filename=require("path").resolve(filename)),!0===this.files[filename])return this.reset();this.files[filename]=!0}else if("object"==typeof filename){var root=filename.root;ProtoBuf.Util.IS_NODE&&(root=require("path").resolve(root)),(root.indexOf("\\")>=0||filename.file.indexOf("\\")>=0)&&(delim="\\");var fname=root+delim+filename.file;if(!0===this.files[fname])return this.reset();this.files[fname]=!0}if(json.imports&&json.imports.length>0){var importRoot,resetRoot=!1;"object"==typeof filename?(this.importRoot=filename.root,resetRoot=!0,importRoot=this.importRoot,filename=filename.file,(importRoot.indexOf("\\")>=0||filename.indexOf("\\")>=0)&&(delim="\\")):"string"==typeof filename?this.importRoot?importRoot=this.importRoot:filename.indexOf("/")>=0?""===(importRoot=filename.replace(/\/[^\/]*$/,""))&&(importRoot="/"):filename.indexOf("\\")>=0?(importRoot=filename.replace(/\\[^\\]*$/,""),delim="\\"):importRoot=".":importRoot=null;for(var i=0;i<json.imports.length;i++)if("string"==typeof json.imports[i]){if(!importRoot)throw Error("cannot determine import root");var importFilename=json.imports[i];if("google/protobuf/descriptor.proto"===importFilename)continue;if(importFilename=importRoot+delim+importFilename,!0===this.files[importFilename])continue;/\.proto$/i.test(importFilename)&&!ProtoBuf.DotProto&&(importFilename=importFilename.replace(/\.proto$/,".json"));var contents=ProtoBuf.Util.fetch(importFilename);if(null===contents)throw Error("failed to import '"+importFilename+"' in '"+filename+"': file not found");/\.json$/i.test(importFilename)?this.import(JSON.parse(contents+""),importFilename):this.import(ProtoBuf.DotProto.Parser.parse(contents),importFilename)}else filename?/\.(\w+)$/.test(filename)?this.import(json.imports[i],filename.replace(/^(.+)\.(\w+)$/,function($0,$1,$2){return $1+"_import"+i+"."+$2})):this.import(json.imports[i],filename+"_import"+i):this.import(json.imports[i]);resetRoot&&(this.importRoot=null)}json.package&&this.define(json.package),json.syntax&&propagateSyntax(json);var base=this.ptr;return json.options&&Object.keys(json.options).forEach(function(key){base.options[key]=json.options[key]}),json.messages&&(this.create(json.messages),this.ptr=base),json.enums&&(this.create(json.enums),this.ptr=base),json.services&&(this.create(json.services),this.ptr=base),json.extends&&this.create(json.extends),this.reset()},BuilderPrototype.resolveAll=function(){var res;if(null==this.ptr||"object"==typeof this.ptr.type)return this;if(this.ptr instanceof Reflect.Namespace)this.ptr.children.forEach(function(child){this.ptr=child,this.resolveAll()},this);else if(this.ptr instanceof Reflect.Message.Field){if(Lang.TYPE.test(this.ptr.type))this.ptr.type=ProtoBuf.TYPES[this.ptr.type];else{if(!Lang.TYPEREF.test(this.ptr.type))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(!(res=(this.ptr instanceof Reflect.Message.ExtensionField?this.ptr.extension.parent:this.ptr.parent).resolve(this.ptr.type,!0)))throw Error("unresolvable type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);if(this.ptr.resolvedType=res,res instanceof Reflect.Enum){if(this.ptr.type=ProtoBuf.TYPES.enum,"proto3"===this.ptr.syntax&&"proto3"!==res.syntax)throw Error("proto3 message cannot reference proto2 enum")}else{if(!(res instanceof Reflect.Message))throw Error("illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.type);this.ptr.type=res.isGroup?ProtoBuf.TYPES.group:ProtoBuf.TYPES.message}}if(this.ptr.map){if(!Lang.TYPE.test(this.ptr.keyType))throw Error("illegal key type for map field in "+this.ptr.toString(!0)+": "+this.ptr.keyType);this.ptr.keyType=ProtoBuf.TYPES[this.ptr.keyType]}}else if(this.ptr instanceof ProtoBuf.Reflect.Service.Method){if(!(this.ptr instanceof ProtoBuf.Reflect.Service.RPCMethod))throw Error("illegal service type in "+this.ptr.toString(!0));if(!((res=this.ptr.parent.resolve(this.ptr.requestName,!0))&&res instanceof ProtoBuf.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.requestName);if(this.ptr.resolvedRequestType=res,!((res=this.ptr.parent.resolve(this.ptr.responseName,!0))&&res instanceof ProtoBuf.Reflect.Message))throw Error("Illegal type reference in "+this.ptr.toString(!0)+": "+this.ptr.responseName);this.ptr.resolvedResponseType=res}else if(!(this.ptr instanceof ProtoBuf.Reflect.Message.OneOf||this.ptr instanceof ProtoBuf.Reflect.Extension||this.ptr instanceof ProtoBuf.Reflect.Enum.Value))throw Error("illegal object in namespace: "+typeof this.ptr+": "+this.ptr);return this.reset()},BuilderPrototype.build=function(path){if(this.reset(),this.resolved||(this.resolveAll(),this.resolved=!0,this.result=null),null===this.result&&(this.result=this.ns.build()),!path)return this.result;for(var part="string"==typeof path?path.split("."):path,ptr=this.result,i=0;i<part.length;i++){if(!ptr[part[i]]){ptr=null;break}ptr=ptr[part[i]]}return ptr},BuilderPrototype.lookup=function(path,excludeNonNamespace){return path?this.ns.resolve(path,excludeNonNamespace):this.ns},BuilderPrototype.toString=function(){return"Builder"},Builder.Message=function(){},Builder.Enum=function(){},Builder.Service=function(){},Builder}(ProtoBuf,ProtoBuf.Lang,ProtoBuf.Reflect),ProtoBuf.Map=function(ProtoBuf,Reflect){function arrayIterator(arr){var idx=0;return{next:function(){return idx<arr.length?{done:!1,value:arr[idx++]}:{done:!0}}}}var Map=function(field,contents){if(!field.map)throw Error("field is not a map");if(this.field=field,this.keyElem=new Reflect.Element(field.keyType,null,!0,field.syntax),this.valueElem=new Reflect.Element(field.type,field.resolvedType,!1,field.syntax),this.map={},Object.defineProperty(this,"size",{get:function(){return Object.keys(this.map).length}}),contents)for(var keys=Object.keys(contents),i=0;i<keys.length;i++){var key=this.keyElem.valueFromString(keys[i]),val=this.valueElem.verifyValue(contents[keys[i]]);this.map[this.keyElem.valueToString(key)]={key:key,value:val}}},MapPrototype=Map.prototype;return MapPrototype.clear=function(){this.map={}},MapPrototype.delete=function(key){var keyValue=this.keyElem.valueToString(this.keyElem.verifyValue(key)),hadKey=keyValue in this.map;return delete this.map[keyValue],hadKey},MapPrototype.entries=function(){for(var entry,entries=[],strKeys=Object.keys(this.map),i=0;i<strKeys.length;i++)entries.push([(entry=this.map[strKeys[i]]).key,entry.value]);return arrayIterator(entries)},MapPrototype.keys=function(){for(var keys=[],strKeys=Object.keys(this.map),i=0;i<strKeys.length;i++)keys.push(this.map[strKeys[i]].key);return arrayIterator(keys)},MapPrototype.values=function(){for(var values=[],strKeys=Object.keys(this.map),i=0;i<strKeys.length;i++)values.push(this.map[strKeys[i]].value);return arrayIterator(values)},MapPrototype.forEach=function(cb,thisArg){for(var entry,strKeys=Object.keys(this.map),i=0;i<strKeys.length;i++)cb.call(thisArg,(entry=this.map[strKeys[i]]).value,entry.key,this)},MapPrototype.set=function(key,value){var keyValue=this.keyElem.verifyValue(key),valValue=this.valueElem.verifyValue(value);return this.map[this.keyElem.valueToString(keyValue)]={key:keyValue,value:valValue},this},MapPrototype.get=function(key){var keyValue=this.keyElem.valueToString(this.keyElem.verifyValue(key));if(keyValue in this.map)return this.map[keyValue].value},MapPrototype.has=function(key){return this.keyElem.valueToString(this.keyElem.verifyValue(key))in this.map},Map}(0,ProtoBuf.Reflect),ProtoBuf.loadProto=function(proto,builder,filename){return("string"==typeof builder||builder&&"string"==typeof builder.file&&"string"==typeof builder.root)&&(filename=builder,builder=void 0),ProtoBuf.loadJson(ProtoBuf.DotProto.Parser.parse(proto),builder,filename)},ProtoBuf.protoFromString=ProtoBuf.loadProto,ProtoBuf.loadProtoFile=function(filename,callback,builder){if(callback&&"object"==typeof callback?(builder=callback,callback=null):callback&&"function"==typeof callback||(callback=null),callback)return ProtoBuf.Util.fetch("string"==typeof filename?filename:filename.root+"/"+filename.file,function(contents){if(null!==contents)try{callback(null,ProtoBuf.loadProto(contents,builder,filename))}catch(e){callback(e)}else callback(Error("Failed to fetch file"))});var contents=ProtoBuf.Util.fetch("object"==typeof filename?filename.root+"/"+filename.file:filename);return null===contents?null:ProtoBuf.loadProto(contents,builder,filename)},ProtoBuf.protoFromFile=ProtoBuf.loadProtoFile,ProtoBuf.newBuilder=function(options){return void 0===(options=options||{}).convertFieldsToCamelCase&&(options.convertFieldsToCamelCase=ProtoBuf.convertFieldsToCamelCase),void 0===options.populateAccessors&&(options.populateAccessors=ProtoBuf.populateAccessors),new ProtoBuf.Builder(options)},ProtoBuf.loadJson=function(json,builder,filename){return("string"==typeof builder||builder&&"string"==typeof builder.file&&"string"==typeof builder.root)&&(filename=builder,builder=null),builder&&"object"==typeof builder||(builder=ProtoBuf.newBuilder()),"string"==typeof json&&(json=JSON.parse(json)),builder.import(json,filename),builder.resolveAll(),builder},ProtoBuf.loadJsonFile=function(filename,callback,builder){if(callback&&"object"==typeof callback?(builder=callback,callback=null):callback&&"function"==typeof callback||(callback=null),callback)return ProtoBuf.Util.fetch("string"==typeof filename?filename:filename.root+"/"+filename.file,function(contents){if(null!==contents)try{callback(null,ProtoBuf.loadJson(JSON.parse(contents),builder,filename))}catch(e){callback(e)}else callback(Error("Failed to fetch file"))});var contents=ProtoBuf.Util.fetch("object"==typeof filename?filename.root+"/"+filename.file:filename);return null===contents?null:ProtoBuf.loadJson(JSON.parse(contents),builder,filename)},ProtoBuf});var hexcase=0,b64pad="",chrsz=8,QRCode;!function(){function QR8bitByte(data){this.mode=QRMode.MODE_8BIT_BYTE,this.data=data,this.parsedData=[];for(var i=0,l=this.data.length;i<l;i++){var byteArray=[],code=this.data.charCodeAt(i);code>65536?(byteArray[0]=240|(1835008&code)>>>18,byteArray[1]=128|(258048&code)>>>12,byteArray[2]=128|(4032&code)>>>6,byteArray[3]=128|63&code):code>2048?(byteArray[0]=224|(61440&code)>>>12,byteArray[1]=128|(4032&code)>>>6,byteArray[2]=128|63&code):code>128?(byteArray[0]=192|(1984&code)>>>6,byteArray[1]=128|63&code):byteArray[0]=code,this.parsedData.push(byteArray)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function QRCodeModel(typeNumber,errorCorrectLevel){this.typeNumber=typeNumber,this.errorCorrectLevel=errorCorrectLevel,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function QRPolynomial(num,shift){if(void 0==num.length)throw new Error(num.length+"/"+shift);for(var offset=0;offset<num.length&&0==num[offset];)offset++;this.num=new Array(num.length-offset+shift);for(var i=0;i<num.length-offset;i++)this.num[i]=num[i+offset]}function QRRSBlock(totalCount,dataCount){this.totalCount=totalCount,this.dataCount=dataCount}function QRBitBuffer(){this.buffer=[],this.length=0}function _getAndroid(){var android=!1,sAgent=navigator.userAgent;if(/android/i.test(sAgent)){android=!0;var aMat=sAgent.toString().match(/android ([0-9]\.[0-9])/i);aMat&&aMat[1]&&(android=parseFloat(aMat[1]))}return android}function _getTypeNumber(sText,nCorrectLevel){for(var nType=1,length=_getUTF8Length(sText),i=0,len=QRCodeLimitLength.length;i<=len;i++){var nLimit=0;switch(nCorrectLevel){case QRErrorCorrectLevel.L:nLimit=QRCodeLimitLength[i][0];break;case QRErrorCorrectLevel.M:nLimit=QRCodeLimitLength[i][1];break;case QRErrorCorrectLevel.Q:nLimit=QRCodeLimitLength[i][2];break;case QRErrorCorrectLevel.H:nLimit=QRCodeLimitLength[i][3]}if(length<=nLimit)break;nType++}if(nType>QRCodeLimitLength.length)throw new Error("Too long data");return nType}function _getUTF8Length(sText){var replacedText=encodeURI(sText).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return replacedText.length+(replacedText.length!=sText?3:0)}QR8bitByte.prototype={getLength:function(buffer){return this.parsedData.length},write:function(buffer){for(var i=0,l=this.parsedData.length;i<l;i++)buffer.put(this.parsedData[i],8)}},QRCodeModel.prototype={addData:function(data){var newData=new QR8bitByte(data);this.dataList.push(newData),this.dataCache=null},isDark:function(row,col){if(row<0||this.moduleCount<=row||col<0||this.moduleCount<=col)throw new Error(row+","+col);return this.modules[row][col]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(test,maskPattern){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var row=0;row<this.moduleCount;row++){this.modules[row]=new Array(this.moduleCount);for(var col=0;col<this.moduleCount;col++)this.modules[row][col]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(test,maskPattern),this.typeNumber>=7&&this.setupTypeNumber(test),null==this.dataCache&&(this.dataCache=QRCodeModel.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,maskPattern)},setupPositionProbePattern:function(row,col){for(var r=-1;r<=7;r++)if(!(row+r<=-1||this.moduleCount<=row+r))for(var c=-1;c<=7;c++)col+c<=-1||this.moduleCount<=col+c||(this.modules[row+r][col+c]=0<=r&&r<=6&&(0==c||6==c)||0<=c&&c<=6&&(0==r||6==r)||2<=r&&r<=4&&2<=c&&c<=4)},getBestMaskPattern:function(){for(var minLostPoint=0,pattern=0,i=0;i<8;i++){this.makeImpl(!0,i);var lostPoint=QRUtil.getLostPoint(this);(0==i||minLostPoint>lostPoint)&&(minLostPoint=lostPoint,pattern=i)}return pattern},createMovieClip:function(target_mc,instance_name,depth){var qr_mc=target_mc.createEmptyMovieClip(instance_name,depth);this.make();for(var row=0;row<this.modules.length;row++)for(var y=1*row,col=0;col<this.modules[row].length;col++){var x=1*col;this.modules[row][col]&&(qr_mc.beginFill(0,100),qr_mc.moveTo(x,y),qr_mc.lineTo(x+1,y),qr_mc.lineTo(x+1,y+1),qr_mc.lineTo(x,y+1),qr_mc.endFill())}return qr_mc},setupTimingPattern:function(){for(var r=8;r<this.moduleCount-8;r++)null==this.modules[r][6]&&(this.modules[r][6]=r%2==0);for(var c=8;c<this.moduleCount-8;c++)null==this.modules[6][c]&&(this.modules[6][c]=c%2==0)},setupPositionAdjustPattern:function(){for(var pos=QRUtil.getPatternPosition(this.typeNumber),i=0;i<pos.length;i++)for(var j=0;j<pos.length;j++){var row=pos[i],col=pos[j];if(null==this.modules[row][col])for(var r=-2;r<=2;r++)for(var c=-2;c<=2;c++)this.modules[row+r][col+c]=-2==r||2==r||-2==c||2==c||0==r&&0==c}},setupTypeNumber:function(test){for(var bits=QRUtil.getBCHTypeNumber(this.typeNumber),i=0;i<18;i++){mod=!test&&1==(bits>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=mod}for(i=0;i<18;i++){var mod=!test&&1==(bits>>i&1);this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=mod}},setupTypeInfo:function(test,maskPattern){for(var data=this.errorCorrectLevel<<3|maskPattern,bits=QRUtil.getBCHTypeInfo(data),i=0;i<15;i++){mod=!test&&1==(bits>>i&1);i<6?this.modules[i][8]=mod:i<8?this.modules[i+1][8]=mod:this.modules[this.moduleCount-15+i][8]=mod}for(i=0;i<15;i++){var mod=!test&&1==(bits>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=mod:i<9?this.modules[8][15-i-1+1]=mod:this.modules[8][15-i-1]=mod}this.modules[this.moduleCount-8][8]=!test},mapData:function(data,maskPattern){for(var inc=-1,row=this.moduleCount-1,bitIndex=7,byteIndex=0,col=this.moduleCount-1;col>0;col-=2)for(6==col&&col--;;){for(var c=0;c<2;c++)if(null==this.modules[row][col-c]){var dark=!1;byteIndex<data.length&&(dark=1==(data[byteIndex]>>>bitIndex&1)),QRUtil.getMask(maskPattern,row,col-c)&&(dark=!dark),this.modules[row][col-c]=dark,-1==--bitIndex&&(byteIndex++,bitIndex=7)}if((row+=inc)<0||this.moduleCount<=row){row-=inc,inc=-inc;break}}}},QRCodeModel.PAD0=236,QRCodeModel.PAD1=17,QRCodeModel.createData=function(typeNumber,errorCorrectLevel,dataList){for(var rsBlocks=QRRSBlock.getRSBlocks(typeNumber,errorCorrectLevel),buffer=new QRBitBuffer,i=0;i<dataList.length;i++){var data=dataList[i];buffer.put(data.mode,4),buffer.put(data.getLength(),QRUtil.getLengthInBits(data.mode,typeNumber)),data.write(buffer)}for(var totalDataCount=0,i=0;i<rsBlocks.length;i++)totalDataCount+=rsBlocks[i].dataCount;if(buffer.getLengthInBits()>8*totalDataCount)throw new Error("code length overflow. ("+buffer.getLengthInBits()+">"+8*totalDataCount+")");for(buffer.getLengthInBits()+4<=8*totalDataCount&&buffer.put(0,4);buffer.getLengthInBits()%8!=0;)buffer.putBit(!1);for(;;){if(buffer.getLengthInBits()>=8*totalDataCount)break;if(buffer.put(QRCodeModel.PAD0,8),buffer.getLengthInBits()>=8*totalDataCount)break;buffer.put(QRCodeModel.PAD1,8)}return QRCodeModel.createBytes(buffer,rsBlocks)},QRCodeModel.createBytes=function(buffer,rsBlocks){for(var offset=0,maxDcCount=0,maxEcCount=0,dcdata=new Array(rsBlocks.length),ecdata=new Array(rsBlocks.length),r=0;r<rsBlocks.length;r++){var dcCount=rsBlocks[r].dataCount,ecCount=rsBlocks[r].totalCount-dcCount;maxDcCount=Math.max(maxDcCount,dcCount),maxEcCount=Math.max(maxEcCount,ecCount),dcdata[r]=new Array(dcCount);for(i=0;i<dcdata[r].length;i++)dcdata[r][i]=255&buffer.buffer[i+offset];offset+=dcCount;var rsPoly=QRUtil.getErrorCorrectPolynomial(ecCount),modPoly=new QRPolynomial(dcdata[r],rsPoly.getLength()-1).mod(rsPoly);ecdata[r]=new Array(rsPoly.getLength()-1);for(i=0;i<ecdata[r].length;i++){var modIndex=i+modPoly.getLength()-ecdata[r].length;ecdata[r][i]=modIndex>=0?modPoly.get(modIndex):0}}for(var totalCodeCount=0,i=0;i<rsBlocks.length;i++)totalCodeCount+=rsBlocks[i].totalCount;for(var data=new Array(totalCodeCount),index=0,i=0;i<maxDcCount;i++)for(r=0;r<rsBlocks.length;r++)i<dcdata[r].length&&(data[index++]=dcdata[r][i]);for(i=0;i<maxEcCount;i++)for(r=0;r<rsBlocks.length;r++)i<ecdata[r].length&&(data[index++]=ecdata[r][i]);return data};for(var QRMode={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},QRErrorCorrectLevel={L:1,M:0,Q:3,H:2},QRMaskPattern={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},QRUtil={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(data){for(var d=data<<10;QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15)>=0;)d^=QRUtil.G15<<QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G15);return(data<<10|d)^QRUtil.G15_MASK},getBCHTypeNumber:function(data){for(var d=data<<12;QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18)>=0;)d^=QRUtil.G18<<QRUtil.getBCHDigit(d)-QRUtil.getBCHDigit(QRUtil.G18);return data<<12|d},getBCHDigit:function(data){for(var digit=0;0!=data;)digit++,data>>>=1;return digit},getPatternPosition:function(typeNumber){return QRUtil.PATTERN_POSITION_TABLE[typeNumber-1]},getMask:function(maskPattern,i,j){switch(maskPattern){case QRMaskPattern.PATTERN000:return(i+j)%2==0;case QRMaskPattern.PATTERN001:return i%2==0;case QRMaskPattern.PATTERN010:return j%3==0;case QRMaskPattern.PATTERN011:return(i+j)%3==0;case QRMaskPattern.PATTERN100:return(Math.floor(i/2)+Math.floor(j/3))%2==0;case QRMaskPattern.PATTERN101:return i*j%2+i*j%3==0;case QRMaskPattern.PATTERN110:return(i*j%2+i*j%3)%2==0;case QRMaskPattern.PATTERN111:return(i*j%3+(i+j)%2)%2==0;default:throw new Error("bad maskPattern:"+maskPattern)}},getErrorCorrectPolynomial:function(errorCorrectLength){for(var a=new QRPolynomial([1],0),i=0;i<errorCorrectLength;i++)a=a.multiply(new QRPolynomial([1,QRMath.gexp(i)],0));return a},getLengthInBits:function(mode,type){if(1<=type&&type<10)switch(mode){case QRMode.MODE_NUMBER:return 10;case QRMode.MODE_ALPHA_NUM:return 9;case QRMode.MODE_8BIT_BYTE:case QRMode.MODE_KANJI:return 8;default:throw new Error("mode:"+mode)}else if(type<27)switch(mode){case QRMode.MODE_NUMBER:return 12;case QRMode.MODE_ALPHA_NUM:return 11;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 10;default:throw new Error("mode:"+mode)}else{if(!(type<41))throw new Error("type:"+type);switch(mode){case QRMode.MODE_NUMBER:return 14;case QRMode.MODE_ALPHA_NUM:return 13;case QRMode.MODE_8BIT_BYTE:return 16;case QRMode.MODE_KANJI:return 12;default:throw new Error("mode:"+mode)}}},getLostPoint:function(qrCode){for(var moduleCount=qrCode.getModuleCount(),lostPoint=0,row=0;row<moduleCount;row++)for(col=0;col<moduleCount;col++){for(var sameCount=0,dark=qrCode.isDark(row,col),r=-1;r<=1;r++)if(!(row+r<0||moduleCount<=row+r))for(var c=-1;c<=1;c++)col+c<0||moduleCount<=col+c||0==r&&0==c||dark==qrCode.isDark(row+r,col+c)&&sameCount++;sameCount>5&&(lostPoint+=3+sameCount-5)}for(row=0;row<moduleCount-1;row++)for(col=0;col<moduleCount-1;col++){var count=0;qrCode.isDark(row,col)&&count++,qrCode.isDark(row+1,col)&&count++,qrCode.isDark(row,col+1)&&count++,qrCode.isDark(row+1,col+1)&&count++,0!=count&&4!=count||(lostPoint+=3)}for(row=0;row<moduleCount;row++)for(col=0;col<moduleCount-6;col++)qrCode.isDark(row,col)&&!qrCode.isDark(row,col+1)&&qrCode.isDark(row,col+2)&&qrCode.isDark(row,col+3)&&qrCode.isDark(row,col+4)&&!qrCode.isDark(row,col+5)&&qrCode.isDark(row,col+6)&&(lostPoint+=40);for(col=0;col<moduleCount;col++)for(row=0;row<moduleCount-6;row++)qrCode.isDark(row,col)&&!qrCode.isDark(row+1,col)&&qrCode.isDark(row+2,col)&&qrCode.isDark(row+3,col)&&qrCode.isDark(row+4,col)&&!qrCode.isDark(row+5,col)&&qrCode.isDark(row+6,col)&&(lostPoint+=40);for(var darkCount=0,col=0;col<moduleCount;col++)for(row=0;row<moduleCount;row++)qrCode.isDark(row,col)&&darkCount++;return lostPoint+=10*(Math.abs(100*darkCount/moduleCount/moduleCount-50)/5)}},QRMath={glog:function(n){if(n<1)throw new Error("glog("+n+")");return QRMath.LOG_TABLE[n]},gexp:function(n){for(;n<0;)n+=255;for(;n>=256;)n-=255;return QRMath.EXP_TABLE[n]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},i=0;i<8;i++)QRMath.EXP_TABLE[i]=1<<i;for(i=8;i<256;i++)QRMath.EXP_TABLE[i]=QRMath.EXP_TABLE[i-4]^QRMath.EXP_TABLE[i-5]^QRMath.EXP_TABLE[i-6]^QRMath.EXP_TABLE[i-8];for(i=0;i<255;i++)QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]]=i;QRPolynomial.prototype={get:function(index){return this.num[index]},getLength:function(){return this.num.length},multiply:function(e){for(var num=new Array(this.getLength()+e.getLength()-1),i=0;i<this.getLength();i++)for(var j=0;j<e.getLength();j++)num[i+j]^=QRMath.gexp(QRMath.glog(this.get(i))+QRMath.glog(e.get(j)));return new QRPolynomial(num,0)},mod:function(e){if(this.getLength()-e.getLength()<0)return this;for(var ratio=QRMath.glog(this.get(0))-QRMath.glog(e.get(0)),num=new Array(this.getLength()),i=0;i<this.getLength();i++)num[i]=this.get(i);for(i=0;i<e.getLength();i++)num[i]^=QRMath.gexp(QRMath.glog(e.get(i))+ratio);return new QRPolynomial(num,0).mod(e)}},QRRSBlock.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],QRRSBlock.getRSBlocks=function(typeNumber,errorCorrectLevel){var rsBlock=QRRSBlock.getRsBlockTable(typeNumber,errorCorrectLevel);if(void 0==rsBlock)throw new Error("bad rs block @ typeNumber:"+typeNumber+"/errorCorrectLevel:"+errorCorrectLevel);for(var length=rsBlock.length/3,list=[],i=0;i<length;i++)for(var count=rsBlock[3*i+0],totalCount=rsBlock[3*i+1],dataCount=rsBlock[3*i+2],j=0;j<count;j++)list.push(new QRRSBlock(totalCount,dataCount));return list},QRRSBlock.getRsBlockTable=function(typeNumber,errorCorrectLevel){switch(errorCorrectLevel){case QRErrorCorrectLevel.L:return QRRSBlock.RS_BLOCK_TABLE[4*(typeNumber-1)+0];case QRErrorCorrectLevel.M:return QRRSBlock.RS_BLOCK_TABLE[4*(typeNumber-1)+1];case QRErrorCorrectLevel.Q:return QRRSBlock.RS_BLOCK_TABLE[4*(typeNumber-1)+2];case QRErrorCorrectLevel.H:return QRRSBlock.RS_BLOCK_TABLE[4*(typeNumber-1)+3];default:return}},QRBitBuffer.prototype={get:function(index){var bufIndex=Math.floor(index/8);return 1==(this.buffer[bufIndex]>>>7-index%8&1)},put:function(num,length){for(var i=0;i<length;i++)this.putBit(1==(num>>>length-i-1&1))},getLengthInBits:function(){return this.length},putBit:function(bit){var bufIndex=Math.floor(this.length/8);this.buffer.length<=bufIndex&&this.buffer.push(0),bit&&(this.buffer[bufIndex]|=128>>>this.length%8),this.length++}};var QRCodeLimitLength=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],svgDrawer=function(){var Drawing=function(el,htOption){this._el=el,this._htOption=htOption};return Drawing.prototype.draw=function(oQRCode){function makeSVG(tag,attrs){var el=document.createElementNS("http://www.w3.org/2000/svg",tag);for(var k in attrs)attrs.hasOwnProperty(k)&&el.setAttribute(k,attrs[k]);return el}var _htOption=this._htOption,_el=this._el,nCount=oQRCode.getModuleCount();Math.floor(_htOption.width/nCount),Math.floor(_htOption.height/nCount);this.clear();var svg=makeSVG("svg",{viewBox:"0 0 "+String(nCount)+" "+String(nCount),width:"100%",height:"100%",fill:_htOption.colorLight});svg.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),_el.appendChild(svg),svg.appendChild(makeSVG("rect",{fill:_htOption.colorLight,width:"100%",height:"100%"})),svg.appendChild(makeSVG("rect",{fill:_htOption.colorDark,width:"1",height:"1",id:"template"}));for(var row=0;row<nCount;row++)for(var col=0;col<nCount;col++)if(oQRCode.isDark(row,col)){var child=makeSVG("use",{x:String(col),y:String(row)});child.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),svg.appendChild(child)}},Drawing.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},Drawing}(),Drawing="svg"===document.documentElement.tagName.toLowerCase()?svgDrawer:function(){return"undefined"!=typeof CanvasRenderingContext2D}()?function(){function _onMakeImage(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function _safeSetDataURI(fSuccess,fFail){var self=this;if(self._fFail=fFail,self._fSuccess=fSuccess,null===self._bSupportDataURI){var el=document.createElement("img"),fOnError=function(){self._bSupportDataURI=!1,self._fFail&&self._fFail.call(self)},fOnSuccess=function(){self._bSupportDataURI=!0,self._fSuccess&&self._fSuccess.call(self)};return el.onabort=fOnError,el.onerror=fOnError,el.onload=fOnSuccess,void(el.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===self._bSupportDataURI&&self._fSuccess?self._fSuccess.call(self):!1===self._bSupportDataURI&&self._fFail&&self._fFail.call(self)}if(this._android&&this._android<=2.1){var factor=1/window.devicePixelRatio,drawImage=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(image,sx,sy,sw,sh,dx,dy,dw,dh){if("nodeName"in image&&/img/i.test(image.nodeName))for(var i=arguments.length-1;i>=1;i--)arguments[i]=arguments[i]*factor;else void 0===dw&&(arguments[1]*=factor,arguments[2]*=factor,arguments[3]*=factor,arguments[4]*=factor);drawImage.apply(this,arguments)}}var Drawing=function(el,htOption){this._bIsPainted=!1,this._android=_getAndroid(),this._htOption=htOption,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=htOption.width,this._elCanvas.height=htOption.height,el.appendChild(this._elCanvas),this._el=el,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return Drawing.prototype.draw=function(oQRCode){var _elImage=this._elImage,_oContext=this._oContext,_htOption=this._htOption,nCount=oQRCode.getModuleCount(),nWidth=_htOption.width/nCount,nHeight=_htOption.height/nCount,nRoundedWidth=Math.round(nWidth),nRoundedHeight=Math.round(nHeight);_elImage.style.display="none",this.clear();for(var row=0;row<nCount;row++)for(var col=0;col<nCount;col++){var bIsDark=oQRCode.isDark(row,col),nLeft=col*nWidth,nTop=row*nHeight;_oContext.strokeStyle=bIsDark?_htOption.colorDark:_htOption.colorLight,_oContext.lineWidth=1,_oContext.fillStyle=bIsDark?_htOption.colorDark:_htOption.colorLight,_oContext.fillRect(nLeft,nTop,nWidth,nHeight),_oContext.strokeRect(Math.floor(nLeft)+.5,Math.floor(nTop)+.5,nRoundedWidth,nRoundedHeight),_oContext.strokeRect(Math.ceil(nLeft)-.5,Math.ceil(nTop)-.5,nRoundedWidth,nRoundedHeight)}this._bIsPainted=!0},Drawing.prototype.makeImage=function(){this._bIsPainted&&_safeSetDataURI.call(this,_onMakeImage)},Drawing.prototype.isPainted=function(){return this._bIsPainted},Drawing.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},Drawing.prototype.round=function(nNumber){return nNumber?Math.floor(1e3*nNumber)/1e3:nNumber},Drawing}():function(){var Drawing=function(el,htOption){this._el=el,this._htOption=htOption};return Drawing.prototype.draw=function(oQRCode){for(var _htOption=this._htOption,_el=this._el,nCount=oQRCode.getModuleCount(),nWidth=Math.floor(_htOption.width/nCount),nHeight=Math.floor(_htOption.height/nCount),aHTML=['<table style="border:0;border-collapse:collapse;">'],row=0;row<nCount;row++){aHTML.push("<tr>");for(var col=0;col<nCount;col++)aHTML.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+nWidth+"px;height:"+nHeight+"px;background-color:"+(oQRCode.isDark(row,col)?_htOption.colorDark:_htOption.colorLight)+';"></td>');aHTML.push("</tr>")}aHTML.push("</table>"),_el.innerHTML=aHTML.join("");var elTable=_el.childNodes[0],nLeftMarginTable=(_htOption.width-elTable.offsetWidth)/2,nTopMarginTable=(_htOption.height-elTable.offsetHeight)/2;nLeftMarginTable>0&&nTopMarginTable>0&&(elTable.style.margin=nTopMarginTable+"px "+nLeftMarginTable+"px")},Drawing.prototype.clear=function(){this._el.innerHTML=""},Drawing}();(QRCode=function(el,vOption){if(this._htOption={width:window.innerHeight/4,height:window.innerHeight/4,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRErrorCorrectLevel.H},"string"==typeof vOption&&(vOption={text:vOption}),vOption)for(var i in vOption)this._htOption[i]=vOption[i];"string"==typeof el&&(el=document.getElementById(el)),this._htOption.useSVG&&(Drawing=svgDrawer),this._android=_getAndroid(),this._el=el,this._oQRCode=null,this._oDrawing=new Drawing(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)}).prototype.makeCode=function(sText){this._oQRCode=new QRCodeModel(_getTypeNumber(sText,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(sText),this._oQRCode.make(),this._el.title=sText,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=QRErrorCorrectLevel}(),function(){function $$_copy_(dec,src){if(!src)return null;dec=dec||{};for(var i in src)dec[i]=src[i];return dec}function $def_getset_(o,bStatic,name,set_get){set_get.enumerable=set_get.configurable=!0,o.$set_get=o.$set_get||{},o.$set_get[(bStatic?"-":"")+name]=set_get,set_get.get||(set_get.get=function(){}),set_get.set||(set_get.set=function(){}),Object.defineProperty(bStatic?o:o.prototype,name,set_get)}function $classHasOwnProperty(name,o){return!!Object.hasOwnProperty.call(o.prototype,name)||(null==o.prototype.__super__?null:$classHasOwnProperty(name,o.prototype.__super__))}function $hasOwnProperty(name,o){return o=o||this,Object.hasOwnProperty.call(o,name)||$classHasOwnProperty(name,o.__class__)}function $InitClass(o,fullName,chgHasOwnProperty,_super){_super&&_$extend_(o,_super),$__classmap__[fullName]=o,_super&&(o.prototype.__super__=_super),chgHasOwnProperty&&(o.prototype.hasOwnProperty=$hasOwnProperty),o.prototype.__class__=o,o.prototype.__className__=fullName,o.__className__=fullName,o.__isclass__=!0}function $nullfunc(){}function createpackage(className){for(var strs=className.split("."),p=window,i=0,sz=strs.length;i<sz;i++){var n=strs[i];p=p[n]?p[n]:p[n]={}}}var _$bindid_=0,$__classmap__=window.$__classmap__=[];$__classmap__.Object=Object,$__classmap__.Function=Function,$__classmap__.Array=Array,$__classmap__.String=String;var _$extend_=_$extend_||function(d,b){function __(){this.constructor=d}d.$set_get=$$_copy_(d.$set_get||{},b.$set_get);for(var p in b)"$set_get"!=p&&Object.hasOwnProperty.call(b,p)&&(d[p]=b[p]);__.prototype=b.prototype,d.prototype=new __,d.prototype.__implements__=$$_copy_({},b.prototype.__implements__)};createpackage("gtea.utils"),createpackage("gtea.math"),createpackage("gtea.events"),createpackage("gtea.net"),createpackage("gtea.rpc"),createpackage("gtea.protobuf"),gtea.utils.trace=null==window.gbx?function(){}:function(s,p){gbx.log(s,p)},gtea.utils.bind=function(o,m){if(null==m)return null;null==m.__$BiD___&&(m.__$BiD___=_$bindid_++);var f;return null==o.$GTEA__closures__?o.$GTEA__closures__={}:f=o.$GTEA__closures__[m.__$BiD___],null==f&&((f=function(){return f.method.apply(f.scope,arguments)}).scope=o,f.method=m,o.$GTEA__closures__[m.__$BiD___]=f),f};var ProtobufConverter=gtea.net.ProtobufConverter=function(){function ProtobufConverter(){Event.__$INIT__(),this._proto=null,this._basePath="assets/proto/"}$InitClass(ProtobufConverter,"gtea.net.ProtobufConverter",!0);var __proto__=ProtobufConverter.prototype;return __proto__.addProtoAsync=function(protoName){var protoFileName=this._basePath+protoName,protobufConverter=this;Laya.loader.load(protoFileName,Laya.Handler.create(this,function(data){var proto=dcodeIO.ProtoBuf.loadProto(data);protobufConverter._proto=proto}))},__proto__.encode=function(messageName,content){return this._proto.build(messageName).encode(content).toBuffer()},__proto__.decode=function(messageName,bytes){return this._proto.build(messageName).decode(bytes)},ProtobufConverter.getInstance=function(){return null==ProtobufConverter.s_Instance&&(ProtobufConverter.s_Instance=new ProtobufConverter),ProtobufConverter.s_Instance},ProtobufConverter.addProtoAsync=function(protoName){ProtobufConverter.getInstance().addProtoAsync(protoName)},ProtobufConverter.encode=function(messageName,content){return ProtobufConverter.getInstance().encode(messageName,content)},ProtobufConverter.decode=function(messageName,content){return ProtobufConverter.getInstance().decode(messageName,content)},ProtobufConverter.__$INIT__=function(){this.__$INIT__=$nullfunc},ProtobufConverter}();gtea.protobuf.addProtoAsync=function(protoName){return ProtobufConverter.getInstance().addProtoAsync(protoName)},gtea.protobuf.encode=function(messageName,content){return ProtobufConverter.getInstance().encode(messageName,content)},gtea.protobuf.decode=function(messageName,content){return ProtobufConverter.getInstance().decode(messageName,content)};var Event=gtea.events.Event=function(){function Event(t,agv){Event.__$INIT__(),this._type_=t,this._agv_=agv}return $InitClass(Event,"gtea.events.Event",!0),Event.prototype.attachDispatcher=function(value){this._dispatcher_=value},$def_getset_(Event,!1,"type",{get:function(){return this._type_}}),$def_getset_(Event,!1,"dispatcher",{get:function(){return this._dispatcher_}}),$def_getset_(Event,!1,"agv",{get:function(){return this._agv_}}),Event.__$INIT__=function(){this.__$INIT__=$nullfunc},Event}();gtea.events.EventDispatcher=function(){function EventDispatcher(){EventDispatcher.__$INIT__(),this._dispatching_=!1}$InitClass(EventDispatcher,"gtea.events.EventDispatcher",!0);var __proto__=EventDispatcher.prototype;return __proto__.addEventListener=function(type,listener,func){if(null==listener||null==func)return null;null==this._eventListener_&&(this._eventListener_=[]);var eobj=new Object;eobj.listener=gtea.utils.bind(listener,func),eobj._deleted_=!1;var thisType=this._eventListener_[type];if(thisType){if(thisType.length>0)for(var i=0,sz=thisType.length;i<sz;i++)if(thisType[i].listener==eobj.listener)return thisType[i]}else thisType=this._eventListener_[type]=[];return thisType.push(eobj),eobj},__proto__.dispatchEvent=function(event){if(null==this._eventListener_)return!1;var thisType=this._eventListener_[event.type];if(!thisType)return!1;event.attachDispatcher(this),this._dispatching_=!0;for(var i=0,sz=thisType.length;i<sz;i++)(oe=thisType[i])._deleted_||oe.listener(event);this._dispatching_=!1;for(var needgc=!1,i=0,sz=thisType.length;i<sz;i++){var oe=thisType[i];if(oe._deleted_){needgc=!0;break}}return needgc&&this.__GCListener__(event.type),!0},__proto__.hasEventListener=function(type){return this._eventListener_&&null!=this._eventListener_[type]&&this._eventListener_[type].length>0},__proto__.removeEventListener=function(type,listener,func){var thisType;if(null!=this._eventListener_&&(thisType=this._eventListener_[type])){for(var listener=gtea.utils.bind(listener,func),needgc=!1,i=0,sz=thisType.length;i<sz;i++){var oe=thisType[i];if(oe.listener==listener){needgc=!oe._deleted_,oe._deleted_=!0;break}}needgc&&!this._dispatching_&&this.__GCListener__(type)}},__proto__.removeAllEventListener=function(){this._eventListener_=null},__proto__.__GCListener__=function(type){var thisType=this._eventListener_[type];if(!thisType)return!1;for(var tsz=[],i=0,sz=thisType.length;i<sz;i++){var oe=thisType[i];oe._deleted_||tsz.push(oe)}0==tsz.length?this._eventListener_[type]=null:this._eventListener_[type]=tsz},EventDispatcher.__$INIT__=function(){this.__$INIT__=$nullfunc},EventDispatcher}();gtea.net.SOCKET_STATUS_DISCONNECTED=0,gtea.net.SOCKET_STATUS_CONNECTED=1,gtea.net.PACKET_TYPE_REQUESTRESPONSE=1,gtea.net.PACKET_TYPE_SERVERINFORM=2,gtea.net.PACKET_TYPE_FORWARD=3,gtea.net.PACKET_TYPE_REPORT=4,gtea.net.PACKET_TYPE_SYNC=5,gtea.net.PACKET_TYPE_IPC=6,gtea.net.PACKET_TYPE_IPCREQUEST=7,gtea.net.PACKET_TYPE_IPCRESPONSE=8,gtea.net.PACKET_TYPE_SYNCREQUEST=9,gtea.net.DISCONNECT_REASON_SOCKET=1,gtea.net.DISCONNECT_REASON_REQUEST=2,gtea.net.DISCONNECT_REASON_HEARTBEAT=3,gtea.net.DISCONNECT_REASON_COMMAND=4,gtea.net.DISCONNECT_REASON_TOROOM=5,gtea.net.LOGIN_TYPE_NORMAL=1,gtea.net.LOGIN_TYPE_RELOGIN=2,gtea.net.LOGIN_TYPE_TOROOM=3,gtea.net.TIME_OUT=15e3,gtea.net.Socket=function(_super){function Socket(){Socket.__$INIT__(),_super.call(this),this.m_socket=null,this.m_status=gtea.net.SOCKET_STATUS_DISCONNECTED}$InitClass(Socket,"gtea.net.Socket",!0,_super);var __proto__=Socket.prototype;return __proto__.connect=function(host,port){if(null!=this.m_socket&&this.close(),port<0||port>65535)return!1;var url="ws://"+host+":"+port+"/ws/client";this.m_socket=new WebSocket(url),this.m_socket.binaryType="arraybuffer",this.m_socket.onopen=gtea.utils.bind(this,this.onOpenHandler),this.m_socket.onmessage=gtea.utils.bind(this,this.onMessageHandler),this.m_socket.onclose=gtea.utils.bind(this,this.onCloseHandler),this.m_socket.onerror=gtea.utils.bind(this,this.onErrorHandler)},__proto__.onOpenHandler=function(__args){this.m_status=gtea.net.SOCKET_STATUS_CONNECTED;var evt=new Event("connect",{});evt.attachDispatcher(this),this.dispatchEvent(evt)},__proto__.onMessageHandler=function(msg){NetMsgMgr.getInstance().recvMsg(msg.data)},__proto__.onCloseHandler=function(__args){this.m_status=gtea.net.SOCKET_STATUS_DISCONNECTED;var evt=new Event("close",{});evt.attachDispatcher(this),this.dispatchEvent(evt)},__proto__.onErrorHandler=function(__args){this.m_status=gtea.net.SOCKET_STATUS_DISCONNECTED;var evt=new Event("error",{});evt.attachDispatcher(this),this.dispatchEvent(evt)},__proto__.send=function(msg){this.m_socket.send(msg)},__proto__.close=function(){if(this.m_status=gtea.net.SOCKET_STATUS_DISCONNECTED,null!=this.m_socket){try{this.m_socket.close()}catch(e){}this.m_socket=null}},$def_getset_(Socket,!1,"connected",{get:function(){return this.m_status==gtea.net.SOCKET_STATUS_CONNECTED}}),Socket.__$INIT__=function(){this.__$INIT__=$nullfunc},Socket}(gtea.events.EventDispatcher);var RPCSession=gtea.net.RPCSession=function(){function RPCSession(requestId,callbackObj,msg,outTime){RPCSession.__$INIT__(),this.m_nRequestId=requestId,this.m_callbackObj=callbackObj,this.m_callTime=Date.now(),this.m_outTime=outTime}$InitClass(RPCSession,"gtea.net.RPCSession",!0);var __proto__=RPCSession.prototype;return __proto__.isTimeOut=function(now){return-1!=this.m_outTime&&now-this.m_callTime>this.m_outTime},__proto__.callback=function(errorCode,data){null!=this.m_callbackObj&&this.m_callbackObj(errorCode,data)},RPCSession.__$INIT__=function(){this.__$INIT__=$nullfunc},RPCSession}(),RPC=gtea.net.RPC=function(){function RPC(){RPC.__$INIT__(),this.m_szSession=[],this._timer=setInterval(gtea.utils.bind(this,this.onTimer),1e3)}$InitClass(RPC,"gtea.net.RPCMgr",!0);var __proto__=RPC.prototype;return __proto__.onTimer=function(){for(var isTimeOut=!1,now=Date.now(),i=0,sz=this.m_szSession.length;i<sz;i++)if(this.m_szSession[i].isTimeOut(now)){isTimeOut=!0;break}isTimeOut&&(this.m_szSession=[],NetMsgMgr.getInstance().onTimeOut())},__proto__.clearSession=function(){this.m_szSession=[]},__proto__.response=function(requestId,errorCode,data){for(var i=0,sz=this.m_szSession.length;i<sz;i++){var session=this.m_szSession[i];if(session.m_nRequestId==requestId){this.m_szSession.splice(i,1),session.callback(errorCode,data);break}}},__proto__.removeRequest=function(requestId){for(var i=0,sz=this.m_szSession.length;i<sz;i++)if(this.m_szSession[i].m_nRequestId==requestId){this.m_szSession.splice(i,1);break}},__proto__.requestToGame=function(command,data,callbackObj,outTime){if(NetMsgMgr.getInstance().connected){var bytes=RPC.wrapMessage(command,gtea.net.PACKET_TYPE_REQUESTRESPONSE,null,NetMsgMgr.getInstance().m_sToken,data),session=new RPCSession(RPC.s_nRequestId++,callbackObj,bytes,outTime);this.m_szSession.push(session),NetMsgMgr.sendMsg(bytes)}else null!=callbackObj&&callbackObj(1003,null)},__proto__.requestToRoom=function(command,data,callbackObj,outTime){if(NetMsgMgr.getInstance().connected){var bytes=RPC.wrapMessage(command,gtea.net.PACKET_TYPE_SYNCREQUEST,null,NetMsgMgr.getInstance().m_sToken,data),session=new RPCSession(RPC.s_nRequestId++,callbackObj,bytes,outTime);this.m_szSession.push(session),NetMsgMgr.sendMsg(bytes)}else null!=callbackObj&&callbackObj(1003,null)},__proto__.sendToRoom=function(command,data){if(NetMsgMgr.getInstance().connected){var bytes=RPC.wrapMessage(command,gtea.net.PACKET_TYPE_SYNC,null,NetMsgMgr.getInstance().m_sToken,data);NetMsgMgr.sendMsg(bytes)}},RPC.s_nRequestId=1,RPC.getInstance=function(){return null==RPC.s_instance&&(RPC.s_instance=new RPC),RPC.s_instance},RPC.response=function(requestId,errorCode,data){RPC.getInstance().response(requestId,errorCode,data)},RPC.removeRequest=function(requestId){RPC.getInstance().removeRequest(requestId)},RPC.clearSession=function(){RPC.getInstance().clearSession()},RPC.wrapMessage=function(command,packType,roomServer,authToken,data){var wrapContent={cmd:command,requestId:RPC.s_nRequestId,errorCode:0,packType:packType,roomServer:roomServer,authToken:authToken,data:data};return ProtobufConverter.encode("WrapPacket",wrapContent)},RPC.__$INIT__=function(){this.__$INIT__=$nullfunc},RPC}();gtea.rpc.sendToRoom=function(command,data){RPC.getInstance().sendToRoom(command,data)},gtea.rpc.requestToGame=function(command,data,caller,callback){var callbackObj=gtea.utils.bind(caller,callback);RPC.getInstance().requestToGame(command,data,callbackObj,gtea.net.TIME_OUT)},gtea.rpc.requestToRoom=function(command,data,caller,callback){var callbackObj=gtea.utils.bind(caller,callback);RPC.getInstance().requestToRoom(command,data,callbackObj,gtea.net.TIME_OUT)};var NetMsgMgr=gtea.net.NetMsgMgr=function(_super){function NetMsgMgr(){NetMsgMgr.__$INIT__(),this.m_socket=null,this.m_bConnecting=!1,this.m_msgReceiver=null,this.m_connectedCallback=null,this.m_lostCallback=null}$InitClass(NetMsgMgr,"gtea.net.NetMsgMgr",!0,_super);var __proto__=NetMsgMgr.prototype;return __proto__.connect=function(host,port,connectedCallback,lostCallback){if(!this.m_bConnecting){if(null==this.m_socket)this.m_socket=new gtea.net.Socket,this.m_socket.addEventListener("connect",this,this.onSocketConnected),this.m_socket.addEventListener("close",this,this.onSocketClose),this.m_socket.addEventListener("error",this,this.onSocketError);else if(this.m_socket.connected)return!1;return this.m_connectedCallback=connectedCallback,this.m_lostCallback=lostCallback,this.m_bConnecting=!0,this.m_socket.connect(host,port),!0}},__proto__.onSocketConnected=function(event){gtea.utils.trace("%c[net] sokcet connected","color:blue"),this.m_bConnecting=!1,this.m_connectedCallback&&this.m_connectedCallback()},__proto__.onSocketClose=function(event){gtea.utils.trace("%c[net] sokcet close","color:blue"),this.m_bConnecting=!1,this.m_socket.removeEventListener("connect",this,this.onSocketConnected),this.m_socket.removeEventListener("close",this,this.onSocketClose),this.m_socket.removeEventListener("error",this,this.onSocketError),this.m_socket=null,this.m_lostCallback&&this.m_lostCallback(gtea.net.DISCONNECT_REASON_SOCKET);var evt=new Event("socket_error",{});evt.attachDispatcher(this),this.dispatchEvent(evt)},__proto__.onSocketError=function(event){gtea.utils.trace("%c[net] sokcet error","color:blue"),this.m_bConnecting=!1,this.m_socket.removeEventListener("connect",this,this.onSocketConnected),this.m_socket.removeEventListener("close",this,this.onSocketClose),this.m_socket.removeEventListener("error",this,this.onSocketError),this.m_socket=null,this.m_lostCallback&&this.m_lostCallback(gtea.net.DISCONNECT_REASON_SOCKET);var evt=new Event("socket_error",{});evt.attachDispatcher(this),this.dispatchEvent(evt)},__proto__.onTimeOut=function(){gtea.utils.trace("%c[net] sokcet time out","color:blue"),this.m_bConnecting=!1,this.m_socket.removeEventListener("connect",this,this.onSocketConnected),this.m_socket.removeEventListener("close",this,this.onSocketClose),this.m_socket.removeEventListener("error",this,this.onSocketError),this.m_socket=null,this.m_lostCallback&&this.m_lostCallback(gtea.net.DISCONNECT_REASON_REQUEST);var evt=new Event("socket_error",{});evt.attachDispatcher(this),this.dispatchEvent(evt)},__proto__._sendMsg=function(netmsg){this.m_socket.send(netmsg)},__proto__._unwrapMessage=function(bytes){return ProtobufConverter.decode("WrapPacket",bytes)},__proto__.recvMsg=function(msg){var message=this._unwrapMessage(msg);this.m_msgReceiver.checkMessage(message)?message.packType==gtea.net.PACKET_TYPE_REQUESTRESPONSE||message.packType==gtea.net.PACKET_TYPE_SYNCREQUEST?RPC.response(message.requestId,message.errorCode,message.data):this.m_msgReceiver.onMessage(message.cmd,message.data):message.packType!=gtea.net.PACKET_TYPE_REQUESTRESPONSE&&message.packType!=gtea.net.PACKET_TYPE_SYNCREQUEST||RPC.response(message.requestId,message.errorCode,message.data)},__proto__._close=function(){null!=this.m_socket&&(this.m_lostCallback=null,this.m_socket.close())},$def_getset_(NetMsgMgr,!1,"connected",{get:function(){return null!=this.m_socket&&this.m_socket.connected}}),NetMsgMgr.getInstance=function(){return null==NetMsgMgr.s_instance&&(NetMsgMgr.s_instance=new NetMsgMgr),NetMsgMgr.s_instance},NetMsgMgr.connect=function(host,port,onConnectedCallback,onLostCallback){return NetMsgMgr.getInstance().connect(host,port,onConnectedCallback,onLostCallback)},NetMsgMgr.sendMsg=function(msg){NetMsgMgr.getInstance()._sendMsg(msg)},NetMsgMgr.setMsgReceiver=function(objmgr){NetMsgMgr.getInstance().m_msgReceiver=objmgr},NetMsgMgr.close=function(){NetMsgMgr.getInstance()._close(),RPC.clearSession()},NetMsgMgr.__$INIT__=function(){this.__$INIT__=$nullfunc},NetMsgMgr}(gtea.events.EventDispatcher)}(),function(){var require,define;!function(){function build(module){var factory=module.factory,localRequire=function(id){var resultantId=id;return"."===id.charAt(0)&&(resultantId=module.id.slice(0,module.id.lastIndexOf(SEPARATOR))+SEPARATOR+id.slice(2)),require(resultantId)};return module.exports={},delete module.factory,factory(localRequire,module.exports,module),module.exports}var modules={},requireStack=[],inProgressModules={},SEPARATOR=".";require=function(id){if(!modules[id])throw"module "+id+" not found";if(id in inProgressModules)throw"Cycle in require graph: "+(requireStack.slice(inProgressModules[id]).join("->")+"->"+id);if(modules[id].factory)try{return inProgressModules[id]=requireStack.length,requireStack.push(id),build(modules[id])}finally{delete inProgressModules[id],requireStack.pop()}return modules[id].exports},(define=function(id,factory){if(modules[id])throw"module "+id+" already defined";modules[id]={id:id,factory:factory}}).remove=function(id){delete modules[id]},define.moduleMap=modules}(),"object"==typeof module&&"function"==typeof require&&(module.exports.require=require,module.exports.define=define),define("cordova",function(require,exports,module){function createEvent(type,data){var event=document.createEvent("Events");if(event.initEvent(type,!1,!1),data)for(var i in data)data.hasOwnProperty(i)&&(event[i]=data[i]);return event}if(window.cordova&&!(window.cordova instanceof HTMLElement))throw new Error("cordova already defined");var channel=require("cordova/channel"),platform=require("cordova/platform"),m_document_addEventListener=document.addEventListener,m_document_removeEventListener=document.removeEventListener,m_window_addEventListener=window.addEventListener,m_window_removeEventListener=window.removeEventListener,documentEventHandlers={},windowEventHandlers={};document.addEventListener=function(evt,handler,capture){var e=evt.toLowerCase();void 0!==documentEventHandlers[e]?documentEventHandlers[e].subscribe(handler):m_document_addEventListener.call(document,evt,handler,capture)},window.addEventListener=function(evt,handler,capture){var e=evt.toLowerCase();void 0!==windowEventHandlers[e]?windowEventHandlers[e].subscribe(handler):m_window_addEventListener.call(window,evt,handler,capture)},document.removeEventListener=function(evt,handler,capture){var e=evt.toLowerCase();void 0!==documentEventHandlers[e]?documentEventHandlers[e].unsubscribe(handler):m_document_removeEventListener.call(document,evt,handler,capture)},window.removeEventListener=function(evt,handler,capture){var e=evt.toLowerCase();void 0!==windowEventHandlers[e]?windowEventHandlers[e].unsubscribe(handler):m_window_removeEventListener.call(window,evt,handler,capture)};var cordova={define:define,require:require,version:"4.1.1",platformVersion:"4.1.1",platformId:platform.id,addWindowEventHandler:function(event){return windowEventHandlers[event]=channel.create(event)},addStickyDocumentEventHandler:function(event){return documentEventHandlers[event]=channel.createSticky(event)},addDocumentEventHandler:function(event){return documentEventHandlers[event]=channel.create(event)},removeWindowEventHandler:function(event){delete windowEventHandlers[event]},removeDocumentEventHandler:function(event){delete documentEventHandlers[event]},getOriginalHandlers:function(){return{document:{addEventListener:m_document_addEventListener,removeEventListener:m_document_removeEventListener},window:{addEventListener:m_window_addEventListener,removeEventListener:m_window_removeEventListener}}},fireDocumentEvent:function(type,data,bNoDetach){var evt=createEvent(type,data);void 0!==documentEventHandlers[type]?bNoDetach?documentEventHandlers[type].fire(evt):setTimeout(function(){"deviceready"==type&&document.dispatchEvent(evt),documentEventHandlers[type].fire(evt)},0):document.dispatchEvent(evt)},fireWindowEvent:function(type,data){var evt=createEvent(type,data);void 0!==windowEventHandlers[type]?setTimeout(function(){windowEventHandlers[type].fire(evt)},0):window.dispatchEvent(evt)},callbackId:Math.floor(2e9*Math.random()),callbacks:{},callbackStatus:{NO_RESULT:0,OK:1,CLASS_NOT_FOUND_EXCEPTION:2,ILLEGAL_ACCESS_EXCEPTION:3,INSTANTIATION_EXCEPTION:4,MALFORMED_URL_EXCEPTION:5,IO_EXCEPTION:6,INVALID_ACTION:7,JSON_EXCEPTION:8,ERROR:9},callbackSuccess:function(callbackId,args){cordova.callbackFromNative(callbackId,!0,args.status,[args.message],args.keepCallback)},callbackError:function(callbackId,args){cordova.callbackFromNative(callbackId,!1,args.status,[args.message],args.keepCallback)},callbackFromNative:function(callbackId,isSuccess,status,args,keepCallback){try{var callback=cordova.callbacks[callbackId];callback&&(isSuccess&&status==cordova.callbackStatus.OK?callback.success&&callback.success.apply(null,args):isSuccess||callback.fail&&callback.fail.apply(null,args),keepCallback||delete cordova.callbacks[callbackId])}catch(err){var msg="Error in "+(isSuccess?"Success":"Error")+" callbackId: "+callbackId+" : "+err;throw console&&console.log&&console.log(msg),cordova.fireWindowEvent("cordovacallbackerror",{message:msg}),err}},addConstructor:function(func){channel.onCordovaReady.subscribe(function(){try{func()}catch(e){console.log("Failed to run constructor: "+e)}})}};module.exports=cordova}),define("cordova/argscheck",function(require,exports,module){function extractParamName(callee,argIndex){return/.*?\((.*?)\)/.exec(callee)[1].split(", ")[argIndex]}function checkArgs(spec,functionName,args,opt_callee){if(moduleExports.enableChecks){for(var typeName,errMsg=null,i=0;i<spec.length;++i){var c=spec.charAt(i),cUpper=c.toUpperCase(),arg=args[i];if("*"!=c&&(typeName=utils.typeName(arg),(null!==arg&&void 0!==arg||c!=cUpper)&&typeName!=typeMap[cUpper])){errMsg="Expected "+typeMap[cUpper];break}}if(errMsg)throw errMsg+=", but got "+typeName+".",errMsg='Wrong type for parameter "'+extractParamName(opt_callee||args.callee,i)+'" of '+functionName+": "+errMsg,"undefined"==typeof jasmine&&console.error(errMsg),TypeError(errMsg)}}function getValue(value,defaultValue){return void 0===value?defaultValue:value}var utils=require("cordova/utils"),moduleExports=module.exports,typeMap={A:"Array",D:"Date",N:"Number",S:"String",F:"Function",O:"Object"};moduleExports.checkArgs=checkArgs,moduleExports.getValue=getValue,moduleExports.enableChecks=!0}),define("cordova/base64",function(require,exports,module){function uint8ToBase64(rawData){for(var segment,numBytes=rawData.byteLength,output="",table=b64_12bitTable(),i=0;i<numBytes-2;i+=3)output+=table[(segment=(rawData[i]<<16)+(rawData[i+1]<<8)+rawData[i+2])>>12],output+=table[4095&segment];return numBytes-i==2?(output+=table[(segment=(rawData[i]<<16)+(rawData[i+1]<<8))>>12],output+=b64_6bit[(4095&segment)>>6],output+="="):numBytes-i==1&&(output+=table[(segment=rawData[i]<<16)>>12],output+="=="),output}var base64=exports;base64.fromArrayBuffer=function(arrayBuffer){return uint8ToBase64(new Uint8Array(arrayBuffer))},base64.toArrayBuffer=function(str){for(var decodedStr="undefined"!=typeof atob?atob(str):new Buffer(str,"base64").toString("binary"),arrayBuffer=new ArrayBuffer(decodedStr.length),array=new Uint8Array(arrayBuffer),i=0,len=decodedStr.length;i<len;i++)array[i]=decodedStr.charCodeAt(i);return arrayBuffer};var b64_12bit,b64_6bit="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",b64_12bitTable=function(){b64_12bit=[];for(var i=0;i<64;i++)for(var j=0;j<64;j++)b64_12bit[64*i+j]=b64_6bit[i]+b64_6bit[j];return b64_12bitTable=function(){return b64_12bit},b64_12bit}}),define("cordova/builder",function(require,exports,module){function each(objects,func,context){for(var prop in objects)objects.hasOwnProperty(prop)&&func.apply(context,[objects[prop],prop])}function clobber(obj,key,value){exports.replaceHookForTesting(obj,key);var needsProperty=!1;try{obj[key]=value}catch(e){needsProperty=!0}(needsProperty||obj[key]!==value)&&utils.defineGetter(obj,key,function(){return value})}function assignOrWrapInDeprecateGetter(obj,key,value,message){message?utils.defineGetter(obj,key,function(){return console.log(message),delete obj[key],clobber(obj,key,value),value}):clobber(obj,key,value)}function include(parent,objects,clobber,merge){each(objects,function(obj,key){try{var result=obj.path?require(obj.path):{};clobber?(void 0===parent[key]?assignOrWrapInDeprecateGetter(parent,key,result,obj.deprecated):void 0!==obj.path&&(merge?recursiveMerge(parent[key],result):assignOrWrapInDeprecateGetter(parent,key,result,obj.deprecated)),result=parent[key]):void 0===parent[key]?assignOrWrapInDeprecateGetter(parent,key,result,obj.deprecated):result=parent[key],obj.children&&include(result,obj.children,clobber,merge)}catch(e){utils.alert("Exception building Cordova JS globals: "+e+' for key "'+key+'"')}})}function recursiveMerge(target,src){for(var prop in src)src.hasOwnProperty(prop)&&(target.prototype&&target.prototype.constructor===target?clobber(target.prototype,prop,src[prop]):"object"==typeof src[prop]&&"object"==typeof target[prop]?recursiveMerge(target[prop],src[prop]):clobber(target,prop,src[prop]))}var utils=require("cordova/utils");exports.buildIntoButDoNotClobber=function(objects,target){include(target,objects,!1,!1)},exports.buildIntoAndClobber=function(objects,target){include(target,objects,!0,!1)},exports.buildIntoAndMerge=function(objects,target){include(target,objects,!0,!0)},exports.recursiveMerge=recursiveMerge,exports.assignOrWrapInDeprecateGetter=assignOrWrapInDeprecateGetter,exports.replaceHookForTesting=function(){}}),define("cordova/channel",function(require,exports,module){function forceFunction(f){if("function"!=typeof f)throw"Function required as first argument!"}var utils=require("cordova/utils"),nextGuid=1,Channel=function(type,sticky){this.type=type,this.handlers={},this.state=sticky?1:0,this.fireArgs=null,this.numHandlers=0,this.onHasSubscribersChange=null},channel={join:function(h,c){for(var len=c.length,i=len,f=function(){--i||h()},j=0;j<len;j++){if(0===c[j].state)throw Error("Can only use join with sticky channels.");c[j].subscribe(f)}len||h()},create:function(type){return channel[type]=new Channel(type,!1)},createSticky:function(type){return channel[type]=new Channel(type,!0)},deviceReadyChannelsArray:[],deviceReadyChannelsMap:{},waitForInitialization:function(feature){if(feature){var c=channel[feature]||this.createSticky(feature);this.deviceReadyChannelsMap[feature]=c,this.deviceReadyChannelsArray.push(c)}},initializationComplete:function(feature){var c=this.deviceReadyChannelsMap[feature];c&&c.fire()}};Channel.prototype.subscribe=function(f,c){if(forceFunction(f),2!=this.state){var func=f,guid=f.observer_guid;"object"==typeof c&&(func=utils.close(c,f)),guid||(guid=""+nextGuid++),func.observer_guid=guid,f.observer_guid=guid,this.handlers[guid]||(this.handlers[guid]=func,1==++this.numHandlers&&this.onHasSubscribersChange&&this.onHasSubscribersChange())}else f.apply(c||this,this.fireArgs)},Channel.prototype.unsubscribe=function(f){forceFunction(f);var guid=f.observer_guid;this.handlers[guid]&&(delete this.handlers[guid],0===--this.numHandlers&&this.onHasSubscribersChange&&this.onHasSubscribersChange())},Channel.prototype.fire=function(e){var fireArgs=Array.prototype.slice.call(arguments);if(1==this.state&&(this.state=2,this.fireArgs=fireArgs),this.numHandlers){var toCall=[];for(var item in this.handlers)toCall.push(this.handlers[item]);for(var i=0;i<toCall.length;++i)toCall[i].apply(this,fireArgs);2==this.state&&this.numHandlers&&(this.numHandlers=0,this.handlers={},this.onHasSubscribersChange&&this.onHasSubscribersChange())}},channel.createSticky("onDOMContentLoaded"),channel.createSticky("onNativeReady"),channel.createSticky("onCordovaReady"),channel.createSticky("onPluginsReady"),channel.createSticky("onDeviceReady"),channel.create("onResume"),channel.create("onPause"),channel.waitForInitialization("onCordovaReady"),channel.waitForInitialization("onDOMContentLoaded"),module.exports=channel}),define("cordova/exec",function(require,exports,module){function massageArgsJsToNative(args){if(!args||"Array"!=utils.typeName(args))return args;var ret=[];return args.forEach(function(arg,i){"ArrayBuffer"==utils.typeName(arg)?ret.push({CDVType:"ArrayBuffer",data:base64.fromArrayBuffer(arg)}):ret.push(arg)}),ret}function massageMessageNativeToJs(message){if("ArrayBuffer"==message.CDVType){var stringToArrayBuffer=function(str){for(var ret=new Uint8Array(str.length),i=0;i<str.length;i++)ret[i]=str.charCodeAt(i);return ret.buffer};message=function(b64){return stringToArrayBuffer(atob(b64))}(message.data)}return message}function convertMessageToArgsNativeToJs(message){var args=[];return message&&message.hasOwnProperty("CDVType")?"MultiPart"==message.CDVType?message.messages.forEach(function(e){args.push(massageMessageNativeToJs(e))}):args.push(massageMessageNativeToJs(message)):args.push(message),args}function iOSExec(){var successCallback,failCallback,service,action,actionArgs,callbackId=null;if("string"==typeof arguments[0])throw new Error("The old format of this exec call has been removed (deprecated since 2.1). Change to: cordova.exec(null, null, 'Service', 'action', [ arg1, arg2 ]);");successCallback=arguments[0],failCallback=arguments[1],service=arguments[2],action=arguments[3],callbackId="INVALID",actionArgs=(actionArgs=arguments[4])||[],(successCallback||failCallback)&&(callbackId=service+cordova.callbackId++,cordova.callbacks[callbackId]={success:successCallback,fail:failCallback});var command=[callbackId,service,action,actionArgs=massageArgsJsToNative(actionArgs)];commandQueue.push(JSON.stringify(command)),isInContextOfEvalJs||1!=commandQueue.length||pokeNative()}function proxyChanged(){var cexec=cordovaExec();return execProxy!==cexec&&iOSExec!==cexec}function handleBridgeChange(){if(proxyChanged()){for(var commandString=commandQueue.shift();commandString;){var command=JSON.parse(commandString),callbackId=command[0],service=command[1],action=command[2],actionArgs=command[3],callbacks=cordova.callbacks[callbackId]||{};execProxy(callbacks.success,callbacks.fail,service,action,actionArgs),commandString=commandQueue.shift()}return!0}return!1}function pokeNative(){document.body?(execIframe&&execIframe.contentWindow?execIframe.contentWindow.location="gap://ready":((execIframe=document.createElement("iframe")).style.display="none",execIframe.src="gap://ready",document.body.appendChild(execIframe)),failSafeTimerId=setTimeout(function(){commandQueue.length&&(handleBridgeChange()||pokeNative())},50)):setTimeout(pokeNative)}function cordovaExec(){var cexec=require("cordova/exec");return"function"==typeof cexec.nativeFetchMessages&&"function"==typeof cexec.nativeEvalAndFetch&&"function"==typeof cexec.nativeCallback&&execProxy!==cexec?cexec:iOSExec}function execProxy(){cordovaExec().apply(null,arguments)}var execIframe,cordova=require("cordova"),utils=require("cordova/utils"),base64=require("cordova/base64"),commandQueue=[],isInContextOfEvalJs=0,failSafeTimerId=0;iOSExec.nativeFetchMessages=function(){if(failSafeTimerId&&(clearTimeout(failSafeTimerId),failSafeTimerId=0),!commandQueue.length)return"";var json="["+commandQueue.join(",")+"]";return commandQueue.length=0,json},iOSExec.nativeCallback=function(callbackId,status,message,keepCallback,debug){return iOSExec.nativeEvalAndFetch(function(){function nc2(){cordova.callbackFromNative(callbackId,success,status,args,keepCallback)}var success=0===status||1===status,args=convertMessageToArgsNativeToJs(message);setTimeout(nc2,0)})},iOSExec.nativeEvalAndFetch=function(func){isInContextOfEvalJs++;try{return func(),iOSExec.nativeFetchMessages()}finally{isInContextOfEvalJs--}},execProxy.nativeFetchMessages=function(){return cordovaExec().nativeFetchMessages.apply(null,arguments)},execProxy.nativeEvalAndFetch=function(){return cordovaExec().nativeEvalAndFetch.apply(null,arguments)},execProxy.nativeCallback=function(){return cordovaExec().nativeCallback.apply(null,arguments)},module.exports=execProxy}),define("cordova/exec/proxy",function(require,exports,module){var CommandProxyMap={};module.exports={add:function(id,proxyObj){return console.log("adding proxy for "+id),CommandProxyMap[id]=proxyObj,proxyObj},remove:function(id){var proxy=CommandProxyMap[id];return delete CommandProxyMap[id],CommandProxyMap[id]=null,proxy},get:function(service,action){return CommandProxyMap[service]?CommandProxyMap[service][action]:null}}}),define("cordova/init",function(require,exports,module){function logUnfiredChannels(arr){for(var i=0;i<arr.length;++i)2!=arr[i].state&&console.log("Channel not fired: "+arr[i].type)}var channel=require("cordova/channel"),cordova=require("cordova"),modulemapper=require("cordova/modulemapper"),platform=require("cordova/platform"),pluginloader=require("cordova/pluginloader"),utils=require("cordova/utils"),platformInitChannelsArray=[channel.onNativeReady,channel.onPluginsReady];window.setTimeout(function(){2!=channel.onDeviceReady.state&&(console.log("deviceready has not fired after 5 seconds."),logUnfiredChannels(platformInitChannelsArray),logUnfiredChannels(channel.deviceReadyChannelsArray))},5e3),window.navigator&&(window.navigator=function(origNavigator){var CordovaNavigator=function(){};CordovaNavigator.prototype=origNavigator;var newNavigator=new CordovaNavigator;if(CordovaNavigator.bind)for(var key in origNavigator)"function"==typeof origNavigator[key]?newNavigator[key]=origNavigator[key].bind(origNavigator):function(k){utils.defineGetterSetter(newNavigator,key,function(){return origNavigator[k]})}(key);return newNavigator}(window.navigator)),window.console||(window.console={log:function(){}}),window.console.warn||(window.console.warn=function(msg){this.log("warn: "+msg)}),channel.onPause=cordova.addDocumentEventHandler("pause"),channel.onResume=cordova.addDocumentEventHandler("resume"),channel.onActivated=cordova.addDocumentEventHandler("activated"),channel.onDeviceReady=cordova.addStickyDocumentEventHandler("deviceready"),"complete"==document.readyState||"interactive"==document.readyState?channel.onDOMContentLoaded.fire():document.addEventListener("DOMContentLoaded",function(){channel.onDOMContentLoaded.fire()},!1),window._nativeReady&&channel.onNativeReady.fire(),modulemapper.clobbers("cordova","cordova"),modulemapper.clobbers("cordova/exec","cordova.exec"),modulemapper.clobbers("cordova/exec","Cordova.exec"),platform.bootstrap&&platform.bootstrap(),setTimeout(function(){pluginloader.load(function(){channel.onPluginsReady.fire()})},0),channel.join(function(){modulemapper.mapModules(window),platform.initialize&&platform.initialize(),channel.onCordovaReady.fire(),channel.join(function(){require("cordova").fireDocumentEvent("deviceready")},channel.deviceReadyChannelsArray)},platformInitChannelsArray)}),define("cordova/init_b",function(require,exports,module){function logUnfiredChannels(arr){for(var i=0;i<arr.length;++i)2!=arr[i].state&&console.log("Channel not fired: "+arr[i].type)}var channel=require("cordova/channel"),cordova=require("cordova"),modulemapper=require("cordova/modulemapper"),platform=require("cordova/platform"),pluginloader=require("cordova/pluginloader"),utils=require("cordova/utils"),platformInitChannelsArray=[channel.onDOMContentLoaded,channel.onNativeReady,channel.onPluginsReady];cordova.exec=require("cordova/exec"),window.setTimeout(function(){2!=channel.onDeviceReady.state&&(console.log("deviceready has not fired after 5 seconds."),logUnfiredChannels(platformInitChannelsArray),logUnfiredChannels(channel.deviceReadyChannelsArray))},5e3),window.navigator&&(window.navigator=function(origNavigator){var CordovaNavigator=function(){};CordovaNavigator.prototype=origNavigator;var newNavigator=new CordovaNavigator;if(CordovaNavigator.bind)for(var key in origNavigator)"function"==typeof origNavigator[key]?newNavigator[key]=origNavigator[key].bind(origNavigator):function(k){utils.defineGetterSetter(newNavigator,key,function(){return origNavigator[k]})}(key);return newNavigator}(window.navigator)),window.console||(window.console={log:function(){}}),window.console.warn||(window.console.warn=function(msg){this.log("warn: "+msg)}),channel.onPause=cordova.addDocumentEventHandler("pause"),channel.onResume=cordova.addDocumentEventHandler("resume"),channel.onActivated=cordova.addDocumentEventHandler("activated"),channel.onDeviceReady=cordova.addStickyDocumentEventHandler("deviceready"),"complete"==document.readyState||"interactive"==document.readyState?channel.onDOMContentLoaded.fire():document.addEventListener("DOMContentLoaded",function(){channel.onDOMContentLoaded.fire()},!1),window._nativeReady&&channel.onNativeReady.fire(),platform.bootstrap&&platform.bootstrap(),setTimeout(function(){pluginloader.load(function(){channel.onPluginsReady.fire()})},0),channel.join(function(){modulemapper.mapModules(window),platform.initialize&&platform.initialize(),channel.onCordovaReady.fire(),channel.join(function(){require("cordova").fireDocumentEvent("deviceready")},channel.deviceReadyChannelsArray)},platformInitChannelsArray)}),define("cordova/modulemapper",function(require,exports,module){function addEntry(strategy,moduleName,symbolPath,opt_deprecationMessage){if(!(moduleName in moduleMap))throw new Error("Module "+moduleName+" does not exist.");symbolList.push(strategy,moduleName,symbolPath),opt_deprecationMessage&&(deprecationMap[symbolPath]=opt_deprecationMessage)}function prepareNamespace(symbolPath,context){if(!symbolPath)return context;for(var part,parts=symbolPath.split("."),cur=context,i=0;part=parts[i];++i)cur=cur[part]=cur[part]||{};return cur}var symbolList,deprecationMap,builder=require("cordova/builder"),moduleMap=define.moduleMap;exports.reset=function(){symbolList=[],deprecationMap={}},exports.clobbers=function(moduleName,symbolPath,opt_deprecationMessage){addEntry("c",moduleName,symbolPath,opt_deprecationMessage)},exports.merges=function(moduleName,symbolPath,opt_deprecationMessage){addEntry("m",moduleName,symbolPath,opt_deprecationMessage)},exports.defaults=function(moduleName,symbolPath,opt_deprecationMessage){addEntry("d",moduleName,symbolPath,opt_deprecationMessage)},exports.runs=function(moduleName){addEntry("r",moduleName,null)},exports.mapModules=function(context){var origSymbols={};context.CDV_origSymbols=origSymbols;for(var i=0,len=symbolList.length;i<len;i+=3){var strategy=symbolList[i],moduleName=symbolList[i+1],module=require(moduleName);if("r"!=strategy){var symbolPath=symbolList[i+2],lastDot=symbolPath.lastIndexOf("."),namespace=symbolPath.substr(0,lastDot),lastName=symbolPath.substr(lastDot+1),deprecationMsg=symbolPath in deprecationMap?"Access made to deprecated symbol: "+symbolPath+". "+deprecationMsg:null,parentObj=prepareNamespace(namespace,context),target=parentObj[lastName];"m"==strategy&&target?builder.recursiveMerge(target,module):("d"==strategy&&!target||"d"!=strategy)&&(symbolPath in origSymbols||(origSymbols[symbolPath]=target),builder.assignOrWrapInDeprecateGetter(parentObj,lastName,module,deprecationMsg))}}},exports.getOriginalSymbol=function(context,symbolPath){var origSymbols=context.CDV_origSymbols;if(origSymbols&&symbolPath in origSymbols)return origSymbols[symbolPath];for(var parts=symbolPath.split("."),obj=context,i=0;i<parts.length;++i)obj=obj&&obj[parts[i]];return obj},exports.reset()}),define("cordova/modulemapper_b",function(require,exports,module){function addEntry(strategy,moduleName,symbolPath,opt_deprecationMessage){symbolList.push(strategy,moduleName,symbolPath),opt_deprecationMessage&&(deprecationMap[symbolPath]=opt_deprecationMessage)}function prepareNamespace(symbolPath,context){if(!symbolPath)return context;for(var part,parts=symbolPath.split("."),cur=context,i=0;part=parts[i];++i)cur=cur[part]=cur[part]||{};return cur}var deprecationMap,builder=require("cordova/builder"),symbolList=[];exports.reset=function(){symbolList=[],deprecationMap={}},exports.clobbers=function(moduleName,symbolPath,opt_deprecationMessage){addEntry("c",moduleName,symbolPath,opt_deprecationMessage)},exports.merges=function(moduleName,symbolPath,opt_deprecationMessage){addEntry("m",moduleName,symbolPath,opt_deprecationMessage)},exports.defaults=function(moduleName,symbolPath,opt_deprecationMessage){addEntry("d",moduleName,symbolPath,opt_deprecationMessage)},exports.runs=function(moduleName){addEntry("r",moduleName,null)},exports.mapModules=function(context){var origSymbols={};context.CDV_origSymbols=origSymbols;for(var i=0,len=symbolList.length;i<len;i+=3){var strategy=symbolList[i],moduleName=symbolList[i+1],module=require(moduleName);if("r"!=strategy){var symbolPath=symbolList[i+2],lastDot=symbolPath.lastIndexOf("."),namespace=symbolPath.substr(0,lastDot),lastName=symbolPath.substr(lastDot+1),deprecationMsg=symbolPath in deprecationMap?"Access made to deprecated symbol: "+symbolPath+". "+deprecationMsg:null,parentObj=prepareNamespace(namespace,context),target=parentObj[lastName];"m"==strategy&&target?builder.recursiveMerge(target,module):("d"==strategy&&!target||"d"!=strategy)&&(symbolPath in origSymbols||(origSymbols[symbolPath]=target),builder.assignOrWrapInDeprecateGetter(parentObj,lastName,module,deprecationMsg))}}},exports.getOriginalSymbol=function(context,symbolPath){var origSymbols=context.CDV_origSymbols;if(origSymbols&&symbolPath in origSymbols)return origSymbols[symbolPath];for(var parts=symbolPath.split("."),obj=context,i=0;i<parts.length;++i)obj=obj&&obj[parts[i]];return obj},exports.reset()}),define("cordova/platform",function(require,exports,module){module.exports={id:"ios",bootstrap:function(){require("cordova/channel").onNativeReady.fire()}}}),define("cordova/pluginloader",function(require,exports,module){function injectIfNecessary(id,url,onload,onerror){onerror=onerror||onload,id in define.moduleMap?onload():exports.injectScript(url,function(){id in define.moduleMap?onload():onerror()},onerror)}function onScriptLoadingComplete(moduleList,finishPluginLoading){for(var module,i=0;module=moduleList[i];i++){if(module.clobbers&&module.clobbers.length)for(var j=0;j<module.clobbers.length;j++)modulemapper.clobbers(module.id,module.clobbers[j]);if(module.merges&&module.merges.length)for(var k=0;k<module.merges.length;k++)modulemapper.merges(module.id,module.merges[k]);module.runs&&modulemapper.runs(module.id)}finishPluginLoading()}function handlePluginsObject(path,moduleList,finishPluginLoading){function scriptLoadedCallback(){--scriptCounter||onScriptLoadingComplete(moduleList,finishPluginLoading)}var scriptCounter=moduleList.length;if(scriptCounter)for(var i=0;i<moduleList.length;i++)injectIfNecessary(moduleList[i].id,path+moduleList[i].file,scriptLoadedCallback);else finishPluginLoading()}function findCordovaPath(){for(var path=null,scripts=document.getElementsByTagName("script"),term="/cordova.js",n=scripts.length-1;n>-1;n--){var src=scripts[n].src.replace(/\?.*$/,"");if(src.indexOf(term)==src.length-term.length){path=src.substring(0,src.length-term.length)+"/";break}}return path}var modulemapper=require("cordova/modulemapper");require("cordova/urlutil");exports.injectScript=function(url,onload,onerror){var script=document.createElement("script");script.onload=onload,script.onerror=onerror,script.src=url,document.head.appendChild(script)},exports.load=function(callback){var pathPrefix=findCordovaPath();null===pathPrefix&&(console.log("Could not find cordova.js script tag. Plugin loading may fail."),pathPrefix=""),injectIfNecessary("cordova/plugin_list",pathPrefix+"cordova_plugins.js",function(){var moduleList=require("cordova/plugin_list");handlePluginsObject(pathPrefix,moduleList,callback)},callback)}}),define("cordova/pluginloader_b",function(require,exports,module){function handlePluginsObject(moduleList){if(moduleList&&moduleList.length)for(var module,i=0;module=moduleList[i];i++){if(module.clobbers&&module.clobbers.length)for(var j=0;j<module.clobbers.length;j++)modulemapper.clobbers(module.id,module.clobbers[j]);if(module.merges&&module.merges.length)for(var k=0;k<module.merges.length;k++)modulemapper.merges(module.id,module.merges[k]);module.runs&&modulemapper.runs(module.id)}}var modulemapper=require("cordova/modulemapper");exports.load=function(callback){handlePluginsObject(require("cordova/plugin_list")),callback()}}),define("cordova/urlutil",function(require,exports,module){exports.makeAbsolute=function(url){var anchorEl=document.createElement("a");return anchorEl.href=url,anchorEl.href}}),define("cordova/utils",function(require,exports,module){function UUIDcreatePart(length){for(var uuidpart="",i=0;i<length;i++){var uuidchar=parseInt(256*Math.random(),10).toString(16);1==uuidchar.length&&(uuidchar="0"+uuidchar),uuidpart+=uuidchar}return uuidpart}var utils=exports;utils.defineGetterSetter=function(obj,key,getFunc,opt_setFunc){if(Object.defineProperty){var desc={get:getFunc,configurable:!0};opt_setFunc&&(desc.set=opt_setFunc),Object.defineProperty(obj,key,desc)}else obj.__defineGetter__(key,getFunc),opt_setFunc&&obj.__defineSetter__(key,opt_setFunc)},utils.defineGetter=utils.defineGetterSetter,utils.arrayIndexOf=function(a,item){if(a.indexOf)return a.indexOf(item);for(var len=a.length,i=0;i<len;++i)if(a[i]==item)return i;return-1},utils.arrayRemove=function(a,item){var index=utils.arrayIndexOf(a,item);return-1!=index&&a.splice(index,1),-1!=index},utils.typeName=function(val){return Object.prototype.toString.call(val).slice(8,-1)},utils.isArray=Array.isArray||function(a){return"Array"==utils.typeName(a)},utils.isDate=function(d){return d instanceof Date},utils.clone=function(obj){if(!obj||"function"==typeof obj||utils.isDate(obj)||"object"!=typeof obj)return obj;var retVal,i;if(utils.isArray(obj)){for(retVal=[],i=0;i<obj.length;++i)retVal.push(utils.clone(obj[i]));return retVal}retVal={};for(i in obj)i in retVal&&retVal[i]==obj[i]||(retVal[i]=utils.clone(obj[i]));return retVal},utils.close=function(context,func,params){return function(){var args=params||arguments;return func.apply(context,args)}},utils.createUUID=function(){return UUIDcreatePart(4)+"-"+UUIDcreatePart(2)+"-"+UUIDcreatePart(2)+"-"+UUIDcreatePart(2)+"-"+UUIDcreatePart(6)},utils.extend=function(){var F=function(){};return function(Child,Parent){F.prototype=Parent.prototype,Child.prototype=new F,Child.__super__=Parent.prototype,Child.prototype.constructor=Child}}(),utils.alert=function(msg){window.alert?window.alert(msg):console&&console.log&&console.log(msg)}}),window.cordova=require("cordova"),require("cordova/init")}(),gbx.define("comm/base/command_ui",["gbx/render/display/sprite"],function(Sprite){return Sprite.extend({init:function(){this._super(),this._commandHandler={}},setCommand:function(cmd,fn,ctx){this._commandHandler[cmd]=[fn,ctx]},runCommand:function(cmd){var args=Array.prototype.slice.call(arguments,1);if(cmd in this._commandHandler){var fn=this._commandHandler[cmd][0],ctx=this._commandHandler[cmd][1];return ctx||(ctx=this),fn.apply(ctx,args)}throw"command "+cmd+" not set yet"},end:function(){this._commandHandler=null,this._super()}})}),gbx.define("comm/base/confirm",["gbx/render/display/sprite","comm/base/command_ui","gbx/render/stage"],function(Sprite,BaseUI,stage){return BaseUI.extend({init:function(isDestroyAfterClose){this._super(),this.size(stage.designWidth,stage.designHeight),this._yesFn=null,this._noFn=null,this._destroyAfterClose=!!isDestroyAfterClose;var masker=new Sprite;masker.size(stage.designWidth,stage.designHeight),masker.graphics.drawRect(0,0,stage.designWidth,stage.designHeight,"#000000"),masker.alpha=.4,this.addChild(masker)},_doActionYes:function(){var fn;"function"==typeof this._yesFn&&(fn=this._yesFn),this._close(),fn&&fn()},_doActionNo:function(){var fn;"function"==typeof this._noFn&&(fn=this._noFn),this._close(),fn&&fn()},_close:function(){this._yesFn=null,this._noFn=null,this._destroyAfterClose?this.destroy():this.removeFromStage()},_setCallback:function(yesContext,yesCallback,noContext,noCallback){"function"==typeof yesContext&&(noCallback=noContext,noContext=yesCallback,yesCallback=yesContext,yesContext=null),"function"==typeof noContext&&(noCallback=noContext,noContext=yesContext),yesCallback&&(this._yesFn=yesCallback.bind(yesContext)),noCallback&&(this._noFn=noCallback.bind(noContext))},show:function(){this.addToStage(5)},end:function(){this._yesFn=null,this._noFn=null,this._super()}})}),gbx.define("comm/base/game_ui",["comm/base/command_ui","comm/ui/marquee"],function(CommandUI,Marquee){return CommandUI.extend({init:function(){this._super(),this.messageBar=new Marquee(!1,!0,!1),this.messageBar.pos(640,20),this.messageBar.zOrder=10,this.addChild(this.messageBar),this.subscribe("global.trumpet.update",this,this.onBoardCastMessage)},onBoardCastMessage:function(context){this.messageBar.clear(),this.messageBar.setText(context)}})}),gbx.define("comm/base/poker_card",["gbx/render/display/sprite","gbx/render/tween","comm/ui/ui_utils"],function(Sprite,Tween,uiUtils){return Sprite.extend({init:function(){this._super(),this.size(213,296),this.pivotToCenter(),this._value=0,this._point=0,this._color=0,this._scale=1,this._backSp=new Sprite,this._backSp.setImage("assets/major/card/cardback.png"),this.addChild(this._backSp),this._faceSp=new Sprite,this.addChild(this._faceSp),this.showBack()},showBlurry:function(){},show:function(){this.visible=!0,this.alpha=1},hide:function(){this.visible=!1},showBack:function(){this._backSp.visible=!0,this._faceSp.visible=!1},showFace:function(){this._backSp.visible=!1,this._faceSp.visible=!0},get cardValue(){return this._value},get isShowingFace(){return this._faceSp.visible},setScale:function(value){this._scale=value,this.scale(value)},_setCardValue:function(value,point,color){if(point<1||point>15||14==point&&1!=color||15==point&&1!=color||point<14&&color>4||color<1)console.log("错误的牌值:",{value:value,point:point,color:color});else{var imgsrc="assets/major/card/"+point+"_"+color+".png";this._faceSp.setImage(imgsrc),this._value=value,this._point=point,this._color=color}},_flipTo:function(totalTime,side,context,endCallback){1==side?(this._backSp.visible=!0,this._faceSp.visible=!1):(this._backSp.visible=!1,this._faceSp.visible=!0),this.horizonFlip(side,totalTime,context,endCallback)},horizonFlip:function(side,totalTime,context,endCallback){this.tweenTo({scaleX:0},totalTime/2,null,this,function(){1==side?(this._backSp.visible=!1,this._faceSp.visible=!0):(this._backSp.visible=!0,this._faceSp.visible=!1)}),this.tweenTo({scaleX:this._scale},totalTime/2,null,context,endCallback,null,totalTime/2)},verticalFlip:function(side,totalTime,context,endCallback){this.tweenTo({scaleY:0},totalTime/2,null,this,function(){1==side?(this._backSp.visible=!1,this._faceSp.visible=!0):(this._backSp.visible=!0,this._faceSp.visible=!1)}),this.tweenTo({scaleY:this._scale},totalTime/2,null,context,endCallback,null,totalTime/2)},flipToBack:function(context,endCallback){this._flipTo(200,0,context,endCallback)},flipToFace:function(context,endCallback){this._flipTo(200,1,context,endCallback)},flyTo:function(x,y,context,endCallback){this.tweenTo({x:x,y:y},200,Tween.TimingFunction.sineIn,context,endCallback)},flyToAndScaleWithTime:function(x,y,scaleFrom,scaleTo,time,context,endCallback){this.setScale(scaleFrom),this._scale=scaleTo,this.tweenTo({x:x,y:y,scaleX:scaleTo,scaleY:scaleTo},time,Tween.TimingFunction.sineOut,context,endCallback)},end:function(){this._backSp=null,this._faceSp=null,this._super()}})}),gbx.define("comm/data/player/player_data",["gbx/class"],function(Class){return Class.extend({init:function(playerId){this.uid=playerId,this.nick=null,this.sex=null,this.head=null,this.gold=null,this.carryOnGold=null,this.diamond=null,this.level=null,this.levelExp=null,this.vipLevel=null,this.vipExp=null,this._chipArray=[],this.isDealer=!1,this.bankCardNumber=null,this.bankCardName=null,this._vipRoomLimitList=[],this._serviceQQInfoList=[],this._bankCardInfo={}},set bankCardInfo(v){for(var i=0;i<v.length;i++)this._bankCardInfo[v[i].accountNo]=v[i]},get bankCardInfo(){return this._bankCardInfo},get vipRoomLimitList(){return this._vipRoomLimitList},set vipRoomLimitList(data){this._vipRoomLimitList=data},get chipArray(){return this._chipArray},set chipArray(data){for(var i=0;i<data.length;i++){var str=JSON.stringify(data[i]);localStorage.setItem(i.toString(),str);var str1=localStorage.getItem(i.toString());this._chipArray[i]=JSON.parse(str1)}},get serviceQQInfoList(){return this._serviceQQInfoList},set serviceQQInfoList(data){this._serviceQQInfoList=data},setData:function(data){this.uid=data.playerId,this.sex=data.sex,this.nick=data.nickName,this.head=data.playerIcon,this.gold=data.roomCoin,this.level=data.level,this.vipLevel=data.vipLevel}})}),gbx.define("comm/helper/account_mgr",["gbx/net/connector","gbx/bridge","comm/helper/conf_mgr"],function(server,bridge,confMgr){var userData,token,randomSalt,staticSalt,gateServerAddress,gameServerId,sensitiveList,guestAccount,packageId=null,guestAccountArray=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],getRandomString=function(len){var maxPos=guestAccountArray.length,pwd="guest";for(i=0;i<len;i++)pwd+=guestAccountArray[Math.floor(Math.random()*maxPos)];return pwd},saveUserDataToStorage=function(){localStorage.userData=JSON.stringify(userData)},saveGuestAccount=function(){localStorage.guestAccount=guestAccount},checkSensitive=function(word){if(void 0===sensitiveList&&(sensitiveList=confMgr.read("major/dat/user/sensitive.json")),""===word)return!1;for(var i=0;i<sensitiveList.length;i++)if(word.indexOf(sensitiveList[i])>-1)return!1;return!0};return function(){var t=localStorage.userData;userData=t?JSON.parse(t):{account:"",password:"",country:"86",checkAccount:!0,checkPassword:!0}}(),function(){var t=localStorage.guestAccount;t?guestAccount=t:(guestAccount=getRandomString(6),saveGuestAccount()),""==userData.account&&(userData={account:guestAccount,password:"",country:"86",checkAccount:!0,checkPassword:!0})}(),{getGuestAccount:function(){return guestAccount},getGuestPlatformId:function(){return"guest"},getUserData:function(){return userData},saveUserData:function(txtAccount,txtPassword,cbAccount,cbPassword){cbAccount||(cbPassword=!1),cbPassword&&(cbAccount=!0),userData.account=txtAccount,userData.password=txtPassword,userData.checkAccount=cbAccount,userData.checkPassword=cbPassword,saveUserDataToStorage()},saveUserDataOnly:function(){saveUserDataToStorage()},checkSensitive:function(word){return checkSensitive(word)},setToken:function(newToken){token=newToken},getToken:function(){return token},setSalt:function(cRandomSalt,cStaticSalt){randomSalt=cRandomSalt,staticSalt=cStaticSalt},getHashPassword:function(){return hex_md5(hex_md5(userData.password+staticSalt)+randomSalt)},setGateServerAddress:function(address){gateServerAddress=address},getGateServerAddress:function(){return gateServerAddress},setGameServerId:function(serverId){gameServerId=serverId},getGameServerId:function(){return gameServerId},getUserCountryCode:function(){return userData.country},setPackageId:function(pId){packageId=pId},getPackageId:function(){return null==packageId?bridge.getPackageId():packageId}}}),gbx.define("comm/helper/baccarat_algorithm",["gbx/cclass","gbx/net/net_tool","comm/helper/conf_mgr"],function(Class,netTool,confMgr){return Class.extend({init:function(){this._super(),this.clear()},clear:function(){this._statisticsDta={banker:0,farmer:0,deuce:0,bankerPair:0,farmerPair:0,count89:0,countAll:0},this._beadPlateColMax=0,this._beadPlateIndex=0,this._beadPlateShowData={},this._emptyBigRoadColMin=0,this._bigRoadColMax=0,this._preBigRoadElem=null,this._bigRoadData={},this._bigRoadShowData={},this._emptyBigEyeRoadColMin=0,this._bigEyeRoadColMax=0,this._preBigEyeRoadElem=null,this._bigEyeRoadShowData={},this._emptySmallRoadColMin=0,this._smallRoadColMax=0,this._preSmallRoadElem=null,this._smallRoadShowData={},this._emptyCockroachRoadColMin=0,this._cockroachRoadColMax=0,this._preCockroachRoadElem=null,this._cockroachRoadShowData={}},addAll:function(data){for(var i=0;i<data.length;i++)this._add(data[i],!0);var fResult=this._forecast();return[this._beadPlateShowData,this._bigRoadShowData,this._bigEyeRoadShowData,this._smallRoadShowData,this._cockroachRoadShowData,this._statisticsDta,fResult]},add:function(oneData){var result=this._add(oneData,!0),fResult=this._forecast();return result.push(fResult),result},getAllColMax:function(){return{bigRoad:this._bigRoadColMax,bigEyeRoad:this._bigEyeRoadColMax,smallRoad:this._smallRoadColMax,yueURoad:this._cockroachRoadColMax,plateRoad:this._beadPlateColMax}},_forecast:function(){var forecast={winType:confMgr.definition.WIN_STATE.WIN_BANK,bankerPair:!1,farmerPair:!1},forecastResult=this._add(forecast,!1),fResult={bigEyeRoad:-1,smallRoad:-1,cockroach:-1};return null!=forecastResult[2]&&(fResult.bigEyeRoad=Number(forecastResult[2].isRed)),null!=forecastResult[3]&&(fResult.smallRoad=Number(forecastResult[3].isRed)),null!=forecastResult[4]&&(fResult.cockroach=Number(forecastResult[4].isRed)),fResult},_add:function(oneData,isAdd){isAdd&&(oneData.winType==confMgr.definition.WIN_STATE.WIN_BANK?this._statisticsDta.banker+=1:oneData.winType==confMgr.definition.WIN_STATE.WIN_FARM?this._statisticsDta.farmer+=1:this._statisticsDta.deuce+=1,oneData.bankerPair&&(this._statisticsDta.bankerPair+=1),oneData.farmerPair&&(this._statisticsDta.farmerPair+=1),8!=oneData.bankerNum&&9!=oneData.bankerNum&&8!=oneData.farmerNum&&9!=oneData.farmerNum||(this._statisticsDta.count89+=1),this._statisticsDta.countAll+=1);var baseElem=netTool.createObjFromProto(oneData),curBeadPlateElem=this._addToBeadPlate(baseElem,isAdd),curBigRoadElem=this._addToBigRoad(baseElem,isAdd);return[curBeadPlateElem,curBigRoadElem,this._addToBigEyeRoad(curBigRoadElem,isAdd),this._addToSmallRoad(curBigRoadElem,isAdd),this._addToCockroachRoad(curBigRoadElem,isAdd),this._statisticsDta]},_showData:function(dataAll,rowMax,colMax){for(var row=0;row<rowMax;row++){for(var str="",col=0;col<colMax;col++){var elem=this._getFirstElem(dataAll,row,col);str+=void 0==elem?" elem------":" elem-"+elem.showRow+"-"+elem.showCol+"-"+elem.isRed}gbx.log(str)}},_addElem:function(dataAll,data,row,col){var dataCol=dataAll[col];void 0==dataCol&&(dataCol={},dataAll[col]=dataCol);var dataRC=dataCol[row];void 0==dataRC&&(dataRC=[],dataCol[row]=dataRC),dataRC.push(data)},_getElemArr:function(dataAll,row,col){var dataCol=dataAll[col];return void 0==dataCol?dataCol:dataCol[row]},_getFirstElem:function(dataAll,row,col){var dataCol=dataAll[col];if(void 0==dataCol)return dataCol;var dataRC=dataCol[row];return void 0==dataRC?dataRC:dataRC[0]},_getBeadPlatePosByIndex:function(index){return[index%6,Math.floor(index/6)]},_addToBeadPlate:function(baseElem,isAdd){var elem={};elem.baseElem=baseElem;var pos=this._getBeadPlatePosByIndex(this._beadPlateIndex);return elem.showRow=pos[0],elem.showCol=pos[1],isAdd&&(elem.showCol>this._beadPlateColMax&&(this._beadPlateColMax=elem.showCol),this._addElem(this._beadPlateShowData,elem,elem.showRow,elem.showCol),this._beadPlateIndex++),elem},_checkBigRoadShowPos:function(winType,row,col){return!(row>=6)&&void 0==this._getElemArr(this._bigRoadShowData,row,col)},_addToBigRoad:function(baseElem,isAdd){var elem={};elem.baseElem=baseElem,elem.row=0,elem.col=0;var preWinType=baseElem.winType,preRow=-1,preCol=0,preShowRow=-1,preShowCol=0,hasPreElem=!1;null!=this._preBigRoadElem&&(hasPreElem=!0,preWinType=this._preBigRoadElem.baseElem.winType,preRow=this._preBigRoadElem.row,preCol=this._preBigRoadElem.col,preShowRow=this._preBigRoadElem.showRow,preShowCol=this._preBigRoadElem.showCol),baseElem.winType!=confMgr.definition.WIN_STATE.WIN_DEUCE&&(hasPreElem&&(baseElem.winType==preWinType?(elem.row=preRow+1,elem.col=preCol):(elem.row=0,elem.col=preCol+1)),isAdd&&(this._addElem(this._bigRoadData,elem,elem.row,elem.col),this._preBigRoadElem=elem));var isSame=!1,isDeuce=!1;return baseElem.winType==confMgr.definition.WIN_STATE.WIN_DEUCE?(isSame=!0,isDeuce=!0):baseElem.winType==preWinType&&(isSame=!0),isSame?(hasPreElem?isDeuce?(elem.showRow=preShowRow,elem.showCol=preShowCol,elem.showRow<0&&(elem.showRow=0)):this._checkBigRoadShowPos(baseElem.winType,preShowRow+1,preShowCol)?(elem.showRow=preShowRow+1,elem.showCol=preShowCol):(elem.showRow=preShowRow,elem.showCol=preShowCol+1):(elem.showRow=0,elem.showCol=0),isAdd&&(0==elem.showRow&&elem.showCol>=this._emptyBigRoadColMin&&(this._emptyBigRoadColMin=elem.showCol+1),elem.showCol>this._bigRoadColMax&&(this._bigRoadColMax=elem.showCol),this._addElem(this._bigRoadShowData,elem,elem.showRow,elem.showCol))):(elem.showRow=0,elem.showCol=this._emptyBigRoadColMin,isAdd&&(this._emptyBigRoadColMin++,this._addElem(this._bigRoadShowData,elem,elem.showRow,elem.showCol))),elem},_checkLength:function(col,deltaCol){var col1=this._bigRoadData[col-1],col2=this._bigRoadData[col-1-deltaCol];return Object.getOwnPropertyNames(col1).length==Object.getOwnPropertyNames(col2).length},_checkOther:function(row,col,deltaCol){return void 0!=this._getFirstElem(this._bigRoadData,row,col-deltaCol)||void 0==this._getFirstElem(this._bigRoadData,row-1,col-deltaCol)},_checkStartPos:function(bigRoadElem,deltaCol){return!(bigRoadElem.col<=deltaCol-1)&&!(bigRoadElem.col==deltaCol&&bigRoadElem.row<=0)},_checkShowPos:function(dataAll,isRed,row,col){return!(row>=6)&&void 0==this._getFirstElem(dataAll,row,col)},_makeElemCommon:function(bigRoadElem,allData,preElem,emptyColMin,deltaCol){var elem={};return 0==bigRoadElem.row?this._checkLength(bigRoadElem.col,deltaCol)?elem.isRed=!0:elem.isRed=!1:this._checkOther(bigRoadElem.row,bigRoadElem.col,deltaCol)?elem.isRed=!0:elem.isRed=!1,null==preElem?(elem.showRow=0,elem.showCol=0):elem.isRed!=preElem.isRed?(elem.showRow=0,elem.showCol=emptyColMin):this._checkShowPos(allData,elem.isRed,preElem.showRow+1,preElem.showCol)?(elem.showRow=preElem.showRow+1,elem.showCol=preElem.showCol):(elem.showRow=preElem.showRow,elem.showCol=preElem.showCol+1),elem},_addToBigEyeRoad:function(bigRoadElem,isAdd){if(bigRoadElem.baseElem.winType==confMgr.definition.WIN_STATE.WIN_DEUCE)return null;if(!this._checkStartPos(bigRoadElem,1))return null;var elem=this._makeElemCommon(bigRoadElem,this._bigEyeRoadShowData,this._preBigEyeRoadElem,this._emptyBigEyeRoadColMin,1);return isAdd&&(0==elem.showRow&&elem.showCol>=this._emptyBigEyeRoadColMin&&(this._emptyBigEyeRoadColMin=elem.showCol+1),elem.showCol>this._bigEyeRoadColMax&&(this._bigEyeRoadColMax=elem.showCol),this._addElem(this._bigEyeRoadShowData,elem,elem.showRow,elem.showCol),this._preBigEyeRoadElem=elem),elem},_addToSmallRoad:function(bigRoadElem,isAdd){if(bigRoadElem.baseElem.winType==confMgr.definition.WIN_STATE.WIN_DEUCE)return null;if(!this._checkStartPos(bigRoadElem,2))return null;var elem=this._makeElemCommon(bigRoadElem,this._smallRoadShowData,this._preSmallRoadElem,this._emptySmallRoadColMin,2);return isAdd&&(0==elem.showRow&&elem.showCol>=this._emptySmallRoadColMin&&(this._emptySmallRoadColMin=elem.showCol+1),elem.showCol>this._smallRoadColMax&&(this._smallRoadColMax=elem.showCol),this._addElem(this._smallRoadShowData,elem,elem.showRow,elem.showCol),this._preSmallRoadElem=elem),elem},_addToCockroachRoad:function(bigRoadElem,isAdd){if(bigRoadElem.baseElem.winType==confMgr.definition.WIN_STATE.WIN_DEUCE)return null;if(!this._checkStartPos(bigRoadElem,3))return null;var elem=this._makeElemCommon(bigRoadElem,this._cockroachRoadShowData,this._preCockroachRoadElem,this._emptyCockroachRoadColMin,3);return isAdd&&(0==elem.showRow&&elem.showCol>=this._emptyCockroachRoadColMin&&(this._emptyCockroachRoadColMin=elem.showCol+1),elem.showCol>this._cockroachRoadColMax&&(this._cockroachRoadColMax=elem.showCol),this._addElem(this._cockroachRoadShowData,elem,elem.showRow,elem.showCol),this._preCockroachRoadElem=elem),elem}})}),gbx.define("comm/helper/bank_mgr",["gbx/class","comm/helper/playerdata_mgr","comm/ui/ui_utils","conf/ui_locallization","conf/bank_card"],function(Class,playerDataMgr,uiUtils,uiLocallization,bankCard){return new(Class.extend({init:function(){},trimLeft:function(s){if(null==s)return"";var whitespace=new String(" \t\n\r"),str=new String(s);if(-1!=whitespace.indexOf(str.charAt(0))){for(var j=0,i=str.length;j<i&&-1!=whitespace.indexOf(str.charAt(j));)j++;str=str.substring(j,i)}return str},trimRight:function(s){if(null==s)return"";var whitespace=new String(" \t\n\r"),str=new String(s);if(-1!=whitespace.indexOf(str.charAt(str.length-1))){for(var i=str.length-1;i>=0&&-1!=whitespace.indexOf(str.charAt(i));)i--;str=str.substring(0,i+1)}return str},getNeedBankNumber:function(bankno){bankno=this.trimLeft(bankno);var needBankerNumber=bankno=this.trimRight(bankno);return needBankerNumber=needBankerNumber.replace(/\ /g,"-")},luhmCheckBindingCard:function(bankno){if(bankno=this.trimLeft(bankno),bankno=this.trimRight(bankno),(bankno=bankno.replace(/\ /g,"")).length<16||bankno.length>19)return uiLocallization.bank_card_length_limit;if(!/^\d*$/.exec(bankno))return uiLocallization.bank_card_must_number;if(-1=="10,18,30,35,37,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,58,60,62,65,68,69,84,87,88,94,95,98,99".indexOf(bankno.substring(0,2)))return uiLocallization.card_start_limit;for(var lastNum=bankno.substr(bankno.length-1,1),first15Num=bankno.substr(0,bankno.length-1),newArr=new Array,i=first15Num.length-1;i>-1;i--)newArr.push(first15Num.substr(i,1));for(var arrJiShu=new Array,arrJiShu2=new Array,arrOuShu=new Array,j=0;j<newArr.length;j++)(j+1)%2==1?2*parseInt(newArr[j])<9?arrJiShu.push(2*parseInt(newArr[j])):arrJiShu2.push(2*parseInt(newArr[j])):arrOuShu.push(newArr[j]);for(var jishu_child1=new Array,jishu_child2=new Array,h=0;h<arrJiShu2.length;h++)jishu_child1.push(parseInt(arrJiShu2[h])%10),jishu_child2.push(parseInt(arrJiShu2[h])/10);for(var sumJiShu=0,sumOuShu=0,sumJiShuChild1=0,sumJiShuChild2=0,sumTotal=0,m=0;m<arrJiShu.length;m++)sumJiShu+=parseInt(arrJiShu[m]);for(var n=0;n<arrOuShu.length;n++)sumOuShu+=parseInt(arrOuShu[n]);for(var p=0;p<jishu_child1.length;p++)sumJiShuChild1+=parseInt(jishu_child1[p]),sumJiShuChild2+=parseInt(jishu_child2[p]);return sumTotal=parseInt(sumJiShu)+parseInt(sumOuShu)+parseInt(sumJiShuChild1)+parseInt(sumJiShuChild2),lastNum==10-(parseInt(sumTotal)%10==0?10:parseInt(sumTotal)%10)?"":uiLocallization.card_verify_fail},luhmCheck:function(bankno){if(bankno=this.trimLeft(bankno),bankno=this.trimRight(bankno),(bankno=bankno.replace(/\ /g,"")).length<16||bankno.length>19)return uiUtils.showMesage(uiLocallization.bank_card_length_limit),!1;if(!/^\d*$/.exec(bankno))return uiUtils.showMesage(uiLocallization.bank_card_must_number),!1;if(-1=="10,18,30,35,37,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,58,60,62,65,68,69,84,87,88,94,95,98,99".indexOf(bankno.substring(0,2)))return uiUtils.showMesage(uiLocallization.card_start_limit),!1;for(var lastNum=bankno.substr(bankno.length-1,1),first15Num=bankno.substr(0,bankno.length-1),newArr=new Array,i=first15Num.length-1;i>-1;i--)newArr.push(first15Num.substr(i,1));for(var arrJiShu=new Array,arrJiShu2=new Array,arrOuShu=new Array,j=0;j<newArr.length;j++)(j+1)%2==1?2*parseInt(newArr[j])<9?arrJiShu.push(2*parseInt(newArr[j])):arrJiShu2.push(2*parseInt(newArr[j])):arrOuShu.push(newArr[j]);for(var jishu_child1=new Array,jishu_child2=new Array,h=0;h<arrJiShu2.length;h++)jishu_child1.push(parseInt(arrJiShu2[h])%10),jishu_child2.push(parseInt(arrJiShu2[h])/10);for(var sumJiShu=0,sumOuShu=0,sumJiShuChild1=0,sumJiShuChild2=0,sumTotal=0,m=0;m<arrJiShu.length;m++)sumJiShu+=parseInt(arrJiShu[m]);for(var n=0;n<arrOuShu.length;n++)sumOuShu+=parseInt(arrOuShu[n]);for(var p=0;p<jishu_child1.length;p++)sumJiShuChild1+=parseInt(jishu_child1[p]),sumJiShuChild2+=parseInt(jishu_child2[p]);return sumTotal=parseInt(sumJiShu)+parseInt(sumOuShu)+parseInt(sumJiShuChild1)+parseInt(sumJiShuChild2),lastNum==10-(parseInt(sumTotal)%10==0?10:parseInt(sumTotal)%10)||(uiUtils.showMesage(uiLocallization.card_verify_fail),!1)},getCardData:function(cardNumber){var str=cardNumber,sub1=(str=str.replace(/\-/g,"")).substring(0,4),sub2=str.substring(0,5),sub3=str.substring(0,6),sub4=str.substring(0,7),sub5=str.substring(0,8),sub6=str.substring(0,9),sub7=str.substring(0,10),sub8=str.substring(0,11),sub9=str.substring(0,12);return bankCard[sub1]?bankCard[sub1]:bankCard[sub2]?bankCard[sub2]:bankCard[sub3]?bankCard[sub3]:bankCard[sub4]?bankCard[sub4]:bankCard[sub5]?bankCard[sub5]:bankCard[sub6]?bankCard[sub6]:bankCard[sub7]?bankCard[sub7]:bankCard[sub8]?bankCard[sub8]:bankCard[sub9]?bankCard[sub9]:null}}).singleton())}),gbx.define("comm/helper/conf_mgr",["gbx/render/loader"],function(loader){return{definition:null,setting:null,read:function(url){var path="assets/"+url;return conf=loader.get(path),conf||(gbx.log("assets/"+url),loader.get("assets/"+url))},prepare:function(){null==this.definition&&(this.definition=this.read("games/baccarat/dat/definition.json")),null==this.setting&&(this.setting=this.read("games/baccarat/dat/setting.json"))}}}),gbx.define("comm/helper/match_mgr",["gbx/cclass","gbx/hubs","gbx/net/connector","gbx/render/stage","conf/game","comm/helper/scene_mgr","comm/helper/playerdata_mgr","comm/ui/connect_loading","comm/ui/top_confirm"],function(Class,hubs,server,stage,game,sceneMgr,playerDataMgr,loading,topConfirm){return new(Class.extend({init:function(){this._matchs={},this._pollingId=0,this._waitingId=0,this.pollingLoad()},_onMttMatchStatusUpdate:function(obj){},_onMatchStart:function(obj){var matchId=obj.mid;matchId in this._matchs&&(this._matchs[matchId].updateStatus(obj),this._matchs[matchId].isSigned&&(this._matchs[matchId].isJoined=!0)),topConfirm.hide(),this.publish("global.match.list_update.mtt",matchId)},_onMatchEnd:function(obj){topConfirm.hide()},_loadGameByKindId:function(kindId,ctx,callback){var code=Math.floor(kindId/1e4),gameName="",tab=0;for(var key in game)if(game[key].code===code){if(gameName=key,game[key].type){var type=Math.floor((kindId-1e4*code)/1e3),singleGame=game[key];for(var key in singleGame.type)if(singleGame.type[key].key===type){tab=singleGame.type[key].tab;break}}break}sceneMgr.loadGame(gameName,tab,function(){callback.call(ctx)})},_askPlayerGotoCheckIn:function(obj){},_intoMatchRoom:function(obj,err){},pollingLoad:function(){clearTimeout(this._pollingId)},joinInventGameRoom:function(inventKey,error){},getByMatchId:function(matchId){return this._matchs[matchId]},end:function(){clearTimeout(this._waitingId),clearTimeout(this._pollingId)}}).singleton())}),gbx.define("comm/helper/playerdata_mgr",["gbx/class","gbx/hubs","gbx/net/connector","comm/data/player/player_data","comm/helper/account_mgr","comm/helper/scene_mgr","comm/helper/conf_mgr"],function(Class,hubs,server,PlayerData,accountMgr,sceneMgr,confMgr){return new(Class.extend({init:function(){this._myData=null,this._cachedData={},this._rebateParentId="",this._roomId=null,this._seatIdx=-1,this._openPresentRank=!1,this._dailySignRecord={},this._showBigRechargeTip=!1,this._qq="",this._qqNickName=""},bankCardInfoMapAdd:function(info){this._myData.bankCardInfo[info.accountNo]=info},getBankCardInfoMap:function(){return this._myData.bankCardInfo},getBankCardInfoByCardNum:function(cardNum){var bankCardMap=this._myData.bankCardInfo;return null!=bankCardMap&&bankCardMap.hasOwnProperty(cardNum)?bankCardMap[cardNum]:null},setRechargeInfoData:function(data){this.setBigRechargeTipState(data.showBigRechargeTip),this.setqq(data.qq),this.setqqName(data.qqNickName)},getBigRechargeTipState:function(){return this._showBigRechargeTip},setBigRechargeTipState:function(v){this._showBigRechargeTip=v},getqq:function(){return this._qq},setqq:function(v){this._qq=v},getqqName:function(){return this._qqNickName},setqqName:function(v){this._qqNickName=v},getDailySignRecord:function(){return this._dailySignRecord},setDailySignRecord:function(v){this._dailySignRecord=v},getPresentRankState:function(){return this._openPresentRank},setPresentRankState:function(v){this._openPresentRank=v},setData:function(data){var key=data.uid;this._cachedData[key]=data},getData:function(userId,doNotCreate){var pData=this._cachedData[userId];return pData||doNotCreate||(pData=new PlayerData(userId)),pData},getMyData:function(){return this._myData},getMyUID:function(){return this._myData.uid},isMyself:function(playerId){return this._myData.uid===playerId},getMyNick:function(){return this._myData.nick},setMyNick:function(v){this._myData.nick=v},getMyGold:function(){return this._myData.gold},setMyGold:function(value){this._myData.gold=value},getMyCarryGold:function(){return this._myData.carryOnGold},setMyCarryGold:function(value){this._myData.carryOnGold=value},updateMyCarryGold:function(value){this._myData.carryOnGold+=value},updateMyGold:function(value){this._myData.gold+=value},getMyDiamond:function(){return this._myData.diamond},getMyVIPLevel:function(){return this._myData.vipLevel},getMyHead:function(){return this._myData.head},setMyHead:function(v){this._myData.head=v},getMySex:function(){return this._myData.sex},isDealer:function(){return this._myData.isDealer},setMeDealer:function(value){this._myData.isDealer=value},setRebateParentId:function(v){this._rebateParentId=v},getRebateParentId:function(){return this._rebateParentId},setRoomId:function(id){this._roomId=id},getRoomId:function(){return this._roomId},getChipArray:function(){return this._myData.chipArray},setChipArray:function(v){this._myData.chipArray=v},setBankCardName:function(v){this._myData.bankCardName=v},getBankCardName:function(){return this._myData.bankCardName},getBankCardNumber:function(){return this._myData.bankCardNumber},setBankCardNumber:function(v){this._myData.bankCardNumber=v},getVipRoomLimitList:function(){return this._myData.vipRoomLimitList},getSeatIdx:function(){return this._seatIdx},setSeatIdx:function(v){this._seatIdx=v},getServiceQQInfoList:function(){return this._myData._serviceQQInfoList},setUserData:function(data){var player=new PlayerData(data.playerData.playerId);this._myData=player,this._myData.uid=data.playerData.playerId,this._myData.sex=data.playerData.sex,this._myData.nick=data.playerData.nickName,this._myData.head=data.playerData.playerIcon,this._myData.gold=data.baccaratData.gold,this._myData.carryOnGold=data.baccaratData.carryOnGold,this._myData.bankCardNumber=data.baccaratData.cardNumber,this._myData.bankCardName=data.baccaratData.cardName,this._myData.diamond=data.playerData.diamond,this._myData.level=data.playerData.level,this._myData.levelExp=data.playerData.levelExp,this._myData.vipLevel=data.playerData.vipLevel,this._myData.vipExp=data.playerData.vipExp,this._myData.vipRoomLimitList=data.baccaratData.limit,this._myData._serviceQQInfoList=data.baccaratData.gmInfo,this.setPresentRankState(data.baccaratData.openPresentRank),this.setDailySignRecord(data.baccaratData.dailySignRecord),this._myData.bankCardInfo=data.baccaratData.bankCardInfo;for(var chipArray=[],i=0;i<5;i++){var str1=localStorage.getItem(i.toString());null!=str1&&"null"!=str1&&(chipArray[i]=JSON.parse(str1))}0==chipArray.length?this._myData.chipArray=[{price:1,index:0},{price:5,index:1},{price:10,index:2},{price:50,index:3},{price:100,index:4}]:this._myData.chipArray=chipArray},_dealOneItemProto:function(oneProto){switch(oneProto.DType){case confMgr.definition.D_TYPE.GOLD:case confMgr.definition.D_TYPE.DIAMOND:case confMgr.definition.D_TYPE.REBATE_POINT:break;case confMgr.definition.D_TYPE.CARRYON_GOLD:this.updateMyCarryGold(oneProto.count);break;case confMgr.definition.D_TYPE.BACCARAT_GOLD:this.updateMyGold(oneProto.count)}},dealItemProto:function(proto){if(proto instanceof Array)for(var i=0;i<proto.length;i++)this._dealOneItemProto(proto[i]);else this._dealOneItemProto(proto)},logout:function(){sceneMgr.switchTo("login","switch_account")}}).singleton())}),gbx.define("comm/helper/resource_helper",function(){var _res={};return{setSection:function(key,array){},add:function(key,value){key in _res?_res[key].push(value):_res[key]=[value]},get:function(key){return key in _res?_res[key]:null}}}),gbx.define("comm/helper/room_mgr",["gbx/class","gbx/hubs","gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/net/errorcode_des","comm/helper/conf_mgr","comm/helper/scene_mgr","comm/ui/top_message","comm/ui/connect_loading","conf/ui_locallization"],function(Class,hubs,server,CMD,ERROR_CODE,ERROR_CODE_DES,confMgr,sceneMgr,topMessage,loading,uiLocallization){return new(Class.extend({init:function(){this._roomData=[],this._chooseData=null,this._chooseType="",this._lastRoomId=null,this._lastGetInRoom=0},getAllRoomData:function(context,callback){var sendMsg=gtea.protobuf.encode("BaccaratGetAllRoomDataReq",{});server.requestToGame(CMD.BaccaratGetAllRoomData,sendMsg,this,function(errorcode,roomList){if(errorcode==ERROR_CODE.OK){var data=gtea.protobuf.decode("BaccaratGetAllRoomDataResp",roomList);this._roomData=data.allRoomData}void 0!=context&&void 0!=callback&&callback.call(context,errorcode)})},getOldRoomId:function(context,callback){var sendMsg=gtea.protobuf.encode("BaccaratGetOldRoomReq",{});server.requestToGame(CMD.BaccaratGetOldRoom,sendMsg,this,function(errorcode,data){if(errorcode==ERROR_CODE.OK){var ret=gtea.protobuf.decode("BaccaratGetOldRoomResp",data);this._lastRoomId=ret.roomId,callback.call(context,ret.roomId)}else callback.call(context,null)})},createVIPRoom:function(roomName,resetTimesMax,type){var sendMsg=gtea.protobuf.encode("CreateRoomReq",{roomType:confMgr.definition.ChessRoomType.Baccarat,crOption:{baccaratOption:{roomName:roomName,resetTimesMax:resetTimesMax,type:type}}});server.requestToGame(CMD.CreateRoom,sendMsg,this,function(errorcode,data){if(errorcode==ERROR_CODE.OK){gtea.protobuf.decode("CreateRoomResp",data);sceneMgr.switchTo("baccarat_table")}})},joinRoomByRoomId:function(roomId){var room=this.getRoom(roomId);null==room?this.joinVIPRoomByRoomId(roomId):(this.setChoose(room),this.joinRoom())},joinVIPRoomByRoomId:function(roomId){loading.show(),this.joinRoomReq(roomId)},joinRoom:function(){loading.show();var room=this.getChoose();if(null==room){var roomList=this.getRoomList();if(null==roomList)return loading.hide(),void topMessage.post(uiLocallization.lack_room);room=roomList[0]}this.joinRoomReq(room.roomId)},joinRoomReq:function(roomId){var sendData=gtea.protobuf.encode("JoinRoomReq",{roomId:roomId,roomType:confMgr.definition.ChessRoomType.Baccarat});server.requestToGame(CMD.JoinRoom,sendData,this,function(errorcode,data){loading.hide();var isOK=!1;if(errorcode==ERROR_CODE.OK){var msgData=gtea.protobuf.decode("JoinRoomResp",data);msgData.result==ERROR_CODE.OK?isOK=!0:errorcode=msgData.result}isOK&&sceneMgr.switchTo("baccarat_table")})},resetRoom:function(roomId){var sendData=gtea.protobuf.encode("JoinRoomReq",{roomId:roomId,roomType:confMgr.definition.ChessRoomType.Baccarat});server.requestToGame(CMD.JoinRoom,sendData,this,function(errorcode,data){loading.hide();var isOK=!1;errorcode==ERROR_CODE.OK&&gtea.protobuf.decode("JoinRoomResp",data).result==ERROR_CODE.OK&&(isOK=!0),isOK?this.getRoomDataHeadFromServer(this,function(roomData){null!=roomData?(hubs.publish("global.game_status.reset_room",roomData),hubs.publish("global.net_connect.login_to_room_success"),hubs.publish("global.net_connect.restart_heartbeat")):hubs.publish("global.net_connect.login_to_room")}):hubs.publish("global.net_connect.login_to_room")})},getRoomDataFromServer:function(context,func){var sendData=gtea.protobuf.encode("GetRoomDataReq",{});server.requestToRoom(CMD.GetRoomData,sendData,this,function(errorcode,data){var msgData=gtea.protobuf.decode("GetRoomDataResp",data);msgData.result==ERROR_CODE.OK?(msgData.baccaratRoom.oneRoomData&&this.changeChoose(msgData.baccaratRoom.oneRoomData),func.call(context,msgData)):func.call(context,null)})},getRoomDataHeadFromServer:function(context,func){var sendData=gtea.protobuf.encode("GetRoomDataHeadReq",{roomId:this._chooseData.roomId});server.requestToGame(CMD.GetRoomDataHead,sendData,this,function(errorcode,data){var msgData=gtea.protobuf.decode("GetRoomDataHeadResp",data);msgData.result==ERROR_CODE.OK&&(msgData.baccaratRoom.oneRoomData&&this.changeChoose(msgData.baccaratRoom.oneRoomData),func.call(context,msgData)),this._lastRoomId=this._chooseData.roomId,func.call(context,null)})},getRoom:function(roomId){var roomList=this.getRoomList();if(roomList)for(var i=0;i<roomList.length;i++)if(roomList[i].roomId===roomId)return roomList[i];return null},getRoomList:function(){return this._roomData?this._roomData.sort(function(a,b){var result=parseInt(a.bankerFarmerBetMin)-parseInt(b.bankerFarmerBetMin);return 0==result?parseInt(a.roomId)-parseInt(b.roomId):result}):null},getRoomListByType:function(baccaratRoomType){var ret=[],roomList=this.getRoomList();if(roomList)for(var i=0;i<roomList.length;i++)roomList[i].baccaratRoomType===baccaratRoomType&&ret.push(roomList[i]);return ret},removeRoom:function(roomId){for(var i=0;i<this._roomData.length;i++)if(this._roomData[i].roomId===roomId){this._roomData.splice(i,1);break}null!=this._chooseData&&this._chooseData.roomId===roomId&&(this._chooseData=null)},setChoose:function(data){this._chooseData=data},getChoose:function(){return this._chooseData},changeChoose:function(data){this._chooseData=data;for(var i=0;i<this._roomData.length;i++)if(this._roomData[i].roomId===data.roomId)return void(this._roomData[i]=data)},getIsVip:function(){var data=this._chooseData;return void 0!=data&&data.baccaratRoomType==confMgr.definition.BaccaratRoomType.Vip},set lastRoomId(v){this._lastRoomId=v},get lastRoomId(){return this._lastRoomId},setChooseType:function(v){this._chooseType=v},getChooseType:function(){return this._chooseType},checkGetInTime:function(){return 0==this._lastGetInRoom?(this._lastGetInRoom=Date.now(),!0):Date.now()-this._lastGetInRoom>500&&(this._lastGetInRoom=Date.now(),!0)}}).singleton())}),gbx.define("comm/helper/scene_mgr",["conf/game","conf/resource","comm/helper/sound_mgr","gbx/render/texture","gbx/render/loader","gbx/render/stage","gbx/hubs","comm/ui/scene_loading"],function(gameList,resList,soundMgr,texture,loader,stage,hubs,loading){function travelResourceList(key){if("string"==typeof key)if(key in resList)for(var l=resList[key],i=0;i<l.length;i++)travelResourceList(l[i]);else if(texture.usingTexturePack&&/\.png$/.test(key)){for(var url=texture.getPack(key),i=0;i<loadRes.length;i++)if(loadRes[i]===url)return;loadRes.push(url),loader.add(url)}else loadRes.push(key),loader.add(key);else loadRes.push(key.url),loader.add(key.url,key.type)}function loadResource(sceneName,quiet,success,fail){quiet||loading.show(),loader.clear(),travelResourceList(sceneName),loader.load(loading,function(){gbx.log("scene res load ok"),quiet||loading.hide(),success()},loading.progress,function(){gbx.log("scene res load fail"),fail&&fail()})}function minusNotUsedResource(){for(var i=0;i<clearRes.length;i++){for(var flag=!1,j=0;j<loadRes.length;j++)if(loadRes[j]===clearRes[i]){flag=!0;break}flag||loader.remove(clearRes[i])}}function switchScene(sceneName,sceneInstance,args,show){null!=currentScene&&currentScene.end(),setTimeout(minusNotUsedResource,1),clearRes=[],window.currentSceneName=sceneName,currentSceneName=sceneName,currentScene=sceneInstance,show&&currentScene.show.apply(currentScene,args)}var sceneList={},currentScene=null,currentSceneName="",loadRes=[],clearRes=[],afterPrepareFun=null;return function(){if(soundMgr.usingOgg)for(var key in resList)for(var i=0;i<resList[key].length;i++)resList[key][i]=resList[key][i].replace(".mp3",".ogg");for(var game in gameList)if("scene"in gameList[game])sceneList[gameList[game].resource]=gameList[game].scene;else if("type"in gameList[game])for(var type in gameList[game].type)"scene"in gameList[game].type[type]&&(sceneList[gameList[game].type[type].resource]=gameList[game].type[type].scene)}(),hubs.subscribe("global.scene.change",function(sceneName,quiet,args){currentScene!==sceneName&&(afterPrepareFun=null,sceneName in sceneList&&(clearRes=loadRes,loadRes=[],loadResource(sceneName,quiet,function(){gbx.require([sceneList[sceneName]],function(sceneInstance){void 0!=sceneInstance.prepareShow?(afterPrepareFun=function(){switchScene(sceneName,sceneInstance,args,!1)},sceneInstance.prepareShow.call(sceneInstance)):switchScene(sceneName,sceneInstance,args,!0)})},function(){loadRes=clearRes,hubs.publish("global.scene.change",sceneName,quiet,args)})))}),{switchToAfterPrepare:function(){null!=afterPrepareFun&&afterPrepareFun(),afterPrepareFun=null},switchTo:function(sceneName){var args=Array.prototype.slice.call(arguments,1);gbx.log("switch to:",sceneName,args),hubs.publish("global.scene.change",sceneName,!1,args)},quietSwitchTo:function(sceneName){var args=Array.prototype.slice.call(arguments,1);gbx.log("quiet switch to:",sceneName,args),hubs.publish("global.scene.change",sceneName,!0,args)},loadGame:function(game,type,success,fail){gbx.log("loadGame",game,type),void 0===type&&(type=1),function retry(){if(game in gameList){if(!("type"in gameList[game]))return void loadResource(gameList[game].resource,!1,success,retry);for(var key in gameList[game].type)if(gameList[game].type[key].tab===type)return void loadResource(gameList[game].type[key].resource,!1,function(){gbx.require(["game/"+game+"/installer"],function(installer){installer.run(success)})},retry)}}(),fail&&fail()},getCurrentScene:function(){return currentSceneName}}}),gbx.define("comm/helper/sha256",[],function(){function hex_sha256(s){return rstr2hex(rstr_sha256(str2rstr_utf8(s)))}function rstr_sha256(s){return binb2rstr(binb_sha256(rstr2binb(s),8*s.length))}function rstr2hex(input){for(var x,hex_tab=hexcase?"0123456789ABCDEF":"0123456789abcdef",output="",i=0;i<input.length;i++)x=input.charCodeAt(i),output+=hex_tab.charAt(x>>>4&15)+hex_tab.charAt(15&x);return output}function str2rstr_utf8(input){for(var x,y,output="",i=-1;++i<input.length;)x=input.charCodeAt(i),y=i+1<input.length?input.charCodeAt(i+1):0,55296<=x&&x<=56319&&56320<=y&&y<=57343&&(x=65536+((1023&x)<<10)+(1023&y),i++),x<=127?output+=String.fromCharCode(x):x<=2047?output+=String.fromCharCode(192|x>>>6&31,128|63&x):x<=65535?output+=String.fromCharCode(224|x>>>12&15,128|x>>>6&63,128|63&x):x<=2097151&&(output+=String.fromCharCode(240|x>>>18&7,128|x>>>12&63,128|x>>>6&63,128|63&x));return output}function rstr2binb(input){for(var output=Array(input.length>>2),i=0;i<output.length;i++)output[i]=0;for(i=0;i<8*input.length;i+=8)output[i>>5]|=(255&input.charCodeAt(i/8))<<24-i%32;return output}function binb2rstr(input){for(var output="",i=0;i<32*input.length;i+=8)output+=String.fromCharCode(input[i>>5]>>>24-i%32&255);return output}function sha256_S(X,n){return X>>>n|X<<32-n}function sha256_R(X,n){return X>>>n}function sha256_Ch(x,y,z){return x&y^~x&z}function sha256_Maj(x,y,z){return x&y^x&z^y&z}function sha256_Sigma0256(x){return sha256_S(x,2)^sha256_S(x,13)^sha256_S(x,22)}function sha256_Sigma1256(x){return sha256_S(x,6)^sha256_S(x,11)^sha256_S(x,25)}function sha256_Gamma0256(x){return sha256_S(x,7)^sha256_S(x,18)^sha256_R(x,3)}function sha256_Gamma1256(x){return sha256_S(x,17)^sha256_S(x,19)^sha256_R(x,10)}function binb_sha256(m,l){var a,b,c,d,e,f,g,h,i,j,T1,T2,HASH=new Array(1779033703,-1150833019,1013904242,-1521486534,1359893119,-1694144372,528734635,1541459225),W=new Array(64);for(m[l>>5]|=128<<24-l%32,m[15+(l+64>>9<<4)]=l,i=0;i<m.length;i+=16){for(a=HASH[0],b=HASH[1],c=HASH[2],d=HASH[3],e=HASH[4],f=HASH[5],g=HASH[6],h=HASH[7],j=0;j<64;j++)W[j]=j<16?m[j+i]:safe_add(safe_add(safe_add(sha256_Gamma1256(W[j-2]),W[j-7]),sha256_Gamma0256(W[j-15])),W[j-16]),T1=safe_add(safe_add(safe_add(safe_add(h,sha256_Sigma1256(e)),sha256_Ch(e,f,g)),sha256_K[j]),W[j]),T2=safe_add(sha256_Sigma0256(a),sha256_Maj(a,b,c)),h=g,g=f,f=e,e=safe_add(d,T1),d=c,c=b,b=a,a=safe_add(T1,T2);HASH[0]=safe_add(a,HASH[0]),HASH[1]=safe_add(b,HASH[1]),HASH[2]=safe_add(c,HASH[2]),HASH[3]=safe_add(d,HASH[3]),HASH[4]=safe_add(e,HASH[4]),HASH[5]=safe_add(f,HASH[5]),HASH[6]=safe_add(g,HASH[6]),HASH[7]=safe_add(h,HASH[7])}return HASH}function safe_add(x,y){var lsw=(65535&x)+(65535&y);return(x>>16)+(y>>16)+(lsw>>16)<<16|65535&lsw}var hexcase=0,sha256_K=new Array(1116352408,1899447441,-1245643825,-373957723,961987163,1508970993,-1841331548,-1424204075,-670586216,310598401,607225278,1426881987,1925078388,-2132889090,-1680079193,-1046744716,-459576895,-272742522,264347078,604807628,770255983,1249150122,1555081692,1996064986,-1740746414,-1473132947,-1341970488,-1084653625,-958395405,-710438585,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,-2117940946,-1838011259,-1564481375,-1474664885,-1035236496,-949202525,-778901479,-694614492,-200395387,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,-2067236844,-1933114872,-1866530822,-1538233109,-1090935817,-965641998);return{sha256:function(s){return hex_sha256(s)}}}),gbx.define("comm/helper/sound_mgr",["gbx/render/loader","gbx/bridge"],function(loader,bridge){function saveSetting(){localStorage.soundSetting=JSON.stringify(setting)}var setting,sound=laya.media.SoundManager,lastBgm="",usingOgg=!1;!function(){var obj=document.createElement("audio");"canPlayType"in obj&&!obj.canPlayType("audio/mp3")&&(usingOgg=!0)}(),localStorage.soundSetting?(setting=JSON.parse(localStorage.soundSetting),sound.soundMuted=!setting.se,sound.soundVolume=setting.vol/100,sound.musicMuted=!setting.bgm,sound.musicVolume=setting.vol/100):setting={bgm:!0,se:!0,vol:80};var warm=!1,bad=!1;return"AudioContext"in window||"webkitAudioContext"in window||(setting.bgm=!1,setting.se=!1,bad=!0),{playBGM:function(url){"web"===bridge.getPlatform()&&navigator&&navigator.userAgent&&/MQQBrowser/i.test(navigator.userAgent)||(usingOgg&&(url=url.replace(".mp3",".ogg")),lastBgm=url,setting.bgm&&sound.playMusic(url))},stopBGM:function(){sound.stopMusic()},playSE:function(url,v,callback){if(setting.se){if("conch"in window)return url=url.replace("/se/","/se/wav/").replace(".mp3",".wav"),void loader.loadOnce([url],this,function(){sound.playSound(url,1,new laya.utils.Handler(null,callback,[],!0))});usingOgg&&(url=url.replace(".mp3",".ogg")),v&&sound.setMusicVolume(v),sound.playSound(url,1,new laya.utils.Handler(null,callback,[],!0))}else callback&&callback()},unlock:function(){},setPlayingSoundMax:function(max){},clearCache:function(url){},pause:function(){sound.setMusicVolume(0),sound.setSoundVolume(0)},resume:function(){sound.setMusicVolume(setting.vol/100),sound.setSoundVolume(setting.vol/100)},get usingOgg(){return usingOgg},get bgm(){return setting.bgm},get se(){return setting.se},get volume(){return setting.vol},set bgm(v){setting.bgm=v,sound.musicMuted=!v,saveSetting(),v&&this.playBGM(lastBgm)},set se(v){setting.se=v,sound.soundMuted=!v,saveSetting(),bad&&!warm&&v&&(alert("您的浏览器对音频的支持效果差，开启音频功能后可能会导致内存不足。"),warm=!0)},set volume(v){setting.vol=v,sound.setMusicVolume(v/100),sound.setSoundVolume(v/100),saveSetting(),bad&&!warm&&v&&(alert("您的浏览器对音频的支持效果差，开启音频功能后可能会导致内存不足。"),warm=!0)}}}),gbx.define("comm/helper/trumpet_mgr",["gbx/cclass","gbx/net/connector"],function(Class,server){return new(Class.extend({init:function(){this.trumpetHistory=new Array,this.load()},load:function(){},getTrumpetHistory:function(){return this.trumpetHistory},updateTrumpetHistory:function(context){this.trumpetHistory.length>=10&&this.trumpetHistory.pop(),this.trumpetHistory.unshift(context.context),this.publish("global.trumpet.update",context.context)},setTrumpetHistory:function(args){for(var i=0;i<args.length;i++)this.updateTrumpetHistory(args[i])}}).singleton())}),gbx.define("comm/net/heartbeat",["gbx/hubs","gbx/net/messagecommand","gbx/net/errorcode","gbx/net/connector","comm/helper/playerdata_mgr"],function(hubs,CMD,ERROR_CODE,server,playerDataMgr){var lastHeartBeatAckDate=null,heartBeatTimer=null;return{startSendHeartbeat:function(){lastHeartBeatAckDate=new Date,heartBeatTimer=setInterval(this.heartbeatTick,5e3)},stopSendHeartbeat:function(){null!=heartBeatTimer&&(clearInterval(heartBeatTimer),heartBeatTimer=null)},heartbeatTick:function(){if(new Date-lastHeartBeatAckDate>gtea.net.TIME_OUT)hubs.publish("global.net_connect.disconnected",gtea.net.DISCONNECT_REASON_HEARTBEAT);else{var proto,roomId=playerDataMgr.getRoomId();proto=null!=roomId?{playerId:playerDataMgr.getMyUID(),roomId:roomId}:{playerId:playerDataMgr.getMyUID()};var sendData=gtea.protobuf.encode("SyncHeartBeat",proto);server.sendToRoom(CMD.SyncHeartBeat,sendData)}},onHeartbeat:function(){lastHeartBeatAckDate=new Date}}}),gbx.define("comm/net/msg_receiver",["gbx/hubs","gbx/net/messagecommand","gbx/net/errorcode","gbx/net/connector","comm/helper/playerdata_mgr","comm/helper/scene_mgr","comm/ui/top_confirm","conf/locallization","comm/net/heartbeat","platform/platform_manager","comm/ui/connect_loading","comm/ui/game_broadCast"],function(hubs,CMD,ERROR_CODE,server,playerDataMgr,sceneMgr,topConfirm,Locallization,heartbeat,platformManager,loading,broadCast){var eventDisconnected=function(reason){function success(){sceneMgr.switchTo("login",!1,!0)}function failfun(){sceneMgr.switchTo("login",!1,!1)}gbx.log("%c[net] netWork disconnect reason "+reason,"color:blue"),loading.hide(),heartbeat.stopSendHeartbeat(),"baccarat_table"===sceneMgr.getCurrentScene()?reason==gtea.net.DISCONNECT_REASON_TOROOM?topConfirm.ask(Locallization.loseConnectReconnect,this,success,failfun):hubs.publish("global.net_connect.login_to_room"):topConfirm.ask(Locallization.loseConnectReconnect,this,success,failfun)},eventSceneChanged=function(sceneName){"baccarat_table"===sceneName?heartbeat.startSendHeartbeat():heartbeat.stopSendHeartbeat()},restartHeartbeat=function(){heartbeat.stopSendHeartbeat(),heartbeat.startSendHeartbeat()};return{isAdded:!1,addListenerOnce:function(){this.isAdded||(hubs.subscribe("global.scene.change",eventSceneChanged),hubs.subscribe("global.net_connect.restart_heartbeat",restartHeartbeat),this.isAdded=!0)},addListener:function(){hubs.subscribe("global.net_connect.disconnected",eventDisconnected)},removeListener:function(){hubs.unsubscribe("global.net_connect.disconnected",eventDisconnected)},onHeartbeat:function(){heartbeat.onHeartbeat()},onKicked:function(command,data){function callback(){sceneMgr.switchTo("login",!1,!1)}gtea.net.NetMsgMgr.close(),heartbeat.stopSendHeartbeat();var msgData=gtea.protobuf.decode("NetBeKickedInform",data),tip=Locallization.kickedByGM;1==msgData.reason&&(tip=Locallization.kickedByOther),topConfirm.ask(tip,this,callback,callback)},onPlayerInfoChange:function(command,data){var msgData=gtea.protobuf.decode("PlayerInfoChangedProto",data);playerDataMgr.dealItemProto(msgData.itemProto),hubs.publish("lobby.game.updateMyInfo")},onBroadcast:function(command,data){var msgData=gtea.protobuf.decode("BroadCastPost",data);if(msgData&&msgData.infos&&msgData.infos.length>0){var info=msgData.infos[0];broadCast.post(info.title,info.content,info.loopCount)}},onPay:function(command,data){var msgData=gtea.protobuf.decode("RechargeNoticeProto",data);msgData&&platformManager.tryRechargeItem(msgData)}}}),gbx.define("comm/ui/bitmap_number",["gbx/render/display/sprite","gbx/render/loader","gbx/render/texture"],function(Sprite,loader,texture){return Sprite.extend({init:function(number,textureSrc,chars){this._super(),this._chars=chars,this.changeTexture(textureSrc),this._number=number,this._align=0,void 0==chars&&(chars="0123456789"),this._drawNumber()},set text(v){this._number!=v&&(this._number=v,this._drawNumber())},get text(){return this._number},pivotToLeft:function(){this._align=0,this.pivot(0,this.height/2)},pivotToCenter:function(){this._align=1,this._super()},pivotToRight:function(){this._align=2,this.pivot(this.width,this.height/2)},changeTexture:function(textureSrc){texture.usingTexturePack?(this._texture=texture.getFromPackedTexture(textureSrc),this._frameWidth=this._texture.sw/this._chars.length,this._frameHeight=this._texture.sh,this._texture=this._texture.tex):(this._texture=loader.get(textureSrc),this._frameWidth=this._texture.sourceWidth/this._chars.length,this._frameHeight=this._texture.sourceHeight)},_drawNumber:function(){this.graphics.clear();for(var t=""+this._number,width=this._frameWidth,height=this._frameHeight,i=0;i<t.length;i++){var n=this._chars.indexOf(t[i]);if(n>-1){var x=texture.createFromTexture(this._texture,n*width,0,width,height);this.graphics.drawTexture(x,i*width,0,width,height)}}this.size(t.length*width,height),1===this._align?this.pivotToCenter():2===this._align?this.pivotToRight():this.pivotToLeft()}})}),gbx.define("comm/ui/connect_loading",["gbx/render/display/sprite","gbx/render/display/text","gbx/render/display/animation","gbx/render/stage"],function(Sprite,Text,Animation,stage){var loading,tid,Loading=Sprite.extend({init:function(){this._super(),this.size(stage.designWidth,stage.designHeight),this.on(this.EVENT.MOUSE_DOWN,this);var masker=new Sprite;masker.size(stage.designWidth,stage.designHeight),masker.graphics.drawRect(0,0,stage.designWidth,stage.designHeight,"#000000"),masker.alpha=.5,this.addChild(masker);var backrect=new Sprite;backrect.setImage("assets/major/common/loading/loadingbg.png"),backrect.size(242,242),backrect.pivotToCenter(),backrect.name="rect",backrect.pos(stage.designWidth/2,stage.designHeight/2),this.addChild(backrect);var icon=new Animation;icon.setFrames("assets/major/common/loading/clouddownload.png",1,14),icon.size(85,85),icon.pivotToCenter(),icon.name="icon",icon.loop=!0,icon.interval=66,icon.pos(backrect.width/2,backrect.height/2),backrect.addChild(icon)},addToStage:function(zOrder){this._super(zOrder),this.getChildByName("rect","icon").play(0,!0)},removeFromStage:function(){this.getChildByName("rect","icon").stop(),this._super()}}),isLoading=!1;return{show:function(){isLoading||(isLoading=!0,loading||(loading=new Loading),clearTimeout(tid),tid=setTimeout(function(){loading.addToStage(10)},500))},hide:function(){isLoading&&(isLoading=!1,tid>0&&loading.removeFromStage(),clearTimeout(tid),tid=0)}}}),gbx.define("comm/ui/custom_tab",["comm/ui/sound_button","gbx/render/ui/group"],function(Button,Group){return Group.extend({init:function(){this._super(),this.initItems()},addTab:function(skin){var tabItem=new Button;tabItem.setSkinImage(skin),this.addItem(tabItem)}})}),gbx.define("comm/ui/game_broadCast",["gbx/render/display/sprite","gbx/render/display/text","gbx/render/stage","gbx/net/errorcode_des","gbx/render/ui/image","comm/ui/ui_utils"],function(Sprite,Text,stage,ERROR_CODE_DES,Image,uiUtils){var broadCast,BroadCast=Sprite.extend({init:function(){this._super(),this.pivotToCenter(),this.container=null,this.visible=!1,this.pos(stage.designWidth/2,65),this.container=new Image("assets/major/common/broadCast/broadCast_bg.png"),this.container.pivotToCenter(),this.container.pos(0,130),this.container.width=640,this.container.height=40,this.container.sizeGrid="10,10,10,10",this.addChild(this.container);var horn=new Sprite;horn.setImage("assets/major/common/broadCast/broadCast_horn.png"),horn.pos(10,10),this.container.addChild(horn);var lineL=new Sprite;lineL.setImage("assets/major/common/broadCast/broadCast_line.png"),lineL.pos(2,3),this.container.addChild(lineL);var lineR=new Sprite;lineR.setImage("assets/major/common/broadCast/broadCast_line.png"),lineR.pos(637,3),this.container.addChild(lineR);var content=new Text;content.text="",content.color="#ffffff",content.fontSize=22,content.align="left",content.name="text",content.pos(0,0);var panel=uiUtils.createPanel(600,40,"rootpanel");panel.pivotToCenter(),panel.pos(20,138),panel.addChild(content),this.addChild(panel)},show:function(title,content,loopCount){clearInterval(this.timeid),broadCast.visible=!0;var label=this.getChildByName("rootpanel","text");label.text=title+":"+content,label.pos(0,0),label.visible=!1,broadCast.setScenePos();var panelPosX=600,nowTime=(new Date).getTime();this.timeid=setInterval(function(){nowTime=(new Date).getTime()-nowTime,panelPosX-=.09*nowTime,nowTime=(new Date).getTime(),panelPosX<=-22*label.text.length&&(panelPosX=600,--loopCount<=0&&(clearInterval(broadCast.timeid),broadCast.visible=!1)),label.visible=!0,label.pos(panelPosX,0)},1e3/30)},setScenePos:function(){broadCast&&broadCast.visible&&("baccarat_table"==window.currentSceneName?broadCast.pos(stage.designWidth/2,195):broadCast.pos(stage.designWidth/2,65))}});return{post:function(title,content,loopCount){broadCast||(broadCast=new BroadCast).addToStage(6),broadCast.show(title,content,loopCount)},checkCurrentScene:function(){broadCast&&broadCast.setScenePos()}}}),gbx.define("comm/ui/marquee",["gbx/render/display/sprite","gbx/render/display/text","comm/ui/sound_button","comm/helper/trumpet_mgr"],function(Sprite,Text,Button,trumpetMgr){return Sprite.extend({init:function(showPostButton,autoHide,autoPlay){this._super();var bg=new Sprite;bg.setImage("assets/major/common/marquee/message_bg.png"),bg.scaleX=.55,bg.scaleY=.8,bg.pos(0,10),this.addChild(bg),this._playing=!1,this._queue=[],this._isAuto=!1,this._isAutoHide=!!autoHide,void 0===showPostButton&&(showPostButton=!0),void 0===autoPlay&&(autoPlay=!0);var marqueeTextMasker=new Sprite;marqueeTextMasker.size(440,30),marqueeTextMasker.graphics.drawRect(0,0,marqueeTextMasker.width,marqueeTextMasker.height,"#000000");var marqueeTextContainer=new Sprite;marqueeTextContainer.size(450,30),marqueeTextContainer.pos(30,8),marqueeTextContainer.mask=marqueeTextMasker,marqueeTextContainer.name="container",this.addChild(marqueeTextContainer);var messageText=new Text;messageText.color="#E0F0EF",messageText.fontSize=19,messageText.align="left",messageText.name="text",marqueeTextContainer.addChild(messageText);var messageBtn=new Button;messageBtn.setSkinImage("assets/major/common/marquee/button_speaker.png"),messageBtn.stateNum=1,messageBtn.pos(-50,-17),messageBtn.setClickHandler(this,this.openTrumpet),messageBtn.visible=showPostButton,this.addChild(messageBtn),this.visible=!1,autoPlay&&this._autoPlay()},_play:function(){if(this._playing=!0,this.visible||(this.visible=!0),this._queue.length){var txt=this._queue.shift(),messageText=this.getChildByName("container","text");messageText.pos(450,5),messageText.text=txt;var w=messageText.textWidth+20,t=(w+450)/.08;messageText.tweenTo({x:-w},t,"linearInOut",this,this._play)}else this._playing=!1,this._isAutoHide&&(this.visible=!1),this._isAuto&&(this._isAuto=!1,this._timeoutID=setTimeout(this._autoPlay.bind(this),18e4)),this.visible=!1},setText:function(txt){this._queue.push(txt),this._playing||this._play()},openTrumpet:function(){},clear:function(){this._isAuto&&(this._queue=[],this._isAuto=!1,clearTimeout(this._timeoutID))},_autoPlay:function(){this._isAuto=!0;for(var history=trumpetMgr.getTrumpetHistory(),i=0;i<history.length;i++)this.setText(history[i])},end:function(){clearTimeout(this._timeoutID),this._super()}})}),gbx.define("comm/ui/net_error",["gbx/render/display/sprite","gbx/render/display/text","comm/ui/sound_button","comm/base/command_ui","gbx/render/stage"],function(Sprite,Text,Button,BaseUI,stage){return BaseUI.extend({init:function(msg,yesContext,yesCallback){this._super(),this.size(stage.designWidth,stage.designHeight),this._yesFn=null;var masker=new Sprite;masker.size(stage.designWidth,stage.designHeight),masker.graphics.drawRect(0,0,stage.designWidth,stage.designHeight,"#000000"),masker.alpha=.4,this.addChild(masker);var box=new Sprite;box.setImage("assets/major/common/error/panel_mini.png"),box.pos((this.width-box.width)/2,(this.height-box.height)/2),box.name="box",this.addChild(box);var title=new Sprite;title.setImage("assets/major/common/error/icon_link_error.png"),title.pivotToCenter(),title.pos(box.width/2,130),title.name="icon",box.addChild(title);var content=new Text;content.fontSize=24,content.color="#ffffff",content.pos(10,240),content.align="center",content.leading=5,content.width=box.width-20,content.name="content",box.addChild(content);var yesBtn=new Button;yesBtn.setSkinImage("assets/major/public/button_8.png"),yesBtn.stateNum=2,yesBtn.pos(133,280),yesBtn.name="btn";var sp=new Sprite;sp.setImage("assets/major/public/sureBtnG.png"),sp.pos(46,21),yesBtn.addChild(sp),yesBtn.setClickHandler(this,this.yes),box.addChild(yesBtn),content.text=msg,this._setCallback(yesContext,yesCallback),this.show()},yes:function(){var fn;"function"==typeof this._yesFn&&(fn=this._yesFn),this._close(),fn&&fn()},_close:function(){this._yesFn=null,this.destroy()},_setCallback:function(yesContext,yesCallback){yesCallback&&(this._yesFn=yesCallback.bind(yesContext))},show:function(){this.addToStage(5)},end:function(){this._yesFn=null,this._super()}})}),gbx.define("comm/ui/popup",["gbx/render/display/sprite","comm/base/command_ui","comm/ui/sound_button","gbx/render/stage"],function(Sprite,BaseUI,Button,stage){var typeSkin=["assets/major/common/popup/panel_base.png","assets/major/common/popup/panel_base_big.png"],typeSize=[{width:1015,height:710},{width:1219,height:710}],padding=[{top:101,right:46,bottom:47,left:46},{top:101,right:46,bottom:47,left:46}];return BaseUI.extend({init:function(type,once){this._super(),this.size(stage.designWidth,stage.designHeight),this._closeFn=null,this._once=!1;var masker=new Sprite;masker.size(stage.designWidth,stage.designHeight),masker.graphics.drawRect(0,0,stage.designWidth,stage.designHeight,"#000000"),masker.alpha=.4,this.addChild(masker),void 0==type&&(type=0),!0===once&&(this._once=!0);var box=new Sprite;box.setImage(typeSkin[type]),box.size(typeSize[type].width,typeSize[type].height),box.pos((stage.designWidth-box.width)/2,(stage.designHeight-box.height)/2),box.name="box",this.addChild(box);var closeBtn=new Button;closeBtn.setSkinImage("assets/major/common/popup/button_closepanel.png"),closeBtn.stateNum=1,closeBtn.pos(typeSize[type].width-95,17),closeBtn.setClickHandler(this,this._closePopupDialog),box.addChild(closeBtn);var content=new Sprite;content.size(typeSize[type].width-padding[type].left-padding[type].right,typeSize[type].height-padding[type].top-padding[type].bottom),content.pos(padding[type].left,padding[type].top),content.name="content",box.addChild(content);var title=new Sprite;title.pos(typeSize[type].width/2,35),title.name="title",box.addChild(title)},_closePopupDialog:function(){this._once?(this._closeFn&&this._closeFn(),this.destroy()):(this.removeFromStage(),this._closeFn&&this._closeFn())},get content(){return this.getChildByName("box").getChildByName("content")},get title(){return this.getChildByName("box").getChildByName("title")},show:function(){this.addToStage(5)},hide:function(){this._closePopupDialog()},setCloseCallback:function(fn,context){"function"==typeof fn&&(this._closeFn=fn.bind(context))},end:function(){this._closeFn=null,this._super()}})}),gbx.define("comm/ui/scalable_sprite",["gbx/render/display/sprite","gbx/render/loader","gbx/render/texture"],function(Sprite,loader,texture){return Sprite.extend({init:function(textureSrc,gridTop,gridRight,gridBottom,gridLeft){this._super(),this._gridInfo=[gridTop||0,gridRight||0,gridBottom||0,gridLeft||0],this._gridSize=[],this._setTexture(textureSrc)},size:function(width,height){this._super(width,height),this._calcGridSize(),this.callLater(this._paint)},changeTexture:function(textureSrc){this._setTexture(textureSrc),this.callLater(this._paint)},_paint:function(){for(var i=0;i<this._gridSize.length;i++){var texInfo=this._texSize[i],gridInfo=this._gridSize[i],x=texture.createFromTexture(this._texture,texInfo.x,texInfo.y,texInfo.w,texInfo.h);this.graphics.drawTexture(x,gridInfo.x,gridInfo.y,gridInfo.w,gridInfo.h)}},_calcGridSize:function(idx){var gridTop=this._gridInfo[0],gridRight=this._gridInfo[1],gridBottom=this._gridInfo[2],gridLeft=this._gridInfo[3],width=this.width,height=this.height;this._gridSize=[{x:0,y:0,w:gridLeft,h:gridTop},{x:gridLeft,y:0,w:width-gridLeft-gridRight,h:gridTop},{x:width-gridRight,y:0,w:gridRight,h:gridTop},{x:0,y:gridTop,w:gridLeft,h:height-gridTop-gridBottom},{x:gridLeft,y:gridTop,w:width-gridLeft-gridRight,h:height-gridTop-gridBottom},{x:width-gridRight,y:gridTop,w:gridRight,h:height-gridTop-gridBottom},{x:0,y:height-gridBottom,w:gridLeft,h:gridBottom},{x:gridLeft,y:height-gridBottom,w:width-gridLeft-gridRight,h:gridBottom},{x:width-gridRight,y:height-gridBottom,w:gridRight,h:gridBottom}]},_setTexture:function(textureSrc){this._texture=loader.get(textureSrc);var width=this._texture.sourceWidth,height=this._texture.sourceHeight,gridTop=this._gridInfo[0],gridRight=this._gridInfo[1],gridBottom=this._gridInfo[2],gridLeft=this._gridInfo[3];this._texSize=[{x:0,y:0,w:gridLeft,h:gridTop},{x:gridLeft,y:0,w:width-gridLeft-gridRight,h:gridTop},{x:width-gridRight,y:0,w:gridRight,h:gridTop},{x:0,y:gridTop,w:gridLeft,h:height-gridTop-gridBottom},{x:gridLeft,y:gridTop,w:width-gridLeft-gridRight,h:height-gridTop-gridBottom},{x:width-gridRight,y:gridTop,w:gridRight,h:height-gridTop-gridBottom},{x:0,y:height-gridBottom,w:gridLeft,h:gridBottom},{x:gridLeft,y:height-gridBottom,w:width-gridLeft-gridRight,h:gridBottom},{x:width-gridRight,y:height-gridBottom,w:gridRight,h:gridBottom}]}})}),gbx.define("comm/ui/scene_loading",["gbx/render/display/sprite","gbx/render/display/text","gbx/render/display/animation","gbx/render/stage"],function(Sprite,Text,Animation,stage){var loading,Loading=Sprite.extend({init:function(){this._super(),this.size(stage.designWidth,stage.designHeight),this.on(this.EVENT.MOUSE_DOWN,this);var masker=new Sprite;masker.size(stage.designWidth,stage.designHeight),masker.graphics.drawRect(0,0,stage.designWidth,stage.designHeight,"#000000"),masker.alpha=.5,this.addChild(masker);var backrect=new Sprite;backrect.setImage("assets/major/common/loading/loadingbg.png"),backrect.size(242,242),backrect.pivotToCenter(),backrect.name="rect",backrect.pos(stage.designWidth/2,stage.designHeight/2),this.addChild(backrect);var icon=new Animation;icon.setFrames("assets/major/common/loading/clouddownload.png",1,14),icon.size(85,85),icon.pivotToCenter(),icon.name="icon",icon.loop=!0,icon.interval=66,icon.pos(backrect.width/2,backrect.height/2),backrect.addChild(icon);var txt=new Text;txt.text="加载中...",txt.color="#ffffff",txt.fontSize=24,txt.width=backrect.width,txt.align="center",txt.pos(0,backrect.height/3*2),txt.name="text",backrect.addChild(txt)},reset:function(){return this.getChildByName("rect","text").text="加载中...",this},progressTo:function(percent){this.getChildByName("rect","text").text="加载中 "+Math.round(100*percent)+"%"},addToStage:function(zOrder){this._super(zOrder),this.getChildByName("rect","icon").play(0,!0)},removeFromStage:function(){this.getChildByName("rect","icon").stop(),this._super()}});return{show:function(){loading||(loading=new Loading),loading.alpha=1,loading.reset().addToStage(10)},progress:function(percent){loading&&loading.progressTo(percent)},hide:function(){loading&&loading.tweenTo({alpha:0},400,"cubicOut",loading,loading.removeFromStage)}}}),gbx.define("comm/ui/sound_button",["gbx/render/ui/button","comm/helper/sound_mgr"],function(Button,soundMgr){return Button.extend({init:function(){this._super(),this._seUrl="assets/major/se/button.mp3",this.on(this.EVENT.MOUSE_DOWN,this,this._playSoundEffect)},_playSoundEffect:function(){soundMgr.playSE(this._seUrl)},setSeUrl:function(url){this._seUrl=url},end:function(){this.off(this.EVENT.MOUSE_DOWN,this,this._playSoundEffect),this._super()}})}),gbx.define("comm/ui/top_confirm",["gbx/render/display/sprite","gbx/render/display/text","gbx/render/stage","comm/ui/sound_button","conf/ui_locallization","comm/ui/ui_utils"],function(Sprite,Text,stage,Button,uiLocallization,uiUtils){var topConfirmBar,ConfirmBar=Sprite.extend({init:function(){this._super(),this.maskBtn=uiUtils.createMask(null,!0),this.maskBtn.pos(-1500,-1500),this.addChild(this.maskBtn),this.setImage("assets/major/public/background.png"),this.pivotToCenter(),this.pos(stage.designWidth/2,-this.height/2),this.scaleX=.8,this.scaleY=.8;var txt=new Text;txt.text="",txt.color="#ffffff",txt.fontSize=30,txt.width=430,txt.wordWrap=!0,txt.multiline=!0,txt.align="center",txt.name="text",txt.y=4,txt.pos(101.1,80),this.addChild(txt);var btn=new Button;btn.setSkinImage("assets/major/public/button_8.png"),btn.stateNum=2,btn.pos(134,280),btn.name="leftBtn";var text=uiUtils.createSimpleText("确 定","desc");text.size(146,67),text.align="center",text.pos(0,18),text.fontSize=25,btn.addChild(text),btn.setClickHandler(this,this._success),this.addChild(btn);var btn2=new Button;btn2.setSkinImage("assets/major/public/button_blue.png"),btn2.stateNum=2,btn2.pos(360,280),(text=uiUtils.createSimpleText("取 消","desc")).size(136,57),text.align="center",text.pos(0,15),text.fontSize=25,btn2.addChild(text),btn2.name="rightBtn",btn2.setClickHandler(this,this._abort),this.addChild(btn2)},_success:function(){var context=this._caller,callback=this._successCallback;this.hide(),callback&&callback.call(context)},_abort:function(){var context=this._caller,callback=this._failCallback;this.hide(),callback&&callback.call(context)},show:function(text,context,callback,failcallback,lBtnText,rBtnText){this.getChildByName("text").text=text,this._caller=context,this._successCallback=callback,failcallback&&(this._failCallback=failcallback),this.pivotToCenter(),this.pos(stage.designWidth/2,500),this.visible=!0,this.maskBtn.visible=!0,this.getChildByName("leftBtn","desc").text=lBtnText,this.getChildByName("rightBtn","desc").text=rBtnText},hide:function(context,callback){delete this._caller,delete this._successCallback,callback&&delete this._failCallback,this.visible=!1,this.maskBtn.visible=!1}});return{ask:function(text,context,callback,failcallback){topConfirmBar.show(text,context,callback,failcallback,uiLocallization.top_confirm1,uiLocallization.top_confirm2)},askBtnWorld:function(text,context,lBtnText,rBtnText,callback,failcallback){topConfirmBar.show(text,context,callback,failcallback,lBtnText,rBtnText)},new:function(){topConfirmBar||((topConfirmBar=new ConfirmBar).hide(),topConfirmBar.addToStage(6))},hide:function(){topConfirmBar.hide()}}}),gbx.define("comm/ui/top_message",["gbx/render/display/sprite","gbx/render/display/text","gbx/render/stage","gbx/net/errorcode_des"],function(Sprite,Text,stage,ERROR_CODE_DES){var topMessageBar,MessageBar=Sprite.extend({init:function(){this._super(),this.pivotToCenter(),this.container=null,this.alpha=0,this.pos(stage.designWidth/2,290),this.container=new Sprite,this.container.setImage("assets/major/common/topmessage/alpha_h2.png"),this.container.pivotToCenter(),this.container.pos(0,0),this.container.name="container",this.addChild(this.container);var content=new Text;content.text="",content.color="#ffffff",content.fontSize=22,content.width=640,content.align="center",content.name="text",content.pos(0,20),this.container.addChild(content)},checkCurrentScene:function(){"baccarat_table"==window.currentSceneName?this.getChildByName("container").pos(0,300):(this.getChildByName("container").pos(0,120),this.getChildByName("container").scale(1))},show:function(text,showTime,callback){this.alpha=1,this.getChildByName("container","text").text=text,/\n/.test(text)?this.getChildByName("container","text").pos(0,12):this.getChildByName("container","text").pos(0,20),this.checkCurrentScene(),this.clearTimer(this,this.delayHide),this.timerOnce(showTime,this,this.delayHide)},delayHide:function(){this.tweenTo({alpha:0},250,"sineIn",this,function(){})},hide:function(){this.alpha=0}});return{post:function(msg){topMessageBar||(topMessageBar=new MessageBar).addToStage(6),topMessageBar.show(msg,2e3)},postErrorCode:function(errorCode){var msg=ERROR_CODE_DES[errorCode];this.post(msg)},hide:function(){topMessageBar&&topMessageBar.hide()}}}),gbx.define("comm/ui/ui_utils",["gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/list","gbx/render/ui/textinput","gbx/render/ui/panel","comm/ui/top_message","conf/sound_paths","comm/helper/sound_mgr","conf/ui_locallization"],function(Sprite,Button,Text,List,TextInput,Panel,topMessage,soundPaths,soundMgr,uiLocallization){return{createButton:function(path,stateNum,btnName){var btn=new Button;return path&&btn.setSkinImage(path),btn.stateNum=stateNum,btn.pos(0,0),btn.name=btnName,btn},createSprite:function(path,name){var sp=new Sprite;return sp.setImage(path),sp.pos(0,0),sp.name=name,sp},createNormalList:function(repeatXY,x,y,Hori_Vert,width,height,cellX,cellY){var list=new List;return"v"==Hori_Vert||"V"==Hori_Vert?list.repeatX=repeatXY:list.repeatY=repeatXY,list.width=width,list.height=height,list.x=x,list.y=y,list.direction=List.DIRECTION.HORIZONTAL,"v"!=Hori_Vert&&"V"!=Hori_Vert||(list.direction=List.DIRECTION.VERTICAL),list.setCellSize(cellX,cellY),list.cacheContent=!0,list},createSimpleText:function(content,name){var ret=new Text;return ret.align="left",ret.color="#ffffff",ret.fontSize=17,ret.name=name,ret.text=content,ret.width=200,ret},createTextInput:function(name,promot){var input=new TextInput;return void 0!=promot&&(input.prompt=promot),input.size(100,50),input.fontSize=22,input.color="#ffffff",input.name=name,input},createPanel:function(sizeX,sizeY,name){var panel=new Panel;return panel.pos(5,5),panel.name=name,panel.size(sizeX,sizeY),panel.vScrollBarSkin="",panel},createMask:function(caller,noImage,path,callback){var backBtn=new Button;return void 0!=noImage&&null!=noImage||backBtn.setSkinImage("assets/major/public/mask.png"),path&&backBtn.setSkinImage(path),backBtn.width=3e3,backBtn.height=3e3,backBtn.pos(-1500,-1500),null!=caller&&(backBtn.size(3e3,3e3),void 0!=callback?backBtn.setClickHandler(caller,callback):backBtn.setClickHandler(caller,function(){window.lobbyisLock||(caller.visible=!1)})),backBtn},createBackgroundCrash:function(caller,background){background.size(background.width,background.height),background.on(caller.EVENT.MOUSE_UP,caller,null)},showMesage:function(msg){topMessage.post(msg)},playSound:function(name,volum,callback){var path=soundPaths[name];if(path){var v=1;volum&&(v=volum),soundMgr.playSE(path,v,callback)}else topMessage.post(name+uiLocallization.find_no_music)},getFloatByPower:function(number,n){return number=Math.floor(number*Math.pow(10,n))/Math.pow(10,n)}}}),gbx.define("conf/bank_card",{623529:{length:"6",cardName:"中国银联移动支付标记化产品",cardType:"借记卡",belong:"中国银联支付标记"},625153:{length:"6",cardName:"中国银联移动支付标记化产品",cardType:"贷记卡",belong:"中国银联支付标记"},6201361:{length:"7",cardName:"--",cardType:"预付费卡",belong:"中国银联支付标记"},6201362:{length:"7",cardName:"--",cardType:"预付费卡",belong:"中国银联支付标记"},6201363:{length:"7",cardName:"--",cardType:"预付费卡",belong:"中国银联支付标记"},6201365:{length:"7",cardName:"--",cardType:"预付费卡",belong:"中国银联支付标记"},6201366:{length:"7",cardName:"--",cardType:"预付费卡",belong:"中国银联支付标记"},6201367:{length:"7",cardName:"--",cardType:"预付费卡",belong:"中国银联支付标记"},6201368:{length:"7",cardName:"--",cardType:"预付费卡",belong:"中国银联支付标记"},6201369:{length:"7",cardName:"--",cardType:"预付费卡",belong:"中国银联支付标记"},6230740:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6230741:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6230742:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6230743:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6230745:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6230746:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6230747:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6230748:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6230749:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6235241:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6235242:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6235243:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6235244:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6235245:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6235246:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6235248:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6251640:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6251642:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6251643:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6251644:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6251645:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6251646:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6251647:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6251648:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6251649:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6258240:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6258241:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6258242:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6258243:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6258244:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6258245:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6258246:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6258247:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6258248:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6258249:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6230744:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6235247:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6251641:{length:"7",cardName:"--",cardType:"贷记卡",belong:"中国银联支付标记"},6201360:{length:"7",cardName:"--",cardType:"预付费卡",belong:"中国银联支付标记"},6201364:{length:"7",cardName:"--",cardType:"预付费卡",belong:"中国银联支付标记"},6235240:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},6235249:{length:"7",cardName:"--",cardType:"借记卡",belong:"中国银联支付标记"},622150:{length:"6",cardName:"绿卡银联标准卡",cardType:"借记卡",belong:"邮储银行"},622151:{length:"6",cardName:"绿卡银联标准卡",cardType:"借记卡",belong:"邮储银行"},622181:{length:"6",cardName:"绿卡专用卡",cardType:"借记卡",belong:"邮储银行"},622188:{length:"6",cardName:"绿卡银联标准卡",cardType:"借记卡",belong:"邮储银行"},955100:{length:"6",cardName:"绿卡(银联卡)",cardType:"借记卡",belong:"邮储银行"},621095:{length:"6",cardName:"绿卡VIP卡",cardType:"借记卡",belong:"邮储银行"},620062:{length:"6",cardName:"银联标准卡",cardType:"借记卡",belong:"邮储银行"},621285:{length:"6",cardName:"中职学生资助卡",cardType:"借记卡",belong:"邮储银行"},621798:{length:"6",cardName:"IC绿卡通VIP卡",cardType:"借记卡",belong:"邮政储蓄银行"},621799:{length:"6",cardName:"IC绿卡通",cardType:"借记卡",belong:"邮政储蓄银行"},621797:{length:"6",cardName:"IC联名卡",cardType:"借记卡",belong:"邮政储蓄银行"},622199:{length:"6",cardName:"绿卡银联标准卡",cardType:"借记卡",belong:"邮储银行"},621096:{length:"6",cardName:"绿卡通",cardType:"借记卡",belong:"邮储银行"},62215049:{length:"8",cardName:"绿卡储蓄卡(银联卡)",cardType:"借记卡",belong:"邮储银行河南分行"},62215050:{length:"8",cardName:"绿卡储蓄卡(银联卡)",cardType:"借记卡",belong:"邮储银行河南分行"},62215051:{length:"8",cardName:"绿卡储蓄卡(银联卡)",cardType:"借记卡",belong:"邮储银行河南分行"},62218849:{length:"8",cardName:"绿卡储蓄卡(银联卡)",cardType:"借记卡",belong:"邮储银行河南分行"},62218850:{length:"8",cardName:"绿卡储蓄卡(银联卡)",cardType:"借记卡",belong:"邮储银行河南分行"},62218851:{length:"8",cardName:"绿卡储蓄卡(银联卡)",cardType:"借记卡",belong:"邮储银行河南分行"},621622:{length:"6",cardName:"武警军人保障卡",cardType:"借记卡",belong:"邮政储蓄银行"},623219:{length:"6",cardName:"中国旅游卡（金卡）",cardType:"借记卡",belong:"邮政储蓄银行"},621674:{length:"6",cardName:"普通高中学生资助卡",cardType:"借记卡",belong:"邮政储蓄银行"},623218:{length:"6",cardName:"中国旅游卡（普卡）",cardType:"借记卡",belong:"邮政储蓄银行"},621599:{length:"6",cardName:"福农卡",cardType:"借记卡",belong:"邮政储蓄银行"},623698:{length:"6",cardName:"绿卡通IC卡-白金卡",cardType:"借记卡",belong:"邮政储蓄银行"},623699:{length:"6",cardName:"绿卡通IC卡-钻石卡",cardType:"借记卡",belong:"邮政储蓄银行"},623686:{length:"6",cardName:"绿卡通IC联名卡",cardType:"借记卡",belong:"邮政储蓄银行"},622182:{length:"6",cardName:"绿卡芯片卡",cardType:"借记卡",belong:"邮政储蓄银行"},625586:{length:"6",cardName:"绿卡通IC卡福农卡",cardType:"借记卡",belong:"邮政储蓄银行"},621098:{length:"6",cardName:"绿卡通",cardType:"借记卡",belong:"邮政储蓄银行"},620529:{length:"6",cardName:"--",cardType:"借记卡",belong:"邮政储蓄银行"},622180:{length:"6",cardName:"绿卡通IC卡全国联名卡",cardType:"借记卡",belong:"邮政储蓄银行"},622187:{length:"6",cardName:"绿卡通（青年卡）",cardType:"借记卡",belong:"邮政储蓄银行"},622189:{length:"6",cardName:"绿卡通（+薪卡）",cardType:"借记卡",belong:"邮政储蓄银行"},370246:{length:"6",cardName:"牡丹运通卡金卡",cardType:"贷记卡",belong:"工商银行"},370248:{length:"6",cardName:"牡丹运通卡金卡",cardType:"贷记卡",belong:"工商银行"},370249:{length:"6",cardName:"牡丹运通卡金卡",cardType:"贷记卡",belong:"工商银行"},427010:{length:"6",cardName:"牡丹VISA卡(单位卡)",cardType:"贷记卡",belong:"工商银行"},427018:{length:"6",cardName:"牡丹VISA信用卡",cardType:"贷记卡",belong:"工商银行"},427019:{length:"6",cardName:"牡丹VISA卡(单位卡)",cardType:"贷记卡",belong:"工商银行"},427020:{length:"6",cardName:"牡丹VISA信用卡",cardType:"贷记卡",belong:"工商银行"},427029:{length:"6",cardName:"牡丹VISA信用卡",cardType:"贷记卡",belong:"工商银行"},427030:{length:"6",cardName:"牡丹VISA信用卡",cardType:"贷记卡",belong:"工商银行"},427039:{length:"6",cardName:"牡丹VISA信用卡",cardType:"贷记卡",belong:"工商银行"},370247:{length:"6",cardName:"牡丹运通卡普通卡",cardType:"贷记卡",belong:"工商银行"},438125:{length:"6",cardName:"牡丹VISA信用卡",cardType:"贷记卡",belong:"工商银行"},438126:{length:"6",cardName:"牡丹VISA白金卡",cardType:"贷记卡",belong:"工商银行"},451804:{length:"6",cardName:"牡丹贷记卡(银联卡)",cardType:"贷记卡",belong:"工商银行"},451810:{length:"6",cardName:"牡丹贷记卡(银联卡)",cardType:"贷记卡",belong:"工商银行"},451811:{length:"6",cardName:"牡丹贷记卡(银联卡)",cardType:"贷记卡",belong:"工商银行"},45806:{length:"5",cardName:"牡丹信用卡(银联卡)",cardType:"贷记卡",belong:"工商银行"},458071:{length:"6",cardName:"牡丹贷记卡(银联卡)",cardType:"贷记卡",belong:"工商银行"},489734:{length:"6",cardName:"牡丹欧元卡",cardType:"贷记卡",belong:"工商银行"},489735:{length:"6",cardName:"牡丹欧元卡",cardType:"贷记卡",belong:"工商银行"},489736:{length:"6",cardName:"牡丹欧元卡",cardType:"贷记卡",belong:"工商银行"},427062:{length:"6",cardName:"牡丹VISA信用卡",cardType:"贷记卡",belong:"工商银行"},427064:{length:"6",cardName:"牡丹VISA信用卡",cardType:"贷记卡",belong:"工商银行"},530970:{length:"6",cardName:"牡丹万事达信用卡",cardType:"贷记卡",belong:"工商银行"},53098:{length:"5",cardName:"牡丹信用卡(银联卡)",cardType:"贷记卡",belong:"工商银行"},530990:{length:"6",cardName:"牡丹万事达信用卡",cardType:"贷记卡",belong:"工商银行"},558360:{length:"6",cardName:"牡丹万事达信用卡",cardType:"贷记卡",belong:"工商银行"},620200:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620302:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620402:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620403:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620404:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},524047:{length:"6",cardName:"牡丹万事达白金卡",cardType:"贷记卡",belong:"工商银行"},620406:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620407:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},525498:{length:"6",cardName:"海航信用卡个人普卡",cardType:"贷记卡",belong:"工商银行"},620409:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620410:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620411:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620412:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620502:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620503:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620405:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620408:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620512:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620602:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620604:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620607:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620611:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620612:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620704:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620706:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620707:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620708:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620709:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620710:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620609:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620712:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620713:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620714:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620802:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620711:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620904:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620905:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621001:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},620902:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621103:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621105:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621106:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621107:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621102:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621203:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621204:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621205:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621206:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621207:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621208:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621209:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621210:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621302:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621303:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621202:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621305:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621306:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621307:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621309:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621311:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621313:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621211:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621315:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621304:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621402:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621404:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621405:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621406:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621407:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621408:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621409:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621410:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621502:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621317:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621511:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621602:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621603:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621604:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621605:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621608:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621609:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621610:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621611:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621612:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621613:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621614:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621615:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621616:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621617:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621607:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621606:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621804:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621807:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621813:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621814:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621817:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621901:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621904:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621905:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621906:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621907:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621908:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621909:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621910:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621911:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621912:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621913:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621915:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622002:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621903:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622004:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622005:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622006:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622007:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622008:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622010:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622011:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622012:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},621914:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622015:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622016:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622003:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622018:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622019:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622020:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622102:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622103:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622104:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622105:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622013:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622111:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622114:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622017:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622210:{length:"6",cardName:"准贷记卡(个普)",cardType:"准贷记卡",belong:"工商银行"},622211:{length:"6",cardName:"准贷记卡(个普)",cardType:"准贷记卡",belong:"工商银行"},622212:{length:"6",cardName:"准贷记卡(个普)",cardType:"准贷记卡",belong:"工商银行"},622213:{length:"6",cardName:"准贷记卡(个普)",cardType:"准贷记卡",belong:"工商银行"},622214:{length:"6",cardName:"准贷记卡(个普)",cardType:"准贷记卡",belong:"工商银行"},622110:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622220:{length:"6",cardName:"准贷记卡(商普)",cardType:"准贷记卡",belong:"工商银行"},622223:{length:"6",cardName:"牡丹卡(商务卡)",cardType:"准贷记卡",belong:"工商银行"},622225:{length:"6",cardName:"准贷记卡(商金)",cardType:"准贷记卡",belong:"工商银行"},622229:{length:"6",cardName:"牡丹卡(商务卡)",cardType:"准贷记卡",belong:"工商银行"},622230:{length:"6",cardName:"贷记卡(个普)",cardType:"贷记卡",belong:"工商银行"},622231:{length:"6",cardName:"牡丹卡(个人卡)",cardType:"贷记卡",belong:"工商银行"},622232:{length:"6",cardName:"牡丹卡(个人卡)",cardType:"贷记卡",belong:"工商银行"},622233:{length:"6",cardName:"牡丹卡(个人卡)",cardType:"贷记卡",belong:"工商银行"},622234:{length:"6",cardName:"牡丹卡(个人卡)",cardType:"贷记卡",belong:"工商银行"},622235:{length:"6",cardName:"贷记卡(个金)",cardType:"贷记卡",belong:"工商银行"},622237:{length:"6",cardName:"牡丹交通卡",cardType:"贷记卡",belong:"工商银行"},622215:{length:"6",cardName:"准贷记卡(个金)",cardType:"准贷记卡",belong:"工商银行"},622239:{length:"6",cardName:"牡丹交通卡",cardType:"贷记卡",belong:"工商银行"},622240:{length:"6",cardName:"贷记卡(商普)",cardType:"贷记卡",belong:"工商银行"},622245:{length:"6",cardName:"贷记卡(商金)",cardType:"贷记卡",belong:"工商银行"},622224:{length:"6",cardName:"牡丹卡(商务卡)",cardType:"准贷记卡",belong:"工商银行"},622303:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622304:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622305:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622306:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622307:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622308:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622309:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622238:{length:"6",cardName:"牡丹交通卡",cardType:"贷记卡",belong:"工商银行"},622314:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622315:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622317:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622302:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622402:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622403:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622404:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622313:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622504:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622505:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622509:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622513:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622517:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622502:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622604:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622605:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622606:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622510:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622703:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622715:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622806:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622902:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622903:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622706:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},623002:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},623006:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},623008:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},623011:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},623012:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},622904:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},623015:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},623100:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},623202:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},623301:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},623400:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},623500:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},623602:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},623803:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},623901:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},623014:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},624100:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},624200:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},624301:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},624402:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},62451804:{length:"8",cardName:"牡丹贷记卡",cardType:"贷记卡",belong:"工商银行"},62451810:{length:"8",cardName:"牡丹贷记卡",cardType:"贷记卡",belong:"工商银行"},62451811:{length:"8",cardName:"牡丹贷记卡",cardType:"贷记卡",belong:"工商银行"},6245806:{length:"7",cardName:"牡丹信用卡",cardType:"贷记卡",belong:"工商银行"},62458071:{length:"8",cardName:"牡丹贷记卡",cardType:"贷记卡",belong:"工商银行"},6253098:{length:"7",cardName:"牡丹信用卡",cardType:"贷记卡",belong:"工商银行"},623700:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},628288:{length:"6",cardName:"中央预算单位公务卡",cardType:"贷记卡",belong:"工商银行"},624000:{length:"6",cardName:"牡丹灵通卡",cardType:"借记卡",belong:"工商银行"},9558:{length:"4",cardName:"牡丹灵通卡(银联卡)",cardType:"借记卡",belong:"工商银行"},628286:{length:"6",cardName:"财政预算单位公务卡",cardType:"贷记卡",belong:"工商银行"},622206:{length:"6",cardName:"牡丹卡白金卡",cardType:"贷记卡",belong:"工商银行"},526836:{length:"6",cardName:"国航知音牡丹信用卡",cardType:"贷记卡",belong:"工商银行"},513685:{length:"6",cardName:"国航知音牡丹信用卡",cardType:"贷记卡",belong:"工商银行"},543098:{length:"6",cardName:"国航知音牡丹信用卡",cardType:"贷记卡",belong:"工商银行"},458441:{length:"6",cardName:"国航知音牡丹信用卡",cardType:"贷记卡",belong:"工商银行"},622246:{length:"6",cardName:"专用信用消费卡",cardType:"贷记卡",belong:"工商银行"},900000:{length:"6",cardName:"牡丹社会保障卡",cardType:"借记卡",belong:"工商银行"},544210:{length:"6",cardName:"牡丹东航联名卡",cardType:"贷记卡",belong:"中国工商银行"},548943:{length:"6",cardName:"牡丹东航联名卡",cardType:"贷记卡",belong:"中国工商银行"},370267:{length:"6",cardName:"牡丹运通白金卡",cardType:"贷记卡",belong:"中国工商银行"},621558:{length:"6",cardName:"福农灵通卡",cardType:"借记卡",belong:"中国工商银行"},621559:{length:"6",cardName:"福农灵通卡",cardType:"借记卡",belong:"中国工商银行"},621722:{length:"6",cardName:"灵通卡",cardType:"借记卡",belong:"工商银行"},621723:{length:"6",cardName:"灵通卡",cardType:"借记卡",belong:"工商银行"},621226:{length:"6",cardName:"牡丹卡普卡",cardType:"借记卡",belong:"工商银行"},402791:{length:"6",cardName:"国际借记卡",cardType:"借记卡",belong:"工商银行"},427028:{length:"6",cardName:"国际借记卡",cardType:"借记卡",belong:"工商银行"},427038:{length:"6",cardName:"国际借记卡",cardType:"借记卡",belong:"工商银行"},548259:{length:"6",cardName:"国际借记卡",cardType:"借记卡",belong:"工商银行"},356879:{length:"6",cardName:"牡丹JCB信用卡",cardType:"贷记卡",belong:"中国工商银行"},356880:{length:"6",cardName:"牡丹JCB信用卡",cardType:"贷记卡",belong:"中国工商银行"},356881:{length:"6",cardName:"牡丹JCB信用卡",cardType:"贷记卡",belong:"中国工商银行"},356882:{length:"6",cardName:"牡丹JCB信用卡",cardType:"贷记卡",belong:"中国工商银行"},528856:{length:"6",cardName:"牡丹多币种卡",cardType:"贷记卡",belong:"中国工商银行"},620516:{length:"6",cardName:"预付芯片卡",cardType:"借记卡",belong:"工商银行"},621721:{length:"6",cardName:"灵通卡",cardType:"借记卡",belong:"工商银行"},900010:{length:"6",cardName:"牡丹宁波市民卡",cardType:"借记卡",belong:"工商银行"},625330:{length:"6",cardName:"中国旅游卡",cardType:"贷记卡",belong:"中国工商银行"},625331:{length:"6",cardName:"中国旅游卡",cardType:"贷记卡",belong:"中国工商银行"},625332:{length:"6",cardName:"中国旅游卡",cardType:"贷记卡",belong:"中国工商银行"},622236:{length:"6",cardName:"借贷合一卡",cardType:"贷记卡",belong:"中国工商银行"},524374:{length:"6",cardName:"牡丹多币种卡",cardType:"贷记卡",belong:"中国工商银行"},550213:{length:"6",cardName:"牡丹多币种卡",cardType:"贷记卡",belong:"中国工商银行"},621288:{length:"6",cardName:"工银财富卡",cardType:"借记卡",belong:"工商银行"},625708:{length:"6",cardName:"中小商户采购卡",cardType:"贷记卡",belong:"中国工商银行"},625709:{length:"6",cardName:"中小商户采购卡",cardType:"贷记卡",belong:"中国工商银行"},622597:{length:"6",cardName:"环球旅行金卡",cardType:"贷记卡",belong:"中国工商银行"},622599:{length:"6",cardName:"环球旅行白金卡",cardType:"贷记卡",belong:"中国工商银行"},360883:{length:"6",cardName:"牡丹工银大来卡",cardType:"贷记卡",belong:"中国工商银行"},360884:{length:"6",cardName:"牡丹工银大莱卡",cardType:"贷记卡",belong:"中国工商银行"},625865:{length:"6",cardName:"IC金卡",cardType:"贷记卡",belong:"中国工商银行"},625866:{length:"6",cardName:"IC白金卡",cardType:"贷记卡",belong:"中国工商银行"},625899:{length:"6",cardName:"工行IC卡（红卡）",cardType:"贷记卡",belong:"中国工商银行"},374738:{length:"6",cardName:"牡丹百夫长信用卡",cardType:"贷记卡",belong:"中国工商银行"},374739:{length:"6",cardName:"牡丹百夫长信用卡",cardType:"贷记卡",belong:"中国工商银行"},510529:{length:"6",cardName:"牡丹万事达国际借记卡",cardType:"贷记卡",belong:"工商银行"},524091:{length:"6",cardName:"海航信用卡",cardType:"贷记卡",belong:"工商银行"},625650:{length:"6",cardName:"YL企业公司卡信用IC金卡",cardType:"贷记卡",belong:"中国工商银行"},622910:{length:"6",cardName:"工银环球旅行信用卡",cardType:"贷记卡",belong:"中国工商银行"},622911:{length:"6",cardName:"银联金卡",cardType:"贷记卡",belong:"中国工商银行"},622912:{length:"6",cardName:"银联白金卡",cardType:"贷记卡",belong:"中国工商银行"},622913:{length:"6",cardName:"银联普卡",cardType:"贷记卡",belong:"中国工商银行"},625858:{length:"6",cardName:"工银I运动信用卡银联白金卡",cardType:"贷记卡",belong:"中国工商银行"},625859:{length:"6",cardName:"工银I运动信用卡银联金卡",cardType:"贷记卡",belong:"中国工商银行"},625860:{length:"6",cardName:"工银I运动信用卡银联普卡",cardType:"贷记卡",belong:"中国工商银行"},625160:{length:"6",cardName:"--",cardType:"贷记卡",belong:"中国工商银行"},625161:{length:"6",cardName:"--",cardType:"贷记卡",belong:"中国工商银行"},625162:{length:"6",cardName:"--",cardType:"贷记卡",belong:"中国工商银行"},620086:{length:"6",cardName:"中国旅行卡",cardType:"借记卡",belong:"中国工商银行"},621670:{length:"6",cardName:"普通高中学生资助卡",cardType:"借记卡",belong:"中国工商银行"},623260:{length:"6",cardName:"财智账户卡",cardType:"借记卡",belong:"中国工商银行"},620058:{length:"6",cardName:"银联标准卡",cardType:"借记卡",belong:"工商银行"},621225:{length:"6",cardName:"牡丹卡普卡",cardType:"借记卡",belong:"工商银行"},621227:{length:"6",cardName:"理财金账户金卡",cardType:"借记卡",belong:"工商银行"},621281:{length:"6",cardName:"中职学生资助卡",cardType:"借记卡",belong:"工商银行"},621618:{length:"6",cardName:"武警军人保障卡",cardType:"借记卡",belong:"中国工商银行"},622200:{length:"6",cardName:"灵通卡",cardType:"借记卡",belong:"工商银行"},622202:{length:"6",cardName:"E时代卡",cardType:"借记卡",belong:"工商银行"},622203:{length:"6",cardName:"E时代卡",cardType:"借记卡",belong:"工商银行"},622208:{length:"6",cardName:"理财金卡",cardType:"借记卡",belong:"工商银行"},623062:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行"},623271:{length:"6",cardName:"--",cardType:"借记卡",belong:"中国工商银行"},623272:{length:"6",cardName:"--",cardType:"借记卡",belong:"中国工商银行"},621218:{length:"6",cardName:"借记白金卡",cardType:"借记卡",belong:"中国工商银行"},621475:{length:"6",cardName:"借记卡灵通卡",cardType:"借记卡",belong:"中国工商银行"},621476:{length:"6",cardName:"借记卡金卡",cardType:"借记卡",belong:"中国工商银行"},623229:{length:"6",cardName:"中国旅游卡",cardType:"借记卡",belong:"中国工商银行"},625929:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"工行布鲁塞尔"},621376:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行布鲁塞尔分行"},620054:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国工商银行布鲁塞尔分行"},620142:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国工商银行布鲁塞尔分行"},621423:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行（巴西）"},625927:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"中国工商银行（巴西）"},621428:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行金边分行"},625939:{length:"6",cardName:"信用卡",cardType:"贷记卡",belong:"中国工商银行金边分行"},621434:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行金边分行"},625987:{length:"6",cardName:"信用卡",cardType:"贷记卡",belong:"中国工商银行金边分行"},621761:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行加拿大分行"},621749:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行加拿大分行"},620184:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国工商银行加拿大分行"},625930:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"工行加拿大"},623321:{length:"6",cardName:"预付卡",cardType:"借记卡",belong:"中国工商银行加拿大分行"},621300:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行巴黎分行"},621378:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行巴黎分行"},625114:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"中国工商银行巴黎分行"},622159:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"中国工商银行法兰克福分行"},621720:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行法兰克福分行"},625021:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"中国工商银行法兰克福分行"},625022:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"中国工商银行法兰克福分行"},625932:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"工银法兰克福"},621379:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行法兰克福分行"},620114:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国工商银行法兰克福分行"},620146:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国工商银行法兰克福分行"},622889:{length:"6",cardName:"ICBC(Asia) Credit",cardType:"贷记卡",belong:"中国工商银行(亚洲)有限公司"},625900:{length:"6",cardName:"ICBC Credit Card",cardType:"贷记卡",belong:"中国工商银行(亚洲)有限公司"},622949:{length:"6",cardName:"EliteClubATMCard",cardType:"借记卡",belong:"中国工商银行(亚洲)有限公司"},625915:{length:"6",cardName:"港币信用卡",cardType:"贷记卡",belong:"中国工商银行(亚洲)有限公司"},625916:{length:"6",cardName:"港币信用卡",cardType:"贷记卡",belong:"中国工商银行(亚洲)有限公司"},620030:{length:"6",cardName:"工银亚洲预付卡",cardType:"预付费卡",belong:"中国工商银行(亚洲)有限公司"},620050:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国工商银行(亚洲)有限公司"},622944:{length:"6",cardName:"CNYEasylinkCard",cardType:"借记卡",belong:"中国工商银行(亚洲)有限公司"},625115:{length:"6",cardName:"工银银联公司卡",cardType:"贷记卡",belong:"中国工商银行(亚洲)有限公司"},620101:{length:"6",cardName:"",cardType:"预付费卡",belong:"中国工商银行(亚洲)有限公司"},623335:{length:"6",cardName:"",cardType:"预付费卡",belong:"中国工商银行(亚洲)有限公司"},625941:{length:"6",cardName:"",cardType:"贷记卡",belong:"中国工商银行(亚洲)有限公司"},625801:{length:"6",cardName:"工银亚洲贷记卡",cardType:"贷记卡",belong:"中国工商银行(亚洲)有限公司"},622171:{length:"6",cardName:"印尼盾复合卡",cardType:"贷记卡",belong:"中国工商银行(印尼)"},621240:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行(印尼)"},621724:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行印尼分行"},625931:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"工银印尼"},621762:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行（印度尼西亚）"},625918:{length:"6",cardName:"信用卡",cardType:"贷记卡",belong:"中国工商银行印尼分行"},625113:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"工行米兰"},621371:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行米兰分行"},620143:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国工商银行米兰分行"},620149:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国工商银行米兰分行"},62137310:{length:"8",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行米兰分行"},62137320:{length:"8",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行米兰分行"},62592310:{length:"8",cardName:"贷记卡",cardType:"贷记卡",belong:"中国工商银行米兰分行"},62592320:{length:"8",cardName:"贷记卡",cardType:"贷记卡",belong:"中国工商银行米兰分行"},62592340:{length:"8",cardName:"贷记卡",cardType:"贷记卡",belong:"中国工商银行米兰分行"},62013101:{length:"8",cardName:"",cardType:"预付费卡",belong:"中国工商银行米兰分行"},62013102:{length:"8",cardName:"",cardType:"预付费卡",belong:"中国工商银行米兰分行"},621730:{length:"6",cardName:"工行东京借记卡",cardType:"借记卡",belong:"工行东京分行"},625928:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"工行阿拉木图"},621414:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行阿拉木图子行"},625914:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"中国工商银行阿拉木图子行"},621375:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行阿拉木图子行"},620187:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国工商银行阿拉木图子行"},621734:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"工行首尔"},621433:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行万象分行"},625986:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"中国工商银行万象分行"},621370:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行卢森堡分行"},625925:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"中国工商银行卢森堡分行"},622926:{length:"6",cardName:"E时代卡",cardType:"借记卡",belong:"中国工商银行澳门分行"},622927:{length:"6",cardName:"E时代卡",cardType:"借记卡",belong:"中国工商银行澳门分行"},622928:{length:"6",cardName:"E时代卡",cardType:"借记卡",belong:"中国工商银行澳门分行"},622929:{length:"6",cardName:"理财金账户",cardType:"借记卡",belong:"中国工商银行澳门分行"},622930:{length:"6",cardName:"理财金账户",cardType:"借记卡",belong:"中国工商银行澳门分行"},622931:{length:"6",cardName:"理财金账户",cardType:"借记卡",belong:"中国工商银行澳门分行"},621733:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行（澳门）"},621732:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行（澳门）"},620124:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国工商银行澳门分行"},620183:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国工商银行澳门分行"},620561:{length:"6",cardName:"工银闪付预付卡",cardType:"预付费卡",belong:"中国工商银行澳门分行"},625116:{length:"6",cardName:"工银银联公司卡",cardType:"贷记卡",belong:"中国工商银行澳门分行"},622227:{length:"6",cardName:"Diamond",cardType:"贷记卡",belong:"中国工商银行澳门分行"},625921:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"工行马来西亚"},621764:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"工银马来西亚"},625926:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"工行阿姆斯特丹"},621372:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行阿姆斯特丹"},623034:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"工银新西兰"},625110:{length:"6",cardName:"信用卡",cardType:"贷记卡",belong:"工银新西兰"},621464:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行卡拉奇分行"},625942:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"中国工商银行卡拉奇分行"},62594250:{length:"8",cardName:"银联公司卡",cardType:"贷记卡",belong:"中国工商银行卡拉奇分行"},62594260:{length:"8",cardName:"银联公司卡",cardType:"贷记卡",belong:"中国工商银行卡拉奇分行"},62594270:{length:"8",cardName:"银联公司卡",cardType:"贷记卡",belong:"中国工商银行卡拉奇分行"},622158:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"中国工商银行新加坡分行"},625917:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"中国工商银行新加坡分行"},621765:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行新加坡分行"},620094:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国工商银行新加坡分行"},620186:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国工商银行新加坡分行"},621719:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行新加坡分行"},621719:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行新加坡分行"},625922:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"工行河内"},621369:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"工银河内"},621763:{length:"6",cardName:"工银越南盾借记卡",cardType:"借记卡",belong:"工银河内"},625934:{length:"6",cardName:"工银越南盾信用卡",cardType:"贷记卡",belong:"工银河内"},620046:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"工银河内"},621750:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行马德里分行"},625933:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"工行马德里"},621377:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行马德里分行"},620148:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国工商银行马德里分行"},620185:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国工商银行马德里分行"},625920:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"工银泰国"},621367:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"工银泰国"},625924:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"工行伦敦"},621374:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行伦敦子行"},621731:{length:"6",cardName:"工银伦敦借记卡",cardType:"借记卡",belong:"中国工商银行伦敦子行"},621781:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国工商银行伦敦子行"},103:{length:"3",cardName:"金穗借记卡",cardType:"借记卡",belong:"农业银行"},552599:{length:"6",cardName:"金穗贷记卡",cardType:"贷记卡",belong:"农业银行"},6349102:{length:"7",cardName:"金穗信用卡",cardType:"准贷记卡",belong:"农业银行"},6353591:{length:"7",cardName:"金穗信用卡",cardType:"准贷记卡",belong:"农业银行"},623206:{length:"6",cardName:"中国旅游卡",cardType:"借记卡",belong:"农业银行"},621671:{length:"6",cardName:"普通高中学生资助卡",cardType:"借记卡",belong:"农业银行"},620059:{length:"6",cardName:"银联标准卡",cardType:"借记卡",belong:"农业银行"},403361:{length:"6",cardName:"金穗贷记卡(银联卡)",cardType:"贷记卡",belong:"农业银行"},404117:{length:"6",cardName:"金穗贷记卡(银联卡)",cardType:"贷记卡",belong:"农业银行"},404118:{length:"6",cardName:"金穗贷记卡(银联卡)",cardType:"贷记卡",belong:"农业银行"},404119:{length:"6",cardName:"金穗贷记卡(银联卡)",cardType:"贷记卡",belong:"农业银行"},404120:{length:"6",cardName:"金穗贷记卡(银联卡)",cardType:"贷记卡",belong:"农业银行"},404121:{length:"6",cardName:"金穗贷记卡(银联卡)",cardType:"贷记卡",belong:"农业银行"},463758:{length:"6",cardName:"VISA白金卡",cardType:"贷记卡",belong:"农业银行"},49102:{length:"5",cardName:"金穗信用卡(银联卡)",cardType:"准贷记卡",belong:"农业银行"},514027:{length:"6",cardName:"万事达白金卡",cardType:"贷记卡",belong:"农业银行"},519412:{length:"6",cardName:"金穗贷记卡(银联卡)",cardType:"贷记卡",belong:"农业银行"},519413:{length:"6",cardName:"金穗贷记卡(银联卡)",cardType:"贷记卡",belong:"农业银行"},520082:{length:"6",cardName:"金穗贷记卡(银联卡)",cardType:"贷记卡",belong:"农业银行"},520083:{length:"6",cardName:"金穗贷记卡(银联卡)",cardType:"贷记卡",belong:"农业银行"},53591:{length:"5",cardName:"金穗信用卡(银联卡)",cardType:"准贷记卡",belong:"农业银行"},558730:{length:"6",cardName:"金穗贷记卡",cardType:"贷记卡",belong:"农业银行"},621282:{length:"6",cardName:"中职学生资助卡",cardType:"借记卡",belong:"农业银行"},621336:{length:"6",cardName:"专用惠农卡",cardType:"借记卡",belong:"农业银行"},621619:{length:"6",cardName:"武警军人保障卡",cardType:"借记卡",belong:"农业银行"},622821:{length:"6",cardName:"金穗校园卡(银联卡)",cardType:"借记卡",belong:"农业银行"},622822:{length:"6",cardName:"金穗星座卡(银联卡)",cardType:"借记卡",belong:"农业银行"},622823:{length:"6",cardName:"金穗社保卡(银联卡)",cardType:"借记卡",belong:"农业银行"},622824:{length:"6",cardName:"金穗旅游卡(银联卡)",cardType:"借记卡",belong:"农业银行"},622825:{length:"6",cardName:"金穗青年卡(银联卡)",cardType:"借记卡",belong:"农业银行"},622826:{length:"6",cardName:"复合介质金穗通宝卡",cardType:"借记卡",belong:"农业银行"},622827:{length:"6",cardName:"金穗海通卡",cardType:"借记卡",belong:"农业银行"},622828:{length:"6",cardName:"退役金卡",cardType:"借记卡",belong:"农业银行"},622836:{length:"6",cardName:"金穗贷记卡",cardType:"贷记卡",belong:"农业银行"},622837:{length:"6",cardName:"金穗贷记卡",cardType:"贷记卡",belong:"农业银行"},622840:{length:"6",cardName:"金穗通宝卡(银联卡)",cardType:"借记卡",belong:"农业银行"},622841:{length:"6",cardName:"金穗惠农卡",cardType:"借记卡",belong:"农业银行"},622843:{length:"6",cardName:"金穗通宝银卡",cardType:"借记卡",belong:"农业银行"},622844:{length:"6",cardName:"金穗通宝卡(银联卡)",cardType:"借记卡",belong:"农业银行"},622845:{length:"6",cardName:"金穗通宝卡(银联卡)",cardType:"借记卡",belong:"农业银行"},622846:{length:"6",cardName:"金穗通宝卡",cardType:"借记卡",belong:"农业银行"},622847:{length:"6",cardName:"金穗通宝卡(银联卡)",cardType:"借记卡",belong:"农业银行"},622848:{length:"6",cardName:"金穗通宝卡(银联卡)",cardType:"借记卡",belong:"农业银行"},622849:{length:"6",cardName:"金穗通宝钻石卡",cardType:"借记卡",belong:"农业银行"},623018:{length:"6",cardName:"掌尚钱包",cardType:"借记卡",belong:"农业银行"},625996:{length:"6",cardName:"银联IC卡金卡",cardType:"贷记卡",belong:"农业银行"},625997:{length:"6",cardName:"银联预算单位公务卡金卡",cardType:"贷记卡",belong:"农业银行"},625998:{length:"6",cardName:"银联IC卡白金卡",cardType:"贷记卡",belong:"农业银行"},628268:{length:"6",cardName:"金穗公务卡",cardType:"贷记卡",belong:"农业银行"},95595:{length:"5",cardName:"借记卡(银联卡)",cardType:"借记卡",belong:"农业银行"},95596:{length:"5",cardName:"借记卡(银联卡)",cardType:"借记卡",belong:"农业银行"},95597:{length:"5",cardName:"借记卡(银联卡)",cardType:"借记卡",belong:"农业银行"},95598:{length:"5",cardName:"借记卡(银联卡)",cardType:"借记卡",belong:"农业银行"},95599:{length:"5",cardName:"借记卡(银联卡)",cardType:"借记卡",belong:"农业银行"},622839:{length:"6",cardName:"农行钻石信用卡",cardType:"贷记卡",belong:"农业银行"},625826:{length:"6",cardName:"IC普卡",cardType:"贷记卡",belong:"中国农业银行贷记卡"},625827:{length:"6",cardName:"IC金卡",cardType:"贷记卡",belong:"中国农业银行贷记卡"},548478:{length:"6",cardName:"澳元卡",cardType:"贷记卡",belong:"中国农业银行贷记卡"},544243:{length:"6",cardName:"欧元卡",cardType:"贷记卡",belong:"中国农业银行贷记卡"},622820:{length:"6",cardName:"金穗通商卡",cardType:"准贷记卡",belong:"中国农业银行贷记卡"},622830:{length:"6",cardName:"金穗通商卡",cardType:"准贷记卡",belong:"中国农业银行贷记卡"},622838:{length:"6",cardName:"银联白金卡",cardType:"贷记卡",belong:"中国农业银行贷记卡"},625336:{length:"6",cardName:"中国旅游卡",cardType:"贷记卡",belong:"中国农业银行贷记卡"},628269:{length:"6",cardName:"银联IC公务卡",cardType:"贷记卡",belong:"中国农业银行贷记卡"},625653:{length:"6",cardName:"农行商务卡",cardType:"贷记卡",belong:"中国农业银行贷记卡"},628346:{length:"6",cardName:"农行标准公务卡",cardType:"贷记卡",belong:"中国农业银行贷记卡"},625171:{length:"6",cardName:"农行标准金卡",cardType:"准贷记卡",belong:"中国农业银行贷记卡"},625170:{length:"6",cardName:"农行标准金卡",cardType:"贷记卡",belong:"中国农业银行贷记卡"},620501:{length:"6",cardName:"市民卡B卡",cardType:"借记卡",belong:"宁波市农业银行"},621660:{length:"6",cardName:"联名卡",cardType:"借记卡",belong:"中国银行"},621661:{length:"6",cardName:"个人普卡",cardType:"借记卡",belong:"中国银行"},621663:{length:"6",cardName:"员工普卡",cardType:"借记卡",belong:"中国银行"},621667:{length:"6",cardName:"理财普卡",cardType:"借记卡",belong:"中国银行"},621668:{length:"6",cardName:"理财金卡",cardType:"借记卡",belong:"中国银行"},621666:{length:"6",cardName:"理财白金卡",cardType:"借记卡",belong:"中国银行"},356833:{length:"6",cardName:"中银JCB卡金卡",cardType:"贷记卡",belong:"中国银行"},356835:{length:"6",cardName:"中银JCB卡普卡",cardType:"贷记卡",belong:"中国银行"},409665:{length:"6",cardName:"员工普卡",cardType:"贷记卡",belong:"中国银行"},409666:{length:"6",cardName:"个人普卡",cardType:"贷记卡",belong:"中国银行"},409668:{length:"6",cardName:"中银威士信用卡员",cardType:"贷记卡",belong:"中国银行"},409669:{length:"6",cardName:"中银威士信用卡员",cardType:"贷记卡",belong:"中国银行"},409670:{length:"6",cardName:"个人白金卡",cardType:"贷记卡",belong:"中国银行"},409671:{length:"6",cardName:"中银威士信用卡",cardType:"贷记卡",belong:"中国银行"},409672:{length:"6",cardName:"长城公务卡",cardType:"贷记卡",belong:"中国银行"},456351:{length:"6",cardName:"长城电子借记卡",cardType:"借记卡",belong:"中国银行"},512315:{length:"6",cardName:"中银万事达信用卡",cardType:"贷记卡",belong:"中国银行"},512316:{length:"6",cardName:"中银万事达信用卡",cardType:"贷记卡",belong:"中国银行"},512411:{length:"6",cardName:"中银万事达信用卡",cardType:"贷记卡",belong:"中国银行"},512412:{length:"6",cardName:"中银万事达信用卡",cardType:"贷记卡",belong:"中国银行"},514957:{length:"6",cardName:"中银万事达信用卡",cardType:"贷记卡",belong:"中国银行"},409667:{length:"6",cardName:"中银威士信用卡员",cardType:"贷记卡",belong:"中国银行"},518378:{length:"6",cardName:"长城万事达信用卡",cardType:"准贷记卡",belong:"中国银行"},518379:{length:"6",cardName:"长城万事达信用卡",cardType:"准贷记卡",belong:"中国银行"},518474:{length:"6",cardName:"长城万事达信用卡",cardType:"准贷记卡",belong:"中国银行"},518475:{length:"6",cardName:"长城万事达信用卡",cardType:"准贷记卡",belong:"中国银行"},518476:{length:"6",cardName:"长城万事达信用卡",cardType:"准贷记卡",belong:"中国银行"},438088:{length:"6",cardName:"中银奥运信用卡",cardType:"贷记卡",belong:"中国银行"},524865:{length:"6",cardName:"长城信用卡",cardType:"准贷记卡",belong:"中国银行"},525745:{length:"6",cardName:"长城信用卡",cardType:"准贷记卡",belong:"中国银行"},525746:{length:"6",cardName:"长城信用卡",cardType:"准贷记卡",belong:"中国银行"},547766:{length:"6",cardName:"长城万事达信用卡",cardType:"准贷记卡",belong:"中国银行"},552742:{length:"6",cardName:"长城公务卡",cardType:"贷记卡",belong:"中国银行"},553131:{length:"6",cardName:"长城公务卡",cardType:"贷记卡",belong:"中国银行"},558868:{length:"6",cardName:"中银万事达信用卡",cardType:"准贷记卡",belong:"中国银行"},514958:{length:"6",cardName:"中银万事达信用卡",cardType:"贷记卡",belong:"中国银行"},622752:{length:"6",cardName:"长城人民币信用卡",cardType:"准贷记卡",belong:"中国银行"},622753:{length:"6",cardName:"长城人民币信用卡",cardType:"准贷记卡",belong:"中国银行"},622755:{length:"6",cardName:"长城人民币信用卡",cardType:"准贷记卡",belong:"中国银行"},524864:{length:"6",cardName:"长城信用卡",cardType:"准贷记卡",belong:"中国银行"},622757:{length:"6",cardName:"长城人民币信用卡",cardType:"准贷记卡",belong:"中国银行"},622758:{length:"6",cardName:"长城人民币信用卡",cardType:"准贷记卡",belong:"中国银行"},622759:{length:"6",cardName:"长城信用卡",cardType:"准贷记卡",belong:"中国银行"},622760:{length:"6",cardName:"银联单币贷记卡",cardType:"贷记卡",belong:"中国银行"},622761:{length:"6",cardName:"长城信用卡",cardType:"准贷记卡",belong:"中国银行"},622762:{length:"6",cardName:"长城信用卡",cardType:"准贷记卡",belong:"中国银行"},622763:{length:"6",cardName:"长城信用卡",cardType:"准贷记卡",belong:"中国银行"},601382:{length:"6",cardName:"长城电子借记卡",cardType:"借记卡",belong:"中国银行"},622756:{length:"6",cardName:"长城人民币信用卡",cardType:"准贷记卡",belong:"中国银行"},628388:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"中国银行"},621256:{length:"6",cardName:"一卡双账户普卡",cardType:"借记卡",belong:"中国银行"},621212:{length:"6",cardName:"财互通卡",cardType:"借记卡",belong:"中国银行"},620514:{length:"6",cardName:"电子现金卡",cardType:"预付费卡",belong:"中国银行"},622754:{length:"6",cardName:"长城人民币信用卡",cardType:"准贷记卡",belong:"中国银行"},518377:{length:"6",cardName:"中银女性主题信用卡",cardType:"贷记卡",belong:"中国银行"},622788:{length:"6",cardName:"白金卡",cardType:"贷记卡",belong:"中国银行"},621283:{length:"6",cardName:"中职学生资助卡",cardType:"借记卡",belong:"中国银行"},620061:{length:"6",cardName:"银联标准卡",cardType:"借记卡",belong:"中国银行"},621725:{length:"6",cardName:"金融IC卡",cardType:"借记卡",belong:"中国银行"},620040:{length:"6",cardName:"长城社会保障卡",cardType:"预付费卡",belong:"中国银行"},558869:{length:"6",cardName:"世界卡",cardType:"准贷记卡",belong:"中国银行"},621330:{length:"6",cardName:"社保联名卡",cardType:"借记卡",belong:"中国银行"},621331:{length:"6",cardName:"社保联名卡",cardType:"借记卡",belong:"中国银行"},621332:{length:"6",cardName:"医保联名卡",cardType:"借记卡",belong:"中国银行"},621333:{length:"6",cardName:"医保联名卡",cardType:"借记卡",belong:"中国银行"},621297:{length:"6",cardName:"公司借记卡",cardType:"借记卡",belong:"中国银行"},377677:{length:"6",cardName:"银联美运顶级卡",cardType:"准贷记卡",belong:"中国银行"},621568:{length:"6",cardName:"长城福农借记卡金卡",cardType:"借记卡",belong:"中国银行"},621569:{length:"6",cardName:"长城福农借记卡普卡",cardType:"借记卡",belong:"中国银行"},625905:{length:"6",cardName:"中行金融IC卡普卡",cardType:"准贷记卡",belong:"中国银行"},625906:{length:"6",cardName:"中行金融IC卡金卡",cardType:"准贷记卡",belong:"中国银行"},625907:{length:"6",cardName:"中行金融IC卡白金卡",cardType:"准贷记卡",belong:"中国银行"},628313:{length:"6",cardName:"长城银联公务IC卡白金卡",cardType:"贷记卡",belong:"中国银行"},625333:{length:"6",cardName:"中银旅游信用卡",cardType:"准贷记卡",belong:"中国银行"},628312:{length:"6",cardName:"长城银联公务IC卡金卡",cardType:"贷记卡",belong:"中国银行"},623208:{length:"6",cardName:"中国旅游卡",cardType:"借记卡",belong:"中国银行"},621620:{length:"6",cardName:"武警军人保障卡",cardType:"借记卡",belong:"中国银行"},621756:{length:"6",cardName:"社保联名借记IC卡",cardType:"借记卡",belong:"中国银行"},621757:{length:"6",cardName:"社保联名借记IC卡",cardType:"借记卡",belong:"中国银行"},621758:{length:"6",cardName:"医保联名借记IC卡",cardType:"借记卡",belong:"中国银行"},621759:{length:"6",cardName:"医保联名借记IC卡",cardType:"借记卡",belong:"中国银行"},621785:{length:"6",cardName:"借记IC个人普卡",cardType:"借记卡",belong:"中国银行"},621786:{length:"6",cardName:"借记IC个人金卡",cardType:"借记卡",belong:"中国银行"},621787:{length:"6",cardName:"借记IC个人普卡",cardType:"借记卡",belong:"中国银行"},621788:{length:"6",cardName:"借记IC白金卡",cardType:"借记卡",belong:"中国银行"},621789:{length:"6",cardName:"借记IC钻石卡",cardType:"借记卡",belong:"中国银行"},621790:{length:"6",cardName:"借记IC联名卡",cardType:"借记卡",belong:"中国银行"},621672:{length:"6",cardName:"普通高中学生资助卡",cardType:"借记卡",belong:"中国银行"},625337:{length:"6",cardName:"长城环球通港澳台旅游金卡",cardType:"准贷记卡",belong:"中国银行"},625338:{length:"6",cardName:"长城环球通港澳台旅游白金卡",cardType:"准贷记卡",belong:"中国银行"},625568:{length:"6",cardName:"中银福农信用卡",cardType:"准贷记卡",belong:"中国银行"},621669:{length:"6",cardName:"理财银卡",cardType:"借记卡",belong:"中国银行"},621662:{length:"6",cardName:"个人金卡",cardType:"借记卡",belong:"中国银行"},623571:{length:"6",cardName:"长城代发薪借记IC卡（钻石卡）",cardType:"借记卡",belong:"中国银行"},623572:{length:"6",cardName:"长城代发薪借记IC卡（白金卡）",cardType:"借记卡",belong:"中国银行"},623575:{length:"6",cardName:"长城代发薪借记IC卡（普卡）",cardType:"借记卡",belong:"中国银行"},623263:{length:"6",cardName:"中银单位结算卡",cardType:"借记卡",belong:"中国银行"},623184:{length:"6",cardName:"银联保障类借记IC卡（金卡）",cardType:"借记卡",belong:"中国银行"},623569:{length:"6",cardName:"银联保障类借记IC卡（白金卡）",cardType:"借记卡",belong:"中国银行"},623586:{length:"6",cardName:"银联多币借记IC卡（钻石卡）",cardType:"借记卡",belong:"中国银行"},625834:{length:"6",cardName:"银联HCE移动支付信用卡",cardType:"准贷记卡",belong:"中国银行"},623573:{length:"6",cardName:"长城代发薪借记IC卡（金卡）",cardType:"借记卡",belong:"中国银行"},621665:{length:"6",cardName:"员工金卡",cardType:"借记卡",belong:"中国银行"},627025:{length:"6",cardName:"--",cardType:"借记卡",belong:"中国银行"},627026:{length:"6",cardName:"--",cardType:"借记卡",belong:"中国银行"},627027:{length:"6",cardName:"--",cardType:"借记卡",belong:"中国银行"},627028:{length:"6",cardName:"--",cardType:"借记卡",belong:"中国银行"},622764:{length:"6",cardName:"长城单位信用卡普卡",cardType:"准贷记卡",belong:"中国银行"},622765:{length:"6",cardName:"长城单位信用卡金卡",cardType:"准贷记卡",belong:"中国银行"},625908:{length:"6",cardName:"中行金融IC卡白金卡",cardType:"准贷记卡",belong:"中国银行"},625909:{length:"6",cardName:"中行金融IC卡金卡",cardType:"准贷记卡",belong:"中国银行"},625910:{length:"6",cardName:"中行金融IC卡普卡",cardType:"准贷记卡",belong:"中国银行"},620025:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国银行（澳大利亚）"},620026:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国银行（澳大利亚）"},621293:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国银行（澳大利亚）"},621294:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国银行（澳大利亚）"},621342:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国银行（澳大利亚）"},621343:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国银行（澳大利亚）"},621364:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国银行（澳大利亚）"},621394:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国银行（澳大利亚）"},621648:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国银行金边分行"},621248:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国银行雅加达分行"},621215:{length:"6",cardName:"借记卡普卡",cardType:"借记卡",belong:"中银东京分行"},621249:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国银行首尔分行"},622771:{length:"6",cardName:"中银卡",cardType:"借记卡",belong:"中国银行澳门分行"},622772:{length:"6",cardName:"中银卡",cardType:"借记卡",belong:"中国银行澳门分行"},622770:{length:"6",cardName:"中银卡",cardType:"借记卡",belong:"中国银行澳门分行"},620531:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国银行澳门分行"},620210:{length:"6",cardName:"澳门中国银行银联预付卡",cardType:"预付费卡",belong:"中国银行澳门分行"},620211:{length:"6",cardName:"澳门中国银行银联预付卡",cardType:"预付费卡",belong:"中国银行澳门分行"},622479:{length:"6",cardName:"熊猫卡",cardType:"贷记卡",belong:"中国银行澳门分行"},622480:{length:"6",cardName:"财富卡",cardType:"贷记卡",belong:"中国银行澳门分行"},622273:{length:"6",cardName:"银联港币卡",cardType:"借记卡",belong:"中国银行澳门分行"},622274:{length:"6",cardName:"银联澳门币卡",cardType:"借记卡",belong:"中国银行澳门分行"},622380:{length:"6",cardName:"中银全币种银联尊贵卡",cardType:"贷记卡",belong:"中国银行澳门分行"},626200:{length:"6",cardName:"",cardType:"贷记卡",belong:"中国银行澳门分行"},620019:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国银行(马来西亚)"},620035:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中国银行(马来西亚)"},621231:{length:"6",cardName:"双币种借记卡",cardType:"借记卡",belong:"中国银行马尼拉分行"},622789:{length:"6",cardName:"BOCCUPPLATINUMCARD",cardType:"贷记卡",belong:"中行新加坡分行"},621638:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国银行胡志明分行"},621334:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国银行曼谷分行"},625140:{length:"6",cardName:"长城信用卡环球通",cardType:"贷记卡",belong:"中国银行曼谷分行"},621395:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国银行曼谷分行"},620513:{length:"6",cardName:"长城宁波市民卡",cardType:"预付费卡",belong:"中行宁波分行"},5453242:{length:"7",cardName:"龙卡信用卡",cardType:"贷记卡",belong:"建设银行"},5491031:{length:"7",cardName:"龙卡信用卡",cardType:"贷记卡",belong:"建设银行"},5544033:{length:"7",cardName:"龙卡信用卡",cardType:"贷记卡",belong:"建设银行"},622725:{length:"6",cardName:"龙卡准贷记卡",cardType:"准贷记卡",belong:"建设银行"},622728:{length:"6",cardName:"龙卡准贷记卡金卡",cardType:"准贷记卡",belong:"建设银行"},621284:{length:"6",cardName:"中职学生资助卡",cardType:"借记卡",belong:"建设银行"},421349:{length:"6",cardName:"乐当家银卡VISA",cardType:"借记卡",belong:"建设银行"},434061:{length:"6",cardName:"乐当家金卡VISA",cardType:"借记卡",belong:"建设银行"},434062:{length:"6",cardName:"乐当家白金卡",cardType:"借记卡",belong:"建设银行"},436728:{length:"6",cardName:"龙卡普通卡VISA",cardType:"准贷记卡",belong:"建设银行"},436742:{length:"6",cardName:"龙卡储蓄卡",cardType:"借记卡",belong:"建设银行"},453242:{length:"6",cardName:"VISA准贷记卡(银联卡)",cardType:"准贷记卡",belong:"建设银行"},491031:{length:"6",cardName:"VISA准贷记金卡",cardType:"准贷记卡",belong:"建设银行"},524094:{length:"6",cardName:"乐当家",cardType:"借记卡",belong:"建设银行"},526410:{length:"6",cardName:"乐当家",cardType:"借记卡",belong:"建设银行"},53242:{length:"5",cardName:"MASTER准贷记卡",cardType:"准贷记卡",belong:"建设银行"},53243:{length:"5",cardName:"乐当家",cardType:"准贷记卡",belong:"建设银行"},544033:{length:"6",cardName:"准贷记金卡",cardType:"准贷记卡",belong:"建设银行"},552245:{length:"6",cardName:"乐当家白金卡",cardType:"借记卡",belong:"建设银行"},589970:{length:"6",cardName:"金融复合IC卡",cardType:"借记卡",belong:"建设银行"},620060:{length:"6",cardName:"银联标准卡",cardType:"借记卡",belong:"建设银行"},621080:{length:"6",cardName:"银联理财钻石卡",cardType:"借记卡",belong:"建设银行"},621081:{length:"6",cardName:"金融IC卡",cardType:"借记卡",belong:"建设银行"},621466:{length:"6",cardName:"理财白金卡",cardType:"借记卡",belong:"建设银行"},621467:{length:"6",cardName:"社保IC卡",cardType:"借记卡",belong:"建设银行"},621488:{length:"6",cardName:"财富卡私人银行卡",cardType:"借记卡",belong:"建设银行"},621499:{length:"6",cardName:"理财金卡",cardType:"借记卡",belong:"建设银行"},621598:{length:"6",cardName:"福农卡",cardType:"借记卡",belong:"建设银行"},621621:{length:"6",cardName:"武警军人保障卡",cardType:"借记卡",belong:"建设银行"},621700:{length:"6",cardName:"龙卡通",cardType:"借记卡",belong:"建设银行"},622280:{length:"6",cardName:"银联储蓄卡",cardType:"借记卡",belong:"建设银行"},622700:{length:"6",cardName:"龙卡储蓄卡(银联卡)",cardType:"借记卡",belong:"建设银行"},622707:{length:"6",cardName:"准贷记卡",cardType:"准贷记卡",belong:"建设银行"},622966:{length:"6",cardName:"理财白金卡",cardType:"借记卡",belong:"建设银行"},622988:{length:"6",cardName:"理财金卡",cardType:"借记卡",belong:"建设银行"},625955:{length:"6",cardName:"准贷记卡普卡",cardType:"准贷记卡",belong:"建设银行"},625956:{length:"6",cardName:"准贷记卡金卡",cardType:"准贷记卡",belong:"建设银行"},553242:{length:"6",cardName:"龙卡信用卡",cardType:"贷记卡",belong:"建设银行"},621082:{length:"6",cardName:"建行陆港通龙卡",cardType:"借记卡",belong:"建设银行"},623251:{length:"6",cardName:"单位结算卡",cardType:"借记卡",belong:"建设银行"},621673:{length:"6",cardName:"普通高中学生资助卡",cardType:"借记卡",belong:"中国建设银行"},623211:{length:"6",cardName:"中国旅游卡",cardType:"借记卡",belong:"中国建设银行"},623668:{length:"6",cardName:"结算通借记卡",cardType:"借记卡",belong:"中国建设银行"},623094:{length:"6",cardName:"代发工资借记IC卡",cardType:"借记卡",belong:"中国建设银行"},623669:{length:"6",cardName:"全国联名卡",cardType:"借记卡",belong:"中国建设银行"},6233670:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"LLC Bank (Russia)"},6233671:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"LLC Bank (Russia)"},6233672:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"LLC Bank (Russia)"},6233673:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"LLC Bank (Russia)"},6233674:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"LLC Bank (Russia)"},6233675:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"LLC Bank (Russia)"},6234340:{length:"7",cardName:"",cardType:"借记卡",belong:"LLC Bank (Russia)"},6234341:{length:"7",cardName:"",cardType:"借记卡",belong:"LLC Bank (Russia)"},6234342:{length:"7",cardName:"",cardType:"借记卡",belong:"LLC Bank (Russia)"},6234343:{length:"7",cardName:"",cardType:"借记卡",belong:"LLC Bank (Russia)"},6234344:{length:"7",cardName:"",cardType:"借记卡",belong:"LLC Bank (Russia)"},6234345:{length:"7",cardName:"",cardType:"借记卡",belong:"LLC Bank (Russia)"},436742193:{length:"9",cardName:"龙卡储蓄卡",cardType:"借记卡",belong:"建行厦门分行"},622280193:{length:"9",cardName:"银联储蓄卡",cardType:"借记卡",belong:"建行厦门分行"},356896:{length:"6",cardName:"龙卡JCB金卡",cardType:"贷记卡",belong:"中国建设银行"},356899:{length:"6",cardName:"龙卡JCB白金卡",cardType:"贷记卡",belong:"中国建设银行"},356895:{length:"6",cardName:"龙卡JCB普卡",cardType:"贷记卡",belong:"中国建设银行"},436718:{length:"6",cardName:"龙卡贷记卡公司卡",cardType:"贷记卡",belong:"中国建设银行"},436738:{length:"6",cardName:"龙卡贷记卡",cardType:"贷记卡",belong:"中国建设银行"},436745:{length:"6",cardName:"龙卡国际普通卡VISA",cardType:"贷记卡",belong:"中国建设银行"},436748:{length:"6",cardName:"龙卡国际金卡VISA",cardType:"贷记卡",belong:"中国建设银行"},489592:{length:"6",cardName:"VISA白金信用卡",cardType:"贷记卡",belong:"中国建设银行"},531693:{length:"6",cardName:"龙卡国际白金卡",cardType:"贷记卡",belong:"中国建设银行"},532450:{length:"6",cardName:"龙卡国际普通卡MASTER",cardType:"贷记卡",belong:"中国建设银行"},532458:{length:"6",cardName:"龙卡国际金卡MASTER",cardType:"贷记卡",belong:"中国建设银行"},544887:{length:"6",cardName:"龙卡万事达金卡",cardType:"贷记卡",belong:"中国建设银行"},552801:{length:"6",cardName:"龙卡贷记卡",cardType:"贷记卡",belong:"中国建设银行"},557080:{length:"6",cardName:"龙卡万事达白金卡",cardType:"贷记卡",belong:"中国建设银行"},558895:{length:"6",cardName:"龙卡贷记卡",cardType:"贷记卡",belong:"中国建设银行"},559051:{length:"6",cardName:"龙卡万事达信用卡",cardType:"贷记卡",belong:"中国建设银行"},622166:{length:"6",cardName:"龙卡人民币信用卡",cardType:"贷记卡",belong:"中国建设银行"},622168:{length:"6",cardName:"龙卡人民币信用金卡",cardType:"贷记卡",belong:"中国建设银行"},622708:{length:"6",cardName:"龙卡人民币白金卡",cardType:"贷记卡",belong:"中国建设银行"},625964:{length:"6",cardName:"龙卡IC信用卡普卡",cardType:"贷记卡",belong:"中国建设银行"},625965:{length:"6",cardName:"龙卡IC信用卡金卡",cardType:"贷记卡",belong:"中国建设银行"},625966:{length:"6",cardName:"龙卡IC信用卡白金卡",cardType:"贷记卡",belong:"中国建设银行"},628266:{length:"6",cardName:"龙卡银联公务卡普卡",cardType:"贷记卡",belong:"中国建设银行"},628366:{length:"6",cardName:"龙卡银联公务卡金卡",cardType:"贷记卡",belong:"中国建设银行"},625362:{length:"6",cardName:"中国旅游卡",cardType:"贷记卡",belong:"中国建设银行"},625363:{length:"6",cardName:"中国旅游卡",cardType:"贷记卡",belong:"中国建设银行"},628316:{length:"6",cardName:"龙卡IC公务卡",cardType:"贷记卡",belong:"中国建设银行"},628317:{length:"6",cardName:"龙卡IC公务卡",cardType:"贷记卡",belong:"中国建设银行"},620021:{length:"6",cardName:"交行预付卡",cardType:"预付费卡",belong:"交通银行"},620521:{length:"6",cardName:"世博预付IC卡",cardType:"预付费卡",belong:"交通银行"},"00405512":{length:"8",cardName:"太平洋互连卡",cardType:"借记卡",belong:"交通银行"},"0049104":{length:"7",cardName:"太平洋信用卡",cardType:"贷记卡",belong:"交通银行"},"0053783":{length:"7",cardName:"太平洋信用卡",cardType:"贷记卡",belong:"交通银行"},"00601428":{length:"8",cardName:"太平洋万事顺卡",cardType:"借记卡",belong:"交通银行"},405512:{length:"6",cardName:"太平洋互连卡(银联卡)",cardType:"借记卡",belong:"交通银行"},434910:{length:"6",cardName:"太平洋白金信用卡",cardType:"贷记卡",belong:"交通银行"},458123:{length:"6",cardName:"太平洋双币贷记卡",cardType:"贷记卡",belong:"交通银行"},458124:{length:"6",cardName:"太平洋双币贷记卡",cardType:"贷记卡",belong:"交通银行"},49104:{length:"5",cardName:"太平洋信用卡",cardType:"贷记卡",belong:"交通银行"},520169:{length:"6",cardName:"太平洋双币贷记卡",cardType:"贷记卡",belong:"交通银行"},522964:{length:"6",cardName:"太平洋白金信用卡",cardType:"贷记卡",belong:"交通银行"},53783:{length:"5",cardName:"太平洋信用卡",cardType:"贷记卡",belong:"交通银行"},552853:{length:"6",cardName:"太平洋双币贷记卡",cardType:"贷记卡",belong:"交通银行"},601428:{length:"6",cardName:"太平洋万事顺卡",cardType:"借记卡",belong:"交通银行"},622250:{length:"6",cardName:"太平洋人民币贷记卡",cardType:"贷记卡",belong:"交通银行"},622251:{length:"6",cardName:"太平洋人民币贷记卡",cardType:"贷记卡",belong:"交通银行"},521899:{length:"6",cardName:"太平洋双币贷记卡",cardType:"贷记卡",belong:"交通银行"},622254:{length:"6",cardName:"太平洋准贷记卡",cardType:"准贷记卡",belong:"交通银行"},622255:{length:"6",cardName:"太平洋准贷记卡",cardType:"准贷记卡",belong:"交通银行"},622256:{length:"6",cardName:"太平洋准贷记卡",cardType:"准贷记卡",belong:"交通银行"},622257:{length:"6",cardName:"太平洋准贷记卡",cardType:"准贷记卡",belong:"交通银行"},622258:{length:"6",cardName:"太平洋借记卡",cardType:"借记卡",belong:"交通银行"},622259:{length:"6",cardName:"太平洋借记卡",cardType:"借记卡",belong:"交通银行"},622253:{length:"6",cardName:"太平洋人民币贷记卡",cardType:"贷记卡",belong:"交通银行"},622261:{length:"6",cardName:"太平洋借记卡",cardType:"借记卡",belong:"交通银行"},622284:{length:"6",cardName:"太平洋MORE卡",cardType:"准贷记卡",belong:"交通银行"},622656:{length:"6",cardName:"白金卡",cardType:"贷记卡",belong:"交通银行"},628216:{length:"6",cardName:"交通银行公务卡普卡",cardType:"贷记卡",belong:"交通银行"},622252:{length:"6",cardName:"太平洋人民币贷记卡",cardType:"贷记卡",belong:"交通银行"},66405512:{length:"8",cardName:"太平洋互连卡",cardType:"借记卡",belong:"交通银行"},6649104:{length:"7",cardName:"太平洋信用卡",cardType:"贷记卡",belong:"交通银行"},622260:{length:"6",cardName:"太平洋借记卡",cardType:"借记卡",belong:"交通银行"},66601428:{length:"8",cardName:"太平洋万事顺卡",cardType:"借记卡",belong:"交通银行"},955590:{length:"6",cardName:"太平洋贷记卡(银联卡)",cardType:"贷记卡",belong:"交通银行"},955591:{length:"6",cardName:"太平洋贷记卡(银联卡)",cardType:"贷记卡",belong:"交通银行"},955592:{length:"6",cardName:"太平洋贷记卡(银联卡)",cardType:"贷记卡",belong:"交通银行"},955593:{length:"6",cardName:"太平洋贷记卡(银联卡)",cardType:"贷记卡",belong:"交通银行"},6653783:{length:"7",cardName:"太平洋信用卡",cardType:"贷记卡",belong:"交通银行"},628218:{length:"6",cardName:"交通银行公务卡金卡",cardType:"贷记卡",belong:"交通银行"},622262:{length:"6",cardName:"交银IC卡",cardType:"借记卡",belong:"交通银行"},623261:{length:"6",cardName:"交通银行单位结算卡",cardType:"借记卡",belong:"交通银行"},622285:{length:"6",cardName:"more银联金卡",cardType:"准贷记卡",belong:"交通银行"},621069:{length:"6",cardName:"交通银行港币借记卡",cardType:"借记卡",belong:"交通银行香港分行"},620013:{length:"6",cardName:"港币礼物卡",cardType:"借记卡",belong:"交通银行香港分行"},625028:{length:"6",cardName:"双币种信用卡",cardType:"贷记卡",belong:"交通银行香港分行"},625029:{length:"6",cardName:"双币种信用卡",cardType:"贷记卡",belong:"交通银行香港分行"},621436:{length:"6",cardName:"双币卡",cardType:"借记卡",belong:"交通银行香港分行"},621002:{length:"6",cardName:"银联人民币卡",cardType:"借记卡",belong:"交通银行香港分行"},621335:{length:"6",cardName:"银联借记卡",cardType:"借记卡",belong:"交通银行澳门分行"},433670:{length:"6",cardName:"中信借记卡",cardType:"借记卡",belong:"中信银行"},433680:{length:"6",cardName:"中信借记卡",cardType:"借记卡",belong:"中信银行"},442729:{length:"6",cardName:"中信国际借记卡",cardType:"借记卡",belong:"中信银行"},442730:{length:"6",cardName:"中信国际借记卡",cardType:"借记卡",belong:"中信银行"},620082:{length:"6",cardName:"中国旅行卡",cardType:"借记卡",belong:"中信银行"},622690:{length:"6",cardName:"中信借记卡(银联卡)",cardType:"借记卡",belong:"中信银行"},622691:{length:"6",cardName:"中信借记卡(银联卡)",cardType:"借记卡",belong:"中信银行"},622692:{length:"6",cardName:"中信贵宾卡(银联卡)",cardType:"借记卡",belong:"中信银行"},622696:{length:"6",cardName:"中信理财宝金卡",cardType:"借记卡",belong:"中信银行"},622698:{length:"6",cardName:"中信理财宝白金卡",cardType:"借记卡",belong:"中信银行"},622998:{length:"6",cardName:"中信钻石卡",cardType:"借记卡",belong:"中信银行"},622999:{length:"6",cardName:"中信钻石卡",cardType:"借记卡",belong:"中信银行"},433671:{length:"6",cardName:"中信借记卡",cardType:"借记卡",belong:"中信银行"},968807:{length:"6",cardName:"中信理财宝(银联卡)",cardType:"借记卡",belong:"中信银行"},968808:{length:"6",cardName:"中信理财宝(银联卡)",cardType:"借记卡",belong:"中信银行"},968809:{length:"6",cardName:"中信理财宝(银联卡)",cardType:"借记卡",belong:"中信银行"},621771:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中信银行"},621767:{length:"6",cardName:"理财宝IC卡",cardType:"借记卡",belong:"中信银行"},621768:{length:"6",cardName:"理财宝IC卡",cardType:"借记卡",belong:"中信银行"},621770:{length:"6",cardName:"理财宝IC卡",cardType:"借记卡",belong:"中信银行"},621772:{length:"6",cardName:"理财宝IC卡",cardType:"借记卡",belong:"中信银行"},621773:{length:"6",cardName:"理财宝IC卡",cardType:"借记卡",belong:"中信银行"},620527:{length:"6",cardName:"主账户复合电子现金卡",cardType:"借记卡",belong:"中信银行"},621769:{length:"6",cardName:"中信银行钻石卡",cardType:"借记卡",belong:"中信银行"},623280:{length:"6",cardName:"浙江高院案款管理系统专用卡",cardType:"借记卡",belong:"中信银行"},303:{length:"3",cardName:"阳光卡",cardType:"借记卡",belong:"光大银行"},356837:{length:"6",cardName:"阳光商旅信用卡",cardType:"贷记卡",belong:"光大银行"},356838:{length:"6",cardName:"阳光商旅信用卡",cardType:"贷记卡",belong:"光大银行"},486497:{length:"6",cardName:"阳光商旅信用卡",cardType:"贷记卡",belong:"光大银行"},622660:{length:"6",cardName:"阳光卡(银联卡)",cardType:"借记卡",belong:"光大银行"},622662:{length:"6",cardName:"阳光卡(银联卡)",cardType:"借记卡",belong:"光大银行"},622663:{length:"6",cardName:"阳光卡(银联卡)",cardType:"借记卡",belong:"光大银行"},622664:{length:"6",cardName:"阳光卡(银联卡)",cardType:"借记卡",belong:"光大银行"},622665:{length:"6",cardName:"阳光卡(银联卡)",cardType:"借记卡",belong:"光大银行"},622666:{length:"6",cardName:"阳光卡(银联卡)",cardType:"借记卡",belong:"光大银行"},622667:{length:"6",cardName:"阳光卡(银联卡)",cardType:"借记卡",belong:"光大银行"},622669:{length:"6",cardName:"阳光卡(银联卡)",cardType:"借记卡",belong:"光大银行"},622670:{length:"6",cardName:"阳光卡(银联卡)",cardType:"借记卡",belong:"光大银行"},622671:{length:"6",cardName:"阳光卡(银联卡)",cardType:"借记卡",belong:"光大银行"},622672:{length:"6",cardName:"阳光卡(银联卡)",cardType:"借记卡",belong:"光大银行"},622668:{length:"6",cardName:"阳光卡(银联卡)",cardType:"借记卡",belong:"光大银行"},622661:{length:"6",cardName:"阳光卡(银联卡)",cardType:"借记卡",belong:"光大银行"},622674:{length:"6",cardName:"阳光卡(银联卡)",cardType:"借记卡",belong:"光大银行"},90030:{length:"5",cardName:"阳光卡(银联卡)",cardType:"借记卡",belong:"光大银行"},622673:{length:"6",cardName:"阳光卡(银联卡)",cardType:"借记卡",belong:"光大银行"},620518:{length:"6",cardName:"借记卡普卡",cardType:"借记卡",belong:"光大银行"},621489:{length:"6",cardName:"社会保障IC卡",cardType:"借记卡",belong:"光大银行"},621492:{length:"6",cardName:"IC借记卡普卡",cardType:"借记卡",belong:"光大银行"},620535:{length:"6",cardName:"手机支付卡",cardType:"借记卡",belong:"光大银行"},623156:{length:"6",cardName:"联名IC卡普卡",cardType:"借记卡",belong:"光大银行"},621490:{length:"6",cardName:"借记IC卡白金卡",cardType:"借记卡",belong:"光大银行"},621491:{length:"6",cardName:"借记IC卡金卡",cardType:"借记卡",belong:"光大银行"},620085:{length:"6",cardName:"阳光旅行卡",cardType:"借记卡",belong:"光大银行"},623155:{length:"6",cardName:"借记IC卡钻石卡",cardType:"借记卡",belong:"光大银行"},623157:{length:"6",cardName:"联名IC卡金卡",cardType:"借记卡",belong:"光大银行"},623158:{length:"6",cardName:"联名IC卡白金卡",cardType:"借记卡",belong:"光大银行"},623159:{length:"6",cardName:"联名IC卡钻石卡",cardType:"借记卡",belong:"光大银行"},623253:{length:"6",cardName:"--",cardType:"借记卡",belong:"光大银行"},999999:{length:"6",cardName:"华夏卡(银联卡)",cardType:"借记卡",belong:"华夏银行"},621222:{length:"6",cardName:"华夏白金卡",cardType:"借记卡",belong:"华夏银行"},623020:{length:"6",cardName:"华夏普卡",cardType:"借记卡",belong:"华夏银行"},623021:{length:"6",cardName:"华夏金卡",cardType:"借记卡",belong:"华夏银行"},623022:{length:"6",cardName:"华夏白金卡",cardType:"借记卡",belong:"华夏银行"},623023:{length:"6",cardName:"华夏钻石卡",cardType:"借记卡",belong:"华夏银行"},622630:{length:"6",cardName:"华夏卡(银联卡)",cardType:"借记卡",belong:"华夏银行"},622631:{length:"6",cardName:"华夏至尊金卡(银联卡)",cardType:"借记卡",belong:"华夏银行"},622632:{length:"6",cardName:"华夏丽人卡(银联卡)",cardType:"借记卡",belong:"华夏银行"},622633:{length:"6",cardName:"华夏万通卡",cardType:"借记卡",belong:"华夏银行"},620552:{length:"6",cardName:"--",cardType:"预付费卡",belong:"华夏银行"},622615:{length:"6",cardName:"民生借记卡(银联卡)",cardType:"借记卡",belong:"民生银行"},622616:{length:"6",cardName:"民生银联借记卡－金卡",cardType:"借记卡",belong:"民生银行"},622618:{length:"6",cardName:"钻石卡",cardType:"借记卡",belong:"民生银行"},622622:{length:"6",cardName:"民生借记卡(银联卡)",cardType:"借记卡",belong:"民生银行"},622617:{length:"6",cardName:"民生借记卡(银联卡)",cardType:"借记卡",belong:"民生银行"},622619:{length:"6",cardName:"民生借记卡(银联卡)",cardType:"借记卡",belong:"民生银行"},415599:{length:"6",cardName:"民生借记卡",cardType:"借记卡",belong:"民生银行"},421393:{length:"6",cardName:"民生国际卡",cardType:"借记卡",belong:"民生银行"},421865:{length:"6",cardName:"民生国际卡(银卡)",cardType:"借记卡",belong:"民生银行"},427570:{length:"6",cardName:"民生国际卡(欧元卡)",cardType:"借记卡",belong:"民生银行"},427571:{length:"6",cardName:"民生国际卡(澳元卡)",cardType:"借记卡",belong:"民生银行"},472067:{length:"6",cardName:"民生国际卡",cardType:"借记卡",belong:"民生银行"},472068:{length:"6",cardName:"民生国际卡",cardType:"借记卡",belong:"民生银行"},622620:{length:"6",cardName:"薪资理财卡",cardType:"借记卡",belong:"民生银行"},621691:{length:"6",cardName:"借记卡普卡",cardType:"借记卡",belong:"民生银行"},623255:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"民生银行"},900003:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"民生银行"},623258:{length:"6",cardName:"--",cardType:"借记卡",belong:"民生银行"},623683:{length:"6",cardName:"民生银行银联借记卡银卡",cardType:"借记卡",belong:"民生银行"},545392:{length:"6",cardName:"民生MasterCard",cardType:"贷记卡",belong:"民生银行"},545393:{length:"6",cardName:"民生MasterCard",cardType:"贷记卡",belong:"民生银行"},545431:{length:"6",cardName:"民生MasterCard",cardType:"贷记卡",belong:"民生银行"},545447:{length:"6",cardName:"民生MasterCard",cardType:"贷记卡",belong:"民生银行"},356859:{length:"6",cardName:"民生JCB信用卡",cardType:"贷记卡",belong:"民生银行"},356857:{length:"6",cardName:"民生JCB金卡",cardType:"贷记卡",belong:"民生银行"},407405:{length:"6",cardName:"民生贷记卡(银联卡)",cardType:"贷记卡",belong:"民生银行"},421869:{length:"6",cardName:"民生贷记卡(银联卡)",cardType:"贷记卡",belong:"民生银行"},421870:{length:"6",cardName:"民生贷记卡(银联卡)",cardType:"贷记卡",belong:"民生银行"},421871:{length:"6",cardName:"民生贷记卡(银联卡)",cardType:"贷记卡",belong:"民生银行"},512466:{length:"6",cardName:"民生贷记卡(银联卡)",cardType:"贷记卡",belong:"民生银行"},356856:{length:"6",cardName:"民生JCB普卡",cardType:"贷记卡",belong:"民生银行"},528948:{length:"6",cardName:"民生贷记卡(银联卡)",cardType:"贷记卡",belong:"民生银行"},552288:{length:"6",cardName:"民生贷记卡(银联卡)",cardType:"贷记卡",belong:"民生银行"},622600:{length:"6",cardName:"民生信用卡(银联卡)",cardType:"贷记卡",belong:"民生银行"},622601:{length:"6",cardName:"民生信用卡(银联卡)",cardType:"贷记卡",belong:"民生银行"},622602:{length:"6",cardName:"民生银联白金信用卡",cardType:"贷记卡",belong:"民生银行"},517636:{length:"6",cardName:"民生贷记卡(银联卡)",cardType:"贷记卡",belong:"民生银行"},622621:{length:"6",cardName:"民生银联个人白金卡",cardType:"贷记卡",belong:"民生银行"},628258:{length:"6",cardName:"公务卡金卡",cardType:"贷记卡",belong:"民生银行"},556610:{length:"6",cardName:"民生贷记卡(银联卡)",cardType:"贷记卡",belong:"民生银行"},622603:{length:"6",cardName:"民生银联商务信用卡",cardType:"贷记卡",belong:"民生银行"},464580:{length:"6",cardName:"民VISA无限卡",cardType:"贷记卡",belong:"民生银行"},464581:{length:"6",cardName:"民生VISA商务白金卡",cardType:"贷记卡",belong:"民生银行"},523952:{length:"6",cardName:"民生万事达钛金卡",cardType:"贷记卡",belong:"民生银行"},545217:{length:"6",cardName:"民生万事达世界卡",cardType:"贷记卡",belong:"民生银行"},553161:{length:"6",cardName:"民生万事达白金公务卡",cardType:"贷记卡",belong:"民生银行"},356858:{length:"6",cardName:"民生JCB白金卡",cardType:"贷记卡",belong:"民生银行"},622623:{length:"6",cardName:"银联标准金卡",cardType:"贷记卡",belong:"民生银行"},625911:{length:"6",cardName:"银联芯片普卡",cardType:"贷记卡",belong:"民生银行"},377152:{length:"6",cardName:"民生运通双币信用卡普卡",cardType:"贷记卡",belong:"民生银行"},377153:{length:"6",cardName:"民生运通双币信用卡金卡",cardType:"贷记卡",belong:"民生银行"},377158:{length:"6",cardName:"民生运通双币信用卡钻石卡",cardType:"贷记卡",belong:"民生银行"},377155:{length:"6",cardName:"民生运通双币标准信用卡白金卡",cardType:"贷记卡",belong:"民生银行"},625912:{length:"6",cardName:"银联芯片金卡",cardType:"贷记卡",belong:"民生银行"},625913:{length:"6",cardName:"银联芯片白金卡",cardType:"贷记卡",belong:"民生银行"},625188:{length:"6",cardName:"--",cardType:"贷记卡",belong:"民生银行"},406365:{length:"6",cardName:"广发VISA信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},406366:{length:"6",cardName:"广发VISA信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},428911:{length:"6",cardName:"广发信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},436768:{length:"6",cardName:"广发信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},436769:{length:"6",cardName:"广发信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},487013:{length:"6",cardName:"广发VISA信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},491032:{length:"6",cardName:"广发信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},491034:{length:"6",cardName:"广发信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},491035:{length:"6",cardName:"广发信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},491036:{length:"6",cardName:"广发信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},491037:{length:"6",cardName:"广发信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},491038:{length:"6",cardName:"广发信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},518364:{length:"6",cardName:"广发信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},520152:{length:"6",cardName:"广发万事达信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},520382:{length:"6",cardName:"广发万事达信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},548844:{length:"6",cardName:"广发信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},552794:{length:"6",cardName:"广发万事达信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},622555:{length:"6",cardName:"广发银联标准金卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},622556:{length:"6",cardName:"广发银联标准普卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},622557:{length:"6",cardName:"广发银联标准真情金卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},622558:{length:"6",cardName:"广发银联标准白金卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},622559:{length:"6",cardName:"广发银联标准真情普卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},622560:{length:"6",cardName:"广发真情白金卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},622568:{length:"6",cardName:"广发理财通卡",cardType:"借记卡",belong:"广发银行股份有限公司"},528931:{length:"6",cardName:"广发万事达信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},9111:{length:"4",cardName:"广发理财通(银联卡)",cardType:"借记卡",belong:"广发银行股份有限公司"},558894:{length:"6",cardName:"广发万事达信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},625072:{length:"6",cardName:"银联标准金卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},625071:{length:"6",cardName:"银联标准普卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},628260:{length:"6",cardName:"银联公务金卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},628259:{length:"6",cardName:"银联公务普卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},621462:{length:"6",cardName:"理财通卡",cardType:"借记卡",belong:"广发银行股份有限公司"},625805:{length:"6",cardName:"银联真情普卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},625806:{length:"6",cardName:"银联真情金卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},625807:{length:"6",cardName:"银联真情白金卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},625808:{length:"6",cardName:"银联标准普卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},625809:{length:"6",cardName:"银联标准金卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},625810:{length:"6",cardName:"银联标准白金卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},685800:{length:"6",cardName:"广发万事达信用卡",cardType:"贷记卡",belong:"广发银行股份有限公司"},620037:{length:"6",cardName:"广发青年银行预付卡",cardType:"预付费卡",belong:"广发银行股份有限公司"},6858000:{length:"7",cardName:"广发理财通",cardType:"贷记卡",belong:"广发银行股份有限公司"},6858001:{length:"7",cardName:"广发理财通",cardType:"借记卡",belong:"广发银行股份有限公司"},6858009:{length:"7",cardName:"广发理财通",cardType:"借记卡",belong:"广发银行股份有限公司"},623506:{length:"6",cardName:"广发财富管理多币IC卡",cardType:"借记卡",belong:"广发银行股份有限公司"},623259:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"广发银行股份有限公司"},412963:{length:"6",cardName:"发展借记卡",cardType:"借记卡",belong:"平安银行（借记卡）"},415752:{length:"6",cardName:"国际借记卡",cardType:"借记卡",belong:"平安银行（借记卡）"},415753:{length:"6",cardName:"国际借记卡",cardType:"借记卡",belong:"平安银行（借记卡）"},622538:{length:"6",cardName:"发展卡(银联卡)",cardType:"借记卡",belong:"平安银行（借记卡）"},998800:{length:"6",cardName:"发展借记卡(银联卡)",cardType:"借记卡",belong:"平安银行（借记卡）"},412962:{length:"6",cardName:"发展借记卡",cardType:"借记卡",belong:"平安银行（借记卡）"},620010:{length:"6",cardName:"公益预付卡",cardType:"预付费卡",belong:"平安银行（借记卡）"},622535:{length:"6",cardName:"聚财卡金卡",cardType:"借记卡",belong:"平安银行（借记卡）"},622536:{length:"6",cardName:"聚财卡VIP金卡",cardType:"借记卡",belong:"平安银行（借记卡）"},622539:{length:"6",cardName:"聚财卡白金卡和钻石卡",cardType:"借记卡",belong:"平安银行（借记卡）"},622983:{length:"6",cardName:"聚财卡钻石卡",cardType:"借记卡",belong:"平安银行（借记卡）"},356885:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},356886:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},356887:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},356888:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},356890:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},439188:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},439227:{length:"6",cardName:"VISA商务信用卡",cardType:"贷记卡",belong:"招商银行"},479229:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},521302:{length:"6",cardName:"世纪金花联名信用卡",cardType:"贷记卡",belong:"招商银行"},356889:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},552534:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},622575:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},622576:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},622581:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},690755:{length:"6",cardName:"招行一卡通",cardType:"借记卡",belong:"招商银行"},95555:{length:"5",cardName:"一卡通(银联卡)",cardType:"借记卡",belong:"招商银行"},628290:{length:"6",cardName:"IC公务卡",cardType:"贷记卡",belong:"招商银行"},622578:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},402658:{length:"6",cardName:"两地一卡通",cardType:"借记卡",belong:"招商银行"},410062:{length:"6",cardName:"招行国际卡(银联卡)",cardType:"借记卡",belong:"招商银行"},468203:{length:"6",cardName:"招行国际卡(银联卡)",cardType:"借记卡",belong:"招商银行"},479228:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},512425:{length:"6",cardName:"招行国际卡(银联卡)",cardType:"借记卡",belong:"招商银行"},524011:{length:"6",cardName:"招行国际卡(银联卡)",cardType:"借记卡",belong:"招商银行"},545619:{length:"6",cardName:"万事达信用卡",cardType:"贷记卡",belong:"招商银行"},545620:{length:"6",cardName:"万事达信用卡",cardType:"贷记卡",belong:"招商银行"},545621:{length:"6",cardName:"万事达信用卡",cardType:"贷记卡",belong:"招商银行"},545623:{length:"6",cardName:"万事达信用卡",cardType:"贷记卡",belong:"招商银行"},545947:{length:"6",cardName:"万事达信用卡",cardType:"贷记卡",belong:"招商银行"},545948:{length:"6",cardName:"万事达信用卡",cardType:"贷记卡",belong:"招商银行"},552587:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},620520:{length:"6",cardName:"电子现金卡",cardType:"预付费卡",belong:"招商银行"},621286:{length:"6",cardName:"金葵花卡",cardType:"借记卡",belong:"招商银行"},621483:{length:"6",cardName:"银联IC普卡",cardType:"借记卡",belong:"招商银行"},621485:{length:"6",cardName:"银联IC金卡",cardType:"借记卡",belong:"招商银行"},621486:{length:"6",cardName:"银联金葵花IC卡",cardType:"借记卡",belong:"招商银行"},622577:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},622579:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},622580:{length:"6",cardName:"一卡通(银联卡)",cardType:"借记卡",belong:"招商银行"},622582:{length:"6",cardName:"招商银行信用卡",cardType:"贷记卡",belong:"招商银行"},622588:{length:"6",cardName:"一卡通(银联卡)",cardType:"借记卡",belong:"招商银行"},622598:{length:"6",cardName:"公司卡(银联卡)",cardType:"借记卡",belong:"招商银行"},622609:{length:"6",cardName:"金卡",cardType:"借记卡",belong:"招商银行"},690755:{length:"6",cardName:"招行一卡通",cardType:"借记卡",belong:"招商银行"},623126:{length:"6",cardName:"招商银行钻石IC卡",cardType:"借记卡",belong:"招商银行"},623136:{length:"6",cardName:"招商银行私人银行IC卡",cardType:"借记卡",belong:"招商银行"},623262:{length:"6",cardName:"招商银行“公司一卡通”IC卡",cardType:"借记卡",belong:"招商银行"},370285:{length:"6",cardName:"美国运通绿卡",cardType:"贷记卡",belong:"招商银行信用卡中心"},370286:{length:"6",cardName:"美国运通金卡",cardType:"贷记卡",belong:"招商银行信用卡中心"},370287:{length:"6",cardName:"美国运通商务绿卡",cardType:"贷记卡",belong:"招商银行信用卡中心"},370289:{length:"6",cardName:"美国运通商务金卡",cardType:"贷记卡",belong:"招商银行信用卡中心"},439225:{length:"6",cardName:"VISA信用卡",cardType:"贷记卡",belong:"招商银行信用卡中心"},518710:{length:"6",cardName:"MASTER信用卡",cardType:"贷记卡",belong:"招商银行信用卡中心"},518718:{length:"6",cardName:"MASTER信用金卡",cardType:"贷记卡",belong:"招商银行信用卡中心"},628362:{length:"6",cardName:"银联标准公务卡(金卡)",cardType:"贷记卡",belong:"招商银行信用卡中心"},439226:{length:"6",cardName:"VISA信用卡",cardType:"贷记卡",belong:"招商银行信用卡中心"},628262:{length:"6",cardName:"银联标准财政公务卡",cardType:"贷记卡",belong:"招商银行信用卡中心"},625802:{length:"6",cardName:"芯片IC信用卡",cardType:"贷记卡",belong:"招商银行信用卡中心"},625803:{length:"6",cardName:"芯片IC信用卡",cardType:"贷记卡",belong:"招商银行信用卡中心"},621299:{length:"6",cardName:"香港一卡通",cardType:"借记卡",belong:"招商银行香港分行"},90592:{length:"5",cardName:"兴业卡",cardType:"借记卡",belong:"兴业银行"},966666:{length:"6",cardName:"兴业卡(银联卡)",cardType:"借记卡",belong:"兴业银行"},622909:{length:"6",cardName:"兴业卡(银联标准卡)",cardType:"借记卡",belong:"兴业银行"},622908:{length:"6",cardName:"兴业自然人生理财卡",cardType:"借记卡",belong:"兴业银行"},438588:{length:"6",cardName:"兴业智能卡(银联卡)",cardType:"借记卡",belong:"兴业银行"},438589:{length:"6",cardName:"兴业智能卡",cardType:"借记卡",belong:"兴业银行"},461982:{length:"6",cardName:"visa标准双币个人普卡",cardType:"贷记卡",belong:"兴业银行"},486493:{length:"6",cardName:"VISA商务普卡",cardType:"贷记卡",belong:"兴业银行"},486494:{length:"6",cardName:"VISA商务金卡",cardType:"贷记卡",belong:"兴业银行"},486861:{length:"6",cardName:"VISA运动白金信用卡",cardType:"贷记卡",belong:"兴业银行"},523036:{length:"6",cardName:"万事达信用卡(银联卡)",cardType:"贷记卡",belong:"兴业银行"},451289:{length:"6",cardName:"VISA信用卡(银联卡)",cardType:"贷记卡",belong:"兴业银行"},527414:{length:"6",cardName:"加菲猫信用卡",cardType:"贷记卡",belong:"兴业银行"},528057:{length:"6",cardName:"个人白金卡",cardType:"贷记卡",belong:"兴业银行"},622901:{length:"6",cardName:"银联信用卡(银联卡)",cardType:"贷记卡",belong:"兴业银行"},622902:{length:"6",cardName:"银联信用卡(银联卡)",cardType:"贷记卡",belong:"兴业银行"},622922:{length:"6",cardName:"银联白金信用卡",cardType:"贷记卡",belong:"兴业银行"},628212:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"兴业银行"},451290:{length:"6",cardName:"VISA信用卡(银联卡)",cardType:"贷记卡",belong:"兴业银行"},524070:{length:"6",cardName:"万事达信用卡(银联卡)",cardType:"贷记卡",belong:"兴业银行"},625084:{length:"6",cardName:"银联标准贷记普卡",cardType:"贷记卡",belong:"兴业银行"},625085:{length:"6",cardName:"银联标准贷记金卡",cardType:"贷记卡",belong:"兴业银行"},625086:{length:"6",cardName:"银联标准贷记金卡",cardType:"贷记卡",belong:"兴业银行"},625087:{length:"6",cardName:"银联标准贷记金卡",cardType:"贷记卡",belong:"兴业银行"},548738:{length:"6",cardName:"兴业信用卡",cardType:"贷记卡",belong:"兴业银行"},549633:{length:"6",cardName:"兴业信用卡",cardType:"贷记卡",belong:"兴业银行"},552398:{length:"6",cardName:"兴业信用卡",cardType:"贷记卡",belong:"兴业银行"},625082:{length:"6",cardName:"银联标准贷记普卡",cardType:"贷记卡",belong:"兴业银行"},625083:{length:"6",cardName:"银联标准贷记普卡",cardType:"贷记卡",belong:"兴业银行"},625960:{length:"6",cardName:"兴业芯片普卡",cardType:"贷记卡",belong:"兴业银行"},625961:{length:"6",cardName:"兴业芯片金卡",cardType:"贷记卡",belong:"兴业银行"},625962:{length:"6",cardName:"兴业芯片白金卡",cardType:"贷记卡",belong:"兴业银行"},625963:{length:"6",cardName:"兴业芯片钻石卡",cardType:"贷记卡",belong:"兴业银行"},625353:{length:"6",cardName:"--",cardType:"贷记卡",belong:"兴业银行"},625356:{length:"6",cardName:"--",cardType:"贷记卡",belong:"兴业银行"},622571:{length:"6",cardName:"--",cardType:"贷记卡",belong:"兴业银行"},622572:{length:"6",cardName:"--",cardType:"贷记卡",belong:"兴业银行"},622573:{length:"6",cardName:"--",cardType:"贷记卡",belong:"兴业银行"},622591:{length:"6",cardName:"--",cardType:"贷记卡",belong:"兴业银行"},622592:{length:"6",cardName:"--",cardType:"贷记卡",belong:"兴业银行"},622593:{length:"6",cardName:"--",cardType:"贷记卡",belong:"兴业银行"},356851:{length:"6",cardName:"浦发JCB金卡",cardType:"贷记卡",belong:"浦东发展银行"},356852:{length:"6",cardName:"浦发JCB白金卡",cardType:"贷记卡",belong:"浦东发展银行"},404738:{length:"6",cardName:"信用卡VISA普通",cardType:"贷记卡",belong:"浦东发展银行"},404739:{length:"6",cardName:"信用卡VISA金卡",cardType:"贷记卡",belong:"浦东发展银行"},456418:{length:"6",cardName:"浦发银行VISA年青卡",cardType:"贷记卡",belong:"浦东发展银行"},498451:{length:"6",cardName:"VISA白金信用卡",cardType:"贷记卡",belong:"浦东发展银行"},515672:{length:"6",cardName:"浦发万事达白金卡",cardType:"贷记卡",belong:"浦东发展银行"},356850:{length:"6",cardName:"浦发JCB普卡",cardType:"贷记卡",belong:"浦东发展银行"},517650:{length:"6",cardName:"浦发万事达金卡",cardType:"贷记卡",belong:"浦东发展银行"},525998:{length:"6",cardName:"浦发万事达普卡",cardType:"贷记卡",belong:"浦东发展银行"},622177:{length:"6",cardName:"浦发单币卡",cardType:"贷记卡",belong:"浦东发展银行"},622277:{length:"6",cardName:"浦发银联单币麦兜普卡",cardType:"贷记卡",belong:"浦东发展银行"},622516:{length:"6",cardName:"东方轻松理财卡",cardType:"借记卡",belong:"浦东发展银行"},622517:{length:"6",cardName:"东方-轻松理财卡普卡",cardType:"借记卡",belong:"浦东发展银行"},622518:{length:"6",cardName:"东方轻松理财卡",cardType:"借记卡",belong:"浦东发展银行"},622520:{length:"6",cardName:"东方轻松理财智业金卡",cardType:"准贷记卡",belong:"浦东发展银行"},622521:{length:"6",cardName:"东方卡(银联卡)",cardType:"借记卡",belong:"浦东发展银行"},622522:{length:"6",cardName:"东方卡(银联卡)",cardType:"借记卡",belong:"浦东发展银行"},622523:{length:"6",cardName:"东方卡(银联卡)",cardType:"借记卡",belong:"浦东发展银行"},628222:{length:"6",cardName:"公务卡金卡",cardType:"贷记卡",belong:"浦东发展银行"},84301:{length:"5",cardName:"东方卡",cardType:"借记卡",belong:"浦东发展银行"},84336:{length:"5",cardName:"东方卡",cardType:"借记卡",belong:"浦东发展银行"},84373:{length:"5",cardName:"东方卡",cardType:"借记卡",belong:"浦东发展银行"},628221:{length:"6",cardName:"公务卡普卡",cardType:"贷记卡",belong:"浦东发展银行"},84390:{length:"5",cardName:"东方卡",cardType:"借记卡",belong:"浦东发展银行"},87000:{length:"5",cardName:"东方卡",cardType:"借记卡",belong:"浦东发展银行"},87010:{length:"5",cardName:"东方卡",cardType:"借记卡",belong:"浦东发展银行"},87030:{length:"5",cardName:"东方卡",cardType:"借记卡",belong:"浦东发展银行"},87040:{length:"5",cardName:"东方卡",cardType:"借记卡",belong:"浦东发展银行"},84380:{length:"5",cardName:"东方卡",cardType:"借记卡",belong:"浦东发展银行"},984301:{length:"6",cardName:"东方卡",cardType:"借记卡",belong:"浦东发展银行"},984303:{length:"6",cardName:"东方卡",cardType:"借记卡",belong:"浦东发展银行"},84361:{length:"5",cardName:"东方卡",cardType:"借记卡",belong:"浦东发展银行"},87050:{length:"5",cardName:"东方卡",cardType:"借记卡",belong:"浦东发展银行"},622176:{length:"6",cardName:"浦发单币卡",cardType:"贷记卡",belong:"浦东发展银行"},622276:{length:"6",cardName:"浦发联名信用卡",cardType:"贷记卡",belong:"浦东发展银行"},622228:{length:"6",cardName:"浦发银联白金卡",cardType:"贷记卡",belong:"浦东发展银行"},621351:{length:"6",cardName:"移动联名卡",cardType:"借记卡",belong:"浦东发展银行"},621390:{length:"6",cardName:"轻松理财消贷易卡",cardType:"借记卡",belong:"浦东发展银行"},621792:{length:"6",cardName:"轻松理财普卡（复合卡）",cardType:"借记卡",belong:"浦东发展银行"},625957:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"浦东发展银行"},625958:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"浦东发展银行"},621791:{length:"6",cardName:"东方借记卡（复合卡）",cardType:"借记卡",belong:"浦东发展银行"},84342:{length:"5",cardName:"东方卡",cardType:"借记卡",belong:"浦东发展银行"},620530:{length:"6",cardName:"电子现金卡（IC卡）",cardType:"预付费卡",belong:"浦东发展银行"},625993:{length:"6",cardName:"移动浦发联名卡",cardType:"贷记卡",belong:"浦东发展银行"},622519:{length:"6",cardName:"东方-标准准贷记卡",cardType:"准贷记卡",belong:"浦东发展银行"},621793:{length:"6",cardName:"轻松理财金卡（复合卡）",cardType:"借记卡",belong:"浦东发展银行"},621795:{length:"6",cardName:"轻松理财白金卡（复合卡）",cardType:"借记卡",belong:"浦东发展银行"},621796:{length:"6",cardName:"轻松理财钻石卡（复合卡）",cardType:"借记卡",belong:"浦东发展银行"},622500:{length:"6",cardName:"东方卡",cardType:"贷记卡",belong:"浦东发展银行"},623250:{length:"6",cardName:"轻松理财米卡（复合卡）",cardType:"借记卡",belong:"浦东发展银行"},621352:{length:"6",cardName:"轻松理财普卡",cardType:"借记卡",belong:"浦东发展银行"},84385:{length:"5",cardName:"东方卡",cardType:"借记卡",belong:"浦东发展银行"},623078:{length:"6",cardName:"九州IC卡",cardType:"借记卡",belong:"恒丰银行"},622384:{length:"6",cardName:"九州借记卡(银联卡)",cardType:"借记卡",belong:"恒丰银行"},940034:{length:"6",cardName:"九州借记卡(银联卡)",cardType:"借记卡",belong:"恒丰银行"},6091201:{length:"7",cardName:"津卡",cardType:"借记卡",belong:"天津市商业银行"},940015:{length:"6",cardName:"银联卡(银联卡)",cardType:"借记卡",belong:"天津市商业银行"},940008:{length:"6",cardName:"齐鲁卡(银联卡)",cardType:"借记卡",belong:"齐鲁银行股份有限公司"},622379:{length:"6",cardName:"齐鲁卡(银联卡)",cardType:"借记卡",belong:"齐鲁银行股份有限公司"},622886:{length:"6",cardName:"金通卡",cardType:"借记卡",belong:"烟台商业银行"},622391:{length:"6",cardName:"鸢都卡(银联卡)",cardType:"借记卡",belong:"潍坊银行"},940072:{length:"6",cardName:"鸳都卡(银联卡)",cardType:"借记卡",belong:"潍坊银行"},622359:{length:"6",cardName:"沂蒙卡(银联卡)",cardType:"借记卡",belong:"临沂商业银行"},940066:{length:"6",cardName:"沂蒙卡(银联卡)",cardType:"借记卡",belong:"临沂商业银行"},622857:{length:"6",cardName:"黄海卡",cardType:"借记卡",belong:"日照市商业银行"},940065:{length:"6",cardName:"黄海卡(银联卡)",cardType:"借记卡",belong:"日照市商业银行"},621019:{length:"6",cardName:"商卡",cardType:"借记卡",belong:"浙商银行"},622309:{length:"6",cardName:"商卡",cardType:"借记卡",belong:"浙商银行"},625821:{length:"6",cardName:"--",cardType:"贷记卡",belong:"浙商银行"},6223091100:{length:"10",cardName:"商卡",cardType:"借记卡",belong:"浙商银行天津分行"},6223092900:{length:"10",cardName:"商卡",cardType:"借记卡",belong:"浙商银行上海分行"},6223093310:{length:"10",cardName:"商卡(银联卡)",cardType:"借记卡",belong:"浙商银行营业部"},6223093320:{length:"10",cardName:"商卡(银联卡)",cardType:"借记卡",belong:"浙商银行宁波分行"},6223093330:{length:"10",cardName:"商卡(银联卡)",cardType:"借记卡",belong:"浙商银行温州分行"},6223093370:{length:"10",cardName:"商卡",cardType:"借记卡",belong:"浙商银行绍兴分行"},6223093380:{length:"10",cardName:"商卡(银联卡)",cardType:"借记卡",belong:"浙商银行义乌分行"},6223096510:{length:"10",cardName:"商卡(银联卡)",cardType:"借记卡",belong:"浙商银行成都分行"},6223097910:{length:"10",cardName:"商卡",cardType:"借记卡",belong:"浙商银行西安分行"},621268:{length:"6",cardName:"浩瀚金卡",cardType:"借记卡",belong:"渤海银行"},622884:{length:"6",cardName:"渤海银行借记卡",cardType:"借记卡",belong:"渤海银行"},621453:{length:"6",cardName:"金融IC卡",cardType:"借记卡",belong:"渤海银行"},622684:{length:"6",cardName:"渤海银行公司借记卡",cardType:"借记卡",belong:"渤海银行"},625122:{length:"6",cardName:"渤海银行信用卡",cardType:"贷记卡",belong:"渤海银行股份有限公司"},623269:{length:"6",cardName:"--",cardType:"借记卡",belong:"平安银行"},621062:{length:"6",cardName:"借记卡普卡",cardType:"借记卡",belong:"花旗银行(中国)有限公司"},621063:{length:"6",cardName:"借记卡高端卡",cardType:"借记卡",belong:"花旗银行(中国)有限公司"},625076:{length:"6",cardName:"花旗礼享卡",cardType:"贷记卡",belong:"花旗中国"},625077:{length:"6",cardName:"花旗礼享卡",cardType:"贷记卡",belong:"花旗中国"},625074:{length:"6",cardName:"花旗礼享卡",cardType:"贷记卡",belong:"花旗中国"},625075:{length:"6",cardName:"花旗礼享卡",cardType:"贷记卡",belong:"花旗中国"},622933:{length:"6",cardName:"紫荆卡",cardType:"借记卡",belong:"东亚银行中国有限公司"},622938:{length:"6",cardName:"显卓理财卡",cardType:"借记卡",belong:"东亚银行中国有限公司"},623031:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"东亚银行中国有限公司"},622946:{length:"6",cardName:"汇丰中国卓越理财卡",cardType:"借记卡",belong:"汇丰银(中国)有限公司"},622942:{length:"6",cardName:"渣打银行智通借记卡",cardType:"借记卡",belong:"渣打银行中国有限公司"},622994:{length:"6",cardName:"渣打银行白金借记卡",cardType:"借记卡",belong:"渣打银行中国有限公司"},622583:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"渣打银行(中国)"},622584:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"渣打银行(中国)"},621016:{length:"6",cardName:"星展银行借记卡",cardType:"借记卡",belong:"星展银行"},621015:{length:"6",cardName:"星展银行借记卡",cardType:"借记卡",belong:"星展银行"},623187:{length:"6",cardName:"星展卡",cardType:"借记卡",belong:"星展银行"},622950:{length:"6",cardName:"恒生通财卡",cardType:"借记卡",belong:"恒生银行"},622951:{length:"6",cardName:"恒生优越通财卡",cardType:"借记卡",belong:"恒生银行"},621060:{length:"6",cardName:"友利借记卡",cardType:"借记卡",belong:"友利银行(中国)有限公司"},623551:{length:"6",cardName:"友利借记卡",cardType:"借记卡",belong:"友利银行(中国)有限公司"},621072:{length:"6",cardName:"新韩卡",cardType:"借记卡",belong:"新韩银行"},623630:{length:"6",cardName:"--",cardType:"借记卡",belong:"新韩银行"},621201:{length:"6",cardName:"韩亚卡",cardType:"借记卡",belong:"韩亚银行（中国）"},623513:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"韩亚银行（中国）"},621077:{length:"6",cardName:"卓锦借记卡",cardType:"借记卡",belong:"华侨银行（中国）"},621298:{length:"6",cardName:"永亨卡",cardType:"借记卡",belong:"永亨银行（中国）有限公司"},621213:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"南洋商业银行（中国）"},621289:{length:"6",cardName:"财互通卡",cardType:"借记卡",belong:"南洋商业银行（中国）"},621290:{length:"6",cardName:"财互通卡",cardType:"借记卡",belong:"南洋商业银行（中国）"},621291:{length:"6",cardName:"财互通卡",cardType:"借记卡",belong:"南洋商业银行（中国）"},621292:{length:"6",cardName:"财互通卡",cardType:"借记卡",belong:"南洋商业银行（中国）"},623555:{length:"6",cardName:"--",cardType:"借记卡",belong:"南洋商业银行（中国）"},621245:{length:"6",cardName:"法兴标准借记卡",cardType:"借记卡",belong:"法国兴业银行（中国）"},621328:{length:"6",cardName:"尊享理财卡",cardType:"借记卡",belong:"大华银行（中国）"},623176:{length:"6",cardName:"大华银行尊享借记卡",cardType:"借记卡",belong:"大华银行（中国）"},621277:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"大新银行（中国）"},621651:{length:"6",cardName:"瑞卡",cardType:"借记卡",belong:"企业银行（中国）"},62326516:{length:"8",cardName:"--",cardType:"借记卡",belong:"企业银行（中国）"},623163:{length:"6",cardName:"--",cardType:"借记卡",belong:"华商银行"},623526:{length:"6",cardName:"住储卡",cardType:"借记卡",belong:"中德住房储蓄银行"},623565:{length:"6",cardName:"富邦华一银行借记卡",cardType:"借记卡",belong:"富邦华一银行"},623633:{length:"6",cardName:"--",cardType:"借记卡",belong:"深圳前海微众银行"},623616:{length:"6",cardName:"金城卡",cardType:"借记卡",belong:"天津金城银行"},623622:{length:"6",cardName:"--",cardType:"借记卡",belong:"上海华瑞银行股份有限公司"},623632:{length:"6",cardName:"民商卡",cardType:"借记卡",belong:"温州民商"},623183:{length:"6",cardName:"慧通钻石卡",cardType:"借记卡",belong:"上海银行"},623185:{length:"6",cardName:"慧通金卡",cardType:"借记卡",belong:"上海银行"},621005:{length:"6",cardName:"私人银行卡",cardType:"借记卡",belong:"上海银行"},622172:{length:"6",cardName:"综合保险卡",cardType:"借记卡",belong:"上海银行"},622985:{length:"6",cardName:"申卡社保副卡(有折)",cardType:"借记卡",belong:"上海银行"},622987:{length:"6",cardName:"申卡社保副卡(无折)",cardType:"借记卡",belong:"上海银行"},622267:{length:"6",cardName:"白金IC借记卡",cardType:"借记卡",belong:"上海银行"},622278:{length:"6",cardName:"慧通白金卡(配折)",cardType:"借记卡",belong:"上海银行"},622279:{length:"6",cardName:"慧通白金卡(不配折)",cardType:"借记卡",belong:"上海银行"},622468:{length:"6",cardName:"申卡(银联卡)",cardType:"借记卡",belong:"上海银行"},622892:{length:"6",cardName:"申卡借记卡",cardType:"借记卡",belong:"上海银行"},940021:{length:"6",cardName:"银联申卡(银联卡)",cardType:"借记卡",belong:"上海银行"},621050:{length:"6",cardName:"单位借记卡",cardType:"借记卡",belong:"上海银行"},620522:{length:"6",cardName:"首发纪念版IC卡",cardType:"借记卡",belong:"上海银行"},621243:{length:"6",cardName:"单位卡",cardType:"借记卡",belong:"上海银行"},356827:{length:"6",cardName:"申卡贷记卡",cardType:"贷记卡",belong:"上海银行"},356828:{length:"6",cardName:"申卡贷记卡",cardType:"贷记卡",belong:"上海银行"},356830:{length:"6",cardName:"J分期付款信用卡",cardType:"贷记卡",belong:"上海银行"},402673:{length:"6",cardName:"申卡贷记卡",cardType:"贷记卡",belong:"上海银行"},402674:{length:"6",cardName:"申卡贷记卡",cardType:"贷记卡",belong:"上海银行"},438600:{length:"6",cardName:"上海申卡IC",cardType:"借记卡",belong:"上海银行"},486466:{length:"6",cardName:"申卡贷记卡",cardType:"贷记卡",belong:"上海银行"},519498:{length:"6",cardName:"申卡贷记卡普通卡",cardType:"贷记卡",belong:"上海银行"},520131:{length:"6",cardName:"申卡贷记卡金卡",cardType:"贷记卡",belong:"上海银行"},524031:{length:"6",cardName:"万事达白金卡",cardType:"贷记卡",belong:"上海银行"},548838:{length:"6",cardName:"万事达星运卡",cardType:"贷记卡",belong:"上海银行"},622148:{length:"6",cardName:"申卡贷记卡金卡",cardType:"贷记卡",belong:"上海银行"},622149:{length:"6",cardName:"申卡贷记卡普通卡",cardType:"贷记卡",belong:"上海银行"},622268:{length:"6",cardName:"安融卡",cardType:"贷记卡",belong:"上海银行"},356829:{length:"6",cardName:"分期付款信用卡",cardType:"贷记卡",belong:"上海银行"},622300:{length:"6",cardName:"信用卡",cardType:"贷记卡",belong:"上海银行"},628230:{length:"6",cardName:"个人公务卡",cardType:"贷记卡",belong:"上海银行"},622269:{length:"6",cardName:"安融卡",cardType:"贷记卡",belong:"上海银行"},625099:{length:"6",cardName:"上海银行银联白金卡",cardType:"贷记卡",belong:"上海银行"},625953:{length:"6",cardName:"贷记IC卡",cardType:"贷记卡",belong:"上海银行"},625350:{length:"6",cardName:"中国旅游卡（IC普卡）",cardType:"贷记卡",belong:"上海银行"},625351:{length:"6",cardName:"中国旅游卡（IC金卡）",cardType:"贷记卡",belong:"上海银行"},625352:{length:"6",cardName:"中国旅游卡（IC白金卡）",cardType:"贷记卡",belong:"上海银行"},519961:{length:"6",cardName:"万事达钻石卡",cardType:"贷记卡",belong:"上海银行"},625839:{length:"6",cardName:"淘宝IC普卡",cardType:"贷记卡",belong:"上海银行"},625180:{length:"6",cardName:"钻石卡",cardType:"贷记卡",belong:"上海银行"},622393:{length:"6",cardName:"银鹭借记卡(银联卡)",cardType:"借记卡",belong:"厦门银行股份有限公司"},6886592:{length:"7",cardName:"银鹭卡",cardType:"借记卡",belong:"厦门银行股份有限公司"},940023:{length:"6",cardName:"银联卡(银联卡)",cardType:"借记卡",belong:"厦门银行股份有限公司"},623019:{length:"6",cardName:"凤凰花卡",cardType:"借记卡",belong:"厦门银行股份有限公司"},621600:{length:"6",cardName:"凤凰花卡",cardType:"借记卡",belong:"厦门银行股份有限公司"},421317:{length:"6",cardName:"京卡借记卡",cardType:"借记卡",belong:"北京银行"},602969:{length:"6",cardName:"京卡(银联卡)",cardType:"借记卡",belong:"北京银行"},621030:{length:"6",cardName:"京卡借记卡",cardType:"借记卡",belong:"北京银行"},621420:{length:"6",cardName:"京卡",cardType:"借记卡",belong:"北京银行"},621468:{length:"6",cardName:"京卡",cardType:"借记卡",belong:"北京银行"},623111:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"北京银行"},422160:{length:"6",cardName:"京卡贵宾金卡",cardType:"借记卡",belong:"北京银行"},422161:{length:"6",cardName:"京卡贵宾白金卡",cardType:"借记卡",belong:"北京银行"},623561:{length:"6",cardName:"北京银行借记卡",cardType:"借记卡",belong:"北京银行"},623533:{length:"6",cardName:"--",cardType:"借记卡",belong:"烟台市商业银行"},622388:{length:"6",cardName:"榕城卡(银联卡)",cardType:"借记卡",belong:"福建海峡银行股份有限公司"},621267:{length:"6",cardName:"福州市民卡",cardType:"借记卡",belong:"福建海峡银行股份有限公司"},620043:{length:"6",cardName:"福州市民卡",cardType:"预付费卡",belong:"福建海峡银行股份有限公司"},623063:{length:"6",cardName:"海福卡（IC卡）",cardType:"借记卡",belong:"福建海峡银行股份有限公司"},621664:{length:"6",cardName:"--",cardType:"借记卡",belong:"福建海峡银行股份有限公司"},628360:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"福建海峡银行"},622695:{length:"6",cardName:"信用卡",cardType:"贷记卡",belong:"福建海峡银行"},622865:{length:"6",cardName:"君子兰一卡通(银联卡)",cardType:"借记卡",belong:"吉林银行"},940012:{length:"6",cardName:"君子兰卡(银联卡)",cardType:"借记卡",belong:"吉林银行"},622178:{length:"6",cardName:"信用卡",cardType:"贷记卡",belong:"吉林银行"},622179:{length:"6",cardName:"信用卡",cardType:"贷记卡",belong:"吉林银行"},628358:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"吉林银行"},623131:{length:"6",cardName:"长白山金融IC卡",cardType:"借记卡",belong:"吉林银行"},622394:{length:"6",cardName:"金山灵通卡(银联卡)",cardType:"借记卡",belong:"镇江市商业银行"},940025:{length:"6",cardName:"金山灵通卡(银联卡)",cardType:"借记卡",belong:"镇江市商业银行"},621279:{length:"6",cardName:"银联标准卡",cardType:"借记卡",belong:"宁波银行"},622281:{length:"6",cardName:"汇通借记卡",cardType:"借记卡",belong:"宁波银行"},622316:{length:"6",cardName:"汇通卡(银联卡)",cardType:"借记卡",belong:"宁波银行"},940022:{length:"6",cardName:"明州卡",cardType:"借记卡",belong:"宁波银行"},621418:{length:"6",cardName:"汇通借记卡",cardType:"借记卡",belong:"宁波银行"},620533:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"宁波银行"},623252:{length:"6",cardName:"——",cardType:"借记卡",belong:"宁波银行"},512431:{length:"6",cardName:"汇通国际卡银联双币卡",cardType:"贷记卡",belong:"宁波银行"},520194:{length:"6",cardName:"汇通国际卡银联双币卡",cardType:"贷记卡",belong:"宁波银行"},621626:{length:"6",cardName:"新磁条借记卡",cardType:"借记卡",belong:"平安银行"},623058:{length:"6",cardName:"平安银行IC借记卡",cardType:"借记卡",belong:"平安银行"},602907:{length:"6",cardName:"万事顺卡",cardType:"借记卡",belong:"平安银行"},622986:{length:"6",cardName:"平安银行借记卡",cardType:"借记卡",belong:"平安银行"},622989:{length:"6",cardName:"平安银行借记卡",cardType:"借记卡",belong:"平安银行"},622298:{length:"6",cardName:"万事顺借记卡",cardType:"借记卡",belong:"平安银行"},622338:{length:"6",cardName:"月季借记卡(银联卡)",cardType:"借记卡",belong:"焦作中旅银行"},940032:{length:"6",cardName:"月季城市通(银联卡)",cardType:"借记卡",belong:"焦作中旅银行"},623205:{length:"6",cardName:"中国旅游卡",cardType:"借记卡",belong:"焦作中旅银行"},623511:{length:"6",cardName:"--",cardType:"借记卡",belong:"焦作中旅银行"},621977:{length:"6",cardName:"金鹿卡",cardType:"借记卡",belong:"温州银行"},623112:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"温州银行"},623578:{length:"6",cardName:"--",cardType:"借记卡",belong:"温州银行"},603445:{length:"6",cardName:"羊城借记卡",cardType:"借记卡",belong:"广州银行股份有限公司"},622467:{length:"6",cardName:"羊城借记卡(银联卡)",cardType:"借记卡",belong:"广州银行股份有限公司"},940016:{length:"6",cardName:"羊城借记卡(银联卡)",cardType:"借记卡",belong:"广州银行股份有限公司"},621463:{length:"6",cardName:"金融IC借记卡",cardType:"借记卡",belong:"广州银行股份有限公司"},990027:{length:"6",cardName:"九通卡(银联卡)",cardType:"借记卡",belong:"汉口银行"},622325:{length:"6",cardName:"九通卡",cardType:"借记卡",belong:"汉口银行"},623029:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"汉口银行"},623105:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"汉口银行"},62326510:{length:"8",cardName:"九通汇融通卡",cardType:"借记卡",belong:"汉口银行"},622475:{length:"6",cardName:"金鹤卡",cardType:"借记卡",belong:"龙江银行股份有限公司"},621244:{length:"6",cardName:"玫瑰卡",cardType:"借记卡",belong:"盛京银行"},623081:{length:"6",cardName:"玫瑰IC卡",cardType:"借记卡",belong:"盛京银行"},623108:{length:"6",cardName:"玫瑰IC卡",cardType:"借记卡",belong:"盛京银行"},566666:{length:"6",cardName:"玫瑰卡",cardType:"借记卡",belong:"盛京银行"},622455:{length:"6",cardName:"玫瑰卡",cardType:"借记卡",belong:"盛京银行"},940039:{length:"6",cardName:"玫瑰卡(银联卡)",cardType:"借记卡",belong:"盛京银行"},622955:{length:"6",cardName:"医保卡",cardType:"借记卡",belong:"盛京银行"},622466:{length:"6",cardName:"玫瑰卡(银联卡)",cardType:"贷记卡",belong:"盛京银行"},628285:{length:"6",cardName:"盛京银行公务卡",cardType:"贷记卡",belong:"盛京银行"},940041:{length:"6",cardName:"都市一卡通(银联卡)",cardType:"借记卡",belong:"洛阳银行"},622420:{length:"6",cardName:"都市一卡通(银联卡)",cardType:"借记卡",belong:"洛阳银行"},623118:{length:"6",cardName:"--",cardType:"借记卡",belong:"洛阳银行"},622399:{length:"6",cardName:"新兴卡(银联卡)",cardType:"借记卡",belong:"辽阳银行股份有限公司"},940043:{length:"6",cardName:"新兴卡(银联卡)",cardType:"借记卡",belong:"辽阳银行股份有限公司"},628309:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"辽阳银行股份有限公司"},623151:{length:"6",cardName:"新兴卡",cardType:"借记卡",belong:"辽阳银行股份有限公司"},603708:{length:"6",cardName:"北方明珠卡",cardType:"借记卡",belong:"大连银行"},622993:{length:"6",cardName:"人民币借记卡",cardType:"借记卡",belong:"大连银行"},623070:{length:"6",cardName:"金融IC借记卡",cardType:"借记卡",belong:"大连银行"},623069:{length:"6",cardName:"大连市社会保障卡",cardType:"借记卡",belong:"大连银行"},623172:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"大连银行"},623173:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"大连银行"},622383:{length:"6",cardName:"大连市商业银行贷记卡",cardType:"贷记卡",belong:"大连银行"},622385:{length:"6",cardName:"大连市商业银行贷记卡",cardType:"贷记卡",belong:"大连银行"},628299:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"大连银行"},603506:{length:"6",cardName:"姑苏卡",cardType:"借记卡",belong:"苏州市商业银行"},622498:{length:"6",cardName:"如意借记卡(银联卡)",cardType:"借记卡",belong:"河北银行股份有限公司"},622499:{length:"6",cardName:"如意借记卡(银联卡)",cardType:"借记卡",belong:"河北银行股份有限公司"},940046:{length:"6",cardName:"如意卡(银联卡)",cardType:"借记卡",belong:"河北银行股份有限公司"},623000:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"河北银行股份有限公司"},623582:{length:"6",cardName:"--",cardType:"借记卡",belong:"河北银行"},603367:{length:"6",cardName:"西湖卡",cardType:"借记卡",belong:"杭州商业银行"},622878:{length:"6",cardName:"西湖卡",cardType:"借记卡",belong:"杭州商业银行"},623061:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"杭州商业银行"},623209:{length:"6",cardName:"",cardType:"借记卡",belong:"杭州商业银行"},62326513:{length:"8",cardName:"单位结算卡IC卡",cardType:"借记卡",belong:"杭州商业银行"},62326527:{length:"8",cardName:"单位结算卡IC卡",cardType:"借记卡",belong:"杭州商业银行"},628242:{length:"6",cardName:"梅花信用卡公务卡",cardType:"贷记卡",belong:"南京银行"},622595:{length:"6",cardName:"梅花信用卡商务卡",cardType:"贷记卡",belong:"南京银行"},622303:{length:"6",cardName:"梅花贷记卡(银联卡)",cardType:"贷记卡",belong:"南京银行"},622305:{length:"6",cardName:"梅花借记卡(银联卡)",cardType:"借记卡",belong:"南京银行"},621259:{length:"6",cardName:"白金卡",cardType:"借记卡",belong:"南京银行"},622596:{length:"6",cardName:"商务卡",cardType:"贷记卡",belong:"南京银行"},622333:{length:"6",cardName:"万顺通卡(银联卡)",cardType:"借记卡",belong:"东莞市商业银行"},940050:{length:"6",cardName:"万顺通卡(银联卡)",cardType:"借记卡",belong:"东莞市商业银行"},621439:{length:"6",cardName:"万顺通借记卡",cardType:"借记卡",belong:"东莞市商业银行"},623010:{length:"6",cardName:"社会保障卡",cardType:"借记卡",belong:"东莞市商业银行"},940051:{length:"6",cardName:"双龙卡(银联卡)",cardType:"借记卡",belong:"金华银行股份有限公司"},628204:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"金华银行股份有限公司"},622449:{length:"6",cardName:"双龙借记卡",cardType:"借记卡",belong:"金华银行股份有限公司"},623067:{length:"6",cardName:"双龙社保卡",cardType:"借记卡",belong:"金华银行股份有限公司"},622450:{length:"6",cardName:"双龙贷记卡(银联卡)",cardType:"贷记卡",belong:"金华银行股份有限公司"},621751:{length:"6",cardName:"雪莲借记IC卡",cardType:"借记卡",belong:"乌鲁木齐市商业银行"},628278:{length:"6",cardName:"乌鲁木齐市公务卡",cardType:"贷记卡",belong:"乌鲁木齐市商业银行"},625502:{length:"6",cardName:"福农卡贷记卡",cardType:"贷记卡",belong:"乌鲁木齐市商业银行"},625503:{length:"6",cardName:"福农卡准贷记卡",cardType:"准贷记卡",belong:"乌鲁木齐市商业银行"},625135:{length:"6",cardName:"雪莲准贷记卡",cardType:"准贷记卡",belong:"乌鲁木齐市商业银行"},622476:{length:"6",cardName:"雪莲贷记卡(银联卡)",cardType:"贷记卡",belong:"乌鲁木齐市商业银行"},625155:{length:"6",cardName:"雪莲贷记IC卡",cardType:"贷记卡",belong:"乌鲁木齐市商业银行"},621754:{length:"6",cardName:"雪莲借记IC卡",cardType:"借记卡",belong:"乌鲁木齐市商业银行"},622143:{length:"6",cardName:"雪莲借记卡(银联卡)",cardType:"借记卡",belong:"乌鲁木齐市商业银行"},940001:{length:"6",cardName:"雪莲卡(银联卡)",cardType:"借记卡",belong:"乌鲁木齐市商业银行"},622486:{length:"6",cardName:"兰花卡(银联卡)",cardType:"借记卡",belong:"绍兴银行股份有限公司"},603602:{length:"6",cardName:"兰花卡",cardType:"借记卡",belong:"绍兴银行股份有限公司"},623026:{length:"6",cardName:"兰花IC借记卡",cardType:"借记卡",belong:"绍兴银行"},623086:{length:"6",cardName:"社保IC借记卡",cardType:"借记卡",belong:"绍兴银行"},628291:{length:"6",cardName:"兰花公务卡",cardType:"贷记卡",belong:"绍兴银行"},621532:{length:"6",cardName:"芙蓉锦程福农卡",cardType:"借记卡",belong:"成都商业银行"},621482:{length:"6",cardName:"芙蓉锦程天府通卡",cardType:"借记卡",belong:"成都商业银行"},622135:{length:"6",cardName:"锦程卡(银联卡)",cardType:"借记卡",belong:"成都商业银行"},622152:{length:"6",cardName:"锦程卡金卡",cardType:"借记卡",belong:"成都商业银行"},622153:{length:"6",cardName:"锦程卡定活一卡通金卡",cardType:"借记卡",belong:"成都商业银行"},622154:{length:"6",cardName:"锦程卡定活一卡通",cardType:"借记卡",belong:"成都商业银行"},622996:{length:"6",cardName:"锦程力诚联名卡",cardType:"借记卡",belong:"成都商业银行"},622997:{length:"6",cardName:"锦程力诚联名卡",cardType:"借记卡",belong:"成都商业银行"},940027:{length:"6",cardName:"锦程卡(银联卡)",cardType:"借记卡",belong:"成都商业银行"},940053:{length:"6",cardName:"绿叶卡(银联卡)",cardType:"借记卡",belong:"抚顺银行股份有限公司"},622442:{length:"6",cardName:"绿叶卡(银联卡)",cardType:"借记卡",belong:"抚顺银行股份有限公司"},622442:{length:"6",cardName:"启运卡",cardType:"借记卡",belong:"抚顺银行股份有限公司"},623099:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"抚顺银行"},628302:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"抚顺银行"},623007:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"临商银行"},940055:{length:"6",cardName:"三峡卡(银联卡)",cardType:"借记卡",belong:"宜昌市商业银行"},622397:{length:"6",cardName:"信用卡(银联卡)",cardType:"贷记卡",belong:"宜昌市商业银行"},622398:{length:"6",cardName:"一通卡",cardType:"借记卡",belong:"葫芦岛市商业银行"},940054:{length:"6",cardName:"一卡通(银联卡)",cardType:"借记卡",belong:"葫芦岛市商业银行"},623598:{length:"6",cardName:"金融IC借记一通卡",cardType:"借记卡",belong:"葫芦岛银行"},625995:{length:"6",cardName:"贷记IC卡",cardType:"贷记卡",belong:"天津市商业银行"},621452:{length:"6",cardName:"--",cardType:"借记卡",belong:"天津市商业银行"},622331:{length:"6",cardName:"津卡",cardType:"借记卡",belong:"天津市商业银行"},622426:{length:"6",cardName:"津卡贷记卡(银联卡)",cardType:"贷记卡",belong:"天津市商业银行"},623554:{length:"6",cardName:"--",cardType:"借记卡",belong:"天津市商业银行"},623574:{length:"6",cardName:"--",cardType:"借记卡",belong:"天津市商业银行"},628205:{length:"6",cardName:"商务卡",cardType:"贷记卡",belong:"天津银行"},622421:{length:"6",cardName:"世纪一卡通(银联卡)",cardType:"借记卡",belong:"郑州银行股份有限公司"},940056:{length:"6",cardName:"世纪一卡通",cardType:"借记卡",belong:"郑州银行股份有限公司"},623531:{length:"6",cardName:"--",cardType:"借记卡",belong:"郑州银行股份有限公司"},96828:{length:"5",cardName:"世纪一卡通",cardType:"借记卡",belong:"郑州银行股份有限公司"},628214:{length:"6",cardName:"宁夏银行公务卡",cardType:"贷记卡",belong:"宁夏银行"},625529:{length:"6",cardName:"宁夏银行福农贷记卡",cardType:"贷记卡",belong:"宁夏银行"},625335:{length:"6",cardName:"中国旅游卡",cardType:"贷记卡",belong:"宁夏银行"},622428:{length:"6",cardName:"如意卡(银联卡)",cardType:"贷记卡",belong:"宁夏银行"},621529:{length:"6",cardName:"宁夏银行福农借记卡",cardType:"借记卡",belong:"宁夏银行"},622429:{length:"6",cardName:"如意借记卡",cardType:"借记卡",belong:"宁夏银行"},621417:{length:"6",cardName:"如意IC卡",cardType:"借记卡",belong:"宁夏银行"},623089:{length:"6",cardName:"宁夏银行如意借记卡",cardType:"借记卡",belong:"宁夏银行"},623200:{length:"6",cardName:"中国旅游卡",cardType:"借记卡",belong:"宁夏银行"},622363:{length:"6",cardName:"万事顺卡",cardType:"借记卡",belong:"珠海华润银行股份有限公司"},940048:{length:"6",cardName:"万事顺卡(银联卡)",cardType:"借记卡",belong:"珠海华润银行股份有限公司"},621455:{length:"6",cardName:"珠海华润银行IC借记卡",cardType:"借记卡",belong:"珠海华润银行股份有限公司"},940057:{length:"6",cardName:"金达卡(银联卡)",cardType:"借记卡",belong:"齐商银行"},622311:{length:"6",cardName:"金达借记卡(银联卡)",cardType:"借记卡",belong:"齐商银行"},623119:{length:"6",cardName:"金达IC卡",cardType:"借记卡",belong:"齐商银行"},622990:{length:"6",cardName:"7777卡",cardType:"借记卡",belong:"锦州银行股份有限公司"},940003:{length:"6",cardName:"万通卡(银联卡)",cardType:"借记卡",belong:"锦州银行股份有限公司"},623568:{length:"6",cardName:"锦州银行7777卡",cardType:"借记卡",belong:"锦州银行股份有限公司"},622877:{length:"6",cardName:"",cardType:"借记卡",belong:"徽商银行"},622879:{length:"6",cardName:"黄山卡",cardType:"借记卡",belong:"徽商银行"},603601:{length:"6",cardName:"黄山卡",cardType:"借记卡",belong:"徽商银行"},621775:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"徽商银行"},623203:{length:"6",cardName:"徽商银行中国旅游卡（安徽）",cardType:"借记卡",belong:"徽商银行"},622137:{length:"6",cardName:"黄山卡(银联卡)",cardType:"借记卡",belong:"徽商银行芜湖分行"},622327:{length:"6",cardName:"黄山卡(银联卡)",cardType:"借记卡",belong:"徽商银行马鞍山分行"},622340:{length:"6",cardName:"黄山卡(银联卡)",cardType:"借记卡",belong:"徽商银行淮北分行"},622366:{length:"6",cardName:"黄山卡(银联卡)",cardType:"借记卡",belong:"徽商银行安庆分行"},9896:{length:"4",cardName:"长江卡",cardType:"借记卡",belong:"重庆银行"},622134:{length:"6",cardName:"长江卡(银联卡)",cardType:"借记卡",belong:"重庆银行"},940018:{length:"6",cardName:"长江卡(银联卡)",cardType:"借记卡",belong:"重庆银行"},623016:{length:"6",cardName:"长江卡",cardType:"借记卡",belong:"重庆银行"},623096:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"重庆银行"},940049:{length:"6",cardName:"丁香一卡通(银联卡)",cardType:"借记卡",belong:"哈尔滨银行"},622425:{length:"6",cardName:"丁香借记卡(银联卡)",cardType:"借记卡",belong:"哈尔滨银行"},622425:{length:"6",cardName:"丁香卡",cardType:"借记卡",belong:"哈尔滨银行"},621577:{length:"6",cardName:"福农借记卡",cardType:"借记卡",belong:"哈尔滨银行"},62326501:{length:"8",cardName:"银联标准单位结算卡",cardType:"借记卡",belong:"哈尔滨银行"},622133:{length:"6",cardName:"甲秀银联借记卡",cardType:"借记卡",belong:"贵阳银行股份有限公司"},888:{length:"3",cardName:"甲秀卡",cardType:"借记卡",belong:"贵阳银行股份有限公司"},622170:{length:"6",cardName:"",cardType:"借记卡",belong:"贵阳银行股份有限公司"},621735:{length:"6",cardName:"一卡通",cardType:"借记卡",belong:"贵阳银行股份有限公司"},622537:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"贵阳银行股份有限公司"},62326519:{length:"8",cardName:"--",cardType:"借记卡",belong:"贵阳银行股份有限公司"},622981:{length:"6",cardName:"金丝路卡",cardType:"借记卡",belong:"西安银行股份有限公司"},623165:{length:"6",cardName:"金丝路借记卡",cardType:"借记卡",belong:"西安银行股份有限公司"},622136:{length:"6",cardName:"福瑞卡",cardType:"借记卡",belong:"西安银行股份有限公司"},623277:{length:"6",cardName:"金丝路单位结算卡",cardType:"借记卡",belong:"西安银行股份有限公司"},60326500:{length:"8",cardName:"太湖卡",cardType:"借记卡",belong:"无锡市商业银行"},60326513:{length:"8",cardName:"太湖卡",cardType:"借记卡",belong:"无锡市商业银行"},622485:{length:"6",cardName:"太湖金保卡(银联卡)",cardType:"借记卡",belong:"无锡市商业银行"},622415:{length:"6",cardName:"银杏卡(银联卡)",cardType:"借记卡",belong:"丹东银行股份有限公司"},940060:{length:"6",cardName:"银杏卡(银联卡)",cardType:"借记卡",belong:"丹东银行股份有限公司"},623098:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"丹东银行"},628329:{length:"6",cardName:"丹东银行公务卡",cardType:"贷记卡",belong:"丹东银行"},622139:{length:"6",cardName:"敦煌国际卡(银联卡)",cardType:"借记卡",belong:"兰州银行股份有限公司"},940040:{length:"6",cardName:"敦煌卡",cardType:"借记卡",belong:"兰州银行股份有限公司"},621242:{length:"6",cardName:"敦煌卡",cardType:"借记卡",belong:"兰州银行股份有限公司"},621496:{length:"6",cardName:"敦煌金融IC卡",cardType:"借记卡",belong:"兰州银行股份有限公司"},623129:{length:"6",cardName:"金融社保卡",cardType:"借记卡",belong:"兰州银行股份有限公司"},623275:{length:"6",cardName:"--",cardType:"借记卡",belong:"兰州银行股份有限公司"},621538:{length:"6",cardName:"福农卡",cardType:"借记卡",belong:"兰州银行"},623541:{length:"6",cardName:"兰州三维市民卡",cardType:"借记卡",belong:"兰州银行股份有限公司"},940006:{length:"6",cardName:"金瑞卡(银联卡)",cardType:"借记卡",belong:"南昌银行"},621269:{length:"6",cardName:"南昌银行借记卡",cardType:"借记卡",belong:"南昌银行"},622275:{length:"6",cardName:"金瑞卡",cardType:"借记卡",belong:"南昌银行"},62326522:{length:"8",cardName:"南昌银行单位结算卡",cardType:"借记卡",belong:"南昌银行"},621359:{length:"6",cardName:"瓷都卡",cardType:"借记卡",belong:"南昌银行"},621216:{length:"6",cardName:"晋龙一卡通",cardType:"借记卡",belong:"晋商银行"},622465:{length:"6",cardName:"晋龙一卡通",cardType:"借记卡",belong:"晋商银行"},940031:{length:"6",cardName:"晋龙卡(银联卡)",cardType:"借记卡",belong:"晋商银行"},623179:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"晋商银行"},621252:{length:"6",cardName:"金桥通卡",cardType:"借记卡",belong:"青岛银行"},622146:{length:"6",cardName:"金桥卡(银联卡)",cardType:"借记卡",belong:"青岛银行"},940061:{length:"6",cardName:"金桥卡(银联卡)",cardType:"借记卡",belong:"青岛银行"},621419:{length:"6",cardName:"金桥卡",cardType:"借记卡",belong:"青岛银行"},623170:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"青岛银行"},620551:{length:"6",cardName:"——",cardType:"预付费卡",belong:"青岛银行"},622440:{length:"6",cardName:"雾凇卡(银联卡)",cardType:"借记卡",belong:"吉林银行"},940047:{length:"6",cardName:"雾凇卡(银联卡)",cardType:"借记卡",belong:"吉林银行"},69580:{length:"5",cardName:"金桥卡",cardType:"借记卡",belong:"南通商业银行"},940017:{length:"6",cardName:"金桥卡(银联卡)",cardType:"借记卡",belong:"南通商业银行"},622418:{length:"6",cardName:"金桥卡(银联卡)",cardType:"借记卡",belong:"南通商业银行"},622307:{length:"6",cardName:"庐山卡(银联卡)",cardType:"借记卡",belong:"九江银行股份有限公司"},622162:{length:"6",cardName:"庐山卡",cardType:"借记卡",belong:"九江银行股份有限公司"},623146:{length:"6",cardName:"庐山卡",cardType:"借记卡",belong:"九江银行股份有限公司"},623077:{length:"6",cardName:"黄海卡、财富卡借记卡",cardType:"借记卡",belong:"日照银行"},622413:{length:"6",cardName:"千山卡(银联卡)",cardType:"借记卡",belong:"鞍山银行"},940002:{length:"6",cardName:"千山卡(银联卡)",cardType:"借记卡",belong:"鞍山银行"},623188:{length:"6",cardName:"千山卡",cardType:"借记卡",belong:"鞍山银行"},621237:{length:"6",cardName:"秦卡",cardType:"借记卡",belong:"秦皇岛银行股份有限公司"},62249802:{length:"8",cardName:"秦卡",cardType:"借记卡",belong:"秦皇岛银行股份有限公司"},94004602:{length:"8",cardName:"秦卡",cardType:"借记卡",belong:"秦皇岛银行股份有限公司"},623003:{length:"6",cardName:"秦卡-IC卡",cardType:"借记卡",belong:"秦皇岛银行股份有限公司"},628357:{length:"6",cardName:"--",cardType:"贷记卡",belong:"秦皇岛银行"},622310:{length:"6",cardName:"三江银行卡(银联卡)",cardType:"借记卡",belong:"青海银行"},940068:{length:"6",cardName:"三江卡",cardType:"借记卡",belong:"青海银行"},623599:{length:"6",cardName:"--",cardType:"借记卡",belong:"青海银行"},623670:{length:"6",cardName:"--",cardType:"借记卡",belong:"青海银行"},622321:{length:"6",cardName:"大唐贷记卡",cardType:"贷记卡",belong:"台州银行"},625001:{length:"6",cardName:"大唐准贷记卡",cardType:"准贷记卡",belong:"台州银行"},622427:{length:"6",cardName:"大唐卡(银联卡)",cardType:"借记卡",belong:"台州银行"},940069:{length:"6",cardName:"大唐卡",cardType:"借记卡",belong:"台州银行"},623039:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"台州银行"},628273:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"台州银行"},940070:{length:"6",cardName:"金鹤卡(银联卡)",cardType:"借记卡",belong:"盐城商行"},694301:{length:"6",cardName:"芙蓉卡",cardType:"借记卡",belong:"长沙银行股份有限公司"},940071:{length:"6",cardName:"芙蓉卡(银联卡)",cardType:"借记卡",belong:"长沙银行股份有限公司"},622368:{length:"6",cardName:"芙蓉卡(银联卡)",cardType:"借记卡",belong:"长沙银行股份有限公司"},621446:{length:"6",cardName:"芙蓉金融IC卡",cardType:"借记卡",belong:"长沙银行股份有限公司"},625901:{length:"6",cardName:"市民卡",cardType:"贷记卡",belong:"长沙银行股份有限公司"},622898:{length:"6",cardName:"芙蓉贷记卡",cardType:"贷记卡",belong:"长沙银行股份有限公司"},622900:{length:"6",cardName:"芙蓉贷记卡",cardType:"贷记卡",belong:"长沙银行股份有限公司"},628281:{length:"6",cardName:"公务卡钻石卡",cardType:"贷记卡",belong:"长沙银行股份有限公司"},628282:{length:"6",cardName:"公务卡金卡",cardType:"贷记卡",belong:"长沙银行股份有限公司"},622806:{length:"6",cardName:"银联标准钻石卡",cardType:"贷记卡",belong:"长沙银行股份有限公司"},628283:{length:"6",cardName:"公务卡普卡",cardType:"贷记卡",belong:"长沙银行股份有限公司"},620519:{length:"6",cardName:"市民卡",cardType:"预付费卡",belong:"长沙银行股份有限公司"},621739:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"长沙银行股份有限公司"},622967:{length:"6",cardName:"长征卡",cardType:"借记卡",belong:"赣州银行股份有限公司"},940073:{length:"6",cardName:"长征卡(银联卡)",cardType:"借记卡",belong:"赣州银行股份有限公司"},623127:{length:"6",cardName:"--",cardType:"借记卡",belong:"赣州银行股份有限公司"},622370:{length:"6",cardName:"海峡银联卡(银联卡)",cardType:"借记卡",belong:"泉州银行"},683970:{length:"6",cardName:"海峡储蓄卡",cardType:"借记卡",belong:"泉州银行"},940074:{length:"6",cardName:"海峡银联卡(银联卡)",cardType:"借记卡",belong:"泉州银行"},621437:{length:"6",cardName:"海峡卡",cardType:"借记卡",belong:"泉州银行"},628319:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"泉州银行"},622400:{length:"6",cardName:"辽河一卡通(银联卡)",cardType:"借记卡",belong:"营口银行股份有限公司"},623177:{length:"6",cardName:"营银卡",cardType:"借记卡",belong:"营口银行股份有限公司"},622308:{length:"6",cardName:"春城卡(银联卡)",cardType:"借记卡",belong:"昆明商业银行"},621415:{length:"6",cardName:"富滇IC卡（复合卡）",cardType:"借记卡",belong:"昆明商业银行"},990871:{length:"6",cardName:"春城卡(银联卡)",cardType:"借记卡",belong:"昆明商业银行"},622126:{length:"6",cardName:"金通卡(银联卡)",cardType:"借记卡",belong:"阜新银行股份有限公司"},623166:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"阜新银行"},622132:{length:"6",cardName:"南湖借记卡(银联卡)",cardType:"借记卡",belong:"嘉兴银行"},621340:{length:"6",cardName:"白金卡",cardType:"借记卡",belong:"廊坊银行"},621341:{length:"6",cardName:"金卡",cardType:"借记卡",belong:"廊坊银行"},623073:{length:"6",cardName:"龙凤呈祥卡",cardType:"借记卡",belong:"廊坊银行"},622140:{length:"6",cardName:"银星卡(银联卡)",cardType:"借记卡",belong:"廊坊银行"},622141:{length:"6",cardName:"泰隆卡(银联卡)",cardType:"借记卡",belong:"泰隆城市信用社"},621480:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"泰隆城市信用社"},622147:{length:"6",cardName:"百灵卡(银联卡)",cardType:"借记卡",belong:"内蒙古银行"},621633:{length:"6",cardName:"成吉思汗卡",cardType:"借记卡",belong:"内蒙古银行"},623057:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"内蒙古银行"},62326525:{length:"8",cardName:"--",cardType:"借记卡",belong:"内蒙古银行"},622301:{length:"6",cardName:"百合卡",cardType:"借记卡",belong:"湖州市商业银行"},623171:{length:"6",cardName:"",cardType:"借记卡",belong:"湖州市商业银行"},621266:{length:"6",cardName:"狮城卡",cardType:"借记卡",belong:"沧州银行股份有限公司"},62249804:{length:"8",cardName:"狮城卡",cardType:"借记卡",belong:"沧州银行股份有限公司"},94004604:{length:"8",cardName:"狮城卡",cardType:"借记卡",belong:"沧州银行股份有限公司"},621422:{length:"6",cardName:"狮城卡",cardType:"借记卡",belong:"沧州银行"},628395:{length:"6",cardName:"--",cardType:"贷记卡",belong:"沧州银行"},622335:{length:"6",cardName:"桂花卡(银联卡)",cardType:"借记卡",belong:"南宁市商业银行"},622336:{length:"6",cardName:"雄鹰卡(银联卡)",cardType:"借记卡",belong:"包商银行"},623273:{length:"6",cardName:"--",cardType:"借记卡",belong:"包商银行"},623592:{length:"6",cardName:"--",cardType:"借记卡",belong:"包商银行"},621760:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"包商银行"},623631:{length:"6",cardName:"--",cardType:"借记卡",belong:"包商银行"},622165:{length:"6",cardName:"包头市商业银行借记卡",cardType:"借记卡",belong:"包商银行"},628295:{length:"6",cardName:"包商银行内蒙古自治区公务卡",cardType:"贷记卡",belong:"包商银行"},625950:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"包商银行"},623210:{length:"6",cardName:"--",cardType:"贷记卡",belong:"包商银行"},625359:{length:"6",cardName:"--",cardType:"贷记卡",belong:"包商银行"},622315:{length:"6",cardName:"雄鹰贷记卡",cardType:"贷记卡",belong:"包商银行"},622337:{length:"6",cardName:"金猴神通借记卡",cardType:"借记卡",belong:"连云港市商业银行"},622411:{length:"6",cardName:"通达卡(银联卡)",cardType:"借记卡",belong:"威海商业银行"},623102:{length:"6",cardName:"通达借记卡",cardType:"借记卡",belong:"威海商业银行"},622342:{length:"6",cardName:"攀枝花卡(银联卡)",cardType:"借记卡",belong:"攀枝花市商业银行"},623048:{length:"6",cardName:"攀枝花卡",cardType:"借记卡",belong:"攀枝花市商业银行"},622367:{length:"6",cardName:"科技城卡(银联卡)",cardType:"借记卡",belong:"绵阳市商业银行"},622392:{length:"6",cardName:"酒城卡(银联卡)",cardType:"借记卡",belong:"泸州市商业银行"},623085:{length:"6",cardName:"酒城IC卡",cardType:"借记卡",belong:"泸州市商业银行"},622395:{length:"6",cardName:"云冈卡(银联卡)",cardType:"借记卡",belong:"大同银行"},622925:{length:"6",cardName:"大同银行借记卡",cardType:"借记卡",belong:"大同银行"},622448:{length:"6",cardName:"南珠卡(银联卡)",cardType:"借记卡",belong:"广东南粤银行"},623595:{length:"6",cardName:"——",cardType:"借记卡",belong:"广东南粤银行"},622982:{length:"6",cardName:"如意借记卡",cardType:"借记卡",belong:"张家口市商业银行股份有限公司"},621413:{length:"6",cardName:"好运IC借记卡",cardType:"借记卡",belong:"张家口市商业银行"},622856:{length:"6",cardName:"漓江卡(银联卡)",cardType:"借记卡",belong:"桂林市商业银行"},623221:{length:"6",cardName:"中国旅游卡",cardType:"借记卡",belong:"桂林市商业银行"},621456:{length:"6",cardName:"漓江卡",cardType:"借记卡",belong:"桂林银行"},621562:{length:"6",cardName:"福农IC卡",cardType:"借记卡",belong:"桂林银行"},621097:{length:"6",cardName:"联名借记卡",cardType:"借记卡",belong:"龙江银行"},621588:{length:"6",cardName:"福农借记卡",cardType:"借记卡",belong:"龙江银行"},622860:{length:"6",cardName:"玉兔卡(银联卡)",cardType:"借记卡",belong:"龙江银行"},622644:{length:"6",cardName:"龙江村镇IC卡",cardType:"借记卡",belong:"龙江银行"},623032:{length:"6",cardName:"社会保障卡",cardType:"借记卡",belong:"龙江银行"},62326503:{length:"8",cardName:"龙江银行单位结算卡",cardType:"借记卡",belong:"龙江银行"},623518:{length:"6",cardName:"龙江IC卡",cardType:"借记卡",belong:"龙江银行"},623216:{length:"6",cardName:"中国旅游卡黑龙江IC借记卡普卡",cardType:"借记卡",belong:"龙江银行"},621037:{length:"6",cardName:"龙江网金IC卡",cardType:"借记卡",belong:"龙江银行"},622870:{length:"6",cardName:"长江卡",cardType:"借记卡",belong:"江苏长江商业银行"},623150:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"江苏长江商业银行"},622866:{length:"6",cardName:"彭城借记卡(银联卡)",cardType:"借记卡",belong:"徐州市商业银行"},622292:{length:"6",cardName:"龙城卡",cardType:"借记卡",belong:"柳州银行股份有限公司"},622291:{length:"6",cardName:"龙城卡",cardType:"借记卡",belong:"柳州银行股份有限公司"},621412:{length:"6",cardName:"龙城IC卡",cardType:"借记卡",belong:"柳州银行股份有限公司"},622880:{length:"6",cardName:"龙城卡VIP卡",cardType:"借记卡",belong:"柳州银行股份有限公司"},622881:{length:"6",cardName:"龙城致富卡",cardType:"借记卡",belong:"柳州银行股份有限公司"},620118:{length:"6",cardName:"东盟商旅卡",cardType:"预付费卡",belong:"柳州银行股份有限公司"},623072:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"南充市商业银行"},622897:{length:"6",cardName:"熊猫团团卡",cardType:"借记卡",belong:"南充市商业银行"},628279:{length:"6",cardName:"银联标准卡",cardType:"贷记卡",belong:"莱商银行"},622864:{length:"6",cardName:"金凤卡",cardType:"借记卡",belong:"莱芜银行"},621403:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"莱商银行"},622561:{length:"6",cardName:"锦程卡定活一卡通",cardType:"借记卡",belong:"德阳银行"},622562:{length:"6",cardName:"锦程卡定活一卡通金卡",cardType:"借记卡",belong:"德阳银行"},622563:{length:"6",cardName:"锦程卡定活一卡通",cardType:"借记卡",belong:"德阳银行"},623137:{length:"6",cardName:"德阳银行鼎诚钻石卡",cardType:"借记卡",belong:"德阳银行"},623264:{length:"6",cardName:"--",cardType:"借记卡",belong:"德阳银行"},622167:{length:"6",cardName:"唐山市城通卡",cardType:"借记卡",belong:"唐山银行"},623193:{length:"6",cardName:"盛唐芯卡",cardType:"借记卡",belong:"唐山银行"},622777:{length:"6",cardName:"珠江源卡",cardType:"借记卡",belong:"曲靖市商业银行"},621497:{length:"6",cardName:"珠江源IC卡",cardType:"借记卡",belong:"曲靖市商业银行"},622532:{length:"6",cardName:"珠联璧合卡",cardType:"借记卡",belong:"晋城银行股份有限公司"},623197:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"晋城银行股份有限公司"},622888:{length:"6",cardName:"恒通贷记卡",cardType:"贷记卡",belong:"东莞商行"},628398:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"东莞商行"},622868:{length:"6",cardName:"金鹿信用卡",cardType:"贷记卡",belong:"温州银行"},622899:{length:"6",cardName:"金鹿信用卡",cardType:"贷记卡",belong:"温州银行"},628255:{length:"6",cardName:"金鹿公务卡",cardType:"贷记卡",belong:"温州银行"},625988:{length:"6",cardName:"贷记IC卡",cardType:"贷记卡",belong:"温州银行"},622625:{length:"6",cardName:"九通香港旅游贷记普卡",cardType:"贷记卡",belong:"汉口银行"},622626:{length:"6",cardName:"九通香港旅游贷记金卡",cardType:"贷记卡",belong:"汉口银行"},625946:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"汉口银行"},628200:{length:"6",cardName:"九通公务卡",cardType:"贷记卡",belong:"汉口银行"},622566:{length:"6",cardName:"九通信用卡",cardType:"贷记卡",belong:"汉口银行"},622567:{length:"6",cardName:"九通信用卡",cardType:"贷记卡",belong:"汉口银行"},621076:{length:"6",cardName:"聚宝借记卡",cardType:"借记卡",belong:"江苏银行"},504923:{length:"6",cardName:"月季卡",cardType:"借记卡",belong:"江苏银行"},622173:{length:"6",cardName:"紫金卡",cardType:"借记卡",belong:"江苏银行"},622422:{length:"6",cardName:"绿扬卡(银联卡)",cardType:"借记卡",belong:"江苏银行"},622447:{length:"6",cardName:"月季卡(银联卡)",cardType:"借记卡",belong:"江苏银行"},622131:{length:"6",cardName:"九州借记卡(银联卡)",cardType:"借记卡",belong:"江苏银行"},940076:{length:"6",cardName:"月季卡(银联卡)",cardType:"借记卡",belong:"江苏银行"},622876:{length:"6",cardName:"江苏银行聚宝IC借记卡",cardType:"借记卡",belong:"江苏银行"},622873:{length:"6",cardName:"聚宝IC借记卡VIP卡",cardType:"借记卡",belong:"江苏银行"},621579:{length:"6",cardName:"聚宝惠民福农卡",cardType:"借记卡",belong:"江苏银行"},623279:{length:"6",cardName:"--",cardType:"借记卡",belong:"江苏银行"},531659:{length:"6",cardName:"白金信用卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},622157:{length:"6",cardName:"白金信用卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},435744:{length:"6",cardName:"沃尔玛百分卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},435745:{length:"6",cardName:"沃尔玛百分卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},483536:{length:"6",cardName:"VISA白金卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},622525:{length:"6",cardName:"人民币信用卡金卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},622526:{length:"6",cardName:"人民币信用卡普卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},998801:{length:"6",cardName:"发展信用卡(银联卡)",cardType:"贷记卡",belong:"平安银行股份有限公司"},998802:{length:"6",cardName:"发展信用卡(银联卡)",cardType:"贷记卡",belong:"平安银行股份有限公司"},528020:{length:"6",cardName:"平安银行信用卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},622155:{length:"6",cardName:"平安银行信用卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},622156:{length:"6",cardName:"平安银行信用卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},526855:{length:"6",cardName:"平安银行信用卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},356869:{length:"6",cardName:"信用卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},356868:{length:"6",cardName:"信用卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},625360:{length:"6",cardName:"平安中国旅游信用卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},625361:{length:"6",cardName:"平安中国旅游白金信用卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},628296:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},625825:{length:"6",cardName:"白金IC卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},625823:{length:"6",cardName:"贷记IC卡",cardType:"贷记卡",belong:"平安银行股份有限公司"},622962:{length:"6",cardName:"长治商行银联晋龙卡",cardType:"借记卡",belong:"长治银行股份有限公司"},623509:{length:"6",cardName:"--",cardType:"借记卡",belong:"长治银行股份有限公司"},622936:{length:"6",cardName:"热河卡",cardType:"借记卡",belong:"承德市商业银行"},623060:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"承德银行"},62326515:{length:"8",cardName:"--",cardType:"借记卡",belong:"承德银行"},622937:{length:"6",cardName:"长河借记卡",cardType:"借记卡",belong:"德州银行"},623101:{length:"6",cardName:"--",cardType:"借记卡",belong:"德州银行"},622960:{length:"6",cardName:"邯银卡",cardType:"借记卡",belong:"邯郸市商业银行"},623523:{length:"6",cardName:"邯郸银行贵宾IC借记卡",cardType:"借记卡",belong:"邯郸市商业银行"},623653:{length:"6",cardName:"--",cardType:"借记卡",belong:"邯郸市商业银行"},628210:{length:"6",cardName:"紫金信用卡(公务卡)",cardType:"贷记卡",belong:"江苏银行"},622283:{length:"6",cardName:"紫金信用卡",cardType:"贷记卡",belong:"江苏银行"},625902:{length:"6",cardName:"天翼联名信用卡",cardType:"贷记卡",belong:"江苏银行"},621010:{length:"6",cardName:"广成卡",cardType:"借记卡",belong:"平凉市商业银行"},622980:{length:"6",cardName:"红塔卡",cardType:"借记卡",belong:"玉溪市商业银行"},623135:{length:"6",cardName:"红塔卡",cardType:"借记卡",belong:"玉溪市商业银行"},628351:{length:"6",cardName:"红塔卡",cardType:"贷记卡",belong:"玉溪市商业银行"},621726:{length:"6",cardName:"金融IC卡",cardType:"借记卡",belong:"浙江民泰商业银行"},621088:{length:"6",cardName:"民泰借记卡",cardType:"借记卡",belong:"浙江民泰商业银行"},620517:{length:"6",cardName:"金融IC卡C卡",cardType:"预付费卡",belong:"浙江民泰商业银行"},622740:{length:"6",cardName:"银联标准普卡金卡",cardType:"贷记卡",belong:"浙江民泰商业银行"},625036:{length:"6",cardName:"商惠通",cardType:"准贷记卡",belong:"浙江民泰商业银行"},621014:{length:"6",cardName:"三清山卡",cardType:"借记卡",belong:"上饶市商业银行"},621004:{length:"6",cardName:"胜利卡",cardType:"借记卡",belong:"东营银行"},623130:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"东营银行"},622972:{length:"6",cardName:"岱宗卡",cardType:"借记卡",belong:"泰安银行"},623196:{length:"6",cardName:"市民一卡通",cardType:"借记卡",belong:"泰安银行"},623083:{length:"6",cardName:"义卡借记IC卡",cardType:"借记卡",belong:"浙江稠州商业银行"},621028:{length:"6",cardName:"义卡",cardType:"借记卡",belong:"浙江稠州商业银行"},628250:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"浙江稠州商业银行"},622973:{length:"6",cardName:"狮城借记卡",cardType:"借记卡",belong:"乌海银行股份有限公司"},623153:{length:"6",cardName:"--",cardType:"借记卡",belong:"乌海银行股份有限公司"},623121:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"自贡市商业银行"},621070:{length:"6",cardName:"锦程卡",cardType:"借记卡",belong:"自贡市商业银行"},622977:{length:"6",cardName:"万通卡",cardType:"借记卡",belong:"龙江银行股份有限公司"},622978:{length:"6",cardName:"天骄卡",cardType:"借记卡",belong:"鄂尔多斯银行股份有限公司"},628253:{length:"6",cardName:"天骄公务卡",cardType:"贷记卡",belong:"鄂尔多斯银行"},623093:{length:"6",cardName:"天骄借记复合卡",cardType:"借记卡",belong:"鄂尔多斯银行股份有限公司"},628378:{length:"6",cardName:"--",cardType:"贷记卡",belong:"鄂尔多斯银行股份有限公司"},621200:{length:"6",cardName:"儒商卡",cardType:"借记卡",belong:"济宁银行股份有限公司"},623116:{length:"6",cardName:"--",cardType:"借记卡",belong:"济宁银行股份有限公司"},621038:{length:"6",cardName:"龙凤卡",cardType:"借记卡",belong:"铁岭银行"},623180:{length:"6",cardName:"--",cardType:"借记卡",belong:"铁岭银行"},621086:{length:"6",cardName:"大福卡",cardType:"借记卡",belong:"乐山市商业银行"},621498:{length:"6",cardName:"--",cardType:"借记卡",belong:"乐山市商业银行"},621448:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"长安银行"},621296:{length:"6",cardName:"长长卡",cardType:"借记卡",belong:"长安银行"},628385:{length:"6",cardName:"--",cardType:"贷记卡",belong:"长安银行"},621044:{length:"6",cardName:"姜炎卡",cardType:"借记卡",belong:"宝鸡商行"},622945:{length:"6",cardName:"财富人生卡",cardType:"借记卡",belong:"重庆三峡银行"},621755:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"重庆三峡银行"},622940:{length:"6",cardName:"麒麟借记卡",cardType:"借记卡",belong:"石嘴山银行"},623120:{length:"6",cardName:"麒麟借记卡",cardType:"借记卡",belong:"石嘴山银行"},628355:{length:"6",cardName:"麒麟公务卡",cardType:"贷记卡",belong:"石嘴山银行"},621089:{length:"6",cardName:"鹤卡",cardType:"借记卡",belong:"盘锦市商业银行"},623161:{length:"6",cardName:"盘锦市商业银行鹤卡",cardType:"借记卡",belong:"盘锦市商业银行"},621029:{length:"6",cardName:"瑞卡",cardType:"借记卡",belong:"昆仑银行股份有限公司"},621766:{length:"6",cardName:"金融IC卡",cardType:"借记卡",belong:"昆仑银行股份有限公司"},623139:{length:"6",cardName:"",cardType:"借记卡",belong:"昆仑银行股份有限公司"},621071:{length:"6",cardName:"佛泉卡",cardType:"借记卡",belong:"平顶山银行股份有限公司"},623152:{length:"6",cardName:"--",cardType:"借记卡",belong:"平顶山银行股份有限公司"},628339:{length:"6",cardName:"平顶山银行公务卡",cardType:"贷记卡",belong:"平顶山银行"},621074:{length:"6",cardName:"鑫鑫通卡",cardType:"借记卡",belong:"朝阳银行"},621515:{length:"6",cardName:"朝阳银行福农卡",cardType:"借记卡",belong:"朝阳银行"},623030:{length:"6",cardName:"红山卡",cardType:"借记卡",belong:"朝阳银行"},621345:{length:"6",cardName:"绿叶卡",cardType:"借记卡",belong:"宁波东海银行"},623167:{length:"6",cardName:"洪福卡",cardType:"借记卡",belong:"宁波东海银行"},621090:{length:"6",cardName:"锦程卡",cardType:"借记卡",belong:"遂宁市商业银行"},623178:{length:"6",cardName:"金荷卡",cardType:"借记卡",belong:"遂宁市商业银行"},621091:{length:"6",cardName:"直隶卡",cardType:"借记卡",belong:"保定银行"},623168:{length:"6",cardName:"直隶卡",cardType:"借记卡",belong:"保定银行"},621238:{length:"6",cardName:"金牛卡",cardType:"借记卡",belong:"邢台银行股份有限公司"},628325:{length:"6",cardName:"邢台银行金牛公务卡",cardType:"贷记卡",belong:"邢台银行"},621057:{length:"6",cardName:"锦程卡",cardType:"借记卡",belong:"凉山州商业银行"},623199:{length:"6",cardName:"金凉山卡",cardType:"借记卡",belong:"凉山州商业银行"},628303:{length:"6",cardName:"福源公务卡",cardType:"贷记卡",belong:"漯河银行"},621233:{length:"6",cardName:"锦程卡",cardType:"借记卡",belong:"达州市商业银行"},623588:{length:"6",cardName:"丹凤卡借记IC卡",cardType:"借记卡",belong:"达州市商业银行"},621223:{length:"6",cardName:"九州方圆借记卡",cardType:"借记卡",belong:"晋中银行"},621780:{length:"6",cardName:"九州方圆卡",cardType:"借记卡",belong:"晋中银行"},628389:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"驻马店银行"},621239:{length:"6",cardName:"金鼎卡",cardType:"借记卡",belong:"衡水银行"},623068:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"衡水银行"},628380:{length:"6",cardName:"金鼎公务卡",cardType:"贷记卡",belong:"衡水银行"},628315:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"周口银行"},621272:{length:"6",cardName:"金鼎卡",cardType:"借记卡",belong:"阳泉市商业银行"},621738:{length:"6",cardName:"金鼎卡",cardType:"借记卡",belong:"阳泉市商业银行"},621273:{length:"6",cardName:"锦程卡",cardType:"借记卡",belong:"宜宾市商业银行"},623079:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"宜宾市商业银行"},621263:{length:"6",cardName:"孔雀胡杨卡",cardType:"借记卡",belong:"库尔勒市商业银行"},621325:{length:"6",cardName:"锦城卡",cardType:"借记卡",belong:"雅安市商业银行"},623084:{length:"6",cardName:"--",cardType:"借记卡",belong:"雅安市商业银行"},628331:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"信阳银行"},621366:{length:"6",cardName:"华融卡",cardType:"借记卡",belong:"华融湘江银行"},621388:{length:"6",cardName:"华融卡",cardType:"借记卡",belong:"华融湘江银行"},621348:{length:"6",cardName:"祥云借记卡",cardType:"借记卡",belong:"营口沿海银行"},620063:{length:"6",cardName:"--",cardType:"借记卡",belong:"营口沿海银行"},623080:{length:"6",cardName:"瓷都借记IC卡（普卡）",cardType:"借记卡",belong:"景德镇商业银行"},621360:{length:"6",cardName:"瓜香借记卡",cardType:"借记卡",belong:"哈密市商业银行"},623566:{length:"6",cardName:"--",cardType:"借记卡",belong:"哈密市商业银行"},621217:{length:"6",cardName:"金牛卡",cardType:"借记卡",belong:"湖北银行"},622959:{length:"6",cardName:"汉江卡",cardType:"借记卡",belong:"湖北银行"},622396:{length:"6",cardName:"三峡卡",cardType:"借记卡",belong:"湖北银行"},622511:{length:"6",cardName:"至尊卡",cardType:"借记卡",belong:"湖北银行"},621270:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"湖北银行"},623076:{length:"6",cardName:"金融IC卡",cardType:"借记卡",belong:"湖北银行"},625850:{length:"6",cardName:"湖北银行贷记IC卡",cardType:"贷记卡",belong:"湖北银行"},628340:{length:"6",cardName:"--",cardType:"贷记卡",belong:"湖北银行"},621391:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"西藏银行"},621339:{length:"6",cardName:"汇和卡",cardType:"借记卡",belong:"新疆汇和银行"},621469:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"广东华兴银行"},621625:{length:"6",cardName:"华兴银联公司卡",cardType:"借记卡",belong:"广东华兴银行"},623113:{length:"6",cardName:"华兴金融IC借记卡",cardType:"借记卡",belong:"广东华兴银行"},623611:{length:"6",cardName:"IC卡",cardType:"借记卡",belong:"广东华兴银行"},623665:{length:"6",cardName:"--",cardType:"借记卡",belong:"广东华兴银行"},623688:{length:"6",cardName:"华兴联名IC卡",cardType:"借记卡",belong:"广东华兴银行"},623627:{length:"6",cardName:"--",cardType:"借记卡",belong:"广东华兴银行"},621655:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"宁波通商银行"},623537:{length:"6",cardName:"--",cardType:"借记卡",belong:"宁波通商银行"},621636:{length:"6",cardName:"神舟兴陇借记卡",cardType:"借记卡",belong:"甘肃银行"},623182:{length:"6",cardName:"甘肃银行神州兴陇IC卡",cardType:"借记卡",belong:"甘肃银行"},628356:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"甘肃银行"},623087:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"枣庄银行"},621696:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"本溪市商业银行"},623577:{length:"6",cardName:"山城枫叶卡",cardType:"借记卡",belong:"本溪市商业银行"},621460:{length:"6",cardName:"社保卡",cardType:"借记卡",belong:"贵州银行"},622939:{length:"6",cardName:"尊卡",cardType:"借记卡",belong:"贵州银行"},621591:{length:"6",cardName:"黄果树福农卡",cardType:"借记卡",belong:"贵州银行"},622961:{length:"6",cardName:"黄果树卡",cardType:"借记卡",belong:"贵州银行"},622508:{length:"6",cardName:"--",cardType:"借记卡",belong:"贵州银行"},623138:{length:"6",cardName:"驿站卡",cardType:"借记卡",belong:"中原银行"},621035:{length:"6",cardName:"连城卡",cardType:"借记卡",belong:"中原银行"},621221:{length:"6",cardName:"驿站卡",cardType:"借记卡",belong:"中原银行"},623660:{length:"6",cardName:"--",cardType:"借记卡",belong:"中原银行"},621601:{length:"6",cardName:"龙翔卡",cardType:"借记卡",belong:"中原银行"},6224217:{length:"7",cardName:"世纪一卡通(银联卡)",cardType:"借记卡",belong:"中原银行"},621271:{length:"6",cardName:"如愿卡",cardType:"借记卡",belong:"中原银行"},621327:{length:"6",cardName:"安鼎卡",cardType:"借记卡",belong:"中原银行"},621337:{length:"6",cardName:"百汇卡",cardType:"借记卡",belong:"中原银行"},621748:{length:"6",cardName:"百汇卡",cardType:"借记卡",belong:"中原银行"},621235:{length:"6",cardName:"新卡",cardType:"借记卡",belong:"中原银行"},621075:{length:"6",cardName:"福卡",cardType:"借记卡",belong:"中原银行"},621753:{length:"6",cardName:"信阳卡",cardType:"借记卡",belong:"中原银行"},622441:{length:"6",cardName:"天鹅卡(银联卡)",cardType:"借记卡",belong:"中原银行"},622979:{length:"6",cardName:"鹤卡",cardType:"借记卡",belong:"中原银行"},623037:{length:"6",cardName:"福源卡",cardType:"借记卡",belong:"中原银行"},623160:{length:"6",cardName:"信阳卡",cardType:"借记卡",belong:"中原银行"},623505:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中原银行"},623623:{length:"6",cardName:"--",cardType:"借记卡",belong:"厦门国际银行"},623621:{length:"6",cardName:"--",cardType:"借记卡",belong:"海南银行"},627069:{length:"6",cardName:"一账通借贷合一钻石卡",cardType:"借记卡",belong:"平安银行股份有限公司"},627066:{length:"6",cardName:"一账通借贷合一卡普卡",cardType:"借记卡",belong:"平安银行股份有限公司"},627067:{length:"6",cardName:"一账通借贷合一卡金卡",cardType:"借记卡",belong:"平安银行股份有限公司"},627068:{length:"6",cardName:"一账通借贷合一白金卡",cardType:"借记卡",belong:"平安银行股份有限公司"},622478:{length:"6",cardName:"如意卡(银联卡)",cardType:"借记卡",belong:"上海农商银行"},940013:{length:"6",cardName:"如意卡(银联卡)",cardType:"借记卡",belong:"上海农商银行"},621495:{length:"6",cardName:"鑫通卡",cardType:"借记卡",belong:"上海农商银行"},621688:{length:"6",cardName:"国际如意卡",cardType:"借记卡",belong:"上海农商银行"},623162:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"上海农商银行"},623552:{length:"6",cardName:"上海农商银行鑫通卡",cardType:"借记卡",belong:"上海农商银行"},62326508:{length:"8",cardName:"上海农商银行单位结算卡",cardType:"借记卡",belong:"上海农商银行"},622443:{length:"6",cardName:"江通卡(银联卡)",cardType:"借记卡",belong:"昆山农信社"},623132:{length:"6",cardName:"琼花卡",cardType:"借记卡",belong:"昆山农信社"},940029:{length:"6",cardName:"银联汇通卡(银联卡)",cardType:"借记卡",belong:"昆山农信社"},625101:{length:"6",cardName:"粒金准贷卡",cardType:"准贷记卡",belong:"常熟市农村商业银行"},622462:{length:"6",cardName:"粒金贷记卡(银联卡)",cardType:"贷记卡",belong:"常熟市农村商业银行"},628272:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"常熟市农村商业银行"},623071:{length:"6",cardName:"粒金IC卡",cardType:"借记卡",belong:"常熟农村商业银行"},603694:{length:"6",cardName:"粒金卡",cardType:"借记卡",belong:"常熟农村商业银行"},622323:{length:"6",cardName:"粒金借记卡(银联卡)",cardType:"借记卡",belong:"常熟农村商业银行"},9400301:{length:"7",cardName:"粒金卡(银联卡)",cardType:"借记卡",belong:"常熟农村商业银行"},622128:{length:"6",cardName:"信通卡(银联卡)",cardType:"借记卡",belong:"深圳农村商业银行"},622129:{length:"6",cardName:"信通商务卡(银联卡)",cardType:"借记卡",belong:"深圳农村商业银行"},623035:{length:"6",cardName:"信通卡",cardType:"借记卡",belong:"深圳农村商业银行"},623186:{length:"6",cardName:"信通商务卡",cardType:"借记卡",belong:"深圳农村商业银行"},909810:{length:"6",cardName:"麒麟卡",cardType:"借记卡",belong:"广州农村商业银行股份有限公司"},940035:{length:"6",cardName:"麒麟卡(银联卡)",cardType:"借记卡",belong:"广州农村商业银行股份有限公司"},621522:{length:"6",cardName:"福农太阳卡",cardType:"借记卡",belong:"广州农村商业银行"},622439:{length:"6",cardName:"麒麟储蓄卡",cardType:"借记卡",belong:"广州农村商业银行股份有限公司"},623257:{length:"6",cardName:"单位结算卡",cardType:"借记卡",belong:"广州农村商业银行股份有限公司"},622271:{length:"6",cardName:"盛通卡",cardType:"借记卡",belong:"广东南海农村商业银行"},940037:{length:"6",cardName:"盛通卡(银联卡)",cardType:"借记卡",belong:"广东南海农村商业银行"},940038:{length:"6",cardName:"恒通卡(银联卡)",cardType:"借记卡",belong:"广东顺德农村商业银行"},985262:{length:"6",cardName:"恒通卡",cardType:"借记卡",belong:"广东顺德农村商业银行"},622322:{length:"6",cardName:"恒通卡(银联卡)",cardType:"借记卡",belong:"广东顺德农村商业银行"},621017:{length:"6",cardName:"金碧白金卡",cardType:"借记卡",belong:"昆明农联社"},"018572":{length:"6",cardName:"金碧卡",cardType:"借记卡",belong:"昆明农联社"},622369:{length:"6",cardName:"金碧一卡通(银联卡)",cardType:"借记卡",belong:"昆明农联社"},940042:{length:"6",cardName:"银联卡(银联卡)",cardType:"借记卡",belong:"昆明农联社"},623190:{length:"6",cardName:"金碧卡一卡通",cardType:"借记卡",belong:"昆明农联社"},622412:{length:"6",cardName:"信通卡",cardType:"借记卡",belong:"湖北农信社"},621523:{length:"6",cardName:"福农小康卡",cardType:"借记卡",belong:"湖北农信"},623055:{length:"6",cardName:"福卡IC借记卡",cardType:"借记卡",belong:"湖北农信社"},621013:{length:"6",cardName:"福卡(VIP卡)",cardType:"借记卡",belong:"湖北农信社"},625889:{length:"6",cardName:"福卡信用卡",cardType:"贷记卡",belong:"湖北农信社"},628254:{length:"6",cardName:"--",cardType:"贷记卡",belong:"湖北农信社"},623276:{length:"6",cardName:"福卡单位结算卡",cardType:"借记卡",belong:"湖北农信社"},940044:{length:"6",cardName:"信通卡(银联卡)",cardType:"借记卡",belong:"武汉农信"},622312:{length:"6",cardName:"信通卡(银联卡)",cardType:"借记卡",belong:"徐州市郊农村信用合作联社"},628381:{length:"6",cardName:"暨阳公务卡",cardType:"贷记卡",belong:"江阴农村商业银行"},622481:{length:"6",cardName:"合作贷记卡(银联卡)",cardType:"贷记卡",belong:"江阴市农村商业银行"},622341:{length:"6",cardName:"合作借记卡",cardType:"借记卡",belong:"江阴农村商业银行"},940058:{length:"6",cardName:"合作卡(银联卡)",cardType:"借记卡",belong:"江阴农村商业银行"},623115:{length:"6",cardName:"暨阳卡",cardType:"借记卡",belong:"江阴农村商业银行"},622867:{length:"6",cardName:"信合平安卡",cardType:"借记卡",belong:"重庆农村商业银行股份有限公司"},622885:{length:"6",cardName:"信合希望卡",cardType:"借记卡",belong:"重庆农村商业银行股份有限公司"},940020:{length:"6",cardName:"信合一卡通(银联卡)",cardType:"借记卡",belong:"重庆农村商业银行股份有限公司"},621465:{length:"6",cardName:"江渝IC借记卡",cardType:"借记卡",belong:"重庆农村商业银行"},621528:{length:"6",cardName:"江渝乡情福农卡",cardType:"借记卡",belong:"重庆农村商业银行"},621258:{length:"6",cardName:"江渝借记卡VIP卡",cardType:"借记卡",belong:"重庆农村商业银行"},900105:{length:"6",cardName:"信通卡",cardType:"借记卡",belong:"山东农村信用联合社"},900205:{length:"6",cardName:"信通卡",cardType:"借记卡",belong:"山东农村信用联合社"},622319:{length:"6",cardName:"信通卡",cardType:"借记卡",belong:"山东农村信用联合社"},621521:{length:"6",cardName:"泰山福农卡",cardType:"借记卡",belong:"山东省农村信用社联合社"},621690:{length:"6",cardName:"VIP卡",cardType:"借记卡",belong:"山东省农村信用社联合社"},622320:{length:"6",cardName:"泰山如意卡",cardType:"借记卡",belong:"山东省农村信用社联合社"},628375:{length:"6",cardName:"--",cardType:"贷记卡",belong:"山东省农村信用社联合社"},62231902:{length:"8",cardName:"信通卡",cardType:"借记卡",belong:"青岛农信"},90010502:{length:"8",cardName:"信通卡",cardType:"借记卡",belong:"青岛农信"},90020502:{length:"8",cardName:"信通卡",cardType:"借记卡",belong:"青岛农信"},"622328 ":{length:"6",cardName:"信通卡(银联卡)",cardType:"借记卡",belong:"东莞农村商业银行"},940062:{length:"6",cardName:"信通卡(银联卡)",cardType:"借记卡",belong:"东莞农村商业银行"},625288:{length:"6",cardName:"信通信用卡",cardType:"贷记卡",belong:"东莞农村商业银行"},623038:{length:"6",cardName:"信通借记卡",cardType:"借记卡",belong:"东莞农村商业银行"},625888:{length:"6",cardName:"贷记IC卡",cardType:"贷记卡",belong:"东莞农村商业银行"},622332:{length:"6",cardName:"一卡通(银联卡)",cardType:"借记卡",belong:"张家港农村商业银行"},940063:{length:"6",cardName:"一卡通(银联卡)",cardType:"借记卡",belong:"张家港农村商业银行"},623123:{length:"6",cardName:"",cardType:"借记卡",belong:"张家港农村商业银行"},622184:{length:"6",cardName:"万通(借记)卡",cardType:"借记卡",belong:"福建省农村信用社联合社"},621251:{length:"6",cardName:"福建海峡旅游卡",cardType:"借记卡",belong:"福建省农村信用社联合社"},621589:{length:"6",cardName:"福万通福农卡",cardType:"借记卡",belong:"福建省农村信用社联合社"},623036:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"福建省农村信用社联合社"},621701:{length:"6",cardName:"社保卡",cardType:"借记卡",belong:"福建省农村信用社联合社"},622127:{length:"6",cardName:"万通(借记)卡",cardType:"借记卡",belong:"福建省农村信用社联合社"},622138:{length:"6",cardName:"信通卡",cardType:"借记卡",belong:"北京农村商业银行"},621066:{length:"6",cardName:"惠通卡",cardType:"借记卡",belong:"北京农村商业银行"},621560:{length:"6",cardName:"凤凰福农卡",cardType:"借记卡",belong:"北京农村商业银行"},621068:{length:"6",cardName:"惠通卡",cardType:"借记卡",belong:"北京农村商业银行"},620088:{length:"6",cardName:"中国旅行卡",cardType:"借记卡",belong:"北京农村商业银行"},621067:{length:"6",cardName:"凤凰卡",cardType:"借记卡",belong:"北京农村商业银行"},62326520:{length:"8",cardName:"--",cardType:"借记卡",belong:"北京农村商业银行"},625186:{length:"6",cardName:"凤凰标准卡",cardType:"贷记卡",belong:"北京农商行"},628336:{length:"6",cardName:"凤凰公务卡",cardType:"贷记卡",belong:"北京农商行"},625526:{length:"6",cardName:"凤凰福农卡",cardType:"贷记卡",belong:"北京农商行"},622531:{length:"6",cardName:"吉祥商联IC卡",cardType:"借记卡",belong:"天津农村商业银行"},622329:{length:"6",cardName:"信通借记卡(银联卡)",cardType:"借记卡",belong:"天津农村商业银行"},623103:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"天津农村商业银行"},622339:{length:"6",cardName:"蜜蜂借记卡(银联卡)",cardType:"借记卡",belong:"鄞州农村合作银行"},623539:{length:"6",cardName:"--",cardType:"借记卡",belong:"鄞州农村合作银行"},620500:{length:"6",cardName:"蜜蜂电子钱包(IC)",cardType:"借记卡",belong:"宁波鄞州农村合作银行"},621024:{length:"6",cardName:"蜜蜂IC借记卡",cardType:"借记卡",belong:"宁波鄞州农村合作银行"},622289:{length:"6",cardName:"蜜蜂贷记IC卡",cardType:"贷记卡",belong:"宁波鄞州农村合作银行"},622389:{length:"6",cardName:"蜜蜂贷记卡",cardType:"贷记卡",belong:"宁波鄞州农村合作银行"},628300:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"宁波鄞州农村合作银行"},622343:{length:"6",cardName:"信通卡(银联卡)",cardType:"借记卡",belong:"佛山市三水区农村信用合作社"},625516:{length:"6",cardName:"福农卡",cardType:"准贷记卡",belong:"成都农村商业银行"},621516:{length:"6",cardName:"福农卡",cardType:"借记卡",belong:"成都农村商业银行"},622345:{length:"6",cardName:"天府借记卡(银联卡)",cardType:"借记卡",belong:"成都农村商业银行股份有限公司"},622452:{length:"6",cardName:"圆鼎卡(银联卡)",cardType:"借记卡",belong:"江苏农信社"},621578:{length:"6",cardName:"福农卡",cardType:"借记卡",belong:"江苏省农村信用社联合社"},622324:{length:"6",cardName:"圆鼎卡(银联卡)",cardType:"借记卡",belong:"江苏农信社"},623066:{length:"6",cardName:"圆鼎借记IC卡",cardType:"借记卡",belong:"江苏省农村信用社联合社"},623267:{length:"6",cardName:"圆鼎单位结算卡",cardType:"借记卡",belong:"江苏省农村信用社联合社"},622648:{length:"6",cardName:"垂虹贷记卡",cardType:"贷记卡",belong:"吴江农商行"},628248:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"吴江农商行"},622488:{length:"6",cardName:"垂虹卡(银联卡)",cardType:"借记卡",belong:"吴江农商行"},623110:{length:"6",cardName:"--",cardType:"借记卡",belong:"吴江农商行"},622858:{length:"6",cardName:"丰收卡(银联卡)",cardType:"借记卡",belong:"浙江省农村信用社联合社"},621058:{length:"6",cardName:"丰收小额贷款卡",cardType:"借记卡",belong:"浙江省农村信用社联合社"},621527:{length:"6",cardName:"丰收福农卡",cardType:"借记卡",belong:"浙江省农村信用社联合社"},623091:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"浙江省农村信用社联合社"},622288:{length:"6",cardName:"丰收贷记卡",cardType:"贷记卡",belong:"浙江省农村信用社联合社"},628280:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"浙江省农村信用社联合社"},621537:{length:"6",cardName:"丰收IC福农卡",cardType:"借记卡",belong:"浙江省农村信用社联合社"},621736:{length:"6",cardName:"丰收IC小额贷款卡",cardType:"借记卡",belong:"浙江省农村信用社联合社"},623540:{length:"6",cardName:"--",cardType:"借记卡",belong:"浙江省农村信用社联合社"},622686:{length:"6",cardName:"--",cardType:"贷记卡",belong:"浙江省农村信用社联合社"},622855:{length:"6",cardName:"新苏卡(银联卡)",cardType:"借记卡",belong:"苏州银行股份有限公司"},621461:{length:"6",cardName:"新苏卡",cardType:"借记卡",belong:"苏州银行股份有限公司"},623521:{length:"6",cardName:"金桂卡",cardType:"借记卡",belong:"苏州银行股份有限公司"},622859:{length:"6",cardName:"信通卡(银联卡)",cardType:"借记卡",belong:"珠海农村商业银行"},622869:{length:"6",cardName:"郑和卡(银联卡)",cardType:"借记卡",belong:"太仓农村商业银行"},623075:{length:"6",cardName:"郑和IC借记卡",cardType:"借记卡",belong:"太仓农村商业银行"},622882:{length:"6",cardName:"天河卡",cardType:"借记卡",belong:"尧都区农村信用合作社联社"},621779:{length:"6",cardName:"--",cardType:"借记卡",belong:"贵州省农村信用社联合社"},621590:{length:"6",cardName:"信合福农卡",cardType:"借记卡",belong:"贵州省农村信用社联合社"},622893:{length:"6",cardName:"信合卡",cardType:"借记卡",belong:"贵州省农村信用社联合社"},622895:{length:"6",cardName:"金阿福",cardType:"借记卡",belong:"无锡农村商业银行"},623125:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"无锡农村商业银行"},623090:{length:"6",cardName:"福祥借记IC卡",cardType:"借记卡",belong:"湖南省农村信用社联合社"},621519:{length:"6",cardName:"福农借记卡",cardType:"借记卡",belong:"湖南省农村信用社联合社"},621539:{length:"6",cardName:"福祥便民卡",cardType:"借记卡",belong:"湖南省农村信用社联合社"},622169:{length:"6",cardName:"福祥借记卡",cardType:"借记卡",belong:"湖南省农村信用社联合社"},622681:{length:"6",cardName:"百福卡",cardType:"借记卡",belong:"江西农信联合社"},622682:{length:"6",cardName:"百福卡",cardType:"借记卡",belong:"江西农信联合社"},622683:{length:"6",cardName:"百福卡",cardType:"借记卡",belong:"江西农信联合社"},621592:{length:"6",cardName:"百福福农卡",cardType:"借记卡",belong:"江西农信联合社"},622991:{length:"6",cardName:"金燕卡",cardType:"借记卡",belong:"河南省农村信用社联合社"},621585:{length:"6",cardName:"金燕快货通福农卡",cardType:"借记卡",belong:"河南省农村信用社联合社"},623013:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"河南省农村信用社联合社"},623059:{length:"6",cardName:"",cardType:"借记卡",belong:"河南省农村信用社联合社"},622358:{length:"6",cardName:"信通卡(银联卡)",cardType:"借记卡",belong:"河北省农村信用社联合社"},623025:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"河北省农村信用社联合社"},621021:{length:"6",cardName:"信通卡",cardType:"借记卡",belong:"河北省农村信用社联合社"},623501:{length:"6",cardName:"信通IC卡",cardType:"借记卡",belong:"河北省农村信用社联合社"},621566:{length:"6",cardName:"富秦家乐福农卡",cardType:"借记卡",belong:"陕西省农村信用社联合社"},622506:{length:"6",cardName:"陕西信合富秦卡",cardType:"借记卡",belong:"陕西省农村信用社联合社"},623027:{length:"6",cardName:"富秦卡",cardType:"借记卡",belong:"陕西省农村信用社联合社"},623028:{length:"6",cardName:"社会保障卡（陕西信合）",cardType:"借记卡",belong:"陕西省农村信用社联合社"},628323:{length:"6",cardName:"富秦公务卡",cardType:"贷记卡",belong:"陕西省农村信用社联合社"},622992:{length:"6",cardName:"桂盛卡",cardType:"借记卡",belong:"广西农村信用社联合社"},623133:{length:"6",cardName:"桂盛IC借记卡",cardType:"借记卡",belong:"广西农村信用社联合社"},628330:{length:"6",cardName:"",cardType:"贷记卡",belong:"广西壮族自治区农村信用社联合社"},625121:{length:"6",cardName:"桂盛信用卡",cardType:"贷记卡",belong:"广西壮族自治区农村信用社联合社"},621008:{length:"6",cardName:"玉卡",cardType:"借记卡",belong:"新疆维吾尔自治区农村信用社联合"},621525:{length:"6",cardName:"福农卡",cardType:"借记卡",belong:"新疆农村信用社联合社"},621287:{length:"6",cardName:"玉卡金融IC借记卡",cardType:"借记卡",belong:"新疆维吾尔自治区农村信用社联合"},628277:{length:"6",cardName:"玉卡公务卡",cardType:"贷记卡",belong:"新疆维吾尔自治区农村信用社联合社"},622935:{length:"6",cardName:"吉卡",cardType:"借记卡",belong:"吉林农信联合社"},621531:{length:"6",cardName:"吉林农信银联标准吉卡福农借记卡",cardType:"借记卡",belong:"吉林农信联合社"},623181:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"吉林省农村信用社联合社"},623618:{length:"6",cardName:"--",cardType:"借记卡",belong:"吉林省农村信用联合社"},622947:{length:"6",cardName:"黄河卡",cardType:"借记卡",belong:"黄河农村商业银行"},621561:{length:"6",cardName:"黄河富农卡福农卡",cardType:"借记卡",belong:"黄河农村商业银行"},623095:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"黄河农村商业银行"},625150:{length:"6",cardName:"黄河贷记卡",cardType:"贷记卡",belong:"宁夏黄河农村商业银行"},628326:{length:"6",cardName:"黄河公务卡",cardType:"贷记卡",belong:"宁夏黄河农村商业银行"},621526:{length:"6",cardName:"金农易贷福农卡",cardType:"借记卡",belong:"安徽省农村信用社联合社"},622953:{length:"6",cardName:"金农卡",cardType:"借记卡",belong:"安徽省农村信用社联合社"},628387:{length:"6",cardName:"--",cardType:"贷记卡",belong:"安徽省农村信用社联合社"},621536:{length:"6",cardName:"大海福农卡",cardType:"借记卡",belong:"海南省农村信用社联合社"},621036:{length:"6",cardName:"大海卡",cardType:"借记卡",belong:"海南省农村信用社联合社"},621458:{length:"6",cardName:"金融IC借记卡",cardType:"借记卡",belong:"海南省农村信用社联合社"},621517:{length:"6",cardName:"紫丁香福农卡",cardType:"借记卡",belong:"青海省农村信用社联合社"},621065:{length:"6",cardName:"紫丁香借记卡",cardType:"借记卡",belong:"青海省农村信用社联合社"},623017:{length:"6",cardName:"紫丁香",cardType:"借记卡",belong:"青海省农村信用社联合社"},623213:{length:"6",cardName:"中国旅游卡",cardType:"借记卡",belong:"青海省农村信用社联合社"},628289:{length:"6",cardName:"青海省公务卡",cardType:"贷记卡",belong:"青海省农村信用社联合社"},622477:{length:"6",cardName:"信通卡(银联卡)",cardType:"借记卡",belong:"广东省农村信用社联合社"},622509:{length:"6",cardName:"信通白金卡",cardType:"借记卡",belong:"广东省农村信用社联合社"},622510:{length:"6",cardName:"信通金卡",cardType:"借记卡",belong:"广东省农村信用社联合社"},622302:{length:"6",cardName:"信通卡(银联卡)",cardType:"借记卡",belong:"广东省农村信用社联合社"},622362:{length:"6",cardName:"信通卡(银联卡)",cardType:"借记卡",belong:"广东省农村信用社联合社"},621018:{length:"6",cardName:"珠江平安卡",cardType:"借记卡",belong:"广东省农村信用社联合社"},621518:{length:"6",cardName:"珠江平安福农卡",cardType:"借记卡",belong:"广东省农村信用社联合社"},621728:{length:"6",cardName:"珠江平安卡",cardType:"借记卡",belong:"广东省农村信用社联合社"},622470:{length:"6",cardName:"信通卡(银联卡)",cardType:"借记卡",belong:"广东省农村信用社联合社"},621362:{length:"6",cardName:"白金卡",cardType:"借记卡",belong:"内蒙古自治区农村信用联合社"},621533:{length:"6",cardName:"金牛福农卡",cardType:"借记卡",belong:"内蒙古自治区农村信用联合社"},621737:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"内蒙古自治区农村信用联合社"},622976:{length:"6",cardName:"信合金牛卡",cardType:"借记卡",belong:"内蒙古自治区农村信用联合社"},621033:{length:"6",cardName:"蜀信卡",cardType:"借记卡",belong:"四川省农村信用社联合社"},621099:{length:"6",cardName:"蜀信贵宾卡",cardType:"借记卡",belong:"四川省农村信用社联合社"},621457:{length:"6",cardName:"蜀信卡",cardType:"借记卡",belong:"四川省农村信用社联合社"},621459:{length:"6",cardName:"蜀信社保卡",cardType:"借记卡",belong:"四川省农村信用社联合社"},621530:{length:"6",cardName:"蜀信福农卡",cardType:"借记卡",belong:"四川省农村信用社联合社"},623201:{length:"6",cardName:"蜀信旅游卡",cardType:"借记卡",belong:"四川省农村信用社联合社"},623256:{length:"6",cardName:"单位结算卡",cardType:"借记卡",belong:"四川省农村信用社联合社"},628297:{length:"6",cardName:"兴川公务卡",cardType:"贷记卡",belong:"四川省农村信用社联合社"},625097:{length:"6",cardName:"兴川贷记卡",cardType:"贷记卡",belong:"四川省农村信用社联合社"},621061:{length:"6",cardName:"飞天卡",cardType:"借记卡",belong:"甘肃省农村信用社联合社"},621520:{length:"6",cardName:"福农卡",cardType:"借记卡",belong:"甘肃省农村信用社联合社"},623065:{length:"6",cardName:"飞天金融IC借记卡",cardType:"借记卡",belong:"甘肃省农村信用社联合社"},628332:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"甘肃省农村信用社联合社"},621449:{length:"6",cardName:"金信卡",cardType:"借记卡",belong:"辽宁省农村信用社联合社"},621026:{length:"6",cardName:"金信卡",cardType:"借记卡",belong:"辽宁省农村信用社联合社"},628399:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"辽宁省农村信用社联合社"},622968:{length:"6",cardName:"关帝银行卡",cardType:"借记卡",belong:"山西省农村信用社联合社"},621280:{length:"6",cardName:"信合通",cardType:"借记卡",belong:"山西省农村信用社"},621580:{length:"6",cardName:"信合通",cardType:"借记卡",belong:"山西省农村信用社联合社"},623051:{length:"6",cardName:"信合通金融IC卡",cardType:"借记卡",belong:"山西省农村信用社联合社"},621073:{length:"6",cardName:"四海通卡",cardType:"借记卡",belong:"天津滨海农村商业银行"},623109:{length:"6",cardName:"四海通e芯卡",cardType:"借记卡",belong:"天津滨海农村商业银行"},623516:{length:"6",cardName:"",cardType:"借记卡",belong:"黑龙江省农村信用社联合社"},621228:{length:"6",cardName:"鹤卡",cardType:"借记卡",belong:"黑龙江省农村信用社联合社"},62326502:{length:"8",cardName:"鹤卡单位结算卡",cardType:"借记卡",belong:"黑龙江省农村信用社联合社"},621557:{length:"6",cardName:"丰收时贷福农卡",cardType:"借记卡",belong:"黑龙江省农村信用社联合社"},621361:{length:"6",cardName:"汉卡",cardType:"借记卡",belong:"武汉农村商业银行"},623033:{length:"6",cardName:"汉卡",cardType:"借记卡",belong:"武汉农村商业银行"},623207:{length:"6",cardName:"中国旅游卡",cardType:"借记卡",belong:"武汉农村商业银行"},621363:{length:"6",cardName:"财缘卡",cardType:"借记卡",belong:"江南农村商业银行"},622891:{length:"6",cardName:"江南卡",cardType:"借记卡",belong:"江南农村商业银行"},623189:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"江南农村商业银行"},623576:{length:"6",cardName:"江南贵宾卡",cardType:"借记卡",belong:"江南农村商业银行"},623510:{length:"6",cardName:"海口联合农村商业银行合卡",cardType:"借记卡",belong:"海口联合农村商业银行"},625126:{length:"6",cardName:"--",cardType:"贷记卡",belong:"海口农村商业银行"},628320:{length:"6",cardName:"--",cardType:"贷记卡",belong:"海口农村商业银行"},621056802:{length:"9",cardName:"吉祥借记卡",cardType:"借记卡",belong:"安吉交银村镇银行"},621056805:{length:"9",cardName:"--",cardType:"借记卡",belong:"青岛崂山交银村镇银行"},621056801:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"大邑交银兴民村镇银行"},621056803:{length:"9",cardName:"戈壁明珠卡",cardType:"借记卡",belong:"石河子交银村镇银行"},622995:{length:"6",cardName:"垂虹卡",cardType:"借记卡",belong:"湖北嘉鱼吴江村镇银行"},6229756114:{length:"10",cardName:"凤凰卡",cardType:"借记卡",belong:"青岛即墨京都村镇银行"},622975682:{length:"9",cardName:"--",cardType:"借记卡",belong:"青岛即墨京都村镇银行"},6229756115:{length:"10",cardName:"凤凰卡",cardType:"借记卡",belong:"湖北仙桃京都村镇银行"},622975681:{length:"9",cardName:"--",cardType:"借记卡",belong:"湖北仙桃京都村镇银行"},62105913:{length:"8",cardName:"暨阳卡",cardType:"借记卡",belong:"句容苏南村镇银行"},62105903:{length:"8",cardName:"暨阳卡",cardType:"借记卡",belong:"句容苏南村镇银行"},62105916:{length:"8",cardName:"暨阳卡",cardType:"借记卡",belong:"兴化苏南村镇银行"},62105906:{length:"8",cardName:"暨阳卡",cardType:"借记卡",belong:"兴化苏南村镇银行"},62105915:{length:"8",cardName:"暨阳卡",cardType:"借记卡",belong:"海口苏南村镇银行"},62105905:{length:"8",cardName:"暨阳卡",cardType:"借记卡",belong:"海口苏南村镇银行"},62105901:{length:"8",cardName:"暨阳卡",cardType:"借记卡",belong:"双流诚民村镇银行"},62105911:{length:"8",cardName:"暨阳卡",cardType:"借记卡",belong:"双流诚民村镇银行"},62105900:{length:"8",cardName:"暨阳卡",cardType:"借记卡",belong:"宣汉诚民村镇银行"},62105902:{length:"8",cardName:"暨阳卡",cardType:"借记卡",belong:"宣汉诚民村镇银行"},621053:{length:"6",cardName:"玉竹卡",cardType:"借记卡",belong:"福建建瓯瑞狮村镇银行"},621260103:{length:"9",cardName:"金坛磁条芯片复合卡",cardType:"借记卡",belong:"金坛常农商村镇银行"},621260002:{length:"9",cardName:"恩施村镇银行借记卡",cardType:"借记卡",belong:"恩施常农商村镇银行"},621260001:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"咸丰常农商村镇银行"},621275341:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"天津宝坻浦发村镇银行"},621275171:{length:"9",cardName:"泽州浦发村镇银行借记卡",cardType:"借记卡",belong:"泽州浦发村镇银行"},621275181:{length:"9",cardName:"大连甘井子浦发村镇银行借记卡",cardType:"借记卡",belong:"大连甘井子浦发村镇银行"},621275291:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"公主岭浦发村镇银行股份有限公司"},621275281:{length:"9",cardName:"哈尔滨呼兰浦发村镇银行借记卡",cardType:"借记卡",belong:"哈尔滨呼兰浦发村镇银行股份有限公司"},621275111:{length:"9",cardName:"奉贤浦发村镇银行借记卡",cardType:"借记卡",belong:"奉贤浦发村镇银行"},621275191:{length:"9",cardName:"江苏江阴浦发村镇银行借记卡",cardType:"借记卡",belong:"江苏江阴浦发村镇银行"},621275121:{length:"9",cardName:"--",cardType:"借记卡",belong:"溧阳浦发村镇银行"},621275321:{length:"9",cardName:"宁波海曙浦发村镇银行借记卡",cardType:"借记卡",belong:"宁波海曙浦发村镇银行"},621275221:{length:"9",cardName:"--",cardType:"借记卡",belong:"浙江平阳浦发村镇银行"},621275201:{length:"9",cardName:"浙江新昌浦发村镇银行借记卡",cardType:"借记卡",belong:"浙江新昌浦发村镇银行"},621275251:{length:"9",cardName:"--",cardType:"借记卡",belong:"江西临川浦发村镇银行"},621275161:{length:"9",cardName:"邹平浦发村镇银行借记卡",cardType:"借记卡",belong:"邹平浦发村镇银行"},621275131:{length:"9",cardName:"巩义浦发村镇银行借记卡",cardType:"借记卡",belong:"河南巩义浦发村镇银行"},621275241:{length:"9",cardName:"茶陵浦发村镇银行借记卡",cardType:"借记卡",belong:"湖南茶陵浦发村镇银行"},621275271:{length:"9",cardName:"衡南浦发村镇银行借记卡",cardType:"借记卡",belong:"湖南衡南浦发村镇银行"},621275231:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"湖南沅江浦发村镇银行"},621275141:{length:"9",cardName:"资兴浦发村镇银行借记卡",cardType:"借记卡",belong:"资兴浦发村镇银行"},621275261:{length:"9",cardName:"临武浦发村镇银行借记卡",cardType:"借记卡",belong:"临武浦发村镇银行"},621275101:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"绵竹浦发村镇银行"},621275151:{length:"9",cardName:"重庆巴南浦发村镇银行借记卡",cardType:"借记卡",belong:"重庆巴南浦发村镇银行"},621275301:{length:"9",cardName:"富民浦发村镇银行借记卡",cardType:"借记卡",belong:"富民浦发村镇银行"},621275211:{length:"9",cardName:"韩城浦发村镇银行借记卡",cardType:"借记卡",belong:"韩城浦发村镇银行股份有限公司"},621275311:{length:"9",cardName:"--",cardType:"借记卡",belong:"甘肃榆中浦发村镇银行"},621275331:{length:"9",cardName:"--",cardType:"借记卡",belong:"乌鲁木齐米东浦发村镇银行"},621092007:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"江苏邗江联合村镇银行"},62109209:{length:"8",cardName:"--",cardType:"借记卡",belong:"江苏邗江联合村镇银行"},621092003:{length:"9",cardName:"联合卡",cardType:"借记卡",belong:"浙江乐清联合村镇银行"},62109207:{length:"8",cardName:"雁荡卡",cardType:"借记卡",belong:"浙江乐清联合村镇银行"},621092002:{length:"9",cardName:"联合卡",cardType:"借记卡",belong:"浙江嘉善联合村镇银行"},62109202:{length:"8",cardName:"联合卡",cardType:"借记卡",belong:"浙江嘉善联合村镇银行"},621092001:{length:"9",cardName:"联合卡",cardType:"借记卡",belong:"浙江长兴联合村镇银行"},62109203:{length:"8",cardName:"联合卡",cardType:"借记卡",belong:"浙江长兴联合村镇银行"},621092008:{length:"9",cardName:"联合卡",cardType:"借记卡",belong:"浙江柯桥联合村镇银行"},62109208:{length:"8",cardName:"联合卡",cardType:"借记卡",belong:"浙江柯桥联合村镇银行"},62109211:{length:"8",cardName:"联合卡",cardType:"借记卡",belong:"浙江诸暨联合村镇银行"},621092006:{length:"9",cardName:"联合卡",cardType:"借记卡",belong:"浙江义乌联合村镇银行"},62109205:{length:"8",cardName:"--",cardType:"借记卡",belong:"浙江义乌联合村镇银行"},621092004:{length:"9",cardName:"联合卡",cardType:"借记卡",belong:"浙江常山联合村镇银行"},62109212:{length:"8",cardName:"联合卡",cardType:"借记卡",belong:"浙江云和联合村镇银行"},621092005:{length:"9",cardName:"联合卡",cardType:"借记卡",belong:"浙江温岭联合村镇银行"},62109206:{length:"8",cardName:"联合卡",cardType:"借记卡",belong:"浙江温岭联合村镇银行"},621092011:{length:"9",cardName:"--",cardType:"借记卡",belong:"安徽寿县联合村镇银行"},62109214:{length:"8",cardName:"联合卡",cardType:"借记卡",belong:"安徽寿县联合村镇银行"},621092012:{length:"9",cardName:"--",cardType:"借记卡",belong:"安徽霍邱联合村镇银行"},62109215:{length:"8",cardName:"联合卡",cardType:"借记卡",belong:"安徽霍邱联合村镇银行"},621092010:{length:"9",cardName:"联合卡",cardType:"借记卡",belong:"安徽霍山联合村镇银行"},62109213:{length:"8",cardName:"联合卡",cardType:"借记卡",belong:"安徽霍山联合村镇银行"},621308:{length:"6",cardName:"水晶卡",cardType:"借记卡",belong:"江苏东海张农商村镇银行"},621219:{length:"6",cardName:"丰收卡",cardType:"借记卡",belong:"寿光张农商村镇银行"},621230:{length:"6",cardName:"金平卡",cardType:"借记卡",belong:"浙江平湖工银村镇银行"},621229:{length:"6",cardName:"翡翠卡",cardType:"借记卡",belong:"重庆璧山工银村镇银行"},621250004:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"北京密云汇丰村镇银行"},621250006:{length:"9",cardName:"大连普兰店汇丰村镇银行借记卡",cardType:"借记卡",belong:"大连普兰店汇丰村镇银行"},621250003:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"福建永安汇丰村镇银行"},621250011:{length:"9",cardName:"山东荣成汇丰村镇银行借记卡",cardType:"借记卡",belong:"山东荣成汇丰村镇银行"},621250001:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"湖北随州曾都汇丰村镇银行"},621250012:{length:"9",cardName:"湖北麻城汇丰村镇银行借记卡",cardType:"借记卡",belong:"湖北麻城汇丰村镇银行"},621250008:{length:"9",cardName:"湖北天门汇丰村镇银行借记卡",cardType:"借记卡",belong:"湖北天门汇丰村镇银行"},621250010:{length:"9",cardName:"湖南平江汇丰村镇银行借记卡",cardType:"借记卡",belong:"湖南平江汇丰村镇银行"},621250005:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"广东恩平汇丰村镇银行"},621250002:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"重庆大足汇丰村镇银行有限责任公司"},621250009:{length:"9",cardName:"重庆荣昌汇丰村镇银行借记卡",cardType:"借记卡",belong:"重庆荣昌汇丰村镇银行"},621250007:{length:"9",cardName:"重庆丰都汇丰村镇银行借记卡",cardType:"借记卡",belong:"重庆丰都汇丰村镇银行"},621241001:{length:"9",cardName:"新苏借记卡",cardType:"借记卡",belong:"江苏沭阳东吴村镇银行"},622218:{length:"6",cardName:"银联标准贷记卡",cardType:"贷记卡",belong:"重庆农村商业银行"},628267:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"重庆农村商业银行"},62134615:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"三河蒙银村镇银行"},62134614:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"朔州市城区蒙银村镇银行"},62134617:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"呼和浩特市如意蒙银村镇银行"},62134616:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"呼和浩特市赛罕蒙银村镇银行"},62134605:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"呼和浩特市新城蒙银村镇银行"},62134608:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"土默特右旗蒙银村镇银行"},62134620:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"包头市昆都仑蒙银村镇银行"},62134603:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"扎兰屯蒙银村镇银行"},62134604:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"扎赉特蒙银村镇银行"},62134609:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"突泉屯蒙银村镇银行"},62134622:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"霍林郭勒蒙银村镇银行"},62134621:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"开鲁蒙银村镇银行"},62134602:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"卓资蒙银村镇银行"},62134601:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"察哈尔右翼前旗蒙银村镇银行"},621346003:{length:"9",cardName:"龙源腾借记卡",cardType:"借记卡",belong:"鄂尔多斯市东胜蒙银村镇银行"},62134625:{length:"8",cardName:"春雨卡",cardType:"借记卡",belong:"鄂尔多斯市东胜蒙银村镇银行"},62134606:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"五原蒙银村镇银行"},621346002:{length:"9",cardName:"胡杨卡神州卡",cardType:"借记卡",belong:"方大村镇银行"},62134618:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"大连旅顺口蒙银村镇银行"},621346001:{length:"9",cardName:"鼎业卡",cardType:"借记卡",belong:"深圳龙岗鼎业村镇银行"},621326919:{length:"9",cardName:"北京大兴九银村镇银行卡",cardType:"借记卡",belong:"北京大兴九银村镇银行"},621326969:{length:"9",cardName:"南京六合九银村镇银行银行卡",cardType:"借记卡",belong:"南京六合九银村镇银行"},621326979:{length:"9",cardName:"--",cardType:"借记卡",belong:"南昌昌东九银村镇银行"},621326939:{length:"9",cardName:"--",cardType:"借记卡",belong:"修水九银村镇银行"},621326959:{length:"9",cardName:"贵溪九银村镇银行银行卡",cardType:"借记卡",belong:"贵溪九银村镇银行股份有限公司"},621326929:{length:"9",cardName:"--",cardType:"借记卡",belong:"井冈山九银村镇银行"},621326949:{length:"9",cardName:"日照九银村镇银行银行卡",cardType:"借记卡",belong:"日照九银村镇银行"},621326763:{length:"9",cardName:"菊卡",cardType:"借记卡",belong:"中山小榄村镇银行"},621338005:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"江苏惠山民泰村镇银行"},621338008:{length:"9",cardName:"--",cardType:"借记卡",belong:"江苏金湖民泰村镇银行"},621338001:{length:"9",cardName:"金荷花借记卡",cardType:"借记卡",belong:"江苏邗江民泰村镇银行"},621338007:{length:"9",cardName:"--",cardType:"借记卡",belong:"浙江桐乡民泰村镇银行"},621338003:{length:"9",cardName:"--",cardType:"借记卡",belong:"浙江龙泉民泰村镇银行"},621338002:{length:"9",cardName:"--",cardType:"借记卡",belong:"福建漳平民泰村镇银行"},621338010:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"广州白云民泰村镇银行"},621338006:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"重庆九龙坡民泰村镇银行"},621338009:{length:"9",cardName:"--",cardType:"借记卡",belong:"重庆彭水民泰村镇银行"},621353008:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"天津静海新华村镇银行"},621353108:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"天津静海新华村镇银行"},621353113:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"沧州盐山新华村镇银行"},621353115:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"沧州海兴新华村镇银行"},621353117:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"大厂回族自治县新华村镇银行"},621353002:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"安徽当涂新华村镇银行"},621353102:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"安徽当涂新华村镇银行"},621353005:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"安徽和县新华村镇银行"},621353105:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"安徽和县新华村镇银行"},621353007:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"望江新华村镇银行"},621353107:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"望江新华村镇银行"},621353003:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"郎溪新华村镇银行"},621353103:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"郎溪新华村镇银行"},621353006:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"江西兴国新华村镇银行"},621353106:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"江西兴国新华村镇银行"},621353109:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"山东博兴新华村镇银行"},621353001:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"广州番禹新华村镇银行"},621353101:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"广州番禹新华村镇银行"},621353110:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"佛山南海新华村镇银行"},621353112:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"江门新会新华村镇银行"},621353111:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"东莞常平新华村镇银行"},621353118:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"兰州永登新华村镇银行"},621353119:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"兰州皋兰新华村镇银行"},621353120:{length:"9",cardName:"新华卡",cardType:"借记卡",belong:"兰州七里河新华村镇银行"},621356032:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"睢宁中银富登村镇银行"},621356034:{length:"9",cardName:"--",cardType:"借记卡",belong:"苏州吴江中银富登村镇银行"},621356040:{length:"9",cardName:"--",cardType:"借记卡",belong:"响水中银富登村镇银行"},621356014:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"宁波镇海中银富登村镇银行"},621356038:{length:"9",cardName:"--",cardType:"借记卡",belong:"象山中银富登村镇银行"},621356013:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"宁海中银富登村镇银行"},621356055:{length:"9",cardName:"--",cardType:"借记卡",belong:"临泉中银富登村镇银行"},621356046:{length:"9",cardName:"--",cardType:"借记卡",belong:"太和中银富登村镇银行"},621356044:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"阜南中银富登村镇银行"},621356030:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"颍上中银富登村镇银行"},621356026:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"界首中银富登村镇银行"},621356016:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"来安中银富登村镇银行"},621356015:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"全椒中银富登村镇银行"},621356029:{length:"9",cardName:"--",cardType:"借记卡",belong:"宜丰中银富登村镇银行"},621356047:{length:"9",cardName:"--",cardType:"借记卡",belong:"上饶中银富登村镇银行"},621356054:{length:"9",cardName:"--",cardType:"借记卡",belong:"泰和中银富登村镇银行"},621356027:{length:"9",cardName:"--",cardType:"借记卡",belong:"安福中银富登村镇银行"},621356023:{length:"9",cardName:"--",cardType:"借记卡",belong:"栖霞中银富登村镇银行"},621356005:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"青州中银富登村镇银行"},621356018:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"嘉祥中银富登村镇银行"},621356048:{length:"9",cardName:"--",cardType:"借记卡",belong:"汶上中银富登村镇银行"},621356024:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"曲阜中银富登村镇银行"},621356006:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"临邑中银富登村镇银行"},621356004:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"沂水中银富登村镇银行"},621356003:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"曹县中银富登村镇银行"},621356017:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"单县中银富登村镇银行"},621356036:{length:"9",cardName:"--",cardType:"借记卡",belong:"巨野中银富登村镇银行"},621356049:{length:"9",cardName:"--",cardType:"借记卡",belong:"东明中银富登村镇银行"},621356025:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"五莲中银富登村镇银行"},621356020:{length:"9",cardName:"--",cardType:"借记卡",belong:"滑县中银富登村镇银行"},621356019:{length:"9",cardName:"--",cardType:"借记卡",belong:"临颍中银富登村镇银行"},621356021:{length:"9",cardName:"--",cardType:"借记卡",belong:"项城中银富登村镇银行"},621356050:{length:"9",cardName:"--",cardType:"借记卡",belong:"南漳中银富登村镇银行"},621356007:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"谷城中银富登村镇银行"},621356009:{length:"9",cardName:"中银富登村镇银行借记卡",cardType:"借记卡",belong:"老河口中银富登村镇银行"},621356008:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"枣阳中银富登村镇银行"},621356002:{length:"9",cardName:"京山富登借记卡",cardType:"借记卡",belong:"京山中银富登村镇银行"},621356045:{length:"9",cardName:"--",cardType:"借记卡",belong:"沙洋中银富登村镇银行"},621356062:{length:"9",cardName:"--",cardType:"借记卡",belong:"武穴中银富登村镇银行"},621356001:{length:"9",cardName:"中银富登借记卡",cardType:"借记卡",belong:"蕲春中银富登村镇银行"},621356061:{length:"9",cardName:"--",cardType:"借记卡",belong:"黄梅中银富登村镇银行"},621356010:{length:"9",cardName:"中银富登村镇银行借记卡",cardType:"借记卡",belong:"潜江中银富登村镇银行"},621356012:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"松滋中银富登村镇银行"},621356042:{length:"9",cardName:"--",cardType:"借记卡",belong:"公安中银富登村镇银行"},621356011:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"监利中银富登村镇银行"},621356053:{length:"9",cardName:"--",cardType:"借记卡",belong:"武胜中银富登村镇银行"},621356028:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"重庆长寿中银富登村镇银行"},621356037:{length:"9",cardName:"--",cardType:"借记卡",belong:"重庆合川中银富登村镇银行"},621356052:{length:"9",cardName:"--",cardType:"借记卡",belong:"万州中银富登村镇银行"},621356058:{length:"9",cardName:"--",cardType:"借记卡",belong:"重庆城口中银富登村镇银行"},621356041:{length:"9",cardName:"--",cardType:"借记卡",belong:"重庆奉节中银富登村镇银行"},621356039:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"重庆巫山中银富登村镇银行"},621356022:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"重庆石柱中银富登村镇银行"},621356057:{length:"9",cardName:"--",cardType:"借记卡",belong:"凤翔中银富登村镇银行"},621356031:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"乾县中银富登村镇银行"},621356043:{length:"9",cardName:"--",cardType:"借记卡",belong:"蒲城中银富登村镇银行"},621347002:{length:"9",cardName:"大唐卡",cardType:"借记卡",belong:"北京顺义银座村镇银行"},621347008:{length:"9",cardName:"大唐卡",cardType:"借记卡",belong:"浙江景宁银座村镇银行"},62515901:{length:"8",cardName:"大唐IC贷记卡",cardType:"贷记卡",belong:"浙江三门银座村镇银行"},621347005:{length:"9",cardName:"大唐卡",cardType:"借记卡",belong:"浙江三门银座村镇银行"},621347003:{length:"9",cardName:"大唐卡",cardType:"借记卡",belong:"江西赣州银座村镇银行"},621347001:{length:"9",cardName:"大唐卡",cardType:"借记卡",belong:"深圳福田银座村镇银行"},621347101:{length:"9",cardName:"大唐IC借记卡",cardType:"借记卡",belong:"深圳福田银座村镇银行"},621347006:{length:"9",cardName:"大唐卡",cardType:"借记卡",belong:"重庆渝北银座村镇银行"},621347007:{length:"9",cardName:"大唐卡",cardType:"借记卡",belong:"重庆黔江银座村镇银行"},621350010:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"北京怀柔融兴村镇银行"},623589010:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"北京怀柔融兴村镇银行"},623589020:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"河间融惠村镇银行"},621350020:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"河间融惠村镇银行"},621350431:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"榆树融兴村镇银行"},623589431:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"榆树融兴村镇银行"},623589001:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"延寿融兴村镇银行"},623589451:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"巴彦融兴村镇银行"},621350451:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"巴彦融兴村镇银行"},621350001:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"延寿融兴村镇银行"},621350013:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"拜泉融兴村镇银行"},623589013:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"拜泉融兴村镇银行"},623589005:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"桦川融兴村镇银行"},621350005:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"桦川融兴村镇银行"},621350009:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"江苏如东融兴村镇银行"},623589009:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"江苏如东融兴村镇银行"},621350003:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"安义融兴村镇银行"},623589003:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"安义融兴村镇银行"},621350002:{length:"9",cardName:"",cardType:"借记卡",belong:"乐平融兴村镇银行"},623589002:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"乐平融兴村镇银行"},621350015:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"偃师融兴村镇银行"},621350004:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"新安融兴村镇银行"},623589004:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"新安融兴村镇银行"},623589015:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"偃师融兴村镇银行"},621350006:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"应城融兴村镇银行"},623589006:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"应城融兴村镇银行"},621350011:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"洪湖融兴村镇银行"},623589011:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"洪湖融兴村镇银行"},621350016:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"株洲县融兴村镇银行"},623589016:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"株洲县融兴村镇银行"},621350007:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"耒阳融兴村镇银行"},623589007:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"耒阳融兴村镇银行"},621350755:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"深圳宝安融兴村镇银行"},623589755:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"深圳宝安融兴村镇银行"},623589017:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"海南保亭融兴村镇银行"},621350017:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"海南保亭融兴村镇银行"},621350014:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"遂宁安居融兴村镇银行"},623589014:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"遂宁安居融兴村镇银行"},621350019:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"重庆沙坪坝融兴村镇银行"},623589012:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"重庆市大渡口融兴村镇银行"},621350012:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"重庆大渡口融兴村镇银行"},621350008:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"重庆市武隆融兴村镇银行"},623589008:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"重庆市武隆融兴村镇银行"},621350018:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"重庆市酋阳融兴村镇银行"},623589019:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"重庆市沙坪坝融兴村镇银行"},623589018:{length:"9",cardName:"融兴普惠卡",cardType:"借记卡",belong:"重庆市酉阳融兴村镇银行"},621350943:{length:"9",cardName:"会师普惠卡",cardType:"借记卡",belong:"会宁会师村镇银行"},623589943:{length:"9",cardName:"会师普惠卡",cardType:"借记卡",belong:"会宁会师村镇银行"},621392:{length:"6",cardName:"玉都卡",cardType:"借记卡",belong:"南阳村镇银行"},621392887:{length:"9",cardName:"玉都一卡通",cardType:"借记卡",belong:"南阳村镇银行"},621399017:{length:"9",cardName:"宁晋民生村镇银行借记卡",cardType:"借记卡",belong:"宁晋民生村镇银行"},621399008:{length:"9",cardName:"梅河口民生村镇银行借记卡",cardType:"借记卡",belong:"梅河口民生村镇银行"},621399001:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"上海松江民生村镇银行"},621399012:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"嘉定民生村镇银行"},621399016:{length:"9",cardName:"--",cardType:"借记卡",belong:"太仓民生村镇银行"},621399015:{length:"9",cardName:"--",cardType:"借记卡",belong:"阜宁民生村镇银行"},621399025:{length:"9",cardName:"天台民生村镇银行借记卡",cardType:"借记卡",belong:"天台民生村镇银行"},621399026:{length:"9",cardName:"天长民生村镇银行借记卡",cardType:"借记卡",belong:"天长民生村镇银行"},621399023:{length:"9",cardName:"宁国民生村镇银行借记卡",cardType:"借记卡",belong:"宁国民生村镇银行"},621399024:{length:"9",cardName:"--",cardType:"借记卡",belong:"池州贵池民生村镇银行"},621399028:{length:"9",cardName:"--",cardType:"借记卡",belong:"厦门翔安民生村镇银行"},621399002:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"安溪民生村镇银行"},621399018:{length:"9",cardName:"漳浦民生村镇银行借记卡",cardType:"借记卡",belong:"漳浦民生村镇银行"},621399014:{length:"9",cardName:"--",cardType:"借记卡",belong:"蓬莱民生村镇银行"},621399010:{length:"9",cardName:"长垣民生村镇银行借记卡",cardType:"借记卡",belong:"长垣民生村镇银行"},621399009:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"江夏民生村镇银行"},621399011:{length:"9",cardName:"宜都民生村镇银行借记卡",cardType:"借记卡",belong:"宜都民生村镇银行"},621399011:{length:"9",cardName:"宜都民生村镇银行借记卡",cardType:"借记卡",belong:"宜都民生村镇银行"},621399013:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"钟祥民生村镇银行"},621399003:{length:"9",cardName:"--",cardType:"借记卡",belong:"彭州民生村镇银行"},621399007:{length:"9",cardName:"--",cardType:"借记卡",belong:"资阳民生村镇银行"},621399005:{length:"9",cardName:"綦江民生村镇银行借记卡",cardType:"借记卡",belong:"綦江民生村镇银行"},621399006:{length:"9",cardName:"潼南民生村镇银行借记卡",cardType:"借记卡",belong:"潼南民生村镇银行"},621399021:{length:"9",cardName:"--",cardType:"借记卡",belong:"普洱民生村镇银行"},621399019:{length:"9",cardName:"--",cardType:"借记卡",belong:"景洪民生村镇银行"},621399027:{length:"9",cardName:"腾冲民生村镇银行",cardType:"借记卡",belong:"腾冲民生村镇银行"},621399020:{length:"9",cardName:"",cardType:"借记卡",belong:"志丹民生村镇银行"},621399022:{length:"9",cardName:"--",cardType:"借记卡",belong:"榆林榆阳民生村镇银行"},621365006:{length:"9",cardName:"湖商卡",cardType:"借记卡",belong:"浙江萧山湖商村镇银行"},621365001:{length:"9",cardName:"湖商卡",cardType:"借记卡",belong:"浙江建德湖商村镇银行"},621365012:{length:"9",cardName:"湖商卡",cardType:"借记卡",belong:"浙江瑞安湖商村镇银行"},621365011:{length:"9",cardName:"湖商卡",cardType:"借记卡",belong:"浙江海盐湖商村镇银行"},621365005:{length:"9",cardName:"湖商卡",cardType:"借记卡",belong:"浙江德清湖商村镇银行"},621365007:{length:"9",cardName:"湖商卡",cardType:"借记卡",belong:"安徽濉溪湖商卡村镇银行"},621365004:{length:"9",cardName:"湖商卡",cardType:"借记卡",belong:"安徽粤西湖商村镇银行"},621365009:{length:"9",cardName:"湖商卡",cardType:"借记卡",belong:"安徽宣州湖商村镇银行"},621365008:{length:"9",cardName:"湖商卡",cardType:"借记卡",belong:"安徽涡阳湖商村镇银行"},621365003:{length:"9",cardName:"湖商卡",cardType:"借记卡",belong:"安徽蒙城湖商村镇银行"},621365002:{length:"9",cardName:"湖商卡",cardType:"借记卡",belong:"安徽利辛湖商村镇银行"},621365010:{length:"9",cardName:"湖商卡",cardType:"借记卡",belong:"安徽谯城湖商村镇银行"},621401001:{length:"9",cardName:"恒欣卡",cardType:"借记卡",belong:"福建连江恒欣村镇银行"},62140101:{length:"8",cardName:"--",cardType:"借记卡",belong:"福鼎恒兴村镇银行"},621401002:{length:"9",cardName:"--",cardType:"借记卡",belong:"福鼎恒兴村镇银行"},623143003:{length:"9",cardName:"--",cardType:"借记卡",belong:"吕梁孝义汇通村镇银行"},621481:{length:"6",cardName:"魏榆卡",cardType:"借记卡",belong:"晋中市榆次融信村镇银行"},623143001:{length:"9",cardName:"祝融卡",cardType:"借记卡",belong:"晋中市左权华丰村镇银行"},623143002:{length:"9",cardName:"亿通卡",cardType:"借记卡",belong:"汾西县亿通村镇银行"},621393001:{length:"9",cardName:"围龙借记卡",cardType:"借记卡",belong:"梅县客家村镇银行"},62139383:{length:"8",cardName:"--",cardType:"借记卡",belong:"新疆库尔勒富民村镇银行"},621623001:{length:"9",cardName:"宝生村镇银行一卡通",cardType:"借记卡",belong:"宝生村镇银行"},621397001:{length:"9",cardName:"江南卡",cardType:"借记卡",belong:"江苏大丰江南村镇银行"},621397101:{length:"9",cardName:"大丰江南卡",cardType:"借记卡",belong:"江苏大丰江南村镇银行"},621627008:{length:"9",cardName:"义卡借记卡",cardType:"借记卡",belong:"江苏东台稠州村镇银行"},621627005:{length:"9",cardName:"银联义卡借记卡",cardType:"借记卡",belong:"浙江舟山普陀稠州村镇银行"},621627002:{length:"9",cardName:"--",cardType:"借记卡",belong:"浙江岱山稠州村镇银行"},621627001:{length:"9",cardName:"",cardType:"借记卡",belong:"吉安稠州村镇银行"},621627007:{length:"9",cardName:"义卡借记卡",cardType:"借记卡",belong:"广州花都稠州村镇银行"},621627009:{length:"9",cardName:"--",cardType:"借记卡",belong:"龙泉驿稠州村镇银行"},621627003:{length:"9",cardName:"义卡",cardType:"借记卡",belong:"重庆北碚稠州村镇银行"},621627006:{length:"9",cardName:"义卡",cardType:"借记卡",belong:"忠县稠州村镇银行"},621627010:{length:"9",cardName:"义卡",cardType:"借记卡",belong:"云南安宁稠州村镇银行"},621635101:{length:"9",cardName:"",cardType:"借记卡",belong:"象山国民村镇银行"},621635114:{length:"9",cardName:"鄞州国民村镇银行借记IC卡",cardType:"借记卡",belong:"宁波市鄞州国民村镇银行"},621635003:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"南宁江南国民村镇银行"},621635103:{length:"9",cardName:"蜜蜂借记IC卡",cardType:"借记卡",belong:"南宁江南国民村镇银行"},621635124:{length:"9",cardName:"--",cardType:"借记卡",belong:"广西上林国民村镇银行"},621635004:{length:"9",cardName:"蜜蜂卡",cardType:"借记卡",belong:"桂林国民村镇银行"},621635104:{length:"9",cardName:"桂林国民村镇银行蜜蜂IC借记卡",cardType:"借记卡",belong:"桂林国民村镇银行"},621635112:{length:"9",cardName:"",cardType:"借记卡",belong:"银海国民村镇银行"},621635109:{length:"9",cardName:"",cardType:"借记卡",belong:"合浦国民村镇银行"},621635111:{length:"9",cardName:"平果国民村镇银行蜜蜂借记卡",cardType:"借记卡",belong:"平果国民村镇银行"},621635013:{length:"9",cardName:"钦南国民村镇银行蜜蜂借记卡",cardType:"借记卡",belong:"钦州市钦南国民村镇银行"},621635113:{length:"9",cardName:"钦南国民村镇银行蜜蜂IC借记卡",cardType:"借记卡",belong:"钦州市钦南国民村镇银行"},621635119:{length:"9",cardName:"--",cardType:"借记卡",belong:"广西浦北国民村镇银行"},621635010:{length:"9",cardName:"蜜蜂借记卡",cardType:"借记卡",belong:"防城港防城国民村镇银行"},621635110:{length:"9",cardName:"--",cardType:"借记卡",belong:"防城港防城国民村镇银行"},621635005:{length:"9",cardName:"——",cardType:"借记卡",belong:"东兴国民村镇银行"},621635105:{length:"9",cardName:"",cardType:"借记卡",belong:"东兴国民村镇银行"},621635007:{length:"9",cardName:"蜜蜂磁条借记卡",cardType:"借记卡",belong:"邛崃国民村镇银行"},621635107:{length:"9",cardName:"邛崃国民村镇银行蜜蜂借机IC卡",cardType:"借记卡",belong:"邛崃国民村镇银行"},621635118:{length:"9",cardName:"蜜蜂借记IC卡",cardType:"借记卡",belong:"绿洲国民村镇银行"},621635122:{length:"9",cardName:"蜜蜂借记IC卡",cardType:"借记卡",belong:"克拉玛依金龙国民村镇银行"},621635115:{length:"9",cardName:"哈密红星国民村镇银行IC复合卡",cardType:"借记卡",belong:"哈密红星国民村镇银行"},621635108:{length:"9",cardName:"",cardType:"借记卡",belong:"昌吉国民村镇银行"},621635117:{length:"9",cardName:"博乐国民村镇银行蜜蜂借记IC卡",cardType:"借记卡",belong:"博乐国民村镇银行"},621635125:{length:"9",cardName:"蜜蜂借记IC卡",cardType:"借记卡",belong:"库车国民村镇银行"},621635123:{length:"9",cardName:"奎屯国民村镇银行蜜蜂借记卡",cardType:"借记卡",belong:"奎屯国民村镇银行"},621635120:{length:"9",cardName:"伊犁国民村镇银行蜜蜂借记IC卡",cardType:"借记卡",belong:"伊犁国民村镇银行"},621635106:{length:"9",cardName:"--",cardType:"借记卡",belong:"石河子国民村镇银行"},621635102:{length:"9",cardName:"五家渠国民村镇银行借记IC卡",cardType:"借记卡",belong:"五家渠国民村镇银行"},621635116:{length:"9",cardName:"北屯国民村镇银行蜜蜂借记卡",cardType:"借记卡",belong:"北屯国民村镇银行"},621650002:{length:"9",cardName:"赀业卡",cardType:"借记卡",belong:"文昌国民村镇银行"},621650102:{length:"9",cardName:"赀业卡",cardType:"借记卡",belong:"文昌国民村镇银行"},621650001:{length:"9",cardName:"椰卡",cardType:"借记卡",belong:"琼海国民村镇银行"},621650101:{length:"9",cardName:"椰卡",cardType:"借记卡",belong:"琼海国民村镇银行"},621630002:{length:"9",cardName:"襄隆汇通卡",cardType:"借记卡",belong:"迁安襄隆村镇银行"},621630003:{length:"9",cardName:"襄通卡",cardType:"借记卡",belong:"沙河襄通村镇银行"},621630001:{length:"9",cardName:"金农汇通卡",cardType:"借记卡",belong:"清河金农村镇银行"},62163113:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"北京门头沟珠江村镇银行"},62163103:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"大连保税区珠江村镇银行"},62163122:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"苏州吴中珠江村镇银行"},62163119:{length:"8",cardName:"启东珠江卡",cardType:"借记卡",belong:"启东珠江村镇银行"},62163120:{length:"8",cardName:"盱眙珠江卡",cardType:"借记卡",belong:"盱眙珠江村镇银行"},62163112:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"吉安吉州珠江村镇银行"},62163117:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"青岛城阳珠江村镇银行"},62163114:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"福山珠江村镇银行"},62163116:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"海阳珠江村镇银行"},62163115:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"莱州珠江村镇银行"},62163104:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"莱芜珠江村镇银行"},62163118:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"安阳珠江村镇银行"},62163108:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"辉县珠江村镇银行"},62163107:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"信阳珠江村镇银行"},62163121:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"常宁珠江村镇银行"},62163125:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"深圳坪山珠江村镇银行"},621310:{length:"6",cardName:"珠江太阳卡",cardType:"借记卡",belong:"三水珠江村镇银行"},62163101:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"鹤山珠江村镇银行"},62163123:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"兴宁珠江村镇银行"},62163102:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"中山东凤珠江村镇银行"},62163109:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"新津珠江村镇银行"},62163110:{length:"8",cardName:"",cardType:"借记卡",belong:"广汉珠江村镇银行"},62163111:{length:"8",cardName:"珠江太阳卡",cardType:"借记卡",belong:"彭山珠江村镇银行"},621637009:{length:"9",cardName:"汇泽借记卡",cardType:"借记卡",belong:"唐县汇泽村镇银行"},621637008:{length:"9",cardName:"汇泽借记卡",cardType:"借记卡",belong:"古交汇泽村镇银行"},621637006:{length:"9",cardName:"汇泽借记卡",cardType:"借记卡",belong:"兴县汇泽村镇银行"},621637007:{length:"9",cardName:"汇泽借记卡",cardType:"借记卡",belong:"柳林汇泽村镇银行"},621637005:{length:"9",cardName:"汇泽借记卡",cardType:"借记卡",belong:"正蓝旗汇泽村镇银行"},621637004:{length:"9",cardName:"汇泽借记卡",cardType:"借记卡",belong:"兴和汇泽村镇银行"},621637001:{length:"9",cardName:"汇泽借记卡",cardType:"借记卡",belong:"鄂尔多斯市康巴什村镇银行"},621637002:{length:"9",cardName:"汇泽借记卡",cardType:"借记卡",belong:"罕台村镇银行"},621637003:{length:"9",cardName:"汇泽借记卡",cardType:"借记卡",belong:"鄂托克旗汇泽村镇银行"},62163750:{length:"8",cardName:"金羊卡",cardType:"借记卡",belong:"鄂托克旗汇泽村镇银行"},621653002:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"安徽肥西石银村镇银行"},621653003:{length:"9",cardName:"--",cardType:"借记卡",belong:"青岛莱西元泰村镇银行"},621653004:{length:"9",cardName:"麒麟借记卡",cardType:"借记卡",belong:"重庆南川石银村镇银行"},621653005:{length:"9",cardName:"麒麟借记卡",cardType:"借记卡",belong:"重庆江津石银村镇银行"},621653007:{length:"9",cardName:"麒麟借记卡",cardType:"借记卡",belong:"银川掌政石银村镇银行"},621653006:{length:"9",cardName:"麒麟借记卡",cardType:"借记卡",belong:"大武口石银村镇银行"},621653001:{length:"9",cardName:"麒麟借记卡",cardType:"借记卡",belong:"吴忠市滨河村镇银行"},62308299:{length:"8",cardName:"利卡",cardType:"借记卡",belong:"广元贵商村镇银行"},621628661:{length:"9",cardName:"--",cardType:"借记卡",belong:"丰城顺银村镇银行"},621628662:{length:"9",cardName:"恒通卡",cardType:"借记卡",belong:"樟树顺银村镇银行"},621628660:{length:"9",cardName:"恒通卡",cardType:"借记卡",belong:"佛山高明顺银村镇银行"},621316001:{length:"9",cardName:"海汇卡",cardType:"借记卡",belong:"青岛胶南海汇村镇银行"},62319801:{length:"8",cardName:"--",cardType:"借记卡",belong:"惠州仲恺东盈村镇银行"},62319806:{length:"8",cardName:"东盈卡",cardType:"借记卡",belong:"东莞大朗东盈村镇银行"},62319802:{length:"8",cardName:"东盈卡",cardType:"借记卡",belong:"云浮新兴东盈民生村镇银行"},62319803:{length:"8",cardName:"东盈卡",cardType:"借记卡",belong:"贺州八步东盈村镇银行"},621355052:{length:"9",cardName:"阳羡卡",cardType:"借记卡",belong:"宜兴阳羡村镇银行"},621355002:{length:"9",cardName:"阳羡卡",cardType:"借记卡",belong:"宜兴阳羡村镇银行"},621355051:{length:"9",cardName:"--",cardType:"借记卡",belong:"昆山鹿城村镇银行"},621355001:{length:"9",cardName:"鹿城卡",cardType:"借记卡",belong:"昆山鹿城村镇银行"},621675001:{length:"9",cardName:"金丰卡",cardType:"借记卡",belong:"南昌大丰村镇银行"},62309702:{length:"8",cardName:"--",cardType:"借记卡",belong:"襄垣县融汇村镇银行"},62309701:{length:"8",cardName:"融汇卡",cardType:"借记卡",belong:"长子县融汇村镇银行"},621656002:{length:"9",cardName:"京津之翼卡",cardType:"借记卡",belong:"天津武清村镇银行"},621656003:{length:"9",cardName:"金莲卡",cardType:"借记卡",belong:"五台莱商村镇银行"},621396:{length:"6",cardName:"绿洲卡",cardType:"借记卡",belong:"东营莱商村镇银行"},62165666:{length:"8",cardName:"--",cardType:"借记卡",belong:"东营莱商村镇银行"},621656001:{length:"9",cardName:"“豫如意”白金卡",cardType:"借记卡",belong:"河南方城凤裕村镇银行"},621659002:{length:"9",cardName:"长白山卡",cardType:"借记卡",belong:"沧县吉银村镇银行"},621659001:{length:"9",cardName:"长白山卡",cardType:"借记卡",belong:"永清吉银村镇银行"},621659006:{length:"9",cardName:"",cardType:"借记卡",belong:"长春双阳吉银村镇银行"},621659009:{length:"9",cardName:"--",cardType:"借记卡",belong:"舒兰吉银村镇银行"},621659008:{length:"9",cardName:"长白山卡",cardType:"借记卡",belong:"双辽吉银村镇银行"},621659010:{length:"9",cardName:"--",cardType:"借记卡",belong:"东丰吉银村镇银行"},621659003:{length:"9",cardName:"长白山卡",cardType:"借记卡",belong:"珲春吉银村镇银行"},621398001:{length:"9",cardName:"长白山卡",cardType:"借记卡",belong:"江都吉银村镇银行"},621676014:{length:"9",cardName:"长江卡",cardType:"借记卡",belong:"镇江润州长江村镇银行"},621676009:{length:"9",cardName:"长江卡",cardType:"借记卡",belong:"湖北红安长江村镇银行股份有限公司"},621676010:{length:"9",cardName:"长江卡",cardType:"借记卡",belong:"湖北英山长江村镇银行股份有限公司"},621676001:{length:"9",cardName:"汉卡",cardType:"借记卡",belong:"湖北咸安长江村镇银行"},621676002:{length:"9",cardName:"汉卡",cardType:"借记卡",belong:"湖北赤壁长江村镇银行"},621676003:{length:"9",cardName:"汉卡",cardType:"借记卡",belong:"广州增城长江村镇银行"},621676006:{length:"9",cardName:"长江卡",cardType:"借记卡",belong:"汕头龙湖长江村镇银行"},621676013:{length:"9",cardName:"长江卡",cardType:"借记卡",belong:"茂名电白长江村镇银行"},621676012:{length:"9",cardName:"长江卡",cardType:"借记卡",belong:"惠州博罗长江村镇银行"},621676011:{length:"9",cardName:"长江卡",cardType:"借记卡",belong:"东莞虎门长江村镇银行"},621676008:{length:"9",cardName:"长江卡",cardType:"借记卡",belong:"潮州潮安长江村镇银行"},621676005:{length:"9",cardName:"长江卡",cardType:"借记卡",belong:"海南五指山长江村镇银行股份有限公司"},621676004:{length:"9",cardName:"长江卡",cardType:"借记卡",belong:"海南澄迈长江村镇银行股份有限公司"},621676015:{length:"9",cardName:"--",cardType:"借记卡",belong:"昆明五华长江村镇银行"},621676019:{length:"9",cardName:"--",cardType:"借记卡",belong:"曲靖宣威长江村镇银行"},621676020:{length:"9",cardName:"长江卡",cardType:"借记卡",belong:"曲靖会泽长江村镇银行"},621676018:{length:"9",cardName:"长江卡",cardType:"借记卡",belong:"西双版纳勐海长江村镇银行"},621676016:{length:"9",cardName:"长江卡",cardType:"借记卡",belong:"丽水永胜长江村镇银行"},621676017:{length:"9",cardName:"长江卡",cardType:"借记卡",belong:"丽江玉龙长江村镇银行"},621678105:{length:"9",cardName:"上虞富民村镇银行富民卡",cardType:"借记卡",belong:"浙江上虞富民村镇银行"},621678101:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"浙江遂昌富民村镇银行"},621678106:{length:"9",cardName:"路桥富民村镇银行富民IC卡",cardType:"借记卡",belong:"浙江台州路桥富民村镇银行"},621678001:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"萍乡安源富民村镇银行"},621678002:{length:"9",cardName:"--",cardType:"借记卡",belong:"江西上栗富民村镇银行"},621678208:{length:"9",cardName:"富民卡",cardType:"借记卡",belong:"贵阳乌当富民村镇银行"},621678213:{length:"9",cardName:"富民卡",cardType:"借记卡",belong:"开阳富民村镇银行"},621678207:{length:"9",cardName:"富民卡",cardType:"借记卡",belong:"贵阳观山湖富民村镇银行"},621678209:{length:"9",cardName:"富民卡",cardType:"借记卡",belong:"贵阳云岩富民村镇银行"},621678211:{length:"9",cardName:"富民卡",cardType:"借记卡",belong:"贵阳南明富民村镇银行"},621678212:{length:"9",cardName:"富民卡",cardType:"借记卡",belong:"遵义红花岗富民村镇银行"},621678202:{length:"9",cardName:"富民卡",cardType:"借记卡",belong:"大方富民村镇银行"},621678201:{length:"9",cardName:"富民卡",cardType:"借记卡",belong:"金沙富民村镇银行"},621678203:{length:"9",cardName:"富民卡",cardType:"借记卡",belong:"纳雍富民村镇银行"},621678205:{length:"9",cardName:"富民卡",cardType:"借记卡",belong:"威宁富民村镇银行"},621678206:{length:"9",cardName:"富民卡",cardType:"借记卡",belong:"赫章富民村镇银行"},621678210:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"安顺西秀富民村镇银行"},621678215:{length:"9",cardName:"富民卡",cardType:"借记卡",belong:"福泉富民村镇银行"},621680002:{length:"9",cardName:"江渝卡",cardType:"借记卡",belong:"张家港渝农商村镇银行"},621680102:{length:"9",cardName:"--",cardType:"借记卡",belong:"张家港渝农商村镇银行"},621680007:{length:"9",cardName:"江渝借记卡",cardType:"借记卡",belong:"福建平潭渝农商村镇银行"},621680107:{length:"9",cardName:"--",cardType:"借记卡",belong:"福建平潭渝农商村镇银行"},621680009:{length:"9",cardName:"江渝卡",cardType:"借记卡",belong:"福建沙县渝农商村镇银行"},621680109:{length:"9",cardName:"--",cardType:"借记卡",belong:"福建沙县渝农商村镇银行"},621680010:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"福建福安渝农商村镇银行"},621680110:{length:"9",cardName:"--",cardType:"借记卡",belong:"福建福安渝农商村镇银行"},621680005:{length:"9",cardName:"江渝卡",cardType:"借记卡",belong:"广西鹿寨渝农商村镇银行"},621680105:{length:"9",cardName:"--",cardType:"借记卡",belong:"广西鹿寨渝农商村镇银行"},621680003:{length:"9",cardName:"江渝卡",cardType:"借记卡",belong:"大竹渝农商村镇银行"},621680103:{length:"9",cardName:"--",cardType:"借记卡",belong:"大竹渝农商村镇银行"},621680004:{length:"9",cardName:"江渝卡",cardType:"借记卡",belong:"云南大理渝农商村镇银行"},621680104:{length:"9",cardName:"--",cardType:"借记卡",belong:"云南大理渝农商村镇银行"},621680006:{length:"9",cardName:"江渝卡",cardType:"借记卡",belong:"云南祥云渝农商村镇银行"},621680106:{length:"9",cardName:"--",cardType:"借记卡",belong:"云南祥云渝农商村镇银行"},621680008:{length:"9",cardName:"江渝卡",cardType:"借记卡",belong:"云南鹤庆渝农商村镇银行"},621680108:{length:"9",cardName:"--",cardType:"借记卡",belong:"云南鹤庆渝农商村镇银行"},621680011:{length:"9",cardName:"江渝卡",cardType:"借记卡",belong:"云南香格里拉渝农商村镇银行"},621680111:{length:"9",cardName:"--",cardType:"借记卡",belong:"云南香格里拉渝农商村镇银行"},621681001:{length:"9",cardName:"永安卡",cardType:"借记卡",belong:"沈阳于洪永安村镇银行"},621681002:{length:"9",cardName:"鑫荷卡",cardType:"借记卡",belong:"辽宁彰武金通村镇银行股份有限公司"},621681003:{length:"9",cardName:"--",cardType:"借记卡",belong:"铁岭农商村镇银行"},621682002:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"北京房山沪农商村镇银行"},621682101:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"济南长清沪农商村镇银行"},621682803:{length:"9",cardName:"--",cardType:"借记卡",belong:"济南长清沪农商村镇银行"},621682102:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"济南槐荫沪农商村镇银行"},621682106:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"泰安沪农商村镇银行"},621682103:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"宁阳沪农商村镇银行"},621682105:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"东平沪农商村镇银行"},621682110:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"聊城沪农商村镇银行"},621682111:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"临清沪农商村镇银行"},621682109:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"阳谷沪农商村镇银行"},621682108:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"茌平沪农商村镇银行"},621682107:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"日照沪农商村镇银行"},621682202:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"长沙星沙沪农商村镇银行"},621682201:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"宁乡沪农商行村镇银行"},621682203:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"醴陵沪农商村镇银行"},621682205:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"衡阳沪农商村镇银行"},621682209:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"澧县沪农商村镇银行"},621682208:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"临澧沪农商村镇银行"},621682210:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"石门沪农商村镇银行"},621682213:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"慈利沪农商村镇银行"},621682211:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"涟源沪农商村镇银行"},621682212:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"双峰沪农商村镇银行"},621682207:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"桂阳沪农商村镇银行"},621682206:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"永兴沪农商村镇银行"},621682003:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"深圳光明沪农商村镇银行"},621682301:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"阿拉沪农商村镇银行"},621682302:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"嵩明沪农商村镇银行"},621682305:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"个旧沪农商村镇银行"},621682307:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"开远沪农商村镇银行"},621682306:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"蒙自沪农商村镇银行"},621682309:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"建水沪农商村镇银行"},621682308:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"弥勒沪农商村镇银行"},621682310:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"保山隆阳沪农商村镇银行"},621682303:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"瑞丽沪农商村镇银行"},621682830:{length:"9",cardName:"--",cardType:"借记卡",belong:"瑞丽沪农商村镇银行"},621682311:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"临沧临翔沪农商村镇银行"},621685701:{length:"9",cardName:"潮商卡",cardType:"借记卡",belong:"广东澄海潮商村镇银行"},621685702:{length:"9",cardName:"铁山兰花卡",cardType:"借记卡",belong:"广东普宁汇成村镇银行"},621687913:{length:"9",cardName:"豫丰卡",cardType:"借记卡",belong:"宝丰豫丰村镇银行"},621687001:{length:"9",cardName:"--",cardType:"借记卡",belong:"灵宝融丰村镇银行"},62169301:{length:"8",cardName:"鼎元一卡通",cardType:"借记卡",belong:"丹东鼎元村镇银行"},62169302:{length:"8",cardName:"鼎安杜鹃卡",cardType:"借记卡",belong:"丹东鼎安村镇银行"},62169303:{length:"8",cardName:"江城卡",cardType:"借记卡",belong:"丹东福汇村镇银行"},62169502:{length:"8",cardName:"福鼎卡",cardType:"借记卡",belong:"中牟郑银村镇银行"},62169501:{length:"8",cardName:"",cardType:"借记卡",belong:"新密郑银村镇银行"},62169503:{length:"8",cardName:"",cardType:"借记卡",belong:"鄢陵郑银村镇银行"},62352801:{length:"8",cardName:"借记卡",cardType:"借记卡",belong:"安徽五河永泰村镇银行"},621697813:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"天津华明村镇银行"},62169757:{length:"8",cardName:"同心卡",cardType:"借记卡",belong:"天津宁河村镇银行"},621697793:{length:"9",cardName:"同心卡",cardType:"借记卡",belong:"任丘村镇银行"},621697873:{length:"9",cardName:"同心卡",cardType:"借记卡",belong:"芜湖泰寿村镇银行"},62169716:{length:"8",cardName:"同心卡",cardType:"借记卡",belong:"山东兰陵村镇银行股份有限公司"},62311703:{length:"8",cardName:"合益卡",cardType:"借记卡",belong:"尉氏合益村镇银行"},62311702:{length:"8",cardName:"--",cardType:"借记卡",belong:"开封新东方村镇银行"},62311701:{length:"8",cardName:"",cardType:"借记卡",belong:"长葛轩辕村镇银行"},62312201:{length:"8",cardName:"金融IC借记卡",cardType:"借记卡",belong:"海南儋州绿色村镇银行"},62317502:{length:"8",cardName:"兴彝卡",cardType:"借记卡",belong:"楚雄兴彝村镇银行"},62317501:{length:"8",cardName:"新兴卡",cardType:"借记卡",belong:"玉溪红塔区兴和村镇银行"},621689007:{length:"9",cardName:"广州从化柳银村镇银行龙城卡",cardType:"借记卡",belong:"从化柳银村镇银行"},621689001:{length:"9",cardName:"柳江柳银村镇银行龙城卡",cardType:"借记卡",belong:"柳江柳银村镇银行"},621689002:{length:"9",cardName:"融水柳银村镇银行龙城卡",cardType:"借记卡",belong:"融水柳银村镇银行"},621689004:{length:"9",cardName:"广西北流柳银村镇银行龙城卡",cardType:"借记卡",belong:"北流柳银村镇银行"},621689005:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"陆川柳银村镇银行"},621689006:{length:"9",cardName:"龙城卡",cardType:"借记卡",belong:"博白柳银村镇银行"},621689003:{length:"9",cardName:"龙城卡",cardType:"借记卡",belong:"兴业柳银村镇银行"},621380001:{length:"9",cardName:"乡缘卡",cardType:"借记卡",belong:"遂平恒生村镇银行"},621387973:{length:"9",cardName:"兰江卡",cardType:"借记卡",belong:"浙江兰溪越商村镇银行"},621381001:{length:"9",cardName:"韶山光大村镇银行阳光借记卡",cardType:"借记卡",belong:"韶山光大村镇银行"},621382019:{length:"9",cardName:"",cardType:"借记卡",belong:"北京昌平兆丰村镇银行"},621382018:{length:"9",cardName:"",cardType:"借记卡",belong:"天津津南村镇银行"},621382020:{length:"9",cardName:"",cardType:"借记卡",belong:"清徐惠民村镇银行"},621382001:{length:"9",cardName:"",cardType:"借记卡",belong:"固阳包商惠农村镇银行"},621382002:{length:"9",cardName:"",cardType:"借记卡",belong:"宁城包商村镇银行"},621382006:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"莫力达瓦包商村镇银行"},621382005:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"鄂温克旗包商村镇银行"},621382010:{length:"9",cardName:"",cardType:"借记卡",belong:"科尔沁包商村镇银行"},621382009:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"西乌珠穆沁包商惠丰村镇银行"},621382007:{length:"9",cardName:"",cardType:"借记卡",belong:"集宁包商村镇银行"},621382008:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"化德包商村镇银行"},621382003:{length:"9",cardName:"",cardType:"借记卡",belong:"准格尔旗包商村镇银行"},621382004:{length:"9",cardName:"",cardType:"借记卡",belong:"乌审旗包商村镇银行"},621382025:{length:"9",cardName:"",cardType:"借记卡",belong:"大连金州联丰村镇银行"},621382013:{length:"9",cardName:"--",cardType:"借记卡",belong:"九台龙嘉村镇银行"},621382017:{length:"9",cardName:"",cardType:"借记卡",belong:"江苏南通如皋包商村镇银行"},621382021:{length:"9",cardName:"",cardType:"借记卡",belong:"仪征包商村镇银行"},621382023:{length:"9",cardName:"",cardType:"借记卡",belong:"鄄城包商村镇银行"},621382015:{length:"9",cardName:"--",cardType:"借记卡",belong:"漯河市郾城包商村镇银行"},621382016:{length:"9",cardName:"",cardType:"借记卡",belong:"掇刀包商村镇银行"},621382012:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"武冈包商村镇银行"},621382014:{length:"9",cardName:"",cardType:"借记卡",belong:"新都桂城村镇银行"},621382024:{length:"9",cardName:"",cardType:"借记卡",belong:"广元包商贵民村镇银行"},621382027:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"贵阳花溪建设村镇银行"},621382011:{length:"9",cardName:"",cardType:"借记卡",belong:"息烽包商黔隆村镇银行"},621382022:{length:"9",cardName:"",cardType:"借记卡",belong:"毕节发展村镇银行"},621382026:{length:"9",cardName:"",cardType:"借记卡",belong:"宁夏贺兰回商村镇银行"},62319563:{length:"8",cardName:"--",cardType:"借记卡",belong:"浙江泰顺温银村镇银行"},621383001:{length:"9",cardName:"隆丰卡",cardType:"借记卡",belong:"辽宁大石桥隆丰村镇银行"},621383002:{length:"9",cardName:"兰卡",cardType:"借记卡",belong:"辽宁辰州汇通村镇银行股份有限公司"},621385663:{length:"9",cardName:"--",cardType:"借记卡",belong:"内江兴隆村镇银行"},62316904:{length:"8",cardName:"枞阳泰业村镇银行泰业卡",cardType:"借记卡",belong:"枞阳泰业村镇银行"},62316905:{length:"8",cardName:"东源泰业村镇银行泰业卡",cardType:"借记卡",belong:"东源泰业村镇银行"},62316902:{length:"8",cardName:"长银卡",cardType:"借记卡",belong:"东莞长安村镇银行"},62316903:{length:"8",cardName:"灵山泰业村镇银行泰业卡",cardType:"借记卡",belong:"灵山泰业村镇银行"},62316901:{length:"8",cardName:"开县泰业村镇银行泰业卡",cardType:"借记卡",belong:"开县泰业村镇银行"},62316906:{length:"8",cardName:"易事通卡",cardType:"借记卡",belong:"东莞厚街华业村镇银行"},621265001:{length:"9",cardName:"--",cardType:"借记卡",belong:"萍乡湘东黄海村镇银行"},62127852:{length:"8",cardName:"--",cardType:"借记卡",belong:"滨海惠民村镇银行"},62127834:{length:"8",cardName:"--",cardType:"借记卡",belong:"文安县惠民村镇银行股份有限公司"},62127843:{length:"8",cardName:"--",cardType:"借记卡",belong:"廊坊市安次区惠民村镇银行"},621278193:{length:"9",cardName:"--",cardType:"借记卡",belong:"安平惠民村镇银行"},621278293:{length:"9",cardName:"福娃卡",cardType:"借记卡",belong:"长春高新惠民村镇银行"},62127825:{length:"8",cardName:"--",cardType:"借记卡",belong:"长春南关惠民村镇银行"},621278503:{length:"9",cardName:"桦卡",cardType:"借记卡",belong:"桦甸惠民村镇银行"},62127839:{length:"8",cardName:"丰惠卡",cardType:"借记卡",belong:"吉林丰满惠民村镇银行"},62127823:{length:"8",cardName:"--",cardType:"借记卡",belong:"大安惠民村镇银行"},62127822:{length:"8",cardName:"--",cardType:"借记卡",belong:"乾安惠民村镇银行"},62127821:{length:"8",cardName:"--",cardType:"借记卡",belong:"松原宁江惠民村镇银行"},62127828:{length:"8",cardName:"--",cardType:"借记卡",belong:"双城惠民村镇银行有限责任公司"},62127820:{length:"8",cardName:"--",cardType:"借记卡",belong:"五常惠民村镇银行"},62127836:{length:"8",cardName:"--",cardType:"借记卡",belong:"庐江惠民村镇银行"},62127837:{length:"8",cardName:"--",cardType:"借记卡",belong:"含山惠民村镇银行"},62127831:{length:"8",cardName:"--",cardType:"借记卡",belong:"青岛平度惠民村镇银行"},62127855:{length:"8",cardName:"--",cardType:"借记卡",belong:"荆门东宝惠民村镇银行"},621278333:{length:"9",cardName:"--",cardType:"借记卡",belong:"通城惠民村镇银行"},62127810:{length:"8",cardName:"木棉金惠卡",cardType:"借记卡",belong:"广州萝岗惠民村镇银行"},62127816:{length:"8",cardName:"雷州古韵卡",cardType:"借记卡",belong:"雷州惠民村镇银行"},62127817:{length:"8",cardName:"双月湾卡",cardType:"借记卡",belong:"惠东惠民村镇银行"},62127812:{length:"8",cardName:"诚惠卡",cardType:"借记卡",belong:"五华惠民村镇银行"},62127815:{length:"8",cardName:"禾雀清惠卡",cardType:"借记卡",belong:"清远清新惠民村镇银行"},62127813:{length:"8",cardName:"--",cardType:"借记卡",belong:"云安惠民村镇银行"},62127818:{length:"8",cardName:"旭日东升卡",cardType:"借记卡",belong:"合阳惠民村镇银行"},62138402:{length:"8",cardName:"--",cardType:"借记卡",belong:"青县青隆村镇银行"},62138404:{length:"8",cardName:"--",cardType:"借记卡",belong:"东光青隆村镇银行"},62138403:{length:"8",cardName:"--",cardType:"借记卡",belong:"黄骅青隆村镇银行"},62138401:{length:"8",cardName:"--",cardType:"借记卡",belong:"沧州市运河青隆村镇银行"},621384001:{length:"9",cardName:"--",cardType:"借记卡",belong:"山东邹平青隆村镇银行"},621368001:{length:"9",cardName:"山东莒南村镇银行富民卡",cardType:"借记卡",belong:"山东莒南村镇银行"},621386002:{length:"9",cardName:"--",cardType:"借记卡",belong:"江苏海安盐海村镇银行"},621386001:{length:"9",cardName:"金鹤卡",cardType:"借记卡",belong:"武陟射阳村镇银行"},621386003:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"河南沁阳江南村镇银行"},621386004:{length:"9",cardName:"",cardType:"借记卡",belong:"孟州射阳村镇银行"},621699002:{length:"9",cardName:"7777卡",cardType:"借记卡",belong:"锦州太和益民村镇银行"},621699001:{length:"9",cardName:"7777卡",cardType:"借记卡",belong:"锦州北镇益民村镇银行"},621699005:{length:"9",cardName:"7777卡",cardType:"借记卡",belong:"辽宁黑山锦行村镇银行"},621699003:{length:"9",cardName:"7777卡",cardType:"借记卡",belong:"辽宁义县祥和村镇银行"},623601001:{length:"9",cardName:"金瓜卡",cardType:"借记卡",belong:"哈密天山村镇银行"},623604001:{length:"9",cardName:"阳光卡",cardType:"借记卡",belong:"南京浦口靖发村镇银行"},623678353:{length:"9",cardName:"聚丰卡",cardType:"借记卡",belong:"山东临朐聚丰村镇银行"},62360636:{length:"8",cardName:"--",cardType:"借记卡",belong:"滦县中成村镇银行"},62360637:{length:"8",cardName:"--",cardType:"借记卡",belong:"滦南中成村镇银行"},62360634:{length:"8",cardName:"--",cardType:"借记卡",belong:"定州中成村镇银行"},62360630:{length:"8",cardName:"--",cardType:"借记卡",belong:"涿州中成村镇银行"},62360632:{length:"8",cardName:"--",cardType:"借记卡",belong:"望都中成村镇银行"},62360631:{length:"8",cardName:"--",cardType:"借记卡",belong:"高碑店中成村镇银行"},62360633:{length:"8",cardName:"--",cardType:"借记卡",belong:"曲阳中成村镇银行"},62360635:{length:"8",cardName:"--",cardType:"借记卡",belong:"安国中成村镇银行"},62360638:{length:"8",cardName:"--",cardType:"借记卡",belong:"宣化中成村镇银行"},62360602:{length:"8",cardName:"--",cardType:"借记卡",belong:"常州新北中成村镇银行"},62360603:{length:"8",cardName:"--",cardType:"借记卡",belong:"建湖中成村镇银行"},62360629:{length:"8",cardName:"--",cardType:"借记卡",belong:"扬州广陵中成村镇银行"},62360625:{length:"8",cardName:"--",cardType:"借记卡",belong:"惠安中成村镇银行"},62360626:{length:"8",cardName:"--",cardType:"借记卡",belong:"南靖中成村镇银行"},62360628:{length:"8",cardName:"--",cardType:"借记卡",belong:"浦城中成村镇银行"},62360627:{length:"8",cardName:"--",cardType:"借记卡",belong:"上杭中成村镇银行"},62360601:{length:"8",cardName:"--",cardType:"借记卡",belong:"青岛胶州中成村镇银行"},62360620:{length:"8",cardName:"--",cardType:"借记卡",belong:"东营河口中成村镇银行"},62360622:{length:"8",cardName:"--",cardType:"借记卡",belong:"奎文中成村镇银行"},62360624:{length:"8",cardName:"--",cardType:"借记卡",belong:"衮州中成村镇银行"},62360623:{length:"8",cardName:"--",cardType:"借记卡",belong:"无棣中成村镇银行"},62360621:{length:"8",cardName:"--",cardType:"借记卡",belong:"莱芜中成村镇银行"},62360600:{length:"8",cardName:"--",cardType:"借记卡",belong:"自贡中成村镇银行"},62360607:{length:"8",cardName:"--",cardType:"借记卡",belong:"犍为中成村镇银行"},62360608:{length:"8",cardName:"--",cardType:"借记卡",belong:"峨嵋山中成村镇银行"},62360605:{length:"8",cardName:"--",cardType:"借记卡",belong:"长宁中成村镇银行"},62360604:{length:"8",cardName:"--",cardType:"借记卡",belong:"筠连中成村镇银行"},62360606:{length:"8",cardName:"--",cardType:"借记卡",belong:"南部县中成村镇银行"},62360609:{length:"8",cardName:"--",cardType:"借记卡",belong:"南充嘉陵中成村镇银行"},62360612:{length:"8",cardName:"借记卡",cardType:"借记卡",belong:"昆明马金铺中成村镇银行"},62360613:{length:"8",cardName:"--",cardType:"借记卡",belong:"昆明东川中成村镇银行"},62360610:{length:"8",cardName:"--",cardType:"借记卡",belong:"昆明石林中成村镇银行"},62360614:{length:"8",cardName:"--",cardType:"借记卡",belong:"昆明禄劝中成村镇银行"},62360615:{length:"8",cardName:"借记卡",cardType:"借记卡",belong:"昆明寻甸中成村镇银行"},62360616:{length:"8",cardName:"--",cardType:"借记卡",belong:"玉溪澄江中成村镇银行"},62360611:{length:"8",cardName:"--",cardType:"借记卡",belong:"大理古城中成村镇银行"},62360617:{length:"8",cardName:"--",cardType:"借记卡",belong:"泸水中成村镇银行"},62360618:{length:"8",cardName:"鄯善中成村镇银行金融",cardType:"借记卡",belong:"鄯善中成村镇银行"},62360619:{length:"8",cardName:"--",cardType:"借记卡",belong:"富蕴中成村镇银行"},623608001:{length:"9",cardName:"德庆华润村镇银行借记金卡",cardType:"借记卡",belong:"德庆华润村镇银行"},623608002:{length:"9",cardName:"百色右江华润村镇银行金卡",cardType:"借记卡",belong:"百色右江华润村镇银行"},623609001:{length:"9",cardName:"--",cardType:"借记卡",belong:"江苏沛县汉源村镇银行"},623609002:{length:"9",cardName:"--",cardType:"借记卡",belong:"江苏新沂汉源村镇银行"},62361026:{length:"8",cardName:"金丝路阳光卡",cardType:"借记卡",belong:"西安高陵阳光村镇银行"},62361027:{length:"8",cardName:"金丝路阳光卡",cardType:"借记卡",belong:"西安高陵阳光村镇银行"},62361025:{length:"8",cardName:"金丝路阳光卡",cardType:"借记卡",belong:"陕西洛南阳光村镇银行"},62361028:{length:"8",cardName:"金丝路阳光卡",cardType:"借记卡",belong:"陕西洛南阳光村镇银行"},623502001:{length:"9",cardName:"--",cardType:"借记卡",belong:"浙江缙云杭银村镇银行"},623512001:{length:"9",cardName:"陇海卡",cardType:"借记卡",belong:"江苏邳州陇海村镇银行股份有限公司"},623045001:{length:"9",cardName:"合丰卡",cardType:"借记卡",belong:"定安合丰村镇银行"},623607006:{length:"9",cardName:"--",cardType:"借记卡",belong:"澳洲联邦银行（辛集）村镇银行"},623607008:{length:"9",cardName:"--",cardType:"借记卡",belong:"澳洲联邦银行（磁县）村镇银行"},623607007:{length:"9",cardName:"--",cardType:"借记卡",belong:"澳洲联邦银行（永年）村镇银行"},623607002:{length:"9",cardName:"澳洲联邦村镇银行借记卡",cardType:"借记卡",belong:"澳洲联邦银行登封村镇银行"},623607003:{length:"9",cardName:"澳洲联邦村镇银行借记卡",cardType:"借记卡",belong:"澳洲联邦村镇银行兰考村镇银行"},623607004:{length:"9",cardName:"澳洲联邦村镇银行借记卡",cardType:"借记卡",belong:"澳洲联邦村镇银行伊川村镇银行"},623607010:{length:"9",cardName:"澳洲联邦村镇银行借记卡",cardType:"借记卡",belong:"澳洲联邦村镇银行温县村镇银行"},623607001:{length:"9",cardName:"澳洲联邦村镇银行借记卡",cardType:"借记卡",belong:"澳洲联邦村镇银行济源村镇银行"},623607005:{length:"9",cardName:"澳洲联邦银行村镇银行借记卡",cardType:"借记卡",belong:"澳洲联邦银行(渑池)村镇银行"},623607009:{length:"9",cardName:"澳洲联邦村镇银行借记卡",cardType:"借记卡",belong:"澳洲联邦银行(永城)村镇银行"},623504010:{length:"9",cardName:"--",cardType:"借记卡",belong:"天津滨海德商村镇银行"},62351501:{length:"8",cardName:"丹桂IC借记卡",cardType:"借记卡",belong:"江苏丹阳保得村镇银行"},623504002:{length:"9",cardName:"德商卡",cardType:"借记卡",belong:"余杭德商村镇银行"},623504008:{length:"9",cardName:"--",cardType:"借记卡",belong:"海宁德商村镇银行"},623504004:{length:"9",cardName:"--",cardType:"借记卡",belong:"浙江秀洲德商村镇银行"},623504009:{length:"9",cardName:"--",cardType:"借记卡",belong:"浙江定海德商村镇银行"},623504001:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"范县德商村镇银行"},623517001:{length:"9",cardName:"金汇卡",cardType:"借记卡",belong:"襄城汇浦村镇银行"},623504003:{length:"9",cardName:"借记卡",cardType:"借记卡",belong:"民权德商村镇银行"},623504006:{length:"9",cardName:"--",cardType:"借记卡",belong:"宁陵德商村镇银行"},623504007:{length:"9",cardName:"德商卡",cardType:"借记卡",belong:"睢县德商村镇银行"},62168305:{length:"8",cardName:"金鼎卡",cardType:"借记卡",belong:"江苏溧水民丰村镇银行"},62168301:{length:"8",cardName:"金鼎卡",cardType:"借记卡",belong:"江苏丰县民丰村镇银行"},62168304:{length:"8",cardName:"金鼎卡",cardType:"借记卡",belong:"江苏灌云民丰村镇银行"},62168302:{length:"8",cardName:"金鼎卡",cardType:"借记卡",belong:"江苏灌南民丰村镇银行"},62168309:{length:"8",cardName:"--",cardType:"借记卡",belong:"安徽宿松民丰村镇银行"},62168308:{length:"8",cardName:"金鼎卡",cardType:"借记卡",belong:"安徽明光民丰村镇银行"},62168306:{length:"8",cardName:"金鼎卡",cardType:"借记卡",belong:"山东梁山民丰村镇银行"},62168303:{length:"8",cardName:"金鼎卡",cardType:"借记卡",belong:"山东肥城民丰村镇银行"},623519533:{length:"9",cardName:"龙凤卡",cardType:"借记卡",belong:"庆阳市西峰瑞信村镇银行"},62352501:{length:"8",cardName:"恒升卡",cardType:"借记卡",belong:"浙江永嘉恒升村镇银行"},623525001:{length:"9",cardName:"恒升卡",cardType:"借记卡",belong:"惠水恒升村镇银行"},623530953:{length:"9",cardName:"益通卡",cardType:"借记卡",belong:"香河益民村镇银行"},623532001:{length:"9",cardName:"金阳光卡",cardType:"借记卡",belong:"江苏洪泽金阳光村镇银行"},62314061:{length:"8",cardName:"借记卡",cardType:"借记卡",belong:"大洼恒丰村镇银行"},62314062:{length:"8",cardName:"--",cardType:"借记卡",belong:"盘山安泰村镇银行股份有限公司"},623535002:{length:"9",cardName:"浙江庆元泰隆村镇银行泰隆借记卡",cardType:"借记卡",belong:"浙江庆元泰隆村镇银行"},623535001:{length:"9",cardName:"--",cardType:"借记卡",belong:"湖北大冶泰隆村镇银行"},623538001:{length:"9",cardName:"义商借记卡",cardType:"借记卡",belong:"浙江龙游义商村镇银行"},62355001:{length:"8",cardName:"玉川卡",cardType:"借记卡",belong:"汝州玉川村镇银行"},62355358:{length:"8",cardName:"借记卡",cardType:"借记卡",belong:"沂源博商村镇银行"},62355701:{length:"8",cardName:"梦卡",cardType:"借记卡",belong:"北京大兴华夏村镇银行"},62355702:{length:"8",cardName:"--",cardType:"借记卡",belong:"四川江油华夏村镇银行"},62355703:{length:"8",cardName:"花都卡",cardType:"借记卡",belong:"昆明呈贡华夏村镇银行"},623558618:{length:"9",cardName:"惠通卡",cardType:"借记卡",belong:"浙江富阳恒通村镇银行"},62355865:{length:"8",cardName:"惠通卡",cardType:"借记卡",belong:"浙江松阳恒通村镇银行"},623558611:{length:"9",cardName:"惠通卡",cardType:"借记卡",belong:"鹰潭月湖恒通村镇银行"},623558616:{length:"9",cardName:"惠通卡",cardType:"借记卡",belong:"横峰恒通村镇银行"},623558612:{length:"9",cardName:"惠通卡",cardType:"借记卡",belong:"余干恒通村镇银行"},62357012:{length:"8",cardName:"无",cardType:"借记卡",belong:"太原市尖草坪区信都村镇银行"},62357009:{length:"8",cardName:"--",cardType:"借记卡",belong:"大同市南郊区京都村镇银行"},62357010:{length:"8",cardName:"无",cardType:"借记卡",belong:"代县泓都村镇银行"},62357006:{length:"8",cardName:"无",cardType:"借记卡",belong:"忻州市忻府区秀都村镇银行"},62357002:{length:"8",cardName:"--",cardType:"借记卡",belong:"汾阳市九都村镇银行有限公司"},62357008:{length:"8",cardName:"无",cardType:"借记卡",belong:"文水县润都村镇银行"},62357011:{length:"8",cardName:"无",cardType:"借记卡",belong:"临县泉都村镇银行"},62357007:{length:"8",cardName:"无",cardType:"借记卡",belong:"交口融都村镇银行"},62357004:{length:"8",cardName:"--",cardType:"借记卡",belong:"寿阳县汇都村镇银行"},62357003:{length:"8",cardName:"--",cardType:"借记卡",belong:"介休市华都村镇银行"},62357001:{length:"8",cardName:"--",cardType:"借记卡",belong:"襄汾万都村镇银行"},62357005:{length:"8",cardName:"--",cardType:"借记卡",belong:"洪洞县洪都村镇银行"},62359430:{length:"8",cardName:"--",cardType:"借记卡",belong:"费县梁邹村镇银行"},62368001:{length:"8",cardName:"金海卡",cardType:"借记卡",belong:"辽宁海城金海村镇银行"},62368002:{length:"8",cardName:"金玉卡",cardType:"借记卡",belong:"辽宁岫岩金玉村镇银行"},62368003:{length:"8",cardName:"金泉卡",cardType:"借记卡",belong:"辽宁千山金泉村镇银行"},62358101:{length:"8",cardName:"红枸杞金融IC借记卡",cardType:"借记卡",belong:"宁夏中宁青银村镇银行"},623579001:{length:"9",cardName:"--",cardType:"借记卡",belong:"浙江玉环永兴村镇银行"},62358563:{length:"8",cardName:"--",cardType:"借记卡",belong:"铁岭新星村镇银行"},623587001:{length:"9",cardName:"徽银卡",cardType:"借记卡",belong:"无为徽银村镇银行"},623587002:{length:"9",cardName:"黄山卡",cardType:"借记卡",belong:"金寨徽银村镇银行"},62359065:{length:"8",cardName:"调兵山惠民村镇银行惠民卡",cardType:"借记卡",belong:"调兵山惠民村镇银行"},62361702:{length:"8",cardName:"汇通IC卡",cardType:"借记卡",belong:"庄河汇通村镇银行"},62361703:{length:"8",cardName:"鑫汇借记卡",cardType:"借记卡",belong:"大连经济技术开发区鑫汇村镇银行"},621389:{length:"6",cardName:"紫琅卡",cardType:"借记卡",belong:"江苏通州华商村镇银行"},62359364:{length:"8",cardName:"--",cardType:"借记卡",belong:"乐亭舜丰村镇银行"},62359354:{length:"8",cardName:"舜丰卡，唐人卡",cardType:"借记卡",belong:"唐山市丰南舜丰村镇银行"},62359356:{length:"8",cardName:"--",cardType:"借记卡",belong:"大城舜丰村镇银行"},62359350:{length:"8",cardName:"--",cardType:"借记卡",belong:"霸州舜丰村镇银行"},62359353:{length:"8",cardName:"--",cardType:"借记卡",belong:"广阳舜丰村镇银行"},62359329:{length:"8",cardName:"向阳卡青年卡舜丰卡",cardType:"借记卡",belong:"青岛黄岛舜丰村镇银行"},62359349:{length:"8",cardName:"金桥卡，金凤卡，舜丰卡",cardType:"借记卡",belong:"山东利津舜丰村镇银行"},62359351:{length:"8",cardName:"惠民卡,舜丰卡",cardType:"借记卡",belong:"山东惠民舜丰村镇银行"},62144735:{length:"8",cardName:"杜鹃卡",cardType:"借记卡",belong:"黔西花都村镇银行"},62006401:{length:"8",cardName:"灯都卡",cardType:"借记卡",belong:"中山古镇南粤村镇银行"},621658001:{length:"9",cardName:"元氏信融村镇银行信融卡",cardType:"借记卡",belong:"元氏信融村镇银行"},62165826:{length:"8",cardName:"信融卡",cardType:"借记卡",belong:"元氏信融村镇银行"},62300401:{length:"8",cardName:"龙翔卡",cardType:"借记卡",belong:"朝阳柳城村镇银行"},62310402:{length:"8",cardName:"--",cardType:"借记卡",belong:"修文江海村镇银行"},62310401:{length:"8",cardName:"--",cardType:"借记卡",belong:"贵阳小河科技村镇银行"},62314292:{length:"8",cardName:"--",cardType:"借记卡",belong:"垦利乐安村镇银行"},62361528:{length:"8",cardName:"竹卡",cardType:"借记卡",belong:"莱阳胶东村镇银行"},62361527:{length:"8",cardName:"竹卡",cardType:"借记卡",belong:"牟平胶东村镇银行"},62361523:{length:"8",cardName:"竹卡",cardType:"借记卡",belong:"夏津胶东村镇银行"},62361522:{length:"8",cardName:"竹卡",cardType:"借记卡",belong:"齐河胶东村镇银行"},62361525:{length:"8",cardName:"竹卡",cardType:"借记卡",belong:"禹城胶东村镇银行"},62361526:{length:"8",cardName:"竹卡",cardType:"借记卡",belong:"宁津胶东村镇银行"},623194773:{length:"9",cardName:"金鸡卡",cardType:"借记卡",belong:"许昌新浦村镇银行"},621382076:{length:"9",cardName:"北京昌平包商村镇银行润禾卡",cardType:"借记卡",belong:"北京昌平包商村镇银行"},621382070:{length:"9",cardName:"天津津南村镇银行润禾卡",cardType:"借记卡",belong:"天津津南村镇银行"},621382053:{length:"9",cardName:"清徐惠民村镇银行润禾卡",cardType:"借记卡",belong:"清徐惠民村镇银行"},621382066:{length:"9",cardName:"固阳包商惠农村镇银行润禾卡",cardType:"借记卡",belong:"固阳包商惠农村镇银行"},621382063:{length:"9",cardName:"宁城包商村镇银行润禾卡",cardType:"借记卡",belong:"宁城包商村镇银行"},621382052:{length:"9",cardName:"莫力达瓦包商村镇银行润禾卡",cardType:"借记卡",belong:"莫力达瓦包商村镇银行"},621382068:{length:"9",cardName:"鄂温克包商村镇银行润禾卡",cardType:"借记卡",belong:"鄂温克包商村镇银行"},621382074:{length:"9",cardName:"兴安盟科尔沁包商村镇银行润禾卡",cardType:"借记卡",belong:"科尔沁包商村镇银行"},621382051:{length:"9",cardName:"西乌珠穆沁包商惠丰润禾卡",cardType:"借记卡",belong:"西乌珠穆沁包商惠丰村镇银行"},621382057:{length:"9",cardName:"集宁包闹村镇银行润禾卡",cardType:"借记卡",belong:"集宁包闹村镇银行"},621382058:{length:"9",cardName:"化德包商村镇银行润禾卡",cardType:"借记卡",belong:"化德包商村镇银行"},621382061:{length:"9",cardName:"准格尔旗包商村镇银行润禾卡",cardType:"借记卡",belong:"准格尔旗包商村镇银行"},621382062:{length:"9",cardName:"乌审旗包商村镇银行润禾卡",cardType:"借记卡",belong:"乌审旗包商村镇银行"},621382067:{length:"9",cardName:"--",cardType:"借记卡",belong:"大连金州联丰村镇银行"},621382060:{length:"9",cardName:"九台龙嘉村镇银行润禾卡",cardType:"借记卡",belong:"九台龙嘉村镇银行"},621382072:{length:"9",cardName:"江苏南通如皋包商村镇银行润禾卡",cardType:"借记卡",belong:"江苏南通如皋包商村镇银行"},621382064:{length:"9",cardName:"江苏仪征包商村镇银行润禾卡",cardType:"借记卡",belong:"仪征包商村镇银行"},621382056:{length:"9",cardName:"鄄城包商村镇银行润禾卡",cardType:"借记卡",belong:"鄄城包商村镇银行"},621382050:{length:"9",cardName:"郾城包商村镇银行润禾卡",cardType:"借记卡",belong:"漯河市郾城包商村镇银行"},621382075:{length:"9",cardName:"掇刀包商村镇银行润禾卡",cardType:"借记卡",belong:"掇刀包商村镇银行"},621382073:{length:"9",cardName:"武冈包商村镇银行润禾卡",cardType:"借记卡",belong:"武冈包商村镇银行"},621382069:{length:"9",cardName:"新都桂城村镇银行润禾卡",cardType:"借记卡",belong:"新都桂城村镇银行"},621382071:{length:"9",cardName:"广元市包商贵民村镇银行润禾卡",cardType:"借记卡",belong:"广元包商贵民村镇银行"},621382054:{length:"9",cardName:"贵阳花溪建设村镇银行润禾卡",cardType:"借记卡",belong:"贵阳花溪建设村镇银行"},621382065:{length:"9",cardName:"息烽包商黔隆村镇银行润禾卡",cardType:"借记卡",belong:"息烽包商黔隆村镇银行"},621382059:{length:"9",cardName:"毕节发展村镇银行润禾卡",cardType:"借记卡",belong:"毕节发展村镇银行"},621382055:{length:"9",cardName:"宁夏贺兰回商村镇银行润禾卡",cardType:"借记卡",belong:"宁夏贺兰回商村镇银行"},62363440:{length:"8",cardName:"--",cardType:"借记卡",belong:"临高惠丰村镇银行"},62363441:{length:"8",cardName:"--",cardType:"借记卡",belong:"东方惠丰村镇银行"},62363442:{length:"8",cardName:"--",cardType:"借记卡",belong:"乐东惠丰村镇银行"},623174001:{length:"9",cardName:"虞城通商村镇银行润禾卡",cardType:"借记卡",belong:"虞城通商村镇银行"},62359602:{length:"8",cardName:"--",cardType:"借记卡",belong:"繁峙县新田村镇银行"},62359601:{length:"8",cardName:"--",cardType:"借记卡",belong:"曲沃县新田村镇银行"},62359603:{length:"8",cardName:"--",cardType:"借记卡",belong:"临猗县新田村镇银行"},62359605:{length:"8",cardName:"--",cardType:"借记卡",belong:"新绛县新田村镇银行"},621652853:{length:"9",cardName:"旭日卡",cardType:"借记卡",belong:"信阳平桥恒丰村镇银行"},622372:{length:"6",cardName:"cup credit card",cardType:"贷记卡",belong:"东亚银行有限公司"},622365:{length:"6",cardName:"电子网络人民币卡",cardType:"借记卡",belong:"东亚银行有限公司"},622471:{length:"6",cardName:"人民币信用卡(银联卡)",cardType:"贷记卡",belong:"东亚银行有限公司"},622943:{length:"6",cardName:"银联借记卡",cardType:"借记卡",belong:"东亚银行有限公司"},622472:{length:"6",cardName:"人民币信用卡金卡",cardType:"贷记卡",belong:"东亚银行有限公司"},623318:{length:"6",cardName:"银联双币借记卡",cardType:"借记卡",belong:"东亚银行有限公司"},621411:{length:"6",cardName:"银联借记卡",cardType:"借记卡",belong:"东亚银行澳门分行"},622371:{length:"6",cardName:"花旗人民币信用卡",cardType:"贷记卡",belong:"花旗银行有限公司"},625091:{length:"6",cardName:"双币卡",cardType:"贷记卡",belong:"花旗银行有限公司"},622293:{length:"6",cardName:"信用卡(普通卡)",cardType:"贷记卡",belong:"大新银行有限公司"},622295:{length:"6",cardName:"商务信用卡",cardType:"贷记卡",belong:"大新银行有限公司"},622296:{length:"6",cardName:"商务信用卡",cardType:"贷记卡",belong:"大新银行有限公司"},622297:{length:"6",cardName:"预付卡(普通卡)",cardType:"借记卡",belong:"大新银行有限公司"},622373:{length:"6",cardName:"人民币信用卡",cardType:"贷记卡",belong:"大新银行有限公司"},622375:{length:"6",cardName:"人民币借记卡(银联卡)",cardType:"借记卡",belong:"大新银行有限公司"},622451:{length:"6",cardName:"大新人民币信用卡金卡",cardType:"贷记卡",belong:"大新银行有限公司"},622294:{length:"6",cardName:"大新港币信用卡(金卡)",cardType:"贷记卡",belong:"大新银行有限公司"},625940:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"大新银行有限公司"},622489:{length:"6",cardName:"借记卡(银联卡)",cardType:"借记卡",belong:"大新银行有限公司"},622871:{length:"6",cardName:"永亨尊贵理财卡",cardType:"借记卡",belong:"永亨银行"},622958:{length:"6",cardName:"永亨贵宾理财卡",cardType:"借记卡",belong:"永亨银行"},622963:{length:"6",cardName:"永亨贵宾理财卡",cardType:"借记卡",belong:"永亨银行"},622957:{length:"6",cardName:"永亨贵宾理财卡",cardType:"借记卡",belong:"永亨银行"},622798:{length:"6",cardName:"港币贷记卡",cardType:"贷记卡",belong:"永亨银行"},625010:{length:"6",cardName:"永亨银联白金卡",cardType:"贷记卡",belong:"永亨银行"},622381:{length:"6",cardName:"人民币信用卡",cardType:"贷记卡",belong:"中国建设银行亚洲股份有限公司"},622675:{length:"6",cardName:"银联卡",cardType:"贷记卡",belong:"中国建设银行亚洲股份有限公司"},622676:{length:"6",cardName:"银联卡",cardType:"贷记卡",belong:"中国建设银行亚洲股份有限公司"},622677:{length:"6",cardName:"银联卡",cardType:"贷记卡",belong:"中国建设银行亚洲股份有限公司"},622382:{length:"6",cardName:"人民币卡(银联卡)",cardType:"借记卡",belong:"中国建设银行亚洲股份有限公司"},621487:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国建设银行亚洲股份有限公司"},621083:{length:"6",cardName:"建行陆港通龙卡",cardType:"借记卡",belong:"中国建设银行亚洲股份有限公司"},624329:{length:"6",cardName:"CCBA Diamond Dual",cardType:"贷记卡",belong:"中国建设银行亚洲股份有限公司"},622487:{length:"6",cardName:"银联人民币银行卡",cardType:"借记卡",belong:"星展银行香港有限公司"},622487:{length:"6",cardName:"银联人民币银行卡",cardType:"借记卡",belong:"星展银行香港有限公司"},622490:{length:"6",cardName:"银联人民币银行卡",cardType:"借记卡",belong:"星展银行香港有限公司"},622490:{length:"6",cardName:"银联人民币银行卡",cardType:"借记卡",belong:"星展银行香港有限公司"},622491:{length:"6",cardName:"银联银行卡",cardType:"借记卡",belong:"星展银行香港有限公司"},622491:{length:"6",cardName:"银联港币银行卡",cardType:"借记卡",belong:"星展银行香港有限公司"},622492:{length:"6",cardName:"银联银行卡",cardType:"借记卡",belong:"星展银行香港有限公司"},622492:{length:"6",cardName:"银联港币银行卡",cardType:"借记卡",belong:"星展银行香港有限公司"},621744:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"星展银行香港有限公司"},621745:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"星展银行香港有限公司"},621746:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"星展银行香港有限公司"},621747:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"星展银行香港有限公司"},621034:{length:"6",cardName:"上银卡",cardType:"借记卡",belong:"上海商业银行"},622386:{length:"6",cardName:"人民币信用卡(银联卡)",cardType:"贷记卡",belong:"上海商业银行"},622952:{length:"6",cardName:"上银卡ShacomCard",cardType:"借记卡",belong:"上海商业银行"},625107:{length:"6",cardName:"Dual Curr.Corp.Card",cardType:"贷记卡",belong:"上海商业银行"},622387:{length:"6",cardName:"永隆人民币信用卡",cardType:"贷记卡",belong:"永隆银行有限公司"},622423:{length:"6",cardName:"永隆人民币信用卡",cardType:"贷记卡",belong:"永隆银行有限公司"},622971:{length:"6",cardName:"永隆港币卡",cardType:"借记卡",belong:"永隆银行有限公司"},622970:{length:"6",cardName:"永隆人民币卡",cardType:"借记卡",belong:"永隆银行有限公司"},625062:{length:"6",cardName:"永隆双币卡",cardType:"贷记卡",belong:"永隆银行有限公司"},625063:{length:"6",cardName:"永隆双币卡",cardType:"贷记卡",belong:"永隆银行有限公司"},622360:{length:"6",cardName:"人民币卡(银联卡)",cardType:"贷记卡",belong:"香港上海汇丰银行有限公司"},622361:{length:"6",cardName:"人民币金卡(银联卡)",cardType:"贷记卡",belong:"香港上海汇丰银行有限公司"},625034:{length:"6",cardName:"银联卡",cardType:"贷记卡",belong:"香港上海汇丰银行有限公司"},625096:{length:"6",cardName:"汇丰银联双币卡",cardType:"贷记卡",belong:"香港上海汇丰银行有限公司"},625098:{length:"6",cardName:"汇丰银联双币钻石卡",cardType:"贷记卡",belong:"香港上海汇丰银行有限公司"},622406:{length:"6",cardName:"ATMCard",cardType:"借记卡",belong:"香港上海汇丰银行有限公司"},622407:{length:"6",cardName:"ATMCard",cardType:"借记卡",belong:"香港上海汇丰银行有限公司"},621442:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"香港上海汇丰银行有限公司"},621443:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"香港上海汇丰银行有限公司"},625026:{length:"6",cardName:"港币贷记白金卡",cardType:"贷记卡",belong:"恒生银行有限公司"},625024:{length:"6",cardName:"港币贷记普卡",cardType:"贷记卡",belong:"恒生银行有限公司"},622376:{length:"6",cardName:"恒生人民币信用卡",cardType:"贷记卡",belong:"恒生银行有限公司"},622378:{length:"6",cardName:"恒生人民币白金卡",cardType:"贷记卡",belong:"恒生银行有限公司"},622377:{length:"6",cardName:"恒生人民币金卡",cardType:"贷记卡",belong:"恒生银行有限公司"},625092:{length:"6",cardName:"银联人民币钻石商务卡",cardType:"贷记卡",belong:"恒生银行有限公司"},622409:{length:"6",cardName:"恒生银行港卡借记卡",cardType:"借记卡",belong:"恒生银行"},622410:{length:"6",cardName:"恒生银行港卡借记卡",cardType:"借记卡",belong:"恒生银行"},621440:{length:"6",cardName:"港币借记卡（普卡）",cardType:"借记卡",belong:"恒生银行"},621441:{length:"6",cardName:"港币借记卡（金卡）",cardType:"借记卡",belong:"恒生银行"},623106:{length:"6",cardName:"港币借记卡(普卡)",cardType:"借记卡",belong:"恒生银行"},623107:{length:"6",cardName:"港币借记卡(普卡)",cardType:"借记卡",belong:"恒生银行"},622453:{length:"6",cardName:"人民币信用卡金卡",cardType:"贷记卡",belong:"中信嘉华银行有限公司"},622456:{length:"6",cardName:"信用卡普通卡",cardType:"贷记卡",belong:"中信嘉华银行有限公司"},622459:{length:"6",cardName:"人民币借记卡(银联卡)",cardType:"借记卡",belong:"中信嘉华银行有限公司"},624303:{length:"6",cardName:"信银国际国航知音双币信用卡",cardType:"贷记卡",belong:"中信嘉华银行有限公司"},623328:{length:"6",cardName:"CNCBI HKD CUP Debit Card",cardType:"借记卡",belong:"中信嘉华银行有限公司"},623397:{length:"6",cardName:"CNCBI HKD Diamond Debit Card",cardType:"借记卡",belong:"中信嘉华银行有限公司"},622272:{length:"6",cardName:"银联贺礼卡(创兴银行)",cardType:"借记卡",belong:"创兴银行有限公司"},622463:{length:"6",cardName:"港币借记卡",cardType:"借记卡",belong:"创兴银行有限公司"},621087:{length:"6",cardName:"人民币提款卡",cardType:"借记卡",belong:"创兴银行有限公司"},625008:{length:"6",cardName:"银联双币信用卡",cardType:"贷记卡",belong:"创兴银行有限公司"},625009:{length:"6",cardName:"银联双币信用卡",cardType:"贷记卡",belong:"创兴银行有限公司"},624337:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"创兴银行有限公司"},623413:{length:"6",cardName:"UnionPay RMB Gift Card",cardType:"预付费卡",belong:"创兴银行有限公司"},625055:{length:"6",cardName:"商务金卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625040:{length:"6",cardName:"中银银联双币信用卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625042:{length:"6",cardName:"中银银联双币信用卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625044:{length:"6",cardName:"银联双币信用卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625046:{length:"6",cardName:"银联双币信用卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625048:{length:"6",cardName:"银联双币信用卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625053:{length:"6",cardName:"银联双币信用卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625058:{length:"6",cardName:"双币商务卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625060:{length:"6",cardName:"双币商务卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625136:{length:"6",cardName:"中银Good Day银联双币白金卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625172:{length:"6",cardName:"中银银联双币钻石卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625174:{length:"6",cardName:"中银银联双币钻石卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625176:{length:"6",cardName:"中银银联双币钻石卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625141:{length:"6",cardName:"澳门币贷记卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625143:{length:"6",cardName:"澳门币贷记卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},622750:{length:"6",cardName:"人民币信用卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},622751:{length:"6",cardName:"人民币信用卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625145:{length:"6",cardName:"中银银联双币商务卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625147:{length:"6",cardName:"中银银联双币商务卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625196:{length:"6",cardName:"银联双币金卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},625198:{length:"6",cardName:"银联双币白金卡",cardType:"贷记卡",belong:"中银信用卡(国际)有限公司"},621741:{length:"6",cardName:"接触式晶片借记卡",cardType:"借记卡",belong:"中国银行（香港）"},623040:{length:"6",cardName:"接触式银联双币预制晶片借记卡",cardType:"借记卡",belong:"中国银行（香港）"},620202:{length:"6",cardName:"中国银行银联预付卡",cardType:"预付费卡",belong:"中国银行（香港）"},620203:{length:"6",cardName:"中国银行银联预付卡",cardType:"预付费卡",belong:"中国银行（香港）"},621782:{length:"6",cardName:"中银纯电子现金双币卡",cardType:"借记卡",belong:"中国银行（香港）"},623309:{length:"6",cardName:"中国银行银联公司借记卡",cardType:"借记卡",belong:"中国银行（香港）"},621743:{length:"6",cardName:"接触式晶片借记卡",cardType:"借记卡",belong:"南洋商业银行"},623041:{length:"6",cardName:"接触式银联双币预制晶片借记卡",cardType:"借记卡",belong:"南洋商业银行"},620208:{length:"6",cardName:"南洋商业银行银联预付卡",cardType:"预付费卡",belong:"南洋商业银行"},620209:{length:"6",cardName:"南洋商业银行银联预付卡",cardType:"预付费卡",belong:"南洋商业银行"},621042:{length:"6",cardName:"银联港币卡",cardType:"借记卡",belong:"南洋商业银行"},621783:{length:"6",cardName:"中银纯电子现金双币卡",cardType:"借记卡",belong:"南洋商业银行"},623308:{length:"6",cardName:"南洋商业银联公司借记卡",cardType:"借记卡",belong:"南洋商业银行"},621742:{length:"6",cardName:"接触式晶片借记卡",cardType:"借记卡",belong:"集友银行"},623042:{length:"6",cardName:"接触式银联双币预制晶片借记卡",cardType:"借记卡",belong:"集友银行"},620206:{length:"6",cardName:"集友银行银联预付卡",cardType:"预付费卡",belong:"集友银行"},620207:{length:"6",cardName:"集友银行银联预付卡",cardType:"预付费卡",belong:"集友银行"},621043:{length:"6",cardName:"银联港币卡",cardType:"借记卡",belong:"集友银行"},621784:{length:"6",cardName:"中银纯电子现金双币卡",cardType:"借记卡",belong:"集友银行"},623310:{length:"6",cardName:"集友银行银联公司借记卡",cardType:"借记卡",belong:"集友银行"},622493:{length:"6",cardName:"AEONJUSCO银联卡",cardType:"贷记卡",belong:"AEON信贷财务亚洲有限公司"},622547:{length:"6",cardName:"港币借记卡",cardType:"借记卡",belong:"大丰银行有限公司"},622548:{length:"6",cardName:"澳门币借记卡",cardType:"借记卡",belong:"大丰银行有限公司"},622546:{length:"6",cardName:"人民币借记卡",cardType:"借记卡",belong:"大丰银行有限公司"},620072:{length:"6",cardName:"大丰预付卡",cardType:"预付费卡",belong:"大丰银行有限公司"},620204:{length:"6",cardName:"大丰银行预付卡",cardType:"预付费卡",belong:"大丰银行有限公司"},620205:{length:"6",cardName:"大丰银行预付卡",cardType:"预付费卡",belong:"大丰银行有限公司"},621064:{length:"6",cardName:"AEON银联礼品卡",cardType:"借记卡",belong:"AEON信贷财务亚洲有限公司"},622941:{length:"6",cardName:"AEON银联礼品卡",cardType:"借记卡",belong:"AEON信贷财务亚洲有限公司"},622974:{length:"6",cardName:"AEON银联礼品卡",cardType:"借记卡",belong:"AEON信贷财务亚洲有限公司"},621084:{length:"6",cardName:"扣款卡",cardType:"借记卡",belong:"中国建设银行澳门分行"},623350:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"中国建设银行澳门分行"},624412:{length:"6",cardName:"CCB Macau Platinum Credit Card",cardType:"贷记卡",belong:"中国建设银行澳门分行"},622948:{length:"6",cardName:"港币借记卡",cardType:"借记卡",belong:"渣打银行香港有限公司"},621740:{length:"6",cardName:"银联标准卡",cardType:"借记卡",belong:"渣打银行（香港）"},622482:{length:"6",cardName:"双币信用卡",cardType:"贷记卡",belong:"渣打银行香港有限公司"},622483:{length:"6",cardName:"双币信用卡",cardType:"贷记卡",belong:"渣打银行香港有限公司"},622484:{length:"6",cardName:"双币信用卡",cardType:"贷记卡",belong:"渣打银行香港有限公司"},620070:{length:"6",cardName:"中国银盛预付卡",cardType:"预付费卡",belong:"中国银盛"},620068:{length:"6",cardName:"中国银盛预付卡",cardType:"预付费卡",belong:"中国银盛"},620107:{length:"6",cardName:"预付卡",cardType:"借记卡",belong:"中国建设银行（亚洲）"},623334:{length:"6",cardName:"环球通",cardType:"预付费卡",belong:"K & R International Limited"},625842:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"Kasikorn Bank PCL"},6258433:{length:"7",cardName:"贷记卡",cardType:"贷记卡",belong:"Kasikorn Bank PCL"},6258434:{length:"7",cardName:"贷记卡",cardType:"贷记卡",belong:"Kasikorn Bank PCL"},622495:{length:"6",cardName:"Travelex港币卡",cardType:"借记卡",belong:"Travelex"},622496:{length:"6",cardName:"Travelex美元卡",cardType:"借记卡",belong:"Travelex"},620152:{length:"6",cardName:"CashPassportCounsumer",cardType:"预付费卡",belong:"Travelex"},620153:{length:"6",cardName:"CashPassportCounsumer",cardType:"预付费卡",belong:"Travelex"},622433:{length:"6",cardName:"UOBCUPCARD",cardType:"贷记卡",belong:"新加坡大华银行"},622861:{length:"6",cardName:"人民币卡",cardType:"借记卡",belong:"澳门永亨银行股份有限公司"},622932:{length:"6",cardName:"港币借记卡",cardType:"借记卡",belong:"澳门永亨银行股份有限公司"},622862:{length:"6",cardName:"澳门币借记卡",cardType:"借记卡",belong:"澳门永亨银行股份有限公司"},622775:{length:"6",cardName:"澳门币贷记卡",cardType:"贷记卡",belong:"澳门永亨银行股份有限公司"},622785:{length:"6",cardName:"港币贷记卡",cardType:"贷记卡",belong:"澳门永亨银行股份有限公司"},624300:{length:"6",cardName:"OCBCWH CUP Platinum",cardType:"贷记卡",belong:"澳门永亨银行股份有限公司"},624302:{length:"6",cardName:"OCBCWH CUP Platinum",cardType:"贷记卡",belong:"澳门永亨银行股份有限公司"},624308:{length:"6",cardName:"OCBCWH CUP Diamond",cardType:"贷记卡",belong:"澳门永亨银行股份有限公司"},624309:{length:"6",cardName:"OCBCWH CUP Platinum",cardType:"贷记卡",belong:"澳门永亨银行股份有限公司"},622920:{length:"6",cardName:"MITSUISUMITOMOGINREN",cardType:"贷记卡",belong:"日本三井住友卡公司"},622434:{length:"6",cardName:"人民币卡",cardType:"借记卡",belong:"澳门国际银行"},622436:{length:"6",cardName:"澳门币卡",cardType:"借记卡",belong:"澳门国际银行"},622435:{length:"6",cardName:"港币卡",cardType:"借记卡",belong:"澳门国际银行"},624407:{length:"6",cardName:"澳门国际银行银联金卡",cardType:"贷记卡",belong:"澳门国际银行"},624408:{length:"6",cardName:"澳门国际银行银联钻石卡",cardType:"贷记卡",belong:"澳门国际银行"},621232:{length:"6",cardName:"财运卡",cardType:"借记卡",belong:"大西洋银行股份有限公司"},622432:{length:"6",cardName:"澳门币卡",cardType:"借记卡",belong:"大西洋银行股份有限公司"},621247:{length:"6",cardName:"财运卡",cardType:"借记卡",belong:"大西洋银行股份有限公司"},623043:{length:"6",cardName:"财运卡",cardType:"借记卡",belong:"大西洋银行股份有限公司"},623064:{length:"6",cardName:"财运卡",cardType:"借记卡",belong:"大西洋银行股份有限公司"},624371:{length:"6",cardName:"BNU Unionpay Triple",cardType:"贷记卡",belong:"大西洋银行股份有限公司"},624372:{length:"6",cardName:"BNU Unionpay Triple",cardType:"贷记卡",belong:"大西洋银行股份有限公司"},624398:{length:"6",cardName:"BNU Unionpay Triple",cardType:"贷记卡",belong:"大西洋银行股份有限公司"},601100:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601101:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112010:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112011:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112012:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112089:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601121:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601123:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601124:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601125:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601126:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601127:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601128:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6011290:{length:"7",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6011291:{length:"7",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6011292:{length:"7",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6011293:{length:"7",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112013:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6011295:{length:"7",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601122:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6011297:{length:"7",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112980:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112981:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112986:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112987:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112988:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112989:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112990:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112991:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112992:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112993:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6011294:{length:"7",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6011296:{length:"7",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112996:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112997:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6011300:{length:"7",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60113080:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60113081:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60113089:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601131:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601136:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601137:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601138:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6011390:{length:"7",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112995:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6011392:{length:"7",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6011393:{length:"7",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60113940:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60113941:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60113943:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60113944:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60113945:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60113946:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60113984:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60113985:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60113986:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60113988:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112994:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6011391:{length:"7",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601140:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601142:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601143:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601144:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601145:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601146:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601147:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601148:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601149:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601174:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60113989:{length:"8",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601178:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6011399:{length:"7",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601186:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601187:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601188:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601189:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},644:{length:"3",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},65:{length:"2",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6506:{length:"4",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6507:{length:"4",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6508:{length:"4",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601177:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},601179:{length:"6",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},6509:{length:"4",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60110:{length:"5",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60112:{length:"5",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60113:{length:"5",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60114:{length:"5",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},60119:{length:"5",cardName:"发现卡",cardType:"贷记卡",belong:"Discover Financial Services，I"},621253:{length:"6",cardName:"银联人民币卡",cardType:"借记卡",belong:"澳门商业银行"},621254:{length:"6",cardName:"银联澳门币卡",cardType:"借记卡",belong:"澳门商业银行"},621255:{length:"6",cardName:"银联港币卡",cardType:"借记卡",belong:"澳门商业银行"},625014:{length:"6",cardName:"双币种普卡",cardType:"贷记卡",belong:"澳门商业银行"},625016:{length:"6",cardName:"双币种白金卡",cardType:"贷记卡",belong:"澳门商业银行"},622549:{length:"6",cardName:"HalykbankClassic",cardType:"借记卡",belong:"哈萨克斯坦国民储蓄银行"},622550:{length:"6",cardName:"HalykbankGolden",cardType:"借记卡",belong:"哈萨克斯坦国民储蓄银行"},623357:{length:"6",cardName:"Classic/Gold",cardType:"借记卡",belong:"哈萨克斯坦国民储蓄银行"},624341:{length:"6",cardName:"Classic/Gold",cardType:"贷记卡",belong:"哈萨克斯坦国民储蓄银行"},6234500:{length:"7",cardName:"",cardType:"借记卡",belong:"哈萨克斯坦国民储蓄银行"},6234501:{length:"7",cardName:"",cardType:"借记卡",belong:"哈萨克斯坦国民储蓄银行"},622354:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"Bangkok Bank Pcl"},623355:{length:"6",cardName:"Be 1st Smart UnionPay",cardType:"借记卡",belong:"Bangkok Bank Pcl"},625017:{length:"6",cardName:"普卡",cardType:"贷记卡",belong:"中国工商银行（澳门）"},625018:{length:"6",cardName:"金卡",cardType:"贷记卡",belong:"中国工商银行（澳门）"},625019:{length:"6",cardName:"白金卡",cardType:"贷记卡",belong:"中国工商银行（澳门）"},621224:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"可汗银行"},622954:{length:"6",cardName:"银联蒙图借记卡",cardType:"借记卡",belong:"可汗银行"},62345800:{length:"8",cardName:"--",cardType:"借记卡",belong:"可汗银行"},621295:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"越南Vietcombank"},625124:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"越南Vietcombank"},625154:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"越南Vietcombank"},621049:{length:"6",cardName:"Golomt Unionpay",cardType:"借记卡",belong:"蒙古郭勒姆特银行"},622444:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"蒙古郭勒姆特银行"},622414:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"蒙古郭勒姆特银行"},620011:{length:"6",cardName:"BC-CUPGiftCard",cardType:"借记卡",belong:"BC卡公司"},620027:{length:"6",cardName:"BC-CUPGiftCard",cardType:"借记卡",belong:"BC卡公司"},620031:{length:"6",cardName:"BC-CUPGiftCard",cardType:"借记卡",belong:"BC卡公司"},620039:{length:"6",cardName:"BC-CUPGiftCard",cardType:"借记卡",belong:"BC卡公司"},620103:{length:"6",cardName:"BC-CUPGiftCard",cardType:"借记卡",belong:"BC卡公司"},620106:{length:"6",cardName:"BC-CUPGiftCard",cardType:"借记卡",belong:"BC卡公司"},620120:{length:"6",cardName:"BC-CUPGiftCard",cardType:"借记卡",belong:"BC卡公司"},620123:{length:"6",cardName:"BC-CUPGiftCard",cardType:"借记卡",belong:"BC卡公司"},620125:{length:"6",cardName:"BC-CUPGiftCard",cardType:"借记卡",belong:"BC卡公司"},620220:{length:"6",cardName:"BC-CUPGiftCard",cardType:"借记卡",belong:"BC卡公司"},620278:{length:"6",cardName:"BC-CUPGiftCard",cardType:"借记卡",belong:"BC卡公司"},620812:{length:"6",cardName:"BC-CUPGiftCard",cardType:"借记卡",belong:"BC卡公司"},621006:{length:"6",cardName:"中国通卡",cardType:"借记卡",belong:"BC卡公司"},621011:{length:"6",cardName:"中国通卡",cardType:"借记卡",belong:"BC卡公司"},621012:{length:"6",cardName:"中国通卡",cardType:"借记卡",belong:"BC卡公司"},621020:{length:"6",cardName:"中国通卡",cardType:"借记卡",belong:"BC卡公司"},621023:{length:"6",cardName:"中国通卡",cardType:"借记卡",belong:"BC卡公司"},621025:{length:"6",cardName:"中国通卡",cardType:"借记卡",belong:"BC卡公司"},621027:{length:"6",cardName:"中国通卡",cardType:"借记卡",belong:"BC卡公司"},621031:{length:"6",cardName:"中国通卡",cardType:"借记卡",belong:"BC卡公司"},620132:{length:"6",cardName:"BC-CUPGiftCard",cardType:"借记卡",belong:"BC卡公司"},621039:{length:"6",cardName:"中国通卡",cardType:"借记卡",belong:"BC卡公司"},621078:{length:"6",cardName:"中国通卡",cardType:"借记卡",belong:"BC卡公司"},621220:{length:"6",cardName:"中国通卡",cardType:"借记卡",belong:"BC卡公司"},625003:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},621003:{length:"6",cardName:"中国通卡",cardType:"借记卡",belong:"BC卡公司"},625011:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625012:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625020:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625023:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625025:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625027:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625031:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},621032:{length:"6",cardName:"中国通卡",cardType:"借记卡",belong:"BC卡公司"},625039:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625078:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625079:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625103:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625106:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625006:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625112:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625120:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625123:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625125:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625127:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625131:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625032:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625139:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625178:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625179:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625220:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625320:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625111:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625132:{length:"6",cardName:"中国通卡",cardType:"贷记卡",belong:"BC卡公司"},625244:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"BC卡公司"},625243:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"BC卡公司"},621484:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"BC卡公司"},621640:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"BC卡公司"},621641:{length:"6",cardName:"BC Gwangju",cardType:"借记卡",belong:"BC卡公司"},625245:{length:"6",cardName:"BC Gwangju",cardType:"贷记卡",belong:"BC卡公司"},625246:{length:"6",cardName:"BC Gwangju",cardType:"贷记卡",belong:"BC卡公司"},623379:{length:"6",cardName:"Woori",cardType:"借记卡",belong:"BC卡公司"},624344:{length:"6",cardName:"BC Baro",cardType:"贷记卡",belong:"BC卡公司"},624424:{length:"6",cardName:"Woori",cardType:"贷记卡",belong:"BC卡公司"},624446:{length:"6",cardName:"Woori",cardType:"贷记卡",belong:"BC卡公司"},624346:{length:"6",cardName:"Woori",cardType:"贷记卡",belong:"BC卡公司"},623395:{length:"6",cardName:"BC-IBK",cardType:"借记卡",belong:"BC卡公司"},624373:{length:"6",cardName:"BC-Woori",cardType:"贷记卡",belong:"BC卡公司"},624374:{length:"6",cardName:"BC-Woori",cardType:"贷记卡",belong:"BC卡公司"},624384:{length:"6",cardName:"BC-IBK",cardType:"贷记卡",belong:"BC卡公司"},624420:{length:"6",cardName:"BC-Woori",cardType:"贷记卡",belong:"BC卡公司"},624380:{length:"6",cardName:"Woori",cardType:"贷记卡",belong:"BC卡公司"},624404:{length:"6",cardName:"Woori",cardType:"贷记卡",belong:"BC卡公司"},624345:{length:"6",cardName:"BC-IBK",cardType:"贷记卡",belong:"BC卡公司"},623391:{length:"6",cardName:"BC-NH NongHyup",cardType:"借记卡",belong:"BC卡公司"},623392:{length:"6",cardName:"BC-NH NongHyup",cardType:"借记卡",belong:"BC卡公司"},623393:{length:"6",cardName:"BC-Woori",cardType:"借记卡",belong:"BC卡公司"},624343:{length:"6",cardName:"BC-Woori",cardType:"贷记卡",belong:"BC卡公司"},624381:{length:"6",cardName:"BC-NH NongHyup",cardType:"贷记卡",belong:"BC卡公司"},624382:{length:"6",cardName:"BC-NH NongHyup",cardType:"贷记卡",belong:"BC卡公司"},623451:{length:"6",cardName:"",cardType:"借记卡",belong:"BC卡公司"},623452:{length:"6",cardName:"",cardType:"借记卡",belong:"BC卡公司"},623453:{length:"6",cardName:"",cardType:"借记卡",belong:"BC卡公司"},623454:{length:"6",cardName:"",cardType:"借记卡",belong:"BC卡公司"},621040:{length:"6",cardName:"cup-unioncard",cardType:"借记卡",belong:"莫斯科人民储蓄银行"},621045:{length:"6",cardName:"Classic/Gold",cardType:"借记卡",belong:"丝绸之路银行"},621264:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"俄罗斯远东商业银行"},622356:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"CSC"},621234:{length:"6",cardName:"CSC借记卡",cardType:"借记卡",belong:"CSC"},62349550:{length:"8",cardName:"EximCard",cardType:"预付费卡",belong:"CSC"},62235600:{length:"8",cardName:"Fransubank Crdit Platinum UPI",cardType:"贷记卡",belong:"CSC"},622145:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"Allied Bank"},625013:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"Allied Bank"},622130:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"日本三菱信用卡公司"},621257:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"Baiduri Bank Berhad"},621055:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"越南西贡商业银行"},620009:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"越南西贡商业银行"},625002:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"越南西贡商业银行"},625033:{length:"6",cardName:"银联卡",cardType:"贷记卡",belong:"菲律宾BDO"},625035:{length:"6",cardName:"银联卡",cardType:"贷记卡",belong:"菲律宾BDO"},625007:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"菲律宾RCBC"},6233710:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"Gazprombank"},6233711:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"Gazprombank"},6233712:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"Gazprombank"},6233720:{length:"7",cardName:"Gold",cardType:"借记卡",belong:"Gazprombank"},6233721:{length:"7",cardName:"Gold",cardType:"借记卡",belong:"Gazprombank"},6233722:{length:"7",cardName:"Gold",cardType:"借记卡",belong:"Gazprombank"},6233723:{length:"7",cardName:"Gold",cardType:"借记卡",belong:"Gazprombank"},6233730:{length:"7",cardName:"Platinum",cardType:"借记卡",belong:"Gazprombank"},6233731:{length:"7",cardName:"Platinum",cardType:"借记卡",belong:"Gazprombank"},6233732:{length:"7",cardName:"Platinum",cardType:"借记卡",belong:"Gazprombank"},6233760:{length:"7",cardName:"Diamond",cardType:"借记卡",belong:"Gazprombank"},6233761:{length:"7",cardName:"Diamond",cardType:"借记卡",belong:"Gazprombank"},6233762:{length:"7",cardName:"Diamond",cardType:"借记卡",belong:"Gazprombank"},6243650:{length:"7",cardName:"Classic",cardType:"贷记卡",belong:"Gazprombank"},6243651:{length:"7",cardName:"Classic",cardType:"贷记卡",belong:"Gazprombank"},6243652:{length:"7",cardName:"Classic",cardType:"贷记卡",belong:"Gazprombank"},6234280:{length:"7",cardName:"DEBIT",cardType:"借记卡",belong:"EQUITY BANK KENYA LIMITED"},6234290:{length:"7",cardName:"PREPAID",cardType:"预付费卡",belong:"EQUITY BANK KENYA LIMITED"},620015:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"新加坡星网电子付款私人有限公司"},620024:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"Royal Bank Open Stock Company"},625004:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"Royal Bank Open Stock Company"},621344:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"Royal Bank Open Stock Company"},621349:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"乌兹别克斯坦INFINBANK"},620108:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"Russian Standard Bank"},6216846:{length:"7",cardName:"UnionPay",cardType:"借记卡",belong:"Russian Standard Bank"},6216848:{length:"7",cardName:"UnionPay",cardType:"借记卡",belong:"Russian Standard Bank"},6250386:{length:"7",cardName:"UnionPay",cardType:"贷记卡",belong:"Russian Standard Bank"},6250388:{length:"7",cardName:"UnionPay",cardType:"贷记卡",belong:"Russian Standard Bank"},6201086:{length:"7",cardName:"预付卡",cardType:"预付费卡",belong:"Russian Standard Bank"},6201088:{length:"7",cardName:"预付卡",cardType:"预付费卡",belong:"Russian Standard Bank"},621354:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"BCEL"},623326:{length:"6",cardName:"China Union Pay - Elcard",cardType:"借记卡",belong:"Kyrgyz Investment Credit Bank"},623327:{length:"6",cardName:"China Union Pay - Elcard",cardType:"借记卡",belong:"Kyrgyz Investment Credit Bank"},6234610:{length:"7",cardName:"",cardType:"借记卡",belong:"Kyrgyz Investment Credit Bank"},6292740:{length:"7",cardName:"",cardType:"借记卡",belong:"Kyrgyz Investment Credit Bank"},621274:{length:"6",cardName:"汇业卡",cardType:"借记卡",belong:"澳门BDA"},621324:{length:"6",cardName:"汇业卡",cardType:"借记卡",belong:"澳门BDA"},620532:{length:"6",cardName:"双币闪付卡",cardType:"预付费卡",belong:"澳门通股份有限公司"},620126:{length:"6",cardName:"旅游卡",cardType:"预付费卡",belong:"澳门通股份有限公司"},620537:{length:"6",cardName:"旅游卡",cardType:"预付费卡",belong:"澳门通股份有限公司"},625904:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"韩国乐天"},624313:{length:"6",cardName:"Lotte Corporate Card",cardType:"贷记卡",belong:"韩国乐天"},624333:{length:"6",cardName:"Diamond Card",cardType:"贷记卡",belong:"韩国乐天"},623358:{length:"6",cardName:"Lotte Check Card,PointPlus",cardType:"借记卡",belong:"韩国乐天"},621645:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"巴基斯坦FAYSAL BANK"},621624:{length:"6",cardName:"UnionPay",cardType:"借记卡",belong:"OJSCBASIAALLIANCEBANK"},623332:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"Cambodia Mekong Bank PL"},624338:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"Cambodia Mekong Bank PL"},624351:{length:"6",cardName:"MekongBank UnionPay Card",cardType:"贷记卡",belong:"Cambodia Mekong Bank PL"},623339:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"OJSC Russian Investment Bank"},623370:{length:"6",cardName:"General purpose",cardType:"预付费卡",belong:"DE SURINAAMSCHE BANK N.V."},625104:{length:"6",cardName:"信用卡",cardType:"贷记卡",belong:"俄罗斯ORIENT EXPRESS BANK"},621647:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"俄罗斯ORIENT EXPRESS BANK"},621642:{length:"6",cardName:"普卡/金卡",cardType:"借记卡",belong:"Mongolia Trade Develop. Bank"},624366:{length:"6",cardName:"GOLD UNIONPAY CARD",cardType:"贷记卡",belong:"Mongolia Trade Develop. Bank"},621654:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"Krung Thaj Bank Public Co. Ltd"},625804:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"韩国KB"},623374:{length:"6",cardName:"KB Kookmin Card CO.,Ltd",cardType:"借记卡",belong:"韩国KB"},624370:{length:"6",cardName:"KB Kookmin card",cardType:"贷记卡",belong:"韩国KB"},620056:{length:"6",cardName:"NEO MONEY",cardType:"预付费卡",belong:"Credit Saison"},625814:{length:"6",cardName:"三星卡",cardType:"贷记卡",belong:"韩国三星卡公司"},625817:{length:"6",cardName:"三星卡",cardType:"贷记卡",belong:"韩国三星卡公司"},624399:{length:"6",cardName:"SAMSUNG CORPORATE PLATINUM",cardType:"贷记卡",belong:"韩国三星卡公司"},624400:{length:"6",cardName:"SAMSUNG SHINSEGAE CARD",cardType:"贷记卡",belong:"韩国三星卡公司"},624401:{length:"6",cardName:"SAMSUNG CHCK CARD",cardType:"贷记卡",belong:"韩国三星卡公司"},624410:{length:"6",cardName:"SAMSUNG CARD",cardType:"贷记卡",belong:"韩国三星卡公司"},624411:{length:"6",cardName:"SAMSUNG CHECK CARD",cardType:"贷记卡",belong:"韩国三星卡公司"},626395:{length:"6",cardName:"--",cardType:"贷记卡",belong:"韩国三星卡公司"},624413:{length:"6",cardName:"--",cardType:"贷记卡",belong:"韩国三星卡公司"},621649:{length:"6",cardName:"Fonon Bank Card",cardType:"借记卡",belong:"CJSC Fononbank"},623316:{length:"6",cardName:"",cardType:"借记卡",belong:"CRDB BANK PLC"},623317:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"CRDB BANK PLC"},623315:{length:"6",cardName:"UICC DEBIT-RMB",cardType:"借记卡",belong:"CRDB BANK PLC"},620079:{length:"6",cardName:"PrepaidCard",cardType:"借记卡",belong:"Commercial Bank of Dubai"},620091:{length:"6",cardName:"PrepaidCard",cardType:"借记卡",belong:"Commercial Bank of Dubai"},620105:{length:"6",cardName:"UnionPay Travel Card",cardType:"预付费卡",belong:"The Bancorp Bank"},622164:{length:"6",cardName:"China UnionPay Travel Card",cardType:"预付费卡",belong:"The Bancorp Bank"},624357:{length:"6",cardName:"Unionpay Gift Card",cardType:"预付费卡",belong:"The Bancorp Bank"},621657:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"巴基斯坦HabibBank"},623024:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"新韩卡公司"},625840:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"新韩卡公司"},625841:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"新韩卡公司"},624331:{length:"6",cardName:"Shinhan Platinum#",cardType:"贷记卡",belong:"新韩卡公司"},624348:{length:"6",cardName:"Shinhan Platinum",cardType:"贷记卡",belong:"新韩卡公司"},624332:{length:"6",cardName:"Shinhan",cardType:"贷记卡",belong:"新韩卡公司"},626394:{length:"6",cardName:"Shinhan",cardType:"贷记卡",belong:"新韩卡公司"},624339:{length:"6",cardName:"",cardType:"贷记卡",belong:"新韩卡公司"},621794:{length:"6",cardName:"PSVBUPIDEBIT",cardType:"借记卡",belong:"Phongsavanh Bank Limited"},625944:{length:"6",cardName:"PSVBUPICREDIT",cardType:"贷记卡",belong:"Phongsavanh Bank Limited"},621694:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"Capital Bank of Mongolia"},62341602:{length:"8",cardName:"--",cardType:"借记卡",belong:"Capital Bank of Mongolia"},62341601:{length:"8",cardName:"",cardType:"借记卡",belong:"Capital Bank of Mongolia"},6233451:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"JSC Liberty Bank"},6233452:{length:"7",cardName:"Gold",cardType:"借记卡",belong:"JSC Liberty Bank"},623347:{length:"6",cardName:"Diamond",cardType:"借记卡",belong:"JSC Liberty Bank"},6233453:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"JSC Liberty Bank"},6233454:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"JSC Liberty Bank"},6233455:{length:"7",cardName:"Gold",cardType:"借记卡",belong:"JSC Liberty Bank"},620129:{length:"6",cardName:"预付卡",cardType:"借记卡",belong:"The Mauritius Commercial Bank"},62927300:{length:"8",cardName:"",cardType:"借记卡",belong:"Non-banking credit"},621301:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"格鲁吉亚 Invest Bank"},6214455:{length:"7",cardName:"CUP Debit Gold",cardType:"借记卡",belong:"PT Bank Sinarmas,Tbk"},6214458:{length:"7",cardName:"Debit CUP Diamond",cardType:"借记卡",belong:"PT Bank Sinarmas,Tbk"},6234240:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"JSC Kazkommertsbank"},6234241:{length:"7",cardName:"Gold",cardType:"借记卡",belong:"JSC Kazkommertsbank"},6234242:{length:"7",cardName:"Gold",cardType:"借记卡",belong:"JSC Kazkommertsbank"},624306:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"Cim Finance Ltd"},624322:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"Cim Finance Ltd"},623300:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"Rawbank S.a.r.l"},623302:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"PVB Card Corporation"},623303:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"PVB Card Corporation"},623304:{length:"6",cardName:"预付卡",cardType:"借记卡",belong:"PVB Card Corporation"},623324:{length:"6",cardName:"预付卡",cardType:"借记卡",belong:"PVB Card Corporation"},623492:{length:"6",cardName:"预付卡",cardType:"借记卡",belong:"PVB Card Corporation"},623398:{length:"6",cardName:"LANDBANK CUP Propaid Card",cardType:"预付费卡",belong:"PVB Card Corporation"},62334910:{length:"8",cardName:"",cardType:"预付费卡",belong:"PVB Card Corporation"},62334911:{length:"8",cardName:"",cardType:"预付费卡",belong:"PVB Card Corporation"},62334912:{length:"8",cardName:"",cardType:"预付费卡",belong:"PVB Card Corporation"},6243051:{length:"7",cardName:"SBankUnionPay",cardType:"贷记卡",belong:"PT BANK SINARMAS TBK"},6243052:{length:"7",cardName:"SBankUnionPay",cardType:"贷记卡",belong:"PT BANK SINARMAS TBK"},623307:{length:"6",cardName:"U Paisa ATM &Debit Card",cardType:"借记卡",belong:"U Microfinance Bank Limited"},623311:{length:"6",cardName:"Prepaid Card",cardType:"预付费卡",belong:"Ecobank Nigeria"},623312:{length:"6",cardName:"al baraka classic card",cardType:"借记卡",belong:"Al Baraka Bank(Pakistan)"},623313:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"OJSC Hamkor bank"},623323:{length:"6",cardName:"NH Card",cardType:"借记卡",belong:"NongHyup Bank"},623341:{length:"6",cardName:"NH Card",cardType:"借记卡",belong:"NongHyup Bank"},624320:{length:"6",cardName:"NH Card",cardType:"贷记卡",belong:"NongHyup Bank"},624321:{length:"6",cardName:"NH Card",cardType:"贷记卡",belong:"NongHyup Bank"},624324:{length:"6",cardName:"NH Card",cardType:"贷记卡",belong:"NongHyup Bank"},624325:{length:"6",cardName:"NH Card",cardType:"贷记卡",belong:"NongHyup Bank"},624387:{length:"6",cardName:"NH Card",cardType:"贷记卡",belong:"NongHyup Bank"},624388:{length:"6",cardName:"NH Card",cardType:"贷记卡",belong:"NongHyup Bank"},623314:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"Fidelity Bank Plc"},623325:{length:"6",cardName:"Magnetic stripe",cardType:"借记卡",belong:"Davr Bank"},623375:{length:"6",cardName:"UPI Debit Classic",cardType:"借记卡",belong:"Advanced Bank of Asia Ltd."},623331:{length:"6",cardName:"Prepaid card",cardType:"预付费卡",belong:"State Bank of Mauritius"},623348:{length:"6",cardName:"Debit Card",cardType:"借记卡",belong:"State Bank of Mauritius"},6243550:{length:"7",cardName:"GBC Individual Debit",cardType:"借记卡",belong:"Global Bank of Commerce Ltd"},6243551:{length:"7",cardName:"GBC Corporate Debit",cardType:"借记卡",belong:"Global Bank of Commerce Ltd"},6243560:{length:"7",cardName:"GBC Individual Prepaid",cardType:"预付费卡",belong:"Global Bank of Commerce Ltd"},6243561:{length:"7",cardName:"GBC Corporate Prepaid",cardType:"预付费卡",belong:"Global Bank of Commerce Ltd"},623336:{length:"6",cardName:"预付卡",cardType:"借记卡",belong:"JSC ATFBank"},623337:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"JSC ATFBank"},623338:{length:"6",cardName:"借记卡",cardType:"借记卡",belong:"JSC ATFBank"},624323:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"JSC ATFBank"},623360:{length:"6",cardName:"Debit/Classic/Individual",cardType:"借记卡",belong:"Optima Bank OJSC"},62335201:{length:"8",cardName:"Debit/Classic",cardType:"借记卡",belong:"State bank"},62335202:{length:"8",cardName:"Debit/Gold",cardType:"借记卡",belong:"State bank"},62335203:{length:"8",cardName:"Debit/Platinum",cardType:"借记卡",belong:"State bank"},623499:{length:"6",cardName:"CUP Prepaid IC Card",cardType:"预付费卡",belong:"Himalayan Bank Limited"},62335101:{length:"8",cardName:"classic",cardType:"借记卡",belong:"CJSC “Spitamen Bank”"},62335102:{length:"8",cardName:"gold",cardType:"借记卡",belong:"CJSC “Spitamen Bank”"},62335103:{length:"8",cardName:"platinum",cardType:"借记卡",belong:"CJSC “Spitamen Bank”"},62335104:{length:"8",cardName:"diamond",cardType:"借记卡",belong:"CJSC “Spitamen Bank”"},62335105:{length:"8",cardName:"classic",cardType:"借记卡",belong:"CJSC “Spitamen Bank”"},62335106:{length:"8",cardName:"gold",cardType:"借记卡",belong:"CJSC “Spitamen Bank”"},62335107:{length:"8",cardName:"platinum",cardType:"借记卡",belong:"CJSC “Spitamen Bank”"},62335108:{length:"8",cardName:"diamond",cardType:"借记卡",belong:"CJSC “Spitamen Bank”"},6233531:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"Light Bank"},6233532:{length:"7",cardName:"Gold",cardType:"借记卡",belong:"Light Bank"},6233533:{length:"7",cardName:"Platinum",cardType:"借记卡",belong:"Light Bank"},6233534:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"Light Bank"},6233535:{length:"7",cardName:"Gold",cardType:"借记卡",belong:"Light Bank"},6233536:{length:"7",cardName:"Platinum",cardType:"借记卡",belong:"Light Bank"},6234980:{length:"7",cardName:"Prepaid",cardType:"预付费卡",belong:"Light Bank"},6234981:{length:"7",cardName:"Prepaid Classic",cardType:"预付费卡",belong:"Light Bank"},6233537:{length:"7",cardName:"Debit Diamond",cardType:"借记卡",belong:"Light Bank"},6233538:{length:"7",cardName:"Debit Classic",cardType:"借记卡",belong:"Light Bank"},6233539:{length:"7",cardName:"Debit Platinum",cardType:"借记卡",belong:"Light Bank"},623493:{length:"6",cardName:"EASI Travel Prepaid",cardType:"预付费卡",belong:"Co-Operative Bank Limited"},6221440:{length:"7",cardName:"",cardType:"预付费卡",belong:"Travelex Card Services"},6221441:{length:"7",cardName:"",cardType:"预付费卡",belong:"Travelex Japan KK"},623359:{length:"6",cardName:"",cardType:"借记卡",belong:"Bank AL Habib Limited"},623362:{length:"6",cardName:"Load & Go China",cardType:"预付费卡",belong:"Bank of China(Australia)"},6243420:{length:"7",cardName:"Classic",cardType:"贷记卡",belong:"OSJC MTS Bank"},6243421:{length:"7",cardName:"Gold",cardType:"贷记卡",belong:"OSJC MTS Bank"},6243422:{length:"7",cardName:"Platinum",cardType:"贷记卡",belong:"OSJC MTS Bank"},6243423:{length:"7",cardName:"Classic",cardType:"贷记卡",belong:"OSJC MTS Bank"},6243424:{length:"7",cardName:"Gold",cardType:"贷记卡",belong:"OSJC MTS Bank"},6243425:{length:"7",cardName:"Platinum",cardType:"贷记卡",belong:"OSJC MTS Bank"},623369:{length:"6",cardName:"Heritage Traveler",cardType:"预付费卡",belong:"Heritage International Bank"},6233681:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"OJSC Tojiksodirotbank"},624364:{length:"6",cardName:"Integrated Solutions GPR",cardType:"预付费卡",belong:"MetaBank"},624352:{length:"6",cardName:"Lao Airlines Classic",cardType:"贷记卡",belong:"Banque Pour Le Commerce"},624353:{length:"6",cardName:"Lao Airlines Gold",cardType:"贷记卡",belong:"Banque Pour Le Commerce"},624354:{length:"6",cardName:"Lao Airline Platinum",cardType:"贷记卡",belong:"Banque Pour Le Commerce"},623381:{length:"6",cardName:"TBD",cardType:"借记卡",belong:"Bank Alfalah Limited"},623380:{length:"6",cardName:"Debit",cardType:"借记卡",belong:"Cooperative & Agricultural"},624367:{length:"6",cardName:"Credit",cardType:"贷记卡",belong:"Cooperative & Agricultural"},6233780:{length:"7",cardName:"BaikalBank",cardType:"借记卡",belong:"Open Joint-stock Company"},6233781:{length:"7",cardName:"BaikalBank",cardType:"借记卡",belong:"Open Joint-stock Company"},6233840:{length:"7",cardName:"密码借记卡",cardType:"借记卡",belong:"BANCO SOL,S.A."},6233841:{length:"7",cardName:"密码借记卡",cardType:"借记卡",belong:"BANCO SOL,S.A."},623385:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"BANCO SOL,S.A."},6233820:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"Subsidiary Bank Sberbank RUS"},6233821:{length:"7",cardName:"Gold",cardType:"借记卡",belong:"Subsidiary Bank Sberbank RUS"},6233822:{length:"7",cardName:"Platinum",cardType:"借记卡",belong:"Subsidiary Bank Sberbank RUS"},6233823:{length:"7",cardName:"Diamond",cardType:"借记卡",belong:"Subsidiary Bank Sberbank RUS"},6233824:{length:"7",cardName:"Classic Corporate",cardType:"借记卡",belong:"Subsidiary Bank Sberbank RUS"},623383:{length:"6",cardName:"Debit card - Gold Card",cardType:"借记卡",belong:"Lao China Bank Co.,Ltd"},623386:{length:"6",cardName:"Debit card - Classic Card",cardType:"借记卡",belong:"Lao China Bank Co.,Ltd"},623388:{length:"6",cardName:"Debit card - Platinum Card",cardType:"借记卡",belong:"Lao China Bank Co.,Ltd"},624368:{length:"6",cardName:"Hyundai",cardType:"贷记卡",belong:"Hyundaicard"},624376:{length:"6",cardName:"Hyundai",cardType:"贷记卡",belong:"Hyundaicard"},624377:{length:"6",cardName:"Hyundai",cardType:"贷记卡",belong:"Hyundaicard"},624378:{length:"6",cardName:"Hyundai",cardType:"贷记卡",belong:"Hyundaicard"},6233960:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"Bank of Moscow OJSC"},6233961:{length:"7",cardName:"Gold",cardType:"借记卡",belong:"Bank of Moscow OJSC"},623389:{length:"6",cardName:"Classic Debit",cardType:"借记卡",belong:"Sindh Bank Limited"},6234460:{length:"7",cardName:"",cardType:"借记卡",belong:"Russian Agricultural Bank"},6234120:{length:"7",cardName:"Gold",cardType:"借记卡",belong:"ROSENERGOBANK"},6243970:{length:"7",cardName:"Gold",cardType:"贷记卡",belong:"ROSENERGOBANK"},6234122:{length:"7",cardName:"Gold",cardType:"借记卡",belong:"ROSENERGOBANK"},6234121:{length:"7",cardName:"",cardType:"借记卡",belong:"ROSENERGOBANK"},623417:{length:"6",cardName:"--",cardType:"借记卡",belong:"Subsidiary JSC VTB Bank"},623418:{length:"6",cardName:"--",cardType:"借记卡",belong:"Subsidiary JSC VTB Bank"},623419:{length:"6",cardName:"--",cardType:"借记卡",belong:"Subsidiary JSC VTB Bank"},623420:{length:"6",cardName:"--",cardType:"借记卡",belong:"Subsidiary JSC VTB Bank"},623421:{length:"6",cardName:"--",cardType:"借记卡",belong:"Subsidiary JSC VTB Bank"},629180:{length:"6",cardName:"--",cardType:"借记卡",belong:"Subsidiary JSC VTB Bank"},6234090:{length:"7",cardName:"Classic Unembossed",cardType:"借记卡",belong:"Credit Ural Bank Joint Stock"},6243900:{length:"7",cardName:"Classic",cardType:"贷记卡",belong:"Credit Ural Bank Joint Stock"},6243901:{length:"7",cardName:"Gold",cardType:"贷记卡",belong:"Credit Ural Bank Joint Stock"},6243902:{length:"7",cardName:"Platinum",cardType:"贷记卡",belong:"Credit Ural Bank Joint Stock"},6233990:{length:"7",cardName:"FIDELITY UPI PREPAID CARD",cardType:"预付费卡",belong:"FIDELITY BANK GHANA LIMITED"},6233991:{length:"7",cardName:"FIDELITY UPI PREPAID CARD",cardType:"预付费卡",belong:"FIDELITY BANK GHANA LIMITED"},621052:{length:"6",cardName:"POSB UnionPay ATM Card",cardType:"借记卡",belong:"DBS Bank Ltd"},62341401:{length:"8",cardName:"Debit Gold card",cardType:"借记卡",belong:"XacBank"},62341402:{length:"8",cardName:"Debit Classic card",cardType:"借记卡",belong:"XacBank"},62341403:{length:"8",cardName:"Debit Platinum card",cardType:"借记卡",belong:"XacBank"},623414:{length:"6",cardName:"--",cardType:"借记卡",belong:"XacBank"},624391:{length:"6",cardName:"DBS UnionPay Debit Card",cardType:"贷记卡",belong:"DBS Bank Ltd"},6234150:{length:"7",cardName:"SINO Card",cardType:"预付费卡",belong:"Sinopay（Singapore）PTE Ltd"},6234151:{length:"7",cardName:"SINO Card",cardType:"预付费卡",belong:"Sinopay（Singapore）PTE Ltd"},6234152:{length:"7",cardName:"",cardType:"预付费卡",belong:"Sinopay（Singapore）PTE Ltd"},6234250:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"JSCB Primorye"},6234251:{length:"7",cardName:"Gold",cardType:"借记卡",belong:"JSCB Primorye"},623448:{length:"6",cardName:"--",cardType:"借记卡",belong:"Habib Bank Limited"},6234270:{length:"7",cardName:"HBL DebitCard",cardType:"借记卡",belong:"HBL"},623443:{length:"6",cardName:"--",cardType:"借记卡",belong:"Habib Bank Limited"},6244092:{length:"7",cardName:"Platinum USD",cardType:"贷记卡",belong:"Joint-Stock Commercial Bank"},6244096:{length:"7",cardName:"Platinum RUB",cardType:"贷记卡",belong:"Joint-Stock Commercial Bank"},6234310:{length:"7",cardName:"MIP-UPI-GOLD",cardType:"借记卡",belong:"MIP BANK"},62344901:{length:"8",cardName:"",cardType:"借记卡",belong:"Banque S C pour Afrique"},62441701:{length:"8",cardName:"",cardType:"贷记卡",belong:"Banque S C pour Afrique"},6234320:{length:"7",cardName:"Classic CNY",cardType:"借记卡",belong:"OJS SCBP Primsotsbank"},6234321:{length:"7",cardName:"Gold CNY",cardType:"借记卡",belong:"OJS SCBP Primsotsbank"},6234322:{length:"7",cardName:"Classic RUB",cardType:"借记卡",belong:"OJS SCBP Primsotsbank"},6234323:{length:"7",cardName:"Gold RUB",cardType:"借记卡",belong:"OJS SCBP Primsotsbank"},6234330:{length:"7",cardName:"",cardType:"借记卡",belong:"AGD Bank Ltd"},6234350:{length:"7",cardName:"Classic",cardType:"借记卡",belong:"Conservative commercial bank"},6234351:{length:"7",cardName:"Gold",cardType:"借记卡",belong:"Conservative commercial bank"},6234352:{length:"7",cardName:"Platinum",cardType:"借记卡",belong:"Conservative commercial bank"},6234420:{length:"7",cardName:"",cardType:"预付费卡",belong:"Noor Bank PJSC"},62343800:{length:"8",cardName:"PCB Congo UPI Debit Card",cardType:"借记卡",belong:"PROCREDIT BANK CONGO"},62344000:{length:"8",cardName:"--",cardType:"借记卡",belong:"National Bank of Kenya Limited"},62344001:{length:"8",cardName:"--",cardType:"借记卡",belong:"National Bank of Kenya Limited"},62441500:{length:"8",cardName:"--",cardType:"贷记卡",belong:"National Bank of Kenya Limited"},62441501:{length:"8",cardName:"--",cardType:"贷记卡",belong:"National Bank of Kenya Limited"},62344100:{length:"8",cardName:"",cardType:"预付费卡",belong:"National Bank of Kenya Limited"},624416:{length:"6",cardName:"--",cardType:"贷记卡",belong:"Financiera Cuallix"},624418:{length:"6",cardName:"UPI Gold Card",cardType:"贷记卡",belong:"CrediMax"},6292720:{length:"7",cardName:"",cardType:"预付费卡",belong:"Al Tail Money Transfer"},62345500:{length:"8",cardName:"--",cardType:"借记卡",belong:"BRD Commercal Bank Limited"},62346000:{length:"8",cardName:"--",cardType:"借记卡",belong:"ABC BANKING CORPORATION LTD"},62346001:{length:"8",cardName:"--",cardType:"借记卡",belong:"ABC BANKING CORPORATION LTD"},622346:{length:"6",cardName:"人民币信用卡金卡",cardType:"贷记卡",belong:"中国银行香港有限公司"},622347:{length:"6",cardName:"信用卡普通卡",cardType:"贷记卡",belong:"中国银行香港有限公司"},622348:{length:"6",cardName:"中银卡(人民币)",cardType:"借记卡",belong:"中国银行香港有限公司"},622349:{length:"6",cardName:"人民币信用卡金卡",cardType:"贷记卡",belong:"南洋商业银行"},622350:{length:"6",cardName:"信用卡普通卡",cardType:"贷记卡",belong:"南洋商业银行"},622352:{length:"6",cardName:"人民币信用卡金卡",cardType:"贷记卡",belong:"集友银行"},622353:{length:"6",cardName:"信用卡普通卡",cardType:"贷记卡",belong:"集友银行"},622355:{length:"6",cardName:"中银卡",cardType:"借记卡",belong:"集友银行"},621041:{length:"6",cardName:"银联港币借记卡",cardType:"借记卡",belong:"中国银行(香港)"},622351:{length:"6",cardName:"中银卡(人民币)",cardType:"借记卡",belong:"南洋商业银行"},620515:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中银通商务支付有限公司"},920000:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中银通商务支付有限公司"},921001:{length:"6",cardName:"",cardType:"预付费卡",belong:"中银通商务支付有限公司"},921002:{length:"6",cardName:"",cardType:"预付费卡",belong:"中银通商务支付有限公司"},620048:{length:"6",cardName:"预付卡",cardType:"预付费卡",belong:"中银通商务支付有限公司"},620550:{length:"6",cardName:"",cardType:"预付费卡",belong:"中银通商务支付有限公司"},621563:{length:"6",cardName:"",cardType:"借记卡",belong:"中银通商务支付有限公司"},921000:{length:"6",cardName:"安徽合肥通卡",cardType:"预付费卡",belong:"中银通支付"},6234390:{length:"7",cardName:"",cardType:"预付费卡",belong:"中银通支付商务有限公司"},620038:{length:"6",cardName:"铁路卡",cardType:"预付费卡",belong:"中银通商务支付有限公司"},622812:{length:"6",cardName:"银联标准白金卡",cardType:"贷记卡",belong:"中国邮政储蓄银行信用卡中心"},622810:{length:"6",cardName:"银联标准贷记卡",cardType:"贷记卡",belong:"中国邮政储蓄银行信用卡中心"},622811:{length:"6",cardName:"银联标准贷记卡",cardType:"贷记卡",belong:"中国邮政储蓄银行信用卡中心"},628310:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"中国邮政储蓄银行信用卡中心"},625919:{length:"6",cardName:"上海购物信用卡",cardType:"贷记卡",belong:"中国邮政储蓄银行信用卡中心"},625368:{length:"6",cardName:"中国旅游卡",cardType:"贷记卡",belong:"中国邮政储蓄银行信用卡中心"},625367:{length:"6",cardName:"中国旅游卡",cardType:"贷记卡",belong:"中国邮政储蓄银行信用卡中心"},518905:{length:"6",cardName:"全币种信用卡",cardType:"贷记卡",belong:"中国邮政储蓄银行信用卡中心"},376968:{length:"6",cardName:"中信贷记卡银联卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},376969:{length:"6",cardName:"中信贷记卡银联卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},400360:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},403391:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},403392:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},376966:{length:"6",cardName:"中信贷记卡银联卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},404158:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},404159:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},404171:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},404172:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},404173:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},404174:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},404157:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},433667:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},433669:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},514906:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},403393:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},520108:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},433666:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},558916:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},622679:{length:"6",cardName:"中信银联标准贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},622680:{length:"6",cardName:"中信银联标准贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},622688:{length:"6",cardName:"中信银联标准贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},622689:{length:"6",cardName:"中信银联标准贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},628206:{length:"6",cardName:"中信银联公务卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},556617:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},628209:{length:"6",cardName:"中信银联公务卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},518212:{length:"6",cardName:"中信贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},628208:{length:"6",cardName:"中信银联公务卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},356390:{length:"6",cardName:"中信JCB美元卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},356391:{length:"6",cardName:"中信JCB美元卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},356392:{length:"6",cardName:"中信JCB美元卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},622916:{length:"6",cardName:"中信银联IC卡普卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},622918:{length:"6",cardName:"中信银联IC卡金卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},622919:{length:"6",cardName:"中信银联IC卡白金卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},628370:{length:"6",cardName:"公务IC普卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},628371:{length:"6",cardName:"公务IC金卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},628372:{length:"6",cardName:"公务IC白金卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},622766:{length:"6",cardName:"中信银行网付IC卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},622767:{length:"6",cardName:"中信银行网付IC卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},622768:{length:"6",cardName:"中信银行网付IC卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},622678:{length:"6",cardName:"中信银联标准贷记卡",cardType:"贷记卡",belong:"中信银行信用卡中心"},622657:{length:"6",cardName:"存贷合一白金卡",cardType:"贷记卡",belong:"光大银行"},622685:{length:"6",cardName:"存贷合一卡普卡",cardType:"贷记卡",belong:"光大银行"},622659:{length:"6",cardName:"理财信用卡",cardType:"贷记卡",belong:"光大银行"},622687:{length:"6",cardName:"存贷合一钻石卡",cardType:"贷记卡",belong:"中国光大银行"},625981:{length:"6",cardName:"存贷合一IC卡",cardType:"贷记卡",belong:"中国光大银行"},625979:{length:"6",cardName:"存贷合一IC卡",cardType:"贷记卡",belong:"中国光大银行"},356839:{length:"6",cardName:"阳光商旅信用卡",cardType:"贷记卡",belong:"中国光大银行"},356840:{length:"6",cardName:"阳光商旅信用卡",cardType:"贷记卡",belong:"中国光大银行"},406252:{length:"6",cardName:"阳光信用卡(银联",cardType:"贷记卡",belong:"中国光大银行"},406254:{length:"6",cardName:"阳光信用卡(银联",cardType:"贷记卡",belong:"中国光大银行"},425862:{length:"6",cardName:"阳光商旅信用卡",cardType:"贷记卡",belong:"中国光大银行"},481699:{length:"6",cardName:"阳光白金信用卡",cardType:"贷记卡",belong:"中国光大银行"},524090:{length:"6",cardName:"安邦俱乐部信用卡",cardType:"贷记卡",belong:"中国光大银行"},543159:{length:"6",cardName:"足球锦标赛纪念卡",cardType:"贷记卡",belong:"中国光大银行"},622161:{length:"6",cardName:"光大银行联名公务卡",cardType:"贷记卡",belong:"中国光大银行"},622570:{length:"6",cardName:"积分卡",cardType:"贷记卡",belong:"中国光大银行"},622650:{length:"6",cardName:"炎黄卡普卡",cardType:"贷记卡",belong:"中国光大银行"},622655:{length:"6",cardName:"炎黄卡白金卡",cardType:"贷记卡",belong:"中国光大银行"},622658:{length:"6",cardName:"炎黄卡金卡",cardType:"贷记卡",belong:"中国光大银行"},625975:{length:"6",cardName:"贷记IC卡",cardType:"贷记卡",belong:"中国光大银行"},625977:{length:"6",cardName:"贷记IC卡",cardType:"贷记卡",belong:"中国光大银行"},628201:{length:"6",cardName:"银联公务卡",cardType:"贷记卡",belong:"中国光大银行"},628202:{length:"6",cardName:"银联公务卡",cardType:"贷记卡",belong:"中国光大银行"},625976:{length:"6",cardName:"贷记IC卡",cardType:"贷记卡",belong:"中国光大银行"},625339:{length:"6",cardName:"银联贷记IC旅游卡",cardType:"贷记卡",belong:"中国光大银行"},622801:{length:"6",cardName:"贷记IC卡",cardType:"贷记卡",belong:"中国光大银行"},625978:{length:"6",cardName:"存贷合一IC卡",cardType:"贷记卡",belong:"中国光大银行"},625980:{length:"6",cardName:"存贷合一IC卡",cardType:"贷记卡",belong:"中国光大银行"},523959:{length:"6",cardName:"华夏万事达信用卡",cardType:"贷记卡",belong:"华夏银行"},528709:{length:"6",cardName:"万事达信用卡金卡",cardType:"贷记卡",belong:"华夏银行"},539867:{length:"6",cardName:"万事达普卡",cardType:"贷记卡",belong:"华夏银行"},539868:{length:"6",cardName:"万事达普卡",cardType:"贷记卡",belong:"华夏银行"},622637:{length:"6",cardName:"华夏信用卡金卡",cardType:"贷记卡",belong:"华夏银行"},622638:{length:"6",cardName:"华夏白金卡",cardType:"贷记卡",belong:"华夏银行"},628318:{length:"6",cardName:"华夏公务信用卡",cardType:"贷记卡",belong:"华夏银行"},528708:{length:"6",cardName:"万事达信用卡金卡",cardType:"贷记卡",belong:"华夏银行"},622636:{length:"6",cardName:"华夏信用卡普卡",cardType:"贷记卡",belong:"华夏银行"},625967:{length:"6",cardName:"华夏标准金融IC信用卡",cardType:"贷记卡",belong:"华夏银行"},625968:{length:"6",cardName:"华夏标准金融IC信用卡",cardType:"贷记卡",belong:"华夏银行"},625969:{length:"6",cardName:"华夏标准金融IC信用卡",cardType:"贷记卡",belong:"华夏银行"},625971:{length:"6",cardName:"移动浦发借贷合一联名卡",cardType:"贷记卡",belong:"浦发银行信用卡中心"},625970:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"浦发银行信用卡中心"},377187:{length:"6",cardName:"浦发私人银行信用卡",cardType:"贷记卡",belong:"浦发银行信用卡中心"},625831:{length:"6",cardName:"中国移动浦发银行联名手机卡",cardType:"贷记卡",belong:"浦发银行信用卡中心"},622693:{length:"6",cardName:"--",cardType:"贷记卡",belong:"浦发银行信用卡中心"},625833:{length:"6",cardName:"苹果手机支付卡",cardType:"贷记卡",belong:"浦发银行信用卡中心"},622265:{length:"6",cardName:"东亚银行普卡",cardType:"贷记卡",belong:"东亚银行(中国)有限公司"},622266:{length:"6",cardName:"东亚银行金卡",cardType:"贷记卡",belong:"东亚银行(中国)有限公司"},625972:{length:"6",cardName:"百家网点纪念版IC贷记卡",cardType:"贷记卡",belong:"东亚银行(中国)有限公司"},625973:{length:"6",cardName:"百家网点纪念版IC贷记卡",cardType:"贷记卡",belong:"东亚银行(中国)有限公司"},625093:{length:"6",cardName:"银联个人白金信用卡",cardType:"贷记卡",belong:"南洋商业银行"},625095:{length:"6",cardName:"银联商务白金信用卡",cardType:"贷记卡",belong:"南洋商业银行"},522001:{length:"6",cardName:"万事达双币金卡",cardType:"贷记卡",belong:"北京银行"},622163:{length:"6",cardName:"银联标准贷记卡",cardType:"贷记卡",belong:"北京银行"},622853:{length:"6",cardName:"银联标准贷记卡",cardType:"贷记卡",belong:"北京银行"},628203:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"北京银行"},622851:{length:"6",cardName:"北京银行中荷人寿联名卡",cardType:"贷记卡",belong:"北京银行"},622852:{length:"6",cardName:"尊尚白金卡",cardType:"贷记卡",belong:"北京银行"},625816:{length:"6",cardName:"--",cardType:"贷记卡",belong:"北京银行"},625165:{length:"6",cardName:"--",cardType:"贷记卡",belong:"常熟农村商业银行"},625169:{length:"6",cardName:"深圳农村商业银行信用卡",cardType:"贷记卡",belong:"深圳农村商业银行"},625903:{length:"6",cardName:"汇通贷记卡",cardType:"贷记卡",belong:"宁波银行"},622778:{length:"6",cardName:"汇通白金卡",cardType:"贷记卡",belong:"宁波银行"},628207:{length:"6",cardName:"汇通公务卡",cardType:"贷记卡",belong:"宁波银行"},622282:{length:"6",cardName:"汇通贷记卡（IC）",cardType:"贷记卡",belong:"宁波银行"},622318:{length:"6",cardName:"汇通贷记卡(IC)",cardType:"贷记卡",belong:"宁波银行"},628379:{length:"6",cardName:"泉城公务卡",cardType:"贷记卡",belong:"齐鲁银行股份有限公司"},625050:{length:"6",cardName:"广州银行信用卡",cardType:"贷记卡",belong:"广州银行股份有限公司"},625836:{length:"6",cardName:"贷记IC卡",cardType:"贷记卡",belong:"广州银行股份有限公司"},628367:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"广州银行股份有限公司"},622875:{length:"6",cardName:"贷记白金卡",cardType:"贷记卡",belong:"广州银行股份有限公司"},628333:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"龙江银行股份有限公司"},622921:{length:"6",cardName:"如意贷记卡",cardType:"贷记卡",belong:"河北银行股份有限公司"},628321:{length:"6",cardName:"如意贷记卡",cardType:"贷记卡",belong:"河北银行股份有限公司"},625598:{length:"6",cardName:"福农卡",cardType:"贷记卡",belong:"河北银行股份有限公司"},603367:{length:"6",cardName:"西湖卡IC卡",cardType:"借记卡",belong:"杭州市商业银行"},622286:{length:"6",cardName:"西湖贷记卡",cardType:"贷记卡",belong:"杭州市商业银行"},628236:{length:"6",cardName:"西湖贷记卡",cardType:"贷记卡",belong:"杭州市商业银行"},625800:{length:"6",cardName:"西湖信用卡",cardType:"贷记卡",belong:"杭州市商业银行"},621777:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"南京银行"},622813:{length:"6",cardName:"银联标准卡",cardType:"贷记卡",belong:"成都市商业银行"},622818:{length:"6",cardName:"银联标准卡",cardType:"贷记卡",belong:"成都市商业银行"},628228:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"成都市商业银行"},625166:{length:"6",cardName:"--",cardType:"贷记卡",belong:"苏州银行"},628359:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"临商银行"},625163:{length:"6",cardName:"商鼎信用卡",cardType:"贷记卡",belong:"郑州银行"},628341:{length:"6",cardName:"信合公务卡",cardType:"贷记卡",belong:"贵州省农村信用联合社"},628270:{length:"6",cardName:"公务信用卡",cardType:"贷记卡",belong:"珠海华润银行"},628311:{length:"6",cardName:"金达公务卡",cardType:"贷记卡",belong:"齐商银行"},622710:{length:"6",cardName:"7777信用卡",cardType:"贷记卡",belong:"锦州银行"},628294:{length:"6",cardName:"7777公务卡",cardType:"贷记卡",belong:"锦州银行"},628261:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"锦州银行"},628251:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"徽商银行"},622651:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"徽商银行"},625828:{length:"6",cardName:"贷记IC卡",cardType:"贷记卡",belong:"徽商银行"},625652:{length:"6",cardName:"公司卡",cardType:"贷记卡",belong:"徽商银行"},625700:{length:"6",cardName:"采购卡",cardType:"贷记卡",belong:"徽商银行"},623664:{length:"6",cardName:"云逸卡",cardType:"借记卡",belong:"徽商银行"},625358:{length:"6",cardName:"中国旅游卡",cardType:"贷记卡",belong:"徽商银行"},622613:{length:"6",cardName:"银联标准卡",cardType:"贷记卡",belong:"重庆银行股份有限公司"},628220:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"重庆银行股份有限公司"},622809:{length:"6",cardName:"丁香贷记卡",cardType:"贷记卡",belong:"哈尔滨商行"},628224:{length:"6",cardName:"哈尔滨银行公务卡",cardType:"贷记卡",belong:"哈尔滨商行"},625119:{length:"6",cardName:"联名卡",cardType:"贷记卡",belong:"哈尔滨银行"},625577:{length:"6",cardName:"福农准贷记卡",cardType:"准贷记卡",belong:"哈尔滨银行"},625952:{length:"6",cardName:"贷记IC卡",cardType:"贷记卡",belong:"哈尔滨银行"},621752:{length:"6",cardName:"金融IC借记卡",cardType:"借记卡",belong:"哈尔滨银行"},628213:{length:"6",cardName:"甲秀公务卡",cardType:"贷记卡",belong:"贵阳银行股份有限公司"},622533:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"贵阳银行股份有限公司"},625167:{length:"6",cardName:"--",cardType:"贷记卡",belong:"西安银行"},628345:{length:"6",cardName:"--",cardType:"贷记卡",belong:"西安银行"},622416:{length:"6",cardName:"敦煌信用卡",cardType:"贷记卡",belong:"兰州银行"},628263:{length:"6",cardName:"敦煌公务卡",cardType:"贷记卡",belong:"兰州银行"},622718:{length:"6",cardName:"南昌银行信用卡",cardType:"贷记卡",belong:"南昌银行"},628305:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"南昌银行"},628361:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"南昌银行"},628239:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"青岛银行"},628238:{length:"6",cardName:"庐山公务卡",cardType:"贷记卡",belong:"九江银行股份有限公司"},628257:{length:"6",cardName:"黄海公务卡",cardType:"贷记卡",belong:"日照银行"},622817:{length:"6",cardName:"三江贷记卡",cardType:"贷记卡",belong:"青海银行"},628287:{length:"6",cardName:"三江贷记卡(公务卡)",cardType:"贷记卡",belong:"青海银行"},625959:{length:"6",cardName:"三江贷记IC卡",cardType:"贷记卡",belong:"青海银行"},62536601:{length:"8",cardName:"中国旅游卡",cardType:"贷记卡",belong:"青海银行"},625129:{length:"6",cardName:"江南信用卡",cardType:"贷记卡",belong:"江南农村商业银行"},628391:{length:"6",cardName:"鸢都公务卡",cardType:"贷记卡",belong:"潍坊银行"},628233:{length:"6",cardName:"长征公务卡",cardType:"贷记卡",belong:"赣州银行股份有限公司"},628264:{length:"6",cardName:"--",cardType:"贷记卡",belong:"营口银行"},628231:{length:"6",cardName:"富滇公务卡",cardType:"贷记卡",belong:"富滇银行"},628353:{length:"6",cardName:"--",cardType:"贷记卡",belong:"阜新银行股份有限公司"},628327:{length:"6",cardName:"--",cardType:"贷记卡",belong:"嘉兴银行"},628275:{length:"6",cardName:"泰隆公务卡(单位卡)",cardType:"贷记卡",belong:"浙江泰隆商业银行"},622565:{length:"6",cardName:"泰隆尊尚白金卡、钻石卡",cardType:"贷记卡",belong:"浙江泰隆商业银行"},622717:{length:"6",cardName:"融易通",cardType:"准贷记卡",belong:"浙江泰隆商业银行"},622287:{length:"6",cardName:"泰隆信用卡",cardType:"贷记卡",belong:"浙江泰隆商业银行"},628252:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"内蒙古银行"},628306:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"湖州银行"},628227:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"广西北部湾银行"},623001:{length:"6",cardName:"IC借记卡",cardType:"借记卡",belong:"广西北部湾银行"},628234:{length:"6",cardName:"通达公务卡",cardType:"贷记卡",belong:"威海市商业银行"},621727:{length:"6",cardName:"湛江市民卡",cardType:"借记卡",belong:"广东南粤银行股份有限公司"},623128:{length:"6",cardName:"--",cardType:"借记卡",belong:"广东南粤银行股份有限公司"},628237:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"广东南粤银行"},628365:{length:"6",cardName:"张家口市商业银行好运公务卡",cardType:"贷记卡",belong:"张家口市商业银行"},628219:{length:"6",cardName:"漓江公务卡",cardType:"贷记卡",belong:"桂林银行"},625168:{length:"6",cardName:"--",cardType:"贷记卡",belong:"桂林银行"},625369:{length:"6",cardName:"--",cardType:"贷记卡",belong:"桂林银行"},622270:{length:"6",cardName:"玉兔贷记卡",cardType:"贷记卡",belong:"龙江银行股份有限公司"},628368:{length:"6",cardName:"玉兔贷记卡(公务卡)",cardType:"贷记卡",belong:"龙江银行股份有限公司"},625588:{length:"6",cardName:"福农准贷记卡",cardType:"准贷记卡",belong:"龙江银行"},62536602:{length:"8",cardName:"中国旅游卡",cardType:"贷记卡",belong:"龙江银行股份有限公司"},625090:{length:"6",cardName:"联名贷记卡",cardType:"贷记卡",belong:"龙江银行股份有限公司"},628293:{length:"6",cardName:"龙城公务卡",cardType:"贷记卡",belong:"柳州银行"},628373:{length:"6",cardName:"--",cardType:"贷记卡",belong:"柳州银行"},622611:{length:"6",cardName:"鑫卡",cardType:"贷记卡",belong:"上海农商银行贷记卡"},622722:{length:"6",cardName:"商务卡",cardType:"贷记卡",belong:"上海农商银行贷记卡"},628211:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"上海农商银行贷记卡"},625500:{length:"6",cardName:"福农卡",cardType:"准贷记卡",belong:"上海农商银行贷记卡"},625989:{length:"6",cardName:"鑫通卡",cardType:"贷记卡",belong:"上海农商银行贷记卡"},625701:{length:"6",cardName:"--",cardType:"贷记卡",belong:"上海农商银行贷记卡"},625080:{length:"6",cardName:"太阳信用卡",cardType:"贷记卡",belong:"广州农村商业银行"},628235:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"广州农村商业银行"},628322:{length:"6",cardName:"恒通贷记卡（公务卡）",cardType:"贷记卡",belong:"广东顺德农村商业银行"},625088:{length:"6",cardName:"恒通贷记卡",cardType:"贷记卡",belong:"广东顺德农村商业银行"},622469:{length:"6",cardName:"金碧贷记卡",cardType:"贷记卡",belong:"云南省农村信用社"},628307:{length:"6",cardName:"金碧公务卡",cardType:"贷记卡",belong:"云南省农村信用社"},628229:{length:"6",cardName:"热河公务卡",cardType:"贷记卡",belong:"承德银行"},628397:{length:"6",cardName:"长河公务卡",cardType:"贷记卡",belong:"德州银行"},622802:{length:"6",cardName:"万通贷记卡",cardType:"贷记卡",belong:"福建省农村信用社联合社"},622290:{length:"6",cardName:"福建海峡旅游卡",cardType:"贷记卡",belong:"福建省农村信用社联合社"},628232:{length:"6",cardName:"万通贷记卡",cardType:"贷记卡",belong:"福建省农村信用社联合社"},625128:{length:"6",cardName:"福万通贷记卡",cardType:"贷记卡",belong:"福建省农村信用社联合社"},625357:{length:"6",cardName:"福万通万里行联名IC贷记卡",cardType:"贷记卡",belong:"福建省农村信用社联合社"},622829:{length:"6",cardName:"吉祥信用卡",cardType:"贷记卡",belong:"天津农村商业银行"},625819:{length:"6",cardName:"贷记IC卡",cardType:"贷记卡",belong:"天津农村商业银行"},628301:{length:"6",cardName:"吉祥信用卡",cardType:"贷记卡",belong:"天津农村商业银行"},622808:{length:"6",cardName:"天府贷记卡",cardType:"贷记卡",belong:"成都农村商业银行股份有限公司"},628308:{length:"6",cardName:"天府公务卡",cardType:"贷记卡",belong:"成都农村商业银行股份有限公司"},623088:{length:"6",cardName:"天府借记卡",cardType:"借记卡",belong:"成都农村商业银行股份有限公司"},622815:{length:"6",cardName:"圆鼎贷记卡",cardType:"贷记卡",belong:"江苏省农村信用社联合社"},622816:{length:"6",cardName:"圆鼎贷记卡",cardType:"贷记卡",belong:"江苏省农村信用社联合社"},628226:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"江苏省农村信用社联合社"},628223:{length:"6",cardName:"三清山公务卡",cardType:"贷记卡",belong:"上饶银行"},621416:{length:"6",cardName:"三清山IC卡",cardType:"借记卡",belong:"上饶银行"},628217:{length:"6",cardName:"财政公务卡",cardType:"贷记卡",belong:"东营银行"},628284:{length:"6",cardName:"--",cardType:"贷记卡",belong:"泰安银行"},625820:{length:"6",cardName:"天河贷记卡",cardType:"贷记卡",belong:"临汾市尧都区农村信用合作联社"},628382:{length:"6",cardName:"天河贷记公务卡",cardType:"贷记卡",belong:"临汾市尧都区农村信用合作联社"},625158:{length:"6",cardName:"天河贷记卡",cardType:"贷记卡",belong:"临汾市尧都区农村信用合作联社"},622569:{length:"6",cardName:"金阿福贷记卡",cardType:"贷记卡",belong:"无锡农村商业银行"},628369:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"无锡农村商业银行"},625506:{length:"6",cardName:"福祥贷记卡（福农卡）",cardType:"贷记卡",belong:"湖南农信"},622906:{length:"6",cardName:"福祥贷记卡",cardType:"贷记卡",belong:"湖南农村信用社联合社"},628386:{length:"6",cardName:"银联标准公务卡",cardType:"贷记卡",belong:"湖南农村信用社联合社"},625519:{length:"6",cardName:"福农贷记卡",cardType:"贷记卡",belong:"湖南省农村信用联合社"},623092:{length:"6",cardName:"借记IC卡",cardType:"借记卡",belong:"江西省农村信用社联合社"},628392:{length:"6",cardName:"百福公务卡",cardType:"贷记卡",belong:"江西省农村信用社联合社"},621778:{length:"6",cardName:"金农卡",cardType:"借记卡",belong:"安徽省农村信用社"},621550:{length:"6",cardName:"--",cardType:"借记卡",belong:"安徽省农村信用社"},623220:{length:"6",cardName:"--",cardType:"借记卡",belong:"安徽省农村信用社"},623637:{length:"6",cardName:"--",cardType:"借记卡",belong:"安徽省农村信用社"},620528:{length:"6",cardName:"金牛市民卡",cardType:"借记卡",belong:"邢台银行"},625152:{length:"6",cardName:"--",cardType:"贷记卡",belong:"天津滨海农村商业银行"},625156:{length:"6",cardName:"汉卡",cardType:"贷记卡",belong:"武汉农村商业银行"},628271:{length:"6",cardName:"公务卡",cardType:"贷记卡",belong:"商丘市商业银行"},625886:{length:"6",cardName:"华融湘江银行磁条信用卡",cardType:"贷记卡",belong:"华融湘江银行"},628328:{length:"6",cardName:"华融湘江银行华融公务卡普卡",cardType:"贷记卡",belong:"华融湘江银行"},623423:{length:"6",cardName:"DEBIT CARD",cardType:"借记卡",belong:"Bank of China,Canada"},625829:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"Bank of China(Malaysia)"},625943:{length:"6",cardName:"贷记卡",cardType:"贷记卡",belong:"Bank of China(Malaysia)"},622790:{length:"6",cardName:"Great Wall Platinum",cardType:"贷记卡",belong:"中行新加坡分行"},6227890:{length:"7",cardName:"GREAT WALL PLATINUM",cardType:"贷记卡",belong:"中行新加坡分行"},6227891:{length:"7",cardName:"GREAT WALL PLATINUM",cardType:"贷记卡",belong:"中行新加坡分行"},6227892:{length:"7",cardName:"GREAT WALL PLATINUM",cardType:"贷记卡",belong:"中行新加坡分行"},6227893:{length:"7",cardName:"GREAT WALL PLATINUM",cardType:"贷记卡",belong:"中行新加坡分行"},6227894:{length:"7",cardName:"GREAT WALL PLATINUM",cardType:"贷记卡",belong:"中行新加坡分行"},6227895:{length:"7",cardName:"GREAT WALL PLATINUM",cardType:"贷记卡",belong:"中行新加坡分行"},6227896:{length:"7",cardName:"GREAT WALL PLATINUM",cardType:"贷记卡",belong:"中行新加坡分行"},6227897:{length:"7",cardName:"GREAT WALL PLATINUM",cardType:"贷记卡",belong:"中行新加坡分行"},6227898:{length:"7",cardName:"GREAT WALL PLATINUM",cardType:"贷记卡",belong:"中行新加坡分行"},6227899:{length:"7",cardName:"DUAL CURRENCY TRAVEL CARD",cardType:"贷记卡",belong:"中行新加坡分行"},624405:{length:"6",cardName:"Dual Currency Debit Card",cardType:"贷记卡",belong:"中行新加坡分行"},625651:{length:"6",cardName:"--",cardType:"贷记卡",belong:"中国工商银行"},6243190:{length:"7",cardName:"--",cardType:"贷记卡",belong:"ICBC(USA) NA"},6243191:{length:"7",cardName:"--",cardType:"贷记卡",belong:"ICBC(USA) NA"},6243192:{length:"7",cardName:"--",cardType:"贷记卡",belong:"ICBC(USA) NA"},6243193:{length:"7",cardName:"--",cardType:"贷记卡",belong:"ICBC(USA) NA"},62431940:{length:"8",cardName:"--",cardType:"贷记卡",belong:"ICBC(USA) NA"},6244220:{length:"7",cardName:"--",cardType:"贷记卡",belong:"ICBC(USA) NA"},6244221:{length:"7",cardName:"--",cardType:"贷记卡",belong:"ICBC(USA) NA"},6244222:{length:"7",cardName:"--",cardType:"贷记卡",belong:"ICBC(USA) NA"},6244223:{length:"7",cardName:"--",cardType:"贷记卡",belong:"ICBC(USA) NA"},62442240:{length:"8",cardName:"--",cardType:"贷记卡",belong:"ICBC(USA) NA"},623562:{length:"6",cardName:"北京银行借记卡",cardType:"借记卡",belong:"北京银行"},628377:{length:"6",cardName:"--",cardType:"贷记卡",belong:"邯郸银行"},62134613:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"四子王蒙银村镇银行"},62134611:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"鄂尔多斯市铁西蒙银村镇银行"},62134624:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"鄂托克前旗蒙银村镇银行"},62134626:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"磴口蒙银村镇银行"},62134607:{length:"8",cardName:"蒙银借记卡",cardType:"借记卡",belong:"乌拉特中旗蒙银村镇银行"},62362401:{length:"8",cardName:"--",cardType:"借记卡",belong:"临沂河东齐商村镇银行"},62441900:{length:"8",cardName:"--",cardType:"贷记卡",belong:"Co-Operative Bank Limited"},622835:{length:"6",cardName:"大白金卡",cardType:"贷记卡",belong:"中国邮政储蓄银行信用卡中心"},625603:{length:"6",cardName:"商务卡金卡",cardType:"贷记卡",belong:"中国邮政储蓄银行信用卡中心"}}),gbx.define("conf/game",{login:{scene:"game/lobby/scene/login",resource:"login"},lobby:{scene:"game/lobby/scene/lobby",resource:"lobby"},texas:{name:"德州扑克",code:1,type:{free:{name:"休闲场",gameId:"free/德州扑克",scene:"game/texas/scene/table",resource:"texas_table",key:1,tab:1},sng:{name:"坐满即玩",gameId:"sng/德州扑克",scene:"game/texas/scene/table",resource:"texas_table",key:2,tab:2}}},baccarat:{name:"百家乐",type:{free:{name:"百人场",gameId:"free/百家乐",scene:"game/baccarat/scene/table",resource:"baccarat_table",key:1}}}}),gbx.define("conf/locallization",{loginError:"登录失败...",signupError:"用户已存在...",requestError:"请求失败",signupSuccess:"注册成功...",accountSensitive:"账号包含敏感字符...",loseConnect:"网络连接失败",BaccaratRoomType1:"风云厅:",BaccaratRoomType2:"竞咪厅:",BaccaratRoomType3:"VIP厅:",LimitColor:"限红:",RoomNumber:"房间号",lackMoney:"您的筹码不足",initNotice:"欢迎光临本游戏，本房间：\n上庄条件：",kickNotice:"由于您长时间不活动，已被系统请出了房间",lost_connect_return:"网络连接超时，按确定返回大厅",lost_connect_try:"网络不给力，正在重连",phoneVerifyError:"获取手机验证码失败...",saltCodeError:"获取密钥失败...",serverAddressError:"服务器地址为空",dealerDown:"您将于本局结束时下庄",verifyUserFail:"用户验证失败",getUserDataFail:"获取用户信息失败",getRebateParentIdFail:"获取返利上线信息失败",getAllRoomDataFail:"获取所有房间信息失败",loseConnectReconnect:"网络连接失败，是否重连",voidAccountTip:"账号或密码不能为空",kickedByGM:"您的账号被GM踢掉",kickedByOther:"网络连接异常",noSeatCantFlyCard:"没有入座，不能飞牌"}),gbx.define("conf/platform",{platformIdm:"IOS",platformIdt:"IOSt",platformIdw:"IOSw",platformIdg:"IOSg",platform_zh_yun:"android_zy",myPlatformId:"IOSg",platformId:"BACCARAT",rechargeType:{Alipay:1,Wechat:2,QQ:3,PWG:4,YYY:5,ApplePay:6},recharge_type0:0,recharge_type1:1,recharge_type2:2,recharge_type3:3,recharge_type4:4,recharge_type5:5,recharge_type6:6,recharge_type7:7,recharge_type8:8,recharge_type9:9}),gbx.define("conf/platform_channels",{1:[1,3,4],2:[1,2,3,4],3:[2,4],4:[2],5:[2],6:[6],7:[2,6],8:[6,1],9:[2,6,1]}),gbx.define("conf/resource",{head:["assets/major/head/userhead_0.png","assets/major/head/userhead_1.png","assets/major/head/userhead_2.png","assets/major/head/userhead_3.png","assets/major/head/userhead_4.png","assets/major/head/userhead_5.png","assets/major/head/userhead_6.png","assets/major/head/userhead_7.png","assets/major/head/userhead_8.png","assets/major/head/userhead_9.png","assets/major/head/userhead_10.png","assets/major/head/userhead_11.png","assets/major/head/userhead_12.png","assets/major/head/userhead_13.png","assets/major/head/userhead_14.png","assets/major/head/userhead_15.png","assets/major/head/userhead_16.png","assets/major/head/userhead_17.png","assets/major/head/userhead_18.png","assets/major/head/userhead_19.png","assets/major/head/userhead_20.png","assets/major/head/userhead_21.png","assets/major/head/userhead_22.png","assets/major/head/userhead_23.png","assets/major/head/userhead_24.png","assets/major/head/userhead_25.png","assets/major/head/userhead_26.png","assets/major/head/userhead_27.png","assets/major/head/userhead_28.png","assets/major/head/userhead_29.png","assets/major/head/userhead_30.png","assets/major/head/userhead_31.png","assets/major/head/userhead_32.png","assets/major/head/userhead_33.png","assets/major/head/userhead_34.png","assets/major/head/userhead_35.png","assets/major/head/userhead_36.png","assets/major/head/userhead_37.png","assets/major/head/userhead_38.png","assets/major/head/userhead_39.png","assets/major/head/userhead_40.png","assets/major/head/userhead_41.png","assets/major/head/userhead_42.png","assets/major/head/userhead_43.png","assets/major/head/userhead_44.png","assets/major/head/userhead_45.png"],emoji:["assets/major/emoji/emotion01.png","assets/major/emoji/emotion02.png","assets/major/emoji/emotion03.png","assets/major/emoji/emotion04.png","assets/major/emoji/emotion05.png","assets/major/emoji/emotion06.png","assets/major/emoji/emotion07.png","assets/major/emoji/emotion08.png","assets/major/emoji/emotion09.png","assets/major/emoji/emotion10.png","assets/major/emoji/emotion11.png","assets/major/emoji/emotion12.png","assets/major/emoji/emotion13.png","assets/major/emoji/emotion14.png","assets/major/emoji/emotion15.png","assets/major/emoji/emotion16.png","assets/major/emoji/emotion17.png","assets/major/emoji/emotion18.png","assets/major/emoji/emotion19.png","assets/major/emoji/emotion20.png","assets/major/emoji/emotion21.png","assets/major/emoji/emotion22.png","assets/major/emoji/emotion23.png","assets/major/emoji/emotion24.png","assets/major/emoji/emotion25.png","assets/major/emoji/emotion26.png","assets/major/emoji/emotion27.png","assets/major/emoji/emotion28.png"],card:["assets/major/card/cardback.png","assets/major/card/faceHide.png","assets/major/card/1_1.png","assets/major/card/1_2.png","assets/major/card/1_3.png","assets/major/card/1_4.png","assets/major/card/2_1.png","assets/major/card/2_2.png","assets/major/card/2_3.png","assets/major/card/2_4.png","assets/major/card/3_1.png","assets/major/card/3_2.png","assets/major/card/3_3.png","assets/major/card/3_4.png","assets/major/card/4_1.png","assets/major/card/4_2.png","assets/major/card/4_3.png","assets/major/card/4_4.png","assets/major/card/5_1.png","assets/major/card/5_2.png","assets/major/card/5_3.png","assets/major/card/5_4.png","assets/major/card/6_1.png","assets/major/card/6_2.png","assets/major/card/6_3.png","assets/major/card/6_4.png","assets/major/card/7_1.png","assets/major/card/7_2.png","assets/major/card/7_3.png","assets/major/card/7_4.png","assets/major/card/8_1.png","assets/major/card/8_2.png","assets/major/card/8_3.png","assets/major/card/8_4.png","assets/major/card/9_1.png","assets/major/card/9_2.png","assets/major/card/9_3.png","assets/major/card/9_4.png","assets/major/card/10_1.png","assets/major/card/10_2.png","assets/major/card/10_3.png","assets/major/card/10_4.png","assets/major/card/11_1.png","assets/major/card/11_2.png","assets/major/card/11_3.png","assets/major/card/11_4.png","assets/major/card/12_1.png","assets/major/card/12_2.png","assets/major/card/12_3.png","assets/major/card/12_4.png","assets/major/card/13_1.png","assets/major/card/13_2.png","assets/major/card/13_3.png","assets/major/card/13_4.png","assets/major/card/14_1.png","assets/major/card/15_1.png"],loading:["assets/major/common/loading/clouddownload.png","assets/major/common/loading/loadingbg.png"],dialog:["assets/major/common/topmessage/alpha_h2.png","assets/major/common/error/panel_mini.png","assets/major/common/error/icon_link_error.png","assets/major/common/marquee/message_bg.png","assets/major/common/marquee/button_speaker.png"],waysheet:["assets/major/waysheet/button_closeRoom_1.png","assets/major/waysheet/button_closeRoom_2.png","assets/major/waysheet/ludan_small_1.png","assets/major/waysheet/ludan_small_2.png","assets/major/waysheet/ludan_small_3.png","assets/major/waysheet/ludan_small_4.png","assets/major/waysheet/ludan_small_5.png","assets/major/waysheet/ludan_small_5_1.png","assets/major/waysheet/ludan_small_5_2.png","assets/major/waysheet/ludan_small_6.png","assets/major/waysheet/ludan_small_7.png","assets/major/waysheet/ludan_small_8.png","assets/major/waysheet/ludan_small_9.png","assets/major/waysheet/ludan_he.png","assets/major/waysheet/ludan_xian.png","assets/major/waysheet/ludan_zhuang.png","assets/major/waysheet/ludan_l.png","assets/major/waysheet/ludan_l_1.png","assets/major/waysheet/ludan_21.png","assets/major/waysheet/ludan_3.png","assets/major/waysheet/ludan_1.png","assets/major/waysheet/ludan_blueCir1.png","assets/major/waysheet/ludan_blueCir2.png","assets/major/waysheet/ludan_blueSqu.png","assets/major/waysheet/ludan_redCir1.png","assets/major/waysheet/ludan_redCir2.png","assets/major/waysheet/ludan_redSqu.png"],bank:["assets/major/bank/authentication_bg.png","assets/major/bank/authentication_smbg.png","assets/major/bank/authentication_btn.png","assets/major/bank/authentication_kuang1.png","assets/major/bank/authentication_kuang2.png","assets/major/bank/authentication_select.png","assets/major/bank/authentication_select_bg.png","assets/major/bank/authentication_back.png","assets/major/bank/bank_line.png","assets/major/bank/binding.png","assets/major/bank/select.png","assets/major/bank/del_bank.png","assets/major/bank/buy.png","assets/major/bank/btn_detail.png","assets/major/bank/bank_icon.png","assets/major/bank/word_draw.png","assets/major/bank/word_put.png","assets/major/bank/word_out.png","assets/major/bank/tap_broad.png","assets/major/bank/tap_broad_light.png","assets/major/bank/tapBack.png","assets/major/bank/chip_custom.png","assets/major/bank/arrow.png","assets/major/bank/word_manage.png","assets/major/bank/wechat.png","assets/major/bank/alipay.png","assets/major/bank/quick.png","assets/major/bank/qq.png","assets/major/bank/applepay.png","assets/major/bank/recharge_select.png","assets/major/bank/word_encharge2.png","assets/major/bank/bankCharge/chip1.png","assets/major/bank/bankCharge/chip2.png","assets/major/bank/bankCharge/chip3.png","assets/major/bank/bankCharge/chip4.png","assets/major/bank/bankCharge/chip5.png","assets/major/bank/bankCharge/chip6.png","assets/major/bank/rechargeChip/chip1.png","assets/major/bank/rechargeChip/chip2.png","assets/major/bank/rechargeChip/chip3.png","assets/major/bank/rechargeChip/chip4.png","assets/major/bank/rechargeChip/chip5.png","assets/major/bank/rechargeChip/chip6.png","assets/major/bank/rechargeChip/chip7.png","assets/major/bank/rechargeChip/chip8.png","assets/major/bank/rechargeChip/chip9.png","assets/major/bank/rechargeChip/chip10.png","assets/major/bank/rechargeChip/chip11.png","assets/major/bank/rechargeChip/chip12.png","assets/major/bank/rechargeChip/chip13.png"],public1:["assets/major/public/Full_screenBackGround.png","assets/major/public/public_darkBg.png","assets/major/public/white_line.png","assets/major/public/splitLine_new.png","assets/major/public/arrow.png","assets/major/public/button_8.png","assets/major/public/button_9.png","assets/major/public/button_ok.png","assets/major/public/back_001.png","assets/major/public/button_blue.png"],public2:["public1","assets/major/public/tab_bg2.png","assets/major/public/tab_bg.png","assets/major/public/back_002.png","assets/major/public/go_btn.png","assets/major/public/edit.png","assets/major/public/TableSelect.png","assets/major/public/bg_L_bar.png","assets/major/public/title_bar.png","assets/major/public/bg_D_bar.png","assets/major/public/password_btn_01.png","assets/major/public/password_btn_02.png","assets/major/public/background.png","assets/major/public/back_booter_01.png","assets/major/public/public_lightBg.png","assets/major/public/lobby_bg.png","assets/major/public/sureBtnG.png","assets/major/public/cancelG.png","assets/major/public/button_2.png","assets/major/public/button_10.png","assets/major/public/button_11.png","assets/major/public/button_13.png","assets/major/public/splitLine.png","assets/major/public/button_chat.png","assets/major/public/button_help_1.png","assets/major/public/button_help.png","assets/major/public/reddot.png","assets/major/public/button_fly_card.png","assets/major/public/account_safe_1.png","assets/major/public/button_rank.png","assets/major/public/customer_service.png","assets/major/public/button_mail_1.png","assets/major/public/button_gambling_detail_1.png","assets/major/public/guanbi.png","assets/major/public/mask.png"],login:["public1","loading","dialog","bgm","se","login_se","assets/games/baccarat/dat/definition.json","assets/games/baccarat/dat/setting.json","assets/major/dat/user/sensitive.json","assets/major/dat/item/recharge.json","assets/major/login/login_button_guest.png","assets/major/login/word_begin.png","assets/major/login/login_account.png","assets/major/login/login_password.png","assets/major/login/word_getVerifyCode.png","assets/major/login/ios_btn.png","assets/major/login/android_btn.png","assets/major/login/register.png","assets/major/login/word_register.png","assets/major/login/forget_pass.png","assets/major/login/login_bg.png","assets/major/login/login_mask.png"],broadCast:["assets/major/common/broadCast/broadCast_horn.png","assets/major/common/broadCast/broadCast_line.png","assets/major/common/broadCast/broadCast_bg.png"],lobby:["public2","head","bgm","se","dialog","loading","waysheet","bank","broadCast","assets/games/baccarat/dat/definition.json","assets/games/baccarat/dat/setting.json","assets/major/dat/user/sensitive.json","assets/major/dat/item/recharge.json","assets/major/lobby/sp/logo.png","assets/major/lobby/sp/lobby_btn_click.png","assets/major/lobby/sp/lobby_bg.png","assets/major/lobby/sp/splitline.png","assets/major/lobby/sp/panel_bar.png","assets/major/lobby/sp/pic_bank.png","assets/major/lobby/sp/pic_mail.png","assets/major/lobby/sp/pic_spread.png","assets/major/lobby/sp/pic_more.png","assets/major/lobby/sp/pic_Sign.png","assets/major/lobby/sp/tab_select.png","assets/major/lobby/sp/mark_add_gold.png","assets/major/lobby/sp/mark_gold.png","assets/major/lobby/sp/head_bg.png","assets/major/lobby/sp/getGold.png","assets/major/lobby/sp/syssetting/word_bindPhone.png","assets/major/lobby/sp/syssetting/word_getVerifyCode.png","assets/major/lobby/sp/rank/rank_001.png","assets/major/lobby/sp/rank/rank_002.png","assets/major/lobby/sp/rank/rank_003.png","assets/major/lobby/sp/help/help_1.png","assets/major/lobby/sp/help/help_2.png","assets/major/lobby/sp/help/help_3.png","assets/major/lobby/sp/help/help_4.png","assets/major/lobby/sp/service/word_service_title.png","assets/major/lobby/sp/service/service_icon.png","assets/major/lobby/sp/game_spread/spread_url_tip.png","assets/major/lobby/sp/game_spread/word_copy.png","assets/major/lobby/sp/game_spread/word_detail2.png","assets/major/lobby/sp/game_spread/word_get.png","assets/major/lobby/sp/game_spread/vip_apply.png","assets/major/lobby/sp/game_spread/vip_query.png","assets/major/lobby/sp/game_spread/vip_give.png","assets/major/lobby/sp/mail/word_get_award.png","assets/major/lobby/sp/mail/new_mark.png","assets/major/lobby/sp/mail/award.png","assets/major/lobby/sp/mail/word_get_all.png","assets/major/lobby/sp/mail/delete.png","assets/major/lobby/sp/changeHead/select.png","assets/major/lobby/sp/changeHead/from_Album.png","assets/major/lobby/sp/changeHead/from_Camera.png","assets/major/lobby/sp/changeHead/addHead.png","assets/major/lobby/sp/vip/btn_vip_1.png","assets/major/lobby/sp/vip/btn_vip_2.png","assets/major/lobby/sp/vip/card.png","assets/major/lobby/sp/vip/card_boot.png","assets/major/lobby/sp/vip/word_open.png","assets/major/lobby/sp/vip/word_addin_room.png","assets/major/lobby/sp/vip/slider.png","assets/major/lobby/sp/vip/slider$bar.png","assets/major/lobby/sp/vip/slider_change.png","assets/major/lobby/sp/sign/sign.png","assets/major/lobby/sp/sign/sign_bg.png"],baccarat_table:["public2","head","card","emoji","dialog","loading","waysheet","broadCast","bgm","se","baccarat_se","assets/games/baccarat/dat/definition.json","assets/games/baccarat/dat/setting.json","assets/major/dat/user/sensitive.json","assets/major/dat/item/recharge.json","assets/games/baccarat/tex/player_head_bg.png","assets/games/baccarat/tex/chip_shadow.png","assets/games/baccarat/tex/button_bedealer.png","assets/games/baccarat/tex/button_dealeroff.png","assets/games/baccarat/tex/button_requestoff.png","assets/games/baccarat/tex/dealer.png","assets/games/baccarat/tex/frame_player.png","assets/games/baccarat/tex/chat/frame_chat.png","assets/games/baccarat/tex/chips/chip1.png","assets/games/baccarat/tex/chips/chip2.png","assets/games/baccarat/tex/chips/chip3.png","assets/games/baccarat/tex/chips/chip4.png","assets/games/baccarat/tex/chips/chip5.png","assets/games/baccarat/tex/chips/chip6.png","assets/games/baccarat/tex/chips/chip7.png","assets/games/baccarat/tex/chips/chip8.png","assets/games/baccarat/tex/chips/chip9.png","assets/games/baccarat/tex/chips/chip10.png","assets/games/baccarat/tex/chips/chip11.png","assets/games/baccarat/tex/chips/chip12.png","assets/games/baccarat/tex/chip_setting.png","assets/games/baccarat/tex/choose_chip_bg.png","assets/games/baccarat/tex/choose_box.png","assets/games/baccarat/tex/choose_mark.png","assets/games/baccarat/tex/mark_choosechip.png","assets/games/baccarat/tex/choose_chip_shadow.png","assets/games/baccarat/tex/mark_bet.png","assets/games/baccarat/tex/mark_stopbet.png","assets/games/baccarat/tex/win_1.png","assets/games/baccarat/tex/win_2.png","assets/games/baccarat/tex/win_3.png","assets/games/baccarat/tex/button_sit.png","assets/games/baccarat/tex/button_player_list.png","assets/games/baccarat/tex/button_dealer_list.png","assets/games/baccarat/tex/mi_border_banker.png","assets/games/baccarat/tex/mi_border_banker_pair.png","assets/games/baccarat/tex/mi_border_duece.png","assets/games/baccarat/tex/mi_border_farmer.png","assets/games/baccarat/tex/mi_border_farmer_pair.png","assets/games/baccarat/tex/mi_mian_banker.png","assets/games/baccarat/tex/mi_mian_banker_pair.png","assets/games/baccarat/tex/mi_mian_duece.png","assets/games/baccarat/tex/mi_mian_farmer.png","assets/games/baccarat/tex/mi_mian_farmer_pair.png","assets/games/baccarat/tex/xian_fang0001.png","assets/games/baccarat/tex/xian_banyuan0001.png","assets/games/baccarat/tex/xian_banyuan0002.png","assets/games/baccarat/tex/lobby_bg.png","assets/games/baccarat/tex/lobby_bg_1.png","assets/games/baccarat/tex/lobby_bg_six.png","assets/games/baccarat/tex/clock.png","assets/games/baccarat/tex/mi_circle.png","assets/games/baccarat/tex/mi_bian.png","assets/games/baccarat/tex/mi_bian2.png","assets/games/baccarat/tex/xian_get.png","assets/games/baccarat/tex/zhuang_get.png","assets/games/baccarat/tex/xian_get_win.png","assets/games/baccarat/tex/zhuang_get_win.png","assets/games/baccarat/tex/soundBtn.png","assets/games/baccarat/tex/flip_btn_farmer.png","assets/games/baccarat/tex/flip_btn_banker.png","assets/games/baccarat/tex/point_farmer_bg.png","assets/games/baccarat/tex/point_banker_bg.png","assets/games/baccarat/tex/top_card_bg.png","assets/games/baccarat/tex/pointBG.png","assets/games/baccarat/tex/skip_btn_banker.png","assets/games/baccarat/tex/skip_btn_farmer.png","assets/games/baccarat/tex/effect/batch_Card.png","assets/games/baccarat/tex/effect/cut_Card_red.png","assets/games/baccarat/tex/effect/cut_Card_black.png"],bgm:["assets/major/bgm/back.mp3"],se:["assets/major/se/button.mp3"],login_se:["assets/major/login_se/system_welcome.mp3"],baccarat_se:["assets/games/baccarat/se/bk.mp3","assets/games/baccarat/se/chip.mp3","assets/games/baccarat/se/win.mp3","assets/games/baccarat/se/chipbk.mp3","assets/games/baccarat/se/fapai.mp3","assets/games/baccarat/se/time.mp3","assets/games/baccarat/se/sit.mp3","assets/games/baccarat/se/sendcard.mp3","assets/games/baccarat/se/alarm.mp3","assets/games/baccarat/se/clock.mp3","assets/games/baccarat/se/pong.mp3"],sound:["assets/games/baccarat/sound/player_001.mp3","assets/games/baccarat/sound/player_002.mp3","assets/games/baccarat/sound/player_003.mp3","assets/games/baccarat/sound/player_004.mp3","assets/games/baccarat/sound/player_005.mp3","assets/games/baccarat/sound/player_006.mp3","assets/games/baccarat/sound/player_007.mp3","assets/games/baccarat/sound/system_001.mp3","assets/games/baccarat/sound/system_002.mp3","assets/games/baccarat/sound/system_003.mp3","assets/games/baccarat/sound/system_004.mp3","assets/games/baccarat/sound/system_005.mp3","assets/games/baccarat/sound/system_006.mp3","assets/games/baccarat/sound/system_007_1.mp3","assets/games/baccarat/sound/system_007_2.mp3","assets/games/baccarat/sound/system_008.mp3","assets/games/baccarat/sound/system_009.mp3","assets/games/baccarat/sound/system_010.mp3","assets/games/baccarat/sound/system_011.mp3","assets/games/baccarat/sound/system_012.mp3","assets/games/baccarat/sound/system_013.mp3","assets/games/baccarat/sound/system_014.mp3","assets/games/baccarat/sound/system_015.mp3","assets/games/baccarat/sound/system_016.mp3","assets/games/baccarat/sound/system_017.mp3","assets/games/baccarat/sound/system_018.mp3","assets/games/baccarat/sound/system_019.mp3","assets/games/baccarat/sound/system_020.mp3","assets/games/baccarat/sound/system_021.mp3","assets/games/baccarat/sound/system_022.mp3","assets/games/baccarat/sound/system_023.mp3","assets/games/baccarat/sound/system_024.mp3","assets/games/baccarat/sound/system_025.mp3","assets/games/baccarat/sound/system_026.mp3","assets/games/baccarat/sound/system_027.mp3","assets/games/baccarat/sound/system_028.mp3","assets/games/baccarat/sound/system_029.mp3","assets/games/baccarat/sound/system_030.mp3","assets/games/baccarat/sound/system_031.mp3","assets/games/baccarat/sound/system_032.mp3","assets/games/baccarat/sound/system_033.mp3","assets/games/baccarat/sound/system_034.mp3","assets/games/baccarat/sound/system_035.mp3","assets/games/baccarat/sound/system_036.mp3","assets/games/baccarat/sound/system_037.mp3","assets/games/baccarat/sound/system_038.mp3","assets/games/baccarat/sound/system_050.mp3","assets/games/baccarat/sound/system_051.mp3","assets/games/baccarat/sound/system_052.mp3","assets/games/baccarat/sound/system_053.mp3","assets/games/baccarat/sound/system_054.mp3","assets/games/baccarat/sound/system_055.mp3","assets/games/baccarat/sound/system_056.mp3","assets/games/baccarat/sound/system_057.mp3","assets/games/baccarat/sound/system_058.mp3","assets/games/baccarat/sound/system_059.mp3","assets/games/baccarat/sound/system_060.mp3","assets/games/baccarat/sound/system_061.mp3","assets/games/baccarat/sound/system_062.mp3","assets/games/baccarat/sound/system_0080.mp3","assets/games/baccarat/sound/system_0170.mp3"]}),gbx.define("conf/scene",{login:"game/lobby/scene/login",lobby:"game/lobby/scene/lobby",texas_table:"game/texas/scene/table",baccarat_table:"game/baccarat/scene/table"}),gbx.define("conf/sound_paths",{mei_bian:"assets/games/baccarat/sound/player_001.mp3",liang_bian:"assets/games/baccarat/sound/player_002.mp3",san_bian:"assets/games/baccarat/sound/player_003.mp3",si_bian:"assets/games/baccarat/sound/player_004.mp3",gong:"assets/games/baccarat/sound/player_005.mp3",chui:"assets/games/baccarat/sound/player_006.mp3",ding:"assets/games/baccarat/sound/player_007.mp3",good_luck:"assets/games/baccarat/sound/system_001.mp3",plz_bet:"assets/games/baccarat/sound/system_002.mp3",stop_bet:"assets/games/baccarat/sound/system_003.mp3",this_round_no_bet:"assets/games/baccarat/sound/system_004.mp3",farmer:"assets/games/baccarat/sound/system_005.mp3",banker:"assets/games/baccarat/sound/system_006.mp3",zhui_jia_farmer:"assets/games/baccarat/sound/system_007_1.mp3",zhui_jia_banker:"assets/games/baccarat/sound/system_007_2.mp3",farmer_0:"assets/games/baccarat/sound/system_0080.mp3",farmer_1:"assets/games/baccarat/sound/system_008.mp3",farmer_2:"assets/games/baccarat/sound/system_009.mp3",farmer_3:"assets/games/baccarat/sound/system_010.mp3",farmer_4:"assets/games/baccarat/sound/system_011.mp3",farmer_5:"assets/games/baccarat/sound/system_012.mp3",farmer_6:"assets/games/baccarat/sound/system_013.mp3",farmer_7:"assets/games/baccarat/sound/system_014.mp3",farmer_8:"assets/games/baccarat/sound/system_015.mp3",farmer_9:"assets/games/baccarat/sound/system_016.mp3",banker_0:"assets/games/baccarat/sound/system_0170.mp3",banker_1:"assets/games/baccarat/sound/system_017.mp3",banker_2:"assets/games/baccarat/sound/system_018.mp3",banker_3:"assets/games/baccarat/sound/system_019.mp3",banker_4:"assets/games/baccarat/sound/system_020.mp3",banker_5:"assets/games/baccarat/sound/system_021.mp3",banker_6:"assets/games/baccarat/sound/system_022.mp3",banker_7:"assets/games/baccarat/sound/system_023.mp3",banker_8:"assets/games/baccarat/sound/system_024.mp3",banker_9:"assets/games/baccarat/sound/system_025.mp3",farmer_t_8:"assets/games/baccarat/sound/system_026.mp3",farmer_t_9:"assets/games/baccarat/sound/system_027.mp3",banker_t_8:"assets/games/baccarat/sound/system_028.mp3",banker_t_9:"assets/games/baccarat/sound/system_029.mp3",farmer_win:"assets/games/baccarat/sound/system_030.mp3",banker_win:"assets/games/baccarat/sound/system_031.mp3",duece_win:"assets/games/baccarat/sound/system_032.mp3",farmer_pair:"assets/games/baccarat/sound/system_033.mp3",banker_pair:"assets/games/baccarat/sound/system_034.mp3",banker_need_more:"assets/games/baccarat/sound/system_035.mp3",farmer_need_more:"assets/games/baccarat/sound/system_036.mp3",banker_mi:"assets/games/baccarat/sound/system_037.mp3",farmer_mi:"assets/games/baccarat/sound/system_038.mp3",clock:"assets/games/baccarat/se/clock.mp3",1:"assets/games/baccarat/sound/system_050.mp3",5:"assets/games/baccarat/sound/system_051.mp3",10:"assets/games/baccarat/sound/system_052.mp3",50:"assets/games/baccarat/sound/system_053.mp3",100:"assets/games/baccarat/sound/system_054.mp3",500:"assets/games/baccarat/sound/system_055.mp3",1000:"assets/games/baccarat/sound/system_056.mp3",2000:"assets/games/baccarat/sound/system_057.mp3",5000:"assets/games/baccarat/sound/system_058.mp3",10000:"assets/games/baccarat/sound/system_059.mp3",50000:"assets/games/baccarat/sound/system_060.mp3",100000:"assets/games/baccarat/sound/system_061.mp3",500000:"assets/games/baccarat/sound/system_062.mp3",system_welcome:"assets/major/login_se/system_welcome.mp3"}),gbx.define("conf/system",{width:640,height:1136,scale:"showall",orientation:"vertical",align:"center",valign:"middle",halfWidth:320,halfHeight:568,fileHashTable:"hash.json",packedDataFile:"assets/packed.json",namespace:"newqp",enterance:"login",isReview:!0,version:"version: 1.0.1"}),gbx.define("conf/ui_locallization",{gamble_time:"时间",gamble_betbefore:"投注前",gamble_betAction:"投注项目/金额",gamble_result:"结果",gamble_caculate:"结算",gamble_caculate_money:"结算后",gamble_share_money:"分成",gamble_board:"公告",gamble_operate:"操作",gamble_money:"金额",gamble_can_get:"可以领取:",yesterday_rebate:"昨日返利:",yesterday_rebate_all:"昨日返利总额:",month_rebate:"本月返利(截至昨日):",month_rebate_all:"本月返利总额:",year_rebate:"年度返利(截至昨日):",year_rebate_all:"年度返利总额:",next_round:"下\n局",banker:"庄",farmer:"闲",duece:"和",wan:"万",bankerPair:"庄对",farmerPair:"闲对",point:"点",bankerWin:"庄赢",farmerWin:"闲赢",resetpassword:"重置密码",phone_code:"手机号",recommandMan:"推荐人",userID:"用 户 ID",player_name:"名 称",player_head:"头 像",tip_input_phone_code:"请输入手机号",tip_input_verify_code:"输入验证码",tip_input_bankpass:"请输入银行密码",tip_input_Id:"输入输入玩家ID",tip_input_name:"输入新名称",tip_input_pass:"输入新密码",tip_input_pass_orign:"请输入原始密码",tip_input_repeatpass:"重复输入新密码",tip_input_room_number:"使用键盘输入房间号",account_pass_not_void:"账号或密码不能为空！",sensitive_word_exist:"账号存在敏感字",useLimit:"可用额度",drawcashLimit:"可提现额度",now_bind_bankcard:"银行卡",minbet:"最小投注",maxbet:"最大投注",brand_boots:"牌靴",now_own:"当前拥有:",room_service_pee:"包厢服务费:",tip_input_draw_cash:"输入需要提现的金额",tip_input_draw_out:"输入需要取出的金额",tip_input_encharge_put:"输入需要存入的金额",tip_input_encharge_draw:"请输入存取金额",up_banker_need:"上庄需要",series_banker:"连庄",banker_score:"庄家成绩",game_spread_url:"您的推广链接",input_spread_code_telling:"推广员可从下线玩家的下注金额中得到0.5%的分成，每日凌晨1点结算分成,推广员可领取前一天累计的分成兑换为筹码",input_spread_code_tip:"输入推荐人的推广链接，推荐人将会得到一定比例的分成,推广链接一旦输入，确认后无法再次修改",input_spread_code:"输入推广码",player_id:"玩家ID:",share_date:"分成日期",nowday_get_score:"当日获得总分数:",provide_share:"提供分成:",chat_1:"大家好，很高兴认识你们。",chat_2:"不要走，决战到天亮！",chat_3:"不要吵了，继续玩不好吗？",chat_4:"宝宝不说，宝宝心里苦~",chat_5:"玩得不错，老司机带带我！",chat_6:"你这运气，我也是醉了~",chat_7:"跟你玩，友谊的小船说翻就翻~",chat_8:"美女，认识一下呗？",chat_9:"来来来，发个红包，大家不要客气！",chat_10:"庄家今天吃什么了，这也太红了。",chat_11:"这把还不赢？我就不信了！",chat_12:"唉上把没下对，真可惜啊！",chat_13:"看你这么厉害，要不要玩大点？",chat_14:"为什么只有我输啊，老天爷开开眼~",lack_room:"没有房间",left_cardNum:"剩余牌数:",mail_type_0:"系统信件",word_no:"未领取",look:"已查看",look_no:"未查看",left_day:"剩余X天",sender_player:"寄件者:",battle_limit_min:"和、对子下限",battle_limit_max:"和/对子上限",my_chips:"筹码: ",home_left:"您确定要离开此房间?",left_game_decrease:"离开房间,会输掉本局！",sure:"确定",cancle:"取消",LimitColor:"限红",LimitColorMin:"限红,当前房间最小",LimitColorMax:"限红,当前房间最大",BankerAndFarmerMutex:"不能同时下注庄和闲",farmerbankerArea:"闲庄区",dueceArea:"合区",farmerbankerPairArea:"对子区",country:"国家/地区",verifyCode:"验证码",repeatPass:"再次输入",repeatInputPass:"再次输入密码",china:"中国",verify_code:"验证码",pass:"密码",setPass:"请设置密码",phone_can_not_void:"手机号不能为空",phone_length_less:"非法手机号",verify_code_can_not_void:"验证码不能为空",pass_can_not_void:"密码不能为空",pass_less_six:"您的密码长度小于6位",plz_input_pass:"请再次输入密码！",pass_diffrent:"两次输入密码不一致！",bind_tip:"绑定后将不可更换",bind_OK:"绑定成功",tip_no_parent:"未绑定联系人",time_count_down:"倒计时:",time_no_use:"验证码失效",player_deposit:"个人存款",player_deposit_tip:"提示：个人存款在游戏房间内不会显示",plz_input_number:"请输入数字",input_number_illegle:"输入数字违法",resend:"重新发送",copyOK:"拷贝成功",plz_reinput_new_pass:"请重新输入新密码",orign_pass:"原始密码",new_pass:"新密码",check_pass_ok:"确认密码",bind_phone_reward_tip:"绑定手机送筹码",common_notopen_tip:"功能暂未开放",cardholder:"姓名:",cardNumber:"卡号:",money_count:"金额:",plz_identify_tip:"请绑定持卡人本人的银行卡",plz_input_name:"请输入姓名",plz_input_bank_number:"请输入银行卡号",plz_input_money_count:"请输入提现金额",exit_room_error:"退出房间失败!",select_chips_max:"最多选取五个筹码类型",orgin_pass_no_void:"原密码不能为空",find_no_music:"音效没找到",setting_no_name:"名称不能为空",sensitive_set_name:"名称存在敏感字",set_name_maxLen:"最长七个字",set_name_minLen:"名称最短两个字",pass_reset_ok:"密码修改成功",seat_gold_limit:"上座必须有携带A筹码",carryOnGold:"携款 : ",deposit:"存款 : ",alipay:"支付宝",qq:"QQ钱包",applePay:"官方支付",pay_success_tip:"充值成功+",alipay_h5:"支付宝H5",wx_pay:"微信支付",wx_pay_h5:"微信H5",yuan:"X元",custom_money:"自定义金额",custom_money_tip:"自定义充值≥10",plz_choose_charge_way:"请选择充值方式",plz_input_charge_money:"请选择需要充值的金额",tip_no_bind_card:"未绑定",tip_binded_card:"解除绑定",system_tip:"系统提示",for_safe:"为保障账号安全，解绑前请输入密码。",tip_input_pass_1:"请输入账号密码",can_draw_cash:"可提现：A元",draw_cash_limit:"提现额度必须≥100",draw_cash_limit_down:"提现额度必须小于A元",draw_cash_hundred_limit:"提现必须是100的倍数",tip_1:"温馨提示:",tip_2:"1.工作日9:00至17:00的提款当天处理,17:00以后的提款申请延至第二天处理，提现到账最快2小时，最晚1个工作日。",tip_3:"2.用戶在提现时,银行将收取2%的手续费",bank_card_length_limit:"银行卡号长度必须在16到19之间",bank_card_must_number:"银行卡号必须全为数字",draw_cash_tip:"提现必须绑定银行卡!",card_start_limit:"银行卡号开头6位不符合规范",card_verify_fail:"银行卡号校验不通过",card_suffix:"尾号: ",plz_input_r_charge_money:"请输入正确的充值金额",self_define_limit:"自定义金额必须大于A元小于等于B",get_order_fail:"获取订单失败",on_play:"在玩:",on_play_num:"房间人数: ",count89:"8/9点",round_count:"局数",bind_card_ok:"绑定银行卡成功!",unbind_card_ok:"解绑银行卡成功",name_can_not_void:"名字不能为空",draw_cash_ok:"提现申请已成功，将在24小时内到账。",draw_cash:"提现",encharge_cash:"充值",present_cash:"您送给",bepresented_cash:"送给您",encharge_chips:"存入",draw_chips:"取出",mei_bian:"没边",liang_bian:"两边",san_bian:"三边",si_bian:"四边",gong:"公",chui:"吹",ding:"顶",create_vip_room_name:"的房间",vip_room_end:"本局已结束，房间即将关闭",clear_roomId:"清空",del_roomId:"删除",now_get_in_game:"正在进入游戏...",next_banker:"下局庄",next_farmer:"下局闲",login_account:"账号",login_password:"密码",login_phone:"手机号",get_mail_reward:"领取成功",get_mail_reward_no:"没有可领取的奖励",lastRoundTip:"您在上一局未结束，不能进行此操作",backLastRound:"是否回到上一局?",onBetLeave:"您已下注,不建议您离开当前房间,是否强行离开？",shufflePlayer:"玩家 A 正在切牌,请稍后...",bankerFee:"手续费：",skip:"翻牌",resetPassFail:"重置密码失敗!",resetPassSuccess:"重置密码成功!",serviceQQ:"  QQ：",servicedesc:"如有问题请联系客服！",downloadDes:"客户端版本将可以获得更流畅的体验",vip_agent:"马上成为代理",vip_agent_desc1:"累计充值≥5W或推广人员推荐人数≥5人",vip_agent_desc21:"1.单笔充值≥50000可以额外获得1%的筹码返利",vip_agent_desc22:"2.可以转赠筹码给其他玩家",vip_agent_desc3:"成为一级代理并且累计充值≥10W",vip_agent_desc41:"1.单笔充值≥50000可以额外获得2%的筹码返利",vip_agent_desc42:"2.可以转赠筹码给其他玩家",vip_agent_desc43:"3.无需再次审核，达到条件直升特级代理",vip_agent_apply_desc:"恭喜您获得成为一级代理资格，请提交申请成为一级代理",vip_agent_apply_desc2:"客服将在24小时内与您取得联系，请确认提供的联系方式准确无误。",vip_agent_apply_desc3:"手机号码：",vip_agent_apply_phone:"请输入手机号码",vip_agent_apply_send:"申请发送成功！",vip_agent_normal:"一级代理",vip_agent_super:"特级代理",vip_agent_super_require:"距离成为特级代理还差：",vip_agent_query:"填写查询ID",vip_agent_give:"赠送筹码数量",vip_agent_give_success:"赠送成功！",vip_agent_fee:"本次赠送X筹码，手续费Y，共消耗Z",vip_agent_remarks:"注：赠送筹码需要收取X%的手续费，赠送的筹码数量必须为100的倍数。",vip_agent_give_tip:"赠送的筹码数量必须为100的倍数。",query_id_null:"ID不能为空",chip_not_enough:"当前携带筹码数量不足",query_offline_user:"查询下线玩家",offline_user_name:"玩家昵称",offline_user_id:"玩家ID",offline_user_register_time:"注册时间",offline_user_binding_time:"绑定时间",user_name:"昵称:",user_id:"ID:",date:"日期:",nor_agent:"成为一级代理：",agent_welfare:"一级代理福利：",super_agent:"成为特级代理：",super_agent_welfare:"特级代理福利：",recharge_num:"当前累计充值金额：",offline_num:"当前下线人数：",be_careful:"注意：",rebate:"返利",changehead:"选择头像",customhead:"自定义头像",agent_lv:"代理等级",word_just:"公平  公正  安全  稳定",word_zhizun:"风云厅",word_jinmi:"竞咪厅",word_vip:"VIP厅",word_six:"免佣厅",word_vip_room_list:"暂无包间列表",chat_serif:"聊天",chat_emoji:"表情",vip_spread_give:"赠送筹码",vip_spread_give_all:"剩余筹码 : ",vip_spread_offline:"下线玩家列表",vip_spread_offlineId:"下线玩家ID",register_title:"账号注册",word_changePass:"密码重置",download:"游戏下载",word_create_room:"创建房间",word_join_room:"加入房间",title_safe:"账号与安全",word_changeName:"修改名称",title_bind_recommand:"关联推荐人",rank_title:"排行榜",title_gambling:"牌局明细",player_list_title:"无座玩家",player_list_up_title:"上装列表",word_mailbox:"信箱",word_mail:"邮件",spread_title:"推广员",offline_title:"下线玩家列表",rebate_detail:"返利明细",month_rebate_detail:"本月明细",yesterday_rebate_title:"昨日返利",month_rebate_title:"本月返利",year_rebate_title:"年度返利",vip_agent_normal_give:"您已成为一级代理可赠送筹码",vip_agent_super_give:"您已成为特级代理可赠送筹码",agent_title:"成为代理",give_chip:"赠送筹码",word_bank:"账房",word_title_detail:"收支明细",word_recharge:"充值",title_help:"帮助说明",word_setting:"设置",choose_bet_title:"选择筹码额度",rank_one:"个人排行榜",rank_day:"日赠送排行榜",rank_month:"月赠送排行榜",sign_title:"签到",sign_reward:"每日签到奖励",sign_desc:"每日登录签到，即可领取免费筹码进行游戏",sign_desc1:"已经签到",sign_desc2:"时间没到",sign_desc3:"筹码+100",servicechat:"联系客服",get_gold:"筹码数量小于100才可领取",rechargeQRcodeError:"充值失败",quick2:"银联快捷",quick:"银联扫码",top_confirm_context:"很抱歉，您现在是访客模式，无法正常游戏和体验完整功能。请使用账号登陆游戏。",top_confirm1:"确 定",top_confirm2:"取 消",top_confirm3:"立即充值",top_confirm4:"我知道了",rechargeYYY_num:"订单金额：",rechargeYYY_authentication:"账户实名认证",rechargeYYY_agree:"同意",rechargeYYY_authentication_desc:"银联实名认证协议",rechargeYYY_authentication_desc1:"-  请输入银行卡关联的身份信息",rechargeYYY_authentication_desc2:"-  认证通过后，该账户关联的身份信息不可更改",rechargeYYY_authentication_ok:"提交",rechargeYYY_cardnum:"卡号",rechargeYYY_cardname:"真实姓名",rechargeYYY_Id_type:"证件类型",rechargeYYY_Id:"身份证",rechargeYYY_Id_num:"证件号",rechargeYYY_phone:"手机号",rechargeYYY_phone_desc:"银行预留手机号",rechargeYYY_input:"个人信息将会严格保密",rechargeYYY_inputId_length_limit:"身份证号码长度必须是15或18位",bankName:"银行名称",bankNum:"银行卡号",delBankCard:"删除银行卡",addBankCard:"添加银行卡",rechargeYYY_add_tips:"提示：只支持借记卡支付。每张银行卡只需绑定一次",rechargeYYY_tips:"提示：只支持借记卡支付，单日最高限额X。\n每张银行卡只需绑定一次",removeBankCarddesc:"确定要删除绑定的银行卡？",rechargeYYY_verify_code:"请输入短信验证码",title_verify_code:"短信验证",choice_card_no:"未选择银行卡",binding_card_no:"未绑定银行卡",verify_code_desc:"短信验证成功，系统处理中！",binding_error:"知道了",get_verify_code:"获取验证码"}),gbx.define("conf/version",{version:"1.3.2.5"}),gbx.define("game/baccarat/helper/game_mgr",["gbx/cclass","gbx/net/messagecommand","gbx/net/errorcode","gbx/net/errorcode_des","gbx/net/connector","comm/helper/conf_mgr","comm/helper/playerdata_mgr","comm/ui/net_error","comm/data/player/player_data","comm/helper/room_mgr","conf/locallization","conf/ui_locallization","gbx/net/net_tool","game/baccarat/parts/card"],function(Class,CMD,ERROR_CODE,ERROR_CODE_DES,server,confMgr,playerDataMgr,NetError,PlayerData,roomMgr,Localization,uiLocallization,netTool,Card){var definition=confMgr.read("games/baccarat/dat/definition.json");return Class.extend({init:function(){this._super(),this._baccaratRoomType=confMgr.definition.BaccaratRoomType.Dragon,this._gameState=definition.GAME_STATE.GAME_END,this._players={},this._dealerId=null,this._waitDealerList=[],this._roundBetInfo={},this._lastPutChipTime=Date.now(),this._lastMyRoundChipsInfo=[],this._roundChipsInfo={},this._farmerMaxSeatIdx=-1,this._bankerMaxSeatIdx=-1,this._startTime=Date.now(),this._timeLeftMax=0,this._isFlyCard=!1,this._bSixBanker=!1,this.subscribe("game_baccarat.command.exit",this,this.eventGameEnd),this.subscribe("game_baccarat.command.player_bet_area",this,this.eventPlayerBet),this.subscribe("game_baccarat.command.player_repeat_bet",this,this.eventPlayerRepeatBet),this.subscribe("game_baccarat.command.up_to_dealer",this,this.eventUpToDealer),this.subscribe("game_baccarat.command.cancel_up_dealer",this,this.eventCancelUpToDealer),this.subscribe("game_baccarat.command.down_from_dealer",this,this.eventDownFromDealer),this.subscribe("game_baccarat.command.send_chat",this,this.eventChat),this.subscribe("game_baccarat.command.require_showed_seat",this,this.eventInSeat),this.subscribe("game_baccarat.command.cancelBet",this,this.eventCancelBet),this.subscribe("game_baccarat.command.flyCard",this,this.eventFlyCard),this.subscribe("game_baccarat.command.confirmBet",this,this.eventConfirmBet)},getMaxSeatIdx:function(){return[this._farmerMaxSeatIdx,this._bankerMaxSeatIdx]},_resetMyBet:function(isNewRound,playerId){if(isNewRound||playerDataMgr.isMyself(playerId)){this._roundBetInfo[playerId]=[0,0,0,0,0,0];var myRoundChipsInfo=this._roundChipsInfo[playerId];void 0!=myRoundChipsInfo&&(this._lastMyRoundChipsInfo=myRoundChipsInfo)}isNewRound||delete this._roundChipsInfo[playerId]},_integrateAllAreaChips:function(playerId){var roundBetInfo=this._roundBetInfo[playerId];if(void 0!=roundBetInfo)for(var allAreaElements=this._roundChipsInfo[playerId],area=definition.CHIP_AREA.BANKER;area<=definition.CHIP_AREA.FARMERPAIR;area++){var areaBetInfo=roundBetInfo[area];if(0!=areaBetInfo){var areaElements=allAreaElements[area];this._baccaratRoomType!=confMgr.definition.BaccaratRoomType.Dragon&&this._baccaratRoomType!=confMgr.definition.BaccaratRoomType.Six&&(areaElements=this._integrateAreaChips(playerId,area,areaBetInfo),allAreaElements[area]=areaElements);for(var i=0;i<areaElements.length;i++){var element=areaElements[i];this.publish("game_baccarat.play.fly_bet",this._getSeatIdx(playerId),area,playerId,element.money,!1,i)}}}},_integrateAreaChips:function(playerId,area,areaBetInfo){for(var areaElements=[],i=confMgr.setting.betPrice.length-1;i>=0;i--){var betPrice=confMgr.setting.betPrice[i],num=parseInt(areaBetInfo/betPrice);if(0!=num)for(var j=0;j<num;j++){var chipInfo={area:area,money:betPrice,playerId:playerId};areaElements.push(chipInfo)}var leftBet=areaBetInfo%betPrice;if(leftBet<=0)break;areaBetInfo=leftBet}return areaElements},setRoomData:function(proto){this._gameState=proto.state;var data=roomMgr.getChoose();roomMgr.lastRoomId=data.roomId,this._baccaratRoomType=data.baccaratRoomType,gbx.log("setRoomData gameState "+this._gameState);for(var i in proto.players){var playerProto=proto.players[i],playerInfoProto=playerProto.playerInfo,playerId=playerInfoProto.playerId,playerObj=netTool.createObjFromProto(playerInfoProto);if(playerObj.seatIdx=playerProto.seatIdx,playerObj.roomCoin=playerProto.carryOnGold,this._players[playerId]=playerObj,playerDataMgr.isMyself(playerId)&&(playerObj.seatIdx=proto.playerSeatIdx,playerDataMgr.setMyCarryGold(playerProto.carryOnGold),playerDataMgr.setSeatIdx(playerObj.seatIdx)),-1!==playerObj.seatIdx&&this.publish("game_baccarat.play.set_player_in_seat",playerObj.seatIdx,playerObj.nickName,playerObj.playerIcon,0,playerDataMgr.isMyself(playerId),proto.leftSendCardTime),this._gameState<definition.GAME_STATE.GAME_RESULT&&(this.onUserBet(playerId,playerProto.chipInfo,!0),this._integrateAllAreaChips(playerId)),-1!==playerObj.seatIdx){var carryOnGold=0;carryOnGold=playerDataMgr.isMyself(playerId)?playerDataMgr.getMyCarryGold():playerObj.roomCoin,this.publish("game_baccarat.play.update_player_gold",playerObj.seatIdx,carryOnGold)}}if(this._setPlayerList(),this.onSetDealerList(proto.waitBankers),""!==proto.bankerId?this.onSetGameDealer(proto.bankerId,proto.bankerScore,proto.bankerRounds,this._players[proto.bankerId].roomCoin):this.onSetGameDealer(null,0,0,0),this.publish("global.playerdata.update.itembag"),this.publish("game_baccarat.play.update_card_count",proto.leftCardNum),this.publish("game_baccarat.play.start_bet",proto.leftSendCardTime,playerDataMgr.isDealer(),!0),this._timeLeftMax=proto.leftSendCardTime,this._startTime=Date.now(),this._baccaratRoomType==confMgr.definition.BaccaratRoomType.Dragon||this._baccaratRoomType==confMgr.definition.BaccaratRoomType.Six)this._gameState<definition.GAME_STATE.GAME_RESULT&&(proto.bankerCards.length>0||proto.farmerCards.length>0)&&this.onSendCard(this._gameState,proto.bankerCards,proto.farmerCards,!1);else if(this._baccaratRoomType==confMgr.definition.BaccaratRoomType.JingMi||this._baccaratRoomType==confMgr.definition.BaccaratRoomType.Vip){var myLookSide=definition.LOOKCARD_SIDE.NONE;if(this._farmerMaxSeatIdx=-1,this._bankerMaxSeatIdx=-1,proto.farmerBetMax){var farmer=this._players[proto.farmerBetMax];this._farmerMaxSeatIdx=farmer.seatIdx,playerDataMgr.isMyself(proto.farmerBetMax)&&(myLookSide=definition.LOOKCARD_SIDE.FARMER)}if(proto.bankerBetMax){var banker=this._players[proto.bankerBetMax];this._bankerMaxSeatIdx=banker.seatIdx,playerDataMgr.isMyself(proto.bankerBetMax)&&(myLookSide=definition.LOOKCARD_SIDE.BANKER)}this.publish("game_baccarat.play.getBetMaxPlayer",this._farmerMaxSeatIdx,this._bankerMaxSeatIdx,!1),proto.bankerCards.length>0&&proto.farmerCards.length>0&&this.publish("game_baccarat.play.send_card",proto.bankerCards,proto.farmerCards,proto.sendCardSteps,proto.sendCardLeftTime,proto.step2Send2,this._farmerMaxSeatIdx,this._bankerMaxSeatIdx,myLookSide,!1,proto.lookCardDir,proto.lookStep,proto.lookRadian),this.publish("game_baccarat.seat.checkShowChair")}this._isFlyCard=proto.isFlyCard,this._gameState==definition.GAME_STATE.USER_PUT?this._isFlyCard?this.publish("game_baccarat.play.checkFlyCard",!0):this.publish("game_baccarat.play.checkFlyCard",Object.getOwnPropertyNames(this._roundChipsInfo).length>0):this.publish("game_baccarat.play.checkFlyCard",!0),proto.isConfirmBet&&this.publish("game_baccarat.play.lockBet")},_getSeatIdx:function(playerId){return playerId in this._players?this._players[playerId].seatIdx:-1},_setPlayerList:function(){var resultList=[],array=[];this._baccaratRoomType==confMgr.definition.BaccaratRoomType.Dragon||this._baccaratRoomType==confMgr.definition.BaccaratRoomType.Six?array=confMgr.setting.seatPos:this._baccaratRoomType!=confMgr.definition.BaccaratRoomType.JingMi&&this._baccaratRoomType!=confMgr.definition.BaccaratRoomType.Vip||(array=confMgr.setting.seatPos_jinMi);for(var key in this._players)this._players[key].seatIdx>=0&&this._players[key].seatIdx<array.length||resultList.push(this._players[key]);this.publish("game_baccarat.play.set_player_list",resultList),this.publish("game_baccarat.play.setRoomPlayersCount",this._players.length)},_isWaitingUpToDealer:function(){for(var key in this._waitDealerList){var info=this._waitDealerList[key];if(playerDataMgr.isMyself(info.playerId))return!0}return!1},_setMeDealer:function(isDealer){playerDataMgr.setMeDealer(isDealer),isDealer?this.publish("game_baccarat.command.set_dealer_button","down"):this._isWaitingUpToDealer()?this.publish("game_baccarat.command.set_dealer_button","cancel"):this.publish("game_baccarat.command.set_dealer_button","up")},_playerBet:function(chipInfo){var sendData=gtea.protobuf.encode("BaccaratBet",{chipInfo:chipInfo});server.sendToRoom(CMD.BaccaratBet,sendData),this._lastPutChipTime=Date.now()},_showResult:function(state,winState,bankerPair,farmerPair){function isWinArea(area){for(var i in wins)if(wins[i]==area)return!0;return!1}function pushInfo(data,element,bSix){var key=element.chair+"_"+element.area+"_"+element.playerId;if(0==data.hasOwnProperty(key)&&(data[key]=[]),bSix)for(var areaBetInfo=element.money/2,i=confMgr.setting.betPrice.length-1;i>=0;i--){var betPrice=confMgr.setting.betPrice[i],num=parseInt(areaBetInfo/betPrice);if(0!=num)for(var j=0;j<num;j++)data[key].push(betPrice);var leftBet=areaBetInfo%betPrice;if(leftBet<=0)break;areaBetInfo=leftBet}else data[key].push(element.money)}if(this._gameState=state,!playerDataMgr.isDealer()&&Date.now()-this._lastPutChipTime>3e5)return this._showFailMessage(Localization.kickNotice),void this.eventGameEnd();if(winState!=definition.WIN_STATE.WIN_UNKNOW){var pairs=0;bankerPair&&(pairs|=1,this.publish("game_baccarat.play.add_win_area",definition.CHIP_AREA.BANKERPAIR)),farmerPair&&(pairs|=2,this.publish("game_baccarat.play.add_win_area",definition.CHIP_AREA.FARMERPAIR)),bankerPair&&farmerPair&&(pairs|=3);var fails=[],wins=[];if(bankerPair?wins.push(definition.CHIP_AREA.BANKERPAIR):fails.push(definition.CHIP_AREA.BANKERPAIR),farmerPair?wins.push(definition.CHIP_AREA.FARMERPAIR):fails.push(definition.CHIP_AREA.FARMERPAIR),wins.push(winState),winState!=definition.CHIP_AREA.DEUCE)for(var area=definition.CHIP_AREA.BANKER;area<=definition.CHIP_AREA.DEUCE;area++)area!=winState&&fails.push(area);var dealerToAreaChipInfo={};for(var playerId in this._roundChipsInfo){var allAreaElements=this._roundChipsInfo[playerId],seatIdx=this._getSeatIdx(playerId);for(var tArea in allAreaElements){var areaElements=allAreaElements[tArea];if(this._baccaratRoomType==confMgr.definition.BaccaratRoomType.Six&&tArea==confMgr.definition.CHIP_AREA.BANKER&&this._bSixBanker){if(isWinArea(tArea)){for(var allMoney=0,i=0;i<areaElements.length;i++)allMoney+=(element=areaElements[i]).money;var rElement={};rElement.chair=seatIdx,rElement.area=tArea,rElement.playerId=playerId,rElement.money=allMoney,pushInfo(dealerToAreaChipInfo,rElement,!0)}}else for(i=0;i<areaElements.length;i++){var element=areaElements[i];element.chair=seatIdx,isWinArea(tArea)&&pushInfo(dealerToAreaChipInfo,element,!1)}}}this.publish("game_baccarat.play.add_game_round",fails,dealerToAreaChipInfo),this.publish("game_baccarat.play.add_win_area",winState),this.publish("game_baccarat.play.add_history",winState,pairs,this._bankerMaxSeatIdx,this._farmerMaxSeatIdx)}},_settleMoney:function(winState,turns,score,gold,playerMoney){for(var changedList=[],addGold=0,i=0;i<playerMoney.length;i++){var playerId=playerMoney[i].playerId;if(playerId in this._players){var playerObj=this._players[playerId];playerObj.roomCoin=playerMoney[i].carryOnGold,playerMoney[i].seatIdx=playerObj.seatIdx,playerDataMgr.isMyself(playerId)?(winState===definition.WIN_STATE.WIN_DEUCE?changedList.push(playerMoney[i]):playerMoney[i].carryOnGold!==playerDataMgr.getMyCarryGold()&&changedList.push(playerMoney[i]),addGold=playerMoney[i].carryOnGold-playerDataMgr.getMyCarryGold(),playerDataMgr.setMyCarryGold(playerMoney[i].carryOnGold),playerDataMgr.setMyGold(playerMoney[i].gold)):changedList.push(playerMoney[i])}}this.publish("game_baccarat.play.update_dealer_info",turns,score,gold),this.publish("game_baccarat.play.update_players_info",changedList,addGold)},_showFailMessage:function(message){this.publish("game_baccarat.command.show_fail_message",message)},sendSystemChat:function(msg){this.onChat(definition.CHAT_TYPE.SYSTEM,"",msg)},_inSeatCheck:function(notifyError){if(playerDataMgr.isDealer())return!1;if(this._baccaratRoomType!=confMgr.definition.BaccaratRoomType.Dragon&&this._baccaratRoomType!=confMgr.definition.BaccaratRoomType.Six){var playerId=playerDataMgr.getMyUID();if(-1!=this._getSeatIdx(playerId))return}var seatMinMoney=roomMgr.getChoose().seatMinMoney;if(playerDataMgr.getMyCarryGold()<seatMinMoney){if(notifyError){var str=uiLocallization.seat_gold_limit;str=str.replace("A",seatMinMoney),this._showFailMessage(str)}return!1}return!0},end:function(){this._players=null,this._waitDealerList=null,this._roundBetInfo=null,this._lastPutChipTime=null,this._lastMyRoundChipsInfo=null,this._roundChipsInfo=null,this._farmerMaxSeatIdx=-1,this._bankerMaxSeatIdx=-1,this._super()},eventPlayerBet:function(area,chips,failCall){var data=roomMgr.getChoose(),limitFarmerBanker=data.bankerFarmerBetMin,limitFarmerBankerPair_and_duece=data.otherBetMin,myRoundBetInfo=this._roundBetInfo[playerDataMgr.getMyUID()],curChips=0;if(area==definition.CHIP_AREA.BANKER||area==definition.CHIP_AREA.FARMER){if(void 0!=myRoundBetInfo&&(curChips=myRoundBetInfo[area]),chips+curChips<limitFarmerBanker)return void this._showFailMessage(uiLocallization.farmerbankerArea+uiLocallization.LimitColor+limitFarmerBanker)}else if(area==definition.CHIP_AREA.DEUCE){if(void 0!=myRoundBetInfo&&(curChips=myRoundBetInfo[area]),chips+curChips<limitFarmerBankerPair_and_duece)return void this._showFailMessage(uiLocallization.dueceArea+uiLocallization.LimitColor+limitFarmerBankerPair_and_duece)}else if(void 0!=myRoundBetInfo&&(curChips=myRoundBetInfo[area]),chips+curChips<limitFarmerBankerPair_and_duece)return void this._showFailMessage(uiLocallization.farmerbankerPairArea+uiLocallization.LimitColor+limitFarmerBankerPair_and_duece);if(void 0!=myRoundBetInfo){if(area==definition.CHIP_AREA.BANKER&&myRoundBetInfo[definition.CHIP_AREA.FARMER]>0)return void this._showFailMessage(uiLocallization.BankerAndFarmerMutex);if(area==definition.CHIP_AREA.FARMER&&myRoundBetInfo[definition.CHIP_AREA.BANKER]>0)return void this._showFailMessage(uiLocallization.BankerAndFarmerMutex)}if(playerDataMgr.getMyCarryGold()>=chips){var chipInfo=[{area:area,money:chips}];this._playerBet(chipInfo)}else this._showFailMessage(Localization.lackMoney),failCall&&failCall.call()},eventPlayerRepeatBet:function(rate){for(var tMoney=0,chipInfo=[],i=0;i<this._lastMyRoundChipsInfo.length;i++)for(var chipInfo=this._lastMyRoundChipsInfo[i],j=0;j<rate;j++)tMoney+=chipInfo.money,chipInfo.push({area:chipInfo.area,money:chipInfo.money});var myRoundBetInfo=this._roundBetInfo[playerDataMgr.getMyUID()];void 0!=myRoundBetInfo&&(playerDataMgr.getMyCarryGold()-myRoundBetInfo[0]>=tMoney?this._playerBet(chipInfo):this._showFailMessage(Localization.lackMoney))},eventUpToDealer:function(){var data=roomMgr.getChoose();if(0!=data.upToBanker)if(data.bankerMinMoney>playerDataMgr.getMyCarryGold())this._showFailMessage(ERROR_CODE_DES[ERROR_CODE.LackMoney]+","+uiLocallization.up_banker_need+" "+data.bankerMinMoney);else{var sendData=gtea.protobuf.encode("BaccaratApplyBanker",{isUp:!0});server.sendToRoom(CMD.BaccaratApplyBanker,sendData)}},eventCancelUpToDealer:function(){if(0!=roomMgr.getChoose().upToBanker){var sendData=gtea.protobuf.encode("BaccaratApplyBanker",{isUp:!1});server.sendToRoom(CMD.BaccaratApplyBanker,sendData)}},eventDownFromDealer:function(){if(0!=roomMgr.getChoose().upToBanker){var sendData=gtea.protobuf.encode("BaccaratApplyBanker",{isUp:!1});server.sendToRoom(CMD.BaccaratApplyBanker,sendData)}},eventInSeat:function(seatIdx){if(this._inSeatCheck(!0)){var sendData=gtea.protobuf.encode("BaccaratSeat",{seatIdx:seatIdx});server.sendToRoom(CMD.BaccaratSeat,sendData)}},eventChat:function(type,content){var playerId=playerDataMgr.getMyUID(),sendData=gtea.protobuf.encode("BaccaratChat",{playerId:playerId,type:type,content:content});server.sendToRoom(CMD.BaccaratChat,sendData)},eventGameEnd:function(){var playerId=playerDataMgr.getMyUID(),sendData=gtea.protobuf.encode("QuitRoomReq",{playerId:playerId});server.requestToGame(CMD.QuitRoom,sendData,this,function(errorcode,retData){if(errorcode==ERROR_CODE.OK){var msgData=gtea.protobuf.decode("QuitRoomResp",retData);if(msgData.result==ERROR_CODE.OK){var myRoundBetInfo=this._roundBetInfo[playerId];void 0!=myRoundBetInfo&&playerDataMgr.updateMyCarryGold(myRoundBetInfo[0]),roomMgr.getAllRoomData(this,function(){this.publish("global.app.back_action")})}else this._showFailMessage("gameEnd error "+msgData.result)}})},eventConfirmBet:function(){var sendData=gtea.protobuf.encode("BaccaratConfirmBet",{});server.sendToRoom(CMD.BaccaratConfirmBet,sendData)},eventCancelBet:function(){var sendData=gtea.protobuf.encode("BaccaratRemoveBet",{});server.sendToRoom(CMD.BaccaratRemoveBet,sendData)},eventFlyCard:function(){if(this._gameState==definition.GAME_STATE.USER_PUT){var playerId=playerDataMgr.getMyUID();if(this._getSeatIdx(playerId)<0)this._showFailMessage(Localization.noSeatCantFlyCard);else{var sendData=gtea.protobuf.encode("BaccaratFlyCardJM",{});server.sendToRoom(CMD.BaccaratFlyCardJM,sendData)}}},onPlayerSeatChanged:function(msgData){var playerObj=this._players[msgData.playerId];playerObj.seatIdx=msgData.seatIdx;var passed=Math.floor((Date.now()-this._startTime)/1e3),leftTime=this._timeLeftMax-passed>0?this._timeLeftMax-passed:0;playerDataMgr.isMyself(msgData.playerId)?(playerDataMgr.setSeatIdx(playerObj.seatIdx),this.publish("game_baccarat.play.set_player_in_seat",playerObj.seatIdx,playerObj.nickName,playerObj.playerIcon,playerDataMgr.getMyCarryGold(),!0,leftTime)):this.publish("game_baccarat.play.set_player_in_seat",playerObj.seatIdx,playerObj.nickName,playerObj.playerIcon,playerObj.roomCoin,!1,leftTime),this._setPlayerList(),-1!==msgData.clearSeatIdx&&this.publish("game_baccarat.play.set_player_out_seat",msgData.clearSeatIdx),this._baccaratRoomType!=confMgr.definition.BaccaratRoomType.Dragon&&this._baccaratRoomType!=confMgr.definition.BaccaratRoomType.Six&&playerDataMgr.isMyself(msgData.playerId)&&this.publish("game_baccarat.seat.checkShowChair")},onNewRound:function(state,time){if(this._gameState=state,this._resetMyBet(!0,null),this._roundBetInfo={},this._roundChipsInfo={},this._farmerMaxSeatIdx=-1,this._bankerMaxSeatIdx=-1,this._timeLeftMax=time,this._startTime=Date.now(),this._isFlyCard=!1,this._bSixBanker=!1,this.publish("game_baccarat.play.clear_table"),this.publish("game_baccarat.play.start_bet",time,playerDataMgr.isDealer(),!1),playerDataMgr.isDealer())this._lastPutChipTime=Date.now();else if(Date.now()-this._lastPutChipTime>3e5)return this._showFailMessage(Localization.kickNotice),void this.eventGameEnd()},onGetUserMax:function(farmerPlayerId,bankerPlayerId){if(this._farmerMaxSeatIdx=-1,this._bankerMaxSeatIdx=-1,farmerPlayerId){var farmer=this._players[farmerPlayerId];this._farmerMaxSeatIdx=farmer.seatIdx}if(bankerPlayerId){var banker=this._players[bankerPlayerId];this._bankerMaxSeatIdx=banker.seatIdx}this.publish("game_baccarat.play.getBetMaxPlayer",this._farmerMaxSeatIdx,this._bankerMaxSeatIdx,!0)},onUserBet:function(playerId,chipInfoProto,isInit){for(var i=0;i<chipInfoProto.length;i++){var oneChipInfoProto=chipInfoProto[i],chipInfo=netTool.createObjFromProto(oneChipInfoProto);chipInfo.playerId=playerId;var area=chipInfo.area,chip=chipInfo.money,roundBetInfo=this._roundBetInfo[playerId];void 0==roundBetInfo&&(roundBetInfo=[0,0,0,0,0,0],this._roundBetInfo[playerId]=roundBetInfo),roundBetInfo[area]+=chip,roundBetInfo[0]+=chip;var allAreaElements=this._roundChipsInfo[playerId];void 0==allAreaElements&&(allAreaElements={},this._roundChipsInfo[playerId]=allAreaElements);var areaElements=allAreaElements[area];void 0==areaElements&&(areaElements=[],allAreaElements[area]=areaElements),areaElements.push(chipInfo);var chipIdx=areaElements.length-1;if(!isInit)if(this._baccaratRoomType==confMgr.definition.BaccaratRoomType.Dragon||this._baccaratRoomType==confMgr.definition.BaccaratRoomType.Six)this.publish("game_baccarat.play.fly_bet",this._getSeatIdx(playerId),area,playerId,chip,!0);else{var integratedAreaElements=this._integrateAreaChips(playerId,area,roundBetInfo[area]);allAreaElements[area]=integratedAreaElements,areaElements.length!=integratedAreaElements.length?this.publish("game_baccarat.play.fly_bet",this._getSeatIdx(playerId),area,playerId,chip,!0,chipIdx,integratedAreaElements):this.publish("game_baccarat.play.fly_bet",this._getSeatIdx(playerId),area,playerId,chip,!0,chipIdx,null)}if(playerDataMgr.isMyself(playerId)){if(playerDataMgr.updateMyCarryGold(-chip),this.publish("game_baccarat.play.update_area_my_chip",area,roundBetInfo[area]),!isInit){this.publish("global.playerdata.update.itembag");var seatIdx=this._getSeatIdx(playerId);-1!=seatIdx&&this.publish("game_baccarat.play.update_player_gold",seatIdx,playerDataMgr.getMyCarryGold())}}else{var playerObj=this._players[playerId];playerObj&&(playerObj.roomCoin-=chip),isInit||-1!=playerObj.seatIdx&&this.publish("game_baccarat.play.update_player_gold",playerObj.seatIdx,playerObj.roomCoin)}}isInit||this.publish("game_baccarat.play.checkFlyCard",!0)},onRemoveBet:function(playerId,carryOnGold){this._resetMyBet(!1,playerId),playerDataMgr.isMyself(playerId)?(playerDataMgr.setMyCarryGold(carryOnGold),this.publish("game_baccarat.play.clear_area_my_chip"),this.publish("global.playerdata.update.itembag")):this._players[playerId].roomCoin=carryOnGold;var seatIdx=this._getSeatIdx(playerId);this.publish("game_baccarat.play.removeBet",seatIdx,playerId),-1!=seatIdx&&this.publish("game_baccarat.play.update_player_gold",seatIdx,carryOnGold),this._isFlyCard?this.publish("game_baccarat.play.checkFlyCard",!0):this.publish("game_baccarat.play.checkFlyCard",Object.getOwnPropertyNames(this._roundChipsInfo).length>0)},onSendCard:function(state,bankersCard,farmersCard,doAnimation){this._gameState=state,this.publish("game_baccarat.play.send_card",bankersCard,farmersCard,doAnimation),this.publish("game_baccarat.play.checkFlyCard",!0),this.setBankerSix(bankersCard)},setBankerSix:function(bankersCard){for(var cardValue=0,i=2;i<bankersCard.length;i++)cardValue+=Math.min(10,this.getPoint(bankersCard[i]));this._bSixBanker=cardValue%10==6},getPoint:function(value){return(value-1)%13+1},onSendCardJM:function(retData){this._gameState=retData.state,this._farmerMaxSeatIdx=-1,this._bankerMaxSeatIdx=-1;var myLookSide=definition.LOOKCARD_SIDE.NONE;if(retData.farmerBetMax){var farmer=this._players[retData.farmerBetMax];this._farmerMaxSeatIdx=farmer.seatIdx,playerDataMgr.isMyself(retData.farmerBetMax)&&(myLookSide=definition.LOOKCARD_SIDE.FARMER)}if(retData.bankerBetMax){var banker=this._players[retData.bankerBetMax];this._bankerMaxSeatIdx=banker.seatIdx,playerDataMgr.isMyself(retData.bankerBetMax)&&(myLookSide=definition.LOOKCARD_SIDE.BANKER)}this.publish("game_baccarat.play.send_card",retData.bankerCard,retData.farmerCard,retData.sendCardSteps,retData.leftTime,retData.step2Send2,this._farmerMaxSeatIdx,this._bankerMaxSeatIdx,myLookSide,!0)},onSyncCardFlipProcess:function(retData){var isMyself=playerDataMgr.isMyself(retData.playerId);this.publish("game_baccarat.play.update_card_progress",retData.step,retData.radian,retData.cardIndex,retData.lookCardDir,isMyself)},onSyncLookCardEndJM:function(retData){this.publish("game_baccarat.play.card_timeout",retData.sendCardStep)},onSyncLookCardDir:function(retData){this.publish("game_baccarat.play.update_card_direction",retData.sendCardStep,retData.cardIndex,retData.dir)},onSyncMiLookSound:function(retData){this.publish("game_baccarat.play.playSound",retData.sound)},onRoundResult:function(state,winState,bankerPair,farmerPair,turns,score,gold,playerMoney){this._showResult(state,winState,bankerPair,farmerPair),this._settleMoney(winState,turns,score,gold,playerMoney),this._roundBetInfo={}},onSetGameDealer:function(dealerId,score,turns,gold){if(null!=dealerId){this._dealerId=dealerId;var playerObj=this._players[dealerId];playerDataMgr.isMyself(dealerId)?this._setMeDealer(!0):this._setMeDealer(!1),this.publish("game_baccarat.play.up_player_dealer",playerObj.nickName,playerObj.playerIcon,playerObj.roomCoin),playerDataMgr.isDealer()?this.publish("game_baccarat.command.set_dealer_button","down"):this.publish("game_baccarat.command.set_dealer_button","up")}else this._dealerId=null,this._setMeDealer(!1),this.publish("game_baccarat.play.up_com_dealer");this.publish("game_baccarat.play.update_dealer_info",turns,score,gold)},onSetDealerList:function(waitList){for(var infoList=[],isWaiting=!1,i=0;i<waitList.length;i++){var playerObj=this._players[waitList[i]],oneInfo={};oneInfo.playerId=playerObj.playerId,oneInfo.playerIcon=playerObj.playerIcon,oneInfo.roomCoin=playerObj.roomCoin,oneInfo.nickName=playerObj.nickName,infoList.push(oneInfo),playerDataMgr.isMyself(playerObj.playerId)&&(isWaiting=!0)}isWaiting?this.publish("game_baccarat.command.set_dealer_button","cancel"):playerDataMgr.isDealer()?this.publish("game_baccarat.command.set_dealer_button","down"):this.publish("game_baccarat.command.set_dealer_button","up"),this._waitDealerList=infoList,this.publish("game_baccarat.play.set_dealer_list",this._waitDealerList)},onDealerNotice:function(notice){1===notice&&this._showFailMessage(Localization.dealerDown)},onChat:function(type,playerId,msg){if(type===definition.CHAT_TYPE.SYSTEM)this.publish("game_baccarat.play.chat_incomming",definition.CHAT_TYPE.SYSTEM,"系统",msg);else{var playerObj=this._players[playerId];playerObj&&(this.publish("game_baccarat.play.chat_incomming",type,playerObj.nickName,msg,playerObj.seatIdx),type===definition.CHAT_TYPE.EMOJI&&(playerId===this._dealerId?this.publish("game_baccarat.play.player_send_emoji","dealer",msg):this.publish("game_baccarat.play.player_send_emoji",playerObj.seatIdx,msg)))}},onShuffleStart:function(msgData){this.publish("game_baccarat.play.shuffleCardStart",msgData.playerId,msgData.playerName,msgData.leftTime)},onSyncShuffleEnd:function(msgData){this.publish("game_baccarat.play.update_card_count",msgData.allNum),this.publish("game_baccarat.play.shuffleCardEnd",msgData.par,msgData.cardValue,msgData.cardNum)},onSyncConfirmBet:function(msgData){msgData.shouldFlyCard?this.publish("game_baccarat.play.flycardAnimation"):this.publish("game_baccarat.play.lockBet")},onSyncOtherConfirmBet:function(playerId){var playerObj=this._players[playerId];this.publish("game_baccarat.seat.stopMaskClip",playerObj.seatIdx,!1)},onSyncFlyCardJM:function(playerId){this._isFlyCard=!0,this.publish("game_baccarat.play.checkFlyCard",!0)},onPlayerJoinRoom:function(msgData){var playerObj=netTool.createObjFromProto(msgData.playerInfo);playerObj.seatIdx=msgData.seatIdx,playerObj.roomCoin=msgData.carryOnGold,this._players[playerObj.playerId]=playerObj,this._setPlayerList();var data=roomMgr.getChoose();void 0!=data&&(data.playerNum=this._players.length)},onPlayerQuitRoom:function(playerId){if(playerId in this._players){var playerObj=this._players[playerId];-1!=playerObj.seatIdx&&this.publish("game_baccarat.play.set_player_out_seat",playerObj.seatIdx),null!=this._dealerId&&this._dealerId===playerId&&(this._dealerId=null,this.publish("game_baccarat.play.down_player_dealer"),this.publish("game_baccarat.play.up_com_dealer"));for(var index=0;index<this._waitDealerList.length;index++)if(this._waitDealerList[index].playerId===playerId){this._waitDealerList.splice(index,1),this.publish("game_baccarat.play.set_dealer_list",this._waitDealerList);break}delete this._players[playerId],this._setPlayerList()}var data=roomMgr.getChoose();void 0!=data&&(data.playerNum=this._players.length)}})}),gbx.define("game/baccarat/net/msg_receiver",["gbx/net/messagecommand","gbx/net/errorcode","comm/helper/conf_mgr","comm/helper/room_mgr","comm/ui/top_message","conf/ui_locallization","gbx/hubs"],function(CMD,ERROR_CODE,confMgr,roomMgr,topMessage,uiLocallization,hubs){return{_gameMgr:null,setGameMgr:function(gameMgr){this._gameMgr=gameMgr},_checkGameMgr:function(command){return null!=this._gameMgr||(gbx.log("receive message has not gameMgr:"+command),!1)},onSendCard:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncSendCard",data);this._gameMgr.onSendCard(msgData.state,msgData.bankerCard,msgData.farmerCard,!0)}},onSendCardJM:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncSendCardJM",data);this._gameMgr.onSendCardJM(msgData)}},onUpdateCardFlipProcess:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncLookCardJM",data);this._gameMgr.onSyncCardFlipProcess(msgData)}},onSyncLookCardEndJM:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncLookCardEndJM",data);this._gameMgr.onSyncLookCardEndJM(msgData)}},onSyncChangeDirJM:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncChangeDirJM",data);this._gameMgr.onSyncLookCardDir(msgData)}},onSyncMiLookSound:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncLookSoundJM",data);this._gameMgr.onSyncMiLookSound(msgData)}},onUserBet:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncOnBet",data);this._gameMgr.onUserBet(msgData.playerId,msgData.chipInfo,!1),this._gameMgr.onGetUserMax(msgData.farmerBetMax,msgData.bankerBetMax)}},onRemoveBet:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncOnRemoveBet",data);this._gameMgr.onRemoveBet(msgData.playerId,msgData.carryOnGold),this._gameMgr.onGetUserMax(msgData.farmerBetMax,msgData.bankerBetMax)}},onNewRound:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncUserPut",data);this._gameMgr.onNewRound(msgData.state,msgData.leftSendCardTime)}},onRoundResult:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncGameResult",data);this._gameMgr.onRoundResult(msgData.state,msgData.winType,msgData.bankerPair,msgData.farmerPair,msgData.bankerRounds,msgData.bankerScore,msgData.bankerMoney,msgData.playerMoney)}},onShowedSeatChanged:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncOnSeat",data);this._gameMgr.onPlayerSeatChanged(msgData)}},onDealerChanged:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncOnBanker",data);this._gameMgr.onSetGameDealer(msgData.newBankerId,msgData.bankerScore,msgData.bankerRounds,msgData.bankerMoney)}},onDealerListChanged:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncBankerListChange",data);this._gameMgr.onSetDealerList(msgData.waitPlayerIdList)}},onDealerNotice:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncBakerNotice",data);this._gameMgr.onDealerNotice(msgData.notice)}},onPlayerJoinRoom:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("SyncPlayerJoin",data);this._gameMgr.onPlayerJoinRoom(msgData.baccaratPlayer)}},onPlayerQuitRoom:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("SyncPlayerQuit",data);this._gameMgr.onPlayerQuitRoom(msgData.playerId)}},onChat:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncOnChat",data);this._gameMgr.onChat(msgData.type,msgData.playerId,msgData.content)}},onShuffleStart:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncShuffleStart",data);this._gameMgr.onShuffleStart(msgData)}},onSyncShuffleEnd:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncShuffleEnd",data);this._gameMgr.onSyncShuffleEnd(msgData)}},onSyncConfirmBet:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncConfirmBet",data);this._gameMgr.onSyncConfirmBet(msgData)}},onSyncOtherConfirmBet:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncOtherConfirmBet",data);this._gameMgr.onSyncOtherConfirmBet(msgData.playerId)}},onSyncFlyCardJM:function(command,data){if(this._checkGameMgr(command)){var msgData=gtea.protobuf.decode("BaccaratSyncFlyCardJM",data);this._gameMgr.onSyncFlyCardJM(msgData.playerId)}},vipRoomEnd:function(command,data){this._checkGameMgr(command)&&(topMessage.post(uiLocallization.vip_room_end),Laya.timer.once(3e3,this,function(){hubs.publish("game_baccarat.command.exit")}))}}}),gbx.define("game/baccarat/parts/baccarat_room_params",["gbx/cclass","comm/helper/conf_mgr"],function(Class,confMgr){return new(Class.extend({init:function(){this._super()},getJMChipsPos:function(){return[[{x:88,y:600,r:0},{x:123,y:720,r:0},{x:280,y:765,r:0},{x:505,y:728,r:0},{x:543,y:600,r:0}],[{x:32,y:600,r:0},{x:77,y:770,r:0},{x:280,y:828,r:0},{x:548,y:785,r:0},{x:604,y:600,r:0}],[{x:246,y:713,r:0},{x:284,y:713,r:0},{x:320,y:713,r:0},{x:355,y:713,r:0},{x:392,y:713,r:0}],[{x:441,y:705,r:0},{x:475,y:681,r:0},{x:492,y:642,r:0},{x:494,y:597,r:0},{x:494,y:558,r:0}],[{x:196,y:706,r:0},{x:165,y:683,r:0},{x:146,y:641,r:0},{x:143,y:596,r:0},{x:143,y:558,r:0}]]},getJMChipsWinPos:function(){return[[{x:88,y:565,r:0},{x:150,y:741,r:0},{x:320,y:765,r:0},{x:477,y:748,r:0},{x:543,y:565,r:0}],[{x:32,y:565,r:0},{x:114,y:799,r:0},{x:320,y:828,r:0},{x:505,y:808,r:0},{x:604,y:565,r:0}],[{x:246,y:681,r:0},{x:284,y:681,r:0},{x:320,y:681,r:0},{x:355,y:681,r:0},{x:392,y:681,r:0}],[{x:426,y:677,r:0},{x:445,y:657,r:0},{x:462,y:630,r:0},{x:460,y:593,r:0},{x:460,y:556,r:0}],[{x:214,y:677,r:0},{x:191,y:657,r:0},{x:181,y:630,r:0},{x:180,y:593,r:0},{x:180,y:556,r:0}]]},getBetOnPos:function(){return[[185,790,134,769,92,731,70,682,68,540,117,538,117,655,136,699,162,725,203,741,299,741,358,743,435,742,480,723,507,692,522,654,522,538,569,538,566,684,546,725,512,764,464,788,360,791,289,791],[170,849,117,835,69,801,32,758,11,688,11,539,57,540,58,678,81,738,126,780,172,800,465,799,502,787,538,761,566,724,582,675,581,541,625,541,627,682,614,733,584,789,547,822,482,851],[428,730,362,730,280,731,213,729,231,695,276,677,318,667,363,677,409,695],[513,540,512,625,508,659,492,692,464,716,433,731,414,696,425,624,441,578,481,539],[203,729,167,715,140,686,127,640,126,582,127,539,160,540,205,573,223,612,223,695]]}}))}),gbx.define("game/baccarat/parts/bet_panel",["gbx/render/display/sprite","comm/base/command_ui","comm/ui/sound_button","comm/helper/conf_mgr","comm/helper/room_mgr","comm/helper/playerdata_mgr","comm/ui/ui_utils","conf/ui_locallization","gbx/render/ui/image"],function(Sprite,BaseUI,Button,confMgr,roomMgr,playerDataMgr,uiUtils,uiLocallization,Image){var betPricePos=[{x:98,y:35},{x:195,y:35},{x:292,y:35},{x:389,y:35},{x:486,y:35}];return BaseUI.extend({init:function(){this._super(),this._selectingBetIdx=0,this._enabled=!1;this.chipArray=playerDataMgr.getChipArray();for(var betMin=roomMgr.getChoose().bankerFarmerBetMin,chipPriceList=confMgr.setting.betPrice,betPriceToIconList=confMgr.setting.betPriceToIcon,priceList=[],i=0;i<chipPriceList.length;i++)priceList.length<this.chipArray.length&&chipPriceList[i]>=betMin&&priceList.push(chipPriceList[i]);for(i=chipPriceList.length-1;i>=0;i--)priceList.length<this.chipArray.length&&chipPriceList[i]<betMin&&priceList.unshift(chipPriceList[i]);this._array=[1,1,1,1,1];for(i=0;i<this.chipArray.length;i++){this.chipArray[i].price=priceList[i],this.chipArray[i].index=betPriceToIconList[priceList[i]];var mark=uiUtils.createSprite("assets/games/baccarat/tex/choose_chip_shadow.png");mark.pos(betPricePos[i].x-48,betPricePos[i].y-35),this.addChild(mark);var chipBtn=new Button;chipBtn.setSkinImage("assets/games/baccarat/tex/chips/chip"+(this.chipArray[i].index+1)+".png"),chipBtn.stateNum=1,chipBtn.pivotToCenter(),chipBtn.labelColors="#ffffff",chipBtn.labelStroke=2,chipBtn.labelStrokeColor="#000000",chipBtn.pos(betPricePos[i].x,betPricePos[i].y),chipBtn.scale(1.3),chipBtn.setClickHandler(this,this._selectedBetChange,i),0==this._array[i]&&(chipBtn.gray=!0),chipBtn.name="chip_"+i,this.addChild(chipBtn)}var selectedBet=new Sprite;selectedBet.setImage("assets/games/baccarat/tex/mark_choosechip.png"),selectedBet.pivotToCenter(),selectedBet.pos(betPricePos[0].x,betPricePos[0].y),selectedBet.name="selected_halo",selectedBet.visible=!1,this.addChild(selectedBet);var bg=new Image("assets/major/public/tab_bg2.png");bg.pos(-30,85),bg.width=640,bg.height=70,bg.sizeGrid="10,10,10,10",this.addChild(bg);var cancelBtn=this.CreateSimpleButton("assets/major/public/button_10.png",2,"cancelBtn");cancelBtn.pos(-20,91),cancelBtn.setClickHandler(this,this.cancelBet),this.addChild(cancelBtn);var sureBtn=this.CreateSimpleButton("assets/major/public/button_11.png",2,"sureBtn"),sureWidth=sureBtn.width;sureBtn.pos(603-sureWidth,91),sureBtn.setClickHandler(this,this.confirmBet),this.addChild(sureBtn),this.check(),this.setChooseLimit(this.chipArray),this.subscribe("game_baccarat.betsetting.setChooseLimit",this,this.setChooseLimit)},createSprite:function(node,path){var sp=new Sprite;return node.addChild(sp),sp.setImage(path),sp.pos(50,15),sp},CreateSimpleButton:function(path,stateNum,btnName){var btn=new Button;return btn.setSkinImage(path),btn.stateNum=stateNum,btn.pos(0,0),btn.name=btnName,btn},get selectingBetIdx(){return this._selectingBetIdx},get enabled(){return this._enabled},set enabled(v){if(this._enabled=v,this.getChildByName("selected_halo").visible=v,v){this.check(),1==this._array[0]&&(this.getChildByName("chip_0").gray=!v),1==this._array[1]&&(this.getChildByName("chip_1").gray=!v),1==this._array[2]&&(this.getChildByName("chip_2").gray=!v),1==this._array[3]&&(this.getChildByName("chip_3").gray=!v),1==this._array[4]&&(this.getChildByName("chip_4").gray=!v);var oldSelectState=!1;this._selectingBetIdx<this._array.length&&1==this._array[this._selectingBetIdx]&&(oldSelectState=!0,this._selectPos(this._selectingBetIdx));for(var mark=0,index=0;index<this._array.length;index++)if(1==this._array[index]){oldSelectState||this._selectPos(index),mark=1;break}0==mark&&(this.getChildByName("selected_halo").visible=!v,this._selectingBetIdx=-1),this.getChildByName("cancelBtn").gray=!v,this.getChildByName("sureBtn").gray=!v}else this.getChildByName("chip_0").gray=!v,this.getChildByName("chip_1").gray=!v,this.getChildByName("chip_2").gray=!v,this.getChildByName("chip_3").gray=!v,this.getChildByName("chip_4").gray=!v,this.getChildByName("cancelBtn").gray=!v,this.getChildByName("sureBtn").gray=!v},check:function(){for(var i=0;i<this.chipArray.length;i++)playerDataMgr.getMyCarryGold()>=this.chipArray[i].price?this._array[i]=1:this._array[i]=0},_selectedBetChange:function(btn,idx){if(this._enabled&&0!=this._array[idx]&&idx!=this._selectingBetIdx){this._selectingBetIdx=idx,this.getChildByName("selected_halo").pos(betPricePos[idx].x,betPricePos[idx].y);var soundName=this.chipArray[this._selectingBetIdx].price;uiUtils.playSound(soundName,1)}},_selectPos:function(idx){this._selectingBetIdx=idx,this.getChildByName("selected_halo").pos(betPricePos[idx].x,betPricePos[idx].y)},_doubleBetDown:function(){this._enabled&&this.runCommand("double_putchip")},_repeatBetDown:function(){this._enabled&&this.runCommand("repeat_putchip")},confirmBet:function(){this._enabled&&this.publish("game_baccarat.command.confirmBet")},cancelBet:function(btn){this._enabled&&this.publish("game_baccarat.command.cancelBet")},setChooseLimit:function(data){if(this.chipArray=data,this.check(),this._enabled)for(index=0;index<5;index++)this.getChildByName("chip_"+index).gray=!1;for(var index=0;index<5;index++)this.getChildByName("chip_"+index).setSkinImage("assets/games/baccarat/tex/chips/chip"+(this.chipArray[index].index+1)+".png"),1==this._array[index]||(this.getChildByName("chip_"+index).gray=!0);this._selectPos(0)}})}),gbx.define("game/baccarat/parts/card",["comm/base/poker_card"],function(PokerCard){var Card=PokerCard.extend({set cardValue(value){if(void 0!=value&&value!=this._value){var color=Math.ceil(value/13),point=(value-1)%13+1;this._setCardValue(value,point,color)}},get cardValue(){return this._value}});return Card.getPoint=function(value){return(value-1)%13+1},Card}),gbx.define("game/baccarat/parts/card_mi",["game/baccarat/parts/card","gbx/render/display/sprite","gbx/render/tween"],function(Card,Sprite,Tween){return Card.extend({init:function(){this._super(),this._dir="v",this._dirLock=!1,this._complete=!1,this._isToPlayer=!1,this._mouseDownPos=null,this._lastProgress=0,this._fixedProgress=0,this._backSp.alpha=0,this._faceSp.alpha=0;var mask=new Sprite;mask.size(2e3,2e3),mask.pivot(1e3,2e3),mask.pos(-106.5,148),mask.name="mask",mask.graphics.drawRect(0,0,2e3,2e3,"#000000");var maskContainer=new Sprite;maskContainer.size(213,296),maskContainer.pos(106.5,148),maskContainer.pivotToCenter(),maskContainer.mask=mask,maskContainer.name="container",this.addChild(maskContainer);var back=new Sprite;back.setImage("assets/major/card/cardback.png"),back.pivotToCenter(),back.pos(106.5,148),back.name="back",maskContainer.addChild(back);var face=new Sprite;face.setImage("assets/major/card/cardback.png"),face.pos(0,0),face.name="face",maskContainer.addChild(face);var faceHide=new Sprite;faceHide.setImage("assets/major/card/faceHide.png"),faceHide.pos(0,0),face.addChild(faceHide)},set cardValue(value){if(this.reset(),void 0!=value&&value!=this._value){var color=Math.ceil(value/13),point=(value-1)%13+1;this._setCardValue(value,point,color),this._setMiFace(point,color)}},_setMiFace:function(point,color){var imgSrc="assets/major/card/"+point+"_"+color+".png";this.getChildByName("container","face").setImage(imgSrc)},setDirection:function(direction,rotate){this._dir=direction;var face=this.getChildByName("container","face"),mask=this.getChildByName("container").mask;"h"===direction?(rotate&&(this.rotation=90),face.pos(213,296),face.pivot(0,296),face.rotation=0,mask.graphics.clear(),mask.pos(106.5,148),mask.rotation=0,mask.size(2e3,2e3),mask.pivot(2e3,1e3),mask.graphics.drawRect(0,0,2e3,2e3,"#000000")):"v"===direction&&(rotate&&(this.rotation=0),face.pos(0,296),face.pivot(0,0),face.rotation=0,mask.graphics.clear(),mask.pos(-106.5,148),mask.rotation=0,mask.size(2e3,2e3),mask.pivot(1e3,2e3),mask.graphics.drawRect(0,0,2e3,2e3,"#000000"))},setDirectionEx:function(direction){this._dir!==direction&&this.setDirection(direction,!0)},setLock:function(v){this._dirLock=v},getLock:function(){return this._dirLock},setMouseDownPos:function(v){this._mouseDownPos=v,null!=v&&(this._fixedProgress=this._lastProgress)},getMouseDownPos:function(){return this._mouseDownPos},isComplete:function(){return this._complete},setToPlayer:function(v){this._isToPlayer=v},isToPlayer:function(){return this._isToPlayer},flipProcess:function(progress,radian){if(this._complete)return null;progress+=this._fixedProgress;var angle=180/Math.PI*radian,face=this.getChildByName("container","face"),mask=this.getChildByName("container").mask;if(face.visible=!0,mask.rotation=angle,face.rotation=2*angle,"h"===this._dir){mask.x=106.5-progress;var dy=progress+Math.cos(2*radian)*progress,dx=Math.sin(2*radian)*progress;face.x=213-dy,face.y=296-dx,dy>255.6&&this.finishMiFun(!1),dx>355.2&&this.finishMiFun(!1)}else{mask.y=148-progress;var dy=progress+Math.cos(2*radian)*progress,dx=Math.sin(2*radian)*progress;face.x=0+dx,face.y=296-dy,dy>355.2&&this.finishMiFun(!1),dx>255.6&&this.finishMiFun(!1)}return this._lastProgress=progress,[progress,radian]},realMove:function(deltaX,deltaY){deltaY>=0&&(deltaY=0);var PI2=.5*Math.PI,PIA=Math.PI/3,radian=0;deltaX>0&&(radian=PI2-(radian=Math.atan(-deltaY/deltaX))),radian=radian>PIA?PIA:radian;var delta=Math.sqrt(deltaY*deltaY+deltaX*deltaX),progress=Math.ceil(.4*delta);return this.flipProcess(progress,radian)},finishMiFun:function(isTimeOut){return this._complete=!0,this._backSp.alpha=1,this._faceSp.alpha=1,this.getChildByName("container").visible=!1,this._isToPlayer?(this.flipToFace(),isTimeOut||this.publish("game_baccarat.player.lookOneCardEnd",this.name)):isTimeOut?this.flipToFace1():this.flipToFace1(this,function(){this.publish("game_baccarat.player.lookOneCardEnd",this.name)}),!1},flipToFace:function(context,endCallback){this._backSp.visible=!1,this._faceSp.visible=!0},flipToFace1:function(context,endCallback){this._backSp.visible=!0,this._faceSp.visible=!1,this.horizonFlip(1,200,context,endCallback)},flyToWithTimeMI:function(x,y,scaleFrom,scaleTo,rotationFrom,rotationTo,time){this.setScale(scaleFrom),this._scale=scaleTo,null!=rotationFrom&&null!=rotationTo?(this.rotation=rotationFrom,this.tweenTo({x:x,y:y,scaleX:scaleTo,scaleY:scaleTo,rotation:rotationTo},time,Tween.TimingFunction.sineOut,null,null)):this.tweenTo({x:x,y:y,scaleX:scaleTo,scaleY:scaleTo},time,Tween.TimingFunction.sineOut,null,null)},reset:function(){this.getChildByName("container").visible=!0,this.getChildByName("container","face").visible=!1,this._backSp.alpha=0,this._faceSp.alpha=0,this._dirLock=!1,this._complete=!1,this._isToPlayer=!1,this._mouseDownPos=null,this._lastProgress=0,this._fixedProgress=0},hideContainer:function(){this.getChildByName("container").visible=!1,this._backSp.alpha=1,this._faceSp.alpha=1}})}),gbx.define("game/baccarat/parts/card_place",["gbx/render/display/sprite","gbx/render/display/text","game/baccarat/parts/card","comm/helper/sound_mgr","comm/helper/room_mgr","comm/helper/conf_mgr","comm/ui/ui_utils"],function(Sprite,Text,Card,soundMgr,roomMgr,confMgr,uiUtils){var startPos=[224,-16],endPos=[-208,0],tarPosX=[42,108,186],smallPointX={x:160,y:8};return Sprite.extend({init:function(param){this._super(),this.cardData;for(var i=1;i<4;i++){var card=new Card;card.pivotToCenter(),card.pos(30*(i-1),48),card.setScale(.3),card.name="card"+i,card.visible=!1,this.addChild(card)}var pointBg=uiUtils.createSprite("assets/games/baccarat/tex/pointBG.png","point"),text=uiUtils.createSimpleText("0","text");text.pos(-2,12),text.fontSize=24,text.color="#000000",text.width=50,text.align="center",text.bold=!0,pointBg.scale(.7),pointBg.addChild(text),pointBg.pivotToCenter(),pointBg.visible=!1,this.addChild(pointBg),pointBg.pos(-smallPointX.x,smallPointX.y),-1!=param.indexOf("bank")&&pointBg.pos(smallPointX.x,smallPointX.y)},_simpGetPoint:function(){for(var cardValue=0,i=0;i<arguments.length;i++)cardValue+=Math.min(10,Card.getPoint(arguments[i]));return cardValue%10},sendCard:function(cardNum,doAnimation,car1,car2,car3){this.setCardData(car1,car2,car3);var card1=this.getChildByName("card1"),card2=this.getChildByName("card2"),card3=this.getChildByName("card3"),point=this.getChildByName("point"),dir=-1;-1!=this.name.indexOf("bank")&&(dir=-dir),card1.cardValue=car1,card1.pivotToCenter(),card2.cardValue=car2,card2.pivotToCenter();var who="",fixIndex=0;if("farmer"==(who=-1!=this.name.indexOf("bank")?"banker":"farmer")&&(fixIndex=1),doAnimation){card1.showBack(),card1.pos(startPos[0],startPos[1]),card1.visible=!0,this.parent.minusElapseCardCount();uiUtils.playSound(who,1),soundMgr.playSE("assets/games/baccarat/se/sendcard.mp3");pointValue=this._simpGetPoint(car1);card1.flyToAndScaleWithTime(tarPosX[(0+fixIndex)%2]*dir,48,0,.3,300,this,function(){card1.flipToFace(),point.visible=!0,point.getChildByName("text").text=pointValue}),this.timerOnce(1800,this,function(){card2.showBack(),card2.pos(startPos[0],startPos[1]),card2.visible=!0,this.parent.minusElapseCardCount(),uiUtils.playSound(who,1),soundMgr.playSE("assets/games/baccarat/se/sendcard.mp3"),pointValue=this._simpGetPoint(car1,car2),card2.flyToAndScaleWithTime(tarPosX[(1+fixIndex)%2]*dir,48,0,.3,300,this,function(){card2.flipToFace(),point.visible=!0,point.getChildByName("text").text=pointValue})});var card3DelayTime=3600;-1!=this.name.indexOf("bank")&&5==cardNum&&(card3DelayTime=2700);confMgr.read("games/baccarat/dat/definition.json");this.timerOnce(card3DelayTime,this,function(){if(car3){if(void 0==roomMgr.getChoose())return;var soundName="";soundName=-1!=this.name.indexOf("bank")?"zhui_jia_banker":"zhui_jia_farmer",uiUtils.playSound(soundName,1)}}),this.timerOnce(card3DelayTime,this,function(){car3&&(card3.cardValue=car3,card3.pivotToCenter(),card3.pos(startPos[0],startPos[1]),card3.showBack(),card3.visible=!0,card3.rotation=90,this.parent.minusElapseCardCount(),pointValue=this._simpGetPoint(car1,car2,car3),soundMgr.playSE("assets/games/baccarat/se/sendcard.mp3"),card3.flyToAndScaleWithTime(tarPosX[2]*dir,62,0,.3,300,this,function(){card3.flipToFace(),point.visible=!0,point.getChildByName("text").text=pointValue}))})}else{this.parent.minusElapseCardCount(),card1.visible=!0,card1.pos(tarPosX[(0+fixIndex)%2]*dir,48),card1.showFace(),this.parent.minusElapseCardCount(),card2.visible=!0,card2.pos(tarPosX[(1+fixIndex)%2]*dir,48),card2.showFace();var pointValue=this._simpGetPoint(car1,car2);car3&&(this.parent.minusElapseCardCount(),card3.cardValue=car3,card3.pivotToCenter(),card3.pos(tarPosX[2]*dir,62),card3.visible=!0,card3.rotation=90,card3.showFace(),pointValue=this._simpGetPoint(car1,car2,car3)),point.visible=!0,point.getChildByName("text").text=pointValue}},setCardData:function(car1,car2,car3){this.cardData=[],this.cardData.push(car1),this.cardData.push(car2),car3&&this.cardData.push(car3)},getCardData:function(){return this.cardData},getValue:function(){return 2==this.cardData.length?this._simpGetPoint(this.cardData[0],this.cardData[1]):3==this.cardData.length?this._simpGetPoint(this.cardData[0],this.cardData[1],this.cardData[2]):0},clear:function(){this.getChildByName("card1").visible=!1,this.getChildByName("card2").visible=!1,this.getChildByName("card3").visible=!1,this.getChildByName("point").visible=!1},recycleCard:function(){var card1=this.getChildByName("card1"),card2=this.getChildByName("card2"),card3=this.getChildByName("card3");this.getChildByName("point").visible=!1,card1.visible&&card1.flyToAndScaleWithTime(0,48,.3,.3,600,this,function(){this.timerOnce(500,this,function(){card1.flyToAndScaleWithTime(endPos[0],endPos[1],.3,0,400,this)})}),card2.visible&&card2.flyToAndScaleWithTime(0,48,.3,.3,600,this,function(){this.timerOnce(500,this,function(){card2.flyToAndScaleWithTime(endPos[0],endPos[1],.3,0,400,this)})}),card3.visible&&(card3.rotation=0,card3.flyToAndScaleWithTime(0,48,.3,.3,600,this,function(){this.timerOnce(500,this,function(){card3.flyToAndScaleWithTime(endPos[0],endPos[1],.3,0,400,this)})}))}})}),gbx.define("game/baccarat/parts/card_place_mi",["conf/system","gbx/net/messagecommand","gbx/net/errorcode","gbx/net/errorcode_des","gbx/net/connector","comm/base/game_ui","gbx/render/display/sprite","gbx/render/display/text","gbx/render/ui/button","comm/ui/sound_button","game/baccarat/parts/card","game/baccarat/parts/card_mi","comm/helper/sound_mgr","comm/helper/conf_mgr","conf/ui_locallization","comm/ui/ui_utils"],function(sys,CMD,ERROR_CODE,ERROR_CODE_DES,server,BaseUI,Sprite,Text,BaseButton,Button,Card,CardMi,soundMgr,confMgr,uiLocallization,uiUtils){var startPos=[224,-16],endPos=[-208,0],tarPosX=[42,108,75],tarPosY=[14,14,92],baseSeatPos=[{x:-149,y:125},{x:-149,y:270},{x:0,y:410},{x:149,y:270},{x:149,y:125}],seatPos=[],baseScale=.3,smallPointX={x:160,y:-20};return BaseUI.extend({init:function(){this._super(),this._playEnd=!0,this._centerCardFarmer=[],this._centerCardBanker=[],this._focusedCard=null,this._farmerPointArray=[],this._bankerPointArray=[],this._farmerSeatIdx=-1,this._bankerSeatIdx=-1,this._lookCardArr=null,this._lookCardSide=confMgr.definition.LOOKCARD_SIDE.NONE,this._leftLookCardTime=0,this._lastLookCardTime=null,this._lookCardEndName={},this._sendCardSteps=null,this._lookCardSideNum=0,this._step2Send2=!1;for(var Names=["farmer_","banker_"],i=0;i<2;i++){var pointBg=uiUtils.createSprite("assets/games/baccarat/tex/pointBG.png",Names[i]+"point"),text=uiUtils.createSimpleText("0","text");text.pos(-2,12),text.fontSize=24,text.color="#000000",text.width=50,text.align="center",text.bold=!0,pointBg.addChild(text),pointBg.pivotToCenter(),pointBg.visible=!1,pointBg.scale(.7),this.addChild(pointBg),smallPointX.x=-1*smallPointX.x,pointBg.pos(smallPointX.x,smallPointX.y)}seatPos=[];for(i=0;i<baseSeatPos.length;i++)seatPos.push(baseSeatPos[i]);var btn=new BaseButton;btn.pos(-sys.halfWidth,-130),btn.size(sys.width,sys.height),btn.on(this.EVENT.MOUSE_DOWN,this,this.onMouseDown),btn.on(this.EVENT.MOUSE_MOVE,this,this.onMouseMove),btn.on(this.EVENT.MOUSE_UP,this,this.onMouseUp),btn.visible=!1,btn.name="boundryArea",this.addChild(btn);for(i=1;i<7;i++){var card_mi=new CardMi;card_mi.pivotToCenter(),card_mi.pos(0,10),card_mi.scale(baseScale),card_mi.zOrder=1,card_mi.name="card_center_"+i,i<4?this._centerCardFarmer.push(card_mi):this._centerCardBanker.push(card_mi),card_mi.visible=!1,this.addChild(card_mi)}for(var btnX=[baseSeatPos[2].x-160,baseSeatPos[2].x+160,baseSeatPos[2].x],btnY=baseSeatPos[2].y,i=1;i<=3;i++){(btn=uiUtils.createButton("assets/games/baccarat/tex/mi_circle.png",1,"spin_btn_"+i)).alpha=.9,btn.zOrder=2,btn.pos(btnX[i-1],btnY),btn.pivotToCenter(),btn.visible=!1,btn.setClickHandler(this,this.onClickSpin,i),this.addChild(btn);var sp=new Sprite;sp.setImage("assets/games/baccarat/tex/mi_bian.png"),sp.name="under_bian_horizonl_"+i,sp.alpha=.9,sp.zOrder=2,sp.pos(btnX[i-1],btnY+85),sp.pivotToCenter(),sp.visible=!1,this.addChild(sp),(sp=new Sprite).setImage("assets/games/baccarat/tex/mi_bian2.png"),sp.name="under_bian_verticle_"+i,sp.alpha=.9,sp.zOrder=2,sp.pos(btnX[i-1],btnY+126),sp.pivotToCenter(),sp.visible=!1,this.addChild(sp)}var flipBtn=uiUtils.createButton("assets/games/baccarat/tex/flip_btn_farmer.png",2,"flipBtn"),flipBtn_text=uiUtils.createSimpleText("0","text");flipBtn_text.width=50,flipBtn_text.pos(18,40),flipBtn_text.fontSize=25;var filter=new laya.filters.GlowFilter("#222222",1,1,1);flipBtn_text.filters=[filter],flipBtn_text.align="center",flipBtn.addChild(flipBtn_text),flipBtn.pos(70,175),flipBtn.visible=!1,flipBtn.zOrder=3,flipBtn.setClickHandler(this,this.onClickFlipBtn),this.addChild(flipBtn);var topFlipBtn=uiUtils.createButton("assets/games/baccarat/tex/skip_btn_banker.png",2,"topFlipBtn");topFlipBtn.name="topFlipBtn",topFlipBtn.pivotToCenter(),topFlipBtn.zOrder=2,topFlipBtn.visible=!1,topFlipBtn.pos(-72,90),topFlipBtn.setClickHandler(this,this.onClickTopFlipBtn),this.addChild(topFlipBtn),this.subscribe("game_baccarat.play.update_card_progress",this,this.eventUpdateCardProgress),this.subscribe("game_baccarat.play.update_card_direction",this,this.eventUpdateCardDirection),this.subscribe("game_baccarat.play.card_timeout",this,this.eventCardTimeOut),this.subscribe("game_baccarat.player.lookOneCardEnd",this,this.eventLookOneCardEnd),this.timerLoop(1e3,this,function(){var label=this.getChildByName("flipBtn","text");this._leftLookCardTime-=1,this._leftLookCardTime=this._leftLookCardTime<0?0:this._leftLookCardTime;var nCount=this._leftLookCardTime;label.text=nCount>=10?nCount:"0"+nCount})},_getCardIndexByCardName:function(name){switch(name){case"card_center_1":return 0;case"card_center_2":return 2;case"card_center_3":return 4;case"card_center_4":return 1;case"card_center_5":return 3;case"card_center_6":return 5;default:return 0}},_getCardByCardIndex:function(cardIndex){switch(cardIndex){case 0:return this._centerCardFarmer[0];case 1:return this._centerCardBanker[0];case 2:return this._centerCardFarmer[1];case 3:return this._centerCardBanker[1];case 4:return this._centerCardFarmer[2];case 5:return this._centerCardBanker[2];default:return null}},_getButtonIndexByCardName:function(cardName){switch(cardName){case"card_center_1":case"card_center_4":return 1;case"card_center_2":case"card_center_5":return 2;case"card_center_3":case"card_center_6":return 3;default:return 0}},_simpGetPoint:function(){for(var cardValue=0,i=0;i<arguments.length;i++)cardValue+=Math.min(10,Card.getPoint(arguments[i]));return cardValue%10},reorderSeats:function(seatArr){for(var newSeatPos=[],i=0;i<baseSeatPos.length;i++)newSeatPos.push(null);for(i=0;i<seatArr.length;i++)newSeatPos[seatArr[i]]=baseSeatPos[i];seatPos=newSeatPos},set BoundArea(v){this.getChildByName("boundryArea").visible=v},get BoundArea(){return this.getChildByName("boundryArea")},getFarmerPointArr:function(){return this._farmerPointArray},getBankerPointArr:function(){return this._bankerPointArray},getFarmerValue:function(){return 2==this._farmerPointArray.length?this._simpGetPoint(this._farmerPointArray[0],this._farmerPointArray[1]):3==this._farmerPointArray.length?this._simpGetPoint(this._farmerPointArray[0],this._farmerPointArray[1],this._farmerPointArray[2]):void 0},getBankerValue:function(){return 2==this._bankerPointArray.length?this._simpGetPoint(this._bankerPointArray[0],this._bankerPointArray[1]):3==this._bankerPointArray.length?this._simpGetPoint(this._bankerPointArray[0],this._bankerPointArray[1],this._bankerPointArray[2]):void 0},sendCardProcess:function(step,radian,cardIndex){var sendData=gtea.protobuf.encode("BaccaratLookCardJM",{sendCardStep:this._sendCardSteps[0],step:step,radian:radian,cardIndex:cardIndex});server.sendToRoom(CMD.BaccaratLookCardJM,sendData)},sendCardDirection:function(cardIndex,direction){var sendData=gtea.protobuf.encode("BaccaratChangeDirJM",{sendCardStep:this._sendCardSteps[0],cardIndex:cardIndex,dir:direction});server.sendToRoom(CMD.BaccaratChangeDirJM,sendData)},sendOpenCard:function(){var sendData=gtea.protobuf.encode("BaccaratOpenCardJM",{sendCardStep:this._sendCardSteps[0]});server.sendToRoom(CMD.BaccaratOpenCardJM,sendData)},sendOpenCardWithStep:function(step){var sendData=gtea.protobuf.encode("BaccaratOpenCardJM",{sendCardStep:step});server.sendToRoom(CMD.BaccaratOpenCardJM,sendData)},eventUpdateCardProgress:function(step,radian,cardIndex,lookCardDir,isMyself){var card=this._getCardByCardIndex(cardIndex);isMyself||card.flipProcess(step,radian),this._lookCardSide!=confMgr.definition.LOOKCARD_SIDE.NONE&&this._disableButtonByCardName(card.name)},eventUpdateCardDirection:function(step,cardIndex,lookCardDir){var card=this._getCardByCardIndex(cardIndex);if(0==lookCardDir?card.setDirection("v",!0):card.setDirection("h",!0),this._lookCardSide!=confMgr.definition.LOOKCARD_SIDE.NONE){var index=this._getButtonIndexByCardName(card.name);if(0!=index){if(this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.FARMER&&(1==cardIndex||3==cardIndex||5==cardIndex))return;if(this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.BANKER&&(0==cardIndex||2==cardIndex||4==cardIndex))return;0==lookCardDir?this.enableVertSetting(index):this.enableHoriSetting(index)}}},eventCardTimeOut:function(step){step==this._sendCardSteps[0]?(this.disableFaceButtons(1,2,3),this.disableSpinBtns(1,2,3),this.disableFlipBtn(),this.disableTopFlipBtn(),this.BoundArea=!1,this._focusedCard=null,this.publish("game_baccarat.play.setSoundPanel",!1),this.publish("game_baccarat.seat.stopMaskClip",-1,!0)):this.disableTopFlipBtn();var farmer_point=this.getChildByName("farmer_point"),banker_point=this.getChildByName("banker_point");switch(step){case confMgr.definition.BaccaratSendCardStepJM.FarmerFirst:var isBanker=!1,card1=this._centerCardFarmer[0],card2=this._centerCardFarmer[1];-1==this._farmerSeatIdx&&-1!=this._bankerSeatIdx&&(isBanker=!0,card1=this._centerCardBanker[0],card2=this._centerCardBanker[1]),card1.isComplete()||card1.finishMiFun(!0),card2.isComplete()||card2.finishMiFun(!0),card1.isToPlayer()&&(card1.setDirectionEx("v"),card2.setDirectionEx("v"),this.timerOnce(400,this,function(){this.backToCenter(isBanker,!1)})),this.timerOnce(400,this,function(){isBanker?(this.publish("game_baccarat.play.flip_top_card_jm",!0,!1,this._bankerPointArray),banker_point.visible=!0,banker_point.getChildByName("text").text=this._simpGetPoint(this._bankerPointArray[0],this._bankerPointArray[1])):(this.publish("game_baccarat.play.flip_top_card_jm",!1,!1,this._farmerPointArray),farmer_point.visible=!0,farmer_point.getChildByName("text").text=this._simpGetPoint(this._farmerPointArray[0],this._farmerPointArray[1])),this.parent.minusElapseCardCount(),this.parent.minusElapseCardCount()});break;case confMgr.definition.BaccaratSendCardStepJM.BankerFirst:var isBanker=!0,card1=this._centerCardBanker[0],card2=this._centerCardBanker[1];-1==this._farmerSeatIdx&&-1!=this._bankerSeatIdx&&(isBanker=!1,card1=this._centerCardFarmer[0],card2=this._centerCardFarmer[1]),card1.isComplete()||card1.finishMiFun(!0),card2.isComplete()||card2.finishMiFun(!0),card1.isToPlayer()&&(card1.setDirectionEx("v"),card2.setDirectionEx("v"),this.timerOnce(400,this,function(){this.backToCenter(isBanker,!1)})),this.timerOnce(400,this,function(){isBanker?(this.publish("game_baccarat.play.flip_top_card_jm",!0,!1,this._bankerPointArray),banker_point.visible=!0,banker_point.getChildByName("text").text=this._simpGetPoint(this._bankerPointArray[0],this._bankerPointArray[1])):(this.publish("game_baccarat.play.flip_top_card_jm",!1,!1,this._farmerPointArray),farmer_point.visible=!0,farmer_point.getChildByName("text").text=this._simpGetPoint(this._farmerPointArray[0],this._farmerPointArray[1])),this.parent.minusElapseCardCount(),this.parent.minusElapseCardCount()});break;case confMgr.definition.BaccaratSendCardStepJM.FarmerSecond:this._centerCardFarmer[2].isComplete()||this._centerCardFarmer[2].finishMiFun(!0),this._centerCardFarmer[2].isToPlayer()&&this.timerOnce(400,this,function(){this.backToCenter(!1,!0)}),this.timerOnce(400,this,function(){this.publish("game_baccarat.play.flip_top_card_jm",!1,!0,this._farmerPointArray),this.parent.minusElapseCardCount(),farmer_point.visible=!0,farmer_point.getChildByName("text").text=this._simpGetPoint(this._farmerPointArray[0],this._farmerPointArray[1],this._farmerPointArray[2])});break;case confMgr.definition.BaccaratSendCardStepJM.BankerSecond:this._centerCardBanker[2].isComplete()||this._centerCardBanker[2].finishMiFun(!0),this._centerCardBanker[2].isToPlayer()&&this.timerOnce(400,this,function(){this.backToCenter(!0,!0)}),this.timerOnce(400,this,function(){this.publish("game_baccarat.play.flip_top_card_jm",!0,!0,this._bankerPointArray),this.parent.minusElapseCardCount(),banker_point.visible=!0,banker_point.getChildByName("text").text=this._simpGetPoint(this._bankerPointArray[0],this._bankerPointArray[1],this._bankerPointArray[2])});break;case confMgr.definition.BaccaratSendCardStepJM.Finish:}},eventLookOneCardEnd:function(cardName){switch(this._lookCardEndName[cardName]=1,cardName){case"card_center_1":if(this._lookCardSide!=confMgr.definition.LOOKCARD_SIDE.FARMER)break;"card_center_2"in this._lookCardEndName&&this.sendOpenCard();break;case"card_center_2":if(this._lookCardSide!=confMgr.definition.LOOKCARD_SIDE.FARMER)break;"card_center_1"in this._lookCardEndName&&this.sendOpenCard();break;case"card_center_3":if(this._lookCardSide!=confMgr.definition.LOOKCARD_SIDE.FARMER)break;this.sendOpenCard();break;case"card_center_4":if(this._lookCardSide!=confMgr.definition.LOOKCARD_SIDE.BANKER)break;"card_center_5"in this._lookCardEndName&&this.sendOpenCard();break;case"card_center_5":if(this._lookCardSide!=confMgr.definition.LOOKCARD_SIDE.BANKER)break;"card_center_4"in this._lookCardEndName&&this.sendOpenCard();break;case"card_center_6":if(this._lookCardSide!=confMgr.definition.LOOKCARD_SIDE.BANKER)break;this.sendOpenCard()}},_getFocusedCard:function(){function _checkPos(){return Laya.stage.mouseX<sys.halfWidth?0:1}switch(this._sendCardSteps[0]){case confMgr.definition.BaccaratSendCardStepJM.FarmerFirst:ret=_checkPos();return this._centerCardFarmer[ret];case confMgr.definition.BaccaratSendCardStepJM.FarmerSecond:return this._centerCardFarmer[2];case confMgr.definition.BaccaratSendCardStepJM.BankerFirst:var ret=_checkPos();return this._centerCardBanker[ret];case confMgr.definition.BaccaratSendCardStepJM.BankerSecond:return this._centerCardBanker[2];default:return null}},_chooseFocusedCard:function(){switch(this._sendCardSteps[0]){case confMgr.definition.BaccaratSendCardStepJM.FarmerFirst:case confMgr.definition.BaccaratSendCardStepJM.BankerFirst:var ret=function(){return Laya.stage.mouseX<sys.halfWidth?0:1}();this._focusedCard=this._lookCardArr[ret];break;case confMgr.definition.BaccaratSendCardStepJM.FarmerSecond:case confMgr.definition.BaccaratSendCardStepJM.BankerSecond:this._focusedCard=this._lookCardArr[2];break;default:this._focusedCard=null}return this._focusedCard},_getMousePos:function(){var pos={};return pos.x=Laya.stage.mouseX,pos.y=Laya.stage.mouseY,pos},onMouseDown:function(event){var card=this._chooseFocusedCard();card&&(card.setLock(!0),card.setMouseDownPos(this._getMousePos()),this._lookCardSide!=confMgr.definition.LOOKCARD_SIDE.NONE&&this._disableButtonByCardName(card.name))},onMouseMove:function(event){var card=this._focusedCard;if(card){var mouseDownPos=card.getMouseDownPos(),curPos=this._getMousePos();null==mouseDownPos&&(mouseDownPos=curPos,card.setMouseDownPos(curPos));var deltaY=curPos.y-mouseDownPos.y,deltaX=curPos.x-mouseDownPos.x,canSend=!1,curTime=(new Date).getTime();null==this._lastLookCardTime?canSend=!0:curTime-this._lastLookCardTime>150&&(canSend=!0);var result=card.realMove(deltaX,deltaY);canSend&&null!=result&&(this.sendCardProcess(result[0],result[1],this._getCardIndexByCardName(card.name)),this._lastLookCardTime=curTime)}},onMouseUp:function(event){null!=this._focusedCard&&(this._focusedCard.setMouseDownPos(null),this._focusedCard=null)},enableHoriSetting:function(){for(var i=0;i<arguments.length;i++)this.getChildByName("under_bian_horizonl_"+arguments[i]).visible=!0,this.getChildByName("under_bian_verticle_"+arguments[i]).visible=!1},enableVertSetting:function(){for(var i=0;i<arguments.length;i++)this.getChildByName("under_bian_horizonl_"+arguments[i]).visible=!1,this.getChildByName("under_bian_verticle_"+arguments[i]).visible=!0},disableFaceButtons:function(){for(var i=0;i<arguments.length;i++)this.getChildByName("under_bian_horizonl_"+arguments[i]).visible=!1,this.getChildByName("under_bian_verticle_"+arguments[i]).visible=!1},enableSpinBtns:function(){for(var i=0;i<arguments.length;i++)this.getChildByName("spin_btn_"+arguments[i]).visible=!0},disableSpinBtns:function(){for(var i=0;i<arguments.length;i++)this.getChildByName("spin_btn_"+arguments[i]).visible=!1},onClickSpin:function(btn,index){var card=this._lookCardArr[index-1];card.getLock()||(0==card.rotation?this.sendCardDirection(this._getCardIndexByCardName(card.name),90):this.sendCardDirection(this._getCardIndexByCardName(card.name),0))},enableFlipBtn:function(time){var flipBtn=this.getChildByName("flipBtn");if(this.BoundArea=time>0,this._lookCardSide!=confMgr.definition.LOOKCARD_SIDE.NONE){flipBtn.visible=!0,this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.FARMER?flipBtn.setSkinImage("assets/games/baccarat/tex/flip_btn_farmer.png"):this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.BANKER&&flipBtn.setSkinImage("assets/games/baccarat/tex/flip_btn_banker.png");var label=this.getChildByName("flipBtn","text");0==time&&(flipBtn.visible=!1),label.text=time>=10?time:"0"+time,this._leftLookCardTime=time}},disableFlipBtn:function(){this.getChildByName("flipBtn").visible=!1,this._leftLookCardTime=0},onClickFlipBtn:function(btn){this.sendOpenCard()},enableTopFlipBtn:function(isFarmer){var btn=this.getChildByName("topFlipBtn");btn.visible=!0,isFarmer?(btn.x=-72,btn.setSkinImage("assets/games/baccarat/tex/skip_btn_farmer.png")):(btn.x=72,btn.setSkinImage("assets/games/baccarat/tex/skip_btn_banker.png"))},disableTopFlipBtn:function(){this.getChildByName("topFlipBtn").visible=!1},onClickTopFlipBtn:function(btn){this.sendOpenCardWithStep(this._sendCardSteps[1])},_disableButtonByCardName:function(cardName){var index=this._getButtonIndexByCardName(cardName);0!=index&&(this.disableSpinBtns(index),this.disableFaceButtons(index))},_setLookCard:function(myLookSide){this._lookCardArr=null,this._lookCardSide=myLookSide,myLookSide==confMgr.definition.LOOKCARD_SIDE.FARMER?this._lookCardArr=this._centerCardFarmer:myLookSide==confMgr.definition.LOOKCARD_SIDE.BANKER&&(this._lookCardArr=this._centerCardBanker)},_setCenterCardDirAndProgress:function(card,direction,step,radian){0==direction?card.setDirection("v",!0):card.setDirection("h",!0),card.setToPlayer(!0),card.setScale(1),card.flipProcess(step,radian)},_moveCenterCard:function(card,isToPlayer,fromPos,toPos,fromScale,toScale,fromRotation,toRotation,time){card.visible=!0,card.setToPlayer(isToPlayer);var tarX=toPos[0],tarY=toPos[1],curX=card.x,curY=card.y;Math.pow(tarX-curX,2)+Math.pow(tarY-curY,2)<.01&&(time=0),0==time?(card.pos(toPos[0],toPos[1]),card.setScale(toScale),null!=toRotation&&(card.rotation=toRotation)):(null!=fromPos&&card.pos(fromPos[0],fromPos[1]),card.flyToWithTimeMI(toPos[0],toPos[1],fromScale,toScale,fromRotation,toRotation,time))},_initSendCardCenterWithAnimation:function(){for(i=0;i<3;i++){dir="v";if(2==i){if(this._farmerPointArray.length<=2)continue;dir="h"}(card=this._centerCardFarmer[i]).cardValue=this._farmerPointArray[i],card.reset(),card.setScale(baseScale),card.setDirection(dir,!0),card.showBack(),card.visible=!1}for(var i=0;i<3;i++){var dir="v";if(2==i){if(this._bankerPointArray.length<=2)continue;dir="h"}var card=this._centerCardBanker[i];card.cardValue=this._bankerPointArray[i],card.reset(),card.setScale(baseScale),card.setDirection(dir,!0),card.showBack(),card.visible=!1}},_sendCardCenterWithAnimation:function(farmerArray,bankerArray,step,farmerSeatIdx,bankerSeatIdx,leftTime){switch(step){case confMgr.definition.BaccaratSendCardStepJM.FarmerFirst:this.publish("game_baccarat.play.set_top_card_jm",!1,0,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,0,bankerArray),this._initSendCardCenterWithAnimation(),soundMgr.playSE("assets/games/baccarat/se/sendcard.mp3"),this._moveCenterCard(this._centerCardFarmer[0],!1,startPos,[-1*tarPosX[1],tarPosY[1]],0,baseScale,null,null,200),this.timerOnce(800,this,function(){soundMgr.playSE("assets/games/baccarat/se/sendcard.mp3"),this._moveCenterCard(this._centerCardFarmer[1],!1,startPos,[-1*tarPosX[0],tarPosY[0]],0,baseScale,null,null,200)}),this.timerOnce(400,this,function(){soundMgr.playSE("assets/games/baccarat/se/sendcard.mp3"),this._moveCenterCard(this._centerCardBanker[0],!1,startPos,[tarPosX[0],tarPosY[0]],0,baseScale,null,null,200)}),this.timerOnce(1200,this,function(){soundMgr.playSE("assets/games/baccarat/se/sendcard.mp3"),this._moveCenterCard(this._centerCardBanker[1],!1,startPos,[tarPosX[1],tarPosY[1]],0,baseScale,null,null,200)});var card1=null,card2=null,seatIdx=-1,isMe=!1;-1!=farmerSeatIdx?(card1=this._centerCardFarmer[0],card2=this._centerCardFarmer[1],seatIdx=farmerSeatIdx,this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.FARMER&&(isMe=!0)):-1!=bankerSeatIdx&&(card1=this._centerCardBanker[0],card2=this._centerCardBanker[1],seatIdx=bankerSeatIdx,this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.BANKER&&(isMe=!0)),-1!=seatIdx&&(this.timerOnce(1200,this,function(){card1.setDirection("h",!1),card2.setDirection("h",!1);var pos=seatPos[seatIdx];isMe?(this._moveCenterCard(card1,!0,null,[pos.x-160,pos.y],baseScale,1,0,90,400),this._moveCenterCard(card2,!0,null,[pos.x+160,pos.y],baseScale,1,0,90,400)):(this._moveCenterCard(card1,!0,null,[pos.x-48,pos.y],baseScale,.32,0,90,400),this._moveCenterCard(card2,!0,null,[pos.x+48,pos.y],baseScale,.32,0,90,400))}),isMe?this.timerOnce(1600,this,function(){this.enableSpinBtns(1,2),this.enableHoriSetting(1,2),this.enableFlipBtn(leftTime-2),1==this._lookCardSideNum&&(this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.FARMER?this.enableTopFlipBtn(!1):this.enableTopFlipBtn(!0))}):this.timerOnce(1600,this,function(){this.publish("game_baccarat.play.setSoundPanel",!0,step),this.publish("game_baccarat.seat.startMaskClip",seatIdx,leftTime-2)}));break;case confMgr.definition.BaccaratSendCardStepJM.BankerFirst:if(-1!=farmerSeatIdx&&-1!=bankerSeatIdx){this.publish("game_baccarat.play.set_top_card_jm",!1,1,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,0,bankerArray),this._centerCardBanker[0].setDirection("h",!1),this._centerCardBanker[1].setDirection("h",!1);pos=seatPos[bankerSeatIdx];this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.BANKER?(this._moveCenterCard(this._centerCardBanker[0],!0,null,[pos.x-160,pos.y],baseScale,1,0,90,400),this._moveCenterCard(this._centerCardBanker[1],!0,null,[pos.x+160,pos.y],baseScale,1,0,90,400)):(this._moveCenterCard(this._centerCardBanker[0],!0,null,[pos.x-48,pos.y],baseScale,.32,0,90,400),this._moveCenterCard(this._centerCardBanker[1],!0,null,[pos.x+48,pos.y],baseScale,.32,0,90,400)),this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.BANKER?this.timerOnce(400,this,function(){this.enableSpinBtns(1,2),this.enableHoriSetting(1,2),this.enableFlipBtn(leftTime-1)}):this.timerOnce(400,this,function(){this.publish("game_baccarat.play.setSoundPanel",!0,step),this.publish("game_baccarat.seat.startMaskClip",bankerSeatIdx,leftTime-1)})}break;case confMgr.definition.BaccaratSendCardStepJM.FarmerSecond:if(this._sendCardSteps[1]==confMgr.definition.BaccaratSendCardStepJM.Finish?(this.publish("game_baccarat.play.set_top_card_jm",!1,2,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,3,bankerArray)):this._step2Send2?(this.publish("game_baccarat.play.set_top_card_jm",!1,2,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,2,bankerArray),this._moveCenterCard(this._centerCardBanker[2],!1,startPos,[tarPosX[2],tarPosY[2]],0,baseScale,null,null,400),this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.FARMER&&this.timerOnce(400,this,this.enableTopFlipBtn,[!1])):(this.publish("game_baccarat.play.set_top_card_jm",!1,2,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,1,bankerArray)),soundMgr.playSE("assets/games/baccarat/se/sendcard.mp3"),uiUtils.playSound("farmer_need_more",1),this._centerCardFarmer[2].setDirection("h",!1),-1==farmerSeatIdx)this._moveCenterCard(this._centerCardFarmer[2],!1,startPos,[-1*tarPosX[2],tarPosY[2]],0,baseScale,null,null,200);else{pos=seatPos[farmerSeatIdx];this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.FARMER?this._moveCenterCard(this._centerCardFarmer[2],!0,startPos,[pos.x,pos.y],baseScale,1,null,null,400):this._moveCenterCard(this._centerCardFarmer[2],!0,startPos,[pos.x,pos.y],baseScale,.32,null,null,400),this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.FARMER?this.timerOnce(400,this,function(){this.enableSpinBtns(3),this.enableHoriSetting(3),this.enableFlipBtn(leftTime-1)}):this.timerOnce(400,this,function(){this.publish("game_baccarat.play.setSoundPanel",!0,step),this.publish("game_baccarat.seat.startMaskClip",farmerSeatIdx,leftTime-1)})}break;case confMgr.definition.BaccaratSendCardStepJM.BankerSecond:if(this._sendCardSteps[1]==confMgr.definition.BaccaratSendCardStepJM.Finish?(this.publish("game_baccarat.play.set_top_card_jm",!1,3,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,2,bankerArray)):this._step2Send2?(this.publish("game_baccarat.play.set_top_card_jm",!1,2,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,2,bankerArray),this._moveCenterCard(this._centerCardFarmer[2],!1,startPos,[-1*tarPosX[2],tarPosY[2]],0,baseScale,null,null,400),this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.BANKER&&this.timerOnce(400,this,this.enableTopFlipBtn,[!0])):(this.publish("game_baccarat.play.set_top_card_jm",!1,1,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,2,bankerArray)),soundMgr.playSE("assets/games/baccarat/se/sendcard.mp3"),uiUtils.playSound("banker_need_more",1),this._centerCardBanker[2].setDirection("h",!1),-1==bankerSeatIdx)this._moveCenterCard(this._centerCardBanker[2],!1,startPos,[tarPosX[2],tarPosY[2]],0,baseScale,null,null,200);else{var pos=seatPos[bankerSeatIdx];this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.BANKER?this._moveCenterCard(this._centerCardBanker[2],!0,startPos,[pos.x,pos.y],baseScale,1,null,null,400):this._moveCenterCard(this._centerCardBanker[2],!0,startPos,[pos.x,pos.y],baseScale,.32,null,null,400),this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.BANKER?this.timerOnce(400,this,function(){this.enableSpinBtns(3),this.enableHoriSetting(3),this.enableFlipBtn(leftTime-1)}):this.timerOnce(400,this,function(){this.publish("game_baccarat.play.setSoundPanel",!0,step),this.publish("game_baccarat.seat.startMaskClip",bankerSeatIdx,leftTime-1)})}break;case confMgr.definition.BaccaratSendCardStepJM.Finish:this._leftLookCardTime=0}},_initSendCardCenter:function(sideName,stage,showThird){function _setOneCard(card,value,x,y,showFace,dir,visible){card.cardValue=value,card.reset(),card.setScale(baseScale),showFace?(card.showFace(),card.hideContainer()):card.showBack(),card.pos(x,y),card.setDirection(dir,!0),card.visible=visible}var cardArray=this._centerCardFarmer,pointArray=this._farmerPointArray,dir=-1;"banker"===sideName&&(cardArray=this._centerCardBanker,pointArray=this._bankerPointArray,dir=1),cardArray[0].cardValue=pointArray[0],cardArray[1].cardValue=pointArray[1],3==pointArray.length&&(cardArray[2].cardValue=pointArray[2]);var fixIndex=0;"farmer"===sideName&&(fixIndex=1),0==stage?(_setOneCard(cardArray[0],pointArray[0],tarPosX[(0+fixIndex)%2]*dir,tarPosY[(0+fixIndex)%2],!1,"v",!0),_setOneCard(cardArray[1],pointArray[1],tarPosX[(1+fixIndex)%2]*dir,tarPosY[(1+fixIndex)%2],!1,"v",!0),pointArray.length>=3&&_setOneCard(cardArray[2],pointArray[2],tarPosX[2]*dir,tarPosY[2],!1,"h",!1)):1==stage?(_setOneCard(cardArray[0],pointArray[0],tarPosX[(0+fixIndex)%2]*dir,tarPosY[(0+fixIndex)%2],!0,"v",!0),_setOneCard(cardArray[1],pointArray[1],tarPosX[(1+fixIndex)%2]*dir,tarPosY[(1+fixIndex)%2],!0,"v",!0),pointArray.length>=3&&_setOneCard(cardArray[2],pointArray[2],tarPosX[2]*dir,tarPosY[2],!1,"h",!1)):2==stage?(_setOneCard(cardArray[0],pointArray[0],tarPosX[(0+fixIndex)%2]*dir,tarPosY[(0+fixIndex)%2],!0,"v",!0),_setOneCard(cardArray[1],pointArray[1],tarPosX[(1+fixIndex)%2]*dir,tarPosY[(1+fixIndex)%2],!0,"v",!0),pointArray.length>=3&&_setOneCard(cardArray[2],pointArray[2],tarPosX[2]*dir,tarPosY[2],!1,"h",showThird)):3==stage&&(_setOneCard(cardArray[0],pointArray[0],tarPosX[(0+fixIndex)%2]*dir,tarPosY[(0+fixIndex)%2],!0,"v",!0),_setOneCard(cardArray[1],pointArray[1],tarPosX[(1+fixIndex)%2]*dir,tarPosY[(1+fixIndex)%2],!0,"v",!0),pointArray.length>=3&&_setOneCard(cardArray[2],pointArray[2],tarPosX[2]*dir,tarPosY[2],!0,"h",showThird));var farmer_point=this.getChildByName("farmer_point"),banker_point=this.getChildByName("banker_point");if("banker"==sideName)switch(banker_point.visible=!0,stage){case 0:banker_point.visible=!1;break;case 1:case 2:banker_point.getChildByName("text").text=this._simpGetPoint(pointArray[0],pointArray[1]);break;case 3:banker_point.getChildByName("text").text=this._simpGetPoint(pointArray[0],pointArray[1]),pointArray.length>=3&&(banker_point.getChildByName("text").text=this._simpGetPoint(pointArray[0],pointArray[1],pointArray[1]))}else switch(farmer_point.visible=!0,stage){case 0:farmer_point.visible=!1;break;case 1:case 2:farmer_point.getChildByName("text").text=this._simpGetPoint(pointArray[0],pointArray[1]);break;case 3:farmer_point.getChildByName("text").text=this._simpGetPoint(pointArray[0],pointArray[1]),pointArray.length>=3&&(farmer_point.getChildByName("text").text=this._simpGetPoint(pointArray[0],pointArray[1],pointArray[1]))}},_sendCardCenterStep1:function(farmerArray,bankerArray,stepIdx,farmerSeatIdx,bankerSeatIdx,leftTime,myLookSide,lookCardDir,lookStep,lookRadian,runNextStep){if(runNextStep&&leftTime<=0)return stepIdx++,void this._sendCardCenterStep1(farmerArray,bankerArray,stepIdx,farmerSeatIdx,bankerSeatIdx,leftTime,myLookSide,lookCardDir,lookStep,lookRadian,!1);var showThird=runNextStep,step=this._sendCardSteps[stepIdx],showTopFlipBtn=!1;switch(step){case confMgr.definition.BaccaratSendCardStepJM.FarmerFirst:this._sendCardSteps[stepIdx+1]!=confMgr.definition.BaccaratSendCardStepJM.BankerFirst?-1!=farmerSeatIdx?(this.publish("game_baccarat.play.set_top_card_jm",!1,0,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,1,bankerArray),this._initSendCardCenter("farmer",0,!0),this._initSendCardCenter("banker",1,!0)):(this.publish("game_baccarat.play.set_top_card_jm",!1,1,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,0,bankerArray),this._initSendCardCenter("farmer",1,!0),this._initSendCardCenter("banker",0,!0)):(this.publish("game_baccarat.play.set_top_card_jm",!1,0,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,0,bankerArray),this._initSendCardCenter("farmer",0,!0),this._initSendCardCenter("banker",0,!0),1==this._lookCardSideNum&&(showTopFlipBtn=!0));break;case confMgr.definition.BaccaratSendCardStepJM.BankerFirst:-1!=farmerSeatIdx&&-1!=bankerSeatIdx?(this.publish("game_baccarat.play.set_top_card_jm",!1,1,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,0,bankerArray),this._initSendCardCenter("farmer",1,!0),this._initSendCardCenter("banker",0,!0)):-1!=farmerSeatIdx?(this.publish("game_baccarat.play.set_top_card_jm",!1,1,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,0,bankerArray),this._initSendCardCenter("farmer",1,!0),this._initSendCardCenter("banker",0,!0)):-1!=bankerSeatIdx?(this.publish("game_baccarat.play.set_top_card_jm",!1,0,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,1,bankerArray),this._initSendCardCenter("farmer",0,!0),this._initSendCardCenter("banker",1,!0)):(this.publish("game_baccarat.play.set_top_card_jm",!1,1,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,0,bankerArray),this._initSendCardCenter("farmer",1,!0),this._initSendCardCenter("banker",0,!0));break;case confMgr.definition.BaccaratSendCardStepJM.FarmerSecond:this._sendCardSteps[stepIdx+1]==confMgr.definition.BaccaratSendCardStepJM.Finish?(this.publish("game_baccarat.play.set_top_card_jm",!1,2,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,3,bankerArray),this._initSendCardCenter("farmer",2,showThird),this._initSendCardCenter("banker",3,!0)):this._step2Send2?(this.publish("game_baccarat.play.set_top_card_jm",!1,2,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,2,bankerArray),this._initSendCardCenter("farmer",2,showThird),this._initSendCardCenter("banker",2,showThird),showTopFlipBtn=!0):(this.publish("game_baccarat.play.set_top_card_jm",!1,2,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,1,bankerArray),this._initSendCardCenter("farmer",2,showThird),this._initSendCardCenter("banker",1,!0));break;case confMgr.definition.BaccaratSendCardStepJM.BankerSecond:this._sendCardSteps[stepIdx+1]==confMgr.definition.BaccaratSendCardStepJM.Finish?(this.publish("game_baccarat.play.set_top_card_jm",!1,3,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,2,bankerArray),this._initSendCardCenter("farmer",3,!0),this._initSendCardCenter("banker",2,showThird)):this._step2Send2?(this.publish("game_baccarat.play.set_top_card_jm",!1,2,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,2,bankerArray),this._initSendCardCenter("farmer",2,showThird),this._initSendCardCenter("banker",2,showThird),showTopFlipBtn=!0):(this.publish("game_baccarat.play.set_top_card_jm",!1,1,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,2,bankerArray),this._initSendCardCenter("farmer",1,!0),this._initSendCardCenter("banker",2,showThird));break;case confMgr.definition.BaccaratSendCardStepJM.Finish:this.publish("game_baccarat.play.set_top_card_jm",!1,3,farmerArray),this.publish("game_baccarat.play.set_top_card_jm",!0,3,bankerArray),this._initSendCardCenter("farmer",3,!0),this._initSendCardCenter("banker",3,!0),this._leftLookCardTime=0;break;default:return}runNextStep&&this._sendCardCenterStep2(farmerArray,bankerArray,step,farmerSeatIdx,bankerSeatIdx,leftTime,myLookSide,lookCardDir,lookStep,lookRadian,showTopFlipBtn)},_sendCardCenterStep2:function(farmerArray,bankerArray,step,farmerSeatIdx,bankerSeatIdx,leftTime,myLookSide,lookCardDir,lookStep,lookRadian,showTopFlipBtn){switch(step){case confMgr.definition.BaccaratSendCardStepJM.FarmerFirst:var card1=null,card2=null,seatIdx=-1,isMe=!1;if(-1!=farmerSeatIdx?(card1=this._centerCardFarmer[0],card2=this._centerCardFarmer[1],seatIdx=farmerSeatIdx,this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.FARMER&&(isMe=!0)):-1!=bankerSeatIdx&&(card1=this._centerCardBanker[0],card2=this._centerCardBanker[1],seatIdx=bankerSeatIdx,this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.BANKER&&(isMe=!0)),-1!=seatIdx){var index0=this._getCardIndexByCardName(card1.name),index1=this._getCardIndexByCardName(card2.name);this._setCenterCardDirAndProgress(card1,lookCardDir[index0],lookStep[index0],lookRadian[index0]),this._setCenterCardDirAndProgress(card2,lookCardDir[index1],lookStep[index1],lookRadian[index1]);pos=seatPos[seatIdx];isMe?(this._moveCenterCard(card1,!0,startPos,[pos.x-160,pos.y],baseScale,1,null,null,0),this._moveCenterCard(card2,!0,startPos,[pos.x+160,pos.y],baseScale,1,null,null,0),this.enableFlipBtn(leftTime),showTopFlipBtn&&(this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.FARMER?this.enableTopFlipBtn(!1):this.enableTopFlipBtn(!0))):(this._moveCenterCard(card1,!0,null,[pos.x-48,pos.y],baseScale,.32,null,null,0),this._moveCenterCard(card2,!0,null,[pos.x+48,pos.y],baseScale,.32,null,null,0),this.publish("game_baccarat.play.setSoundPanel",!0,step),this.publish("game_baccarat.seat.startMaskClip",seatIdx,leftTime))}break;case confMgr.definition.BaccaratSendCardStepJM.BankerFirst:if(-1!=farmerSeatIdx&&-1!=bankerSeatIdx){var index0=this._getCardIndexByCardName(this._centerCardBanker[0].name),index1=this._getCardIndexByCardName(this._centerCardBanker[1].name);this._setCenterCardDirAndProgress(this._centerCardBanker[0],lookCardDir[index0],lookStep[index0],lookRadian[index0]),this._setCenterCardDirAndProgress(this._centerCardBanker[1],lookCardDir[index1],lookStep[index1],lookRadian[index1]);pos=seatPos[bankerSeatIdx];this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.BANKER?(this._moveCenterCard(this._centerCardBanker[0],!0,null,[pos.x-160,pos.y],baseScale,1,null,null,0),this._moveCenterCard(this._centerCardBanker[1],!0,null,[pos.x+160,pos.y],baseScale,1,null,null,0),this.enableFlipBtn(leftTime)):(this._moveCenterCard(this._centerCardBanker[0],!0,null,[pos.x-48,pos.y],baseScale,.32,null,null,0),this._moveCenterCard(this._centerCardBanker[1],!0,null,[pos.x+48,pos.y],baseScale,.32,null,null,0),this.publish("game_baccarat.play.setSoundPanel",!0,step),this.publish("game_baccarat.seat.startMaskClip",bankerSeatIdx,leftTime))}break;case confMgr.definition.BaccaratSendCardStepJM.FarmerSecond:if(-1==farmerSeatIdx)this._moveCenterCard(this._centerCardFarmer[2],!1,startPos,[-1*tarPosX[2],tarPosY[2]],0,baseScale,null,null,0);else{index0=this._getCardIndexByCardName(this._centerCardFarmer[2].name);this._setCenterCardDirAndProgress(this._centerCardFarmer[2],lookCardDir[index0],lookStep[index0],lookRadian[index0]);pos=seatPos[farmerSeatIdx];this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.FARMER?(this._moveCenterCard(this._centerCardFarmer[2],!0,startPos,[pos.x,pos.y],baseScale,1,null,null,0),this.enableFlipBtn(leftTime),showTopFlipBtn&&this.enableTopFlipBtn(!1)):(this._moveCenterCard(this._centerCardFarmer[2],!0,startPos,[pos.x,pos.y],baseScale,.32,null,null,0),this.publish("game_baccarat.play.setSoundPanel",!0,step),this.publish("game_baccarat.seat.startMaskClip",farmerSeatIdx,leftTime))}break;case confMgr.definition.BaccaratSendCardStepJM.BankerSecond:if(-1==bankerSeatIdx)this._moveCenterCard(this._centerCardBanker[2],!1,startPos,[tarPosX[2],tarPosY[2]],0,baseScale,null,null,0);else{index0=this._getCardIndexByCardName(this._centerCardBanker[2].name);this._setCenterCardDirAndProgress(this._centerCardBanker[2],lookCardDir[index0],lookStep[index0],lookRadian[index0]);var pos=seatPos[bankerSeatIdx];this._lookCardSide==confMgr.definition.LOOKCARD_SIDE.BANKER?(this._moveCenterCard(this._centerCardBanker[2],!0,startPos,[pos.x,pos.y],baseScale,1,null,null,0),this.enableFlipBtn(leftTime),showTopFlipBtn&&this.enableTopFlipBtn(!0)):(this._moveCenterCard(this._centerCardBanker[2],!0,startPos,[pos.x,pos.y],baseScale,.32,null,null,0),this.publish("game_baccarat.play.setSoundPanel",!0,step),this.publish("game_baccarat.seat.startMaskClip",bankerSeatIdx,leftTime))}break;case confMgr.definition.BaccaratSendCardStepJM.Finish:break;default:return}},sendCardCenter:function(farmerArray,bankerArray,steps,leftTime,step2Send2,farmerSeatIdx,bankerSeatIdx,myLookSide,doAnimation,lookCardDir,lookStep,lookRadian){this._farmerPointArray=farmerArray,this._bankerPointArray=bankerArray,this._farmerSeatIdx=farmerSeatIdx,this._bankerSeatIdx=bankerSeatIdx,this._setLookCard(myLookSide),this._sendCardSteps=steps,this._lookCardSideNum=0,-1!=farmerSeatIdx&&this._lookCardSideNum++,-1!=bankerSeatIdx&&this._lookCardSideNum++,this._lookCardEndName={},this._step2Send2=step2Send2,doAnimation?this._sendCardCenterWithAnimation(farmerArray,bankerArray,steps[0],farmerSeatIdx,bankerSeatIdx,leftTime):this._sendCardCenterStep1(farmerArray,bankerArray,0,farmerSeatIdx,bankerSeatIdx,leftTime,myLookSide,lookCardDir,lookStep,lookRadian,!0)},backToCenter:function(isBanker,isThird){if(isBanker)if(isThird)this._centerCardBanker[2].setDirection("h",!1),this._moveCenterCard(this._centerCardBanker[2],!1,null,[tarPosX[2],tarPosY[2]],this._centerCardBanker[2].scaleX,baseScale,0,90,400);else for(i=0;i<2;i++)this._moveCenterCard(this._centerCardBanker[i],!1,null,[tarPosX[i],tarPosY[i]],this._centerCardBanker[i].scaleX,baseScale,null,null,400);else if(isThird)this._centerCardFarmer[2].setDirection("h",!1),this._moveCenterCard(this._centerCardFarmer[2],!1,null,[-1*tarPosX[2],tarPosY[2]],this._centerCardFarmer[2].scaleX,baseScale,0,90,400);else for(var i=0;i<2;i++){var index=i;index=1-i,this._moveCenterCard(this._centerCardFarmer[i],!1,null,[-1*tarPosX[index],tarPosY[index]],this._centerCardFarmer[i].scaleX,baseScale,null,null,400)}},_hideCenterCards:function(){for(var i=0;i<3;i++)this._centerCardFarmer[i].visible=!1,this._centerCardBanker[i].visible=!1},clear:function(){this._hideCenterCards()},recycle:function(card1,card2,card3){card1.visible&&card1.flyToAndScaleWithTime(0,48,baseScale,baseScale,600,this,function(){this.timerOnce(500,this,function(){card1.flyToAndScaleWithTime(endPos[0],endPos[1],baseScale,0,400,this)})}),card2.visible&&card2.flyToAndScaleWithTime(0,48,baseScale,baseScale,600,this,function(){this.timerOnce(500,this,function(){card2.flyToAndScaleWithTime(endPos[0],endPos[1],baseScale,0,400,this)})}),card3.visible&&(card3.setDirection("v",!0),card3.flyToAndScaleWithTime(0,48,baseScale,baseScale,600,this,function(){this.timerOnce(500,this,function(){card3.flyToAndScaleWithTime(endPos[0],endPos[1],baseScale,0,400,this)})}))},recycleCard:function(){this.recycle.apply(this,this._centerCardFarmer),this.recycle.apply(this,this._centerCardBanker),this.getChildByName("farmer_point").visible=!1,this.getChildByName("banker_point").visible=!1,this._leftLookCardTime=0,this.publish("game_baccarat.play.clear_top_card_jm")}})}),gbx.define("game/baccarat/parts/chat_panel",["gbx/render/display/sprite","comm/base/command_ui","comm/ui/sound_button","comm/helper/conf_mgr","comm/ui/ui_utils","conf/ui_locallization","gbx/render/ui/image"],function(Sprite,BaseUI,Button,confMgr,uiUtils,uiLocallization,Image){return Sprite.extend({init:function(){this._super();var maskBtn=uiUtils.createMask(this);maskBtn.pos(-1500,-1500),this.addChild(maskBtn);var backgroud=uiUtils.createSprite("assets/major/public/background.png","");this.addChild(backgroud),uiUtils.createBackgroundCrash(this,backgroud);var btn_serif=uiUtils.createButton("",1,"btn_serif"),sp=uiUtils.createSprite("assets/major/public/TableSelect.png","btn_serifBg");sp.pos(0,-30),btn_serif.addChild(sp),btn_serif.size(144,60),btn_serif.setClickHandler(this,this.OnClick),btn_serif.pos(105,0),this.addChild(btn_serif);var text=uiUtils.createSimpleText(uiLocallization.chat_serif,"serif");text.pos(40,10),text.fontSize=30,text.color="#ffffff",text.size(320,60),text.align="center",this.addChild(text);var btn_emoji=uiUtils.createButton("",1,"btn_emoji");(sp=uiUtils.createSprite("assets/major/public/TableSelect.png","btn_emojiBg")).pos(0,-30),btn_emoji.addChild(sp),btn_emoji.size(144,60),btn_emoji.setClickHandler(this,this.OnClick),btn_emoji.pos(345,0),this.addChild(btn_emoji),(text=uiUtils.createSimpleText(uiLocallization.chat_emoji,"emoji")).pos(280,10),text.fontSize=30,text.color="#ffffff",text.size(320,60),text.align="center",this.addChild(text);var serifArray=[uiLocallization.chat_1,uiLocallization.chat_2,uiLocallization.chat_3,uiLocallization.chat_4,uiLocallization.chat_5,uiLocallization.chat_6,uiLocallization.chat_7,uiLocallization.chat_8,uiLocallization.chat_9,uiLocallization.chat_10,uiLocallization.chat_11,uiLocallization.chat_12,uiLocallization.chat_13,uiLocallization.chat_14],panel=uiUtils.createPanel(640,415,"serifList");panel.pos(5,65),this.addChild(panel),panel.removeChildren();for(var i=0;i<serifArray.length;i++)this._putOne(serifArray[i],i);var emojiArray=["emotion01.png","emotion02.png","emotion03.png","emotion04.png","emotion05.png","emotion06.png","emotion07.png","emotion08.png","emotion09.png","emotion10.png","emotion11.png","emotion12.png","emotion13.png","emotion14.png","emotion15.png","emotion16.png","emotion17.png","emotion18.png","emotion19.png","emotion20.png","emotion21.png","emotion22.png","emotion23.png","emotion24.png","emotion25.png","emotion26.png","emotion27.png","emotion28.png"],sendChatEmojiList=uiUtils.createNormalList(3,110,65,"v",640,415,70,70);sendChatEmojiList.array=emojiArray,sendChatEmojiList.repeatX=6,sendChatEmojiList.setRenderHandler(this,this._renderEmojiList),sendChatEmojiList.name="emojiList",sendChatEmojiList.visible=!1,this.addChild(sendChatEmojiList),this.changeTab(!0)},_putOne:function(data,index){var root=this.getChildByName("serifList"),posY=94*index,bg=new Image("assets/major/public/bg_D_bar.png");bg.pos(0,posY),bg.width=640,bg.height=94,bg.sizeGrid="10,10,10,10",bg.visible=!1,root.addChild(bg),index%2==0&&(bg.visible=!0);var serifBtn=new Button;serifBtn.width=640,serifBtn.height=94,serifBtn.stateNum=1,serifBtn.name="serifBtn",serifBtn.pos(0,posY),root.addChild(serifBtn);var serif=uiUtils.createSimpleText(data,"serif");serif.fontSize=30,serif.color="#ffffff",serif.pos(0,28),serif.align="center",serif.size(640,94),serifBtn.addChild(serif),serifBtn.setClickHandler(this,this.sendChat,confMgr.definition.CHAT_TYPE.SERIF,data)},_renderEmojiList:function(cell,idx){var data=this.getChildByName("emojiList").array;if(!(idx>=data.length)){var emojiBtn=cell.getChildByName("emojiBtn");emojiBtn||((emojiBtn=new Button).pos(7.5,7.5),emojiBtn.size(61,61),emojiBtn.stateNum=1,emojiBtn.name="emojiBtn",cell.addChild(emojiBtn)),emojiBtn.setSkinImage("assets/major/emoji/"+data[idx]),emojiBtn.setClickHandler(this,this.sendChat,confMgr.definition.CHAT_TYPE.EMOJI,data[idx])}},sendChat:function(btn,type,content){this.publish("game_baccarat.command.send_chat",type,content),this.visible=!1},changeTab:function(serif){this.getChildByName("serifList").visible=serif,this.getChildByName("emojiList").visible=!serif,this.getChildByName("btn_serif").getChildByName("btn_serifBg").visible=serif,this.getChildByName("btn_emoji").getChildByName("btn_emojiBg").visible=!serif},OnClick:function(btn){"btn_serif"===btn.name?this.changeTab(!0):"btn_emoji"===btn.name&&this.changeTab(!1)}})}),gbx.define("game/baccarat/parts/chip",["gbx/render/display/sprite","gbx/render/tween","comm/helper/conf_mgr"],function(Sprite,Tween,confMgr){confMgr.read("games/baccarat/dat/setting.json");return Sprite.extend({init:function(){this._super(),this.setImage("assets/games/baccarat/tex/chips/chip1.png"),this.pivotToCenter(),this.area=-1,this.seatIdx=-1,this.playerId="",this.isFlying=!1},set type(v){this.isFlying=!1;var t=v+1;this.setImage("assets/games/baccarat/tex/chips/chip"+t+".png"),this.scale(.5)},flyTo:function(x,y,context,endCallback,args){this.isFlying=!0,this.tweenTo({x:x,y:y},350,Tween.TimingFunction.linearOut,context,endCallback,args)},flyEnd:function(){this.isFlying=!1}})}),gbx.define("game/baccarat/parts/counter",["comm/base/command_ui","gbx/render/display/sprite","gbx/render/display/text","comm/helper/sound_mgr","comm/ui/ui_utils"],function(BaseUI,Sprite,Text,soundMgr,uiUtils){return BaseUI.extend({init:function(){this._super(),this._maxSecond=0,this._startTime=0,this._passedSecond=0,this._leftTime=0,this.playedSound=!1;var bg=new Sprite;bg.setImage("assets/games/baccarat/tex/clock.png"),bg.name="bg",bg.visible=!0,bg.pivotToCenter(),bg.pos(17,2),this.addChild(bg);var text=new Text;text.text="00",text.align="center",text.fontSize=25,text.color="#000000",text.strokeColor="#000000",text.width=117,text.pivotToCenter(),text.pos(0,2),text.name="text",this.addChild(text)},start:function(second){this._maxSecond=Math.round(second),this._passedSecond=0,this.playedSound=!1,this._startTime=(new Date).getTime(),this._leftTime=second,this._maxSecond>0&&(this._maxSecond<10?this.getChildByName("text").text="0"+this._maxSecond:this.getChildByName("text").text=this._maxSecond,this.timerLoop(100,this,this._updateTime))},stop:function(){this._leftTime<=0||(this.clearTimer(this,this._updateTime),this.getChildByName("text").text="00",this._leftTime=0,this.visible=!1)},_updateTime:function(){var delta=(new Date).getTime()-this._startTime;if((delta=Math.floor(delta/1e3))!=this._passedSecond){this._passedSecond=delta;var numStr,num=this._maxSecond-this._passedSecond;numStr=num<10?"0"+num:num,this._leftTime=num,this.getChildByName("text").text=numStr,this.getChildByName("text").scale(1.2),this.getChildByName("text").tweenTo({scaleX:1,scaleY:1},100,"sineOut"),this._maxSecond-this._passedSecond<=3&&this._maxSecond-this._passedSecond>=0&&(this.playedSound||(uiUtils.playSound("clock",1),this.playedSound=!0)),this._maxSecond<=this._passedSecond&&(this.clearTimer(this,this._updateTime),this.getChildByName("text").text="00",this.runCommand("times_up"),this._leftTime=0)}},getLeftTime:function(){return this._leftTime}})}),gbx.define("game/baccarat/parts/history_box",["conf/system","comm/helper/room_mgr","gbx/render/display/sprite","gbx/render/display/text","gbx/render/ui/list","game/lobby/parts/way_sheet_body","comm/helper/conf_mgr","conf/locallization","comm/ui/ui_utils","comm/helper/baccarat_algorithm","conf/ui_locallization"],function(sys,roomMgr,Sprite,Text,List,WaySheetBody,confMgr,Localization,uiUtils,BaccaratAlgorithm,uiLocallization){return Sprite.extend({init:function(){this._super(),this._algorithm=new BaccaratAlgorithm;var luan_2=uiUtils.createSprite("assets/major/waysheet/ludan_l.png","");luan_2.zOrder=2,this.addChild(luan_2);var body=new WaySheetBody("battle",this._algorithm);body.name="waySheetBody",body.pos(0,0),body.zOrder=1,this.addChild(body);var preY=270.5,total_banker=uiUtils.createSimpleText("","total_banker");total_banker.color="#FE0000",total_banker.pos(4,preY),total_banker.fontSize=15,total_banker.bold=!0,total_banker.zOrder=3,this.addChild(total_banker);var total_farmer=uiUtils.createSimpleText("","total_farmer");total_farmer.color="#4C60DD",total_farmer.pos(80,preY),total_farmer.fontSize=15,total_farmer.bold=!0,total_farmer.zOrder=3,this.addChild(total_farmer);var total_duece=uiUtils.createSimpleText("","total_duece");total_duece.color="#53E836",total_duece.pos(156,preY),total_duece.fontSize=15,total_duece.bold=!0,total_duece.zOrder=3,this.addChild(total_duece);var total_bankerPair=uiUtils.createSimpleText("","total_bankerPair");total_bankerPair.color="#FE0000",total_bankerPair.pos(230,preY),total_bankerPair.fontSize=15,total_bankerPair.bold=!0,total_bankerPair.zOrder=3,this.addChild(total_bankerPair);var total_farmerPair=uiUtils.createSimpleText("","total_farmerPair");total_farmerPair.color="#4C60DD",total_farmerPair.pos(304,preY),total_farmerPair.fontSize=15,total_farmerPair.bold=!0,total_farmerPair.zOrder=3,this.addChild(total_farmerPair);var total_89=uiUtils.createSimpleText("","total_89");total_89.pos(380,preY),total_89.color="#A27D61",total_89.fontSize=15,total_89.bold=!0,total_89.zOrder=3,this.addChild(total_89);var total_countAll=uiUtils.createSimpleText("","total_countAll");total_countAll.pos(506,preY),total_countAll.color="#A27D61",total_countAll.fontSize=15,total_countAll.bold=!0,total_countAll.zOrder=3,this.addChild(total_countAll);var preY=289,label_limit=uiUtils.createSimpleText("","label_limit");label_limit.pos(6,preY),label_limit.fontSize=15,label_limit.bold=!0,label_limit.color="#CFAC90",label_limit.zOrder=3,this.addChild(label_limit);var label_limitMin=uiUtils.createSimpleText("","label_limitMin");label_limitMin.pos(160,preY),label_limitMin.fontSize=15,label_limitMin.bold=!0,label_limitMin.color="#CFAC90",label_limitMin.zOrder=3,this.addChild(label_limitMin);var label_limitMax=uiUtils.createSimpleText("","label_limitMax");label_limitMax.pos(310,preY),label_limitMax.fontSize=15,label_limitMax.bold=!0,label_limitMax.color="#CFAC90",label_limitMax.zOrder=3,this.addChild(label_limitMax);var label_roomId=uiUtils.createSimpleText("","label_roomId");label_roomId.pos(515,preY),label_roomId.fontSize=15,label_roomId.bold=!0,label_roomId.color="#CFAC90",label_roomId.zOrder=3,this.addChild(label_roomId);var label_roomIdCopy=uiUtils.createSimpleText("","label_roomIdCopy");label_roomIdCopy.pos(10,preY+120),label_roomIdCopy.fontSize=25,label_roomIdCopy.color="#CFAC90",label_roomIdCopy.zOrder=3,this.addChild(label_roomIdCopy);var banker=uiUtils.createSimpleText(uiLocallization.banker,"banker");banker.fontSize=18,banker.pos(615,115),banker.color="red",banker.bold=!0,banker.zOrder=3,this.addChild(banker);var bigEye=new Sprite;bigEye.setImage("assets/major/waysheet/ludan_redCir1.png"),bigEye.pos(3,26),bigEye.name="bigEye",banker.addChild(bigEye);var small=new Sprite;small.setImage("assets/major/waysheet/ludan_redCir2.png"),small.pos(3,44),small.name="small",banker.addChild(small);var yueU=new Sprite;yueU.setImage("assets/major/waysheet/ludan_redSqu.png"),yueU.pos(3,62),yueU.name="yueU",banker.addChild(yueU);var farmer=uiUtils.createSimpleText(uiLocallization.farmer,"farmer");farmer.fontSize=18,farmer.pos(615,194),farmer.color="blue",farmer.bold=!0,farmer.zOrder=3,this.addChild(farmer),(bigEye=new Sprite).setImage("assets/major/waysheet/ludan_blueCir1.png"),bigEye.pos(3,26),bigEye.name="bigEye",farmer.addChild(bigEye),(small=new Sprite).setImage("assets/major/waysheet/ludan_blueCir2.png"),small.pos(3,44),small.name="small",farmer.addChild(small),(yueU=new Sprite).setImage("assets/major/waysheet/ludan_blueSqu.png"),yueU.pos(3,62),yueU.name="yueU",farmer.addChild(yueU),this.getRoomData()},refreshPlayerNumber:function(number){},setInfo:function(data,isReset){if(isReset)return this.getChildByName("total_banker").text=uiLocallization.banker+": 0",this.getChildByName("total_farmer").text=uiLocallization.farmer+": 0",this.getChildByName("total_duece").text=uiLocallization.duece+": 0",this.getChildByName("total_bankerPair").text=uiLocallization.bankerPair+": 0",this.getChildByName("total_farmerPair").text=uiLocallization.farmerPair+": 0",this.getChildByName("total_89").text=uiLocallization.count89+": 0",void(this.getChildByName("total_countAll").text=uiLocallization.round_count+": 0");this.getChildByName("total_banker").text=uiLocallization.banker+": "+data.banker,this.getChildByName("total_farmer").text=uiLocallization.farmer+": "+data.farmer,this.getChildByName("total_duece").text=uiLocallization.duece+": "+data.deuce,this.getChildByName("total_bankerPair").text=uiLocallization.bankerPair+": "+data.bankerPair,this.getChildByName("total_farmerPair").text=uiLocallization.farmerPair+": "+data.farmerPair,this.getChildByName("total_89").text=uiLocallization.count89+": "+data.count89,this.getChildByName("total_countAll").text=uiLocallization.round_count+": "+data.countAll},setPredict:function(data,isClear){var bankerBigEye=this.getChildByName("banker","bigEye"),farmerBigEye=this.getChildByName("farmer","bigEye"),bankerSmall=this.getChildByName("banker","small"),farmerSmall=this.getChildByName("farmer","small"),bankerYueU=this.getChildByName("banker","yueU"),farmerYueU=this.getChildByName("farmer","yueU");bankerBigEye.visible=!1,farmerBigEye.visible=!1,bankerSmall.visible=!1,farmerSmall.visible=!1,bankerYueU.visible=!1,farmerYueU.visible=!1,isClear||(1==data.bigEyeRoad?(bankerBigEye.visible=!0,farmerBigEye.visible=!0,bankerBigEye.setImage("assets/major/waysheet/ludan_redCir1.png"),farmerBigEye.setImage("assets/major/waysheet/ludan_blueCir1.png")):0==data.bigEyeRoad&&(bankerBigEye.visible=!0,farmerBigEye.visible=!0,bankerBigEye.setImage("assets/major/waysheet/ludan_blueCir1.png"),farmerBigEye.setImage("assets/major/waysheet/ludan_redCir1.png")),1==data.smallRoad?(bankerSmall.visible=!0,farmerSmall.visible=!0,bankerSmall.setImage("assets/major/waysheet/ludan_redCir2.png"),farmerSmall.setImage("assets/major/waysheet/ludan_blueCir2.png")):0==data.smallRoad&&(bankerSmall.visible=!0,farmerSmall.visible=!0,bankerSmall.setImage("assets/major/waysheet/ludan_blueCir2.png"),farmerSmall.setImage("assets/major/waysheet/ludan_redCir2.png")),1==data.cockroach?(bankerYueU.visible=!0,farmerYueU.visible=!0,bankerYueU.setImage("assets/major/waysheet/ludan_redSqu.png"),farmerYueU.setImage("assets/major/waysheet/ludan_blueSqu.png")):0==data.cockroach&&(bankerYueU.visible=!0,farmerYueU.visible=!0,bankerYueU.setImage("assets/major/waysheet/ludan_blueSqu.png"),farmerYueU.setImage("assets/major/waysheet/ludan_redSqu.png")))},getRoomData:function(){var data=roomMgr.getChoose();if(void 0!=data){var conf=data.roundResults,array=this._algorithm.addAll(conf);this.getChildByName("waySheetBody").setWaySheet(array),this.setInfo(array[5]),this.setPredict(array[6],!1);var roomName="",definition=confMgr.read("games/baccarat/dat/definition.json");switch(data.baccaratRoomType){case definition.BaccaratRoomType.Dragon:roomName=uiLocallization.word_zhizun;break;case definition.BaccaratRoomType.JingMi:roomName=uiLocallization.word_jinmi;break;case definition.BaccaratRoomType.Six:roomName=uiLocallization.word_six}this.getChildByName("label_roomId").text=roomName+data.roomId,this.refreshPlayerNumber(),this.getChildByName("label_limitMax").text=uiLocallization.battle_limit_max+": "+data.allDeuceBetMax+"/"+data.allBankerPairBetMax,this.getChildByName("label_limitMin").text=uiLocallization.battle_limit_min+": "+data.otherBetMin,this.getChildByName("label_limit").text=uiLocallization.LimitColor+": "+data.bankerFarmerBetMin+"-"+data.allBankerFarmerBetMax}},add:function(winSide,pairSide){var oneData={};oneData.winType=winSide,pairSide==confMgr.definition.PAIR_SIDE.BankerPair&&(oneData.bankerPair=!0),pairSide==confMgr.definition.PAIR_SIDE.FarmerPair&&(oneData.farmerPair=!0),pairSide==confMgr.definition.PAIR_SIDE.Both&&(oneData.bankerPair=!0,oneData.farmerPair=!0);var retArray=this._algorithm.add(oneData);this.setInfo(retArray[5]),this.setPredict(retArray[6],!1),this.getChildByName("waySheetBody").putOneData(retArray)},clear:function(){this._algorithm.clear(),this.setPredict(null,!0),this.setInfo(null,!0),this.getChildByName("waySheetBody").clear()}})}),gbx.define("game/baccarat/parts/mask_clip",["comm/base/command_ui","gbx/render/display/sprite","comm/helper/conf_mgr"],function(BaseUI,Sprite,confMgr){return BaseUI.extend({init:function(){this._super(),this._maxSecond=0,this._startTime=0,this._passedSecond=0,this._leftTime=0,this._angle=0,this._startAngle=-90,this._width=0,this._height=0;var mask=new Sprite;mask.graphics.drawPath(0,0,[["moveTo",5,0],["lineTo",105,0],["arcTo",110,0,110,5,5],["lineTo",110,55],["arcTo",110,60,105,60,5],["lineTo",5,60],["arcTo",0,60,0,55,5],["lineTo",0,5],["arcTo",0,0,5,0,5],["closePath"]],{fillStyle:"#00ffff"}),mask.size(100,50),mask.pivot(50,50),mask.name="mask";var maskContainer=new Sprite;maskContainer.size(100,100),maskContainer.pos(50,50),maskContainer.pivotToCenter(),maskContainer.mask=mask,maskContainer.name="container",this.addChild(maskContainer);var circle=new Sprite;circle.graphics.drawPie(50,50,72,-90,-90,"#32ff05"),circle.name="circle",maskContainer.addChild(circle)},start:function(second,width,height){this._width=width,this._height=height,this._startAngle=-90,this._angle=360/second;var x=width+8,y=height+8,container=this.getChildByName("container");container.size(x,y),container.pivotToCenter(),container.pos(x/2,y/2);var mask=this.getChildByName("container").mask;mask.size(x,y),mask.graphics.clear(),mask.graphics.drawPath(-4,-4,[["moveTo",5,0],["lineTo",x-5,0],["arcTo",x,0,x,5,5],["lineTo",x,y-5],["arcTo",x,y,x-5,y,5],["lineTo",5,y],["arcTo",0,y,0,y-5,5],["lineTo",0,5],["arcTo",0,0,5,0,5],["closePath"]],{fillStyle:"#00ffff"}),mask.pivot(x/2,y/2),this._maxSecond=Math.round(second),this.resetMask(0),this._passedSecond=0,this._startTime=(new Date).getTime(),this._leftTime=second,this._maxSecond>0&&this.timerLoop(100,this,this._updateTime)},resetMask:function(num){var circle=this.getChildByName("container","circle"),x=this._width/2,y=this._height/2,angle=this._angle*num,r=Math.sqrt(x*x+y*y)+8,color=this.getRGBstr(num);circle.graphics.clear(),circle.graphics.drawPie(x,y,r,this._startAngle+angle,270,color)},stop:function(){this._leftTime<=0||(this.clearTimer(this,this._updateTime),this._leftTime=0,this.resetMask(this._maxSecond))},_updateTime:function(){var delta=(new Date).getTime()-this._startTime;delta/=1e3,this._passedSecond=Math.floor(delta);var num=this._maxSecond-this._passedSecond;this._leftTime=num,delta>this._maxSecond?(this.clearTimer(this,this._updateTime),this._leftTime=0,this.resetMask(this._maxSecond)):this.resetMask(delta)},getRGBstr:function(num){var rNum=0,gNum=0,rgbAdd=500/this._maxSecond*num;return rgbAdd<=255?(rNum=parseInt(rgbAdd),gNum=255):(rNum=255,gNum=parseInt(255-(rgbAdd-255))),"#"+this.getOneRGBstr(rNum)+this.getOneRGBstr(gNum)+this.getOneRGBstr(0)},getOneRGBstr:function(num){var ten=0,one=num;num>=16&&(one=num-16*(ten=parseInt(num/16)));var RGBstrList=confMgr.setting.RGBstr;return RGBstrList[ten]+RGBstrList[one]}})}),gbx.define("game/baccarat/parts/player_list",["gbx/render/display/sprite","comm/base/command_ui","comm/ui/sound_button","conf/locallization","comm/ui/ui_utils","conf/ui_locallization","gbx/render/ui/image"],function(Sprite,BaseUI,Button,Localization,uiUtils,uiLocallization,Image){return Sprite.extend({init:function(param){this._super();var maskBtn=uiUtils.createMask(this);maskBtn.pos(-1500,-1500),this.addChild(maskBtn);var bg=uiUtils.createSprite("assets/major/public/background.png");bg.pos(0,0),this.addChild(bg),uiUtils.createBackgroundCrash(this,bg);var booter=uiUtils.createSprite("assets/major/public/back_booter_01.png","");booter.pos(0,0),this.addChild(booter);var path=uiLocallization.player_list_title;"dealer_list"==param&&(path=uiLocallization.player_list_up_title);var title=uiUtils.createSimpleText(path,"title");title.size(640,67),title.align="center",title.pos(0,18),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.onClose),this.addChild(closeBtn);var playerList=uiUtils.createNormalList(1,0,66,"v",640,414,640,94);playerList.setRenderHandler(this,this._renderPlayerList),playerList.name="list",this.addChild(playerList)},_renderPlayerList:function(cell,idx){var data=this.getChildByName("list").array;if(!(idx>=data.length)){cell.removeChildren();var cont=cell.getChildByName("cont");if(!cont){(cont=new Sprite).name="cont",cell.addChild(cont);var head=new Sprite;head.pos(60,10),head.name="head",cont.addChild(head);var name=uiUtils.createSimpleText("","name");name.fontSize=30,name.color="#ffffff",name.pos(170,28),cont.addChild(name);var money=uiUtils.createSimpleText("","money");money.fontSize=30,money.color="#ffffff",money.pos(420,28),cont.addChild(money);var bg=new Image("assets/major/public/bg_D_bar.png");bg.pos(0,0),bg.width=640,bg.height=94,bg.sizeGrid="10,10,10,10",bg.visible=!0,cont.addChild(bg),idx%2==0&&(bg.visible=!1),cont.getChildByName("head").setImage("assets/major/head/userhead_"+data[idx].playerIcon+".png"),cont.getChildByName("name").text=data[idx].nickName,cont.getChildByName("money").text=uiUtils.getFloatByPower(data[idx].roomCoin,2)}}},onClose:function(btn){this.visible=!1},setData:function(data){this.getChildByName("list").array=[],this.getChildByName("list").array=data,this.getChildByName("list").refresh()},refresh:function(){this.getChildByName("list").refresh()},removePlayer:function(playerId,name){if(-1!=this.name.indexOf(name))for(var data=this.getChildByName("list").array,i=0;i<data.length;i++)if(data[i].playerId==playerId)return data.splice(i,1),data.length;return 0}})}),gbx.define("game/baccarat/parts/putchip_area",["gbx/render/display/sprite","gbx/render/display/text","comm/helper/conf_mgr"],function(Sprite,Text,confMgr){var areaTypeSize=[{width:233,height:117},{width:156,height:117}],areaTypeBorder=["assets/games/baccarat/tex/xian_fang0001.png","assets/games/baccarat/tex/xian_banyuan0001.png","assets/games/baccarat/tex/xian_banyuan0002.png"],facesPath=["assets/games/baccarat/tex/mian_fang0001.png","assets/games/baccarat/tex/mian_banyuan0001.png","assets/games/baccarat/tex/mian_banyuan0002.png"],fixedPos=[null,{x:45,y:22},{x:65,y:22},{x:17,y:22},{x:15,y:22},{x:15,y:22}];return Sprite.extend({init:function(type,rate,area){this._super(),this.name=area,this.blinkCount=0,this.winCount=0,this._beginTime=0;var border=new Sprite;border.name="border",border.alpha=1,area>confMgr.definition.CHIP_AREA.FARMER?border.setImage(areaTypeBorder[0]):area==confMgr.definition.CHIP_AREA.FARMER?border.setImage(areaTypeBorder[1]):area==confMgr.definition.CHIP_AREA.BANKER&&border.setImage(areaTypeBorder[2]),this.addChild(border);var face=new Sprite;face.alpha=1,face.name="face",area==confMgr.definition.CHIP_AREA.FARMERPAIR?face.setImage(facesPath[0]):area==confMgr.definition.CHIP_AREA.BANKERPAIR?face.setImage(facesPath[0]):area==confMgr.definition.CHIP_AREA.DEUCE?face.setImage(facesPath[0]):area==confMgr.definition.CHIP_AREA.FARMER?face.setImage(facesPath[1]):area==confMgr.definition.CHIP_AREA.BANKER&&face.setImage(facesPath[2]),this.addChild(face);var betCount=new Text;betCount.text="0",betCount.width=areaTypeSize[0].width,betCount.align="center",betCount.color="#ffffff",betCount.fontSize=24,betCount.stroke=2,betCount.alpha=0,betCount.pos(fixedPos[area].x+50,fixedPos[area].y+20),betCount.name="total_bet",this.addChild(betCount);var myBet=new Text;myBet.width=120,myBet.text="0",myBet.align="center",myBet.color="#ffffff",myBet.stroke=1.5,myBet.strokeColor="#000000",myBet.fontSize=17,myBet.alpha=0,myBet.pos(fixedPos[area].x,fixedPos[area].y+70),myBet.name="my_bet",this.addChild(myBet),area<=confMgr.definition.CHIP_AREA.FARMER?this.size(areaTypeSize[0].width,areaTypeSize[0].height):this.size(areaTypeSize[1].width,areaTypeSize[1].height)},setClickHandler:function(context,handler,betType){this.on(this.EVENT.MOUSE_UP,context,handler,[betType])},setMyChips:function(chips){this.getChildByName("my_bet").alpha=0,chips>0&&(this.getChildByName("my_bet").alpha=1),this.getChildByName("my_bet").text=chips.toString().replace(/(\d)(?=(\d{3})+($|\.))/g,"$1,")},setTotalChips:function(chips){this.getChildByName("total_bet").text=chips.toString().replace(/(\d)(?=(\d{3})+($|\.))/g,"$1,")},reset:function(){this.getChildByName("total_bet").text=0,this.getChildByName("my_bet").text=0,this.getChildByName("my_bet").alpha=0,this.getChildByName("border").alpha=0,this.getChildByName("face").alpha=0,this.blinkCount=0},blinkBorder:function(stopBlink){var border=this.getChildByName("border");this.getChildByName("face").alpha=0,stopBlink?border.alpha=0:this.blinkCount>2?border.alpha=0:(border.alpha=0,this.timerOnce(200,this,function(){border.alpha=1,this.timerOnce(400,this,function(){border.alpha=0,this.blinkCount++,this.blinkBorder()})}))},showBorder:function(){this.getChildByName("border").alpha=1},enable:function(stopBlink){this.blinkBorder(stopBlink)},showFace:function(){this.getChildByName("face").alpha=1},blinkFace:function(){if(this.winCount>5)this.winCount=0;else{var face=this.getChildByName("face");this.timerOnce(200,this,function(){face.alpha=1,this.timerOnce(800,this,function(){face.alpha=0,this.winCount++,this.blinkFace()})})}},blinkBorder1:function(){this.getChildByName("border").alpha=1,this.getChildByName("border").tweenTo({alpha:1-this.getChildByName("border").alpha},750,"sineInOut",this,function(){})},disable:function(){var border=this.getChildByName("border");border.tweenCancel(),border.alpha=0;var face=this.getChildByName("face");face.tweenCancel(),face.alpha=0,this.blinkCount=0},end:function(){this.offAll(this.EVENT.MOUSE_UP),this._super()}})}),gbx.define("game/baccarat/parts/putchip_area_mi",["conf/system","gbx/render/display/sprite","gbx/render/display/text","comm/helper/conf_mgr","comm/ui/ui_utils"],function(sys,Sprite,Text,confMgr,uiUtils){var areaTypeSize=[{width:619,height:310}],areaTypeBorder=["assets/games/baccarat/tex/mi_border_banker.png","assets/games/baccarat/tex/mi_border_farmer.png","assets/games/baccarat/tex/mi_border_duece.png","assets/games/baccarat/tex/mi_border_banker_pair.png","assets/games/baccarat/tex/mi_border_farmer_pair.png"],facesPath=["assets/games/baccarat/tex/mi_mian_banker.png","assets/games/baccarat/tex/mi_mian_farmer.png","assets/games/baccarat/tex/mi_mian_duece.png","assets/games/baccarat/tex/mi_mian_banker_pair.png","assets/games/baccarat/tex/mi_mian_farmer_pair.png"],fixedBorderPos=[{x:sys.halfWidth,y:121},{x:sys.halfWidth,y:153},{x:sys.halfWidth,y:170},{x:sys.halfWidth+145,y:92},{x:sys.halfWidth-145,y:92}],bankerBetPos=[{x:78,y:563},{x:113,y:700},{x:210,y:792},{x:495,y:708},{x:533,y:570}],farmerBetPos=[{x:22,y:556},{x:67,y:750},{x:184,y:850},{x:538,y:765},{x:594,y:560}],dueceBetPos=[{x:237,y:750},{x:266,y:750},{x:308,y:750},{x:339,y:750},{x:375,y:750}],bankerPairBetPos=[{x:404,y:700},{x:433,y:679},{x:449,y:640},{x:450,y:607},{x:449,y:570}],farmerPairBetPos=[{x:206,y:700},{x:180,y:679},{x:164,y:640},{x:163,y:607},{x:163,y:570}];return Sprite.extend({init:function(){function CreateBetList(parent,str,posArray){for(var i=0;i<posArray.length;i++){var mybet=uiUtils.createSimpleText("",str+(i+1));mybet.pos(posArray[i].x-40,posArray[i].y-564),mybet.align="center",mybet.color="#ffffff",mybet.width=100,mybet.fontSize=17,mybet.rotation=0,mybet.alpha=0,mybet.stroke=1.5,mybet.strokeColor="#000000",parent.addChild(mybet),parent.myBetsLabsDic.push(mybet)}}this._super(),this._borderBlinkCount=[0,0,0,0,0],this._faceBlinkCount=[0,0,0,0,0],this.size(areaTypeSize[0].width,areaTypeSize[0].height),this.myBetsLabsDic=[],this._beginTime=0;for(i=0;i<5;i++){var border=new Sprite;border.setImage(areaTypeBorder[i]),border.pivotToCenter(),border.pos(fixedBorderPos[i].x,fixedBorderPos[i].y),border.name="border_"+(i+1),border.alpha=1,this.addChild(border)}for(var i=0;i<5;i++){var face=new Sprite;face.setImage(facesPath[i]),face.pivotToCenter(),face.pos(fixedBorderPos[i].x,fixedBorderPos[i].y),face.name="face_"+(i+1),face.alpha=1,this.addChild(face)}var ui=this;CreateBetList(ui,"my_bet_1_",bankerBetPos),CreateBetList(ui,"my_bet_2_",farmerBetPos),CreateBetList(ui,"my_bet_3_",dueceBetPos),CreateBetList(ui,"my_bet_4_",bankerPairBetPos),CreateBetList(ui,"my_bet_5_",farmerPairBetPos)},setClickHandler:function(context,handler,betType){this.on(this.EVENT.MOUSE_UP,context,handler,[betType])},disableMyBets:function(){for(var i=0;i<this.myBetsLabsDic.length;i++)this.myBetsLabsDic[i].alpha=0,this.myBetsLabsDic[i].text=""},setMyChips:function(area,seatIdx,chips){-1!=seatIdx&&(-1==area?this.disableMyBets():(this.getChildByName("my_bet_"+area+"_"+(seatIdx+1)).alpha=0,chips>0&&(this.getChildByName("my_bet_"+area+"_"+(seatIdx+1)).alpha=1),this.getChildByName("my_bet_"+area+"_"+(seatIdx+1)).text=chips.toString().replace(/(\d)(?=(\d{3})+($|\.))/g,"$1,")))},setTotalChips:function(area,seatIdx,chips){},reset:function(){for(i=0;i<5;i++){var border=this.getChildByName("border_"+(i+1));border.tweenCancel(),border.alpha=0}this.disableMyBets();for(var i=0;i<5;i++){var face=this.getChildByName("face_"+(i+1));face.tweenCancel(),face.alpha=0}this._faceBlinkCount=[0,0,0,0,0],this._borderBlinkCount=[0,0,0,0,0]},blinkBorder:function(i,stopBlink){var border=this.getChildByName("border_"+i);this.getChildByName("face_"+i).alpha=0,stopBlink?border.alpha=0:this._borderBlinkCount[i-1]>2?border.alpha=0:(border.alpha=0,this.timerOnce(200,this,function(){border.alpha=1,this.timerOnce(400,this,function(){border.alpha=0,this._borderBlinkCount[i-1]++,this.blinkBorder(i)})}))},enable:function(stopBlink){this.blinkBorder(1,stopBlink),this.blinkBorder(2,stopBlink),this.blinkBorder(3,stopBlink),this.blinkBorder(4,stopBlink),this.blinkBorder(5,stopBlink)},showFace:function(){this.getChildByName("face").alpha=1},blinkFace:function(area){if(this._faceBlinkCount[area-1]>5)this._faceBlinkCount[area-1]=0;else{var face=this.getChildByName("face_"+area);this.timerOnce(200,this,function(id){face.alpha=1,this.timerOnce(800,this,function(){face.alpha=0,this._faceBlinkCount[id-1]++,this.blinkFace(id)})},[area])}},blinkBorder1:function(area){this.getChildByName("border_"+area).alpha=1,this.getChildByName("border_"+area).tweenTo({alpha:1-this.getChildByName("border_"+area).alpha},750,"sineInOut",this,function(){})},disable:function(){for(i=0;i<5;i++){var border=this.getChildByName("border_"+(i+1));border.tweenCancel(),border.alpha=0}for(var i=0;i<5;i++){var face=this.getChildByName("face_"+(i+1));face.tweenCancel(),face.alpha=0}this._faceBlinkCount=[0,0,0,0,0],this._borderBlinkCount=[0,0,0,0,0]},end:function(){this.offAll(this.EVENT.MOUSE_UP),this._super()}})}),gbx.define("game/baccarat/parts/seat",["comm/ui/sound_button","gbx/render/display/sprite","gbx/render/display/text","comm/ui/ui_utils","game/baccarat/parts/mask_clip","comm/helper/playerdata_mgr"],function(Button,Sprite,Text,uiUtils,MaskClip,playerDataMgr){return Sprite.extend({init:function(isDealer,index,isJM){this._super(),this._inSeat=!1,this._index=index,this._isJM=isJM,this._isDealer=isDealer,this._isMe=!1,this._lastChips=0;var outline=new Sprite;outline.name="player_ouline",isDealer?(outline.setImage("assets/games/baccarat/tex/frame_player.png"),this.size(139,155)):(outline.setImage("assets/games/baccarat/tex/player_head_bg.png"),this.size(90,90)),outline.pivotToCenter(),outline.visible=!1,this.addChild(outline);var back=new Sprite;back.name="player_frame",isDealer?this.size(139,155):this.size(90,90),back.pivotToCenter(),back.visible=!1,this.addChild(back);var maskClip=new MaskClip;maskClip.name="maskClip",maskClip.zOrder=1,back.addChild(maskClip);var head=new Sprite;head.name="player_head",head.setImage("assets/major/head/userhead_0.png"),head.pivotToCenter(),head.pos(0,0),head.zOrder=2,head.scale(.87),back.addChild(head),maskClip.pos(.87*-head.width/2,.87*-head.height/2);var name=new Text;if(name.name="player_name",name.text="",name.fontSize=18,name.color="#ffffff",name.width=80,name.align="center",isDealer?name.pos(-40,-64):(name.pos(2.5,6),name.visible=!1),name.overflow="hidden",back.addChild(name),!isDealer){var shadow=new Sprite;shadow.graphics.drawRect(0,0,70,20,"#000000"),shadow.alpha=.5,shadow.pivotToCenter(),shadow.pos(-35,36),shadow.zOrder=-1,shadow.name="shadow",shadow.visible=!1,this.addChild(shadow)}var bet=new Text;bet.name="player_chips",bet.text="",bet.fontSize=14,bet.color="#E2E365",bet.width=85,isDealer?(bet.pos(-20,40),bet.align="left"):(bet.pos(-45,40),bet.align="center"),back.addChild(bet);var balance=new Text;balance.text="0",balance.fontSize=20,balance.color="#E2E365",balance.align="center",balance.width=85,balance.alpha=0,balance.bold=!0,balance.name="player_balance",back.addChild(balance);var seat=new Button;seat.setSkinImage("assets/games/baccarat/tex/button_sit.png"),seat.stateNum=2,seat.pivotToCenter(),seat.name="chair",seat.setClickHandler(this,this._onSeatClick),this.addChild(seat),this.subscribe("game_baccarat.seat.startMaskClip",this,this.eventStartMaskClip),this.subscribe("game_baccarat.seat.stopMaskClip",this,this.eventStopMaskClip),this.subscribe("game_baccarat.seat.checkShowChair",this,this.eventCheckShowChair)},eventStartMaskClip:function(seatIdx,time){this._index==seatIdx&&this.startMaskClip(time)},eventStopMaskClip:function(seatIdx,force){force?this.stopMaskClip():this._index==seatIdx&&this.stopMaskClip()},eventCheckShowChair:function(){this._inSeat?this.getChildByName("chair").visible=!1:this._isJM&&-1!=playerDataMgr.getSeatIdx()?this.getChildByName("chair").visible=!1:this.getChildByName("chair").visible=!0},startMaskClip:function(time){if(this._inSeat&&!(time<=0)){var headImage=this.getChildByName("player_frame","player_head");this.getChildByName("player_frame","maskClip").start(time,.87*headImage.width,.87*headImage.height)}},stopMaskClip:function(){this.getChildByName("player_frame","maskClip").stop()},_onSeatClick:function(){this.publish("game_baccarat.command.require_showed_seat",this._index)},showChips:function(chips){this._lastChips=chips;var mtx="";if(chips>1e8){var t=Math.floor(chips/1e8);mtx+=t+"亿",chips-=1e8*t}chips=chips>1e4?Math.floor(chips/1e3)/10+"万":uiUtils.getFloatByPower(chips,1),this.getChildByName("player_frame","player_chips").text=mtx+chips},playEmoji:function(pic){var emoji=new Sprite;emoji.setImage("assets/major/emoji/"+pic),emoji.pivotToCenter(),emoji.pos(0,0),emoji.zOrder=10,this.getChildByName("player_frame").addChild(emoji),emoji.tweenTo({scaleX:1,scaleY:1},300,"backIn"),emoji.tweenTo({scaleX:0,scaleY:0},300,"backOut",emoji,emoji.destroy,null,3300)},playerIn:function(name,head,chips,isMe){head||(head=0),this._inSeat=!0,this._isMe=isMe,this.getChildByName("player_frame").visible=!0,(this._isDealer||isMe)&&(this.getChildByName("player_ouline").visible=!0),this.getChildByName("player_frame","player_head").setImage("assets/major/head/userhead_"+head+".png"),this.getChildByName("player_frame","player_name").text=name,this.showChips(chips),this._isJM&&(this.getChildByName("shadow").visible=!0),this.eventCheckShowChair()},playerOut:function(){this.getChildByName("chair").visible=!0,this.getChildByName("player_frame").visible=!1,this.getChildByName("player_ouline").visible=!1,this.getChildByName("shadow").visible=!1,this._inSeat=!1,this._isMe=!1,this.eventCheckShowChair()},isInSeat:function(){return this._inSeat}})}),gbx.define("game/baccarat/parts/shuffle_card",["conf/system","gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/render/display/sprite","comm/base/command_ui","game/baccarat/parts/card","comm/helper/room_mgr","comm/helper/playerdata_mgr","comm/ui/ui_utils","conf/ui_locallization"],function(sys,server,CMD,ERROR_CODE,Sprite,BaseUI,Card,RoomMgr,playerDataMgr,uiUtils,uiLocallization){var diePos={x:180,y:0};return BaseUI.extend({init:function(){this._super(),this._canShufflePlayerId="",this._canclick=!0,this._batchArray=[],this._leftTime=0,this._playerName=null;var parent=new Sprite;parent.name="parent",parent.visible=!1,parent.pos(0,80),this.addChild(parent);var playerName=uiUtils.createSimpleText(uiLocallization.shufflePlayer,"playerName");playerName.pos(-200,-80),playerName.width=400,playerName.fontSize=20,playerName.align="center",parent.addChild(playerName);for(var i=0;i<10;i++){var batchCard=uiUtils.createSprite("assets/games/baccarat/tex/effect/batch_Card.png");batchCard.name=i,this._batchArray.push(batchCard),batchCard.on(this.EVENT.MOUSE_UP,this,this.onChoose,[batchCard.name]),batchCard.zOrder=3*i,batchCard.pivotToCenter(),batchCard.pos(42*i-180,150),parent.addChild(batchCard)}var cutCard_red=uiUtils.createSprite("assets/games/baccarat/tex/effect/cut_Card_red.png","");cutCard_red.name="cutCard_red",cutCard_red.pos(-116,180),cutCard_red.zOrder=7,cutCard_red.pivotToCenter(),parent.addChild(cutCard_red);var cutCard_black=uiUtils.createSprite("assets/games/baccarat/tex/effect/cut_Card_black.png","");cutCard_black.name="cutCard_black",cutCard_black.visible=!1,cutCard_black.pivotToCenter(),parent.addChild(cutCard_black),this.timerLoop(1e3,this,function(){this._leftTime-1>0?this._leftTime-=1:this._leftTime=0,this.updateTime()})},updateTime:function(){var myName=this.getChildByName("parent").getChildByName("playerName"),time="";if(time=this._leftTime>9?this._leftTime:"0"+this._leftTime,this._playerName){var str=uiLocallization.shufflePlayer;str=str.replace("A",this._playerName),myName.text=str+"  "+time}else myName.text=""},onChoose:function(name){if(this._canShufflePlayerId==playerDataMgr.getMyUID()){var index=parseInt(name),sendMsg=gtea.protobuf.encode("BaccaratShuffleEnd",{par:index});server.sendToRoom(CMD.BaccaratShuffleEnd,sendMsg)}},onSyncShuffle:function(idx,cardValue,cardNum){this._leftTime=0,this._playerName=null,this.updateTime();this.getChildByName("parent");if(this._canclick){this._canclick=!1;var cutCard_red=this.getChildByName("parent","cutCard_red"),cutCard_black=this.getChildByName("parent","cutCard_black"),index=idx;9==index&&(index=8),cutCard_red.pos(42*index-180-20,180),cutCard_red.zOrder=3*index+1,cutCard_red.tweenTo({x:42*index-180-2,y:152},200,"linearOut"),this.timerOnce(200,this,function(){for(var moveArray=[],i=this._batchArray.length-1;i>index;i--){var temp=this._batchArray[i];moveArray.push(temp),this._batchArray.splice(i,1)}moveArray.reverse();for(i=0;i<moveArray.length;i++)moveArray[i].tweenTo({y:20},500,"linearOut");cutCard_red.tweenTo({y:22},500,"linearOut"),this.timerOnce(200,this,function(){for(var i=0;i<this._batchArray.length;i++){var temp=this._batchArray[i],length=this._batchArray.length,tarX=temp.x+42*(10-length);temp.tweenTo({x:tarX},800,"linearOut")}}),this.timerOnce(1200,this,function(){for(var dis=42*(10-moveArray.length)+55,i=0;i<moveArray.length;i++){var tarX=moveArray[i].x-dis;moveArray[i].tweenTo({x:tarX},800,"linearOut")}var tarRx=cutCard_red.x-dis-2;cutCard_red.tweenTo({x:tarRx},800,"linearOut")}),this.timerOnce(2e3,this,function(){for(i=0;i<this._batchArray.length;i++){var temp=this._batchArray[i];temp.zOrder=temp.zOrder+100}for(var i=0;i<moveArray.length;i++)moveArray[i].tweenTo({x:moveArray[i].x+55,y:150},400,"linearOut");cutCard_red.tweenTo({x:cutCard_red.x+55,y:152},400,"linearOut"),this.timerOnce(400,this,function(){for(i=0;i<this._batchArray.length;i++){var temp=this._batchArray[i];moveArray.push(temp)}this._batchArray=moveArray;for(var i=0;i<this._batchArray.length;i++)(temp=this._batchArray[i]).name=i,temp.zOrder=3*i,temp.on(this.EVENT.MOUSE_UP,this,this.onChoose,[temp.name]);cutCard_red.zOrder=-1})}),this.timerOnce(2400,this,function(){cutCard_black.visible=!0,cutCard_black.pos(101,-100),cutCard_black.zOrder=25,cutCard_black.tweenTo({x:153,y:152},500,"linearOut")}),this.timerOnce(3200,this,function(){this.getChildByName("parent").tweenTo({x:diePos.x,y:diePos.y,rotation:-20,scaleX:0,scaleY:0},300,"linearOut",this,function(){this.reset()})}),this.timerOnce(3800,this,function(){this.playAnimation(cardValue,cardNum)})})}},reset:function(){var parent=this.getChildByName("parent");parent.visible=!1,parent.rotation=0,parent.scale(1,1),parent.pos(0,80);var cutCard_red=this.getChildByName("parent","cutCard_red");cutCard_red.pos(-116,180),cutCard_red.zOrder=7,this.getChildByName("parent","cutCard_black").visible=!1,this._canclick=!0;for(var i=0;i<this._batchArray.length;i++){var batchCard=this._batchArray[i];batchCard.name=i,batchCard.on(this.EVENT.MOUSE_UP,this,this.onChoose,[batchCard.name]),batchCard.zOrder=3*i,batchCard.pivotToCenter(),batchCard.pos(42*i-180,150)}},openShuffle:function(playerId,playerName,time){this.getChildByName("parent").visible=!0,this._canShufflePlayerId=playerId,this._canclick=!0,this._leftTime=time,this._playerName=playerName},playAnimation:function(cardValue,cardNum){for(var baseDelay=500,sPos={x:224,y:-16},dPos={x:-208,y:5},cardArray=[],i=0;i<=cardNum;i++){var card=new Card;card.cardValue=cardValue,card.scale(.32),card.pos(sPos.x,sPos.y),card.pivotToCenter(),0==i?card.showFace():card.showBack(),card.visible=!1,this.addChild(card),cardArray.push(card)}var posArr=[{x:0,y:-50},{x:-160,y:50},{x:-80,y:50},{x:0,y:50},{x:80,y:50},{x:160,y:50},{x:-160,y:190},{x:-80,y:190},{x:0,y:190},{x:80,y:190},{x:160,y:190}];1==cardNum?posArr[1].x=0:2==cardNum&&(posArr[1].x=-40,posArr[2].x=40);for(var deltaDelay=200,i=0;i<=cardNum;i++)this.timerOnce(baseDelay,cardArray[i],function(pos){this.visible=!0,this.flyToAndScaleWithTime(pos.x,pos.y,0,.32,400)},[posArr[i]]),baseDelay+=deltaDelay;baseDelay+=1e3,deltaDelay=100;for(i=0;i<=cardNum;i++)this.timerOnce(baseDelay,this,function(index){cardArray[index].flyToAndScaleWithTime(dPos.x,dPos.y,.32,0,400,cardArray[index],function(){this.removeSelf()}),this.parent.minusElapseCardCount()},[i]),baseDelay+=deltaDelay}})}),gbx.define("game/baccarat/parts/sound_panel",["gbx/net/messagecommand","gbx/net/errorcode","gbx/net/errorcode_des","gbx/net/connector","gbx/render/display/sprite","comm/base/command_ui","comm/ui/sound_button","comm/helper/conf_mgr","comm/helper/room_mgr","comm/helper/playerdata_mgr","comm/ui/ui_utils","conf/ui_locallization"],function(CMD,ERROR_CODE,ERROR_CODE_DES,server,Sprite,BaseUI,Button,confMgr,RoomMgr,playerDataMgr,uiUtils,uiLocallization){return BaseUI.extend({init:function(){this._super(),this._step=-1;for(var soundBtnNames=["mei_bian","liang_bian","san_bian","si_bian","gong","chui","ding"],i=0;i<soundBtnNames.length;i++){var button=uiUtils.createButton("assets/games/baccarat/tex/soundBtn.png",2,soundBtnNames[i]);button.pos(92*i-2,4),button.scale(1.2);var text=uiUtils.createSimpleText(uiLocallization[soundBtnNames[i]]);text.fontSize=20,text.width=40,text.align="center",text.bold=!0,text.pos(18,9),button.addChild(text),button.setClickHandler(this,this.onClickSoundBtn),this.addChild(button)}this.subscribe("game_baccarat.play.playSound",this,this.eventPlaySound)},onClickSoundBtn:function(btn){var str=btn.name,sendData=gtea.protobuf.encode("BaccaratLookSoundJM",{sendCardStep:this._step,sound:str});server.sendToRoom(CMD.BaccaratLookSoundJM,sendData)},setStep:function(step){this._step=step},eventPlaySound:function(str){uiUtils.playSound(str)}})}),gbx.define("game/baccarat/parts/top_card_panel",["conf/system","gbx/net/messagecommand","gbx/net/errorcode","gbx/net/errorcode_des","gbx/net/connector","comm/base/game_ui","gbx/render/display/sprite","gbx/render/display/text","comm/ui/sound_button","game/baccarat/parts/card","game/baccarat/parts/card_mi","comm/helper/sound_mgr","comm/helper/conf_mgr","comm/ui/ui_utils"],function(sys,CMD,ERROR_CODE,ERROR_CODE_DES,server,BaseUI,Sprite,Text,Button,Card,CardMi,soundMgr,confMgr,uiUtils){return BaseUI.extend({init:function(){this._super(),this._topCardFarmer=[],this._topCardBanker=[];var bg=new Sprite;bg.setImage("assets/games/baccarat/tex/top_card_bg.png"),bg.visible=!0,this.addChild(bg);var farmerPoint=uiUtils.createSimpleText(0,"text");farmerPoint.name="farmerPoint",farmerPoint.pos(35,200),farmerPoint.color="#004af7",farmerPoint.stroke=4,farmerPoint.fontSize=40,farmerPoint.strokeColor="#ffffff",farmerPoint.zOrder=2,this.addChild(farmerPoint);var bankerPoint=uiUtils.createSimpleText(0,"text");bankerPoint.name="bankerPoint",bankerPoint.pos(sys.halfWidth+35,200),bankerPoint.color="#ff0000",bankerPoint.stroke=4,bankerPoint.fontSize=40,bankerPoint.strokeColor="#ffffff",bankerPoint.zOrder=2,this.addChild(bankerPoint);for(var posArr=[{x:137,y:110},{x:240,y:110},{x:190,y:223}],j=0;j<2;j++)for(var i=0;i<3;i++){var card=new Card;card.setScale(.4),0==j?(card.pos(posArr[i].x,posArr[i].y),this._topCardFarmer.push(card)):(card.pos(posArr[i].x+sys.halfWidth,posArr[i].y),this._topCardBanker.push(card)),2==i&&(card.rotation=90),card.visible=!1,card.zOrder=2,this.addChild(card)}},_simpGetPoint:function(){for(var cardValue=0,i=0;i<arguments.length;i++)cardValue+=Math.min(10,Card.getPoint(arguments[i]));return cardValue%10},sendCardFarmer:function(cardNum,doAnimation,car1,car2,car3){this.visible=!0,this._sendCard(!1,cardNum,doAnimation,car1,car2,car3)},sendCardBanker:function(cardNum,doAnimation,car1,car2,car3){this.visible=!0,this._sendCard(!0,cardNum,doAnimation,car1,car2,car3)},_sendCard:function(isBanker,cardNum,doAnimation,car1,car2,car3){var card1=null,card2=null,card3=null,pointText=null;if(isBanker?(card1=this._topCardBanker[0],card2=this._topCardBanker[1],card3=this._topCardBanker[2],pointText=this.getChildByName("bankerPoint")):(card1=this._topCardFarmer[0],card2=this._topCardFarmer[1],card3=this._topCardFarmer[2],pointText=this.getChildByName("farmerPoint")),card1.cardValue=car1,card2.cardValue=car2,doAnimation){card1.showBack(),card1.visible=!0;if(this.timerOnce(200,this,function(){card1.flipToFace(this,function(){pointText.text=this._simpGetPoint(car1),pointText.visible=!0})}),this.timerOnce(1800,this,function(){card2.showBack(),card2.visible=!0,this.timerOnce(200,this,function(){card2.flipToFace(this,function(){pointText.text=this._simpGetPoint(car1,car2)})})}),car3){var card3DelayTime=3600;isBanker&&5==cardNum&&(card3DelayTime=2700),this.timerOnce(card3DelayTime,this,function(){card3.cardValue=car3,card3.showBack(),card3.visible=!0,this.timerOnce(200,this,function(){card3.flipToFace(this,function(){pointText.text=this._simpGetPoint(car1,car2,car3)})})})}}else pointText.text=car3?this._simpGetPoint(car1,car2,car3):this._simpGetPoint(car1,car2),pointText.visible=!0,card1.visible=!0,card1.showFace(),card2.visible=!0,card2.showFace(),car3&&(card3.cardValue=car3,card3.visible=!0,card3.showFace())},clear:function(){this.getChildByName("bankerPoint").text=0,this.getChildByName("farmerPoint").text=0;for(var i=0;i<3;i++)this._topCardFarmer[i].visible=!1,this._topCardBanker[i].visible=!1;this.visible=!1}})}),gbx.define("game/baccarat/parts/top_card_panel_mi",["conf/system","gbx/net/messagecommand","gbx/net/errorcode","gbx/net/errorcode_des","gbx/net/connector","comm/base/game_ui","gbx/render/display/sprite","gbx/render/display/text","comm/ui/sound_button","game/baccarat/parts/card","comm/helper/sound_mgr","comm/helper/conf_mgr","comm/ui/ui_utils","game/baccarat/parts/top_card_panel"],function(sys,CMD,ERROR_CODE,ERROR_CODE_DES,server,BaseUI,Sprite,Text,Button,Card,soundMgr,confMgr,uiUtils,TopCardPanel){return TopCardPanel.extend({init:function(){this._super(),this.subscribe("game_baccarat.play.set_top_card_jm",this,this.eventSetTopCard),this.subscribe("game_baccarat.play.flip_top_card_jm",this,this.eventFlipTopCardFace),this.subscribe("game_baccarat.play.clear_top_card_jm",this,this.eventClear)},eventSetTopCard:function(isBanker,stage,pointArr){this.visible=!0;var cardArray=[],point=null;isBanker?(cardArray=this._topCardBanker,point=this.getChildByName("bankerPoint")):(cardArray=this._topCardFarmer,point=this.getChildByName("farmerPoint")),cardArray[0].cardValue=pointArr[0],cardArray[1].cardValue=pointArr[1],3==pointArr.length&&(cardArray[2].cardValue=pointArr[2]),cardArray[0].visible=!0,cardArray[1].visible=!0,cardArray[0].showBack(),cardArray[1].showBack(),0==stage?cardArray[2].visible=!1:1==stage?(cardArray[0].showFace(),cardArray[1].showFace(),point.visible=!0,point.text=this._simpGetPoint(pointArr[0],pointArr[1])):2==stage?(cardArray[0].showFace(),cardArray[1].showFace(),3==pointArr.length&&(cardArray[2].visible=!0,cardArray[2].showBack()),point.visible=!0,point.text=this._simpGetPoint(pointArr[0],pointArr[1])):3==stage&&(cardArray[0].showFace(),cardArray[1].showFace(),point.visible=!0,point.text=this._simpGetPoint(pointArr[0],pointArr[1]),3==pointArr.length&&(cardArray[2].visible=!0,cardArray[2].showFace(),point.text=this._simpGetPoint(pointArr[0],pointArr[1],pointArr[2])))},eventFlipTopCardFace:function(isBanker,isThird,pointArr){this.visible=!0;var farmerPoint=this.getChildByName("farmerPoint"),bankerPoint=this.getChildByName("bankerPoint");isBanker?(bankerPoint.visible=!0,isThird?(this._topCardBanker[2].flipToFace(),bankerPoint.text=this._simpGetPoint(pointArr[0],pointArr[1],pointArr[2])):(this._topCardBanker[0].flipToFace(),this._topCardBanker[1].flipToFace(),bankerPoint.text=this._simpGetPoint(pointArr[0],pointArr[1]))):(farmerPoint.visible=!0,isThird?(this._topCardFarmer[2].flipToFace(),farmerPoint.text=this._simpGetPoint(pointArr[0],pointArr[1],pointArr[2])):(this._topCardFarmer[0].flipToFace(),this._topCardFarmer[1].flipToFace(),farmerPoint.text=this._simpGetPoint(pointArr[0],pointArr[1])))},eventClear:function(){this.clear()}})}),gbx.define("game/baccarat/pop/bet_setting",["gbx/render/display/sprite","comm/ui/sound_button","comm/helper/room_mgr","comm/ui/ui_utils","comm/helper/playerdata_mgr","conf/ui_locallization","comm/ui/top_message","comm/helper/conf_mgr"],function(Sprite,Button,RoomMgr,uiUtils,playerDataMgr,uiLocallization,topMessage,confMgr){return Sprite.extend({init:function(){this._super(),this._btns=[];var chipPriceList=confMgr.setting.betPrice,betPriceToIconList=confMgr.setting.betPriceToIcon;this._chipInfoMap=[{price:chipPriceList[0],state:!0},{price:chipPriceList[1],state:!0},{price:chipPriceList[2],state:!0},{price:chipPriceList[3],state:!0},{price:chipPriceList[4],state:!0},{price:chipPriceList[5],state:!1},{price:chipPriceList[6],state:!1},{price:chipPriceList[7],state:!1},{price:chipPriceList[8],state:!1},{price:chipPriceList[9],state:!1},{price:chipPriceList[10],state:!1},{price:chipPriceList[11],state:!1}],this._chipArray=[{price:chipPriceList[0],index:betPriceToIconList[chipPriceList[0]]},{price:chipPriceList[1],index:betPriceToIconList[chipPriceList[1]]},{price:chipPriceList[2],index:betPriceToIconList[chipPriceList[2]]},{price:chipPriceList[3],index:betPriceToIconList[chipPriceList[3]]},{price:chipPriceList[4],index:betPriceToIconList[chipPriceList[4]]}];var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var title=uiUtils.createSimpleText(uiLocallization.choose_bet_title,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);for(var index=0;index<this._chipInfoMap.length;index++){var x=0,y=0;y=135*Math.floor(index/3),x=180*(index%3),(background=uiUtils.createSprite("assets/games/baccarat/tex/choose_chip_bg.png","")).pos(90+x-25,110+y+70),this.addChild(background);var chipIcon=new Button;chipIcon.setSkinImage("assets/games/baccarat/tex/chips/chip"+(index+1)+".png"),chipIcon.stateNum=1,chipIcon.pos(90+x,110+y),chipIcon.scale(1.5),this.addChild(chipIcon),chipIcon.setClickHandler(this,this.OnClick,index);var chooseBtn=new Button;chooseBtn.setSkinImage("assets/games/baccarat/tex/choose_box.png"),chooseBtn.stateNum=1,chooseBtn.pos(90+x+70,y+110+70),chooseBtn.name="btn"+index,this.addChild(chooseBtn),chooseBtn.setClickHandler(this,this.OnClick,index),this._btns.push(chooseBtn);var mark=uiUtils.createSprite("assets/games/baccarat/tex/choose_mark.png","mark");mark.pos(0,-5),mark.name="mark",mark.visible=!0,mark.visible=this._chipInfoMap[index].state,chooseBtn.addChild(mark)}var surebtn=new Button;surebtn.setSkinImage("assets/major/public/button_ok.png");var word=uiUtils.createSprite("assets/major/public/sureBtnG.png");word.pos(65,15),surebtn.addChild(word),surebtn.stateNum=2,surebtn.pos(213.5,900),surebtn.name="sureBtn",surebtn.setClickHandler(this,this.OnClick,surebtn.name),this.addChild(surebtn)},getSelectNum:function(){for(var select=0,index=0;index<this._chipInfoMap.length;index++)this._chipInfoMap[index].state&&select++;return select},check:function(){for(var chipArray=playerDataMgr.getChipArray(),index=0;index<this._chipInfoMap.length;index++){var btn=this._btns[index];this._chipInfoMap[index].state=!1;for(var i=0;i<chipArray.length;i++)this._chipInfoMap[index].price==chipArray[i].price&&(this._chipInfoMap[index].state=!0);btn.getChildByName("mark").visible=this._chipInfoMap[index].state}},setSelect:function(){for(var index=0;index<this._chipInfoMap.length;index++){var btn=this._btns[index];btn&&(btn.getChildByName("mark").visible=this._chipInfoMap[index].state)}},CompleteSelect:function(){for(var num=0,index=0;index<this._chipInfoMap.length;index++)this._chipInfoMap[index].state||this.getSelectNum()<5&&(this._chipInfoMap[index].state=!0),this._chipInfoMap[index].state&&(this._chipArray[num].price=this._chipInfoMap[index].price,this._chipArray[num].index=index,num++)},OnClick:function(btn,tag){"sureBtn"==tag?(this.CompleteSelect(),playerDataMgr.setChipArray(this._chipArray),this.publish("game_baccarat.betsetting.setChooseLimit",this._chipArray),this.visible=!1):"btn_close"==btn.name?this.visible=!1:this.ChoiceChip(tag)},ChoiceChip:function(index){this.getSelectNum()>=5&&!this._chipInfoMap[index].state?topMessage.post(uiLocallization.select_chips_max):(this._chipInfoMap[index].state=!this._chipInfoMap[index].state,this.setSelect())}})}),gbx.define("game/baccarat/pop/player_score",["comm/ui/popup","gbx/render/display/sprite","gbx/render/display/text","comm/ui/sound_button"],function(Popup,Sprite,Text,List,Button){return Popup.extend({init:function(){this._super(0,!0);for(var table=[[{label:"地主",color:"#d21414"},{label:"地主对",color:"#d21414"}],[{label:"农民",color:"#375fd3"},{label:"农民对",color:"#375fd3"}],[{label:"和",color:"#45b333"},{label:"总计",color:"#ffffff"}]],r=0;r<table.length;r++)for(var c=0;c<table[r].length;c++){var data=table[r][c],label=new Text;label.text=data.label+":",label.color=data.color,label.fontSize=50,label.stroke=3,label.strokeColor="#ffffff",label.pos(450*c+30,180*r+30),this.content.addChild(label);var times=new Text;times.text="0",times.color="#ffffff",times.fontSize=50,times.bold=!0,times.width=420,times.align="right",times.pos(450*c+30,180*r+30),times.name="t_"+(2*r+c+1),this.content.addChild(times);var icon=new Sprite;icon.pos(450*c+30,180*r+100),this.content.addChild(icon);var value=new Text;value.text="0",value.color="#ffffff",value.fontSize=50,value.bold=!0,value.width=420,value.align="right",value.pos(450*c+30,180*r+90),value.name="v_"+(2*r+c+1),this.content.addChild(value)}this.publish("game_baccarat.request.bet_record",this,this._fillData)},_fillData:function(data){for(var totalTimes=0,totalWins=0,map=["",1,4,2,5,3,6],i=1;i<=5;i++)this.content.getChildByName("t_"+i).text=data[map[i]].times+" 次",this.content.getChildByName("v_"+i).text=data[map[i]].chips.toString().replace(/(\d)(?=(\d{3})+($|\.))/g,"$1,"),totalTimes+=data[i].times,totalWins+=data[i].chips;this.content.getChildByName("t_6").text=totalTimes+" 次",this.content.getChildByName("v_6").text=totalWins.toString().replace(/(\d)(?=(\d{3})+($|\.))/g,"$1,")}})}),gbx.define("game/baccarat/scene/table",["gbx/hubs","gbx/bridge","gbx/render/stage","gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","game/baccarat/net/msg_receiver","comm/helper/scene_mgr","comm/helper/sound_mgr","comm/helper/conf_mgr","comm/helper/room_mgr","comm/helper/playerdata_mgr","game/baccarat/helper/game_mgr","game/baccarat/ui/table","game/baccarat/ui/table_jinmi","comm/ui/game_broadCast"],function(hubs,bridge,stage,server,CMD,ERROR_CODE,msgReceiver,sceneMgr,soundMgr,confMgr,roomMgr,playerDataMgr,GameMgr,TableUI,TableJinMi,broadCast){var tableUI=null,gameMgr=null,pauseFlag=!1,gameEnd=function(){sceneMgr.switchTo("lobby")},gamePause=function(){return void 0==document.gamePause?(document.gamePauseInGame=!0,void(pauseFlag=!0)):document.gamePause?(document.gamePauseInGame=!0,void(pauseFlag=!0)):void(pauseFlag&&(pauseFlag=!1,stage.renderingEnabled=!1,roomMgr.getRoomDataHeadFromServer(this,function(msgData){null!=msgData&&resetRoom(msgData)}),stage.renderingEnabled=!0))},resetRoom=function(roomData){removeRoom(),createRoom(roomData)},createRoom=function(roomData){var baccaratRoomData=roomData.baccaratRoom;switch(roomMgr.getChoose().baccaratRoomType){case confMgr.definition.BaccaratRoomType.Dragon:tableUI=new TableUI(!1);break;case confMgr.definition.BaccaratRoomType.JingMi:case confMgr.definition.BaccaratRoomType.Vip:tableUI=new TableJinMi;break;case confMgr.definition.BaccaratRoomType.Six:tableUI=new TableUI(!0)}gameMgr=new GameMgr,tableUI.setGameMgr(gameMgr),tableUI.addToStage(),gameMgr.setRoomData(baccaratRoomData),playerDataMgr.setRoomId(roomData.roomId),msgReceiver.setGameMgr(gameMgr)},removeRoom=function(){msgReceiver.setGameMgr(null),null!=tableUI&&tableUI.destroy(),null!=gameMgr&&gameMgr.end(),playerDataMgr.setRoomId(null)},afterGetRoomData=function(roomData){null!=roomData?(sceneMgr.switchToAfterPrepare(),createRoom(roomData),broadCast.checkCurrentScene(),hubs.subscribe("global.game_status.reset_room",resetRoom),hubs.subscribe("global.app.back_action",gameEnd),hubs.subscribe("global.game_status.pause",gamePause)):sceneMgr.switchTo("lobby")};return{prepareShow:function(){roomMgr.getRoomDataFromServer(null,afterGetRoomData)},show:function(){},end:function(){hubs.unsubscribe("global.game_status.reset_room",resetRoom),hubs.unsubscribe("global.app.back_action",gameEnd),hubs.unsubscribe("global.game_status.pause",gamePause),removeRoom(),soundMgr.playBGM("assets/major/bgm/back.mp3")}}}),gbx.define("game/baccarat/ui/super/table_face",["conf/system","comm/base/game_ui","gbx/render/display/sprite","gbx/render/display/animation","gbx/render/display/text","gbx/render/ui/list","gbx/render/ui/panel","gbx/render/schema","comm/ui/sound_button","comm/ui/custom_tab","gbx/pool","game/baccarat/parts/seat","game/baccarat/parts/putchip_area","game/baccarat/parts/history_box","game/baccarat/parts/bet_panel","game/baccarat/parts/counter","game/baccarat/parts/chip","game/baccarat/parts/card_place","game/baccarat/parts/player_list","game/baccarat/parts/chat_panel","game/baccarat/parts/shuffle_card","comm/helper/conf_mgr","comm/helper/sound_mgr","comm/helper/playerdata_mgr","comm/helper/room_mgr","comm/ui/top_message","comm/ui/top_confirm","comm/ui/bitmap_number","game/lobby/lobbypop/game_help","game/baccarat/pop/bet_setting","game/lobby/lobbypop/bank_setting","gbx/net/errorcode","gbx/net/errorcode_des","comm/ui/ui_utils","conf/ui_locallization","platform/platform_manager","comm/helper/scene_mgr"],function(sys,BaseUI,Sprite,Animation,Text,List,Panel,Schema,Button,CustomTab,Pool,Seat,PutchipArea,HistoryBox,BetPanel,Counter,Chip,CardPlace,PlayerList,ChatPanel,ShuffleCard,confMgr,soundMgr,playerDataMgr,roomMgr,topMessage,topConfirm,BitmapNumber,GameHelp,BetSetting,BankSetting,ERROR_CODE,ERROR_CODE_DES,uiUtils,uiLocallization,platformManager,sceneMgr){return BaseUI.extend({init:function(){this._super(),this._gameMgr=null,this._canBet=!0,this._hasBet=!1,this._canMinusCardCount=!1,this._chatContent=[];var tree=[{type:"Text",props:{text:"0",color:"#ffffff",fontSize:18,width:270,align:"center",pivotToCenter:[],zOrder:7,bold:!0,pos:[sys.halfWidth,1084],name:"playerName"}},{type:"Text",props:{text:"0",color:"#E2E365",fontSize:15,width:270,align:"center",pivotToCenter:[],zOrder:7,pos:[sys.halfWidth,1110],name:"my_chips"}},{type:"Text",props:{text:"",color:"#E2E365",fontSize:18,align:"left",pos:[100,8],zOrder:6,name:"addTip"}},{type:"Text",props:{text:"",color:"#E2E365",fontSize:19,width:130,align:"left",zOrder:7,bold:!0,pos:[240,1112],name:"my_chips_tip"}},{type:"Sprite",props:{pos:[60,320],name:"dealer_info",alpha:.7,zOrder:4,visible:!1,childs:[{type:"Text",props:{text:uiLocallization.series_banker,color:"#E6DAC2",fontSize:15,pos:[20,8],align:"left",name:"dealer_combo"}},{type:"Text",props:{text:uiLocallization.banker_score,color:"#E6DAC2",fontSize:15,align:"left",pos:[100,8],name:"dealer_score"}}]}},{type:"Sprite",props:{setImage:["assets/games/baccarat/tex/dealer.png"],pos:[sys.halfWidth,435],pivotToCenter:[],zOrder:2,name:"dealer_com"}},{type:Seat,ctor:[!0,-1],props:{pos:[sys.halfWidth,417],name:"seat_dealer",visible:!0,zOrder:4,childs:[]}},{type:"Sprite",props:{name:"seats",zOrder:4,childs:[]}},{type:"Button",props:{setSkinImage:["assets/games/baccarat/tex/button_player_list.png"],stateNum:2,pos:[23,532],zOrder:4,name:"btPlayerList",childs:[{type:"Text",props:{color:"#FFD39B",fontSize:15,width:20,align:"center",text:"0",pos:[15,26],name:"text"}}],setClickHandler:[this,this.showAllPlayerList]}},{type:"Button",props:{setSkinImage:["assets/games/baccarat/tex/button_dealer_list.png"],stateNum:2,pos:[21,480],zOrder:4,name:"btDealerList",childs:[{type:"Text",props:{color:"#FFD39B",fontSize:15,width:20,align:"center",text:"0",pos:[15,26],name:"text"}}],setClickHandler:[this,this.showAllDealerList]}},{type:"Text",props:{text:"0",fontSize:15,color:"#cccccc",width:80,zOrder:4,align:"center",pos:[568,558],name:"card_count",childs:[{type:"Text",props:{text:uiLocallization.left_cardNum,fontSize:15,color:"#cccccc",width:100,zOrder:4,align:"center",pos:[-55,0],alpha:1}}]}},{type:HistoryBox,props:{zOrder:6,name:"history"}},{type:"Sprite",props:{zOrder:7,name:"chips_layer"}},{type:"Sprite",props:{setImage:["assets/games/baccarat/tex/mark_bet.png"],pivotToCenter:[],pos:[sys.halfWidth,sys.halfHeight],zOrder:10,alpha:0,name:"can_put_chip_label"}},{type:"Sprite",props:{setImage:["assets/games/baccarat/tex/mark_stopbet.png"],pivotToCenter:[],pos:[sys.halfWidth,sys.halfHeight],zOrder:10,alpha:0,name:"stop_put_chip_label"}},{type:"Sprite",props:{setImage:["assets/games/baccarat/tex/win_1.png"],pivotToCenter:[],pos:[sys.halfWidth,sys.halfHeight],zOrder:10,alpha:0,name:"win_side"}},{type:BetPanel,props:{pos:[31,978],zOrder:6,name:"bet_panel"},exec:[["setCommand","double_putchip",this.doubleBetOn,this],["setCommand","repeat_putchip",this.repeatBetOn,this]]},{type:"Button",props:{setSkinImage:["assets/major/public/back_002.png"],stateNum:2,pos:[8,320],zOrder:4,name:"backBtn",setClickHandler:[this,this.quitGame]}},{type:"Button",props:{setSkinImage:["assets/major/public/button_help_1.png"],stateNum:2,pos:[565,320],zOrder:4,name:"helpBtn",setClickHandler:[this,this.showHelp]}},{type:"Button",props:{setSkinImage:["assets/games/baccarat/tex/chip_setting.png"],stateNum:2,pos:[565,976],zOrder:7,name:"openBetSet",setClickHandler:[this,this.showSetting]}},{type:"Button",props:{stateNum:2,pivotToCenter:[],pos:[sys.halfWidth,510],setData:["side","up"],name:"btn_dealer",zOrder:5,setClickHandler:[this,this.becomeDealer]}},{type:PlayerList,ctor:["player_list"],props:{pos:[0,sys.halfHeight-250],zOrder:9,name:"player_list",visible:!1}},{type:PlayerList,ctor:["dealer_list"],props:{pos:[0,sys.halfHeight-250],zOrder:9,name:"dealer_list",visible:!1}},{type:"Button",props:{setSkinImage:["assets/major/public/button_chat.png"],stateNum:2,pos:[490,320],zOrder:4,name:"chatBtn",setClickHandler:[this,this.startSendChat,"serif"]}},{type:"Sprite",props:{pos:[420,455],name:"chat",zOrder:6,visible:!1,childs:[{type:"Sprite",props:{setImage:["assets/games/baccarat/tex/chat/frame_chat.png"],pos:[0,0],scaleY:[.75]}},{type:Panel,props:{size:[242,54],pos:[14,0],vScrollBarSkin:"",name:"content",setData:["lastY",0]}}]}},{type:ChatPanel,props:{pos:[0,sys.halfHeight-250],zOrder:10,name:"chat_panel",visible:!1}},{type:BetSetting,props:{pos:[0,0],name:"settingPanel",visible:!1,zOrder:10}},{type:GameHelp,props:{pos:[0,0],name:"gameHelp",visible:!1,zOrder:10}},{type:ShuffleCard,props:{pos:[sys.halfWidth,515],zOrder:9,name:"shuffleCard1"}}];new Schema(tree).appendTo(this),this.subscribe("game_baccarat.play.set_player_in_seat",this,this.eventSetPlayerInSeat),this.subscribe("game_baccarat.play.set_player_out_seat",this,this.eventSetPlayerOutSeat),this.subscribe("game_baccarat.play.start_bet",this,this.eventStartBet),this.subscribe("game_baccarat.play.send_card",this,this.eventSendCard),this.subscribe("game_baccarat.play.update_players_info",this,this.eventUpdatePlayersInfo),this.subscribe("game_baccarat.play.update_player_gold",this,this.eventUpdatePlayerGold),this.subscribe("game_baccarat.play.update_card_count",this,this.eventUpdateCardCount),this.subscribe("game_baccarat.play.chat_incomming",this,this.eventChat),this.subscribe("game_baccarat.play.player_send_emoji",this,this.eventPlayerShowEmoji),this.subscribe("global.playerdata.update.itembag",this,this.eventUpdateMyChips),this.subscribe("game_baccarat.play.set_player_list",this,this.eventSetPlayerList),this.subscribe("game_baccarat.play.setRoomPlayersCount",this,this.eventSetRoomPlayersCount),this.subscribe("game_baccarat.play.set_dealer_list",this,this.eventSetDealerList),this.subscribe("game_baccarat.play.up_player_dealer",this,this.eventUpPlayerDealer),this.subscribe("game_baccarat.play.up_com_dealer",this,this.eventUpComDealer),this.subscribe("game_baccarat.play.down_player_dealer",this,this.eventDownPlayerDealer),this.subscribe("game_baccarat.command.set_dealer_button",this,this.eventSetDealerButton),this.subscribe("game_baccarat.play.update_dealer_info",this,this.eventUpdateDealerInfo),this.subscribe("game_baccarat.play.update_area",this,this.eventUpdateAreaChips),this.subscribe("game_baccarat.play.removeBet",this,this.eventRemoveBet),this.subscribe("game_baccarat.play.lockBet",this,this.eventLockBet),this.subscribe("game_baccarat.play.update_area_my_chip",this,this.eventUpdateAreaMyChips),this.subscribe("game_baccarat.play.clear_area_my_chip",this,this.eventClearAreaMyChips),this.subscribe("game_baccarat.play.fly_bet",this,this.eventFlyBet),this.subscribe("game_baccarat.play.add_win_area",this,this.eventSetWinArea),this.subscribe("game_baccarat.play.add_history",this,this.eventAddHistory),this.subscribe("game_baccarat.play.add_game_round",this,this.eventSetRoundResult),this.subscribe("game_baccarat.command.show_fail_message",this,this.eventShowFailText),this.subscribe("game_baccarat.play.shuffleCardStart",this,this.eventShuffleCardStart),this.subscribe("game_baccarat.play.shuffleCardEnd",this,this.eventShuffleCardEnd),this.subscribe("game_baccarat.play.clear_table",this,this.eventClearStage),soundMgr.stopBGM(),this._judgeOpenDealerList()},setGameMgr:function(gameMgr){this._gameMgr=gameMgr},eventSetPlayerInSeat:function(seatIdx,nick,head,gold,isMe){seatIdx>-1&&seatIdx<this._seatPos.length&&this.getChildByName("seats","seat_"+seatIdx).playerIn(nick,head,gold,isMe)},eventSetPlayerOutSeat:function(seatIdx){seatIdx>-1&&seatIdx<this._seatPos.length&&this.getChildByName("seats","seat_"+seatIdx).playerOut()},eventUpdatePlayersInfo:function(changedList,addCarryOnGold){this.timerOnce(5e3,this,function(cChangedList,addGold){if(cChangedList)for(var i=0;i<cChangedList.length;i++){var playerId=cChangedList[i].playerId,seatIdx=cChangedList[i].seatIdx,carryOnGold=cChangedList[i].carryOnGold;playerDataMgr.isMyself(playerId)&&this.eventUpdateMyChips(seatIdx,addGold),seatIdx>-1&&this.getChildByName("seats","seat_"+seatIdx).showChips(carryOnGold)}},[changedList,addCarryOnGold])},eventUpdatePlayerGold:function(seatIdx,gold){seatIdx>-1&&seatIdx<this._seatPos.length&&this.getChildByName("seats","seat_"+seatIdx).showChips(gold)},eventUpdateCardCount:function(number){this.getChildByName("card_count").text=number},minusElapseCardCount:function(){if(this._canMinusCardCount){var cardCount=this.getChildByName("card_count"),number=parseInt(cardCount.text);cardCount.text=number-1}},_isPlayerInSeat:function(seatIdx){return seatIdx in this._seatPos&&this.getChildByName("seats","seat_"+seatIdx).isInSeat()},counterTimeUp:function(){this._lockBet(),this.getChildByName("counter").visible=!1,this._hasBet?uiUtils.playSound("stop_bet",1):uiUtils.playSound("this_round_no_bet",1);var stopPut=this.getChildByName("stop_put_chip_label");stopPut.alpha=1,this.timerOnce(1800,this,function(){stopPut.tweenTo({alpha:0},500,"sineOut",this,function(){stopPut.alpha=0})})},doubleBetOn:function(){this._canBet&&this.publish("game_baccarat.command.player_repeat_bet",2)},repeatBetOn:function(){this._canBet&&this.publish("game_baccarat.command.player_repeat_bet",1)},eventUpdateAreaChips:function(area,chips){(area=this.getChildByName("pca_"+area)).setTotalChips(chips)},flyChip:function(chipType,fromSeatIdx,area,playerId,doAnimation,chipIndex,integratedChipsInfo){var chip=this._chipPool.alloc(),chipsLayer=this.getChildByName("chips_layer"),pos=confMgr.setting.otherSeatPos;fromSeatIdx in this._seatPos?pos=this._seatPos[fromSeatIdx]:playerDataMgr.isMyself(playerId)&&(pos=confMgr.setting.myPos),chip.type=chipType,chip.area=area,chip.seatIdx=fromSeatIdx,chip.zOrder=2,chip.pos(pos.x,pos.y),chip.playerId=playerId,chipsLayer.addChild(chip),this.flyChipToArea(chip,area,doAnimation,!1,chipIndex,integratedChipsInfo)},eventRemoveBet:function(toSeatIdx,playerId){this._cancelBet(toSeatIdx,playerId),playerDataMgr.isMyself(playerId)&&(this._hasBet=!1)},_cancelBet:function(toSeatIdx,playerId){for(var baseUI=this,chipList=this._findByPlayerId(playerId),baseDelay=this._calculateFlyDelay(1e3,chipList.length),j=(roomMgr.getChoose(),chipList.length-1);j>=0;j--){var chip=chipList[j],delay=baseDelay*(chipList.length-j-1),pos=confMgr.setting.otherSeatPos;toSeatIdx in this._seatPos?pos=this._seatPos[toSeatIdx]:playerDataMgr.isMyself(playerId)&&(pos=confMgr.setting.myPos),this.timerOnce(delay,chip,function(cPos){soundMgr.playSE("assets/games/baccarat/se/chip.mp3"),this.tweenCancel(),this.flyTo(cPos.x,cPos.y,this,function(){this.removeSelf(),baseUI._chipPool.free(this)})},[pos])}},eventLockBet:function(){this._lockBet()},eventCheckStartBet:function(time,isInit){this._hasBet=!1,this.getChildByName("counter").visible=time>0,this.getChildByName("counter").start(time),isInit?(uiUtils.playSound("good_luck",1),time>22?(this._lockBet(),this.timerOnce(500,this,this._showStartBetStep,[!1])):time>0?this._unLockBet(!0):this._lockBet()):this.timerOnce(500,this,function(){this._showStartBetStep(!1)})},_showStartBetStep:function(stopBlink){var canPut=this.getChildByName("can_put_chip_label");canPut.alpha=1,uiUtils.playSound("plz_bet",1),this.timerOnce(1800,this,function(){canPut.tweenTo({alpha:0},500,"sineOut",this,function(){canPut.alpha=0,this._unLockBet(stopBlink)})})},_findAllChips:function(area,seatIdx){for(var resultChips=[],allChips=this.getChildByName("chips_layer").getAllChildren(),i=0;i<allChips.length;i++){var chip=allChips[i];area>0&&area!=chip.area||(seatIdx>=-1&&seatIdx!=chip.seatIdx||resultChips.push(chip))}return resultChips},_findByPlayerId:function(playerId){for(var resultChips=[],allChips=this.getChildByName("chips_layer").getAllChildren(),i=0;i<allChips.length;i++){var chip=allChips[i];playerId==chip.playerId&&resultChips.push(chip)}return resultChips},_calculateFlyDelay:function(duration,chipNum){var delay=duration;return chipNum>0&&(delay=duration/chipNum),delay>20&&(delay=20),delay},_dealerEatAllBet:function(area){for(var baseUI=this,chipList=this._findAllChips(area,-2),baseDelay=this._calculateFlyDelay(1e3,chipList.length),i=chipList.length-1;i>=0;i--){var chip=chipList[i],delay=baseDelay*(chipList.length-i-1);this.timerOnce(delay,chip,function(){soundMgr.playSE("assets/games/baccarat/se/chip.mp3");var pos=confMgr.setting.dealerPos;this.tweenTo(pos,650,"linearOut",this,function(){this.removeSelf(),baseUI._chipPool.free(this)})})}},_dealerVomitToArea:function(area,seatIdx,playerId,chipPriceList){for(var addChipPriceList=[],addChipCount=confMgr.setting.areaOdds[area],i=1;i<addChipCount;i++)for(var j=0;j<chipPriceList.length;j++)addChipPriceList.push(chipPriceList[j]);for(var chipsLayer=this.getChildByName("chips_layer"),baseDelay=this._calculateFlyDelay(1e3,addChipPriceList.length),i=0;i<addChipPriceList.length;i++){var chipType=confMgr.setting.betPriceToIcon[addChipPriceList[i]],delay=baseDelay*(i+1);this.timerOnce(delay,this,function(cChipType,cArea,cSeatIdx,cPlayerId){var chip=this._chipPool.alloc();chip.type=cChipType,chip.area=cArea,chip.seatIdx=cSeatIdx,chip.zOrder=2,chip.playerId=cPlayerId,chip.pos(confMgr.setting.dealerPos.x,confMgr.setting.dealerPos.y),chipsLayer.addChild(chip),this.flyChipToArea(chip,cArea,!0,!0)},[chipType,area,seatIdx,playerId])}},_areaVomitToPlayer:function(){for(var baseUI=this,seatIdxList=[],i=0;i<this._seatPos.length;i++)seatIdxList.push(i);seatIdxList.push(-1);for(i=0;i<seatIdxList.length;i++)for(var chipList=this._findAllChips(confMgr.definition.CHIP_AREA.ALL,seatIdxList[i]),baseDelay=this._calculateFlyDelay(1e3,chipList.length),j=chipList.length-1;j>=0;j--){var chip=chipList[j],delay=baseDelay*(chipList.length-j-1),pos=confMgr.setting.otherSeatPos;this._isPlayerInSeat(chip.seatIdx)&&(pos=this._seatPos[chip.seatIdx]),playerDataMgr.isMyself(chip.playerId)&&-1===chip.seatIdx&&(pos=confMgr.setting.myPos),this.timerOnce(delay,chip,function(cPos){soundMgr.playSE("assets/games/baccarat/se/chip.mp3"),this.tweenTo(cPos,650,"linearOut",this,function(){this.removeSelf(),baseUI._chipPool.free(this)})},[pos])}},roundEndSound:function(farmerLength,bankLength,farmerValue,bankerValue,winSide,pairSide){var deltaTime=0;2===farmerLength&&farmerValue>7?(uiUtils.playSound("farmer_t_"+farmerValue,1),deltaTime+=1e3):farmerValue>=0&&uiUtils.playSound("farmer_"+farmerValue,1),this.timerOnce(800+deltaTime,this,function(){2===bankLength&&bankerValue>7?(uiUtils.playSound("banker_t_"+bankerValue,1),deltaTime+=1e3):bankerValue>=0&&uiUtils.playSound("banker_"+bankerValue,1)}),this.timerOnce(2400+deltaTime,this,function(){winSide==confMgr.definition.WIN_STATE.WIN_BANK?uiUtils.playSound("banker_win",1):winSide==confMgr.definition.WIN_STATE.WIN_FARM?uiUtils.playSound("farmer_win",1):winSide==confMgr.definition.WIN_STATE.WIN_DEUCE&&uiUtils.playSound("duece_win",1)}),pairSide==confMgr.definition.PAIR_SIDE.Both?(this.timerOnce(3400+deltaTime,this,function(){uiUtils.playSound("farmer_pair",1)}),this.timerOnce(4400+deltaTime,this,function(){uiUtils.playSound("banker_pair",1)})):this.timerOnce(3400+deltaTime,this,function(){pairSide==confMgr.definition.PAIR_SIDE.BankerPair?uiUtils.playSound("banker_pair",1):pairSide==confMgr.definition.PAIR_SIDE.FarmerPair&&uiUtils.playSound("farmer_pair",1)})},eventSetPlayerList:function(array){this.getChildByName("player_list").setData(array),this.getChildByName("btPlayerList","text").text=array.length},eventSetRoomPlayersCount:function(count){this.getChildByName("history").refreshPlayerNumber(count)},eventSetDealerList:function(array){this.getChildByName("dealer_list").setData(array),this.getChildByName("btDealerList","text").text=array.length},showAllPlayerList:function(){var pop=this.getChildByName("player_list");pop.visible?pop.visible=!1:(pop.visible=!0,pop.refresh())},showAllDealerList:function(){var pop=this.getChildByName("dealer_list");pop.visible?pop.visible=!1:(pop.visible=!0,pop.refresh())},startSendChat:function(btn,act){var scp=this.getChildByName("chat_panel");"close"===act?scp.visible=!1:scp.visible||(scp.visible=!0)},eventPlayerShowEmoji:function(seatIdx,emoji){seatIdx>-1?this.getChildByName("seats","seat_"+seatIdx).playEmoji(emoji):"dealer"===seatIdx&&this.getChildByName("seat_dealer").playEmoji(emoji)},eventChat:function(type,sender,content,seatIdx){function createText(x,y,text,color,size){var label=new Text;return label.text=text,label.fontSize=size||14,label.color=color||"#ffffff",label.pos(x,y),label.width=199,label.leading=2,label.wordWrap=!0,label}if(!(seatIdx&&type==confMgr.definition.CHAT_TYPE.EMOJI&&seatIdx in this._seatPos)){this._chatContent.push([type,sender,content]);var root=this.getChildByName("chat");root.visible||(root.visible=!0,this.timerOnce(2e3,this,function(){root.visible=!1}));var panel=this.getChildByName("chat","content"),y=panel.getData("lastY");if(this._chatContent.length>1){this._chatContent.shift();for(var tmp,i=0;i<panel.numChildren;i++){var node=panel.getChildAt(i);0===i?(tmp=node,y=0):(node.pos(0,y+2),y+=node.height+2)}tmp.destroy()}if(type===confMgr.definition.CHAT_TYPE.SERIF){t=createText(0,y+2,sender+": "+content);panel.addChild(t),y+=t.height+2}else if(type===confMgr.definition.CHAT_TYPE.EMOJI){var e=function(x,y,text,pic,size){var parent=new Sprite,t=createText(0,size-20,text);parent.addChild(t);var emoji=new Sprite;return emoji.setImage("assets/major/emoji/"+pic),emoji.scale(size/emoji.height),emoji.pos(t.textWidth,0),parent.addChild(emoji),parent.size(242,size),parent.pos(x,y),parent}(0,y+2,sender+": ",content,40);panel.addChild(e),y+=42}else if(type===confMgr.definition.CHAT_TYPE.SYSTEM){var t=createText(0,y+2,content,"#ffff00");panel.addChild(t),y+=t.height+2}panel.setData("lastY",y),panel.callLater(panel.scrollTo,[0,y])}},eventUpdateMyChips:function(seatIdx,addGold){if(addGold>0){if(seatIdx>-1){var tip=this.getChildByName("addTip");tip.text="+"+addGold,tip.alpha=1,tip.pos(this._seatPos[seatIdx].x+35,this._seatPos[seatIdx].y-30),tip.tweenTo({y:this._seatPos[seatIdx].y-40,alpha:0},1200,"sineOut")}var my_chips_tip=this.getChildByName("my_chips_tip");my_chips_tip.text="+"+addGold,my_chips_tip.alpha=1,my_chips_tip.pos(sys.halfWidth+40,1085),my_chips_tip.tweenTo({y:1060,alpha:0},1200,"sineOut")}var gold=uiUtils.getFloatByPower(playerDataMgr.getMyCarryGold(),2);this.getChildByName("my_chips").text=gold,this.getChildByName("my_chips").scaleY=1.2,this.getChildByName("my_chips").y=1108,this.getChildByName("my_chips").tweenTo({scaleY:1,y:1110},100,"sineOut"),this.getChildByName("playerName").text=playerDataMgr.getMyNick()},_judgeOpenDealerList:function(){var data=roomMgr.getChoose();void 0!=data&&(0==data.upToBanker&&(this.getChildByName("btDealerList").visible=!1,this.getChildByName("btn_dealer").visible=!1),data.baccaratRoomType==confMgr.definition.BaccaratRoomType.JingMi&&this.getChildByName("btPlayerList").pos(-200,0),data.baccaratRoomType==confMgr.definition.BaccaratRoomType.Vip&&this.getChildByName("btPlayerList").pos(-200,0))},becomeDealer:function(btn){"up"===btn.getData("side")?this.publish("game_baccarat.command.up_to_dealer"):"cancel"===btn.getData("side")?this.publish("game_baccarat.command.cancel_up_dealer"):this.publish("game_baccarat.command.down_from_dealer")},eventUpPlayerDealer:function(nick,head,gold){this.getChildByName("dealer_com").visible=!1;var dealerSeat=this.getChildByName("seat_dealer");dealerSeat.visible=!0,dealerSeat.playerIn(nick,head,gold),this.getChildByName("dealer_info").visible=!0},eventUpComDealer:function(){this.getChildByName("dealer_com").visible=!0,this.getChildByName("seat_dealer").visible=!1,this.getChildByName("dealer_info").visible=!1},eventDownPlayerDealer:function(){this.getChildByName("dealer_info").visible=!1},eventSetDealerButton:function(side){var btn=this.getChildByName("btn_dealer");btn.setData("side",side),"up"===side?(btn.setSkinImage("assets/games/baccarat/tex/button_bedealer.png"),btn.pivotToCenter()):"down"===side?(btn.setSkinImage("assets/games/baccarat/tex/button_dealeroff.png"),btn.pivotToCenter()):"cancel"===side&&(btn.setSkinImage("assets/games/baccarat/tex/button_requestoff.png"),btn.pivotToCenter()),playerDataMgr.isDealer()?this._lockBet():this._unLockBet(!0)},eventUpdateDealerInfo:function(dealerCombo,dealerScore,dealerGold){this.getChildByName("dealer_info","dealer_combo").text=uiLocallization.series_banker+"  "+dealerCombo,this.getChildByName("dealer_info","dealer_score").text=uiLocallization.banker_score+"  "+dealerScore,this.getChildByName("seat_dealer").showChips(dealerGold)},eventShuffleCardStart:function(playerId,playerName,time){this.getChildByName("shuffleCard1").openShuffle(playerId,playerName,time)},eventShuffleCardEnd:function(idx,cardValue,cardNum){this._canMinusCardCount=!0,this.getChildByName("shuffleCard1").onSyncShuffle(idx,cardValue,cardNum),this.getChildByName("history").clear()},eventShowFailText:function(txt){topMessage.post(txt)},showHelp:function(){this.getChildByName("gameHelp").visible=!0},showSetting:function(){this.getChildByName("settingPanel").visible=!0,this.getChildByName("settingPanel").check()},quitGame:function(){this._hasBet?topConfirm.ask(uiLocallization.onBetLeave,this,function(){this.publish("game_baccarat.command.exit"),roomMgr.lastRoomId=null},function(){}):this.publish("game_baccarat.command.exit")},bGuestLogin:function(){function callback1(){sceneMgr.switchTo("login",!1,!1)}function callback2(){topConfirm.hide()}if(platformManager.getLoginGuest()){var tip=uiLocallization.top_confirm_context;return topConfirm.askBtnWorld(tip,this,uiLocallization.top_confirm3,uiLocallization.top_confirm4,callback1,callback2),!0}return!1},end:function(){this._chipPool.collect(),this._chipPool=null,this._super()}})}),gbx.define("game/baccarat/ui/table",["conf/system","comm/base/game_ui","gbx/render/display/sprite","gbx/render/display/animation","gbx/render/display/text","gbx/render/ui/list","gbx/render/ui/panel","gbx/render/schema","comm/ui/sound_button","gbx/pool","game/baccarat/parts/seat","game/baccarat/parts/putchip_area","game/baccarat/parts/counter","game/baccarat/parts/chip","game/baccarat/parts/card_place","game/baccarat/parts/top_card_panel","comm/helper/conf_mgr","comm/helper/sound_mgr","comm/helper/playerdata_mgr","comm/helper/room_mgr","comm/ui/top_message","comm/ui/top_confirm","comm/ui/bitmap_number","gbx/net/errorcode","gbx/net/errorcode_des","comm/ui/ui_utils","conf/ui_locallization","game/baccarat/ui/super/table_face"],function(sys,BaseUI,Sprite,Animation,Text,List,Panel,Schema,Button,Pool,Seat,PutchipArea,Counter,Chip,CardPlace,TopCardPanel,confMgr,soundMgr,playerDataMgr,RoomMgr,topMessage,topConfirm,BitmapNumber,ERROR_CODE,ERROR_CODE_DES,uiUtils,uiLocallization,SuperTable){return SuperTable.extend({init:function(bSix){this._super(),this._chipPool=new Pool(Chip),this._seatPos=confMgr.setting.seatPos;var bgPath="assets/games/baccarat/tex/lobby_bg.png";bSix&&(bgPath="assets/games/baccarat/tex/lobby_bg_six.png");var tree=[{type:"Sprite",props:{setImage:[bgPath],pos:[0,0],zOrder:0}},{type:PutchipArea,ctor:[0,1,confMgr.definition.CHIP_AREA.FARMER],props:{pos:[sys.halfWidth-232,726],zOrder:4,name:"pca_"+confMgr.definition.CHIP_AREA.FARMER,setClickHandler:[this,this.betOn,confMgr.definition.CHIP_AREA.FARMER]}},{type:PutchipArea,ctor:[0,.95,confMgr.definition.CHIP_AREA.BANKER],props:{pos:[sys.halfWidth,726],zOrder:4,name:"pca_"+confMgr.definition.CHIP_AREA.BANKER,setClickHandler:[this,this.betOn,confMgr.definition.CHIP_AREA.BANKER]}},{type:PutchipArea,ctor:[2,8,confMgr.definition.CHIP_AREA.DEUCE],props:{pos:[sys.halfWidth-77,610],zOrder:4,name:"pca_"+confMgr.definition.CHIP_AREA.DEUCE,setClickHandler:[this,this.betOn,confMgr.definition.CHIP_AREA.DEUCE]}},{type:PutchipArea,ctor:[1,11,confMgr.definition.CHIP_AREA.FARMERPAIR],props:{pos:[sys.halfWidth-156-76,610],zOrder:4,name:"pca_"+confMgr.definition.CHIP_AREA.FARMERPAIR,setClickHandler:[this,this.betOn,confMgr.definition.CHIP_AREA.FARMERPAIR]}},{type:PutchipArea,ctor:[1,11,confMgr.definition.CHIP_AREA.BANKERPAIR],props:{pos:[sys.halfWidth+78,610],zOrder:4,name:"pca_"+confMgr.definition.CHIP_AREA.BANKERPAIR,setClickHandler:[this,this.betOn,confMgr.definition.CHIP_AREA.BANKERPAIR]}},{type:Counter,props:{pos:[sys.halfWidth,576],name:"counter",zOrder:4},exec:[["setCommand","times_up",this.counterTimeUp,this]]},{type:CardPlace,ctor:["banker"],props:{pos:[sys.halfWidth,515],zOrder:6,name:"banker_card_place"}},{type:CardPlace,ctor:["farmer"],props:{pos:[sys.halfWidth,515],zOrder:6,name:"farmer_card_place"}},{type:TopCardPanel,props:{zOrder:9,name:"topCard",visible:!1}}];new Schema(tree).appendTo(this);for(var seats=this.getChildByName("seats"),i=0;i<this._seatPos.length;i++){var tempSeat=new Seat(!1,i,!1);tempSeat.pos(this._seatPos[i].x,this._seatPos[i].y),tempSeat.name="seat_"+i,seats.addChild(tempSeat)}},_unLockBet:function(stopBlink){this._canBet=!0,this.getChildByName("pca_"+confMgr.definition.CHIP_AREA.BANKER).enable(stopBlink),this.getChildByName("pca_"+confMgr.definition.CHIP_AREA.FARMER).enable(stopBlink),this.getChildByName("pca_"+confMgr.definition.CHIP_AREA.DEUCE).enable(stopBlink),this.getChildByName("pca_"+confMgr.definition.CHIP_AREA.BANKERPAIR).enable(stopBlink),this.getChildByName("pca_"+confMgr.definition.CHIP_AREA.FARMERPAIR).enable(stopBlink),this.getChildByName("bet_panel").enabled=!0},_lockBet:function(){this._canBet&&(this._canBet=!1,this.getChildByName("pca_"+confMgr.definition.CHIP_AREA.BANKER).disable(),this.getChildByName("pca_"+confMgr.definition.CHIP_AREA.FARMER).disable(),this.getChildByName("pca_"+confMgr.definition.CHIP_AREA.DEUCE).disable(),this.getChildByName("pca_"+confMgr.definition.CHIP_AREA.BANKERPAIR).disable(),this.getChildByName("pca_"+confMgr.definition.CHIP_AREA.FARMERPAIR).disable(),this.getChildByName("bet_panel").enabled=!1)},eventStartBet:function(time,idDealer,isInit){this.eventCheckStartBet(time,isInit)},eventSendCard:function(bankerCards,farmerCards,doAnimation){this._lockBet(),this.getChildByName("counter").stop();var bankerPlace=this.getChildByName("banker_card_place"),farmerPlace=this.getChildByName("farmer_card_place"),topCardPanel=this.getChildByName("topCard"),cardNum=bankerCards.length+farmerCards.length;bankerCards.splice(0,0,cardNum,doAnimation),farmerCards.splice(0,0,cardNum,doAnimation),doAnimation?(this._canMinusCardCount=!0,farmerPlace.sendCard.apply(farmerPlace,farmerCards),this.timerOnce(900,bankerPlace,bankerPlace.sendCard,bankerCards),topCardPanel.sendCardFarmer.apply(topCardPanel,farmerCards),this.timerOnce(900,topCardPanel,topCardPanel.sendCardBanker,bankerCards)):(farmerPlace.sendCard.apply(farmerPlace,farmerCards),bankerPlace.sendCard.apply(bankerPlace,bankerCards),topCardPanel.sendCardFarmer.apply(topCardPanel,farmerCards),topCardPanel.sendCardBanker.apply(topCardPanel,bankerCards))},betOn:function(area){if(this._canBet&&!this.bGuestLogin()){var betPanel=this.getChildByName("bet_panel");if(!(betPanel.selectingBetIdx<0)){var chip=betPanel.chipArray[betPanel.selectingBetIdx].price;this.publish("game_baccarat.command.player_bet_area",area,chip),this.getChildByName("pca_"+area).blinkBorder1()}}},eventUpdateAreaMyChips:function(area,chips){this._hasBet=!0,this.getChildByName("pca_"+area).setMyChips(chips)},eventClearAreaMyChips:function(){for(var area=confMgr.definition.CHIP_AREA.BANKER;area<=confMgr.definition.CHIP_AREA.FARMERPAIR;area++)this.getChildByName("pca_"+area).setMyChips(0)},eventFlyBet:function(seatIdx,area,playerId,chip,doAnimation){var chipType=confMgr.setting.betPriceToIcon[chip];this.flyChip(chipType,seatIdx,area,playerId,doAnimation)},flyChipToArea:function(chip,toAreaType,doAnimation){var targetArea=this.getChildByName("pca_"+toAreaType),fixedX=0,fixedLengthX=0;switch(toAreaType){case confMgr.definition.CHIP_AREA.FARMER:fixedX=38.5,fixedLengthX=38.5;break;case confMgr.definition.CHIP_AREA.BANKER:fixedX=-38.5,fixedLengthX=38.5}var posX=targetArea.x+fixedX+2*(Math.random()-.5)*(targetArea.width/2-16-fixedLengthX)+targetArea.width/2,posY=targetArea.y+2*(Math.random()-.5)*((targetArea.height-20)/2-16)+(targetArea.height-20)/2;doAnimation?(chip.flyTo(posX,posY),soundMgr.playSE("assets/games/baccarat/se/chip.mp3")):chip.pos(posX,posY)},eventSetWinArea:function(area){this.getChildByName("pca_"+area).blinkFace()},eventAddHistory:function(winSide,pairSide){this.getChildByName("history").add(winSide,pairSide);var winWord=this.getChildByName("win_side");winWord.setImage("assets/games/baccarat/tex/win_"+winSide+".png"),winWord.alpha=1,this.timerOnce(3e3,this,function(){winWord.tweenTo({alpha:0},500,"sineOut",this,function(){winWord.alpha=0})});var bankersPlace=this.getChildByName("banker_card_place"),farmersPlace=this.getChildByName("farmer_card_place"),bankerLength=bankersPlace.getCardData().length,farmerLength=farmersPlace.getCardData().length,farmerValue=farmersPlace.getValue(),bankerValue=bankersPlace.getValue();this.roundEndSound(farmerLength,bankerLength,farmerValue,bankerValue,winSide,pairSide)},eventSetRoundResult:function(failAreas,dealerToAreaChipInfo){this._hasBet=!1,soundMgr.playSE("assets/games/baccarat/se/pong.mp3");for(var index=0;index<failAreas.length;index++){area=failAreas[index];this._dealerEatAllBet(area)}for(var key in dealerToAreaChipInfo){var keyArr=key.split("_"),seatIdx=parseInt(keyArr[0]),area=parseInt(keyArr[1]),playerId=keyArr[2];this.timerOnce(1500,this,this._dealerVomitToArea,[area,seatIdx,playerId,dealerToAreaChipInfo[key]],!1)}this.timerOnce(2500,this,function(){var bankersPlace=this.getChildByName("banker_card_place"),farmersPlace=this.getChildByName("farmer_card_place");bankersPlace.recycleCard(),farmersPlace.recycleCard(),this.getChildByName("topCard").clear()}),this.timerOnce(4500,this,function(){this._areaVomitToPlayer()})},eventClearStage:function(){this.getChildByName("pca_"+confMgr.definition.CHIP_AREA.BANKER).reset(),this.getChildByName("pca_"+confMgr.definition.CHIP_AREA.FARMER).reset(),this.getChildByName("pca_"+confMgr.definition.CHIP_AREA.DEUCE).reset(),this.getChildByName("pca_"+confMgr.definition.CHIP_AREA.BANKERPAIR).reset(),this.getChildByName("pca_"+confMgr.definition.CHIP_AREA.FARMERPAIR).reset(),this.getChildByName("banker_card_place").clear(),this.getChildByName("farmer_card_place").clear(),this.getChildByName("topCard").clear()}})}),gbx.define("game/baccarat/ui/table_jinmi",["conf/system","comm/base/game_ui","gbx/render/display/sprite","gbx/render/display/animation","gbx/render/display/text","gbx/render/ui/list","gbx/render/ui/panel","gbx/render/schema","comm/ui/sound_button","gbx/pool","game/baccarat/parts/seat","game/baccarat/parts/putchip_area_mi","game/baccarat/parts/counter","game/baccarat/parts/chip","game/baccarat/parts/card_place_mi","game/baccarat/parts/sound_panel","game/baccarat/parts/top_card_panel_mi","game/baccarat/parts/baccarat_room_params","comm/helper/conf_mgr","comm/helper/sound_mgr","comm/helper/playerdata_mgr","comm/helper/room_mgr","comm/ui/bitmap_number","gbx/net/errorcode","gbx/net/errorcode_des","comm/ui/ui_utils","conf/ui_locallization","game/baccarat/ui/super/table_face"],function(sys,BaseUI,Sprite,Animation,Text,List,Panel,Schema,Button,Pool,Seat,PutchipAreaMI,Counter,Chip,CardPlaceMI,SoundPanel,TopCardPanelMI,roomParam,confMgr,soundMgr,playerDataMgr,roomMgr,BitmapNumber,ERROR_CODE,ERROR_CODE_DES,uiUtils,uiLocallization,SuperTable){var array=roomParam.getJMChipsPos(),winArray=roomParam.getJMChipsWinPos(),baseBankerPoints=array[0],bankerPoints=[],baseWinBankerPoints=winArray[0],bankerWinPoints=[],baseFarmerPoints=array[1],farmerPoints=[],baseWinFarmerPoints=winArray[1],farmerWinPoints=[],baseDuecePoints=array[2],duecePoints=[],baseWinDuecePoints=winArray[2],dueceWinPoints=[],baseBankerPairPoints=array[3],bankerPairPoints=[],baseWinBankerPairPoints=winArray[3],bankerPairWinPoints=[],baseFarmerPairPoints=array[4],farmerPairPoints=[],baseWinFarmerPairPoints=winArray[4],farmerPairWinPoints=[],farmerGetPos=[sys.halfWidth-60,570],bankerGetPos=[sys.halfWidth+60,570];return SuperTable.extend({init:function(){this._super(),this._chipPool=new Pool(Chip),this._seatPos=[],this._bindPos();var tree=[{type:"Sprite",props:{setImage:["assets/games/baccarat/tex/lobby_bg_1.png"],pos:[0,0],zOrder:0,name:"bg_scene"}},{type:"Sprite",props:{setImage:["assets/games/baccarat/tex/xian_get.png"],pos:farmerGetPos,pivotToCenter:[],zOrder:6,name:"farmer_get"}},{type:"Sprite",props:{setImage:["assets/games/baccarat/tex/zhuang_get.png"],pos:bankerGetPos,pivotToCenter:[],zOrder:6,name:"banker_get"}},{type:PutchipAreaMI,props:{pos:[0,sys.halfHeight-24],zOrder:3,name:"put_area",setClickHandler:[this,this.betOn]}},{type:Counter,props:{pos:[182,499],name:"counter",zOrder:4},exec:[["setCommand","times_up",this.counterTimeUp,this]]},{type:CardPlaceMI,props:{pos:[sys.halfWidth,515],zOrder:9,name:"card_place"}},{type:SoundPanel,props:{pos:[0,1080],zOrder:6,visible:!1,name:"soundPanel"}},{type:"Button",props:{setSkinImage:["assets/major/public/button_fly_card.png"],stateNum:2,pos:[415,320],zOrder:4,name:"flyCardBtn",visible:!0,setClickHandler:[this,this.flyCard]}},{type:TopCardPanelMI,props:{zOrder:9,name:"topCard",visible:!1}}];new Schema(tree).appendTo(this),this.getChildByName("card_count").pos(568,520);for(var seats=this.getChildByName("seats"),i=0;i<this._seatPos.length;i++){var tempSeat=new Seat(!1,i,!0);tempSeat.pos(this._seatPos[i].x,this._seatPos[i].y),tempSeat.name="seat_"+i,seats.addChild(tempSeat)}this.subscribe("game_baccarat.play.getBetMaxPlayer",this,this.eventIconMiflyToSeat),this.subscribe("game_baccarat.play.setSoundPanel",this,this.eventToggleBetPanel),this.subscribe("game_baccarat.play.checkFlyCard",this,this.eventCheckFlyCard),this.subscribe("game_baccarat.play.flycardAnimation",this,this.eventPlayFlyCardAnimation),this.eventCheckFlyCard(!1)},InPolygon:function(x,y,areaPoints){var p;(p={}).x=x,p.y=y;var nCross=0,p1x=NaN,p1y=NaN,p2x=NaN,p2y=NaN,len=0;len=areaPoints.length;for(var i=0;i<len;i+=2){p1x=areaPoints[i],p1y=areaPoints[i+1],p2x=areaPoints[(i+2)%len],p2y=areaPoints[(i+3)%len];areaPoints[i],areaPoints[(i+1)%areaPoints.length];p1y!=p2y&&(p.y<Math.min(p1y,p2y)||p.y>=Math.max(p1y,p2y)||(x=(p.y-p1y)*(p2x-p1x)/(p2y-p1y)+p1x)>p.x&&nCross++)}return nCross%2==1},_bindPos:function(){bankerPoints=[],farmerPoints=[],duecePoints=[],bankerPairPoints=[],farmerPairPoints=[],bankerWinPoints=[],farmerWinPoints=[],dueceWinPoints=[],bankerPairWinPoints=[],farmerPairWinPoints=[];for(var i=0;i<confMgr.setting.seatPos_jinMi.length;i++)this._seatPos.push(confMgr.setting.seatPos_jinMi[i]),bankerPoints.push(baseBankerPoints[i]),farmerPoints.push(baseFarmerPoints[i]),duecePoints.push(baseDuecePoints[i]),bankerPairPoints.push(baseBankerPairPoints[i]),farmerPairPoints.push(baseFarmerPairPoints[i]),bankerWinPoints.push(baseWinBankerPoints[i]),farmerWinPoints.push(baseWinFarmerPoints[i]),dueceWinPoints.push(baseWinDuecePoints[i]),bankerPairWinPoints.push(baseWinBankerPairPoints[i]),farmerPairWinPoints.push(baseWinFarmerPairPoints[i])},_reorderSeats:function(mySeatIdx){for(var seatArr=[],newSeatPos=[],i=0;i<confMgr.setting.seatPos_jinMi.length;i++)i!=mySeatIdx&&seatArr.push(i),newSeatPos.push(null);seatArr.splice(2,0,mySeatIdx);for(i=0;i<seatArr.length;i++){var seatIdx=seatArr[i];newSeatPos[seatIdx]=confMgr.setting.seatPos_jinMi[i],bankerPoints[seatIdx]=baseBankerPoints[i],farmerPoints[seatIdx]=baseFarmerPoints[i],duecePoints[seatIdx]=baseDuecePoints[i],bankerPairPoints[seatIdx]=baseBankerPairPoints[i],farmerPairPoints[seatIdx]=baseFarmerPairPoints[i],bankerWinPoints[seatIdx]=baseWinBankerPoints[i],farmerWinPoints[seatIdx]=baseWinFarmerPoints[i],dueceWinPoints[seatIdx]=baseWinDuecePoints[i],bankerPairWinPoints[seatIdx]=baseWinBankerPairPoints[i],farmerPairWinPoints[seatIdx]=baseWinFarmerPairPoints[i]}this._seatPos=newSeatPos,this.getChildByName("card_place").reorderSeats(seatArr);for(i=0;i<this._seatPos.length;i++)this.getChildByName("seats","seat_"+i).pos(this._seatPos[i].x,this._seatPos[i].y)},eventSetPlayerInSeat:function(seatIdx,nick,head,gold,isMe,leftTime){if(seatIdx>-1&&seatIdx<this._seatPos.length){var seat=this.getChildByName("seats","seat_"+seatIdx);seat.playerIn(nick,head,gold,isMe),isMe&&this._reorderSeats(seatIdx),seat.startMaskClip(leftTime)}},eventIconMiflyToSeat:function(farmerMaxSeatIdx,bankerMaxSeatIdx,doAnimation){var farmerGet=this.getChildByName("farmer_get"),pos=farmerGetPos.slice(0);if(-1!=farmerMaxSeatIdx){tarSeat=this.getChildByName("seats","seat_"+farmerMaxSeatIdx);pos[0]=tarSeat.x,pos[1]=tarSeat.y}doAnimation?farmerGet.tweenTo({x:pos[0],y:pos[1]},200,"sineOut"):farmerGet.pos(pos[0],pos[1]);var bankerGet=this.getChildByName("banker_get");if(pos=bankerGetPos.slice(0),-1!=bankerMaxSeatIdx){var tarSeat=this.getChildByName("seats","seat_"+bankerMaxSeatIdx);pos[0]=tarSeat.x,pos[1]=tarSeat.y}doAnimation?bankerGet.tweenTo({x:pos[0],y:pos[1]},200,"sineOut"):bankerGet.pos(pos[0],pos[1])},eventStartBet:function(time,idDealer,isInit){this._resetTargetAreaPos(),this.getChildByName("farmer_get").pos(farmerGetPos[0],farmerGetPos[1]),this.getChildByName("farmer_get").setImage("assets/games/baccarat/tex/xian_get.png"),this.getChildByName("banker_get").pos(bankerGetPos[0],bankerGetPos[1]),this.getChildByName("banker_get").setImage("assets/games/baccarat/tex/zhuang_get.png"),this.eventCheckStartBet(time,isInit);for(var i=0;i<this._seatPos.length;i++)this.getChildByName("seats","seat_"+i).startMaskClip(time);1==roomMgr.getChoose().upToBanker&&roomMgr.getIsVip()&&(this.getChildByName("btn_dealer").visible=time>0)},_unLockBet:function(stopBlink){playerDataMgr.isDealer()||(this._canBet=!0,this.getChildByName("put_area").enable(stopBlink),this.getChildByName("bet_panel").enabled=!0,this._hasBet||this.eventCheckFlyCard(!1),this._toggleBetPanel(!0))},_lockBet:function(){this._canBet&&(this._canBet=!1,this.getChildByName("put_area").disable(),this.getChildByName("bet_panel").enabled=!1,this.eventCheckFlyCard(!0))},eventToggleBetPanel:function(en,step){this._toggleBetPanel(!en),this.getChildByName("soundPanel").setStep(step)},_toggleBetPanel:function(en){this.getChildByName("bet_panel").visible=en,this.getChildByName("soundPanel").visible=!en,this.getChildByName("openBetSet").visible=en,this.getChildByName("my_chips").visible=en,this.getChildByName("playerName").visible=en},eventSendCard:function(bankersCard,farmersCard,steps,leftTime,step2Send2,farmerSeatIdx,bankerSeatIdx,myLookSide,doAnimation,lookCardDir,lookStep,lookRadian){this._lockBet(),this.eventCheckFlyCard(!0),this.getChildByName("counter").stop(),1==roomMgr.getChoose().upToBanker&&roomMgr.getIsVip()&&(this.getChildByName("btn_dealer").visible=!1),this.publish("game_baccarat.seat.stopMaskClip",-1,!0),doAnimation&&steps[0]==confMgr.definition.BaccaratSendCardStepJM.FarmerFirst&&(this._canMinusCardCount=!0),this.getChildByName("card_place").sendCardCenter(farmersCard,bankersCard,steps,leftTime,step2Send2,farmerSeatIdx,bankerSeatIdx,myLookSide,doAnimation,lookCardDir,lookStep,lookRadian)},betOn:function(){if(!this.bGuestLogin()){var area=0,array=roomParam.getBetOnPos();if(this._bankerArray=array[0],this._farmerArray=array[1],this._dueceArray=array[2],this._bankerPairArray=array[3],this._farmerPairArray=array[4],this.InPolygon(Laya.stage.mouseX,Laya.stage.mouseY,this._bankerArray)?area=1:this.InPolygon(Laya.stage.mouseX,Laya.stage.mouseY,this._farmerArray)?area=2:this.InPolygon(Laya.stage.mouseX,Laya.stage.mouseY,this._dueceArray)?area=3:this.InPolygon(Laya.stage.mouseX,Laya.stage.mouseY,this._bankerPairArray)?area=4:this.InPolygon(Laya.stage.mouseX,Laya.stage.mouseY,this._farmerPairArray)&&(area=5),0!=area&&this._canBet&&0!=area){var betPanel=this.getChildByName("bet_panel");if(!(betPanel.selectingBetIdx<0)){var chip=betPanel.chipArray[betPanel.selectingBetIdx].price;this.publish("game_baccarat.command.player_bet_area",area,chip),this.getChildByName("put_area").blinkBorder1(area)}}}},eventUpdateAreaMyChips:function(area,chips){this._hasBet=!0,this.getChildByName("put_area").setMyChips(area,2,chips)},eventClearAreaMyChips:function(){this.getChildByName("put_area").setMyChips(-1)},eventFlyBet:function(seatIdx,area,playerId,chip,doAnimation,chipIndex,integratedChipsInfo){var chipType=confMgr.setting.betPriceToIcon[chip];this.flyChip(chipType,seatIdx,area,playerId,doAnimation,chipIndex,integratedChipsInfo)},flyChipToArea:function(chip,toAreaType,doAnimation,isWin,chipIndex,integratedChipsInfo){var tarPos=this._getTargetAreaPos(toAreaType,chip.seatIdx,isWin,chipIndex);chip.zOrder=tarPos.z,doAnimation?(null!=integratedChipsInfo?chip.flyTo(tarPos.x,tarPos.y,this,this._integrateChips,[chip,toAreaType,chip.seatIdx,integratedChipsInfo]):chip.flyTo(tarPos.x,tarPos.y,chip,chip.flyEnd),soundMgr.playSE("assets/games/baccarat/se/chip.mp3")):chip.pos(tarPos.x,tarPos.y)},_resetTargetAreaPos:function(){for(var i=0;i<confMgr.setting.seatPos_jinMi.length;i++)bankerPoints[i].r=0,farmerPoints[i].r=0,duecePoints[i].r=0,bankerPairPoints[i].r=0,farmerPairPoints[i].r=0,bankerWinPoints[i].r=0,farmerWinPoints[i].r=0,dueceWinPoints[i].r=0,bankerPairWinPoints[i].r=0,farmerPairWinPoints[i].r=0},_getTargetAreaPos:function(area,seatIdx,isWin,chipIndex){var tempPos;if(isWin)switch(area){case confMgr.definition.CHIP_AREA.BANKER:tempPos=bankerWinPoints;break;case confMgr.definition.CHIP_AREA.FARMER:tempPos=farmerWinPoints;break;case confMgr.definition.CHIP_AREA.DEUCE:tempPos=dueceWinPoints;break;case confMgr.definition.CHIP_AREA.BANKERPAIR:tempPos=bankerPairWinPoints;break;case confMgr.definition.CHIP_AREA.FARMERPAIR:tempPos=farmerPairWinPoints}else switch(area){case confMgr.definition.CHIP_AREA.BANKER:tempPos=bankerPoints;break;case confMgr.definition.CHIP_AREA.FARMER:tempPos=farmerPoints;break;case confMgr.definition.CHIP_AREA.DEUCE:tempPos=duecePoints;break;case confMgr.definition.CHIP_AREA.BANKERPAIR:tempPos=bankerPairPoints;break;case confMgr.definition.CHIP_AREA.FARMERPAIR:tempPos=farmerPairPoints}var ret={};if(ret.x=confMgr.setting.otherSeatPos.x,ret.y=confMgr.setting.otherSeatPos.y,ret.z=2,tempPos&&-1!=seatIdx){var pos=tempPos[seatIdx];return void 0!=chipIndex?pos.r=chipIndex:(chipIndex=pos.r,pos.r++),ret.x=pos.x,ret.y=pos.y-2*chipIndex,ret.z=2+chipIndex,ret}return ret},_integrateChips:function(curChip,toAreaType,fromSeatIdx,integratedChipsInfo){for(var oldChips=this._findAllChips(toAreaType,fromSeatIdx),i=0;i<oldChips.length;i++)(chip=oldChips[i]).isFlying||(chip.removeSelf(),this._chipPool.free(chip));curChip.removeSelf(),this._chipPool.free(curChip);for(var chipsLayer=this.getChildByName("chips_layer"),i=0;i<integratedChipsInfo.length;i++){var oneInfo=integratedChipsInfo[i],tarPos=this._getTargetAreaPos(toAreaType,fromSeatIdx,!1,i),chip=this._chipPool.alloc(),chipType=confMgr.setting.betPriceToIcon[oneInfo.money];chip.type=chipType,chip.area=toAreaType,chip.seatIdx=fromSeatIdx,chip.zOrder=tarPos.z,chip.pos(tarPos.x,tarPos.y),chip.playerId=oneInfo.playerId,chipsLayer.addChild(chip)}},eventSetWinArea:function(area){this.getChildByName("put_area").blinkFace(area)},eventAddHistory:function(winSide,pairSide,bankerMaxSeatIdx,farmerMaxSeatIdx){this.getChildByName("history").add(winSide,pairSide);var winWord=this.getChildByName("win_side");winWord.setImage("assets/games/baccarat/tex/win_"+winSide+".png"),winWord.alpha=1,this.timerOnce(3e3,this,function(){winWord.tweenTo({alpha:0},500,"sineOut",this,function(){winWord.alpha=0})}),-1!=bankerMaxSeatIdx&&winSide==confMgr.definition.WIN_STATE.WIN_BANK&&this.getChildByName("banker_get").setImage("assets/games/baccarat/tex/zhuang_get_win.png"),-1!=farmerMaxSeatIdx&&winSide==confMgr.definition.WIN_STATE.WIN_FARM&&this.getChildByName("farmer_get").setImage("assets/games/baccarat/tex/xian_get_win.png");var card_place=this.getChildByName("card_place"),farmerLength=card_place.getFarmerPointArr().length,bankerLength=card_place.getBankerPointArr().length,farmerValue=card_place.getFarmerValue(),bankerValue=card_place.getBankerValue();this.roundEndSound(farmerLength,bankerLength,farmerValue,bankerValue,winSide,pairSide)},eventSetRoundResult:function(failAreas,dealerToAreaChipInfo){this._hasBet=!1,soundMgr.playSE("assets/games/baccarat/se/pong.mp3");for(var index=0;index<failAreas.length;index++){area=failAreas[index];this._dealerEatAllBet(area)}for(var key in dealerToAreaChipInfo){var keyArr=key.split("_"),seatIdx=parseInt(keyArr[0]),area=parseInt(keyArr[1]),playerId=keyArr[2];this.timerOnce(1500,this,this._dealerVomitToArea,[area,seatIdx,playerId,dealerToAreaChipInfo[key]],!1)}this.timerOnce(2500,this,function(){this.getChildByName("card_place").recycleCard()}),this.timerOnce(4500,this,function(){this._areaVomitToPlayer()})},flyCard:function(){this._canBet&&this.publish("game_baccarat.command.flyCard")},eventCheckFlyCard:function(state){this.getChildByName("flyCardBtn").gray=state},eventPlayFlyCardAnimation:function(){if(this.getChildByName("flyCardBtn").visible)for(var i=0;i<2;i++)this.timerOnce(300*i,this,function(){this.blinkFlyCard()})},blinkFlyCard:function(){var flyCard=this.getChildByName("flyCardBtn");flyCard.alpha=1,flyCard.tweenTo({alpha:0},150,"sineOut"),this.timerOnce(200,this,function(){flyCard.tweenTo({alpha:1},150,"sineOut")})},eventClearStage:function(){this.getChildByName("put_area").reset(),this.getChildByName("card_place").clear()}})}),gbx.define("game/lobby/lobbypop/account_safe",["gbx/hubs","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","comm/base/command_ui","comm/helper/playerdata_mgr","comm/helper/account_mgr","comm/ui/ui_utils","game/lobby/lobbypop/bind_phone","game/lobby/lobbypop/change_name","game/lobby/lobbypop/change_head","game/lobby/lobbypop/change_pass","game/lobby/lobbypop/bind_parent","conf/ui_locallization","gbx/net/connector","gbx/net/messagecommand","gbx/render/ui/image"],function(hubs,Sprite,Button,Text,BaseUI,playerDataMgr,accountMgr,uiUtils,BindPhone,ChangeName,ChangeHead,ChangePass,BindParent,uiLocallization,server,CMD,Image){return BaseUI.extend({init:function(){this._super();var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.title_safe,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var head_text_tip=uiUtils.createSimpleText(uiLocallization.player_head,"");head_text_tip.pos(50,111),head_text_tip.fontSize=32,head_text_tip.color="#ffffff",this.addChild(head_text_tip);var headIcon=uiUtils.createSprite("assets/major/head/userhead_"+playerDataMgr.getMyHead()+".png","player_head");headIcon.scale(1.2),headIcon.pos(460,83.6),this.addChild(headIcon);var changeHead=new Button;changeHead.size(90,90),changeHead.pos(460,83.6),changeHead.name="changeHead",changeHead.setClickHandler(this,this.OnClick),this.addChild(changeHead);for(var posYlist=[180,273.5,367,460.5,554,647.5],i=0;i<6;i++){var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.pivotToCenter(),spliteLine.scaleX=1.5,spliteLine.pos(320,posYlist[i]),this.addChild(spliteLine)}for(var posYlist3=[101,199.75,480.25,573.75],i=0;i<4;i++){var arrow_0=uiUtils.createSprite("assets/major/public/arrow.png","");arrow_0.pos(550,posYlist3[i]),this.addChild(arrow_0)}var name_tip=uiUtils.createSimpleText(uiLocallization.player_name,"");name_tip.pos(50,208),name_tip.fontSize=32,name_tip.color="#ffffff",this.addChild(name_tip);var player_name=new Text;player_name.align="right",player_name.color="#ffffff",player_name.fontSize=32,player_name.pos(305,208),player_name.name="player_name",player_name.text=playerDataMgr.getMyNick(),player_name.width=250,this.addChild(player_name);var changeName=new Button;changeName.name="changeName",changeName.pos(0,190),changeName.size(640,80),changeName.setClickHandler(this,this.OnClick),this.addChild(changeName);var userID_tip=uiUtils.createSimpleText(uiLocallization.userID,"");userID_tip.fontSize=32,userID_tip.color="#ffffff",userID_tip.pos(50,301.5),this.addChild(userID_tip);var userID=new Text;userID.align="right",userID.color="#ffffff",userID.fontSize=32,userID.pos(305,301.5),userID.text=playerDataMgr.getMyUID(),userID.width=250,this.addChild(userID);var phone_code_tip=uiUtils.createSimpleText(uiLocallization.phone_code,"");phone_code_tip.pos(50,395),phone_code_tip.fontSize=32,phone_code_tip.color="#ffffff",this.addChild(phone_code_tip);var phone_code=new Text;phone_code.align="right",phone_code.color="#ffffff",phone_code.fontSize=32,phone_code.pos(305,395),phone_code.text=accountMgr.getUserData().account,phone_code.name="player_phone",phone_code.width=250,this.addChild(phone_code);var recommandMan_tip=uiUtils.createSimpleText(uiLocallization.recommandMan,"");recommandMan_tip.pos(50,488.5),recommandMan_tip.fontSize=32,recommandMan_tip.color="#ffffff",this.addChild(recommandMan_tip);var parentId="";parentId=null==playerDataMgr.getRebateParentId()||"0"==playerDataMgr.getRebateParentId()||playerDataMgr.getRebateParentId().length<2?uiLocallization.tip_no_parent:playerDataMgr.getRebateParentId();var recommandMan=new Text;recommandMan.align="right",recommandMan.color="#ffffff",recommandMan.fontSize=32,recommandMan.pos(305,488.5),recommandMan.text=parentId,recommandMan.name="recommandMan",recommandMan.width=250,this.addChild(recommandMan);var changeRecommand=new Button;changeRecommand.size(640,80),changeRecommand.name="changeRecommand",changeRecommand.pos(0,470.5),changeRecommand.setClickHandler(this,this.OnClick),this.addChild(changeRecommand);var resetpassword_tip=uiUtils.createSimpleText(uiLocallization.resetpassword,"");resetpassword_tip.fontSize=32,resetpassword_tip.color="#ffffff",resetpassword_tip.pos(50,582),this.addChild(resetpassword_tip);var pass=new Text;pass.align="right",pass.color="#ffffff",pass.name="player_pass",pass.pos(305,582),pass.fontSize=32,pass.text=uiLocallization.plz_reinput_new_pass,pass.width=250,this.addChild(pass);var changePass=new Button;changePass.size(640,80),changePass.name="changePass",changePass.pos(0,584),changePass.setClickHandler(this,this.OnClick),this.addChild(changePass);(changeHead=new ChangeHead).pos(0,300),changeHead.name="changeHeadPanel",changeHead.visible=!1,this.addChild(changeHead);var bindPhone=new BindPhone;bindPhone.pos(0,300),bindPhone.name="bindPhonePanel",bindPhone.visible=!1,this.addChild(bindPhone),(changeName=new ChangeName).pos(0,300),changeName.name="changeNamePanel",changeName.visible=!1,this.addChild(changeName),(changePass=new ChangePass).pos(0,0),changePass.name="changePassPanel",changePass.visible=!1,this.addChild(changePass);var bindParent=new BindParent;bindParent.pos(0,300),bindParent.name="bindParentPanel",bindParent.visible=!1,this.addChild(bindParent),this.subscribe("account_safe.update.setBindInfo",this,this.eventBindInfo),this.subscribe("lobby.lobbypop.changehead",this,this.eventChangeHead),this.subscribe("lobby.lobbypop.changename",this,this.eventChangeName)},eventChangeName:function(name){var sendMsg=gtea.protobuf.encode("SetPlayerInfoReq",{nickName:name});server.requestToGame(CMD.SetPlayerInfo,sendMsg,this,function(errorcode,data){gtea.protobuf.decode("SetPlayerInfoResp",data);playerDataMgr.setMyNick(name),this.getChildByName("player_name").text=name,hubs.publish("global.playerdata.update.userdata")})},eventChangeHead:function(headidx){var sendMsg=gtea.protobuf.encode("SetPlayerInfoReq",{icon:headidx.toString()});server.requestToGame(CMD.SetPlayerInfo,sendMsg,this,function(errorcode,data){gtea.protobuf.decode("SetPlayerInfoResp",data);playerDataMgr.setMyHead(headidx),this.getChildByName("player_head").setImage("assets/major/head/userhead_"+headidx+".png"),hubs.publish("global.playerdata.update.userdata")})},eventBindInfo:function(){null==playerDataMgr.getRebateParentId()||"0"==playerDataMgr.getRebateParentId()||playerDataMgr.getRebateParentId().length<2?uiLocallization.tip_no_parent:playerDataMgr.getRebateParentId()},OnClick:function(btn){"btn_close"==btn.name&&(this.visible=!1),"changeHead"==btn.name?(this.getChildByName("changeHeadPanel").visible=!0,this.getChildByName("changeHeadPanel").toggleCustomPanel(!1)):"changeName"==btn.name?this.getChildByName("changeNamePanel").visible=!0:"changePhone"==btn.name?""!=accountMgr.getUserData().account&&0!=accountMgr.getUserData().account.length||(this.getChildByName("bindPhonePanel").visible=!0):"changePass"==btn.name?this.getChildByName("changePassPanel").visible=!0:"changeRecommand"==btn.name?this.getChildByName("recommandMan").text==uiLocallization.tip_no_parent&&(this.getChildByName("bindParentPanel").visible=!0):btn.name}})}),gbx.define("game/lobby/lobbypop/addin_room",["gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/ui/ui_utils","conf/ui_locallization","comm/helper/room_mgr","gbx/render/ui/image","comm/ui/top_message"],function(Sprite,Button,Text,Panel,BaseUI,uiUtils,uiLocallization,roomMgr,Image,topMessage){return BaseUI.extend({init:function(){this._super(),this._numBtnArr=[];var background=new Sprite;background.setImage("assets/major/public/Full_screenBackGround.png"),background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.word_join_room,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.pos(133.5,370),this.addChild(spliteLine);var textNum=uiUtils.createSimpleText(uiLocallization.tip_input_room_number,"textnum");textNum.fontSize=30,textNum.pos(0,315),textNum.align="center",textNum.size(640,50),this.addChild(textNum);var joinBtn=uiUtils.createButton("assets/major/public/button_ok.png",2,"btn_join"),sp_joinBtn=uiUtils.createSprite("assets/major/lobby/sp/vip/word_addin_room.png");sp_joinBtn.pos(56.5,21.5),joinBtn.addChild(sp_joinBtn),joinBtn.pos(213.5,450),joinBtn.setClickHandler(this,this.OnClick),this.addChild(joinBtn);for(var gridNumBtn=["1","2","3","4","5","6","7","8","9",uiLocallization.clear_roomId,"0",uiLocallization.del_roomId],gridNumBtNames=["1","2","3","4","5","6","7","8","9","clear","0","dele"],index=0;index<gridNumBtn.length;index++){var btn=uiUtils.createButton("assets/major/public/password_btn_01.png",2,"");btn.name="btn_"+gridNumBtNames[index];var btnPsox,btnPsoy,col=index%3,row=Math.floor(index/3);9!=index&&11!=index||btn.setSkinImage("assets/major/public/password_btn_02.png"),btnPsox=216*col-1,btnPsoy=114*row+680,(textNum=uiUtils.createSimpleText(gridNumBtn[index])).fontSize=35,textNum.pos(0,39.5),textNum.align="center",btn.pos(btnPsox,btnPsoy),textNum.size(216,114),btn.addChild(textNum),this.addChild(btn),btn.setClickHandler(this,this.GridBtnsClick,btn.name),this._numBtnArr.push(btn)}},OnClick:function(btn){if("btn_close"==btn.name)this.visible=!1;else if("btn_join"==btn.name){var roomId=this.getChildByName("textnum").text;if(roomId==uiLocallization.tip_input_room_number)return void topMessage.post(uiLocallization.tip_input_room_number);roomMgr.joinVIPRoomByRoomId(roomId)}},initUI:function(){this.getChildByName("textnum").text=uiLocallization.tip_input_room_number},CheckComm:function(num){var el=this.getChildByName("textnum"),pass=el.text;pass==uiLocallization.tip_input_room_number&&(pass=""),"clear"==num?pass=uiLocallization.tip_input_room_number:"dele"==num?""==(pass=pass.substring(0,pass.length-1))&&(pass=uiLocallization.tip_input_room_number):pass!=uiLocallization.tip_input_room_number&&(pass+=num),el.text=pass},GridBtnsClick:function(btn){var _comm=btn.name.split("_").slice(1)[0];this.CheckComm(_comm)}})}),gbx.define("game/lobby/lobbypop/bank_charge",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/helper/playerdata_mgr","comm/ui/ui_utils","comm/ui/top_message","comm/helper/conf_mgr","conf/ui_locallization","platform/platform_manager","conf/platform"],function(server,CMD,ERROR_CODE,Sprite,Button,Text,Panel,BaseUI,playerDataMgr,uiUtils,topMessage,confMgr,uiLocallization,platformManager,Platform){var rechargeConfig=confMgr.read("major/dat/item/recharge.json");return BaseUI.extend({init:function(){this._super(),this._selectId=0;var sp=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png");sp.pos(0,0),this.addChild(sp),uiUtils.createBackgroundCrash(this,sp);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var title=uiUtils.createSimpleText(uiLocallization.word_recharge,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var tip=uiUtils.createSimpleText(uiLocallization.plz_input_charge_money,"");tip.pos(50,115),tip.color="#ffffff",tip.fontSize=25,tip.stroke=2,tip.strokeColor="#000000",this.addChild(tip);var circle=uiUtils.createSprite("assets/major/bank/recharge_select.png");circle.name="choosePoint",circle.zOrder=2,this.addChild(circle);var moreSureBtn=uiUtils.createButton("assets/major/public/button_ok.png",2,"moreSureBtn"),sp_02=uiUtils.createSprite("assets/major/bank/word_encharge2.png");sp_02.pos(65,15),moreSureBtn.addChild(sp_02),moreSureBtn.pos(213.5,700),moreSureBtn.setClickHandler(this,this.OnClick),this.addChild(moreSureBtn);for(var i=0;i<rechargeConfig.length-1;i++){var x=30+204*(i>2?i-3:i),y=170+204*(i>2?1:0);(tip=uiUtils.createSimpleText(rechargeConfig[i].name)).pos(x+20,y+150),tip.size(124,50),tip.align="center",tip.fontSize=25,tip.name="stack_"+i,tip.color="#ffffff",this.addChild(tip);var url="assets/major/bank/bankCharge/chip"+(i+1)+".png",chip=uiUtils.createButton(url,1,"");chip.pos(x+22,y+14),chip.zOrder=3,chip.mouseEnabled=!1,this.addChild(chip);var btn=new Button;btn.size(174,174),btn.pos(x,y),btn.setClickHandler(this,this.onChoose,i),this.addChild(btn)}this.onChoose(null,0)},onChoose:function(btn,id){var root=this.getChildByName("stack_"+id);this._selectId=id,this.getChildByName("choosePoint").alpha=1,this.getChildByName("choosePoint").pos(root.x,root.y+10)},OnClick:function(btn){if("btn_close"==btn.name)this.visible=!1;else{var index=this._selectId;platformManager.tryRechargeOrder(rechargeConfig[index],playerDataMgr.getMyUID())}}})}),gbx.define("game/lobby/lobbypop/bank_charge_online",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/net/errorcode_des","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/helper/playerdata_mgr","comm/ui/ui_utils","comm/ui/top_message","conf/locallization","conf/ui_locallization","conf/platform_channels","platform/platform_manager","comm/helper/conf_mgr","gbx/bridge","comm/helper/account_mgr","conf/platform","comm/ui/top_confirm","gbx/net/net_tool","game/lobby/lobbypop/bank_recharge_yyy"],function(server,CMD,ERROR_CODE,ERROR_CODE_DES,Sprite,Button,Text,Panel,BaseUI,playerDataMgr,uiUtils,topMessage,LocalLization,uiLocallization,platformChannels,platformManager,confMgr,bridge,accountMgr,Platform,topConfirm,netTool,bankRechargeYYY){var topPayLimitQrcode=500,topPayLimit=5e3,rechargeConfig=confMgr.read("major/dat/item/recharge.json"),BankChargeOnline=BaseUI.extend({init:function(){function onFous(e){this.onChoose(null,100)}function fixCardNumer(){var txt=this.getChildByName("rechargeView","self_define").text;isNaN(txt)&&(this.getChildByName("rechargeView","self_define").text=""),-1!=txt.indexOf(".")&&(this.getChildByName("rechargeView","self_define").text=txt.substring(0,txt.indexOf(".")));var number=parseInt(txt),top=platformManager.getRechargeCategoryMaxBytype(this._selectWay);number>=top&&(this.getChildByName("rechargeView","self_define").text=top)}this._super(),this.selectWayList=[],this._selectWay=0,this._selectId=0,this._selectIdDefault=0;var sp=new Sprite;sp.setImage("assets/major/public/Full_screenBackGround.png"),sp.pos(0,0),this.addChild(sp),uiUtils.createBackgroundCrash(this,sp);var title=uiUtils.createSimpleText(uiLocallization.word_recharge,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var rechargeWeb="web"===bridge.getPlatform(),rechargeTipView=new Sprite;rechargeTipView.name="rechargeTipView",this.addChild(rechargeTipView);var tip=uiUtils.createSimpleText("充值须知","");tip.pos(20,115),tip.color="#ffffff",tip.fontSize=30,rechargeTipView.addChild(tip);var baseY=185,tipdesc1="二：单笔金额不低于300,只接受银行卡或支付宝转账",tipdesc2="三：转账银行卡信息：",tipdesc3="四：每次转账时请在备注栏填写您的游戏id，晚上11点",tipdesc4="五：如转账成功后十分钟内未上分请联系----";rechargeWeb?(baseY=140,tipdesc1="一：单笔金额不低于300,只接受银行卡或支付宝转账",tipdesc2="二：转账银行卡信息：",tipdesc3="三：每次转账时请在备注栏填写您的游戏id，晚上11点",tipdesc4="四：如转账成功后十分钟内未上分请联系----"):((tip=uiUtils.createSimpleText("一：由于上游支付系统临时维护，为保证玩家正常游戏","")).pos(20,baseY),tip.color="#ffffff",tip.fontSize=25,rechargeTipView.addChild(tip)),(tip=uiUtils.createSimpleText(tipdesc1,"")).pos(20,baseY+45),tip.color="#ffffff",tip.fontSize=25,rechargeTipView.addChild(tip),(tip=uiUtils.createSimpleText(tipdesc2,"")).pos(20,baseY+90),tip.color="#ffffff",tip.fontSize=25,rechargeTipView.addChild(tip),(tip=uiUtils.createSimpleText("姓名：林志平","")).pos(70,baseY+135),tip.color="#fff600",tip.fontSize=30,rechargeTipView.addChild(tip),(tip=uiUtils.createSimpleText("招商银行：6214 8571 4098 4248","")).pos(70,baseY+180+10),tip.color="#fff600",tip.fontSize=30,rechargeTipView.addChild(tip),(tip=uiUtils.createSimpleText(tipdesc3,"")).pos(20,baseY+225+20),tip.color="#ffffff",tip.fontSize=25,rechargeTipView.addChild(tip),(tip=uiUtils.createSimpleText("到凌晨1点之间由于银行系统结算，部分转账不能","")).pos(70,baseY+270+20),tip.color="#ffffff",tip.fontSize=25,rechargeTipView.addChild(tip),(tip=uiUtils.createSimpleText("实时到帐，敬请谅解","")).pos(70,baseY+315+20),tip.color="#ffffff",tip.fontSize=25,rechargeTipView.addChild(tip),(tip=uiUtils.createSimpleText(tipdesc4,"")).pos(20,baseY+360+20),tip.color="#ffffff",tip.fontSize=25,rechargeTipView.addChild(tip),(tip=uiUtils.createSimpleText("QQ 959592 (经典客服)","")).pos(70,baseY+405+20),tip.color="#fff600",tip.fontSize=30,rechargeTipView.addChild(tip),rechargeWeb&&((tip=uiUtils.createSimpleText("五：手机端版本可以直接在游戏内进行系统充值","")).pos(20,baseY+450+30),tip.color="#ffffff",tip.fontSize=25,rechargeTipView.addChild(tip));var rechargeView=new Sprite;rechargeView.name="rechargeView",this.addChild(rechargeView),(tip=uiUtils.createSimpleText(uiLocallization.plz_input_charge_money,"")).pos(50,80),tip.color="#ffffff",tip.fontSize=25,tip.stroke=2,tip.strokeColor="#000000",rechargeView.addChild(tip),(tip=uiUtils.createSimpleText(uiLocallization.plz_choose_charge_way)).pos(50,700),tip.fontSize=25,tip.color="#ffffff",tip.stroke=2,tip.strokeColor="#000000",rechargeView.addChild(tip);var posX=30,posY=120,addX=174,addY=160,circle=uiUtils.createSprite("assets/major/bank/recharge_select.png");circle.name="choosePoint",circle.zOrder=2,rechargeView.addChild(circle);for(i=0;i<2;i++){var x=posX+(col=i%3)*(addX+posX),y=posY+(row=Math.floor(i/3))*(addY+posX);remarks=(remarks=uiLocallization.yuan).replace("X",rechargeConfig[i].price),(tip=uiUtils.createSimpleText(remarks)).pos(x+20,y+150),tip.size(124,50),tip.align="center",tip.fontSize=25,tip.name="stack_"+i,tip.color="#ffffff",rechargeView.addChild(tip);url="assets/major/bank/bankCharge/chip"+(i+1)+".png";(chip=uiUtils.createButton(url,1,"")).pos(x+22,y+14),chip.zOrder=3,chip.mouseEnabled=!1,rechargeView.addChild(chip),(btn=new Button).size(addX,addY),btn.pos(x,y),btn.setClickHandler(this,this.onChoose,i),rechargeView.addChild(btn)}this._chargeArray=[1,6,10,50,100,500,1e3];for(var betPriceToIconList=confMgr.setting.betPriceToIcon,i=2;i<this._chargeArray.length;i++){var col=i%3,row=Math.floor(i/3),x=posX+col*(addX+posX),y=posY+row*(addY+posX),remarks=uiLocallization.yuan;remarks=remarks.replace("X",this._chargeArray[i]),(tip=uiUtils.createSimpleText(remarks)).pos(x+20,y+150),tip.size(124,50),tip.align="center",tip.fontSize=25,tip.name="stack_"+i,tip.color="#ffffff",rechargeView.addChild(tip);var url="assets/major/bank/rechargeChip/chip"+(betPriceToIconList[this._chargeArray[i]]+1)+".png",chip=uiUtils.createButton(url,1,"");chip.pos(x+22,y+14),chip.zOrder=3,chip.mouseEnabled=!1,rechargeView.addChild(chip);var btn=new Button;btn.size(addX,addY),btn.pos(x,y),btn.setClickHandler(this,this.onChoose,i),rechargeView.addChild(btn);var top=platformManager.getRechargeCategoryMaxBytype(this._selectWay);this._chargeArray[i]>top?(bg.gray=!0,chip.gray=!0,btn.gray=!0):(circle.pos(x,y),this._selectId=i,this._selectIdDefault=i)}var input=uiUtils.createTextInput("self_define",uiLocallization.custom_money_tip);input.pos(posX-5+(addX+posX),posY+2*(addY+posX)+137),input.width=180,input.height=50,input.fontSize=25,input.zOrder=2,input.align="center",input.on("focus",this,onFous),input.on("input",this,fixCardNumer),rechargeView.addChild(input);var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.pos(posX-5+(addX+posX),posY+2*(addY+posX)+185),spliteLine.scaleX=.5,rechargeView.addChild(spliteLine);var bg=uiUtils.createButton("assets/major/bank/chip_custom.png",1);bg.pos(posX+(addX+posX)+22,posY+2*(addY+posX)+14),bg.zOrder=1,bg.setClickHandler(this,function(){this.getChildByName("rechargeView","self_define").focus=!0}),rechargeView.addChild(bg);var array=platformManager.getRechargeCategory();if(array)for(var posX=33,posY=720,addX=74,addY=71,i=0;i<array.length;i++){var line=i,y=posY;i>3&&(line-=4,y+=130);var x=posX+line*(addX+80),rechargeTypeBtn=uiUtils.createButton(this.getSpriteByKey(array[i]),1,"rechargeTypeBtn");rechargeTypeBtn.pos(x,y),rechargeTypeBtn.setClickHandler(this,this.onChooseWay,array[i]),rechargeView.addChild(rechargeTypeBtn);var lab=uiUtils.createSimpleText(this.getWayName(array[i]));lab.size(113,25),lab.pos(0,94.5),lab.align="center",lab.fontSize=25,lab.bold=!0,rechargeTypeBtn.addChild(lab);var selectIcon=uiUtils.createSprite("assets/major/bank/recharge_select.png");selectIcon.pos(-7,113),selectIcon.name="choose_"+array[i],selectIcon.visible=!1,rechargeTypeBtn.addChild(selectIcon),this.selectWayList.push({type:array[i],select:selectIcon,btn:rechargeTypeBtn}),0==i&&(selectIcon.visible=!0,this._selectWay=array[i])}playerDataMgr.getBigRechargeTipState()&&((tip=uiUtils.createSimpleText("大额快速充值请联系官方认证经销商QQ："+playerDataMgr.getqq()+"("+playerDataMgr.getqqName()+")","")).pos(20,870),tip.color="#fff600",tip.fontSize=22,rechargeView.addChild(tip));var moreSureBtn=uiUtils.createButton("assets/major/public/button_ok.png",2,"moreSureBtn"),sp_02=uiUtils.createSprite("assets/major/bank/word_encharge2.png");sp_02.pos(65,15),moreSureBtn.addChild(sp_02),moreSureBtn.pos(213.5,900),moreSureBtn.setClickHandler(this,this.OnClick),rechargeView.addChild(moreSureBtn),(tip=uiUtils.createSimpleText("如果您充值中遇到以下问题请通知我们，帮助我们提升游戏体验","")).pos(15,1e3),tip.color="#fff600",tip.fontSize=22,rechargeView.addChild(tip);var errorBtn1=uiUtils.createButton("",1,"rechargeError1");errorBtn1.size(207,50),(tip=uiUtils.createSimpleText("点击充值没反应","")).pos(10,0),tip.color="#ffffff",tip.fontSize=25,errorBtn1.addChild(tip),(sp_02=uiUtils.createSprite("assets/major/bank/bank_line.png")).pos(0,40),errorBtn1.addChild(sp_02),errorBtn1.pos(93,1050),errorBtn1.setClickHandler(this,this.OnClick),rechargeView.addChild(errorBtn1);var errorBtn2=uiUtils.createButton("",1,"rechargeError2");errorBtn2.size(207,50),(tip=uiUtils.createSimpleText("无法打开支付宝","")).pos(10,0),tip.color="#ffffff",tip.fontSize=25,errorBtn2.addChild(tip),(sp_02=uiUtils.createSprite("assets/major/bank/bank_line.png")).pos(0,40),errorBtn2.addChild(sp_02),errorBtn2.pos(340,1050),errorBtn2.setClickHandler(this,this.OnClick),rechargeView.addChild(errorBtn2);var rechargeYYY=new bankRechargeYYY;rechargeYYY.pos(0,0),rechargeYYY.name="rechargeYYY",rechargeYYY.visible=!1,this.addChild(rechargeYYY)},getSpriteByKey:function(idx){var ret="";switch(idx){case Platform.rechargeType.PWG:case Platform.rechargeType.YYY:ret="assets/major/bank/quick.png";break;case Platform.rechargeType.Alipay:ret="assets/major/bank/alipay.png";break;case Platform.rechargeType.Wechat:ret="assets/major/bank/wechat.png";break;case Platform.rechargeType.QQ:ret="assets/major/bank/qq.png";break;case Platform.rechargeType.ApplePay:ret="assets/major/bank/applepay.png"}return ret},getWayName:function(idx){var ret="";switch(idx){case Platform.rechargeType.PWG:ret=uiLocallization.quick;break;case Platform.rechargeType.YYY:ret=uiLocallization.quick2;break;case Platform.rechargeType.Alipay:ret=uiLocallization.alipay;break;case Platform.rechargeType.Wechat:ret=uiLocallization.wx_pay;break;case Platform.rechargeType.QQ:ret=uiLocallization.qq;break;case Platform.rechargeType.ApplePay:ret=uiLocallization.applePay}return ret},onChoose:function(btn,id){for(var i=0;i<this.selectWayList.length;i++)if(this.selectWayList[i].btn.visible=!0,id>1&&Platform.rechargeType.ApplePay==this.selectWayList[i].type){this.selectWayList[i].btn.visible=!1;var rechargeCategory=platformManager.getRechargeCategory();this.onChooseWay(null,rechargeCategory[0])}var root=this.getChildByName("rechargeView","stack_"+id);this._selectId=id,100==id?this.getChildByName("rechargeView","choosePoint").alpha=0:(this.getChildByName("rechargeView","self_define").text="",this.getChildByName("rechargeView","choosePoint").alpha=1,this.getChildByName("rechargeView","choosePoint").pos(root.x,root.y+10))},onChooseWay:function(btn,id){this._selectWay=id;for(var i=0;i<this.selectWayList.length;i++)this.selectWayList[i].select.visible=!1,id==this.selectWayList[i].type&&(this.selectWayList[i].select.visible=!0);var top=platformManager.getRechargeCategoryMaxBytype(this._selectWay);this.getChildByName("rechargeView","self_define").text>=top&&(this.getChildByName("rechargeView","self_define").text=top)},OnClick:function(btn){window.lobbyisLock||("btn_close"==btn.name?(this.visible=!1,this.publish("game_baccarat.setting.updateMyDeposit")):"moreSureBtn"==btn.name?this.encharge():"rechargeError1"==btn.name?this.rechargeError(1):"rechargeError2"==btn.name&&this.rechargeError(2))},rechargeError:function(type){var JsonObject={account:accountMgr.getUserData().account,playerId:playerDataMgr.getMyUID(),type:type},str=JSON.stringify(JsonObject),path=netTool.getPathByKey("rechargeHelpUrl");netTool.createJsonHttpRequest(path,str,this,function(data){var retData=eval("("+data+")");topMessage.post(ERROR_CODE_DES[retData.result])},function(status){topMessage.post(" status "+status)})},encharge:function(){function success(backData){var retData=eval("("+backData+")");if(""+retData.result!=ERROR_CODE.RechargeServerClose)if(""+retData.result==ERROR_CODE.OK)if(this._selectWay<=Platform.rechargeType.PWG){var url=retData.data.url,index=0;for(var key in retData.data.par)gbx.log(retData.data.par[key]),url+=0===index?"?":"&",url+=key+"="+retData.data.par[key],index++;if(6==this.getPayPGWtype()){var qrUrl=url.replace("shtml","json"),postData={gameVersion:bridge.getVersion(),gameType:"baccarat",os:bridge.getPlatform(),packageId:bridge.getPackageId()},postTxt=JSON.stringify(postData);netTool.createJsonHttpRequestGet(qrUrl,postTxt,this,function(data){var ret=JSON.parse(data);if(102124==ret.message.operateCode){var qrCode=ret.message.message;document.getElementById("qrcode").style.display="block",document.getElementById("qrcode_bg").style.display="block",document.getElementById("qrcode").style.left=(window.innerWidth-window.innerHeight/4)/2+"px",document.getElementById("qrcode_bg").style.width=window.innerHeight/2+"px",document.getElementById("qrcode_bg").style.height=window.innerHeight/1.8+"px",document.getElementById("qrcode_bg").style.left=window.innerWidth/2-window.innerHeight/4+"px",document.getElementById("save_pic_lab").src="assets/major/qrCode/savePic.png",document.getElementById("qrcode_icon").src=this.getSpriteByKey(4),document.getElementById("qrcode_icon").style.width="15%",document.getElementById("qrcode_icon").style.height="13%",document.getElementById("qrcode_icon").style.left="25%",document.getElementById("qrcode_icon").style.top="6%";if(document.getElementById("qrcode_help_pic").src="assets/major/qrCode/quick.png",document.getElementById("qrcode_name").src="assets/major/qrCode/quickText.png","web"===bridge.getPlatform()){document.getElementById("qrcode_savebtn").style.display="none";document.getElementById("qrcode_help_pic").src="assets/major/qrCode/quickH5.png"}var bSave=!1;document.getElementById("qrcode_savebtn").onclick=function(){bSave||(bSave=!0,bridge.savePic(),document.getElementById("save_pic_lab").src="assets/major/qrCode/savePicOk.png")};for(var root=document.getElementById("qrcode"),childList=root.childNodes,i=childList.length-1;i>=0;i--){var childNode=childList[0];root.removeChild(childNode)}new QRCode(document.getElementById("qrcode"),qrCode),window.lobbyisLock=!0,this.timerOnce(10,this,function(){Laya.stage.renderingEnabled=!1})}else topMessage.post(uiLocallization.rechargeQRcodeError+"  "+ret.message.content+ret.message.operateCode)},function(status){},!1)}else bridge.openUrl(url)}else{var url=netTool.getPathByKey("rechargeBACCARATYYYPayUrl");url+="?userId="+playerDataMgr.getMyUID(),bridge.openUrl(url)}else uiUtils.showMesage(uiLocallization.get_order_fail);else topConfirm.ask(retData.data.errorMsg,this)}var data=rechargeConfig[rechargeConfig.length-1],idx=this._selectId,money=0;if(this._selectId>=this._chargeArray.length){money=this.getChildByName("rechargeView","self_define").text;var num=parseInt(money,10);if(""==money||num<=0)return uiUtils.showMesage(uiLocallization.plz_input_r_charge_money),void(this.getChildByName("rechargeView","self_define").text="");if(num<10){var str=uiLocallization.self_define_limit;str=str.replace("A",this._chargeArray[2]);var top=platformManager.getRechargeCategoryMaxBytype(this._selectWay);return str=str.replace("B",top),void uiUtils.showMesage(str)}}else money=this._chargeArray[idx];var rechargeCategory=platformManager.getRechargeCategory();if(this._selectWay<=Platform.rechargeType.PWG)platformManager.tryRechargeOrder_PGW(this.getPayPGWtype(),money,this,success);else if(this._selectWay==Platform.rechargeType.ApplePay){var index=this._selectId;platformManager.tryRechargeOrder(rechargeConfig[index],playerDataMgr.getMyUID())}else this.getChildByName("rechargeYYY").setData(money),this.getChildByName("rechargeYYY").visible=!0},getPayPGWtype:function(){switch(this._selectWay){case Platform.rechargeType.Alipay:return 2;case Platform.rechargeType.Wechat:return 1;case Platform.rechargeType.QQ:return 3;case Platform.rechargeType.PWG:return 6}},getChannel:function(){switch(this._selectWay){case 2:return"ali";case 4:return"weixin"}},refresh:function(){this.getChildByName("rechargeView","usable_limit").text=uiUtils.getFloatByPower(playerDataMgr.getMyCarryGold(),1),this.getChildByName("rechargeView","deposit").text=uiUtils.getFloatByPower(playerDataMgr.getMyGold()-playerDataMgr.getMyCarryGold(),1)},setData:function(){null==platformManager.getRechargeCategory()?(this.getChildByName("rechargeView").visible=!1,this.getChildByName("rechargeTipView").visible=!0):(this.getChildByName("rechargeView").visible=!0,this.getChildByName("rechargeTipView").visible=!1,this.onChoose(null,this._selectIdDefault))}});return BankChargeOnline}),gbx.define("game/lobby/lobbypop/bank_draw_encharge",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/helper/playerdata_mgr","comm/ui/ui_utils","comm/ui/top_message","conf/locallization","conf/ui_locallization","gbx/render/ui/image"],function(server,CMD,ERROR_CODE,Sprite,Button,Text,Panel,BaseUI,playerDataMgr,uiUtils,topMessage,LocalLization,uiLocallization,Image){return BaseUI.extend({init:function(){function fixCardNumer(){var txt=this.getChildByName("money").text,text=txt;isNaN(txt)&&(this.getChildByName("money").text=""),-1!=txt.indexOf(".")&&(this.getChildByName("money").text=txt.substring(0,txt.indexOf(".")),text=this.getChildByName("money").text);var number=parseFloat(text),top=this._number1>this._number2?this._number1:this._number2;number>=top&&(this.getChildByName("money").text=top)}this._super(),this._number1=0,this._number2=0;var maskBtn=uiUtils.createMask(this);maskBtn.pos(-1500,-1500),this.addChild(maskBtn);var background=new Sprite;background.setImage("assets/major/public/Full_screenBackGround.png"),background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.word_bank,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var detailBtn=uiUtils.createButton("",1,"btn_detail"),sp_03=uiUtils.createSprite("assets/major/bank/btn_detail.png");sp_03.pos(0,0),detailBtn.addChild(sp_03),detailBtn.pos(450,100),detailBtn.size(130,80),detailBtn.setClickHandler(this,this.OnClick),this.addChild(detailBtn);var details=uiUtils.createSimpleText(uiLocallization.word_title_detail,"");details.fontSize=25,details.color="#ffffff",details.pos(480,95),this.addChild(details);var cc=new Image("assets/major/public/public_lightBg.png");cc.pos(50,150),cc.width=540,cc.height=160,cc.sizeGrid="10,10,10,10",this.addChild(cc),(cc=new Image("assets/major/public/title_bar.png")).pos(50,150),cc.width=540,cc.height=70,cc.sizeGrid="10,10,10,10",this.addChild(cc);var arrow_1=uiUtils.createSprite("assets/major/bank/arrow.png","");arrow_1.pos(305,166),this.addChild(arrow_1);var text_1=uiUtils.createSimpleText(uiLocallization.player_deposit,"useLimittip");text_1.color="#ffffff",text_1.fontSize=30,text_1.pos(0,165),text_1.align="center",text_1.size(320,35),this.addChild(text_1);var deposit=playerDataMgr.getMyGold()-playerDataMgr.getMyCarryGold();deposit=uiUtils.getFloatByPower(deposit,1),this._number1=deposit;var text_num=uiUtils.createSimpleText(deposit,"deposit");text_num.fontSize=32,text_num.color="#ffc600",text_num.align="center",text_num.pos(0,245),text_num.size(320,35),this.addChild(text_num);var text_2=uiUtils.createSimpleText(uiLocallization.useLimit,"");text_2.color="#ffffff",text_2.fontSize=30,text_2.pos(320,165),text_2.align="center",text_2.size(320,35),this.addChild(text_2),this._number2=uiUtils.getFloatByPower(playerDataMgr.getMyCarryGold(),1);var text_num_1=uiUtils.createSimpleText(this._number2,"usable_limit");text_num_1.fontSize=32,text_num_1.color="#ffc600",text_num_1.align="center",text_num_1.pos(320,245),text_num_1.size(320,35),this.addChild(text_num_1);var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.pivotToCenter(),spliteLine.scaleX=1.5,spliteLine.pos(320,400),this.addChild(spliteLine);var money=uiUtils.createTextInput("money","");money.pos(0,310),money.fontSize=32,money.size(640,90),money.prompt=uiLocallization.tip_input_encharge_draw,money.align="center",money.on("input",this,fixCardNumer),this.addChild(money);var drawOutBtn=uiUtils.createButton("assets/major/public/button_blue.png",2,"btn_draw_out"),word_out=uiUtils.createSprite("assets/major/bank/word_out.png");word_out.pos(38,13.5),drawOutBtn.addChild(word_out),drawOutBtn.pos(90,430),drawOutBtn.setClickHandler(this,this.OnClick),this.addChild(drawOutBtn);var enchargePutBtn=uiUtils.createButton("assets/major/public/button_blue.png",2,"btn_encharge_put"),word_put=uiUtils.createSprite("assets/major/bank/word_put.png");word_put.pos(38,13.5),enchargePutBtn.addChild(word_put),enchargePutBtn.pos(414,430),enchargePutBtn.setClickHandler(this,this.OnClick),this.addChild(enchargePutBtn);var openCard=new Button;openCard.pos(351,390),openCard.size(400,30),openCard.name="openCard",openCard.setClickHandler(this,this.OnClick),this.addChild(openCard)},OnClick:function(btn){"btn_close"==btn.name&&(this.visible=!1,this.publish("game_baccarat.setting.updateMyDeposit")),"btn_encharge_put"==btn.name&&this.EnchargePut(),"btn_draw_out"==btn.name&&this.DrawOut(),"btn_detail"==btn.name&&this.publish("game_baccarat.setting.openBankDetail"),"openCard"==btn.name&&this.publish("game_baccarat.setting.openBindCard")},DrawOut:function(){var getout=this.getChildByName("money").text;if(""!=getout)if(isNaN(getout))topMessage.post(uiLocallization.plz_input_number);else if(parseInt(getout)<0)topMessage.post(uiLocallization.input_number_illegle);else{var num=parseInt(getout,10);if(num){var sendMsg=gtea.protobuf.encode("takeGoldReq",{addCarryOnGold:num});server.requestToGame(CMD.BankTakeGold,sendMsg,this,function(errorcode,data){if(this.getChildByName("money").text="",errorcode==ERROR_CODE.OK){var retData=gtea.protobuf.decode("takeGoldResp",data);playerDataMgr.dealItemProto(retData.itemProto),this.refresh(),this.publish("lobby.game.updateMyInfo")}else gbx.log("外层消息已提示")})}else topMessage.post(uiLocallization.input_number_illegle)}},EnchargePut:function(){var getout=this.getChildByName("money").text;if(""!=getout)if(isNaN(getout))topMessage.post(uiLocallization.plz_input_number);else if(parseInt(getout)<0)topMessage.post(uiLocallization.input_number_illegle);else{var num=parseInt(getout,10);if(num){var sendMsg=gtea.protobuf.encode("saveGoldReq",{subCarryOnGold:num});server.requestToGame(CMD.BankSaveGold,sendMsg,this,function(errorcode,data){if(this.getChildByName("money").text="",errorcode==ERROR_CODE.OK){var retData=gtea.protobuf.decode("saveGoldResp",data);playerDataMgr.dealItemProto(retData.itemProto),this.refresh(),this.publish("lobby.game.updateMyInfo"),this.getChildByName("money").text=""}else gbx.log("外层消息已提示")})}else topMessage.post(uiLocallization.input_number_illegle)}},refresh:function(){this.getChildByName("usable_limit").text=uiUtils.getFloatByPower(playerDataMgr.getMyCarryGold(),1),this.getChildByName("deposit").text=uiUtils.getFloatByPower(playerDataMgr.getMyGold()-playerDataMgr.getMyCarryGold(),1),this._number1=uiUtils.getFloatByPower(playerDataMgr.getMyCarryGold(),1),this._number2=uiUtils.getFloatByPower(playerDataMgr.getMyGold()-playerDataMgr.getMyCarryGold(),1)}})}),gbx.define("game/lobby/lobbypop/bank_pass",["gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/ui/ui_utils","conf/ui_locallization"],function(Sprite,Button,Text,Panel,BaseUI,uiUtils,uiLocallization){return BaseUI.extend({init:function(){this._super(),this._number="";var maskBtn=uiUtils.createMask(this);maskBtn.pos(-1500,-1500),this.addChild(maskBtn);var background=uiUtils.createSprite("assets/major/public/background.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var booter=uiUtils.createSprite("assets/major/public/back_booter_01.png","");booter.pos(0,0),this.addChild(booter);var title=uiUtils.createSimpleText(uiLocallization.word_bank,"title");title.size(640,67),title.align="center",title.pos(0,30),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(8,8),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var tip=uiUtils.createSimpleText(uiLocallization.tip_input_bankpass);tip.color="#E0F0EF",tip.fontSize=20,tip.pos(48,102),this.addChild(tip);var pass=uiUtils.createTextInput("pass","");pass.type="password",pass.fontSize=22,pass.pos(45,148),pass.size(145,50),this.addChild(pass);var surebtn=uiUtils.createButton("assets/major/public/button_8.png",2,"btn_sure"),word_sure=uiUtils.createSprite("assets/major/public/sureBtnG.png","");word_sure.pos(62,16),surebtn.addChild(word_sure),surebtn.pos(41,212),surebtn.setClickHandler(this,this.OnClick),this.addChild(surebtn);var light=uiUtils.createSprite("assets/major/bank/tap_broad_light.png","light");light.alpha=0,this.addChild(light);for(var BtnNames=["7","8","9","4","5","6","1","2","3","C","0","X"],i=0;i<BtnNames.length;i++){var btn=uiUtils.createButton(null,1,BtnNames[i]);if(btn.pos(248+i%3*85,54+64*Math.floor(i/3)),i<BtnNames.length-1){var lab=uiUtils.createSimpleText(BtnNames[i],"");lab.pos(40,27),"C"!=BtnNames[i]&&(lab.color="#D5CBC9"),btn.addChild(lab)}else{var back=uiUtils.createSprite("assets/major/bank/tapBack.png");back.pos(25,27),btn.addChild(back)}btn.setClickHandler(this,this.OnClickNumber),btn.width=86,btn.height=65,this.addChild(btn)}},OnClick:function(btn){"btn_close"==btn.name?this.visible=!1:"btn_sure"==btn.name&&(this._number="",this.getChildByName("pass").text=this._number)},OnClickNumber:function(btn){var light=this.getChildByName("light");light.alpha=1,light.pos(btn.x+1,btn.y+2),light.tweenTo({alpha:0},200,function(){light.alpha=0}),"C"!=btn.name&&"X"!=btn.name?this._number+=btn.name:"C"==btn.name?this._number="":"X"==btn.name&&this._number.length>0&&(this._number=this._number.substring(0,this._number.length-1)),this.getChildByName("pass").text=this._number}})}),gbx.define("game/lobby/lobbypop/bank_recharge_yyy",["gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/ui/ui_utils","conf/ui_locallization","comm/helper/bank_mgr","comm/helper/playerdata_mgr","gbx/render/ui/image","platform/platform_manager","comm/ui/top_confirm","game/lobby/lobbypop/bank_yyy_verifycode","gbx/render/tween"],function(Sprite,Button,Text,Panel,BaseUI,uiUtils,uiLocallization,bankMgr,playerDataMgr,Image,platformManager,topConfirm,rchargeVerifyCode,Tween){return BaseUI.extend({init:function(){this._super(),this._selectBank=[],this._selectBankCardNum=0,this._amount=0;var binding=new Sprite;binding.pos(0,0),binding.name="binding",binding.visible=!1,this.addChild(binding);var background=uiUtils.createSprite("assets/major/bank/authentication_bg.png","");background.pos(0,0),binding.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.rechargeYYY_authentication,"title");title.size(640,100),title.align="center",title.color="#000000",title.pos(0,35),title.fontSize=30,binding.addChild(title);var closeBtn=new Button;closeBtn.stateNum=1,closeBtn.name="btn_close",closeBtn.size(100,100),closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),(background=uiUtils.createSprite("assets/major/bank/authentication_back.png","")).pos(20,32.5),closeBtn.addChild(background),binding.addChild(closeBtn),(background=uiUtils.createSprite("assets/major/bank/authentication_kuang1.png","")).pos(0,100),binding.addChild(background);var tip1=uiUtils.createSimpleText(uiLocallization.rechargeYYY_authentication_desc1);tip1.size(640,44),tip1.align="left",tip1.color="#000000",tip1.pos(30,115),tip1.fontSize=25,binding.addChild(tip1);var tip2=uiUtils.createSimpleText(uiLocallization.rechargeYYY_authentication_desc2);tip2.size(640,44),tip2.align="left",tip2.color="#000000",tip2.pos(30,145),tip2.fontSize=25,binding.addChild(tip2);for(var posYlist2=[229,323,417,511,605],i=0;i<5;i++)(spliteLine=new Sprite).setImage("assets/major/bank/authentication_kuang2.png"),spliteLine.pivotToCenter(),spliteLine.scaleX=1,spliteLine.pos(320,posYlist2[i]),binding.addChild(spliteLine);var tipCard=uiUtils.createSimpleText(uiLocallization.rechargeYYY_cardnum,"tipCard");tipCard.color="#000000",tipCard.fontSize=30,tipCard.pos(30,211),binding.addChild(tipCard);var cardNumber=uiUtils.createTextInput("cardNumber",uiLocallization.plz_input_bank_number);cardNumber.pos(180,181),cardNumber.align="left",cardNumber.color="#000000",cardNumber.fontSize=30,cardNumber.size(460,94),binding.addChild(cardNumber);var tipName=uiUtils.createSimpleText(uiLocallization.rechargeYYY_cardname,"tipName");tipName.color="#000000",tipName.fontSize=30,tipName.pos(30,305),binding.addChild(tipName);var inputName=uiUtils.createTextInput("inputName",uiLocallization.rechargeYYY_input);inputName.pos(180,275),inputName.align="left",inputName.color="#000000",inputName.fontSize=30,inputName.size(460,94),binding.addChild(inputName);var tipId_type=uiUtils.createSimpleText(uiLocallization.rechargeYYY_Id_type,"tipId");tipId_type.color="#000000",tipId_type.fontSize=30,tipId_type.pos(30,399),binding.addChild(tipId_type),(tipId_type=uiUtils.createSimpleText(uiLocallization.rechargeYYY_Id,"tipId")).color="#000000",tipId_type.fontSize=30,tipId_type.pos(180,399),binding.addChild(tipId_type);var tipId=uiUtils.createSimpleText(uiLocallization.rechargeYYY_Id_num,"tipId");tipId.color="#000000",tipId.fontSize=30,tipId.pos(30,493),binding.addChild(tipId);var inputId=uiUtils.createTextInput("inputId",uiLocallization.rechargeYYY_input);inputId.pos(180,463),inputId.align="left",inputId.color="#000000",inputId.fontSize=30,inputId.size(460,94),binding.addChild(inputId);var tipPhone=uiUtils.createSimpleText(uiLocallization.rechargeYYY_phone,"tipPhone");tipPhone.color="#000000",tipPhone.fontSize=30,tipPhone.pos(30,587),binding.addChild(tipPhone);var inputPhone=uiUtils.createTextInput("inputPhone",uiLocallization.rechargeYYY_phone_desc);inputPhone.pos(180,557),inputPhone.align="left",inputPhone.color="#000000",inputPhone.fontSize=30,inputPhone.size(460,94),binding.addChild(inputPhone),(background=uiUtils.createSprite("assets/major/bank/authentication_select_bg.png","")).pos(30,660),binding.addChild(background);var select=uiUtils.createSprite("assets/major/bank/authentication_select.png","");select.pos(5,9),background.addChild(select);var desc=uiUtils.createSimpleText(uiLocallization.rechargeYYY_agree);desc.align="left",desc.color="#000000",desc.pos(80,665),desc.fontSize=25,binding.addChild(desc),(desc=uiUtils.createSimpleText(uiLocallization.rechargeYYY_authentication_desc)).align="left",desc.color="#1e8af2",desc.pos(160,665),desc.fontSize=25,binding.addChild(desc);var bankIcon=uiUtils.createButton("assets/major/bank/quick.png",1,"");bankIcon.size(73,45),bankIcon.pos(490,660),binding.addChild(bankIcon);var bindingBtn=uiUtils.createButton("assets/major/bank/authentication_btn.png",2,"bindingBtn");(desc=uiUtils.createSimpleText(uiLocallization.rechargeYYY_authentication_ok)).size(604,76),desc.align="center",desc.color="#ffffff",desc.pos(0,22.5),desc.fontSize=30,bindingBtn.addChild(desc),bindingBtn.pos(320,770),bindingBtn.pivotToCenter(),bindingBtn.setClickHandler(this,this.OnClick),binding.addChild(bindingBtn);var tips=uiUtils.createSimpleText(uiLocallization.rechargeYYY_add_tips);tips.size(640,67),tips.align="center",tips.pos(0,820),tips.color="#fe3a34",tips.fontSize=20,binding.addChild(tips);var recharge=new Sprite;recharge.pos(0,0),recharge.name="recharge",recharge.visible=!1,this.addChild(recharge),(background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","")).pos(0,0),recharge.addChild(background),uiUtils.createBackgroundCrash(this,background),(title=uiUtils.createSimpleText(uiLocallization.word_recharge,"title")).size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,recharge.addChild(title),(closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close")).pos(0,0),closeBtn.setClickHandler(this,this.OnClick),recharge.addChild(closeBtn);var rechargeNum=uiUtils.createSimpleText(uiLocallization.rechargeYYY_num,"");rechargeNum.size(320,67),rechargeNum.align="right",rechargeNum.pos(0,100),rechargeNum.color="#fed58b",rechargeNum.fontSize=30,recharge.addChild(rechargeNum),(rechargeNum=uiUtils.createSimpleText("","rechargeNum")).size(320,67),rechargeNum.align="left",rechargeNum.pos(320,100),rechargeNum.color="#FEC600",rechargeNum.fontSize=30,recharge.addChild(rechargeNum);var cc=new Image("assets/major/public/public_lightBg.png");cc.pos(40,160),cc.width=560,cc.height=670,cc.sizeGrid="10,10,10,10",recharge.addChild(cc),(cc=new Image("assets/major/public/title_bar.png")).pos(40,160),cc.width=560,cc.height=70,cc.sizeGrid="10,10,10,10",recharge.addChild(cc);var offlineName=uiUtils.createSimpleText(uiLocallization.bankName);offlineName.pos(100,180),offlineName.color="#ffffff",offlineName.fontSize=30,recharge.addChild(offlineName);var offlineId=uiUtils.createSimpleText(uiLocallization.bankNum);offlineId.pos(380,180),offlineId.color="#ffffff",offlineId.fontSize=30,recharge.addChild(offlineId);var panel=uiUtils.createPanel(560,600,"rootpanel");panel.pos(40,230),recharge.addChild(panel);var delBtn=new Button;delBtn.size(180,40),delBtn.pos(50,900),delBtn.setClickHandler(this,this.OnDelBtn);var sp_02=uiUtils.createSprite("assets/major/bank/del_bank.png");sp_02.pos(0,0),delBtn.addChild(sp_02);var delDesc=uiUtils.createSimpleText(uiLocallization.delBankCard);delDesc.pos(50,3),delDesc.color="#ffffff",delDesc.fontSize=25,delBtn.addChild(delDesc),recharge.addChild(delBtn);var addBtn=new Button;addBtn.size(180,40),addBtn.pos(410,900),addBtn.setClickHandler(this,this.OnAddBtn),(sp_02=uiUtils.createSprite("assets/major/bank/bank_icon.png")).pos(0,8),addBtn.addChild(sp_02),(delDesc=uiUtils.createSimpleText(uiLocallization.addBankCard)).pos(50,5),delDesc.color="#ffffff",delDesc.fontSize=25,addBtn.addChild(delDesc),recharge.addChild(addBtn);var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.pivotToCenter(),spliteLine.scaleX=1.5,spliteLine.pos(320,960),recharge.addChild(spliteLine);var buyBtn=uiUtils.createButton("assets/major/public/button_ok.png",2,"buyBtn");(sp_02=uiUtils.createSprite("assets/major/bank/buy.png")).pos(47.5,15),buyBtn.addChild(sp_02),buyBtn.pos(213.5,980),buyBtn.setClickHandler(this,this.OnClick),recharge.addChild(buyBtn),(tips=uiUtils.createSimpleText(uiLocallization.rechargeYYY_tips,"rechargeTips")).size(640,67),tips.align="center",tips.pos(0,1070),tips.color="#FEC600",tips.fontSize=20,recharge.addChild(tips);var errorView=new Sprite;errorView.pos(40.5,400),errorView.name="errorView",errorView.visible=!1,this.addChild(errorView);var maskBtn=uiUtils.createMask(errorView);maskBtn.pos(-1500,-1500),errorView.addChild(maskBtn),(background=uiUtils.createSprite("assets/major/bank/authentication_smbg.png","")).pos(0,0),errorView.addChild(background),(delDesc=uiUtils.createSimpleText(uiLocallization.addBankCard,"errorDesc")).size(559,50),delDesc.pos(0,50),delDesc.color="#000000",delDesc.fontSize=25,delDesc.align="center",errorView.addChild(delDesc),(delDesc=uiUtils.createSimpleText(uiLocallization.binding_error)).size(559,50),delDesc.pos(0,150),delDesc.color="#1e8af2",delDesc.align="center",delDesc.fontSize=25,errorView.addChild(delDesc);var verifyCodeView=new rchargeVerifyCode;verifyCodeView.pos(0,300),verifyCodeView.name="verifyCodeView",verifyCodeView.visible=!1,this.addChild(verifyCodeView)},showError:function(desc){var errorView=this.getChildByName("errorView"),errorDesc=this.getChildByName("errorView","errorDesc");errorDesc.text=desc,/\n/.test(desc)?errorDesc.pos(0,30):errorDesc.pos(0,50),errorView.visible=!0},setData:function(money){this.getChildByName("errorView").visible=!1,this._amount=money;var remarks=uiLocallization.yuan;remarks=remarks.replace("X",money),this.getChildByName("recharge","rechargeNum").text=remarks;var bankCardMap=playerDataMgr.getBankCardInfoMap();if(Object.keys(bankCardMap).length>0){for(var key in bankCardMap){this._selectBankCardNum=key;break}this.showBindingView(!1,!0),this.onChoose(null,this._selectBankCardNum,0)}else this.showBindingView(!0,!0)},showBindingView:function(show,bInit){var bindingView=this.getChildByName("binding"),rechargeView=this.getChildByName("recharge");if(show){bindingView.visible=!0,rechargeView.visible=!1;var cardNumber=this.getChildByName("binding","cardNumber"),inputId=this.getChildByName("binding","inputId"),inputName=this.getChildByName("binding","inputName"),inputPhone=this.getChildByName("binding","inputPhone");if(cardNumber.text="",inputId.text="",inputName.text="",inputPhone.text="",bInit){if(null!=playerDataMgr.getBankCardNumber()&&""!=playerDataMgr.getBankCardNumber()){var num=playerDataMgr.getBankCardNumber().replace(/\-/g,"");cardNumber.text=num}null!=playerDataMgr.getBankCardName()&&""!=playerDataMgr.getBankCardName()&&(inputName.text=playerDataMgr.getBankCardName())}this.pos(-1e3,0),this.tweenTo({x:0,y:0},350,Tween.TimingFunction.linearOut,this)}else this.pos(0,0),bindingView.visible=!1,rechargeView.visible=!0,this.putData()},putData:function(){var data=playerDataMgr.getBankCardInfoMap();this.getChildByName("recharge","rootpanel").removeChildren(),this._selectBank=[];var index=0;for(var key in data)this._putOne(data[key],index),index++},_putOne:function(data,index){var root=this.getChildByName("recharge","rootpanel"),posY=80*index,cc=new Image("assets/major/public/bg_D_bar.png");cc.pos(0,posY),cc.width=560,cc.height=80,cc.sizeGrid="10,10,10,10",cc.visible=!1,root.addChild(cc),(index+1)%2!=0&&(cc.visible=!0);var rdata=data,cardData=bankMgr.getCardData(rdata.accountNo.toString()),str="";null!=cardData&&(str=cardData.belong),str.length>8&&(str=str.substring(0,8)+"...");var userName=uiUtils.createSimpleText(str,"");userName.pos(20,25+posY),userName.align="center",userName.fontSize=25,userName.color="#ffffff",root.addChild(userName);var userId=uiUtils.createSimpleText(rdata.accountNo,"");userId.pos(275,25+posY),userId.align="center",userId.fontSize=25,userId.color="#ffffff",root.addChild(userId);var select=new Image("assets/major/bank/select.png");select.pos(-17,posY-21),select.width=594,select.height=122,select.sizeGrid="10,10,10,10",rdata.accountNo!=this._selectBankCardNum&&(select.visible=!1),select.name="select",root.addChild(select),this._selectBank.push(select);var btn=new Button;btn.size(560,80),btn.pos(0,posY),btn.setClickHandler(this,this.onChoose,rdata.accountNo,index),root.addChild(btn)},onChoose:function(btn,cardNum,index){this._selectBankCardNum=cardNum;for(var i=0;i<this._selectBank.length;i++)this._selectBank[i].visible=i==index;var cardData=bankMgr.getCardData(cardNum.toString()),desc=uiLocallization.rechargeYYY_tips,tips=this.getChildByName("recharge","rechargeTips");if(null!=cardData){var str=cardData.belong;desc=desc.replace("X",this.getRechargeMaxByBankName(str))}else desc=desc.replace("X",this.getRechargeMaxByBankName(""));tips.text=desc},getRechargeMaxByBankName:function(name){var BankInfoMap={"中国银行":"15万","建设银行":"5万","光大银行":"15万","广东发展银行":"155万","广发银行":"155万","兴业银行":"15万","平安银行":"15万","工商银行":"5万","浦东发展银行":"15万","浦发银行":"15万","华夏银行":"5万","交通银行":"5万","民生银行":"155万","中信银行":"2.1万","邮储银行":"5000","邮政储蓄银行":"5000","招商银行":"6.2万"};for(var key in BankInfoMap)if(-1!=name.indexOf(key))return BankInfoMap[key];return"5万"},OnDelBtn:function(btn){function callback1(){function successFun(){delete data[this._selectBankCardNum],this._selectBankCardNum=0,this.putData()}platformManager.tryRemoveBankCard_YYY(this._selectBankCardNum,this,successFun)}function callback2(){topConfirm.hide()}var data=playerDataMgr.getBankCardInfoMap();if(Object.keys(data).length<=0)uiUtils.showMesage(uiLocallization.binding_card_no);else if(null!=playerDataMgr.getBankCardInfoByCardNum(this._selectBankCardNum)){var tip=uiLocallization.removeBankCarddesc;topConfirm.askBtnWorld(tip,this,uiLocallization.top_confirm1,uiLocallization.top_confirm2,callback1,callback2)}else uiUtils.showMesage(uiLocallization.choice_card_no)},OnAddBtn:function(){this.showBindingView(!0,!1)},showVerifyCodeView:function(cardInfo,amount){this.getChildByName("verifyCodeView").setData(cardInfo,amount),this.getChildByName("verifyCodeView").visible=!0},trim:function(s){return s.replace(/(^\s*)|(\s*$)/g,"")},OnClick:function(btn){if("btn_close"==btn.name)this.getChildByName("binding").visible?(this.tweenTo({x:-1e3,y:0},350,Tween.TimingFunction.linearOut,this),this.timerOnce(350,this,function(){this.visible=!1})):this.visible=!1;else if("bindingBtn"==btn.name){var cardNumber=this.getChildByName("binding","cardNumber").text,ret=bankMgr.luhmCheckBindingCard(cardNumber);if(null!=ret&&""!=ret)return void this.showError(ret);var inputId=this.getChildByName("binding","inputId").text;if(15!=inputId.length&&18!=inputId.length)return void this.showError(uiLocallization.rechargeYYY_inputId_length_limit);var needBankerNumber=this.trim(cardNumber),inputName=this.getChildByName("binding","inputName").text,inputPhone=this.getChildByName("binding","inputPhone").text;platformManager.tryRechargeBindingr_YYY(needBankerNumber,inputName,inputId,inputPhone,this,function(account_no){this._selectBankCardNum=account_no,this.showBindingView(!1,!1)},function(error){this.showError(error)})}else if("buyBtn"==btn.name){var data=playerDataMgr.getBankCardInfoMap();if(Object.keys(data).length<=0)return void uiUtils.showMesage(uiLocallization.binding_card_no);var cardInfo=playerDataMgr.getBankCardInfoByCardNum(this._selectBankCardNum);null!=cardInfo?this.showVerifyCodeView(cardInfo,this._amount):uiUtils.showMesage(uiLocallization.choice_card_no)}}})}),gbx.define("game/lobby/lobbypop/bank_setting",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/net/errorcode_des","gbx/net/net_tool","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/ui/ui_utils","game/lobby/lobbypop/income_expend_detail","game/lobby/lobbypop/bank_draw_encharge","game/lobby/lobbypop/bank_charge","game/lobby/lobbypop/draw_cash","game/lobby/lobbypop/bind_bank_card","game/lobby/lobbypop/unlock_bank_card","comm/helper/playerdata_mgr","conf/ui_locallization","gbx/bridge","comm/helper/bank_mgr","gbx/render/ui/image","comm/ui/connect_loading"],function(server,CMD,ERROR_CODE,ERROR_CODE_DES,netTool,Sprite,Button,Text,Panel,BaseUI,uiUtils,InComExpDetail,DrawEncharge,BankCharge,DrawCash,BindCard,UnLockBank,playerDataMgr,uiLocallization,bridge,bankMgr,Image,loadingUI){return BaseUI.extend({init:function(){this._super(),this.hasCard=!1,null===playerDataMgr.getBankCardNumber()||""==playerDataMgr.getBankCardNumber()?this._cardAccount="":(this._cardAccount=playerDataMgr.getBankCardNumber(),this.hasCard=!0);var bankData=bankMgr.getCardData(this._cardAccount),sp=new Sprite;sp.setImage("assets/major/public/Full_screenBackGround.png"),sp.pos(0,0),this.addChild(sp),uiUtils.createBackgroundCrash(this,sp);var title=uiUtils.createSimpleText(uiLocallization.word_bank,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var detailBtn=uiUtils.createButton("",1,"btn_detail"),sp_03=uiUtils.createSprite("assets/major/bank/btn_detail.png");sp_03.pos(0,0),detailBtn.addChild(sp_03),detailBtn.pos(450,100),detailBtn.size(130,80),detailBtn.setClickHandler(this,this.OnClick),this.addChild(detailBtn);var details=uiUtils.createSimpleText(uiLocallization.word_title_detail,"");details.fontSize=25,details.color="#ffffff",details.pos(480,95),this.addChild(details);var cc=new Image("assets/major/public/public_lightBg.png");cc.pos(50,150),cc.width=540,cc.height=160,cc.sizeGrid="10,10,10,10",this.addChild(cc),(cc=new Image("assets/major/public/title_bar.png")).pos(50,150),cc.width=540,cc.height=70,cc.sizeGrid="10,10,10,10",this.addChild(cc);var text_1=uiUtils.createSimpleText(uiLocallization.useLimit,"");text_1.color="#ffffff",text_1.fontSize=30,text_1.pos(20,165),text_1.align="center",text_1.size(320,35),this.addChild(text_1);var text_num=uiUtils.createSimpleText(uiUtils.getFloatByPower(playerDataMgr.getMyCarryGold(),1),"usable_limit");text_num.fontSize=32,text_num.color="#ffc600",text_num.align="center",text_num.pos(20,245),text_num.size(320,35),this.addChild(text_num);var text_2=uiUtils.createSimpleText(uiLocallization.drawcashLimit,"");text_2.fontSize=30,text_2.color="#ffffff",text_2.pos(300,165),text_2.align="center",text_2.size(320,35),this.addChild(text_2);var text_num_2=uiUtils.createSimpleText(this.getHunderMulti(playerDataMgr.getMyCarryGold()),"usable_draw_limit");text_num_2.fontSize=32,text_num_2.color="#ffc600",text_num_2.align="center",text_num_2.pos(300,245),text_num_2.size(320,35),this.addChild(text_num_2);var enchargeBtn=uiUtils.createButton("assets/major/public/button_blue.png",2,"btn_encharge"),sp_01=uiUtils.createSprite("assets/major/bank/word_encharge2.png");sp_01.pos(38,13.5),enchargeBtn.addChild(sp_01),enchargeBtn.pos(110,325),enchargeBtn.setClickHandler(this,this.OnClick),this.addChild(enchargeBtn);var drawBtn=uiUtils.createButton("assets/major/public/button_8.png",2,"btn_draw_cash"),sp_02=uiUtils.createSprite("assets/major/bank/word_draw.png");sp_02.pos(43,18),drawBtn.addChild(sp_02),drawBtn.pos(395.5,325),drawBtn.setClickHandler(this,this.OnClick),this.addChild(drawBtn);var takeMoneyTip=uiUtils.createSimpleText(uiLocallization.player_deposit);takeMoneyTip.pos(52,442),takeMoneyTip.fontSize=30,takeMoneyTip.color="#000000",this.addChild(takeMoneyTip),(takeMoneyTip=uiUtils.createSimpleText(uiLocallization.player_deposit)).pos(50,440),takeMoneyTip.fontSize=30,takeMoneyTip.color="#ffffff",this.addChild(takeMoneyTip);var tip_bank=uiUtils.createSimpleText(uiLocallization.player_deposit_tip);tip_bank.color="#fff45c",tip_bank.fontSize=20,tip_bank.pos(50,485),this.addChild(tip_bank);var deposit=playerDataMgr.getMyGold()-playerDataMgr.getMyCarryGold();deposit=uiUtils.getFloatByPower(deposit,1);var myMoney=uiUtils.createSimpleText(deposit,"myMoney");myMoney.fontSize=30,myMoney.bold=!0,myMoney.pos(210,440),myMoney.align="left",myMoney.color="#E0F0EF",this.addChild(myMoney);var btn_manage=uiUtils.createButton("assets/major/public/button_blue.png",2,"btn_manage");(sp_01=uiUtils.createSprite("assets/major/bank/word_manage.png")).pos(38,13.5),btn_manage.addChild(sp_01),btn_manage.pos(455,450.5),btn_manage.setClickHandler(this,this.OnClick),this.addChild(btn_manage);var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.pivotToCenter(),spliteLine.pos(320,525),spliteLine.scaleX=1.45,this.addChild(spliteLine),(spliteLine=new Sprite).setImage("assets/major/public/white_line.png"),spliteLine.pivotToCenter(),spliteLine.pos(320,625),spliteLine.scaleX=1.45,this.addChild(spliteLine);var root=new Image;root.pos(0,525),root.width=640,root.height=100,root.name="root",this.addChild(root);var child1=new Sprite;child1.name="child1",root.addChild(child1),(sp_01=uiUtils.createSprite("assets/major/bank/bank_icon.png")).pos(50,37.5),child1.addChild(sp_01);var tip=uiUtils.createSimpleText(uiLocallization.now_bind_bankcard);tip.pos(130,25),tip.color=" #E0F0EF",tip.fontSize=35,child1.addChild(tip);var tip_no=uiUtils.createSimpleText(uiLocallization.tip_no_bind_card);tip_no.pos(450,25),tip_no.fontSize=35,child1.addChild(tip_no);var btn=new Button;btn.pos(0,0),btn.size(640,100),btn.name="btn_bind",btn.setClickHandler(this,this.OnClick),child1.addChild(btn);var child2=new Sprite;child2.name="child2",root.addChild(child2);var icon=new Sprite;icon.pos(45,-8),icon.setImage("assets/major/bank/quick.png"),child2.addChild(icon);var cardName=uiUtils.createSimpleText("","cardName");cardName.pos(155,20),cardName.fontSize=20,cardName.color="#E0F0EF",child2.addChild(cardName),this.hasCard&&null!=bankData&&(cardName.text=bankData.belong+"-"+bankData.cardName);var cardNumber=uiUtils.createSimpleText(this.getCardStr(),"cardNumber");cardNumber.pos(155,50),cardNumber.fontSize=20,cardNumber.color="#E0F0EF",child2.addChild(cardNumber);var tip_yes=uiUtils.createSimpleText(uiLocallization.tip_binded_card);tip_yes.pos(445,30),tip_yes.fontSize=28,tip_yes.color="#E0F0EF",child2.addChild(tip_yes),(btn=new Button).pos(0,0),btn.size(640,100),btn.name="btn_unlock",btn.setClickHandler(this,this.OnClick),child2.addChild(btn),this.hasCard?(child1.visible=!1,child2.visible=!0):(child1.visible=!0,child2.visible=!1);var arrow=uiUtils.createSprite("assets/major/public/arrow.png");arrow.pos(550,23),root.addChild(arrow);var spreadView=new Sprite;spreadView.pos(0,0),spreadView.name="spreadView",this.addChild(spreadView);var text_give=uiUtils.createSimpleText("","text_give");text_give.color="#ffffff",text_give.fontSize=25,text_give.pos(120,682),spreadView.addChild(text_give);var vip_give=uiUtils.createButton("assets/major/public/go_btn.png",2,"btn_give");vip_give.pos(450,670),vip_give.setClickHandler(this,this.OnClick),spreadView.addChild(vip_give);var agent1=uiUtils.createSimpleText(uiLocallization.agent_lv,"");agent1.pos(42,790),agent1.color="#000000",agent1.fontSize=30,spreadView.addChild(agent1),(agent1=uiUtils.createSimpleText(uiLocallization.agent_lv,"")).pos(40,788),agent1.color="#ffffff",agent1.fontSize=30,spreadView.addChild(agent1);var agentLv=uiUtils.createSimpleText(uiLocallization.vip_agent_normal,"agentLv");agentLv.pos(200,793),agentLv.fontSize=25,spreadView.addChild(agentLv);var agent_require=uiUtils.createSimpleText(uiLocallization.vip_agent_super_require,"agent_require");agent_require.pos(40,833),agent_require.fontSize=25,spreadView.addChild(agent_require);var agent2=uiUtils.createSimpleText(uiLocallization.agent_welfare,"agent_welfare2");agent2.pos(42,880),agent2.color="#000000",agent2.fontSize=30,spreadView.addChild(agent2),(agent2=uiUtils.createSimpleText(uiLocallization.agent_welfare,"agent_welfare")).pos(40,878),agent2.color="#ffffff",agent2.fontSize=30,spreadView.addChild(agent2);var agentdesc21=uiUtils.createSimpleText(uiLocallization.vip_agent_desc21,"welfare_desc");agentdesc21.pos(40,923),agentdesc21.fontSize=25,spreadView.addChild(agentdesc21);var agentdesc22=uiUtils.createSimpleText(uiLocallization.vip_agent_desc22,"");agentdesc22.pos(40,958),agentdesc22.fontSize=25,spreadView.addChild(agentdesc22);var agentdesc23=uiUtils.createSimpleText(uiLocallization.vip_agent_desc43,"welfare_super_desc");agentdesc23.pos(40,993),agentdesc23.fontSize=25,spreadView.addChild(agentdesc23);var drawEncharge=new DrawEncharge;drawEncharge.pos(0,0),drawEncharge.name="drawEncharge",drawEncharge.visible=!1,this.addChild(drawEncharge);var incomExpDetail=new InComExpDetail;incomExpDetail.pos(0,0),incomExpDetail.name="incomExpDetailPanel",incomExpDetail.visible=!1,this.addChild(incomExpDetail);var drawCash=new DrawCash;drawCash.pos(0,0),drawCash.name="drawCash",drawCash.visible=!1,this.addChild(drawCash);var bindCard=new BindCard;bindCard.pos(0,300),bindCard.name="bindCard",bindCard.visible=!1,this.addChild(bindCard);var unLockBank=new UnLockBank;unLockBank.pos(0,300),unLockBank.visible=!1,unLockBank.name="unLockBank",this.addChild(unLockBank),this.subscribe("game_baccarat.setting.openBankDetail",this,this.eventOpenDetail),this.subscribe("game_baccarat.setting.updateMyDeposit",this,this.eventUpdateMyDeposit),this.subscribe("game_baccarat.setting.updateMyCardInfo",this,this.eventUpdateCardInfo),this.eventUpdateCardInfo()},getCardStr:function(){var str=this._cardAccount;if(str=str.replace(/\-/g,"")){for(var str1="",i=0;i<str.length-4;i++)str1+=i%4==0?" *":"*";return str1+str.substring(str.length-4)}return""},eventUpdateCardInfo:function(){var child1=this.getChildByName("root","child1"),child2=this.getChildByName("root","child2");if(this.hasCard=!1,null===playerDataMgr.getBankCardNumber()||""==playerDataMgr.getBankCardNumber()?this._cardAccount="":(this._cardAccount=playerDataMgr.getBankCardNumber(),this.hasCard=!0),!this.hasCard)return child1.visible=!0,void(child2.visible=!1);child1.visible=!1,child2.visible=!0;var data=bankMgr.getCardData(this._cardAccount);child2.getChildByName("cardName").text=null!=data?data.belong+"-"+data.cardName:"",child2.getChildByName("cardNumber").text=this.getCardStr()},OnClick:function(btn){if("btn_close"==btn.name)this.visible=!1;else if("btn_detail"==btn.name)this.eventOpenDetail();else if("btn_manage"==btn.name){var view=this.getChildByName("drawEncharge");view.visible=!0,view.refresh()}else"btn_draw_cash"==btn.name?this.hasCard?(this.getChildByName("drawCash").visible=!0,this.getChildByName("drawCash").setData(this._cardAccount,this.getHunderMulti(playerDataMgr.getMyCarryGold()))):uiUtils.showMesage(uiLocallization.draw_cash_tip):"btn_encharge"==btn.name?this.publish("lobby.lobbypop.bankcharge"):"btn_bind"==btn.name?this.openBindCard():"btn_unlock"==btn.name?this.openunLockBank():"btn_give"==btn.name&&this.publish("lobby.lobbypop.OpenSvipPrivilege",this._spreadData,!0)},openBindCard:function(){this.getChildByName("bindCard").visible=!0},openunLockBank:function(){this.getChildByName("unLockBank").visible=!0},eventUpdateMyDeposit:function(data){var deposit=playerDataMgr.getMyGold()-playerDataMgr.getMyCarryGold();this.getChildByName("myMoney").text=uiUtils.getFloatByPower(deposit,1),this.getChildByName("usable_draw_limit").text=this.getHunderMulti(playerDataMgr.getMyCarryGold()),this.getChildByName("usable_limit").text=uiUtils.getFloatByPower(playerDataMgr.getMyCarryGold(),1),data?this.setData(data):this._spreadData?this.setData(this._spreadData):this.getChildByName("spreadView").visible=!1},eventOpenDetail:function(){var sendMsg=gtea.protobuf.encode("QueryBankReq",{token:"Moxian009",playerId:playerDataMgr.getMyUID()});loadingUI.show(),netTool.createHttpRequest(netTool.getPathByKey("queryBankUrl"),sendMsg,this,function(data){loadingUI.hide();var msgData=gtea.protobuf.decode("QueryBankResp",data);msgData.result==ERROR_CODE.OK?(this.getChildByName("incomExpDetailPanel").visible=!0,this.getChildByName("incomExpDetailPanel").setData(msgData.bankInfo)):uiUtils.showMesage(ERROR_CODE_DES[msgData.result])})},getHunderMulti:function(number){return 100*Math.floor(number/100)},setData:function(data){this._spreadData=data;var svipLv=this._spreadData.svipLevel,spreadView=this.getChildByName("spreadView"),showSpread=0!=svipLv&&3!=svipLv;spreadView.visible=showSpread;var text_give=spreadView.getChildByName("text_give"),super_agent=2==svipLv,agentLv=spreadView.getChildByName("agentLv"),agent_require=spreadView.getChildByName("agent_require"),agent_welfare=spreadView.getChildByName("agent_welfare"),agent_welfare2=spreadView.getChildByName("agent_welfare2"),welfare_desc=spreadView.getChildByName("welfare_desc"),welfare_super_desc=spreadView.getChildByName("welfare_super_desc");if(super_agent)agentLv.text=uiLocallization.vip_agent_super,agent_require.text="",agent_welfare.text=uiLocallization.super_agent_welfare,agent_welfare2.text=uiLocallization.super_agent_welfare,welfare_desc.text=uiLocallization.vip_agent_desc41,welfare_super_desc.text=uiLocallization.vip_agent_desc43,text_give.text=uiLocallization.vip_agent_super_give;else{agentLv.text=uiLocallization.vip_agent_normal;var require=uiUtils.getFloatByPower(data.svip2RechargeSum-data.rechargeSum,2);agent_require.text=uiLocallization.vip_agent_super_require+require,agent_welfare.text=uiLocallization.agent_welfare,agent_welfare2.text=uiLocallization.agent_welfare,welfare_desc.text=uiLocallization.vip_agent_desc21,welfare_super_desc.text="",text_give.text=uiLocallization.vip_agent_normal_give}}})}),gbx.define("game/lobby/lobbypop/bank_yyy_verifycode",["gbx/hubs","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","comm/base/command_ui","comm/helper/playerdata_mgr","comm/helper/account_mgr","comm/ui/ui_utils","conf/ui_locallization","comm/ui/top_message","gbx/render/ui/image","platform/platform_manager"],function(hubs,Sprite,Button,Text,BaseUI,playerDataMgr,accountMgr,uiUtils,uiLocallization,topMessage,Image,platformManager){return BaseUI.extend({init:function(){this._super(),this._transaction_id=0,this._getVCLeftTime=0,this._amount=0;var maskBtn=uiUtils.createMask();maskBtn.pos(-1500,-1500),this.addChild(maskBtn);var background=uiUtils.createSprite("assets/major/public/background.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var booter=uiUtils.createSprite("assets/major/public/back_booter_01.png","");booter.pos(0,0),this.addChild(booter);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var title=uiUtils.createSimpleText(uiLocallization.title_verify_code,"title");title.size(640,67),title.align="center",title.pos(0,13),title.fontSize=30,this.addChild(title);var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.pivotToCenter(),spliteLine.scaleX=1.5,spliteLine.pos(320,230),this.addChild(spliteLine);var input=uiUtils.createTextInput("input_code",uiLocallization.rechargeYYY_verify_code);input.size(600,80),input.fontSize=30,input.pos(20,150),input.align="center",this.addChild(input);var getVerifyCodeBtn=uiUtils.createButton("assets/major/public/button_blue.png",2,"getVerifyCode");getVerifyCodeBtn.pos(470,160),getVerifyCodeBtn.setClickHandler(this,this.onClickGetVerifyCode),this.addChild(getVerifyCodeBtn);var count=uiUtils.createSimpleText(uiLocallization.get_verify_code,"count");count.size(136,57),count.pos(0,17),count.align="center",count.fontSize=22,getVerifyCodeBtn.addChild(count);var surebtn=uiUtils.createButton("assets/major/public/button_ok.png",2,"btn_sure"),sp=uiUtils.createSprite("assets/major/public/sureBtnG.png","");sp.pos(65,15),surebtn.addChild(sp),surebtn.pos(213.5,320),surebtn.setClickHandler(this,this.OnClick),this.addChild(surebtn)},setData:function(cardInfo,amount){this.getChildByName("input_code").text="",this._amount=amount,this._cardInfo=cardInfo,this._transaction_id=0,this.stopVerifyCodeTick()},trim:function(s){return s.replace(/(^\s*)|(\s*$)/g,"")},startVerifyCodeTick:function(){this._getVCLeftTime=120,this.verifyCodeTick(),this.timerLoop(1e3,this,this.verifyCodeTick)},stopVerifyCodeTick:function(){this._getVCLeftTime=0,this.clearTimer(this,this.verifyCodeTick);var btn=this.getChildByName("getVerifyCode");btn.gray=!1,btn.getChildByName("count").text=uiLocallization.get_verify_code},verifyCodeTick:function(){var btn=this.getChildByName("getVerifyCode");this._getVCLeftTime>0?(this._getVCLeftTime=this._getVCLeftTime-1,btn.gray=!0,btn.getChildByName("count").text=uiLocallization.time_count_down+this._getVCLeftTime):(this._getVCLeftTime=0,btn.gray=!1,btn.getChildByName("count").text=uiLocallization.resend)},onClickGetVerifyCode:function(btn){this._getVCLeftTime>0||platformManager.tryRecharge_YYY(this._cardInfo.applyId,this._cardInfo.contractId,this._amount,this,function(backData){this._transaction_id=backData.data.transaction_id,this.startVerifyCodeTick()})},OnClick:function(btn){if("btn_close"==btn.name&&(this.visible=!1),"btn_sure"==btn.name){var code=this.getChildByName("input_code").text;(code=this.trim(code))==uiLocallization.rechargeYYY_verify_code||""==code?topMessage.post(uiLocallization.verify_code_can_not_void):platformManager.tryRechargeVerifyCode_YYY(this._transaction_id,code,this,function(){this.visible=!1})}}})}),gbx.define("game/lobby/lobbypop/bind_bank_card",["gbx/hubs","gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","comm/base/command_ui","comm/helper/playerdata_mgr","comm/helper/account_mgr","comm/ui/ui_utils","conf/ui_locallization","comm/helper/bank_mgr","gbx/render/ui/image"],function(hubs,server,CMD,ERROR_CODE,Sprite,Button,Text,BaseUI,playerDataMgr,accountMgr,uiUtils,uiLocallization,bankMgr,Image){return BaseUI.extend({init:function(){this._super();var maskBtn=uiUtils.createMask(this);maskBtn.pos(-1500,-1500),this.addChild(maskBtn);var background=uiUtils.createSprite("assets/major/public/background.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var booter=uiUtils.createSprite("assets/major/public/back_booter_01.png","");booter.pos(0,0),this.addChild(booter);var title=uiUtils.createSimpleText(uiLocallization.word_bank,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.pivotToCenter(),spliteLine.pos(320,180),spliteLine.scaleX=1.5,this.addChild(spliteLine);var InputNameTip=uiUtils.createSimpleText(uiLocallization.cardholder);InputNameTip.pos(50,110),InputNameTip.fontSize=30,InputNameTip.color="#ffd282",this.addChild(InputNameTip);var InputName=uiUtils.createTextInput("InputName",uiLocallization.plz_input_name);InputName.width=479,InputName.pos(120,80),InputName.height=90,InputName.fontSize=30,this.addChild(InputName),(spliteLine=new Sprite).setImage("assets/major/public/white_line.png"),spliteLine.pivotToCenter(),spliteLine.pos(320,280),spliteLine.scaleX=1.5,this.addChild(spliteLine);var InputCardTip=uiUtils.createSimpleText(uiLocallization.cardNumber);InputCardTip.pos(50,210),InputCardTip.color="#ffd282",InputCardTip.fontSize=30,this.addChild(InputCardTip);var InputCard=uiUtils.createTextInput("InputCard",uiLocallization.plz_input_bank_number);InputCard.width=479,InputCard.height=90,InputCard.pos(120,180),InputCard.fontSize=30,InputCard.on("input",this,this.fixCardNumer),this.addChild(InputCard);var tip=uiUtils.createSimpleText(uiLocallization.plz_identify_tip);tip.pos(50,290),tip.fontSize=25,tip.color="#fff45c",this.addChild(tip);var surebtn=uiUtils.createButton("assets/major/public/button_ok.png",2,"btn_sure"),sp=uiUtils.createSprite("assets/major/bank/binding.png","");sp.pos(65,15),surebtn.addChild(sp),surebtn.pos(213.5,360),surebtn.setClickHandler(this,this.OnClick),this.addChild(surebtn)},bindCardNumber:function(number,playerName){var data=bankMgr.getCardData(number),bankName="";data&&(bankName=data.belong+"-"+data.cardName);var sendData=gtea.protobuf.encode("BindCardNumberReq",{cardNum:number,cardName:playerName,bankName:bankName}),cardNumber=number;server.requestToGame(CMD.BindCardNumber,sendData,this,function(errorcode,retData){if(errorcode==ERROR_CODE.OK){gtea.protobuf.decode("BindCardNumberResp",retData);playerDataMgr.setBankCardNumber(cardNumber),playerDataMgr.setBankCardName(playerName),uiUtils.showMesage(uiLocallization.bind_card_ok),this.publish("game_baccarat.setting.updateMyCardInfo"),this.visible=!1}})},fixCardNumer:function(e){var v=this.getChildByName("InputCard").text;(v=bankMgr.trimLeft(v)).length>23&&(v=v.substring(0,23),this.getChildByName("InputCard").text=v),/\S{5}/.test(v)&&(this.getChildByName("InputCard").text=v.replace(/\s/g,"").replace(/(.{4})/g,"$1 "))},OnClick:function(btn){if("btn_close"==btn.name)this.visible=!1;else if("btn_sure"==btn.name){var cardNumber=this.getChildByName("InputCard").text,playerName=this.getChildByName("InputName").text;this.bindCard(cardNumber,playerName)}},bindCard:function(cardNumber,playerName){if(""==playerName||playerName==uiLocallization.plz_input_name)return uiUtils.showMesage(uiLocallization.name_can_not_void),!1;if(bankMgr.luhmCheck(cardNumber)){var needBankerNumber=bankMgr.getNeedBankNumber(cardNumber);this.bindCardNumber(needBankerNumber,playerName)}}})}),gbx.define("game/lobby/lobbypop/bind_parent",["gbx/net/messagecommand","gbx/net/errorcode_des","gbx/net/connector","comm/helper/playerdata_mgr","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/ui/ui_utils","conf/ui_locallization","gbx/render/ui/image"],function(CMD,ERROR_CODE_DES,server,playerDataMgr,Sprite,Button,Text,Panel,BaseUI,uiUtils,uiLocallization,Image){return BaseUI.extend({init:function(){this._super();var maskBtn=uiUtils.createMask(this);maskBtn.pos(-1500,-1500),this.addChild(maskBtn);var background=uiUtils.createSprite("assets/major/public/background.png");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var booter=uiUtils.createSprite("assets/major/public/back_booter_01.png","");booter.pos(0,0),this.addChild(booter);var title=uiUtils.createSimpleText(uiLocallization.title_bind_recommand,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.pivotToCenter(),spliteLine.scaleX=1.5,spliteLine.pos(320,230),this.addChild(spliteLine);var input=uiUtils.createTextInput("parent_id",uiLocallization.tip_input_Id);input.size(580,80),input.fontSize=30,input.pos(20,150),input.align="center",this.addChild(input);var tip=uiUtils.createSimpleText(uiLocallization.bind_tip);tip.pos(220,320),tip.fontSize=25,tip.color="#fed58b",tip.alpha=.8,this.addChild(tip);var surebtn=uiUtils.createButton("assets/major/public/button_ok.png",2,"btn_sure"),word_sure=uiUtils.createSprite("assets/major/public/sureBtnG.png","");word_sure.pos(65,15),surebtn.addChild(word_sure),surebtn.pos(213.5,360),surebtn.setClickHandler(this,this.OnClick),this.addChild(surebtn)},OnClick:function(btn){if("btn_close"==btn.name&&(this.visible=!1),"btn_sure"==btn.name){var parentId=this.getChildByName("parent_id").text;if(""==parentId||null==parentId||parentId==uiLocallization.tip_input_Id)return;if(null==playerDataMgr.getMyUID())return;this.onbindParent(parentId)}},onbindParent:function(parentId){var sendData=gtea.protobuf.encode("RebateCreateRSReq",{parentId:parentId,childId:""+playerDataMgr.getMyUID()}),BindUi=this;server.requestToGame(CMD.RebateCreateRS,sendData,this,function(errorcode,data){if(0==errorcode){gtea.protobuf.decode("RebateCreateRSResp",data);uiUtils.showMesage(uiLocallization.bind_OK),playerDataMgr.setRebateParentId(parentId),this.publish("account_safe.update.setBindInfo"),BindUi.visible=!1}else gbx.log("外层消息已提示")})}})}),gbx.define("game/lobby/lobbypop/bind_phone",["gbx/net/messagecommand","gbx/net/errorcode_des","gbx/net/connector","gbx/net/net_tool","gbx/hubs","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","comm/base/command_ui","comm/helper/playerdata_mgr","comm/helper/account_mgr","comm/ui/ui_utils","conf/ui_locallization"],function(CMD,ERROR_CODE_DES,server,netTool,hubs,Sprite,Button,Text,BaseUI,playerDataMgr,accountMgr,uiUtils,uiLocallization){return BaseUI.extend({init:function(){this._super(),this._timeleftCount=0,this._state=0;var maskBtn=uiUtils.createMask(this);maskBtn.pos(-1500,-1500),this.addChild(maskBtn);var background=uiUtils.createSprite("assets/major/public/background.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var booter=uiUtils.createSprite("assets/major/public/back_booter_01.png","");booter.pos(0,0),this.addChild(booter);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(8,8),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var title=uiUtils.createSprite("assets/major/lobby/sp/syssetting/word_bindPhone.png","");title.pos(200,10),this.addChild(title);var input=uiUtils.createTextInput("input_phone",uiLocallization.tip_input_phone_code);input.size(390,50),input.fontSize=20,input.pos(63,73),this.addChild(input);var input_code=uiUtils.createTextInput("input_code",uiLocallization.tip_input_verify_code);input_code.size(160,50),input_code.fontSize=20,input_code.pos(63,125),this.addChild(input_code);var getCode=uiUtils.createButton("assets/major/public/button_8.png",2,"get_code"),code=uiUtils.createSprite("assets/major/lobby/sp/syssetting/word_getVerifyCode.png","");code.pos(18,15),getCode.addChild(code);var count=uiUtils.createSimpleText("","count");count.pos(25,10),count.fontSize=25,getCode.addChild(count),getCode.pos(268,120),getCode.setClickHandler(this,this.OnClick),this.addChild(getCode);var bind_tip=uiUtils.createSimpleText(uiLocallization.bind_phone_reward_tip);bind_tip.align="left",bind_tip.pos(200,224),bind_tip.fontSize=15,bind_tip.alpha=.8,this.addChild(bind_tip);var sureCode=uiUtils.createButton("assets/major/public/button_8.png",2,"btn_sure"),word_bindPhone=uiUtils.createSprite("assets/major/lobby/sp/syssetting/word_bindPhone.png","");word_bindPhone.pos(35,12),sureCode.addChild(word_bindPhone),sureCode.pos(175,250),sureCode.setClickHandler(this,this.OnClick),this.addChild(sureCode),this.timerLoop(1e3,this,function(){this._timeleftCount-1>0?(this._timeleftCount=this._timeleftCount-1,this.getChildByName("get_code").gray=!0):(this._timeleftCount=0,this.getChildByName("get_code").gray=!1,0==this._state?this.getChildByName("get_code","count").text="":1==this._state&&(this.getChildByName("get_code","word").alpha=0))})},OnClick:function(btn){"btn_close"==btn.name&&(this.visible=!1),"get_code"==btn.name&&this.getVerifyCode(),btn.name},getVerifyCode:function(){function getSuccess(ret){this._timeleftCount=90}function getFail(param){uiUtils.showMesage(param)}if(!(this._timeleftCount>0)){var phone=this.getChildByName("input_phone").text;if(0!=phone.length)if(phone.length<11)uiUtils.showMesage(uiLocallization.phone_length_less);else{var sendMsg=gtea.protobuf.encode("SMSGetAuthCodeReq",{phoneNumber:phone,useNewNumber:!0});netTool.getVerifyCode(sendMsg,this,getSuccess,null,this,null,getFail)}else uiUtils.showMesage(uiLocallization.phone_can_not_void)}},reset:function(){}})}),gbx.define("game/lobby/lobbypop/change_head",["gbx/hubs","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","comm/base/command_ui","comm/helper/playerdata_mgr","comm/helper/account_mgr","comm/ui/ui_utils","conf/ui_locallization","comm/ui/top_message","gbx/render/ui/image"],function(hubs,Sprite,Button,Text,BaseUI,playerDataMgr,accountMgr,uiUtils,uiLocallization,topMessage,Image){return BaseUI.extend({init:function(){this._super(),this._headidx;var maskBtn=uiUtils.createMask(this);maskBtn.pos(-1500,-1500),this.addChild(maskBtn);var background=uiUtils.createSprite("assets/major/public/background.png","headsPanel");background.pos(0,0),background.name="background",this.addChild(background),uiUtils.createBackgroundCrash(this,background);var changeHead=uiUtils.createButton("",1,"btn_changeHead"),sp=uiUtils.createSprite("assets/major/public/TableSelect.png","btn_changeHeadBg");sp.pos(35,-30),changeHead.addChild(sp),changeHead.size(258,59),changeHead.pos(60,9.5),changeHead.setClickHandler(this,this.OnClick),this.addChild(changeHead);var text=uiUtils.createSimpleText(uiLocallization.changehead,"choice_Head");text.pos(129,19.5),text.fontSize=30,text.color="#ffffff",this.addChild(text);var customHead=uiUtils.createButton("",1,"btn_customHead");customHead.size(258,59),(sp=uiUtils.createSprite("assets/major/public/TableSelect.png","btn_customHeadBg")).pos(35,-30),customHead.addChild(sp),customHead.pos(318,9.5),customHead.setClickHandler(this,this.OnClick),this.addChild(customHead),(text=uiUtils.createSimpleText(uiLocallization.customhead,"custom_Head")).pos(372,19.5),text.fontSize=30,text.color="#ffffff",this.addChild(text);var sureChoiceBtn=uiUtils.createButton("assets/major/public/button_ok.png",2,"choiceBtn_sure");(sp=uiUtils.createSprite("assets/major/public/sureBtnG.png","")).pos(65,15),sureChoiceBtn.addChild(sp),sureChoiceBtn.pos(213.5,375),sureChoiceBtn.setClickHandler(this,this.OnClick),this.addChild(sureChoiceBtn);var sureCustomBtn=uiUtils.createButton("assets/major/public/button_ok.png",2,"customBtn_sure");(sp=uiUtils.createSprite("assets/major/public/sureBtnG.png","")).pos(65,15),sureCustomBtn.addChild(sp),sureCustomBtn.pos(213.5,375),sureCustomBtn.setClickHandler(this,this.OnClick),this.addChild(sureCustomBtn);var panelCustom=new Sprite;panelCustom.visible=!1,panelCustom.pos(0,0),panelCustom.name="panelCustom";var headBG=uiUtils.createSprite("assets/major/lobby/sp/changeHead/addHead.png","head");headBG.pos(120,118),panelCustom.addChild(headBG);var captureBtn=uiUtils.createButton("assets/major/lobby/sp/changeHead/from_Camera.png",2,"captureBtn");captureBtn.pos(300,140),captureBtn.setClickHandler(this,this.OnClick),panelCustom.addChild(captureBtn);var localSelectBtn=uiUtils.createButton("assets/major/lobby/sp/changeHead/from_Album.png",2,"localSelectBtn");localSelectBtn.pos(300,217),localSelectBtn.setClickHandler(this,this.OnClick),panelCustom.addChild(localSelectBtn),this.addChild(panelCustom);for(var dataList=[],i=0;i<46;i++){var dataSpr=new Sprite;dataSpr.setImage("assets/major/head/userhead_"+i+".png"),dataSpr.scale(1.3);var selectSp=uiUtils.createSprite("assets/major/lobby/sp/changeHead/select.png","");selectSp.pos(-6,-6),selectSp.scale(.8),selectSp.visible=!1,dataSpr.addChild(selectSp),dataList[i]=[],dataList[i][0]=dataSpr,dataList[i][1]=i,dataList[i][2]=selectSp}this._headList=uiUtils.createNormalList(5,46,90,"v",550,230,110,110),this._headList.name="headList",this._headList.array=dataList,this.addChild(this._headList),this._headList.setRenderHandler(this,function(cell,idx){if(!(idx>=this._headList.array.length))if(cell.getChildByName("head"+idx));else{var spr=this._headList.array[idx][0];spr.name="head"+idx,spr.pos(5,5),cell.addChild(spr)}}),this._headList.selectEnable=!0,this._headList.setSelectHandler(this,function(idx){this._changeHead(this._headList.array[idx][1]);for(var i=0;i<this._headList.array.length;i++)this._headList.array[i][2].visible=i==idx})},_changeHead:function(headidx){this._headidx=headidx},OnClick:function(btn){if("choiceBtn_sure"==btn.name)this._headidx&&this.publish("lobby.lobbypop.changehead",this._headidx),this.visible=!1;else if("customBtn_sure"==btn.name);else if("btn_close_List"==btn.name)this.visible=!1;else if("btn_changeHead"==btn.name)this.toggleCustomPanel(!1);else{if("btn_customHead"==btn.name)return void topMessage.post(uiLocallization.common_notopen_tip);"captureBtn"==btn.name||btn.name}},toggleCustomPanel:function(v){var btn1=this.getChildByName("btn_changeHead"),btn2=this.getChildByName("btn_customHead");btn1.getChildByName("btn_changeHeadBg").visible=!v,btn2.getChildByName("btn_customHeadBg").visible=v,this.getChildByName("headList").visible=!v,this.getChildByName("choiceBtn_sure").visible=!v,this.getChildByName("customBtn_sure").visible=v,this.getChildByName("panelCustom").visible=v}})}),gbx.define("game/lobby/lobbypop/change_name",["gbx/hubs","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","comm/base/command_ui","comm/helper/playerdata_mgr","comm/helper/account_mgr","comm/ui/ui_utils","conf/ui_locallization","comm/ui/top_message","gbx/render/ui/image"],function(hubs,Sprite,Button,Text,BaseUI,playerDataMgr,accountMgr,uiUtils,uiLocallization,topMessage,Image){return BaseUI.extend({init:function(){this._super();var maskBtn=uiUtils.createMask(this);maskBtn.pos(-1500,-1500),this.addChild(maskBtn);var background=uiUtils.createSprite("assets/major/public/background.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var booter=uiUtils.createSprite("assets/major/public/back_booter_01.png","");booter.pos(0,0),this.addChild(booter);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var title=uiUtils.createSimpleText(uiLocallization.word_changeName,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.pivotToCenter(),spliteLine.scaleX=1.5,spliteLine.pos(320,230),this.addChild(spliteLine);var input=uiUtils.createTextInput("input_name",uiLocallization.tip_input_name);input.size(600,80),input.fontSize=30,input.pos(20,150),input.align="center",this.addChild(input);var surebtn=uiUtils.createButton("assets/major/public/button_ok.png",2,"btn_sure"),sp=uiUtils.createSprite("assets/major/public/sureBtnG.png","");sp.pos(65,15),surebtn.addChild(sp),surebtn.pos(213.5,320),surebtn.setClickHandler(this,this.OnClick),this.addChild(surebtn)},checkByteLength:function(str,minlen,maxlen){if(null==str)return!1;var l=str.length,blen=0;for(i=0;i<l;i++)0!=(65280&str.charCodeAt(i))&&blen++,blen++;return!(blen>maxlen||blen<minlen)},trim:function(s){return s.replace(/(^\s*)|(\s*$)/g,"")},OnClick:function(btn){if("btn_close"==btn.name&&(this.visible=!1),"btn_sure"==btn.name){var name=this.getChildByName("input_name").text;name=this.trim(name),this.checkByteLength(name,4,14)?name==uiLocallization.tip_input_name||""==name?topMessage.post(uiLocallization.setting_no_name):accountMgr.checkSensitive(name)?this.checkByteLength(name,1,14)?(this.publish("lobby.lobbypop.changename",name),this.visible=!1):topMessage.post(uiLocallization.set_name_maxLen):topMessage.post(uiLocallization.sensitive_set_name):topMessage.post(uiLocallization.set_name_minLen+uiLocallization.set_name_maxLen)}}})}),gbx.define("game/lobby/lobbypop/change_pass",["gbx/net/net_tool","gbx/net/messagecommand","gbx/net/errorcode","gbx/net/errorcode_des","gbx/hubs","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","comm/base/command_ui","comm/helper/playerdata_mgr","comm/helper/account_mgr","comm/ui/ui_utils","conf/ui_locallization","conf/platform","gbx/render/ui/image"],function(netTool,CMD,ERROR_CODE,ERROR_CODE_DES,hubs,Sprite,Button,Text,BaseUI,playerDataMgr,accountMgr,uiUtils,uiLocallization,Platform,Image){return BaseUI.extend({init:function(){this._super();var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var title=uiUtils.createSimpleText(uiLocallization.word_changePass,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);for(var posYlist=[190,285,380,475],i=0;i<4;i++){var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.pivotToCenter(),spliteLine.scaleX=1.5,spliteLine.pos(320,posYlist[i]),this.addChild(spliteLine)}var word=uiUtils.createSimpleText(uiLocallization.login_account);word.pos(50,125),word.fontSize=30,word.color="#fed58b",this.addChild(word);var number=uiUtils.createSimpleText(accountMgr.getUserData().account);number.pos(370,125),number.fontSize=30,number.size(250,30),this.addChild(number);var inputTip=uiUtils.createSimpleText(uiLocallization.orign_pass);inputTip.pos(50,215),inputTip.fontSize=30,inputTip.color="#fed58b",this.addChild(inputTip);var input_orign=uiUtils.createTextInput("input_pass_orign",uiLocallization.tip_input_pass_orign);input_orign.fontSize=30,input_orign.type="password",input_orign.size(250,80),input_orign.pos(370,195),this.addChild(input_orign);var inputTipNew=uiUtils.createSimpleText(uiLocallization.new_pass);inputTipNew.pos(50,310),inputTipNew.fontSize=30,inputTipNew.color="#fed58b",this.addChild(inputTipNew);var input=uiUtils.createTextInput("input_pass",uiLocallization.tip_input_pass);input.size(250,80),input.fontSize=30,input.type="password",input.pos(370,290),this.addChild(input);var inputTipReNew=uiUtils.createSimpleText(uiLocallization.check_pass_ok);inputTipReNew.pos(50,405),inputTipReNew.fontSize=30,inputTipReNew.color="#fed58b",this.addChild(inputTipReNew);var input_pass_repeat=uiUtils.createTextInput("input_pass_repeat",uiLocallization.tip_input_repeatpass);input_pass_repeat.size(250,80),input_pass_repeat.pos(370,385),input_pass_repeat.fontSize=30,input_pass_repeat.type="password",this.addChild(input_pass_repeat);var surebtn=uiUtils.createButton("assets/major/public/button_ok.png",2,"btn_sure"),sp=uiUtils.createSprite("assets/major/public/sureBtnG.png","");sp.pos(65,15),surebtn.addChild(sp),surebtn.pos(213.5,600),surebtn.setClickHandler(this,this.OnClick),this.addChild(surebtn)},OnClick:function(btn){"btn_close"==btn.name&&(this.visible=!1),"btn_sure"==btn.name&&this.getSalt()},Check:function(old,newPass,repeatPass){return""==old||null==old?(uiUtils.showMesage(uiLocallization.orgin_pass_no_void),!1):newPass.length<6?(uiUtils.showMesage(uiLocallization.pass_less_six),!1):0==repeatPass.length?(uiUtils.showMesage(uiLocallization.plz_input_pass),!1):newPass==repeatPass||(uiUtils.showMesage(uiLocallization.pass_diffrent),!1)},getSalt:function(){var old=this.getChildByName("input_pass_orign").text,newPass=this.getChildByName("input_pass").text,repeatPass=this.getChildByName("input_pass_repeat").text;this.Check(old,newPass,repeatPass)&&netTool.getSalt(accountMgr.getUserData().account,this,function(ret){if(ret.result==ERROR_CODE.OK){var hash=hex_md5(hex_md5(old+ret.staticSalt)+ret.randomSalt);this._ChangePass(hash,newPass)}else uiUtils.showMesage(ERROR_CODE_DES[ret.result])},null,this,null,function(param){uiUtils.showMesage(param)})},_ChangePass:function(old,newPass){var sendMsg=gtea.protobuf.encode("ResetPasswordReq",{account:accountMgr.getUserData().account,platformId:Platform.platformId,oldPassword:old,newPassword:newPass}),newPassword=newPass;netTool.createHttpRequest(netTool.getPathByKey("resetPasswordUrl"),sendMsg,this,function(data){var retData=gtea.protobuf.decode("ResetPasswordResp",data);retData.result==ERROR_CODE.OK?(accountMgr.getUserData().password=newPassword,accountMgr.saveUserDataOnly(),uiUtils.showMesage(uiLocallization.pass_reset_ok),this.reset(),this.visible=!1):uiUtils.showMesage(ERROR_CODE_DES[retData.result])})},reset:function(){this.getChildByName("input_pass_orign").text="",this.getChildByName("input_pass").text="",this.getChildByName("input_pass_repeat").text=""}})}),gbx.define("game/lobby/lobbypop/create_vip",["gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","comm/ui/ui_utils","conf/ui_locallization","comm/helper/playerdata_mgr","gbx/render/ui/hslider","comm/helper/conf_mgr","comm/helper/room_mgr","gbx/render/ui/image"],function(Sprite,Button,Text,uiUtils,uiLocallization,playerDataMgr,hSlider,confMgr,roomMgr,Image){return Sprite.extend({init:function(){function fixRoomNameLen(){var txt=this.getChildByName("input_room_name").text;txt.length>10&&(this.getChildByName("input_room_name").text=txt.substring(0,10))}this._super(),this.boots=[];var maskBtn=uiUtils.createMask(this);maskBtn.pos(-1500,-1500),this.addChild(maskBtn);var sp=new Sprite;sp.setImage("assets/major/public/Full_screenBackGround.png"),sp.pos(0,0),this.addChild(sp),uiUtils.createBackgroundCrash(this,sp);var title=uiUtils.createSimpleText(uiLocallization.word_create_room,"title");title.pos(262,13),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,8),closeBtn.width=75,closeBtn.height=65,closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/edit.png"),spliteLine.pos(480,115),this.addChild(spliteLine),(spliteLine=new Sprite).setImage("assets/major/public/white_line.png"),spliteLine.pivotToCenter(),spliteLine.pos(320,160),spliteLine.scaleX=1.1,this.addChild(spliteLine);var input=uiUtils.createTextInput("input_room_name",playerDataMgr.getMyNick()+uiLocallization.create_vip_room_name);input.size(640,80),input.fontSize=30,input.pos(0,85),input.align="center",input.on("input",this,fixRoomNameLen),this.addChild(input),(spliteLine=new Sprite).setImage("assets/major/public/splitLine_new.png"),spliteLine.pivotToCenter(),spliteLine.pos(320,219),this.addChild(spliteLine),(spliteLine=new Sprite).setImage("assets/major/public/splitLine_new.png"),spliteLine.pivotToCenter(),spliteLine.pos(320,436.2),this.addChild(spliteLine);var cc=new Image("assets/major/public/bg_D_bar.png");cc.pos(0,220),cc.width=640,cc.height=216.2,cc.sizeGrid="10,10,10,10",this.addChild(cc);var vipRoomLimitList=playerDataMgr.getVipRoomLimitList();this._type=vipRoomLimitList.length>0?vipRoomLimitList[0].type:0;var textMin=uiUtils.createSimpleText(uiLocallization.minbet,"");textMin.pos(60,230),textMin.fontSize=30,textMin.align="center",textMin.color="#ffc600",this.addChild(textMin);var textMinNum=uiUtils.createSimpleText(uiLocallization.minbet,"minNum"),minT=vipRoomLimitList.length>0?vipRoomLimitList[0].bankerFarmerBetMin:0;textMinNum.text=minT,textMinNum.pos(60,280),textMinNum.fontSize=30,textMinNum.align="center",this.addChild(textMinNum);var textMax=uiUtils.createSimpleText(uiLocallization.maxbet,"");textMax.pos(350,230),textMax.align="right",textMax.fontSize=30,textMax.align="center",textMax.color="#ffc600",this.addChild(textMax);var textMaxNum=uiUtils.createSimpleText(uiLocallization.maxbet,"maxNum"),maxT=vipRoomLimitList.length>0?vipRoomLimitList[0].allBankerFarmerBetMax:0;textMaxNum.text=maxT,textMaxNum.pos(350,280),textMaxNum.fontSize=30,textMaxNum.align="center",this.addChild(textMaxNum);var sliderBgfill=uiUtils.createSprite("assets/major/lobby/sp/vip/slider_change.png","sliderBgfill");sliderBgfill.pos(27.5,340),sliderBgfill.scaleX=0,this.addChild(sliderBgfill);var slider=new hSlider;slider.name="slider",slider.setSkinImage("assets/major/lobby/sp/vip/slider.png"),slider.setSlider(0,100,0),slider.tick=1,slider.pos(27.5,340),slider.setChangeHandler(this,this.onChange),slider.showLabel=!1,slider.sizeGrid="10,10,10,10,1",this.addChild(slider);var downBack_1=uiUtils.createSprite("assets/major/lobby/sp/vip/card_boot.png","");downBack_1.pos(28.5,516),this.addChild(downBack_1);for(var i=0;i<6;i++){var p=uiUtils.createSimpleText(i+1+uiLocallization.brand_boots);p.pos(115*i+5,476),p.name="boot_"+i,p.fontSize=22,this.addChild(p);var boot_btn=new Button;boot_btn.size(60,60),boot_btn.pos(115*i+5,480),boot_btn.name=i,boot_btn.setClickHandler(this,this.OnClick),this.addChild(boot_btn),this.boots.push(p)}var card=uiUtils.createSprite("assets/major/lobby/sp/vip/card.png","card");card.pos(5,487),this.addChild(card);var nowHave=uiUtils.createSimpleText(uiLocallization.now_own+0);nowHave.pos(0,395),nowHave.fontSize=22,nowHave.name="nowHave",nowHave.color="#fff45c",nowHave.align="center",this.addChild(nowHave);var servePee=uiUtils.createSimpleText(uiLocallization.room_service_pee);servePee.pos(400,395),servePee.fontSize=22,servePee.name="servePee",servePee.color="#fff45c",servePee.align="center",this.addChild(servePee);var open=uiUtils.createButton("assets/major/public/button_ok.png",2,"open"),sp_03=uiUtils.createSprite("assets/major/lobby/sp/vip/word_open.png");sp_03.pos(65,15),open.addChild(sp_03),open.pos(213.5,620),open.setClickHandler(this,this.OnClick),this.addChild(open),this._selectBoot=0,this.setBooterPos(0)},setBooterPos:function(index){for(var card=this.getChildByName("card"),i=0;i<this.boots.length;i++)i==index?(card.pos(112*index,487),this.boots[i].pos(5+114*i,465),this.boots[i].color="#ffd282"):(this.boots[i].pos(5+114*i,476),this.boots[i].color="#FFFFFF")},initUI:function(){this.getChildByName("slider").value=0;var vipRoomLimitList=playerDataMgr.getVipRoomLimitList();this._type=vipRoomLimitList[0].type,this._pay=vipRoomLimitList[0].bankerFarmerBetMin,this._selectBoot=0,this.setBooterPos(0),this.getChildByName("servePee").text=uiLocallization.room_service_pee+this._pay*(this._selectBoot+1)},OnClick:function(btn){if("btn_close"==btn.name)this.visible=!1;else if("open"==btn.name){var roomName=this.getChildByName("input_room_name").text,resetTimesMax=this._selectBoot+1;roomMgr.createVIPRoom(roomName,parseInt(resetTimesMax),this._type)}else this._selectBoot=btn.name,this.setBooterPos(this._selectBoot),this.getChildByName("servePee").text=uiLocallization.room_service_pee+this._pay*(this._selectBoot+1)},onChange:function(value){for(var vipRoomLimitList=playerDataMgr.getVipRoomLimitList(),len=vipRoomLimitList.length,index=0,i=0;i<len;i++){var min=100/(len-1);0==value?index=0:i+1<len&&value>i*min&&value<=(i+1)*min&&(index=i+1)}index<len&&(this._type=vipRoomLimitList[index].type,this._pay=vipRoomLimitList[index].bankerFarmerBetMin,this.getChildByName("minNum").text=vipRoomLimitList[index].bankerFarmerBetMin,this.getChildByName("maxNum").text=vipRoomLimitList[index].allBankerFarmerBetMax,this.getChildByName("servePee").text=uiLocallization.room_service_pee+this._pay*(this._selectBoot+1)),this.getChildByName("sliderBgfill").scaleX=value/100}})}),gbx.define("game/lobby/lobbypop/draw_cash",["gbx/hubs","gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","comm/base/command_ui","comm/helper/playerdata_mgr","comm/helper/account_mgr","comm/ui/ui_utils","conf/ui_locallization","comm/helper/bank_mgr","gbx/render/ui/image"],function(hubs,server,CMD,ERROR_CODE,Sprite,Button,Text,BaseUI,playerDataMgr,accountMgr,uiUtils,uiLocallization,bankMgr,Image){return BaseUI.extend({init:function(){function fixCardNumer(){var txt=this.getChildByName("inputMoney").text,text=txt;isNaN(txt)&&(this.getChildByName("inputMoney").text="",this.getChildByName("bankerFee").text=""),-1!=txt.indexOf(".")&&(this.getChildByName("inputMoney").text=txt.substring(0,txt.indexOf(".")),text=this.getChildByName("inputMoney").text),parseInt(text)>=this._canDraw&&(this.getChildByName("inputMoney").text=this._canDraw);var number1=parseInt(this.getChildByName("inputMoney").text);this.getChildByName("bankerFee").text=number1?uiLocallization.bankerFee+.02*number1:""}this._super(),this._cardAccount="",this._canDraw=0;var maskBtn=uiUtils.createMask(this);maskBtn.pos(-1500,-1500),this.addChild(maskBtn);var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.word_bank,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var icon=new Sprite;icon.pos(84,120),icon.setImage("assets/major/bank/quick.png"),this.addChild(icon);var cardName=uiUtils.createSimpleText("","cardName");cardName.pos(195,120),cardName.color="#E0F0EF",cardName.fontSize=22,this.addChild(cardName);var cardEnd=uiUtils.createSimpleText("","cardEnd");cardEnd.pos(195,150),cardEnd.fontSize=22,cardEnd.color="#E0F0EF",this.addChild(cardEnd);var str=uiLocallization.can_draw_cash,candrawCash=uiUtils.createSimpleText(str,"candrawCash");candrawCash.pos(50,310),candrawCash.color="#fff45c",candrawCash.fontSize=25,this.addChild(candrawCash);var bankerFee=uiUtils.createSimpleText("","bankerFee");bankerFee.pos(430,310),bankerFee.color="#fff45c",bankerFee.fontSize=25,this.addChild(bankerFee);var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.scaleX=1.2,spliteLine.pos(50,296),this.addChild(spliteLine);var money_count=uiUtils.createTextInput("inputMoney",uiLocallization.draw_cash_limit);money_count.pos(50,210),money_count.fontSize=30,money_count.size(540,100),money_count.align="left",money_count.on("input",this,fixCardNumer),this.addChild(money_count);var surebtn=uiUtils.createButton("assets/major/public/button_blue.png",2,"btn_sure"),sp=uiUtils.createSprite("assets/major/public/sureBtnG.png","");sp.pos(38,13.5),surebtn.addChild(sp),surebtn.pos(500,235),surebtn.setClickHandler(this,this.OnClick),this.addChild(surebtn);var tip1=uiUtils.createSimpleText(uiLocallization.tip_1);tip1.fontSize=25,tip1.pos(50,470),tip1.color="#fff45c",this.addChild(tip1);var tip2=uiUtils.createSimpleText(uiLocallization.tip_2);tip2.fontSize=25,tip2.width=540,tip2.align="left",tip2.multiline=!0,tip2.wordWrap=!0,tip2.pos(50,510),tip2.color="#fff45c",this.addChild(tip2);var tip3=uiUtils.createSimpleText(uiLocallization.tip_3);tip3.pos(50,595),tip3.fontSize=25,tip3.color="#fff45c",this.addChild(tip3)},clear:function(){this.getChildByName("inputMoney").text="",this.getChildByName("bankerFee").text=""},OnClick:function(btn){"btn_close"==btn.name&&(this.visible=!1,this.clear()),"btn_sure"==btn.name&&this.check()},check:function(){var txt=this.getChildByName("inputMoney").text;if(/^\d*$/.exec(txt)){var number=parseInt(txt,10);if(number<100)uiUtils.showMesage(uiLocallization.draw_cash_limit);else{if(number>this._canDraw){var str=uiLocallization.draw_cash_limit_down;return str=str.replace("A",this._canDraw),void uiUtils.showMesage(str)}number%100==0?this.drawCash(number):uiUtils.showMesage(uiLocallization.draw_cash_hundred_limit)}}else uiUtils.showMesage(uiLocallization.plz_input_number)},drawCash:function(number){var sendData=gtea.protobuf.encode("GetCashReq",{cash:parseFloat(number),platformId:"",phoneNumber:accountMgr.getUserData().account});server.requestToGame(CMD.GetCash,sendData,this,function(errorcode,retData){if(errorcode==ERROR_CODE.OK){var msgData=gtea.protobuf.decode("GetCashResp",retData);playerDataMgr.dealItemProto(msgData.itemProto),uiUtils.showMesage(uiLocallization.draw_cash_ok),this.publish("lobby.game.updateMyInfo"),this.publish("game_baccarat.setting.updateMyDeposit"),this.getChildByName("inputMoney").text="",this.visible=!1}})},setData:function(cardNum,drawMoney){this._cardAccount=cardNum,this._canDraw=drawMoney,this.refreshCardInfo()},refreshCardInfo:function(){var data=bankMgr.getCardData(this._cardAccount);null!=data&&(this.getChildByName("cardName").text=data.belong+"-"+data.cardName);var str=this._cardAccount;str=(str=str.replace(/\-/g,"")).substring(str.length-4),this.getChildByName("cardEnd").text=uiLocallization.card_suffix+str;var can_draw=uiLocallization.can_draw_cash;can_draw=can_draw.replace("A",this._canDraw),this.getChildByName("candrawCash").text=can_draw,this.clear()}})}),gbx.define("game/lobby/lobbypop/gambling_details",["gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","comm/ui/ui_utils","gbx/render/ui/panel","conf/ui_locallization","gbx/render/ui/image"],function(Sprite,Button,Text,uiUtils,Panel,uiLocallization,Image){return Sprite.extend({init:function(){this._super();var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.title_gambling,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);for(var WordsTop=[uiLocallization.gamble_time,uiLocallization.gamble_betbefore,uiLocallization.gamble_betAction,uiLocallization.gamble_result,uiLocallization.gamble_caculate,uiLocallization.gamble_caculate_money],posX=[0,100,220,337,439,534],index=0;index<WordsTop.length;index++){var lab=uiUtils.createSimpleText(WordsTop[index],"");lab.width=100,lab.multiline=!0,lab.wordWrap=!0,lab.fontSize=25,lab.color="#F7E0AC",lab.pivotToCenter(),lab.pos(posX[index]+65,115),this.addChild(lab)}var panel=uiUtils.createPanel(640,975,"rootpanel");panel.pos(0,161),this.addChild(panel)},_putOne:function(data,index){var root=this.getChildByName("rootpanel"),posY=110*index,bg=new Image("assets/major/public/bg_D_bar.png");bg.pos(0,posY),bg.width=640,bg.height=110,bg.sizeGrid="10,10,10,10",bg.visible=!1,root.addChild(bg),index%2==0&&(bg.visible=!0);var rdata=data,newDate=new Date;newDate.setTime(rdata.date);var time=newDate.getFullYear()+"."+(newDate.getMonth()+1)+"."+newDate.getDate()+"\n"+newDate.getHours()+":"+newDate.getMinutes()+":"+newDate.getSeconds(),timelab=uiUtils.createSimpleText(time,"time");timelab.pos(0,37+posY),timelab.align="center",timelab.width=10,timelab.multiline=!0,timelab.fontSize=20,root.addChild(timelab);var before=uiUtils.createSimpleText(uiUtils.getFloatByPower(rdata.moneyBefore,1),"before");before.pos(55,47+posY),before.align="center",before.fontSize=20,root.addChild(before);var i=-1,result=uiLocallization.banker+": "+rdata.bankerNum+uiLocallization.point+" \n";i++,result+=uiLocallization.farmer+": "+rdata.farmerNum+uiLocallization.point+" \n",i++,rdata.farmerPair&&(result+=" "+uiLocallization.farmerPair+" \n",i++),rdata.bankerPair&&(result+=" "+uiLocallization.bankerPair+" \n",i++),1==rdata.winType?(result+=" "+uiLocallization.bankerWin+" \n",i++):2==rdata.winType?(result+=" "+uiLocallization.farmerWin+" \n",i++):3==rdata.winType&&(result+=" "+uiLocallization.duece+" \n",i++);var resultlab=uiUtils.createSimpleText(result,"result");resultlab.pos(340,50-11*i+posY),resultlab.fontSize=18,resultlab.wordWrap=!0,resultlab.align="center",resultlab.width=80,root.addChild(resultlab);var str="",j=-1;rdata.moneyBanker>0&&(str+=uiLocallization.banker+": "+rdata.moneyBanker+"\n",j++),rdata.moneyFarmer>0&&(str+=uiLocallization.farmer+": "+rdata.moneyFarmer+"\n",j++),rdata.moneyDeuce>0&&(str+=uiLocallization.duece+": "+rdata.moneyDeuce+"\n",j++),rdata.moneyBankerPair>0&&(str+=uiLocallization.bankerPair+": "+rdata.moneyBankerPair+"\n",j++),rdata.moneyFarmerPair>0&&(str+=uiLocallization.farmerPair+": "+rdata.moneyFarmerPair+"\n",j++);var mybet=uiUtils.createSimpleText(str,"mybet");mybet.pos(220,50-11*j+posY),mybet.align="center",mybet.fontSize=18,mybet.width=110,mybet.multiline=!0,mybet.wordWrap=!0,root.addChild(mybet);var delta="0";delta=rdata.moneyDelta>0?"+"+uiUtils.getFloatByPower(rdata.moneyDelta,1):""+uiUtils.getFloatByPower(rdata.moneyDelta,1);var moneyDelta=uiUtils.createSimpleText(delta,"moneyDelta");moneyDelta.pos(375,47+posY),moneyDelta.align="center",moneyDelta.fontSize=20,root.addChild(moneyDelta);var after=uiUtils.createSimpleText(uiUtils.getFloatByPower(rdata.moneyAfter,1),"after");after.pos(480,47+posY),after.align="center",after.fontSize=20,root.addChild(after)},OnClick:function(btn){this.visible=!1},putData:function(data){this.getChildByName("rootpanel").removeChildren();for(var i=0;i<data.length;i++)this._putOne(data[i],i)},setGambleData:function(data){data=data.sort(function(a,b){return parseInt(b.date)-parseInt(a.date)}),this.putData(data)}})}),gbx.define("game/lobby/lobbypop/game_help",["gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/ui/ui_utils","conf/ui_locallization"],function(Sprite,Button,Text,Panel,BaseUI,uiUtils,uiLocallization){return BaseUI.extend({init:function(){this._super();var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.title_help,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var panel=new Panel;panel.size(640,1069),panel.pos(0,67),panel.vScrollBarSkin="",this.addChild(panel);var help_content_0=uiUtils.createSprite("assets/major/lobby/sp/help/help_1.png","");help_content_0.pos(0,0),panel.addChild(help_content_0);var help_content_1=uiUtils.createSprite("assets/major/lobby/sp/help/help_2.png","");help_content_1.pos(0,981),panel.addChild(help_content_1);var help_content_2=uiUtils.createSprite("assets/major/lobby/sp/help/help_3.png","");help_content_2.pos(0,2090),panel.addChild(help_content_2);var help_content_3=uiUtils.createSprite("assets/major/lobby/sp/help/help_4.png","");help_content_3.pos(0,3415),panel.addChild(help_content_3)},OnClick:function(btn){"btn_close"==btn.name&&(this.visible=!1)}})}),gbx.define("game/lobby/lobbypop/game_offline_user",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/helper/conf_mgr","comm/helper/playerdata_mgr","comm/ui/ui_utils","conf/ui_locallization","gbx/render/ui/image"],function(server,CMD,ERROR_CODE,Sprite,Button,Text,Panel,BaseUI,confMgr,playerDataMgr,uiUtils,uiLocallization,Image){return BaseUI.extend({init:function(){this._super();var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.offline_title,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this._onClick),this.addChild(closeBtn);var userName=uiUtils.createSimpleText(uiLocallization.offline_user_name,"");userName.pos(-15,90),userName.color="#fed58b",userName.align="center",userName.fontSize=25,this.addChild(userName);var userId=uiUtils.createSimpleText(uiLocallization.offline_user_id,"");userId.pos(135,90),userId.fontSize=25,userId.color="#fed58b",userId.align="center",this.addChild(userId);var registerTime=uiUtils.createSimpleText(uiLocallization.offline_user_register_time,"");registerTime.pos(292,90),registerTime.fontSize=25,registerTime.color="#fed58b",registerTime.align="center",this.addChild(registerTime);var bindingTime=uiUtils.createSimpleText(uiLocallization.offline_user_binding_time,"");bindingTime.pos(460,90),bindingTime.fontSize=25,bindingTime.color="#fed58b",bindingTime.align="center",this.addChild(bindingTime);var panel=uiUtils.createPanel(640,996,"rootpanel");panel.pos(0,140),this.addChild(panel)},_putOne:function(data,index){var root=this.getChildByName("rootpanel"),posY=101*index,bg=new Image("assets/major/public/bg_D_bar.png");bg.pos(0,posY),bg.width=640,bg.height=101,bg.sizeGrid="10,10,10,10",bg.visible=!1,root.addChild(bg),index%2==0&&(bg.visible=!0);var rdata=data,userName=uiUtils.createSimpleText(rdata.nickName,"userName");userName.pos(-15,40+posY),userName.align="center",userName.fontSize=20,userName.color="#ffffff",root.addChild(userName);var userId=uiUtils.createSimpleText(rdata.playerId,"userId");userId.pos(135,40+posY),userId.align="center",userId.fontSize=20,userId.color="#ffffff",root.addChild(userId);var newDate=new Date;newDate.setTime(rdata.createTime);var time=newDate.getFullYear()+"."+(newDate.getMonth()+1)+"."+newDate.getDate(),timelab=uiUtils.createSimpleText(time,"time");timelab.pos(292,40+posY),timelab.color="#ffffff",timelab.align="center",timelab.fontSize=20,root.addChild(timelab);var newDate2=new Date;newDate2.setTime(rdata.bindTime),rdata.bindTime<=0&&newDate2.setTime(rdata.createTime);var time2=newDate2.getFullYear()+"."+(newDate2.getMonth()+1)+"."+newDate2.getDate(),timelab2=uiUtils.createSimpleText(time2,"time2");timelab2.pos(460,40+posY),timelab2.color="#ffffff",timelab2.align="center",timelab2.fontSize=20,root.addChild(timelab2)},_onClick:function(btn){"btn_close"==btn.name&&(this.visible=!1)},putData:function(data){this.getChildByName("rootpanel").removeChildren();for(var i=0;i<data.length;i++)this._putOne(data[i],i)},setData:function(data){this.getChildByName("rootpanel").scrollTo(0),this.putData(data)}})}),gbx.define("game/lobby/lobbypop/game_rebate_detail",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/helper/conf_mgr","comm/helper/playerdata_mgr","comm/ui/ui_utils","conf/ui_locallization","gbx/render/ui/image"],function(server,CMD,ERROR_CODE,Sprite,Button,Text,Panel,BaseUI,confMgr,playerDataMgr,uiUtils,uiLocallization,Image){return BaseUI.extend({init:function(){this._super();var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.rebate_detail,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this._onClick),this.addChild(closeBtn);var gamble_time=uiUtils.createSimpleText(uiLocallization.gamble_time,"");gamble_time.pos(-50,95),gamble_time.color="#fed58b",gamble_time.align="center",gamble_time.fontSize=25,this.addChild(gamble_time);var gamble_betAction=uiUtils.createSimpleText(uiLocallization.gamble_betAction,"");gamble_betAction.pos(135,82),gamble_betAction.fontSize=25,gamble_betAction.color="#fed58b",gamble_betAction.align="center",gamble_betAction.width=90,gamble_betAction.multiline=!0,gamble_betAction.wordWrap=!0,this.addChild(gamble_betAction);var gamble_result=uiUtils.createSimpleText(uiLocallization.gamble_result,"");gamble_result.pos(220,95),gamble_result.fontSize=25,gamble_result.color="#fed58b",gamble_result.align="center",this.addChild(gamble_result);var gamble_caculate=uiUtils.createSimpleText(uiLocallization.gamble_caculate,"");gamble_caculate.pos(350,95),gamble_caculate.fontSize=25,gamble_caculate.color="#fed58b",gamble_caculate.align="center",this.addChild(gamble_caculate);var rebate=uiUtils.createSimpleText(uiLocallization.rebate,"");rebate.pos(480,95),rebate.fontSize=25,rebate.color="#fed58b",rebate.align="center",this.addChild(rebate);var panel=uiUtils.createPanel(640,986,"rootpanel");panel.pos(0,150),this.addChild(panel)},_putOne:function(data,index){var root=this.getChildByName("rootpanel"),posY=120*index,bg=new Image("assets/major/public/bg_D_bar.png");bg.pos(0,posY),bg.width=640,bg.height=120,bg.sizeGrid="10,10,10,10",bg.visible=!1,root.addChild(bg),index%2==0&&(bg.visible=!0);var rdata=data,newDate=new Date;newDate.setTime(rdata.time);var time=newDate.getMonth()+1+"-"+newDate.getDate()+"\n"+newDate.getHours()+":"+newDate.getMinutes(),timelab=uiUtils.createSimpleText(time,"time");timelab.pos(-50,38+posY),timelab.align="center",timelab.fontSize=22,root.addChild(timelab);var str="",j=-1;rdata.moneyBanker>0&&(str+=uiLocallization.banker+"/"+rdata.moneyBanker+"\n",j++),rdata.moneyFarmer>0&&(str+=uiLocallization.farmer+"/"+rdata.moneyFarmer+"\n",j++),rdata.moneyDeuce>0&&(str+=uiLocallization.duece+"/"+rdata.moneyDeuce+"\n",j++),rdata.moneyBankerPair>0&&(str+=uiLocallization.bankerPair+"/"+rdata.moneyBankerPair+"\n",j++),rdata.moneyFarmerPair>0&&(str+=uiLocallization.farmerPair+"/"+rdata.moneyFarmerPair+"\n",j++);var betDetail=uiUtils.createSimpleText(str,"betDetail");betDetail.pos(80,50-12*j+posY),betDetail.align="center",betDetail.fontSize=22,root.addChild(betDetail);var i=-1,result="";result+=uiLocallization.banker+": "+rdata.bankerNum+uiLocallization.point+" \n",i++,result+=uiLocallization.farmer+": "+rdata.farmerNum+uiLocallization.point+" \n",i++,rdata.farmerPair&&(result+=" "+uiLocallization.farmerPair+" \n",i++),rdata.bankerPair&&(result+=" "+uiLocallization.bankerPair+" \n",i++),1==rdata.winType?(result+=" "+uiLocallization.bankerWin+" \n",i++):2==rdata.winType?(result+=" "+uiLocallization.farmerWin+" \n",i++):3==rdata.winType&&(result+=" "+uiLocallization.duece+" \n",i++);var resultText=uiUtils.createSimpleText(result,"resultText");resultText.pos(220,50-12*i+posY),resultText.align="center",resultText.fontSize=22,root.addChild(resultText);var caculate=uiUtils.createSimpleText(uiUtils.getFloatByPower(rdata.moneyDelta,2),"caculate");caculate.pos(350,50+posY),caculate.align="center",caculate.fontSize=22,root.addChild(caculate);var rebate=uiUtils.createSimpleText(uiUtils.getFloatByPower(rdata.rebate,2),"rebate");rebate.pos(480,50+posY),rebate.align="center",rebate.fontSize=22,root.addChild(rebate)},_onClickDetail:function(btn,index){gbx.log("index===="+index)},_onClick:function(btn){"btn_close"==btn.name&&(this.visible=!1)},putData:function(data){this.getChildByName("rootpanel").removeChildren();for(var i=0;i<data.length;i++)this._putOne(data[i],i)},setData:function(data){this.getChildByName("rootpanel").scrollTo(0);var list=data.sort(function(a,b){return parseInt(b.time)-parseInt(a.time)});this.putData(list)}})}),gbx.define("game/lobby/lobbypop/game_rebate_month",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/helper/conf_mgr","comm/helper/playerdata_mgr","comm/ui/ui_utils","conf/ui_locallization","gbx/render/ui/image"],function(server,CMD,ERROR_CODE,Sprite,Button,Text,Panel,BaseUI,confMgr,playerDataMgr,uiUtils,uiLocallization,Image){return BaseUI.extend({init:function(){this._super();var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.month_rebate_detail,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this._onClick),this.addChild(closeBtn);var userName=uiUtils.createSimpleText(uiLocallization.user_name,"user_name");userName.pos(20,90),userName.color="#fed58b",userName.fontSize=25,this.addChild(userName);var panel=uiUtils.createPanel(640,996,"rootpanel");panel.pos(0,140),this.addChild(panel)},_putOne:function(data,index){var root=this.getChildByName("rootpanel"),posY=120*index,bg=new Image("assets/major/public/bg_D_bar.png");bg.pos(0,posY),bg.width=640,bg.height=120,bg.sizeGrid="10,10,10,10",bg.visible=!1,root.addChild(bg),index%2==0&&(bg.visible=!0);var rdata=data,newDate=new Date;newDate.setTime(rdata.date);var time=newDate.getMonth()+1+"."+newDate.getDate(),timelab=uiUtils.createSimpleText(uiLocallization.date+time,"time");timelab.pos(0,50+posY),timelab.align="center",timelab.fontSize=22,root.addChild(timelab);var rebate=uiUtils.createSimpleText(uiLocallization.rebate+"："+uiUtils.getFloatByPower(rdata.amount,2),"rebate");rebate.pos(220,50+posY),rebate.align="left",rebate.fontSize=22,root.addChild(rebate);var btn_detail=uiUtils.createButton("assets/major/public/button_blue.png",2,"btn_detail");btn_detail.pos(460,31.5+posY);var word=uiUtils.createSprite("assets/major/lobby/sp/game_spread/word_detail2.png");word.pos(38,13.5),btn_detail.addChild(word),btn_detail.setClickHandler(this,this._onClickDetail,index),root.addChild(btn_detail)},_onClickDetail:function(btn,index){if(!(index>=this._data.length)){var myDate=new Date;myDate.setTime(this._data[index].date);var date=myDate.toLocaleDateString();date=date.replace(/\//g,"-"),this.publish("lobby.rebate.openRebateDetails",this._userInfo.playerId,date)}},_onClick:function(btn){"btn_close"==btn.name&&(this.visible=!1)},putData:function(data){this.getChildByName("rootpanel").removeChildren();for(var i=0;i<data.length;i++)this._putOne(data[i],i)},setData:function(userInfo,data,index){this.getChildByName("rootpanel").scrollTo(0),data=data.sort(function(a,b){return parseInt(b.date)-parseInt(a.date)}),this._data=data,this._userInfo=userInfo,this.putData(data);var user_name=this.getChildByName("user_name");user_name.text=""==userInfo?"":uiLocallization.user_name+userInfo.nickName+"      "+uiLocallization.user_id+userInfo.playerId+"      "+uiLocallization.rebate+"："+uiUtils.getFloatByPower(userInfo.amount,2)}})}),gbx.define("game/lobby/lobbypop/game_rebate_summary",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/helper/conf_mgr","comm/helper/playerdata_mgr","comm/ui/ui_utils","conf/ui_locallization","gbx/render/ui/image","game/lobby/lobbypop/game_rebate_month","game/lobby/lobbypop/game_rebate_detail","gbx/net/net_tool","comm/ui/top_message","gbx/net/errorcode_des","comm/ui/connect_loading"],function(server,CMD,ERROR_CODE,Sprite,Button,Text,Panel,BaseUI,confMgr,playerDataMgr,uiUtils,uiLocallization,Image,RebateMonth,RebateDetails,netTool,topMessage,ERROR_CODE_DES,loadingUI){return BaseUI.extend({init:function(){this._super();var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.yesterday_rebate_title,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var rebateAll=uiUtils.createSimpleText(uiLocallization.month_rebate,"rebateAll");rebateAll.pos(30,90),rebateAll.color="#fed58b",rebateAll.fontSize=30,this.addChild(rebateAll);var userName=uiUtils.createSimpleText("0","allNum");userName.pos(245,95),userName.color="#FEC600",userName.fontSize=25,this.addChild(userName);var cc=new Image("assets/major/public/bg_L_bar.png");cc.pos(0,150),cc.width=640,cc.height=70,cc.sizeGrid="10,10,10,10",this.addChild(cc);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this._onClick),this.addChild(closeBtn);(userName=uiUtils.createSimpleText(uiLocallization.offline_user_name,"offline_user_name")).pos(-10,170),userName.color="#fed58b",userName.fontSize=25,userName.align="center",this.addChild(userName);var userId=uiUtils.createSimpleText(uiLocallization.offline_user_id,"offline_user_id");userId.pos(150,170),userId.fontSize=25,userId.align="center",userId.color="#fed58b",this.addChild(userId);var rebate=uiUtils.createSimpleText(uiLocallization.rebate,"rebate");rebate.pos(292,170),rebate.fontSize=25,rebate.align="center",rebate.color="#fed58b",this.addChild(rebate);var panel=uiUtils.createPanel(640,916,"rootpanel");panel.pos(0,220),this.addChild(panel);var rebateMonth=new RebateMonth;rebateMonth.name="rebateMonth",rebateMonth.pos(0,0),rebateMonth.visible=!1,this.addChild(rebateMonth);var rebateDetails=new RebateDetails;rebateDetails.name="rebateDetails",rebateDetails.pos(0,0),rebateDetails.visible=!1,this.addChild(rebateDetails),this.subscribe("lobby.rebate.openRebateDetails",this,this._openRebateDetails)},_putOne:function(data,index){var root=this.getChildByName("rootpanel"),posY=120*index,bg=new Image("assets/major/public/bg_D_bar.png");bg.pos(0,posY),bg.width=640,bg.height=120,bg.sizeGrid="10,10,10,10",bg.visible=!1,root.addChild(bg),(index+1)%2==0&&(bg.visible=!0);var rdata=data,userName=uiUtils.createSimpleText(rdata.nickName,"userName");userName.pos(0,50+posY),userName.align="center",userName.fontSize=22,root.addChild(userName);var userId=uiUtils.createSimpleText(rdata.playerId,"userId");userId.pos(220,50+posY),userId.align="center",userId.fontSize=22,root.addChild(userId);var rebate=uiUtils.createSimpleText(uiUtils.getFloatByPower(rdata.amount,2),"rebate");if(rebate.pos(440,50+posY),rebate.align="center",rebate.fontSize=22,root.addChild(rebate),"btn_year"!=this._btnName){var btn_detail=uiUtils.createButton("assets/major/public/button_blue.png",2,"btn_detail");btn_detail.pos(460,31.5+posY);var word=uiUtils.createSprite("assets/major/lobby/sp/game_spread/word_detail2.png");word.pos(38,13.5),btn_detail.addChild(word),btn_detail.setClickHandler(this,this._onClickDetail,index),root.addChild(btn_detail),userName.pos(-10,50+posY),userName.fontSize=20,userId.pos(150,50+posY),userId.fontSize=20,rebate.pos(292,50+posY),rebate.fontSize=20}},_onClickDetail:function(btn,index){switch(this._btnName){case"btn_last":var myDate=new Date;myDate.setDate(myDate.getDate()-1);var date=myDate.toLocaleDateString();if(date=date.replace(/\//g,"-"),index>=this._data.length)return;var playerId=this._data[index].playerId;this._openRebateDetails(playerId,date);break;case"btn_month":this._openRebateMonth(index)}},_openRebateMonth:function(index){if(!(index>=this._data.length)){var myDate=new Date;myDate.setDate(myDate.getDate()-1);var date=myDate.toLocaleDateString();date=(date=(date=(date=date.replace(/\//g,"-")).replace("年","-")).replace("月","-")).replace("日","");var sendMsg=gtea.protobuf.encode("RBaccaratQueryReq",{playerId:this._data[index].playerId,date:date,token:"Moxian009",playerCurMonth:!0});loadingUI.show();var url=netTool.getPathByKey("rBaccaratQueryUrl");netTool.createHttpRequest(url,sendMsg,this,function(data){var msgData=gtea.protobuf.decode("RBaccaratQueryMonthResp",data);if(loadingUI.hide(),msgData.result==ERROR_CODE.OK){var userInfo="";index<this._data.length&&(userInfo=this._data[index]),this.getChildByName("rebateMonth").setData(userInfo,msgData.info),this.getChildByName("rebateMonth").visible=!0}else topMessage.post(ERROR_CODE_DES[msgData.result])})}},_openRebateDetails:function(playerId,date){date=(date=(date=date.replace("年","-")).replace("月","-")).replace("日","");var sendMsg=gtea.protobuf.encode("RBaccaratQueryDetailReq",{token:"Moxian009",childId:playerId.toString(),date:date});loadingUI.show();var url=netTool.getPathByKey("rBaccaratQueryDetailUrl");netTool.createHttpRequest(url,sendMsg,this,function(data){var msgData=gtea.protobuf.decode("RBaccaratQueryDetailResp",data);loadingUI.hide(),msgData.result==ERROR_CODE.OK?(this.getChildByName("rebateDetails").setData(msgData.info),this.getChildByName("rebateDetails").visible=!0):topMessage.post(ERROR_CODE_DES[msgData.result])})},_onClick:function(btn){"btn_close"==btn.name&&(this.visible=!1)},putData:function(data){this.getChildByName("rootpanel").removeChildren();for(var i=0;i<data.length;i++)this._putOne(data[i],i)},getAllNum:function(data){for(var num=0,i=0;i<data.length;i++)num+=data[i].amount;return uiUtils.getFloatByPower(num,2)},setData:function(btnName,data){this._btnName=btnName,this._data=data,this.getChildByName("rootpanel").scrollTo(0),this.putData(data);var title=this.getChildByName("title"),rebateAll=this.getChildByName("rebateAll"),allNum=this.getChildByName("allNum"),offline_user_name=this.getChildByName("offline_user_name"),offline_user_id=this.getChildByName("offline_user_id"),rebate=this.getChildByName("rebate"),imaget=uiLocallization.yesterday_rebate_title,imager=uiLocallization.yesterday_rebate_all,posX1=-10,posX2=150,posX3=292;switch(btnName){case"btn_last":imaget=uiLocallization.yesterday_rebate_title,imager=uiLocallization.yesterday_rebate_all;break;case"btn_month":imaget=uiLocallization.month_rebate_title,imager=uiLocallization.month_rebate_all;break;case"btn_year":imaget=uiLocallization.year_rebate_title,imager=uiLocallization.year_rebate_all,posX1=0,posX2=220,posX3=440}title.text=imaget,rebateAll.text=imager,allNum.text=this.getAllNum(data),offline_user_name.pos(posX1,170),offline_user_id.pos(posX2,170),rebate.pos(posX3,170)}})}),gbx.define("game/lobby/lobbypop/game_spread",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/helper/conf_mgr","comm/helper/playerdata_mgr","comm/ui/ui_utils","conf/ui_locallization","gbx/net/net_tool","gbx/bridge","comm/ui/top_message","gbx/net/errorcode_des","game/lobby/lobbypop/game_svip","game/lobby/lobbypop/game_svipapply","gbx/render/ui/image","game/lobby/lobbypop/game_offline_user","game/lobby/lobbypop/game_rebate_summary","comm/ui/connect_loading"],function(server,CMD,ERROR_CODE,Sprite,Button,Text,Panel,BaseUI,confMgr,playerDataMgr,uiUtils,uiLocallization,netTool,bridge,topMessage,ERROR_CODE_DES,GameSVIP,GameSVIPApply,Image,QueryOfflineUser,RebateSummary,loadingUI){return BaseUI.extend({init:function(){this._super();var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.spread_title,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this._onClick),this.addChild(closeBtn);var help=uiUtils.createButton("assets/major/public/button_help.png",2,"help");help.pos(565,0),help.setClickHandler(this,this._onClick);var redDot=uiUtils.createSprite("assets/major/public/reddot.png","help_redDot");redDot.pos(40,15),help.addChild(redDot),this.addChild(help);var can_get_tip=uiUtils.createSimpleText(uiLocallization.gamble_can_get,"");can_get_tip.pos(32,133),can_get_tip.color="#fed58b",can_get_tip.fontSize=35,this.addChild(can_get_tip);var getMoney=uiUtils.createSimpleText("1000","money");getMoney.pos(185,138),getMoney.fontSize=30,getMoney.color="#ffc600",this.addChild(getMoney);var btn_get=uiUtils.createButton("assets/major/public/button_blue.png",2,"btn_get");btn_get.pos(450,130);var word=uiUtils.createSprite("assets/major/lobby/sp/game_spread/word_get.png");word.pos(38,13.5),btn_get.addChild(word),btn_get.setClickHandler(this,this._onClick),this.addChild(btn_get);var cc=new Image("assets/major/public/public_lightBg.png");cc.pos(13.5,260),cc.width=612,cc.height=348,cc.sizeGrid="10,10,10,10",this.addChild(cc),(cc=new Image("assets/major/public/bg_L_bar.png")).pos(13.5,376),cc.width=612,cc.height=116,cc.sizeGrid="10,10,10,10",this.addChild(cc);var telling=uiUtils.createSimpleText(uiLocallization.input_spread_code_telling);telling.pos(32,619),telling.wordWrap=!0,telling.width=576,telling.align="left",telling.color="#fed58b",telling.fontSize=20,this.addChild(telling);var lastScoreTip=uiUtils.createSimpleText(uiLocallization.yesterday_rebate,"");lastScoreTip.pos(32,296),lastScoreTip.color="#ffffff",lastScoreTip.fontSize=30,this.addChild(lastScoreTip);var lastdayShare=uiUtils.createSimpleText("100","lastdayShare");lastdayShare.pos(180,303),lastdayShare.fontSize=25,lastdayShare.color="#ffc600",this.addChild(lastdayShare);var monthScoreTip=uiUtils.createSimpleText(uiLocallization.month_rebate,"");monthScoreTip.pos(32,412),monthScoreTip.color="#ffffff",monthScoreTip.fontSize=30,this.addChild(monthScoreTip);var score="100",monthShare=uiUtils.createSimpleText(score,"monthShare");monthShare.pos(322,419),monthShare.fontSize=25,monthShare.color="#ffc600",this.addChild(monthShare);var yearScoreTip=uiUtils.createSimpleText(uiLocallization.year_rebate,"");yearScoreTip.pos(32,528),yearScoreTip.color="#ffffff",yearScoreTip.fontSize=30,this.addChild(yearScoreTip);var score="100",yearShare=uiUtils.createSimpleText(score,"yearShare");yearShare.pos(322,535),yearShare.fontSize=25,yearShare.color="#ffc600",this.addChild(yearShare);var btn_last=uiUtils.createButton("assets/major/public/button_blue.png",2,"btn_last");btn_last.pos(450,289.5),(word=uiUtils.createSprite("assets/major/lobby/sp/game_spread/word_detail2.png")).pos(38,13.5),btn_last.addChild(word),btn_last.setClickHandler(this,this._onClick),this.addChild(btn_last);var btn_month=uiUtils.createButton("assets/major/public/button_blue.png",2,"btn_month");btn_month.pos(450,405.5),(word=uiUtils.createSprite("assets/major/lobby/sp/game_spread/word_detail2.png")).pos(38,13.5),btn_month.addChild(word),btn_month.setClickHandler(this,this._onClick),this.addChild(btn_month);var btn_year=uiUtils.createButton("assets/major/public/button_blue.png",2,"btn_year");btn_year.pos(450,521.5),(word=uiUtils.createSprite("assets/major/lobby/sp/game_spread/word_detail2.png")).pos(38,13.5),btn_year.addChild(word),btn_year.setClickHandler(this,this._onClick),this.addChild(btn_year);var tipUrl=uiUtils.createSimpleText(uiLocallization.game_spread_url,"");tipUrl.pos(32,735),tipUrl.fontSize=22,this.addChild(tipUrl),this.url=netTool.getPathByKey("rBaccaratExUrl")+"?token="+playerDataMgr.getMyUID()+"&packageId="+bridge.getPackageId();var url=uiUtils.createSimpleText(this.url.substring(0,30)+"...","url");url.pos(32,765),url.fontSize=18,url.alpha=.8,this.addChild(url),document.getElementById("myShareUrl").textContent=this.url;var btn_copy=uiUtils.createButton("assets/major/public/button_blue.png",2,"btn_copy");btn_copy.pos(450,721),(word=uiUtils.createSprite("assets/major/lobby/sp/game_spread/word_copy.png")).pos(38,13.5),btn_copy.addChild(word),btn_copy.setClickHandler(this,this._onClick),this.addChild(btn_copy);var queryDesc=uiUtils.createSimpleText(uiLocallization.query_offline_user,"queryDesc");queryDesc.pos(32,858.5),queryDesc.fontSize=22,this.addChild(queryDesc);var btn_query=uiUtils.createButton("assets/major/public/button_blue.png",2,"btn_query");btn_query.pos(450,831),(word=uiUtils.createSprite("assets/major/lobby/sp/game_spread/vip_query.png")).pos(38,13.5),btn_query.addChild(word),btn_query.setClickHandler(this,this._onClick),this.addChild(btn_query);var vipDesc=uiUtils.createSimpleText(uiLocallization.vip_agent,"vipDesc");vipDesc.pos(32,968.5),vipDesc.fontSize=22,this.addChild(vipDesc);var btn_vip=uiUtils.createButton("assets/major/public/button_8.png",2,"btn_vip");btn_vip.pos(450,941),(word=uiUtils.createSprite("assets/major/lobby/sp/game_spread/word_detail2.png","btn_vip_world")).pos(43,18),btn_vip.addChild(word),btn_vip.setClickHandler(this,this._onClick),(redDot=uiUtils.createSprite("assets/major/public/reddot.png","redDot")).pos(108,5),btn_vip.addChild(redDot),this.addChild(btn_vip);var vip_give=uiUtils.createButton("assets/major/public/go_btn.png",2,"vip_give");vip_give.pos(420,955),vip_give.setClickHandler(this,this._onClick),this.addChild(vip_give);var gameSvip=new GameSVIP;gameSvip.name="gameSvip",gameSvip.pos(0,0),gameSvip.visible=!1,this.addChild(gameSvip);var gameSvipApply=new GameSVIPApply;gameSvipApply.name="gameSvipApply",gameSvipApply.pos(0,0),gameSvipApply.visible=!1,this.addChild(gameSvipApply);var queryOfflineUser=new QueryOfflineUser;queryOfflineUser.name="queryOfflineUser",queryOfflineUser.pos(0,0),queryOfflineUser.visible=!1,this.addChild(queryOfflineUser);var rebateSummary=new RebateSummary;rebateSummary.name="rebateSummary",rebateSummary.pos(0,0),rebateSummary.visible=!1,this.addChild(rebateSummary)},_onClick:function(btn){if("btn_close"==btn.name)this.visible=!1;else if("btn_copy"==btn.name)if("iOS"===bridge.getPlatform())bridge.clipboardCopy(this.url),topMessage.post(uiLocallization.copyOK);else{var item=document.getElementById("confirm_copy");item.style.display="block",item.style.width=window.innerHeight/2.5+"px",item.style.left=(window.innerWidth-window.innerHeight/2.5)/2+"px",window.lobbyisLock=!0,this.timerOnce(10,this,function(){Laya.stage.renderingEnabled=!1})}else if("btn_get"==btn.name)this._getReward();else if("btn_last"==btn.name)this._openRebateSummary("btn_last");else if("btn_month"==btn.name)this._openRebateSummary("btn_month");else if("btn_year"==btn.name)this._openRebateSummary("btn_year");else if("btn_query"==btn.name)this._openOfflineUser();else if("btn_vip"==btn.name)switch(svipLv=this._spreadData.svipLevel){case 0:this._spreadData.svip1Check?(this.getChildByName("gameSvipApply").setData(),this.getChildByName("gameSvipApply").visible=!0):(this.getChildByName("gameSvip").setData(this._spreadData),this.getChildByName("gameSvip").visible=!0)}else if("vip_give"==btn.name){var svipLv=this._spreadData.svipLevel;switch(svipLv){case 1:case 2:this.publish("lobby.lobbypop.OpenSvipPrivilege",this._spreadData,!1)}}else if("help"==btn.name){var url=netTool.getPathByKey("baccaratExtensionUrl");"web"==bridge.getPlatform()?window.location.href=url:bridge.openUrl(url)}},_openRebateSummary:function(btnName){var myDate=new Date;myDate.setDate(myDate.getDate()-1);var date=myDate.toLocaleDateString();date=(date=(date=(date=date.replace(/\//g,"-")).replace("年","-")).replace("月","-")).replace("日","");var sendMsg="";switch(btnName){case"btn_last":sendMsg=gtea.protobuf.encode("RBaccaratQueryReq",{playerId:playerDataMgr.getMyUID(),date:date,token:"Moxian009"});break;case"btn_month":sendMsg=gtea.protobuf.encode("RBaccaratQueryReq",{playerId:playerDataMgr.getMyUID(),date:date,token:"Moxian009",curMonth:!0});break;case"btn_year":sendMsg=gtea.protobuf.encode("RBaccaratQueryReq",{playerId:playerDataMgr.getMyUID(),date:date,token:"Moxian009",curYear:!0})}loadingUI.show();var rebateSummary=this.getChildByName("rebateSummary"),url=netTool.getPathByKey("rBaccaratQueryUrl");netTool.createHttpRequest(url,sendMsg,this,function(data){var msgData=gtea.protobuf.decode("RBaccaratQueryResp",data);loadingUI.hide(),msgData.result==ERROR_CODE.OK?(rebateSummary.setData(btnName,msgData.info),rebateSummary.visible=!0):topMessage.post(ERROR_CODE_DES[msgData.result])})},_openOfflineUser:function(){var sendMsg=gtea.protobuf.encode("RBaccaratQueryRSChildrenReq",{playerId:playerDataMgr.getMyUID(),token:"Moxian009"});loadingUI.show();var url=netTool.getPathByKey("rBaccaratQueryRSChildrenUrl");netTool.createHttpRequest(url,sendMsg,this,function(data){var msgData=gtea.protobuf.decode("RBaccaratQueryRSChildrenResp",data);loadingUI.hide(),msgData.result==ERROR_CODE.OK?(this.getChildByName("queryOfflineUser").setData(msgData.children),this.getChildByName("queryOfflineUser").visible=!0):topMessage.post(ERROR_CODE_DES[msgData.result])})},setData:function(data,helpReddot){this._spreadData=data,this.getChildByName("money").text=uiUtils.getFloatByPower(data.award,2),this.getChildByName("lastdayShare").text=uiUtils.getFloatByPower(data.yesterdayAmount,2),this.getChildByName("monthShare").text=uiUtils.getFloatByPower(data.monthAmount,2),this.getChildByName("yearShare").text=uiUtils.getFloatByPower(data.yearAmount,2);var svipLv=this._spreadData.svipLevel,showAgent=3!=svipLv;this.getChildByName("vipDesc").visible=showAgent,this.getChildByName("btn_vip").visible=showAgent;var vipDesc=uiLocallization.vip_agent;this.getChildByName("vipDesc").pos(32,968.5),1==svipLv?(vipDesc=uiLocallization.vip_agent_normal_give,this.getChildByName("vipDesc").pos(132,968.5)):2==svipLv&&(vipDesc=uiLocallization.vip_agent_super_give,this.getChildByName("vipDesc").pos(132,968.5)),this.getChildByName("vipDesc").text=vipDesc;var showgive=0!=svipLv;this.getChildByName("btn_vip").visible=!showgive,this.getChildByName("vip_give").visible=showgive,this.getChildByName("help","help_redDot").visible=helpReddot},_getReward:function(){var num=this.getChildByName("money").text;if(parseFloat(num)<.1)topMessage.post(ERROR_CODE_DES[1117]);else{var sendMsg=gtea.protobuf.encode("RBaccaratGetAwardReq",{});server.requestToGame(CMD.RBaccaratGetAward,sendMsg,this,function(errorcode,data){if(errorcode==ERROR_CODE.OK){var retData=gtea.protobuf.decode("RBaccaratGetAwardResp",data);playerDataMgr.dealItemProto(retData.award),retData.award.DType==confMgr.definition.D_TYPE.BACCARAT_GOLD&&(this.getChildByName("money").text="0",this.publish("lobby.game.updateMyInfo"))}})}}})}),gbx.define("game/lobby/lobbypop/game_svip",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/helper/conf_mgr","comm/helper/playerdata_mgr","comm/ui/ui_utils","conf/ui_locallization","gbx/render/ui/image","gbx/net/net_tool","gbx/bridge"],function(server,CMD,ERROR_CODE,Sprite,Button,Text,Panel,BaseUI,confMgr,playerDataMgr,uiUtils,uiLocallization,Image,netTool,bridge){return BaseUI.extend({init:function(){this._super();var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.agent_title,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this._onClick),this.addChild(closeBtn);var help=uiUtils.createButton("assets/major/public/button_help.png",2,"help");help.pos(565,0),help.setClickHandler(this,this._onClick);var redDot=uiUtils.createSprite("assets/major/public/reddot.png","help_redDot");redDot.pos(40,15),help.addChild(redDot),this.addChild(help);var agent1=uiUtils.createSimpleText(uiLocallization.nor_agent,"");agent1.pos(40,100),agent1.color="#fed58b",agent1.fontSize=35,this.addChild(agent1);var agentdesc1=uiUtils.createSimpleText(uiLocallization.vip_agent_desc1,"");agentdesc1.pos(40,150),agentdesc1.fontSize=25,this.addChild(agentdesc1);var agent2=uiUtils.createSimpleText(uiLocallization.agent_welfare,"");agent2.pos(40,250),agent2.color="#fed58b",agent2.fontSize=35,this.addChild(agent2);var agentdesc21=uiUtils.createSimpleText(uiLocallization.vip_agent_desc21,"");agentdesc21.pos(40,300),agentdesc21.fontSize=25,this.addChild(agentdesc21);var agentdesc22=uiUtils.createSimpleText(uiLocallization.vip_agent_desc22,"");agentdesc22.pos(40,340),agentdesc22.fontSize=25,this.addChild(agentdesc22);var agent3=uiUtils.createSimpleText(uiLocallization.super_agent,"");agent3.pos(40,430),agent3.color="#fed58b",agent3.fontSize=35,this.addChild(agent3);var agentdesc3=uiUtils.createSimpleText(uiLocallization.vip_agent_desc3,"");agentdesc3.pos(40,480),agentdesc3.fontSize=25,this.addChild(agentdesc3);var agent4=uiUtils.createSimpleText(uiLocallization.super_agent_welfare,"");agent4.pos(40,580),agent4.color="#fed58b",agent4.fontSize=35,this.addChild(agent4);var agentdesc41=uiUtils.createSimpleText(uiLocallization.vip_agent_desc41,"");agentdesc41.pos(40,630),agentdesc41.fontSize=25,this.addChild(agentdesc41);var agentdesc42=uiUtils.createSimpleText(uiLocallization.vip_agent_desc42,"");agentdesc42.pos(40,670),agentdesc42.fontSize=25,this.addChild(agentdesc42);var agentdesc43=uiUtils.createSimpleText(uiLocallization.vip_agent_desc43,"");agentdesc43.pos(40,710),agentdesc43.fontSize=25,this.addChild(agentdesc43);var cc=new Image("assets/major/public/public_darkBg.png");cc.pos(15,790),cc.width=610,cc.height=136,cc.sizeGrid="10,10,10,10",this.addChild(cc);var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/splitLine_new.png"),spliteLine.pivotToCenter(),spliteLine.scaleX=1.3,spliteLine.pos(320,857),this.addChild(spliteLine);var rechargeNum=uiUtils.createSimpleText(uiLocallization.recharge_num,"");rechargeNum.pos(40,800),rechargeNum.color="#ffffff",rechargeNum.fontSize=32,this.addChild(rechargeNum);var rechargeNumText=uiUtils.createSimpleText(0,"rechargeNumText");rechargeNumText.pos(350,802),rechargeNumText.color="#FEC600",rechargeNumText.fontSize=30,this.addChild(rechargeNumText);var offline=uiUtils.createSimpleText(uiLocallization.offline_num,"");offline.pos(40,870),offline.color="#ffffff",offline.fontSize=32,this.addChild(offline);var offlineNum=uiUtils.createSimpleText("0","offlineNum");offlineNum.pos(280,872),offlineNum.fontSize=30,offlineNum.color="#FEC600",this.addChild(offlineNum)},_onClick:function(btn){if("btn_close"==btn.name)this.visible=!1;else if("help"==btn.name){var url=netTool.getPathByKey("baccaratAgentUrl");"web"==bridge.getPlatform()?window.location.href=url:bridge.openUrl(url)}},setData:function(data){this.getChildByName("rechargeNumText").text=uiUtils.getFloatByPower(data.rechargeSum,3),this.getChildByName("offlineNum").text=data.childrenNum}})}),gbx.define("game/lobby/lobbypop/game_svipapply",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/helper/conf_mgr","comm/helper/playerdata_mgr","comm/ui/ui_utils","conf/ui_locallization","comm/helper/account_mgr","comm/ui/top_message","gbx/net/errorcode_des","game/lobby/parts/country_code","gbx/render/ui/image","gbx/net/net_tool","gbx/bridge"],function(server,CMD,ERROR_CODE,Sprite,Button,Text,Panel,BaseUI,confMgr,playerDataMgr,uiUtils,uiLocallization,accountMgr,topMessage,ERROR_CODE_DES,countryCode,Image,netTool,bridge){return BaseUI.extend({init:function(){this._super();var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.agent_title,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this._onClick),this.addChild(closeBtn);var help=uiUtils.createButton("assets/major/public/button_help.png",2,"help");help.pos(565,0),help.setClickHandler(this,this._onClick);var redDot=uiUtils.createSprite("assets/major/public/reddot.png","help_redDot");redDot.pos(40,15),help.addChild(redDot),this.addChild(help);var desc=uiUtils.createSimpleText(uiLocallization.vip_agent_apply_desc,"");desc.pos(40,130),desc.wordWrap=!0,desc.width=560,desc.align="left",desc.color="#F8DFA7",desc.fontSize=30,this.addChild(desc);var agent2=uiUtils.createSimpleText(uiLocallization.agent_welfare,"");agent2.pos(40,250),agent2.color="#fed58b",agent2.fontSize=35,this.addChild(agent2);var agentdesc21=uiUtils.createSimpleText(uiLocallization.vip_agent_desc21,"");agentdesc21.pos(40,300),agentdesc21.fontSize=25,this.addChild(agentdesc21);var agentdesc22=uiUtils.createSimpleText(uiLocallization.vip_agent_desc22,"");agentdesc22.pos(40,340),agentdesc22.fontSize=25,this.addChild(agentdesc22);var agent3=uiUtils.createSimpleText(uiLocallization.be_careful,"");agent3.pos(40,430),agent3.color="#fed58b",agent3.fontSize=35,this.addChild(agent3);var agentdesc3=uiUtils.createSimpleText(uiLocallization.vip_agent_apply_desc2,"");agentdesc3.pos(40,480),agentdesc3.wordWrap=!0,agentdesc3.width=560,agentdesc3.align="left",agentdesc3.fontSize=25,this.addChild(agentdesc3);var tipCountry=uiUtils.createSimpleText(uiLocallization.country);tipCountry.pos(40,620),tipCountry.color="#DFF5F3",tipCountry.fontSize=25,this.addChild(tipCountry);var countryLab=uiUtils.createSimpleText(uiLocallization.china,"country");countryLab.pos(170,620),countryLab.color="#DFF5F3",countryLab.fontSize=25,this.addChild(countryLab);var arrow=uiUtils.createSprite("assets/major/public/arrow.png");arrow.pos(620,605),arrow.rotation=90,this.addChild(arrow);var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.pos(38,670),spliteLine.scaleX=1.5,this.addChild(spliteLine);var choose_country_btn=new Button;choose_country_btn.size(450,70),choose_country_btn.pos(165,605),choose_country_btn.name="choose_country_btn",choose_country_btn.setClickHandler(this,this._onClick),this.addChild(choose_country_btn);var tipPhone=uiUtils.createSimpleText("+86","tipPhone");tipPhone.color="#DFF5F3",tipPhone.fontSize=25,tipPhone.pos(40,695),this.addChild(tipPhone);var input=uiUtils.createTextInput("input_phone",uiLocallization.vip_agent_apply_phone);input.size(475,70),input.fontSize=25,input.pos(165,673),input.restrict="0-9",this.addChild(input),(spliteLine=new Sprite).setImage("assets/major/public/white_line.png"),spliteLine.pos(38,750),spliteLine.scaleX=1.5,this.addChild(spliteLine);var countryPanel=new Image("assets/major/public/public_darkBg.png");countryPanel.name="countryPanel",countryPanel.pos(161,671),countryPanel.visible=!1,countryPanel.width=450,countryPanel.height=190,countryPanel.zOrder=1,countryPanel.sizeGrid="10,10,10,10",this.addChild(countryPanel);for(var i=0;i<3;i++){var sp=new Image("assets/major/public/public_darkBg.png");sp.pos(0,0),sp.width=450,sp.height=190,sp.sizeGrid="10,10,10,10",countryPanel.addChild(sp)}var maskBtn_1=uiUtils.createMask(this,!0);maskBtn_1.pos(-1500,-1500),maskBtn_1.name="maskBtn_1",maskBtn_1.setClickHandler(this,this._onClick),countryPanel.addChild(maskBtn_1);var listCountry=uiUtils.createNormalList(1,10,0,"v",450,190,450,45);listCountry.array=countryCode.getCountryCode(),listCountry.name="listCountry",listCountry.setRenderHandler(this,this._renderCountryCode),countryPanel.addChild(listCountry);var apply=uiUtils.createButton("assets/major/public/button_ok.png",2,"btn_apply");apply.pos(213.5,800);var word=uiUtils.createSprite("assets/major/lobby/sp/game_spread/vip_apply.png");word.pos(50,15),apply.addChild(word),apply.setClickHandler(this,this._onClick),this.addChild(apply)},_onClick:function(btn){if("btn_close"==btn.name)this.visible=!1;else if("btn_apply"==btn.name)this._svipApply();else if("choose_country_btn"==btn.name)this.getChildByName("countryPanel").visible=!0;else if("maskBtn_1"==btn.name)this.getChildByName("countryPanel").visible=!1;else if("help"==btn.name){var url=netTool.getPathByKey("baccaratAgentUrl");"web"==bridge.getPlatform()?window.location.href=url:bridge.openUrl(url)}},_svipApply:function(){var phoneNum=this.getChildByName("input_phone").text;if(isNaN(phoneNum)||""==phoneNum)topMessage.post(uiLocallization.vip_agent_apply_phone);else{var tip=this.getChildByName("tipPhone").text,tipPhoneNum=(tip=tip.replace("+",""))+phoneNum,sendMsg=gtea.protobuf.encode("BaccaratSVIPApplyReq",{account:accountMgr.getUserData().account,phoneNumber:tipPhoneNum});server.requestToGame(CMD.BaccaratSVIPApply,sendMsg,this,function(errorcode,data){errorcode==ERROR_CODE.OK?topMessage.post(uiLocallization.vip_agent_apply_send):topMessage.post(ERROR_CODE_DES[errorcode])})}},_renderCountryCode:function(cell,idx){function selectOne(btn,param){this.getChildByName("tipPhone").text="+"+param[1],this.getChildByName("countryPanel").visible=!1,this.getChildByName("country").text=param[0]}var data=this.getChildByName("countryPanel","listCountry").array;if(!(idx>=data.length)){var root=cell.getChildByName("root");if(!root){(root=new Sprite).name="root",cell.addChild(root);var arr=data[idx].split(","),lab=uiUtils.createSimpleText(arr[0]);lab.pos(0,10),lab.color="#DFF5F3",lab.fontSize=25,root.addChild(lab);var btn=new Button;btn.size(450,45),btn.pos(0,0),btn.setClickHandler(this,selectOne,arr),root.addChild(btn)}}},setData:function(){this.getChildByName("tipPhone").text="+86",this.getChildByName("countryPanel").visible=!1,this.getChildByName("country").text=uiLocallization.china,this.getChildByName("input_phone").text=""}})}),gbx.define("game/lobby/lobbypop/game_svip_privilege",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/helper/conf_mgr","comm/helper/playerdata_mgr","comm/ui/ui_utils","conf/ui_locallization","gbx/render/ui/image","comm/ui/top_message"],function(server,CMD,ERROR_CODE,Sprite,Button,Text,Panel,BaseUI,confMgr,playerDataMgr,uiUtils,uiLocallization,Image,topMessage){return BaseUI.extend({init:function(){this._super();var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.give_chip,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this._onClick),this.addChild(closeBtn);var gold_have=uiUtils.createSimpleText(uiLocallization.vip_spread_give_all);gold_have.pos(50,80),gold_have.color="#F8DFA7",gold_have.fontSize=30,this.addChild(gold_have);var goldNum=uiUtils.createSimpleText(0,"goldNum");goldNum.pos(210,80),goldNum.color="#ffc600",goldNum.fontSize=30,this.addChild(goldNum);var btn_query=uiUtils.createButton("assets/major/public/button_blue.png",2,"btn_query");btn_query.pos(454,140);var word=uiUtils.createSprite("assets/major/lobby/sp/game_spread/vip_query.png");word.pos(38,13.5),btn_query.addChild(word),btn_query.setClickHandler(this,this._onClick),this.addChild(btn_query);var input=uiUtils.createTextInput("input_ID",uiLocallization.vip_agent_query);input.size(380,60),input.fontSize=25,input.pos(50,135),input.restrict="0-9",this.addChild(input);var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.pos(50,195),this.addChild(spliteLine);var cc=new Image("assets/major/public/public_lightBg.png");cc.pos(40,225),cc.width=560,cc.height=140,cc.sizeGrid="10,10,10,10",this.addChild(cc),(cc=new Image("assets/major/public/title_bar.png")).pos(40,225),cc.width=560,cc.height=70,cc.sizeGrid="10,10,10,10",this.addChild(cc);var userName=uiUtils.createSimpleText(uiLocallization.offline_user_name);userName.pos(80,240),userName.color="#ffffff",userName.fontSize=30,userName.align="center",this.addChild(userName),(userName=uiUtils.createSimpleText("","userName")).pos(80,315),userName.fontSize=25,userName.align="center",this.addChild(userName);var userID=uiUtils.createSimpleText(uiLocallization.offline_user_id);userID.pos(370,240),userID.color="#ffffff",userID.fontSize=30,userID.align="center",this.addChild(userID),(userID=uiUtils.createSimpleText("","userID")).pos(370,315),userID.fontSize=25,userID.align="center",this.addChild(userID);var btn_give=uiUtils.createButton("assets/major/public/button_8.png",2,"btn_give");btn_give.pos(450,390),(word=uiUtils.createSprite("assets/major/lobby/sp/game_spread/vip_give.png")).pos(43,18),btn_give.addChild(word),btn_give.setClickHandler(this,this._onClick),this.addChild(btn_give),(input=uiUtils.createTextInput("input_give",uiLocallization.vip_agent_give)).size(400,80),input.fontSize=25,input.pos(50,380),input.restrict="0-9",input.on("input",this,this.vipAgentFeeNum),this.addChild(input),(spliteLine=new Sprite).setImage("assets/major/public/white_line.png"),spliteLine.pos(50,450),this.addChild(spliteLine);var agentdesc3=uiUtils.createSimpleText(uiLocallization.vip_agent_fee,"vipAgentFee");agentdesc3.pos(0,470),agentdesc3.color="#fff45c",agentdesc3.fontSize=20,agentdesc3.width=640,agentdesc3.wordWrap=!0,agentdesc3.align="center",this.addChild(agentdesc3),(agentdesc3=uiUtils.createSimpleText(uiLocallization.vip_agent_remarks,"vipAgentRemarks")).pos(50,1050),agentdesc3.wordWrap=!0,agentdesc3.width=560,agentdesc3.align="left",agentdesc3.color="#fff45c",agentdesc3.fontSize=25,this.addChild(agentdesc3);(cc=new Image("assets/major/public/public_lightBg.png")).pos(40,540),cc.width=560,cc.height=480,cc.sizeGrid="10,10,10,10",this.addChild(cc),(cc=new Image("assets/major/public/title_bar.png")).pos(40,540),cc.width=560,cc.height=70,cc.sizeGrid="10,10,10,10",this.addChild(cc);var offlineName=uiUtils.createSimpleText(uiLocallization.vip_spread_offline);offlineName.pos(90,555),offlineName.color="#ffffff",offlineName.fontSize=30,this.addChild(offlineName);var offlineId=uiUtils.createSimpleText(uiLocallization.vip_spread_offlineId);offlineId.pos(380,555),offlineId.color="#ffffff",offlineId.fontSize=30,this.addChild(offlineId);var panel=uiUtils.createPanel(560,410,"rootpanel");panel.pos(40,610),this.addChild(panel),this.setcurGold(),this.subscribe("lobby.game.updateMyInfo",this,this.setcurGold)},vipAgentFeeNum:function(){var text=this.getChildByName("input_give").text,vipAgentFee=this.getChildByName("vipAgentFee"),number=uiUtils.getFloatByPower(parseInt(text)*this._feeRate/1e3,2);vipAgentFee.visible=null!=text&&""!=text;var fee=uiLocallization.vip_agent_fee;fee=(fee=(fee=fee.replace("X",text)).replace("Y",number)).replace("Z",parseInt(text)+number),vipAgentFee.text=fee},fixCardNumer:function(){var text=this.getChildByName("input_give").text,number=parseInt(text);number<100?this.getChildByName("input_give").text=100:number%100!=0&&(this.getChildByName("input_give").text=number-number%100),this.vipAgentFeeNum()},_onClick:function(btn){if("btn_close"==btn.name)this._rechargeIn&&this.publish("game_baccarat.setting.updateMyDeposit"),this.visible=!1;else if("btn_query"==btn.name){if(this.queryIdTip())return;this._queryUser()}else if("btn_give"==btn.name){if(this.queryIdTip())return;if(this.giveChipTip())return;this._giveUserChip()}},_giveUserChip:function(){var id=this.getChildByName("input_ID").text,giveNum=this.getChildByName("input_give").text,sendMsg=gtea.protobuf.encode("BaccaratPresentReq",{playerIdTo:id,amount:parseInt(giveNum)});server.requestToGame(CMD.BaccaratPresent,sendMsg,this,function(errorcode,data){errorcode==ERROR_CODE.OK?(topMessage.post(uiLocallization.vip_agent_give_success),this.getChildByName("input_give").text="",this.vipAgentFeeNum()):topMessage.post(ERROR_CODE_DES[errorcode])})},_queryUser:function(){var id=this.getChildByName("input_ID").text,sendMsg=gtea.protobuf.encode("QueryPlayerNameReq",{playerId:id});server.requestToGame(CMD.QueryPlayerName,sendMsg,this,function(errorcode,data){if(errorcode==ERROR_CODE.OK){var ret=gtea.protobuf.decode("QueryPlayerNameResp",data);this.getChildByName("userID").text=id,this.getChildByName("userName").text=ret.nickName}else topMessage.post(ERROR_CODE_DES[errorcode])})},giveChipTip:function(){var giveNum=this.getChildByName("input_give").text;return giveNum<100||giveNum%100!=0?(topMessage.post(uiLocallization.vip_agent_give_tip),!0):giveNum>playerDataMgr.getMyCarryGold()&&(topMessage.post(uiLocallization.chip_not_enough),!0)},queryIdTip:function(){var id=this.getChildByName("input_ID").text;return!(!isNaN(id)&&""!=id)&&(topMessage.post(uiLocallization.query_id_null),!0)},setcurGold:function(){var carryGold=playerDataMgr.getMyCarryGold();carryGold<=0&&(carryGold=0),carryGold=uiUtils.getFloatByPower(carryGold,2),this.getChildByName("goldNum").text=carryGold},_putOne:function(data,index){var root=this.getChildByName("rootpanel"),posY=56*index,cc=new Image("assets/major/public/bg_D_bar.png");cc.pos(0,posY),cc.width=560,cc.height=56,cc.sizeGrid="10,10,10,10",cc.visible=!1,root.addChild(cc),(index+1)%2!=0&&(cc.visible=!0);var rdata=data,userName=uiUtils.createSimpleText(rdata.nickName,"userName");userName.pos(45,13+posY),userName.align="center",userName.fontSize=25,userName.color="#ffffff",root.addChild(userName);var userId=uiUtils.createSimpleText(rdata.playerId,"userId");userId.pos(325,13+posY),userId.align="center",userId.fontSize=25,userId.color="#ffffff",root.addChild(userId)},putData:function(data){this.getChildByName("rootpanel").removeChildren();for(var i=0;i<data.length;i++)this._putOne(data[i],i)},setData:function(data,offLinedata,rechargeIn){this._rechargeIn=rechargeIn,this.getChildByName("rootpanel").scrollTo(0),this.putData(offLinedata),this._feeRate=data.feeRate;var remarks=uiLocallization.vip_agent_remarks;remarks=remarks.replace("X",100*data.feeRate/1e3),this.getChildByName("vipAgentRemarks").text=remarks,this.getChildByName("userID").text="",this.getChildByName("userName").text="",this.getChildByName("input_ID").text="",this.getChildByName("input_give").text="",this.vipAgentFeeNum()}})}),gbx.define("game/lobby/lobbypop/income_expend_detail",["gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/ui/ui_utils","conf/ui_locallization","gbx/render/ui/image"],function(Sprite,Button,Text,Panel,BaseUI,uiUtils,uiLocallization,Image){return BaseUI.extend({init:function(){this._super();var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.word_title_detail,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);for(var Names=[uiLocallization.gamble_time,uiLocallization.gamble_operate,uiLocallization.gamble_money],i=0;i<Names.length;i++){var text=uiUtils.createSimpleText(Names[i],"");text.pos(60+225*i,90),text.color="#F7E4B9",text.fontSize=30,this.addChild(text)}var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/splitLine_new.png"),spliteLine.pivotToCenter(),spliteLine.pos(320,150),spliteLine.scaleX=1.1,this.addChild(spliteLine);var panel=uiUtils.createPanel(640,986,"rootpanel");panel.pos(0,150),this.addChild(panel)},_putOne:function(data,index){var root=this.getChildByName("rootpanel"),posY=90*index,cc=new Image("assets/major/public/bg_D_bar.png");cc.pos(0,posY),cc.width=640,cc.height=90,cc.sizeGrid="10,10,10,10",cc.visible=!1,root.addChild(cc),(index+1)%2!=0&&(cc.visible=!0);var rdata=data,newDate=new Date;newDate.setTime(rdata.date);var time=newDate.getFullYear()+"."+(newDate.getMonth()+1)+"."+newDate.getDate()+"\n"+newDate.getHours()+":"+newDate.getMinutes()+":"+newDate.getSeconds(),timelab=uiUtils.createSimpleText(time,"time");timelab.pos(28,25+posY),timelab.align="center",timelab.stroke=1,timelab.width=10,timelab.multiline=!0,timelab.fontSize=25,root.addChild(timelab);var str="",count="";1===rdata.type?(str=uiLocallization.encharge_cash,count="+"+uiUtils.getFloatByPower(rdata.cash,3)):2===rdata.type?(str=uiLocallization.draw_cash,count="-"+uiUtils.getFloatByPower(rdata.cash,3)):3===rdata.type?(str=uiLocallization.present_cash+rdata.otherInfo,count="-"+uiUtils.getFloatByPower(rdata.cash,3)):4===rdata.type&&(str=rdata.otherInfo+uiLocallization.bepresented_cash,count="+"+uiUtils.getFloatByPower(rdata.cash,3));var operate=uiUtils.createSimpleText(str,"operateType");operate.pos(210,32+posY),operate.align="center",operate.fontSize=25,root.addChild(operate);var money=uiUtils.createSimpleText(count,"money");money.pos(430,32+posY),money.align="center",money.fontSize=25,root.addChild(money)},putData:function(data){this.getChildByName("rootpanel").removeChildren();for(var i=0;i<data.length;i++)this._putOne(data[i],i)},setData:function(data){this.putData(data)},OnClick:function(btn){"btn_close"==btn.name&&(this.visible=!1)}})}),gbx.define("game/lobby/lobbypop/input_spread_code",["gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/ui/ui_utils","conf/ui_locallization"],function(Sprite,Button,Text,Panel,BaseUI,uiUtils,uiLocallization){return BaseUI.extend({init:function(){this._super();var maskBtn=uiUtils.createMask(this);maskBtn.pos(-1500,-1500),this.addChild(maskBtn);var background=new Sprite;background.setImage("assets/major/public/background.png"),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var tip=uiUtils.createSimpleText(uiLocallization.input_spread_code_tip);tip.pos(36,60),this.addChild(tip);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(8,8),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var code=uiUtils.createTextInput("inputCode",uiLocallization.input_spread_code);code.size(200,50),code.pos(125,162),this.addChild(code);var surebtn=uiUtils.createButton("assets/major/public/button_8.png",2,"btn_sure"),wordSure=uiUtils.createSprite("assets/major/public/sureBtnG.png","");wordSure.pos(62,16),surebtn.addChild(wordSure),surebtn.pos(167,196),surebtn.setClickHandler(this,this.OnClick),this.addChild(surebtn)},OnClick:function(btn){"btn_sure"==btn.name&&(this.visible=!1)}})}),gbx.define("game/lobby/lobbypop/mail_info",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/helper/playerdata_mgr","comm/ui/ui_utils","conf/ui_locallization","gbx/hubs","comm/ui/top_message","gbx/render/ui/image"],function(server,CMD,ERROR_CODE,Sprite,Button,Text,Panel,BaseUI,playerDataMgr,uiUtils,uiLocallization,hubs,topMessage,Image){return BaseUI.extend({init:function(){this._super();var maskBtn=uiUtils.createMask(this);maskBtn.pos(-1500,-1500),this.addChild(maskBtn),this.Data=null;var background=uiUtils.createSprite("assets/major/public/background.png");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var booter=uiUtils.createSprite("assets/major/public/back_booter_01.png","");booter.pos(0,0),this.addChild(booter);var title=uiUtils.createSimpleText(uiLocallization.word_mail,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var sender=uiUtils.createSimpleText(uiLocallization.sender_player,"sender");sender.pos(30,80),sender.color="#F7E0AC",sender.fontSize=30,this.addChild(sender);var content=uiUtils.createSimpleText("     春晓   孟浩然 \n\n春眠不觉晓，处处闻啼鸟。夜来风雨声，花落知多少？","content");content.pos(25,118),content.fontSize=25,content.width=539,content.color="#ffffff",content.align="left",content.multiline=!0,content.wordWrap=!0,this.addChild(content);var mailtime=uiUtils.createSimpleText("","mailtime");mailtime.pos(345,300),mailtime.fontSize=25,content.align="right",this.addChild(mailtime);var cc=new Image("assets/major/public/public_lightBg.png");cc.pos(40,350),cc.width=560,cc.height=103,cc.sizeGrid="10,10,10,10",cc.name="getAwardBg",this.addChild(cc);var surebtn=uiUtils.createButton("assets/major/public/button_8.png",2,"receive_btn"),word=uiUtils.createSprite("assets/major/lobby/sp/mail/word_get_award.png");word.name="receiveDelete",word.pos(22,18),surebtn.addChild(word),surebtn.pos(430,368),surebtn.setClickHandler(this,this.OnClick),this.addChild(surebtn);var chip=uiUtils.createSprite("assets/major/lobby/sp/mark_gold.png","chip");chip.pos(60,375),this.addChild(chip);var chipNum=uiUtils.createSimpleText("1","chipNum");chipNum.fontSize=25,chipNum.pos(120,389),chipNum.color="#F7E0AC",this.addChild(chipNum)},setData:function(data){this.Data=data;var sender=this.getChildByName("sender").text;"unknown"!==data.from?sender.text=uiLocallization.sender_player+data.from:sender.text=uiLocallization.sender_player+uiLocallization.mail_type_0,this.getChildByName("content").text=data.content;var newDate=new Date;newDate.setTime(1e3*data.time);var times=newDate.getFullYear()+"."+(newDate.getMonth()+1)+"."+newDate.getDate()+" "+newDate.getHours()+":"+newDate.getMinutes()+":"+newDate.getSeconds();this.getChildByName("mailtime").text=times;var chip=this.getChildByName("chip"),chipNum=this.getChildByName("chipNum");if(this.Data.attachment.length<=0)(receiveDelete=this.getChildByName("receive_btn").getChildByName("receiveDelete")).setImage("assets/major/lobby/sp/mail/delete.png"),receiveDelete.pos(43,18),chip.visible=!1,chipNum.visible=!1;else{chip.visible=!0,chipNum.visible=!0,chipNum.text=data.attachment[0].itemCount;var receiveDelete=this.getChildByName("receive_btn").getChildByName("receiveDelete");receiveDelete.setImage("assets/major/lobby/sp/mail/word_get_award.png"),receiveDelete.pos(22,18)}var sendMsg=gtea.protobuf.encode("OpenMailReq",{mailId:data.mailId});server.requestToGame(CMD.OpenMail,sendMsg,this,function(errorcode,data){gtea.protobuf.decode("OpenMailResp",data);this.publish("mailsettiing.refresh.maillist")})},OnClick:function(btn){"btn_close"==btn.name?this.visible=!1:"receive_btn"==btn.name&&(this.Data.attachment.length>0?this.receiveOne():this.deleteOne(this.Data.mailId))},receiveOne:function(){var sendMsg=gtea.protobuf.encode("GetMailAwardReq",{mailId:this.Data.mailId});server.requestToGame(CMD.GetMailAward,sendMsg,this,function(errorcode,data){if(0==errorcode){gtea.protobuf.decode("GetMailAwardResp",data);topMessage.post(uiLocallization.get_mail_reward),this.publish("mailsettiing.refresh.maillist"),this.visible=!1}else gbx.log("外部已提示")})},deleteOne:function(mailId){var sendMsg=gtea.protobuf.encode("DelMailReq",{mailId:mailId});server.requestToGame(CMD.DelMail,sendMsg,this,function(errorcode,data){gtea.protobuf.decode("DelMailResp",data);this.publish("mailsettiing.refresh.maillist"),this.visible=!1})}})}),gbx.define("game/lobby/lobbypop/mail_panel",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","game/lobby/lobbypop/mail_info","comm/ui/ui_utils","conf/ui_locallization","gbx/hubs","comm/ui/top_message","comm/helper/playerdata_mgr","gbx/render/ui/image"],function(server,CMD,ERROR_CODE,Sprite,Button,Text,Panel,BaseUI,MailInfo,uiUtils,uiLocallization,hubs,topMessage,playerDataMgr,Image){return BaseUI.extend({init:function(){this._super();var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.word_mailbox,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var panel=uiUtils.createPanel(640,900,"rootpanel");panel.pos(0,66),this.addChild(panel);var receive_all=uiUtils.createButton("assets/major/public/button_ok.png",2,"receive_all"),word=uiUtils.createSprite("assets/major/lobby/sp/mail/word_get_all.png");word.pos(50,15),receive_all.addChild(word),receive_all.pos(213.5,1020),receive_all.setClickHandler(this,this.OnClick),this.addChild(receive_all);var mailInfo=new MailInfo;mailInfo.name="mailInfo",mailInfo.pos(0,300),mailInfo.visible=!1,this.addChild(mailInfo),this.subscribe("mailsettiing.refresh.maillist",this,this.refresh)},_putOne:function(data,index){function openMail(btn,data){this.getChildByName("mailInfo").visible=!0,this.getChildByName("mailInfo").setData(data)}var root=this.getChildByName("rootpanel"),posY=124*index,cc=new Image("assets/major/public/bg_D_bar.png");cc.pos(0,posY),cc.width=640,cc.height=124,cc.sizeGrid="10,10,10,10",cc.visible=!1,root.addChild(cc),(index+1)%2==0&&(cc.visible=!0);var mailType=uiUtils.createSimpleText(uiLocallization.mail_type_0,"");if(mailType.pos(103,20+posY),mailType.fontSize=35,mailType.color="#F7E0AC",mailType.stroke=2,mailType.strokeColors="#000000",root.addChild(mailType),"unknown"!==data.title?mailType.text=data.title:mailType.text=uiLocallization.mail_type_0,data.attachment.length>0){var awd=uiUtils.createSprite("assets/major/lobby/sp/mail/award.png","awardPic");awd.pos(20,49+posY),root.addChild(awd)}var str=data.content;str.length>8&&(str=str.substring(0,8)+"...");var content=uiUtils.createSimpleText(str);content.pos(103,70+posY),content.fontSize=25,content.color="#ffffff",root.addChild(content);var time=Math.ceil(data.remainTime/86400),day=uiLocallization.left_day;day=day.replace("X",time);var left=uiUtils.createSimpleText(day,"time");left.pos(380,49.5+posY),left.fontSize=25,left.color="#ffffff",root.addChild(left);var wd=uiUtils.createSimpleText(uiLocallization.word_no);wd.pos(540,49.5+posY),wd.fontSize=25,wd.color="#ffffff",root.addChild(wd);var mark=uiUtils.createSprite("assets/major/lobby/sp/mail/new_mark.png","mark");mark.pos(0,posY),root.addChild(mark);var mailState;0==data.readFlag?(mark.visible=!0,mailState=data.attachment.length>0?uiLocallization.word_no:uiLocallization.look_no):(mark.visible=!1,mailState=data.attachment.length>0?uiLocallization.word_no:uiLocallization.look),wd.text=mailState;var btn=new Button;btn.pos(0,posY),btn.size(640,124),btn.setClickHandler(this,openMail,data),root.addChild(btn)},putData:function(data){this.getChildByName("rootpanel").removeChildren();for(var i=0;i<data.length;i++)this._putOne(data[i],i)},setData:function(data){this.putData(data)},OnClick:function(btn){"btn_close"==btn.name?this.visible=!1:"receive_all"==btn.name&&this.openReceive()},openReceive:function(){var sendMsg=gtea.protobuf.encode("GetAllMailAwardReq",{});server.requestToGame(CMD.GetAllMailAward,sendMsg,this,function(errorcode,data){var retData=gtea.protobuf.decode("GetAllMailAwardResp",data);retData.mailIds.length<=0?topMessage.post(uiLocallization.get_mail_reward_no):(this.refresh(),playerDataMgr.dealItemProto(retData.attachment),hubs.publish("global.playerdata.update.userdata"),topMessage.post(uiLocallization.get_mail_reward))})},deleteAll:function(mailId){var sendMsg=gtea.protobuf.encode("DelMailReq",{mailId:mailId});server.requestToGame(CMD.DelMail,sendMsg,this,function(errorcode,data){gtea.protobuf.decode("DelMailResp",data)})},refresh:function(){var sendMsg=gtea.protobuf.encode("GetMailListReq",{});server.requestToGame(CMD.GetMailList,sendMsg,this,function(errorcode,data){var retData=gtea.protobuf.decode("GetMailListResp",data);this.setData(retData.mailData)})}})}),gbx.define("game/lobby/lobbypop/online_service",["gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/ui/ui_utils","conf/ui_locallization","comm/helper/playerdata_mgr","comm/helper/sha256","gbx/bridge"],function(Sprite,Button,Text,Panel,BaseUI,uiUtils,uiLocallization,playerDataMgr,sha256,bridge){return BaseUI.extend({init:function(){this._super(),this._rootY=0;var maskBtn=uiUtils.createMask(this);maskBtn.pos(-1500,-1500),this.addChild(maskBtn);var bg=uiUtils.createSprite("assets/major/public/background.png","");bg.pos(0,0),this.addChild(bg),uiUtils.createBackgroundCrash(this,bg);var booter=uiUtils.createSprite("assets/major/public/back_booter_01.png","");booter.pos(0,0),this.addChild(booter);var title=uiUtils.createSprite("assets/major/lobby/sp/service/word_service_title.png","");title.pos(242.5,16),this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);for(var serviceQQInfoList=playerDataMgr.getServiceQQInfoList(),i=0;i<serviceQQInfoList.length;i++){var y=100+50*i,icon=uiUtils.createSprite("assets/major/lobby/sp/service/service_icon.png","");icon.pos(90,y),this.addChild(icon),(text=uiUtils.createSimpleText(uiLocallization.serviceQQ,"")).pos(140,y+2),text.fontSize=25,text.color="#ffffff",text.text=serviceQQInfoList[i].nickName+uiLocallization.serviceQQ+serviceQQInfoList[i].qq,this.addChild(text)}var text=uiUtils.createSimpleText(uiLocallization.servicedesc,"");text.pos(207,340),text.color="#FAD88E",text.stroke=2,text.strokeColor="#885712",text.fontSize=25,this.addChild(text);var btn_service=uiUtils.createButton("assets/major/public/button_blue.png",2,"service");btn_service.pos(252,380),btn_service.setClickHandler(this,this.OnClick);var world=uiUtils.createSimpleText(uiLocallization.servicechat,"");world.color="#ffffff",world.fontSize=25,world.size(136,30),world.pos(0,15),world.align="center",btn_service.addChild(world),this.addChild(btn_service)},_openGMService:function(){var userId=playerDataMgr.getMyUID(),userAvatarUrl="http://basefile.updrips.com/10865_1497279494914_baf1b04b-9bef-4932-987b-af9bfc4aba2c",userNickName=playerDataMgr.getMyNick(),baseStr="10003"+userAvatarUrl+userId+userNickName+"j70058cih6qirmzd",signature=sha256.sha256(baseStr),url="http://118.178.138.189/support/html/index.html?appId=10003&userId="+userId+"&userAvatarUrl="+encodeURIComponent(userAvatarUrl)+"&userNickName="+encodeURIComponent(userNickName)+"&signature="+signature;"web"==bridge.getPlatform()?window.open(url):bridge.openUrl(url)},OnClick:function(btn){"btn_close"==btn.name?this.visible=!1:this._openGMService()}})}),gbx.define("game/lobby/lobbypop/rank_info",["gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","comm/ui/ui_utils","gbx/render/ui/image","conf/ui_locallization","gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","comm/ui/top_message","gbx/net/errorcode_des","comm/ui/connect_loading","comm/helper/playerdata_mgr"],function(Sprite,Button,Text,uiUtils,Image,uiLocallization,server,CMD,ERROR_CODE,topMessage,ERROR_CODE_DES,loadingUI,playerDataMgr){return Sprite.extend({init:function(){this._super(),this.tabBtn=[],this._oneData,this._dayData,this._monthData;var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),uiUtils.createBackgroundCrash(this,background),this.addChild(background);var title=uiUtils.createSimpleText(uiLocallization.rank_title,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);for(var tabBtnNames=["one","day","month"],Names=["assets/major/public/TableSelect.png"],Words=[uiLocallization.rank_one,uiLocallization.rank_day,uiLocallization.rank_month],length=tabBtnNames.length,index=0;index<length;index++){var btn=uiUtils.createButton("",1,"lobbyTab_"+tabBtnNames[index]);btn.stateNum=1,btn.size(640/3,100),btn.pos(640*index/3,80),this.addChild(btn),btn.setClickHandler(this,this.onSelect,btn.name);var just=uiUtils.createSimpleText(Words[index]);just.color="#ffffff",just.fontSize=25,just.size(640/3,30),just.pos(0,12),just.align="center",btn.addChild(just);var select=uiUtils.createSprite(Names[0],"select");select.pos(10.5,50),btn.addChild(select),this.addChild(btn),this.tabBtn.push(btn)}this.TabBtnStyle(this.tabBtn[0].name);var panel=uiUtils.createPanel(640,980,"rootpanel");panel.pos(0,156),this.addChild(panel)},TabBtnStyle:function(name){this.tabBtn.forEach(function(element){element.name==name?element.getChildByName("select").visible=!0:element.getChildByName("select").visible=!1},this)},onSelect:function(btn,name){this.TabBtnStyle(name),"lobbyTab_one"==name?this.putData(this._oneData):"lobbyTab_day"==name?this.putData(this._dayData):"lobbyTab_month"==name&&this.putData(this._monthData)},_putOne:function(data,index){var root=this.getChildByName("rootpanel"),posY=94*index,bg=new Image("assets/major/public/bg_D_bar.png");if(bg.pos(0,posY),bg.width=640,bg.height=94,bg.sizeGrid="10,10,10,10",bg.visible=!1,root.addChild(bg),index%2==0&&(bg.visible=!0),index>=0&&index<3){var sp=uiUtils.createSprite("assets/major/lobby/sp/rank/rank_00"+(index+1)+".png","num");sp.pos(25,16.5+posY),root.addChild(sp)}else{var number=uiUtils.createSimpleText(index+1,"num");number.pos(-45,28+posY),number.fontSize=30,number.align="center",number.color="#ffffff",root.addChild(number)}var head=uiUtils.createSprite("assets/major/head/userhead_"+data.playerIcon+".png");head.pos(130,posY+10),root.addChild(head);var pName=data.playerName,playerName=uiUtils.createSimpleText(pName,"playerName");playerName.color="#ffffff",playerName.pos(220,28+posY),playerName.fontSize=30,root.addChild(playerName);var money=data.gold,playerMoney=uiUtils.createSimpleText(money,"playerMoney");playerMoney.pos(420,28+posY),playerMoney.fontSize=30,playerMoney.color="#ffffff",playerMoney.align="center",root.addChild(playerMoney)},OnClick:function(btn){"btn_close"==btn.name&&(this.visible=!1)},putData:function(data){if(this.getChildByName("rootpanel").removeChildren(),data)for(var i=0;i<data.length;i++)this._putOne(data[i],i)},setData:function(data){if(this._oneData=data,this.putData(data),playerDataMgr.getPresentRankState()){loadingUI.show();var sendMsg=gtea.protobuf.encode("BaccaratGetPresentRankReq",{num:20});server.requestToGame(CMD.BaccaratGetPresentRank,sendMsg,this,function(errorcode,data){if(loadingUI.hide(),errorcode==ERROR_CODE.OK){var retData=gtea.protobuf.decode("BaccaratGetPresentRankResp",data);this._dayData=retData.dayRankInfo,this._monthData=retData.monthRankInfo}else topMessage.post(ERROR_CODE_DES[errorcode])})}else this.tabBtn.forEach(function(element){"lobbyTab_one"==element.name?element.visible=!0:element.visible=!1},this)}})}),gbx.define("game/lobby/lobbypop/sign",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","gbx/render/ui/panel","comm/base/command_ui","comm/helper/playerdata_mgr","comm/ui/ui_utils","comm/ui/top_message","comm/helper/conf_mgr","conf/ui_locallization","gbx/net/errorcode_des","gbx/bridge","conf/platform"],function(server,CMD,ERROR_CODE,Sprite,Button,Text,Panel,BaseUI,playerDataMgr,uiUtils,topMessage,confMgr,uiLocallization,ERROR_CODE_DES,bridge,Platform){return BaseUI.extend({init:function(){this._super(),this._btnList=[];var sp=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png");sp.pos(0,0),this.addChild(sp),uiUtils.createBackgroundCrash(this,sp);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var title=uiUtils.createSimpleText(uiLocallization.sign_title,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var tip=uiUtils.createSimpleText(uiLocallization.sign_reward,"");tip.pos(150,100),tip.color="#ffffff",tip.fontSize=25,tip.stroke=2,tip.strokeColor="#000000",this.addChild(tip),(sp=uiUtils.createSprite("assets/major/lobby/sp/mark_gold.png")).pos(310,90),sp.scale(.8),this.addChild(sp),(tip=uiUtils.createSimpleText(100,"chipNum")).pos(360,100),tip.color="#ffffff",tip.fontSize=25,tip.stroke=2,tip.strokeColor="#000000",this.addChild(tip);var desc=uiUtils.createSimpleText(uiLocallization.sign_desc,"");desc.pos(80,1050),desc.color="#ffffff",desc.fontSize=25,desc.stroke=2,desc.strokeColor="#000000",this.addChild(desc);for(var i=0;i<31;i++){var x=15+116*(i%5),y=140+118*Math.floor(i/5);(tip=uiUtils.createSimpleText(i+1)).pos(0,38),tip.size(101,103),tip.align="center",tip.fontSize=30;var btn=uiUtils.createButton("assets/major/lobby/sp/sign/sign_bg.png",1,"");btn.pos(x+22,y+14),btn.addChild(tip);var select=uiUtils.createSprite("assets/major/lobby/sp/sign/sign.png","select");select.pos(0,0);var show=this.alreadySign(i+1);select.visible=show,btn.addChild(select),btn.setClickHandler(this,this.onChoose,i),this.addChild(btn),this._btnList.push(btn)}},refreshUI:function(){for(var i=0;i<this._btnList.length;i++){var show=this.alreadySign(i+1);gbx.log("asdfa==="+show),this._btnList[i].getChildByName("select").visible=show}},alreadySign:function(index){for(var dailySignRecord=playerDataMgr.getDailySignRecord(),i=0;i<dailySignRecord.length;i++)if(index==dailySignRecord[i])return!0;return!1},getLastSign:function(){var dailySignRecord=playerDataMgr.getDailySignRecord();return dailySignRecord.length>0?dailySignRecord[dailySignRecord.length-1]:0},onChoose:function(btn,id){this.alreadySign(id+1)?topMessage.post(uiLocallization.sign_desc1):id==this.getLastSign()?this.sign(id+1):topMessage.post(uiLocallization.sign_desc2)},sign:function(index){var sendObj={index:index,os:bridge.getPlatform(),gameVersion:bridge.getVersion(),packageId:bridge.getPackageId()},sendMsg=gtea.protobuf.encode("BaccaratDailySignReq",sendObj);server.requestToGame(CMD.BaccaratDailySign,sendMsg,this,function(errorcode,data){if(errorcode==ERROR_CODE.OK){var dailySignRecord=playerDataMgr.getDailySignRecord();dailySignRecord.push(index),playerDataMgr.setDailySignRecord(dailySignRecord),this.refreshUI(),topMessage.post(uiLocallization.sign_desc3)}else topMessage.post(ERROR_CODE_DES[errorcode])})},OnClick:function(btn){this.visible=!1}})}),gbx.define("game/lobby/lobbypop/system_setting",["gbx/render/display/sprite","comm/ui/sound_button","comm/helper/playerdata_mgr","gbx/net/messagecommand","gbx/net/connector","gbx/net/net_tool","gbx/net/errorcode","comm/ui/ui_utils","comm/ui/top_message","gbx/net/errorcode_des","platform/platform_manager","comm/ui/connect_loading","conf/ui_locallization","comm/helper/sha256","gbx/bridge"],function(Sprite,Button,playerDataMgr,CMD,server,netTool,ERROR_CODE,uiUtils,topMessage,ERROR_CODE_DES,platformManager,loadingUI,uiLocallization,sha256,bridge){return Sprite.extend({init:function(){this._super();var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var title=uiUtils.createSimpleText(uiLocallization.word_setting,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);for(var paths=["assets/major/public/account_safe_1.png","assets/major/public/button_gambling_detail_1.png","assets/major/public/button_help_1.png","assets/major/public/button_rank.png","assets/major/public/customer_service.png"],btnNames=["btn_safe","btn_detail","btn_help","btn_rank","btn_service"],i=0;i<btnNames.length;i++){var x=0,y=0;x=i%4*150,y=150*Math.floor(i/4);var btn=uiUtils.createButton(paths[i],2,btnNames[i]);btn.stateNum=2,btn.setClickHandler(this,this.OnClick),btn.pos(40+x,120+y),this.addChild(btn)}},OnClick:function(btn){"btn_close"==btn.name?this.visible=!1:"btn_safe"==btn.name?this.publish("lobby.setting.play.open_accoutSafe"):"btn_detail"==btn.name?this._openDetail():"btn_help"==btn.name?this.publish("lobby.setting.play.open_gameHelp"):"btn_rank"==btn.name?this.publish("lobby.setting.play.open_rank"):"btn_service"==btn.name&&this.publish("lobby.setting.play.open_service",!1)},_openGMService:function(){var userId=playerDataMgr.getMyUID(),userAvatarUrl="http://basefile.updrips.com/10865_1497279494914_baf1b04b-9bef-4932-987b-af9bfc4aba2c",userNickName=playerDataMgr.getMyNick(),baseStr="10003"+userAvatarUrl+userId+userNickName+"j70058cih6qirmzd",signature=sha256.sha256(baseStr),url="http://118.178.138.189/support/html/index.html?appId=10003&userId="+userId+"&userAvatarUrl="+encodeURIComponent(userAvatarUrl)+"&userNickName="+encodeURIComponent(userNickName)+"&signature="+signature;"web"==bridge.getPlatform()?window.open(url):bridge.openUrl(url)},_openDetail:function(){loadingUI.show();var sendData=gtea.protobuf.encode("BaccaratGetRoundRecordReq",{});server.requestToGame(CMD.BaccaratGetRoundRecord,sendData,this,function(errorcode,data){if(loadingUI.hide(),errorcode==ERROR_CODE.OK){var retData=gtea.protobuf.decode("BaccaratGetRoundRecordResp",data);this.publish("lobby.setting.play.open_gambling",retData.records)}else gbx.log("外部已提示")})}})}),gbx.define("game/lobby/lobbypop/unlock_bank_card",["gbx/hubs","gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/net/errorcode_des","gbx/net/net_tool","gbx/render/display/sprite","comm/ui/sound_button","gbx/render/display/text","comm/base/command_ui","comm/helper/playerdata_mgr","comm/helper/account_mgr","comm/ui/ui_utils","conf/locallization","conf/ui_locallization","conf/platform","gbx/render/ui/image"],function(hubs,server,CMD,ERROR_CODE,ERROR_CODE_DES,netTool,Sprite,Button,Text,BaseUI,playerDataMgr,accountMgr,uiUtils,Localization,uiLocallization,Platform,Image){return BaseUI.extend({init:function(){this._super();var maskBtn=uiUtils.createMask(this);maskBtn.pos(-1500,-1500),this.addChild(maskBtn);var background=uiUtils.createSprite("assets/major/public/background.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var booter=uiUtils.createSprite("assets/major/public/back_booter_01.png","");booter.pos(0,0),this.addChild(booter);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var title=uiUtils.createSimpleText(uiLocallization.system_tip,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);var for_safe=uiUtils.createSimpleText(uiLocallization.for_safe);for_safe.pos(110,95),for_safe.fontSize=25,for_safe.color="#fff45c",this.addChild(for_safe);var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.pivotToCenter(),spliteLine.pos(320,260),spliteLine.scaleX=1.5,this.addChild(spliteLine);var InputCard=uiUtils.createTextInput("InputCard",uiLocallization.tip_input_pass_1);InputCard.width=600,InputCard.height=94,InputCard.pos(20,165),InputCard.fontSize=35,InputCard.type="password",InputCard.align="center",this.addChild(InputCard);var surebtn=uiUtils.createButton("assets/major/public/button_ok.png",2,"btn_sure"),word=uiUtils.createSprite("assets/major/public/sureBtnG.png","");word.pos(65,15),surebtn.addChild(word),surebtn.pos(213.5,340),surebtn.setClickHandler(this,this.OnClick),this.addChild(surebtn)},OnClick:function(btn){"btn_close"==btn.name?this.visible=!1:"btn_sure"==btn.name&&this.getSalt()},getSalt:function(){var pass=this.getChildByName("InputCard").text;netTool.getSalt(accountMgr.getUserData().account,this,function(ret){if(ret.result==ERROR_CODE.OK){var hashPass=hex_md5(hex_md5(pass+ret.staticSalt)+ret.randomSalt);this.unBindCard(hashPass)}else uiUtils.showMesage(ERROR_CODE_DES[ret.result])},null,this,null,function(param){uiUtils.showMesage(param)})},unBindCard:function(hashPassword){var account=accountMgr.getUserData().account,hashPass=hashPassword,sendData=gtea.protobuf.encode("UnbindCardNumberReq",{account:account,hashPassword:hashPass,platformId:Platform.platformId});server.requestToGame(CMD.UnbindCardNumber,sendData,this,function(errorcode,retData){if(errorcode==ERROR_CODE.OK){gtea.protobuf.decode("UnbindCardNumberResp",retData);playerDataMgr.setBankCardNumber(null),playerDataMgr.setBankCardName(null),uiUtils.showMesage(uiLocallization.unbind_card_ok),this.publish("game_baccarat.setting.updateMyCardInfo"),this.visible=!1}})}})}),gbx.define("game/lobby/net/msg_receiver",["gbx/net/messagecommand","gbx/net/errorcode"],function(CMD,ERROR_CODE){return{}}),gbx.define("game/lobby/parts/country_code",[],function(){return{getCountryCode:function(){return["中国,86","阿尔巴尼亚,355","阿尔及利亚,213","阿富汗,93","阿根廷,54","阿拉伯联合酋长国,971","阿曼,968","阿塞拜疆,994","阿森松,247","埃及,20","埃塞俄比亚,251","爱尔兰,353","爱沙尼亚,372","安道尔共和国,376","安哥拉,244","安圭拉岛,1264","安提瓜和巴布达,1268","奥地利,43","澳大利亚,61","澳门,853","巴巴多斯,1246","巴布亚新几内亚,675","巴哈马,1242","巴基斯坦,92","巴拉圭,595","巴勒斯坦,970","巴林,973","巴拿马,507","巴西,55","白俄罗斯,375","百慕大群岛,1441","保加利亚,359","贝宁,229","比利时,32","冰岛,354","波多黎各,1787","波兰,48","玻利维亚,591","伯利兹,501","博茨瓦纳,267","布基纳法索,226","布隆迪,257","朝鲜,850","丹麦,45","德国,49","东萨摩亚(美),684","多哥,228","多米尼加共和国,1890","俄罗斯,7","厄瓜多尔,593","法国,33","法属玻利尼西亚,689","法属圭亚那,594","菲律宾,63","斐济,679","芬兰,358","冈比亚,220","刚果,242","哥伦比亚,57","哥斯达黎加,506","格林纳达,1809","格鲁吉亚,995","古巴,53","关岛,1671","圭亚那,592","哈萨克斯坦,327","海地,509","韩国,82","荷兰,31","荷属安的列斯,599","洪都拉斯,504","吉布提,253","吉尔吉斯坦,331","几内亚,224","加拿大,1","加纳,233","加蓬,241","柬埔寨,855","捷克,420","津巴布韦,263","喀麦隆,237","卡塔尔,974","开曼群岛,1345","科特迪瓦,225","科特迪瓦共和国,225","科威特,965","肯尼亚,254","库克群岛,682","拉脱维亚,371","莱索托,266","老挝,856","黎巴嫩,961","立陶宛,370","利比里亚,231","利比亚,218","列支敦士登,423","留尼旺,262","卢森堡,352","罗马尼亚,40","马达加斯加,261","马尔代夫,960","马耳他,356","马拉维,265","马来西亚,60","马里,223","马里亚那群岛,1670","马提尼克,596","毛里求斯,230","美国,1","蒙古,976","蒙特塞拉特岛,1664","孟加拉国,880","秘鲁,51","缅甸,95","摩尔多瓦,373","摩洛哥,212","摩纳哥,377","莫桑比克,258","墨西哥,52","纳米比亚,264","南非,27","南斯拉夫,381","瑙鲁,674","尼加拉瓜,505","尼泊尔,977","尼日尔,977","尼日利亚,234","挪威,47","葡萄牙,351","日本,81","瑞典,46","瑞士,41","萨尔瓦多,503","塞拉利昂,232","塞内加尔,221","塞浦路斯,357","塞舌尔,248","沙特阿拉伯,966","圣多美和普林西比,239","圣卢西亚,1758","圣马力诺,378","圣文森特岛,1784","斯里兰卡,94","斯洛伐克,421","斯洛文尼亚,386","斯威士兰,268","苏丹,249","苏里南,597","所罗门群岛,677","索马里,252","塔吉克斯坦,992","台湾省,886","泰国,66","坦桑尼亚,255","汤加,676","特立尼达和多巴哥,1809","突尼斯,216","土耳其,90","土库曼斯坦,993","危地马拉,502","委内瑞拉,58","文莱,673","乌干达,256","乌克兰,380","乌拉圭,598","乌兹别克斯坦,233","希腊,30","西班牙,34","西萨摩亚,685","香港特别行政区,852","新加坡,65","新西兰,64","匈牙利,36","叙利亚,963","牙买加,1876","亚美尼亚,374","也门,967","伊拉克,964","伊朗,98","以色列,972","意大利,39","印度,91","印度尼西亚,62","英国,44","约旦,962","越南,84","赞比亚,260","扎伊尔,243","乍得,235","直布罗陀,350","智利,56","中非共和国,236","中国,86"]}}}),gbx.define("game/lobby/parts/download",["gbx/net/errorcode","gbx/net/errorcode_des","comm/base/command_ui","gbx/render/display/sprite","gbx/render/display/text","gbx/render/ui/list","comm/ui/sound_button","comm/helper/conf_mgr","comm/helper/playerdata_mgr","comm/helper/account_mgr","conf/ui_locallization","comm/ui/ui_utils","gbx/net/net_tool"],function(ERROR_CODE,ERROR_CODE_DES,BaseUI,Sprite,Text,List,Button,confMgr,playerDataMgr,accountMgr,uiLocallization,uiUtils,netTool){return BaseUI.extend({init:function(){this._super();var maskBtn=uiUtils.createMask(this,!1,"assets/major/login/login_mask.png");maskBtn.pos(-1500,-1500),this.addChild(maskBtn);var background=uiUtils.createSprite("assets/major/public/background.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var booter=uiUtils.createSprite("assets/major/public/back_booter_01.png","");booter.pos(0,0),this.addChild(booter);var title=uiUtils.createSimpleText(uiLocallization.download,"title");title.pos(262,20),title.fontSize=30,this.addChild(title);var label=uiUtils.createSimpleText(uiLocallization.downloadDes);label.color="#FAD88E",label.stroke=2,label.strokeColor="#885712",label.fontSize=25,label.pos(119.5,360),this.addChild(label);var androidBtn=new Button;androidBtn.name="androidBtn",androidBtn.stateNum=2,androidBtn.setSkinImage("assets/major/login/android_btn.png"),androidBtn.pivotToCenter(),androidBtn.setClickHandler(this,this.onClickDownLoad),androidBtn.pos(192.5,200),this.addChild(androidBtn);var iosBtn=new Button;iosBtn.name="iosBtn",iosBtn.stateNum=2,iosBtn.setSkinImage("assets/major/login/ios_btn.png"),iosBtn.pivotToCenter(),iosBtn.setClickHandler(this,this.onClickDownLoad),iosBtn.pos(446.5,200),this.addChild(iosBtn)},onClickDownLoad:function(btn){"iosBtn"==btn.name?window.location.href=netTool.getPathByKey("iosDownloadUrl"):"androidBtn"==btn.name&&(window.location.href=netTool.getPathByKey("androidDownloadUrl"))}})}),gbx.define("game/lobby/parts/find_password",["gbx/net/errorcode","gbx/net/errorcode_des","comm/base/command_ui","gbx/render/display/sprite","gbx/render/display/text","gbx/render/ui/list","comm/ui/sound_button","comm/helper/conf_mgr","comm/helper/playerdata_mgr","comm/helper/account_mgr","conf/ui_locallization","comm/ui/ui_utils","game/lobby/parts/country_code","comm/ui/top_message","gbx/net/net_tool","conf/platform","gbx/render/ui/image",,"conf/locallization"],function(ERROR_CODE,ERROR_CODE_DES,BaseUI,Sprite,Text,List,Button,confMgr,playerDataMgr,accountMgr,uiLocallization,uiUtils,countryCode,topMessage,netTool,Platform,Image,Locallization){return BaseUI.extend({init:function(){this._super(),this._curView="verifyCodeView",this._getVCLeftTime=0;var background=uiUtils.createSprite("assets/major/public/Full_screenBackGround.png","");background.pos(0,0),this.addChild(background),uiUtils.createBackgroundCrash(this,background);var closeBtn=uiUtils.createButton("assets/major/public/back_001.png",2,"btn_close");closeBtn.pos(0,0),closeBtn.setClickHandler(this,this.OnClick),this.addChild(closeBtn);var title=uiUtils.createSimpleText(uiLocallization.register_title,"title");title.size(640,67),title.align="center",title.pos(0,20),title.fontSize=30,this.addChild(title);for(var posYlist2=[189,283,377,536,630],i=0;i<5;i++){var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.pivotToCenter(),spliteLine.scaleX=1.5,spliteLine.pos(320,posYlist2[i]),this.addChild(spliteLine)}var verifyCodeView=new Sprite;verifyCodeView.name="verifyCodeView",this.addChild(verifyCodeView);var tipCountry=uiUtils.createSimpleText(uiLocallization.country);tipCountry.pos(42,129),tipCountry.color="#000000",tipCountry.fontSize=30,verifyCodeView.addChild(tipCountry),(tipCountry=uiUtils.createSimpleText(uiLocallization.country)).pos(40,127),tipCountry.color="#ffffff",tipCountry.fontSize=30,verifyCodeView.addChild(tipCountry);var countryLab=uiUtils.createSimpleText(uiLocallization.china,"country");countryLab.pos(225,127),countryLab.align="center",countryLab.color="#ffffff",countryLab.fontSize=30,verifyCodeView.addChild(countryLab);var arrow=uiUtils.createSprite("assets/major/public/arrow.png");arrow.pos(550,122),verifyCodeView.addChild(arrow);var choose_country_btn=new Button;choose_country_btn.size(480,94),choose_country_btn.pos(140,95),choose_country_btn.name="choose_country_btn",choose_country_btn.setClickHandler(this,this.OnClick),verifyCodeView.addChild(choose_country_btn);var tipPhone=uiUtils.createSimpleText("+86","tipPhoneB");tipPhone.color="#000000",tipPhone.fontSize=30,tipPhone.pos(42,223),verifyCodeView.addChild(tipPhone),(tipPhone=uiUtils.createSimpleText("+86","tipPhone")).color="#ffffff",tipPhone.fontSize=30,tipPhone.pos(40,221),verifyCodeView.addChild(tipPhone);var phoneNumber=uiUtils.createTextInput("phoneNumber",uiLocallization.tip_input_phone_code);phoneNumber.pos(70,191),phoneNumber.align="center",phoneNumber.color="#ffffff",phoneNumber.fontSize=30,phoneNumber.size(500,94),verifyCodeView.addChild(phoneNumber),(arrow=uiUtils.createSprite("assets/major/public/arrow.png")).pos(550,216),verifyCodeView.addChild(arrow);var tipVerify=uiUtils.createSimpleText(uiLocallization.verify_code);tipVerify.color="#000000",tipVerify.fontSize=30,tipVerify.pos(42,312),verifyCodeView.addChild(tipVerify),(tipVerify=uiUtils.createSimpleText(uiLocallization.verify_code)).color="#ffffff",tipVerify.fontSize=30,tipVerify.pos(40,310),verifyCodeView.addChild(tipVerify);var verifyCode=uiUtils.createTextInput("verifyCode",uiLocallization.tip_input_verify_code);verifyCode.color="#ffffff",verifyCode.fontSize=30,verifyCode.align="center",verifyCode.pos(170,280),verifyCode.size(300,94),verifyCodeView.addChild(verifyCode);var getVerifyCodeBtn=uiUtils.createButton("assets/major/public/button_9.png",2,"getVerifyCode");getVerifyCodeBtn.pos(450,305),getVerifyCodeBtn.setClickHandler(this,this.onClickGetVerifyCode),verifyCodeView.addChild(getVerifyCodeBtn);var word=uiUtils.createSprite("assets/major/login/word_getVerifyCode.png");word.pos(26,19),word.name="word",getVerifyCodeBtn.addChild(word);var count=uiUtils.createSimpleText("","count");count.pos(-32,14),count.align="center",count.fontSize=22,getVerifyCodeBtn.addChild(count);var countryPanel=new Image("assets/major/public/public_darkBg.png");countryPanel.name="countryPanel",countryPanel.pos(150,189),countryPanel.visible=!1,countryPanel.width=450,countryPanel.height=190,countryPanel.sizeGrid="10,10,10,10",this.addChild(countryPanel);for(i=0;i<3;i++){var sp=new Image("assets/major/public/public_darkBg.png");sp.pos(0,0),sp.width=450,sp.height=190,sp.sizeGrid="10,10,10,10",countryPanel.addChild(sp)}var maskBtn_1=uiUtils.createMask(this,!0);maskBtn_1.pos(-1500,-1500),maskBtn_1.name="maskBtn_1",maskBtn_1.setClickHandler(this,this.OnClick),countryPanel.addChild(maskBtn_1);var listCountry=uiUtils.createNormalList(1,10,0,"v",440,188,440,45);listCountry.array=countryCode.getCountryCode(),listCountry.name="listCountry",listCountry.setRenderHandler(this,this._renderCountryCode),countryPanel.addChild(listCountry);var tipPass=uiUtils.createSimpleText(uiLocallization.pass);tipPass.color="#000000",tipPass.fontSize=30,tipPass.pos(42,466),this.addChild(tipPass),(tipPass=uiUtils.createSimpleText(uiLocallization.pass)).color="#ffffff",tipPass.fontSize=30,tipPass.pos(40,464),this.addChild(tipPass);var setPass=uiUtils.createTextInput("setPass",uiLocallization.setPass);setPass.type="password",setPass.color="#ffffff",setPass.align="center",setPass.fontSize=30,setPass.pos(70,434),setPass.size(500,94),this.addChild(setPass),(arrow=uiUtils.createSprite("assets/major/public/arrow.png")).pos(550,459),this.addChild(arrow);var tipNewPass=uiUtils.createSimpleText(uiLocallization.repeatPass,"tipNewPass");tipNewPass.color="#000000",tipNewPass.fontSize=30,tipNewPass.pos(42,560),this.addChild(tipNewPass),(tipNewPass=uiUtils.createSimpleText(uiLocallization.repeatPass,"tipNewPass")).color="#ffffff",tipNewPass.fontSize=30,tipNewPass.pos(40,558),this.addChild(tipNewPass);var newPass=uiUtils.createTextInput("repeatPass",uiLocallization.repeatInputPass);newPass.type="password",newPass.color="#ffffff",newPass.align="center",newPass.fontSize=30,newPass.pos(70,528),newPass.size(500,94),this.addChild(newPass),(arrow=uiUtils.createSprite("assets/major/public/arrow.png")).pos(550,553),this.addChild(arrow);var sureBtn=uiUtils.createButton("assets/major/public/button_ok.png",2,"sure_btn"),word_sure=uiUtils.createSprite("assets/major/login/word_register.png","sure_btn_desc");word_sure.pos(65,15),sureBtn.addChild(word_sure),sureBtn.pos(213.5,670),sureBtn.setClickHandler(this,this.OnClick),this.addChild(sureBtn)},_renderCountryCode:function(cell,idx){function selectOne(btn,param){accountMgr.getUserData().country=param[1],this.getChildByName("verifyCodeView","tipPhone").text="+"+param[1],this.getChildByName("verifyCodeView","tipPhoneB").text="+"+param[1],this.getChildByName("countryPanel").visible=!1,this.getChildByName("verifyCodeView","country").text=param[0]}var data=this.getChildByName("countryPanel","listCountry").array;if(!(idx>=data.length)){var root=cell.getChildByName("root");if(!root){(root=new Sprite).name="root",cell.addChild(root);var arr=data[idx].split(","),lab=uiUtils.createSimpleText(arr[0]);lab.pos(0,10),lab.color="#ffffff",lab.fontSize=30,root.addChild(lab);var btn=new Button;btn.size(440,45),btn.pos(0,0),btn.setClickHandler(this,selectOne,arr),root.addChild(btn)}}},_checkResetPassword:function(){if(0==this.getChildByName("verifyCodeView","phoneNumber").text.length)return topMessage.post(uiLocallization.phone_can_not_void),!1;if(0==this.getChildByName("verifyCodeView","verifyCode").text.length)return topMessage.post(uiLocallization.verify_code_can_not_void),!1;var pass=this.getChildByName("setPass").text;if(0==pass.length)return topMessage.post(uiLocallization.pass_can_not_void),!1;if(pass.length<6)return topMessage.post(uiLocallization.pass_less_six),!1;var pass_1=this.getChildByName("repeatPass").text;return 0==pass_1.length?(topMessage.post(uiLocallization.plz_input_pass),!1):pass!=pass_1?(topMessage.post(uiLocallization.pass_diffrent),!1):!(this._getVCLeftTime<=0)||(topMessage.post(uiLocallization.time_no_use),!1)},reset:function(useNew){this._useNew=useNew;var btnDesc=this.getChildByName("sure_btn","sure_btn_desc");this._useNew?(this.getChildByName("title").text=uiLocallization.register_title,btnDesc.setImage("assets/major/login/word_register.png")):(this.getChildByName("title").text=uiLocallization.word_changePass,btnDesc.setImage("assets/major/public/sureBtnG.png")),this.stopVerifyCodeTick(),this.getChildByName("verifyCodeView","phoneNumber").text="",this.getChildByName("verifyCodeView","tipPhone").text="+86",this.getChildByName("verifyCodeView","tipPhoneB").text="+86",this.getChildByName("verifyCodeView","country").text=uiLocallization.china,this.getChildByName("setPass").text="",this.getChildByName("repeatPass").text="",this.getChildByName("verifyCodeView","verifyCode").text=""},_getPhoneNumber:function(){var phone=this.getChildByName("verifyCodeView","phoneNumber").text;return accountMgr.getUserData().country+phone},startVerifyCodeTick:function(){this._getVCLeftTime=180,this.verifyCodeTick(),this.timerLoop(1e3,this,this.verifyCodeTick)},stopVerifyCodeTick:function(){this._getVCLeftTime=0,this.clearTimer(this,this.verifyCodeTick);var btn=this.getChildByName("verifyCodeView","getVerifyCode");btn.gray=!1,btn.getChildByName("word").visible=!0,btn.getChildByName("count").text=""},verifyCodeTick:function(){var btn=this.getChildByName("verifyCodeView","getVerifyCode");this._getVCLeftTime>0?(this._getVCLeftTime=this._getVCLeftTime-1,btn.gray=!0,btn.getChildByName("word").visible=!1,btn.getChildByName("count").text=uiLocallization.time_count_down+this._getVCLeftTime):(this._getVCLeftTime=0,btn.gray=!1,btn.getChildByName("word").visible=!1,btn.getChildByName("count").text=uiLocallization.resend)},onClickGetVerifyCode:function(){function getSuccess(ret){this.startVerifyCodeTick()}function getFail(status,error){null!=status?topMessage.post(Locallization.phoneVerifyError+" status "+status):topMessage.post(ERROR_CODE_DES[error])}if(!(this._getVCLeftTime>0))if(0!=this.getChildByName("verifyCodeView","phoneNumber").text.length){var phoneNumber=this._getPhoneNumber(),sendMsg=gtea.protobuf.encode("SMSGetAuthCodeReq",{phoneNumber:phoneNumber,useNewNumber:this._useNew});netTool.getVerifyCode(sendMsg,this,getSuccess,getFail)}else topMessage.post(uiLocallization.phone_can_not_void)},requestPassword:function(){if(this._checkResetPassword()){this.stopVerifyCodeTick();var phoneNumber=this._getPhoneNumber(),verifyCode=this.getChildByName("verifyCodeView","verifyCode").text,pass=this.getChildByName("setPass").text;if(this._useNew)this.parent.eventUserSign(phoneNumber,pass,verifyCode);else{var sendMsg=gtea.protobuf.encode("ResetPasswordByAuthCodeReq",{account:phoneNumber,platformId:Platform.platformId,smsAuthCode:verifyCode,newPassword:pass});netTool.createHttpRequest(netTool.getPathByKey("resetPasswordByAuthCodeUrl"),sendMsg,this,function(data){var ret=gtea.protobuf.decode("ResetPasswordByAuthCodeResp",data);ret.result==ERROR_CODE.OK?(accountMgr.getUserData().password=pass,accountMgr.saveUserDataOnly(),topMessage.post(uiLocallization.resetPassSuccess),this.reset(this._useNew),this.visible=!1):topMessage.post(ERROR_CODE_DES[ret.result])},function(status){topMessage.post(uiLocallization.resetPassFail+" status "+status)})}}},registerCallback:function(success){success&&(this.visible=!1)},OnClick:function(btn){"sure_btn"==btn.name?this.requestPassword():"choose_country_btn"==btn.name?this.getChildByName("countryPanel").visible=!0:"maskBtn_1"==btn.name?this.getChildByName("countryPanel").visible=!1:"btn_close"==btn.name&&(this.visible=!1)}})}),gbx.define("game/lobby/parts/way_sheet",["conf/system","gbx/net/connector","gbx/net/messagecommand","gbx/render/display/sprite","gbx/render/display/text","comm/ui/sound_button","game/lobby/parts/way_sheet_body","comm/helper/conf_mgr","comm/helper/room_mgr","conf/locallization","conf/ui_locallization","comm/helper/baccarat_algorithm","comm/ui/ui_utils"],function(sys,server,CMD,Sprite,Text,Button,WaySheetBody,confMgr,roomMgr,Localization,uiLocallization,BaccaratAlgorithm,uiUtils){return Sprite.extend({init:function(isVIPRoom){function createTotalCountText(idx){var lbl=new Text;return lbl.text="0",lbl.width=32,lbl.align="center",lbl.color="#B48B6C",lbl.fontSize=20,lbl.pos(40+68*idx,297),lbl.name="total_"+idx,lbl.zOrder=4,lbl}function CreateUsualText(content,name){var lbl=new Text;return lbl.text=content,lbl.name=name,lbl.fontSize=17,lbl.align="center",lbl.color="#ffffff",lbl.strokeColor="#000000",lbl.zOrder=4,lbl}this._super(),this.size(277,479),this._algorithm=new BaccaratAlgorithm,this._roomData,this._isVIPRoom=isVIPRoom;var waysheet_bg=new Sprite;waysheet_bg.setImage("assets/major/waysheet/ludan_l_1.png"),waysheet_bg.pos(33,0),waysheet_bg.zOrder=3,this.addChild(waysheet_bg);var body=new WaySheetBody("lobby",this._algorithm);body.name="waySheetBody",body.pos(0,26),body.zOrder=2,body.on(this.EVENT.MOUSE_UP,this,this.OnClick),this.addChild(body);var banker=uiUtils.createSimpleText(uiLocallization.banker,"banker");banker.fontSize=16,banker.pos(570,141),banker.color="red",banker.bold=!0,banker.zOrder=4,this.addChild(banker);var bigEye=new Sprite;bigEye.setImage("assets/major/waysheet/ludan_redCir1.png"),bigEye.pos(1,20),bigEye.name="bigEye",bigEye.scale(1.2),banker.addChild(bigEye);var small=new Sprite;small.setImage("assets/major/waysheet/ludan_redCir2.png"),small.pos(1,40),small.name="small",small.scale(1.2),banker.addChild(small);var yueU=new Sprite;yueU.setImage("assets/major/waysheet/ludan_redSqu.png"),yueU.pos(1,60),yueU.name="yueU",yueU.scale(1.2),banker.addChild(yueU);var farmer=uiUtils.createSimpleText(uiLocallization.farmer,"farmer");farmer.fontSize=16,farmer.pos(570,220),farmer.color="blue",farmer.bold=!0,farmer.zOrder=4,this.addChild(farmer),(bigEye=new Sprite).setImage("assets/major/waysheet/ludan_blueCir1.png"),bigEye.pos(1,20),bigEye.name="bigEye",bigEye.scale(1.2),farmer.addChild(bigEye),(small=new Sprite).setImage("assets/major/waysheet/ludan_blueCir2.png"),small.pos(1,40),small.name="small",small.scale(1.2),farmer.addChild(small),(yueU=new Sprite).setImage("assets/major/waysheet/ludan_blueSqu.png"),yueU.pos(1,60),yueU.name="yueU",yueU.scale(1.2),farmer.addChild(yueU);var lab_name=CreateUsualText("","lab_Name");lab_name.pos(45,3),lab_name.fontSize=19,lab_name.zOrder=4,lab_name.color="#ffffff",this.addChild(lab_name);var lab_limit=CreateUsualText("","lab_limit");lab_limit.color="#ffffff",lab_limit.fontSize=19,lab_limit.pos(395,3),lab_limit.width=200,lab_limit.align="right",this.addChild(lab_limit);var l1=createTotalCountText(0);l1.name="",l1.text=uiLocallization.banker+":",l1.color="#ffffff";var l2=createTotalCountText(1);l2.name="",l2.text=uiLocallization.farmer+":",l2.color="#ffffff";var l3=createTotalCountText(2);l3.name="",l3.text=uiLocallization.duece+":",l3.color="#ffffff";var l4=createTotalCountText(3);l4.name="",l4.x+=90,l4.text=uiLocallization.on_play,l4.color="#ffffff";var number1=createTotalCountText(0);number1.text="0",number1.x+=23,number1.color="#ffffff";var number2=createTotalCountText(1);number2.text="0",number2.x+=23,number2.color="#ffffff";var number3=createTotalCountText(2);number3.text="0",number3.x+=23,number3.color="#ffffff";var number4=createTotalCountText(3);number4.name="lab_all",number4.text="0",number4.x+=130,number4.color="#ffffff",this.addChild(l1),this.addChild(l2),this.addChild(l3),this.addChild(l4),this.addChild(number1),this.addChild(number2),this.addChild(number3),this.addChild(number4);var button=new Button;if(button.setSkinImage("assets/major/public/button_13.png"),button.pos(460,300),button.stateNum=2,button.zOrder=4,button.name="join",this.addChild(button),button.setClickHandler(this,this.OnClick),isVIPRoom){var button_remove1=new Button;button_remove1.setSkinImage("assets/major/waysheet/button_closeRoom_1.png"),button_remove1.pos(597,29),button_remove1.stateNum=2,button_remove1.zOrder=5,button_remove1.name="remove1",this.addChild(button_remove1),button_remove1.setClickHandler(this,this.OnClickRemove);var button_remove2=new Button;button_remove2.setSkinImage("assets/major/waysheet/button_closeRoom_2.png"),button_remove2.pos(524,29),button_remove2.stateNum=2,button_remove2.zOrder=5,button_remove2.name="remove2",button_remove2.visible=!1,this.addChild(button_remove2),button_remove2.setClickHandler(this,this.OnClickRemove)}},setInfo:function(data){this.getChildByName("total_0").text=data.banker,this.getChildByName("total_1").text=data.farmer,this.getChildByName("total_2").text=data.deuce},setPredict:function(data,isClear){var bankerBigEye=this.getChildByName("banker","bigEye"),farmerBigEye=this.getChildByName("farmer","bigEye"),bankerSmall=this.getChildByName("banker","small"),farmerSmall=this.getChildByName("farmer","small"),bankerYueU=this.getChildByName("banker","yueU"),farmerYueU=this.getChildByName("farmer","yueU");bankerBigEye.visible=!1,farmerBigEye.visible=!1,bankerSmall.visible=!1,farmerSmall.visible=!1,bankerYueU.visible=!1,farmerYueU.visible=!1,isClear||(1==data.bigEyeRoad?(bankerBigEye.visible=!0,farmerBigEye.visible=!0,bankerBigEye.setImage("assets/major/waysheet/ludan_redCir1.png"),farmerBigEye.setImage("assets/major/waysheet/ludan_blueCir1.png")):0==data.bigEyeRoad&&(bankerBigEye.visible=!0,farmerBigEye.visible=!0,bankerBigEye.setImage("assets/major/waysheet/ludan_blueCir1.png"),farmerBigEye.setImage("assets/major/waysheet/ludan_redCir1.png")),1==data.smallRoad?(bankerSmall.visible=!0,farmerSmall.visible=!0,bankerSmall.setImage("assets/major/waysheet/ludan_redCir2.png"),farmerSmall.setImage("assets/major/waysheet/ludan_blueCir2.png")):0==data.smallRoad&&(bankerSmall.visible=!0,farmerSmall.visible=!0,bankerSmall.setImage("assets/major/waysheet/ludan_blueCir2.png"),farmerSmall.setImage("assets/major/waysheet/ludan_redCir2.png")),1==data.cockroach?(bankerYueU.visible=!0,farmerYueU.visible=!0,bankerYueU.setImage("assets/major/waysheet/ludan_redSqu.png"),farmerYueU.setImage("assets/major/waysheet/ludan_blueSqu.png")):0==data.cockroach&&(bankerYueU.visible=!0,farmerYueU.visible=!0,bankerYueU.setImage("assets/major/waysheet/ludan_blueSqu.png"),farmerYueU.setImage("assets/major/waysheet/ludan_redSqu.png")))},OnClick:function(){roomMgr.checkGetInTime()&&(roomMgr.setChoose(this._roomData),roomMgr.joinRoom())},OnClickRemove:function(btn){if("remove1"===btn.name)this.getChildByName("remove1").visible=!1,this.getChildByName("remove2").visible=!0;else if("remove2"===btn.name){var sendMsg=gtea.protobuf.encode("BaccaratDismissRoomReq",{roomId:this._roomData.roomId});server.requestToGame(CMD.BaccaratDismissRoom,sendMsg,this,function(errorcode,data){if(0==errorcode){var retData=gtea.protobuf.decode("BaccaratDismissRoomResp",data);this.publish("lobby.lobbypop.refresh_vip_room",retData.roomId)}})}},setData:function(data){if(void 0!=data){this._roomData=data,void 0!=data.playerNum?this.getChildByName("lab_all").text=data.playerNum:this.getChildByName("lab_all").text=0;var conf=data.roundResults,array=this._algorithm.addAll(conf);this.getChildByName("waySheetBody").setWaySheet(array),this.setInfo(array[5]),this.setPredict(array[6],!1);var roomName="",definition=confMgr.read("games/baccarat/dat/definition.json");switch(data.baccaratRoomType){case definition.BaccaratRoomType.Dragon:roomName=uiLocallization.word_zhizun;break;case definition.BaccaratRoomType.JingMi:roomName=uiLocallization.word_jinmi;break;case definition.BaccaratRoomType.Six:roomName=uiLocallization.word_six}this.getChildByName("lab_Name").text=roomName+data.roomId,this.getChildByName("lab_limit").text=Localization.LimitColor+data.bankerFarmerBetMin+"-"+data.allBankerFarmerBetMax}},updateVIPRemoveBtn:function(){this._isVIPRoom&&(this.getChildByName("remove1").visible=!0,this.getChildByName("remove2").visible=!1)}})}),gbx.define("game/lobby/parts/way_sheet_body",["conf/system","gbx/render/display/sprite","gbx/render/display/text","comm/ui/sound_button","comm/helper/conf_mgr","comm/helper/room_mgr","conf/locallization","conf/ui_locallization","comm/helper/baccarat_algorithm","comm/ui/ui_utils"],function(sys,Sprite,Text,Button,confMgr,roomMgr,Localization,uiLocallization,BaccaratAlgorithm,uiUtils){return Sprite.extend({init:function(comeFrom,algorithm){this._super(),this._comeFrom=comeFrom,this._algorithm=algorithm,this._colMaxPerBG={bigRoad:34,bigEyeRoad:34,smallRoad:34,yueURoad:34,plateRoad:13};var h=0;this._wBigRoad=646,this._hBigRoad=115;var panelBigRoadW=640,panelBigRoadPosX=0;"lobby"==this._comeFrom&&(panelBigRoadW=558,panelBigRoadPosX=41);var panelBigRoad=uiUtils.createPanel(panelBigRoadW,this._hBigRoad,"bigRoad");panelBigRoad.pos(panelBigRoadPosX,h),panelBigRoad.hScrollBarSkin="",panelBigRoad.hScrollBar.isVertical=!1,this.addChild(panelBigRoad),h+=this._hBigRoad-1,this._wPlateRoad=338,this._hPlateRoad=157;var panelPlateRoadW=319,panelPlateRoadPosX=0;"lobby"==this._comeFrom&&(panelPlateRoadW=296,panelPlateRoadPosX=41);var panelPlateRoad=uiUtils.createPanel(panelPlateRoadW,this._hPlateRoad,"plateRoad");panelPlateRoad.pos(panelPlateRoadPosX,h),panelPlateRoad.hScrollBarSkin="",panelPlateRoad.hScrollBar.isVertical=!1,this.addChild(panelPlateRoad);var panelRoadW=291,panelRoadPosX=318;"lobby"==this._comeFrom&&(panelRoadW=224,panelRoadPosX=337),this._wBigEye=291,this._hBigEye=53;var panelBigEye=uiUtils.createPanel(panelRoadW,this._hBigEye,"bigEyeRoad");panelBigEye.pos(panelRoadPosX,h),panelBigEye.hScrollBarSkin="",panelBigEye.hScrollBar.isVertical=!1,this.addChild(panelBigEye),h+=this._hBigEye-1,this._wSmallRoad=291,this._hSmallRoad=53;var panelSmallRoad=uiUtils.createPanel(panelRoadW,this._hSmallRoad,"smallRoad");panelSmallRoad.pos(panelRoadPosX,h),panelSmallRoad.hScrollBarSkin="",panelSmallRoad.hScrollBar.isVertical=!1,this.addChild(panelSmallRoad),h+=this._hSmallRoad-1,this._wYueYou=291,this._hYueYou=53;var panelYueYou=uiUtils.createPanel(panelRoadW,this._hYueYou,"yueURoad");panelYueYou.pos(panelRoadPosX,h),panelYueYou.hScrollBarSkin="",panelYueYou.hScrollBar.isVertical=!1,this.addChild(panelYueYou),this._addOneBgForAll()},_addBg:function(name,col,colMax){if(col%colMax==0){var index=col/colMax,panel=this.getChildByName(name);if(null==panel||null==panel.getChildByName("bg"+index)){var bg=new Sprite;switch(bg.name="bg"+index,bg.zOrder=1,name){case"bigRoad":bg.setImage("assets/major/waysheet/ludan_3.png"),bg.pos(index*this._wBigRoad,0),panel.addChild(bg);break;case"bigEyeRoad":bg.setImage("assets/major/waysheet/ludan_21.png"),bg.pos(index*this._wBigEye,0),panel.addChild(bg);break;case"smallRoad":bg.setImage("assets/major/waysheet/ludan_21.png"),bg.pos(index*this._wSmallRoad,0),panel.addChild(bg);break;case"yueURoad":bg.setImage("assets/major/waysheet/ludan_21.png"),bg.pos(index*this._wYueYou,0),panel.addChild(bg);break;case"plateRoad":bg.setImage("assets/major/waysheet/ludan_1.png"),bg.pos(index*this._wPlateRoad,0),panel.addChild(bg)}}}},_addOneBgForAll:function(){this._addBg("bigRoad",0,1),this._addBg("bigEyeRoad",0,1),this._addBg("smallRoad",0,1),this._addBg("yueURoad",0,1),this._addBg("plateRoad",0,1)},_putChild:function(parentName,path,col,row,cellSize,offset,scale){var root=this.getChildByName(parentName),cell=uiUtils.createSprite(path);root.addChild(cell);var offsetX=0,offsetY=0;null!=offset&&(offsetX=offset[0],offsetY=offset[1]),scale>0&&cell.scale(scale);var x=col*cellSize+offsetX,y=row*cellSize+offsetY;return cell.pos(x,y),cell.zOrder=2,cell},putBigRoad:function(alldata,isSingle){var colMaxPerBG=this._colMaxPerBG.bigRoad,cellSize=this._wBigRoad/colMaxPerBG,elemArr=alldata;isSingle&&(elemArr=[]).push(alldata);for(var i=0;i<elemArr.length;i++){var rdata=elemArr[i],path="";rdata.baseElem.winType==confMgr.definition.WIN_STATE.WIN_BANK?path="assets/major/waysheet/ludan_small_6.png":rdata.baseElem.winType==confMgr.definition.WIN_STATE.WIN_FARM?path="assets/major/waysheet/ludan_small_7.png":rdata.baseElem.winType==confMgr.definition.WIN_STATE.WIN_DEUCE&&(path="assets/major/waysheet/ludan_small_5.png");var cell=this._putChild("bigRoad",path,rdata.showCol,rdata.showRow,cellSize,[1,1],0);if(rdata.baseElem.winType!=confMgr.definition.WIN_STATE.WIN_DEUCE){if(rdata.baseElem.bankerPair){var p1=new Sprite;p1.setImage("assets/major/waysheet/ludan_small_8.png"),p1.pos(-2,-2),p1.name="red",cell.addChild(p1)}if(rdata.baseElem.farmerPair){var p2=new Sprite;p2.setImage("assets/major/waysheet/ludan_small_9.png"),p2.pos(8,8),p2.name="blue",cell.addChild(p2)}}this._addBg("bigRoad",rdata.showCol,colMaxPerBG)}},putBigEyeRoad:function(alldata,isSingle){if(null!=alldata){var colMaxPerBG=this._colMaxPerBG.bigEyeRoad,cellSize=this._wBigEye/colMaxPerBG,rdata=alldata;isSingle||(rdata=alldata[0]);var path="";path=rdata.isRed?"assets/major/waysheet/ludan_small_2.png":"assets/major/waysheet/ludan_small_1.png";var offset=[1,1];this._putChild("bigEyeRoad",path,rdata.showCol,rdata.showRow,cellSize,offset,0),this._addBg("bigEyeRoad",rdata.showCol,colMaxPerBG)}},putSmallRoad:function(alldata,isSingle){if(null!=alldata){var colMaxPerBG=this._colMaxPerBG.smallRoad,cellSize=this._wSmallRoad/colMaxPerBG,rdata=alldata;isSingle||(rdata=alldata[0]);var path="";path=rdata.isRed?"assets/major/waysheet/ludan_small_4.png":"assets/major/waysheet/ludan_small_3.png",this._putChild("smallRoad",path,rdata.showCol,rdata.showRow,cellSize,[1,1],0),this._addBg("smallRoad",rdata.showCol,colMaxPerBG)}},putYueURoad:function(alldata,isSingle){if(null!=alldata){var colMaxPerBG=this._colMaxPerBG.yueURoad,cellSize=this._wYueYou/colMaxPerBG,rdata=alldata;isSingle||(rdata=alldata[0]);var path="";path=rdata.isRed?"assets/major/waysheet/ludan_small_5_1.png":"assets/major/waysheet/ludan_small_5_2.png",this._putChild("yueURoad",path,rdata.showCol,rdata.showRow,cellSize,[0,0],0),this._addBg("yueURoad",rdata.showCol,colMaxPerBG)}},putPlateRoad:function(rdata,isSingle){var colMaxPerBG=this._colMaxPerBG.plateRoad,cellSize=this._wPlateRoad/colMaxPerBG;isSingle||(rdata=rdata[0]);var path="";rdata.baseElem.winType==confMgr.definition.WIN_STATE.WIN_BANK?path="assets/major/waysheet/ludan_zhuang.png":rdata.baseElem.winType==confMgr.definition.WIN_STATE.WIN_FARM?path="assets/major/waysheet/ludan_xian.png":rdata.baseElem.winType==confMgr.definition.WIN_STATE.WIN_DEUCE&&(path="assets/major/waysheet/ludan_he.png");var cell=this._putChild("plateRoad",path,rdata.showCol,rdata.showRow,cellSize,[1,1],0);if(rdata.baseElem.bankerPair){var p1=new Sprite;p1.setImage("assets/major/waysheet/ludan_small_8.png"),p1.pos(-2,-2),cell.addChild(p1)}if(rdata.baseElem.farmerPair){var p2=new Sprite;p2.setImage("assets/major/waysheet/ludan_small_9.png"),p2.pos(16,16),cell.addChild(p2)}this._addBg("plateRoad",rdata.showCol,colMaxPerBG)},_scrollToOne:function(name,colMax){var colMaxPerBG=this._colMaxPerBG[name];colMax-=colMaxPerBG,colMax+=5;var cellSize=0;switch(name){case"bigRoad":cellSize=this._wBigRoad/colMaxPerBG;break;case"bigEyeRoad":cellSize=this._wBigEye/colMaxPerBG;break;case"smallRoad":cellSize=this._wSmallRoad/colMaxPerBG;break;case"yueURoad":cellSize=this._wYueYou/colMaxPerBG;break;case"plateRoad":cellSize=this._wPlateRoad/colMaxPerBG;break;default:return}var scrollX=cellSize*colMax;scrollX=scrollX<0?0:scrollX,this.getChildByName(name).scrollTo(scrollX,0)},_scrollTo:function(){var allColMax=this._algorithm.getAllColMax();this._scrollToOne("bigRoad",allColMax.bigRoad),this._scrollToOne("bigEyeRoad",allColMax.bigEyeRoad),this._scrollToOne("smallRoad",allColMax.smallRoad),this._scrollToOne("yueURoad",allColMax.yueURoad),this._scrollToOne("plateRoad",allColMax.plateRoad)},setWaySheet:function(array){for(var tempArray,i=0;i<5;i++){tempArray=array[i];for(var col in tempArray){var elemCol=tempArray[col];for(var row in elemCol){var elemArr=elemCol[row];switch(i){case 0:this.putPlateRoad(elemArr);break;case 1:this.putBigRoad(elemArr);break;case 2:this.putBigEyeRoad(elemArr);break;case 3:this.putSmallRoad(elemArr);break;case 4:this.putYueURoad(elemArr)}}}}},putOneData:function(array){for(var i=0;i<5;i++)switch(i){case 0:this.putPlateRoad(array[i],!0);break;case 1:this.putBigRoad(array[i],!0);break;case 2:this.putBigEyeRoad(array[i],!0);break;case 3:this.putSmallRoad(array[i],!0);break;case 4:this.putYueURoad(array[i],!0)}this._scrollTo()},_showAllRoad:function(isShow){this.getChildByName("bigRoad").visible=isShow,this.getChildByName("bigEyeRoad").visible=isShow,this.getChildByName("smallRoad").visible=isShow,this.getChildByName("yueURoad").visible=isShow,this.getChildByName("plateRoad").visible=isShow},clear:function(){this.getChildByName("plateRoad").removeChildren(),this.getChildByName("bigRoad").removeChildren(),this.getChildByName("bigEyeRoad").removeChildren(),this.getChildByName("yueURoad").removeChildren(),this.getChildByName("smallRoad").removeChildren(),this._addOneBgForAll()}})}),gbx.define("game/lobby/scene/lobby",["gbx/hubs","gbx/bridge","comm/helper/playerdata_mgr","comm/helper/sound_mgr","comm/helper/scene_mgr","game/lobby/ui/lobby","comm/ui/game_broadCast"],function(hubs,bridge,playerDataMgr,soundMgr,sceneMgr,LobbyUI,broadCast){var lobbyUI,showPlayerInfo=function(){lobbyUI.setUserName&&lobbyUI.setUserName(playerDataMgr.getMyNick()),lobbyUI.setUserVip&&lobbyUI.setUserVip(playerDataMgr.getMyVIPLevel()),lobbyUI.setUserGold&&lobbyUI.setUserGold(playerDataMgr.getMyGold(),playerDataMgr.getMyCarryGold()),lobbyUI.setUserHead&&lobbyUI.setUserHead(playerDataMgr.getMyHead())},showSpreadReddot=function(){lobbyUI.setSpreadReddot()},responseBorderCast=function(context,callback){},goHome=function(){lobbyUI.gotoHome&&lobbyUI.gotoHome()},addListener=function(){hubs.subscribe("global.playerdata.update.itembag",showPlayerInfo),hubs.subscribe("global.playerdata.update.userdata",showPlayerInfo),hubs.subscribe("global.playerdata.update.bankdata",showPlayerInfo),hubs.subscribe("game_lobby.request.boardcast",responseBorderCast),hubs.subscribe("game_lobby.command.home",goHome)},removeListener=function(){hubs.unsubscribe("global.playerdata.update.itembag",showPlayerInfo),hubs.unsubscribe("global.playerdata.update.userdata",showPlayerInfo),hubs.unsubscribe("global.playerdata.update.bankdata",showPlayerInfo),hubs.unsubscribe("game_lobby.request.boardcast",responseBorderCast),hubs.unsubscribe("game_lobby.command.home",goHome)},checkGameBackAction=function(){1===lobbyUI.getCurrentPath().length?bridge.exitApp():lobbyUI.gameListBack()};return{show:function(){addListener(),lobbyUI=new LobbyUI,showPlayerInfo(),showSpreadReddot(),lobbyUI.addToStage(),broadCast.checkCurrentScene(),hubs.subscribe("global.app.back_action",checkGameBackAction)},end:function(){hubs.unsubscribe("global.app.back_action",checkGameBackAction),lobbyUI.destroy(),removeListener()}}}),gbx.define("game/lobby/scene/login",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/net/errorcode_des","gbx/net/net_tool","game/lobby/ui/login","gbx/render/display/sprite","comm/ui/connect_loading","comm/helper/sound_mgr","comm/helper/scene_mgr","comm/helper/playerdata_mgr","comm/helper/account_mgr","comm/helper/room_mgr","comm/helper/conf_mgr","comm/ui/top_message","gbx/hubs","gbx/bridge","conf/locallization","conf/version","gbx/util","comm/net/msg_receiver","platform/platform_manager","conf/platform","comm/ui/top_confirm"],function(server,CMD,ERROR_CODE,ERROR_CODE_DES,netTool,LoginUI,Sprite,loadingUI,soundMgr,sceneMgr,playerDataMgr,accountMgr,roomMgr,confMgr,topMessage,hubs,bridge,Localization,version,util,systemReceiver,platformManager,Platform,topConfirm){var loginUI,regCaller,successEvent,failEvent,loginType=gtea.net.LOGIN_TYPE_NORMAL,loginToRoomTimes=0,stepConnectServer=function(){loginUI&&loginUI.showInto(),util.closeSpreadDiv(),loadingUI.show(),server.connect()||(loadingUI.hide(),showTips(Localization.loseConnect))},eventConnected=function(){stepLoginVerify()},eventDisconnected=function(){loadingUI.hide(),showTips(Localization.loseConnect)},stepLoginVerify=function(){var loginContent={authToken:accountMgr.getToken()},sendData=gtea.protobuf.encode("GameAuthReq",loginContent);server.requestToGame(CMD.LoginCommand,sendData,this,function(errorcode,retData){errorcode!=ERROR_CODE.OK||gtea.protobuf.decode("GameAuthResp",retData).result!=ERROR_CODE.OK?(showTips(Localization.verifyUserFail),loadingUI.hide()):stepGetUserData()})},stepGetUserData=function(){var sendData=gtea.protobuf.encode("GetUserAllDataReq",{deviceId:bridge.getDeviceId(),platformId:Platform.platformId,packageId:bridge.getPackageId()});server.requestToGame(CMD.GetUserInfoCommand,sendData,this,function(errorcode,retData){if(errorcode==ERROR_CODE.OK){var msgData=gtea.protobuf.decode("GetUserAllDataResp",retData);playerDataMgr.setUserData(msgData.userAllData),playerDataMgr.setRechargeInfoData(msgData.userAllData.rechargeInfo);var rechargeType=msgData.userAllData.rechargeInfo.rechargeType;platformManager.setRechargeType(rechargeType),platformManager.setRechargeCategory(msgData.userAllData.rechargeInfo.rechargeCategory),platformManager.setRechargeCategoryMax(msgData.userAllData.rechargeInfo.rechargeCategoryMax);var rechargeMax=msgData.userAllData.rechargeInfo.rechargeMax;platformManager.setRechargeMax(rechargeMax);var rechargeMaxQQ=msgData.userAllData.rechargeInfo.rechargeMaxQQ;rechargeMaxQQ&&rechargeMaxQQ>0&&platformManager.setRechargeMaxQQ(rechargeMaxQQ);for(var rechargeNotice=msgData.userAllData.rechargeInfo.rechargeNotice,k=0;k<rechargeNotice.length;k++)platformManager.tryRechargeItem(rechargeNotice[k]);accountMgr.setPackageId(msgData.userAllData.playerData.packageId),stepGetRebateParentId()}else loadingUI.hide(),showTips(Localization.getUserDataFail)})},stepGetRebateParentId=function(){var sendData=gtea.protobuf.encode("RebateQueryRSReq",{level:1});server.requestToGame(CMD.RebateQueryRS,sendData,this,function(errorcode,data){if(errorcode==ERROR_CODE.OK){var retData=gtea.protobuf.decode("RebateQueryRSResp",data);playerDataMgr.setRebateParentId(retData.parentId),stepGetAllRoomData()}else loadingUI.hide(),showTips(Localization.getRebateParentIdFail)})},stepGetAllRoomData=function(){roomMgr.getAllRoomData(this,function(errorCode){errorCode==ERROR_CODE.OK?stepGetOldRoomId():(loadingUI.hide(),showTips(Localization.getAllRoomDataFail))})},stepGetOldRoomId=function(){roomMgr.getOldRoomId(this,function(oldRoomId){loadingUI.hide(),null!=oldRoomId?loginType==gtea.net.LOGIN_TYPE_TOROOM?roomMgr.resetRoom(oldRoomId):roomMgr.joinRoomByRoomId(oldRoomId):stepIntoLobby()})},stepIntoLobby=function(){successEvent&&successEvent.call(regCaller,null),sceneMgr.switchTo("lobby")},afterGetServerInfo=function(info){for(var i=0;i<info.addressList.length;i++)netTool.pushPath(info.addressList[i].key,info.addressList[i].address);platformManager.setExamineState(info.openGuestEx),hubs.publish("lobby.login.gueststate")},localGetServerInfo=function(url){loadingUI.show();var postData={gameVersion:bridge.getVersion(),gameType:"baccarat",os:bridge.getPlatform(),packageId:bridge.getPackageId()},postTxt=JSON.stringify(postData);netTool.createJsonHttpRequest(url,postTxt,this,function(data){var ret=JSON.parse(data);afterGetServerInfo(ret),loadingUI.hide()},function(status){setTimeout(function(){localGetServerInfo(url)},5e3)},!1)},getServerInfo=function(){var serverInfo=bridge.getServerInfo();if(""===serverInfo)localGetServerInfo(netTool.getPathByKey("getServerInfo"));else{var ret=JSON.parse(serverInfo);afterGetServerInfo(ret)}},showTips=function(message){gtea.net.NetMsgMgr.close(),loginType!=gtea.net.LOGIN_TYPE_TOROOM?(topMessage.post(message),loginUI&&loginUI.unlock(),failEvent&&failEvent.call(regCaller,message)):eventRestartLoginToRoom()},startLogin=function(phoneNumber,password,cbUsername,cbPassword){gtea.net.NetMsgMgr.close(),accountMgr.saveUserData(phoneNumber,password,cbUsername,cbPassword),getSalt(phoneNumber)},startLoginNormal=function(phoneNumber,password,cbUsername,cbPassword){loginType=gtea.net.LOGIN_TYPE_NORMAL,startLogin(phoneNumber,password,cbUsername,cbPassword)},startGuestlogin=function(){gtea.net.NetMsgMgr.close(),guestLogin()},startGuestloginNormal=function(){loginType=gtea.net.LOGIN_TYPE_NORMAL,startGuestlogin()},restartLogin=function(){loginType=gtea.net.LOGIN_TYPE_RELOGIN;var userData=accountMgr.getUserData();null==userData.account||0==userData.account.length?startGuestlogin():startLogin(userData.account,userData.password,userData.checkAccount,userData.checkPassword)},eventRestartLoginToRoom=function(){gbx.log("eventRestartLoginToRoom "+loginToRoomTimes);var tryLoginToRoom=!1;if(loginToRoomTimes<1?(tryLoginToRoom=!0,loginToRoomTimes++):tryLoginToRoom=!1,tryLoginToRoom){topMessage.post(Localization.lost_connect_try),loginType=gtea.net.LOGIN_TYPE_TOROOM;var userData=accountMgr.getUserData();null==userData.account||0==userData.account.length?startGuestlogin():startLogin(userData.account,userData.password,userData.checkAccount,userData.checkPassword)}else hubs.publish("global.net_connect.disconnected",gtea.net.DISCONNECT_REASON_TOROOM)},eventRestartLoginToRoomSuccess=function(){gbx.log("eventRestartLoginToRoomSuccess"),loginType=gtea.net.LOGIN_TYPE_NORMAL,loginToRoomTimes=0,topMessage.hide()},getSalt=function(account){loadingUI.show(),netTool.getSalt(account,this,function(ret){ret.result==ERROR_CODE.OK?(accountMgr.setSalt(ret.randomSalt,ret.staticSalt),phoneLogin()):(loadingUI.hide(),showTips(ERROR_CODE_DES[ret.result]))},null,this,null,function(param){loadingUI.hide(),showTips(param)})},phoneSignup=function(phoneNumber,password,authCode,caller,success,fail){regCaller=caller,successEvent=success,failEvent=fail;var sendMsg,urlPar=function(){var urlStr=window.location.href,findIndex=urlStr.indexOf("?");if(-1!=findIndex){for(var urlPar={},strArr=urlStr.substr(findIndex+1).split("&"),i=0;i<strArr.length;i++){var parArr=strArr[i].split("="),parKey=parArr[0],parValue=parArr[1];urlPar[parKey]=parValue}return urlPar}return null}();gbx.log("urlPar "+JSON.stringify(urlPar)),sendMsg=null!=urlPar?gtea.protobuf.encode("SMSCreateUserReq",{phoneNumber:phoneNumber,password:password,smsAuthCode:authCode,rebateParentId:urlPar.token,platformId:Platform.platformId,packageId:urlPar.packageId}):gtea.protobuf.encode("SMSCreateUserReq",{phoneNumber:phoneNumber,password:password,smsAuthCode:authCode,platformId:Platform.platformId,packageId:bridge.getPackageId()}),netTool.createHttpRequest(netTool.getPathByKey("smsCreateUrl"),sendMsg,this,function(data){var ret=gtea.protobuf.decode("SMSCreateUserResp",data);ret.result==ERROR_CODE.OK?(showTips(Localization.signupSuccess),startLoginNormal(phoneNumber,password,!0,!0)):showTips(ERROR_CODE_DES[ret.result])},function(status){showTips(Localization.loginError+" status "+status)})},guestLogin=function(){var guestPlatformId=accountMgr.getGuestPlatformId(),sendObj={account:accountMgr.getGuestAccount(),OS:guestPlatformId,gameVersion:bridge.getVersion(),platformId:Platform.platformId,packageId:bridge.getPackageId()};loadingUI.show();var sendMsg=gtea.protobuf.encode("LoginReq",sendObj);netTool.createHttpRequest(netTool.getPathByKey("loginUrl"),sendMsg,this,function(data){var ret=gtea.protobuf.decode("LoginResp",data);if(ret.result==ERROR_CODE.OK){if(null==ret.gameServer)return loadingUI.hide(),void showTips(Localization.serverAddressError);platformManager.setLoginGuest(!0),accountMgr.setToken(ret.authToken),accountMgr.setGateServerAddress(ret.gameServer.address),accountMgr.setGameServerId(ret.gameServer.serverId);var addressArr=ret.gameServer.address.split(":");server.setServer(addressArr[0],parseInt(addressArr[1])),stepConnectServer()}else ret.result==ERROR_CODE.ServerClosed?(loadingUI.hide(),accountMgr.setToken(null),showTips(void 0!=ret.serverCloseNotice?ret.serverCloseNotice:ERROR_CODE_DES[ret.result])):(accountMgr.setToken(null),loadingUI.hide(),showTips(ERROR_CODE_DES[ret.result]))},function(status){loadingUI.hide(),showTips(Localization.loginError+" status "+status)})},phoneLogin=function(){var userData=accountMgr.getUserData(),hashPassword=accountMgr.getHashPassword(),sendObj={phoneNumber:userData.account,hashPassword:hashPassword,OS:bridge.getPlatform(),gameVersion:bridge.getVersion(),platformId:Platform.platformId,packageId:bridge.getPackageId()},sendMsg=gtea.protobuf.encode("SMSLoginReq",sendObj);netTool.createHttpRequest(netTool.getPathByKey("smsLoginUrl"),sendMsg,this,function(data){var ret=gtea.protobuf.decode("SMSLoginResp",data);if(ret.result==ERROR_CODE.OK){if(null==ret.gameServer)return loadingUI.hide(),void showTips(Localization.serverAddressError);platformManager.setLoginGuest(!1),accountMgr.setToken(ret.authToken),accountMgr.setGateServerAddress(ret.gameServer.address),accountMgr.setGameServerId(ret.gameServer.serverId);var addressArr=ret.gameServer.address.split(":");server.setServer(addressArr[0],parseInt(addressArr[1])),stepConnectServer()}else ret.result==ERROR_CODE.ServerClosed?(loadingUI.hide(),accountMgr.setToken(null),showTips(void 0!=ret.serverCloseNotice?ret.serverCloseNotice:ERROR_CODE_DES[ret.result])):(accountMgr.setToken(null),loadingUI.hide(),showTips(ERROR_CODE_DES[ret.result]))},function(status){loadingUI.hide(),showTips(Localization.loginError+" status "+status)})};return{isAdded:!1,show:function(isInit,reconnect){confMgr.prepare(),topConfirm.new(),loginToRoomTimes=0,this.isAdded||(hubs.subscribe("global.net_connect.login_to_room",eventRestartLoginToRoom),hubs.subscribe("global.net_connect.login_to_room_success",eventRestartLoginToRoomSuccess),hubs.subscribe("global.net_connect.connected",eventConnected),this.isAdded=!0),hubs.subscribe("global.app.back_action",bridge.exitApp),hubs.subscribe("global.net_connect.disconnected",eventDisconnected),systemReceiver.removeListener(),systemReceiver.addListenerOnce();var userData=accountMgr.getUserData();(loginUI=new LoginUI(userData.account,userData.password,userData.country,!0,!0)).setCommand("sms_create",phoneSignup),loginUI.setCommand("sms_login",startLoginNormal),loginUI.setCommand("sms_guestlogin",startGuestloginNormal),loginUI.addToStage(),soundMgr.playBGM("assets/major/bgm/back.mp3"),soundMgr.playSE("assets/major/login_se/system_welcome.mp3",1),getServerInfo(),util.closeInitDiv(),bridge.sendGameReady(),!isInit&&reconnect&&restartLogin()},end:function(){loginUI&&loginUI.destroy(),loginUI=null,hubs.unsubscribe("global.app.back_action",bridge.exitApp),hubs.unsubscribe("global.net_connect.disconnected",eventDisconnected),systemReceiver.addListener()}}}),gbx.define("game/lobby/ui/lobby",["comm/helper/conf_mgr","comm/helper/room_mgr","gbx/render/stage","comm/base/command_ui","gbx/render/display/sprite","gbx/render/display/text","gbx/render/schema","comm/ui/sound_button","comm/ui/marquee","gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","comm/helper/trumpet_mgr","gbx/bridge","game/lobby/parts/way_sheet","game/lobby/lobbypop/system_setting","game/lobby/lobbypop/account_safe","game/lobby/lobbypop/gambling_details","game/lobby/lobbypop/game_help","game/lobby/lobbypop/bank_setting","game/lobby/lobbypop/rank_info","game/lobby/lobbypop/create_vip","game/lobby/lobbypop/addin_room","game/lobby/lobbypop/online_service","game/lobby/lobbypop/game_spread","game/lobby/lobbypop/mail_panel","comm/helper/playerdata_mgr","comm/ui/ui_utils","conf/ui_locallization","conf/platform","game/lobby/lobbypop/bank_charge","game/lobby/lobbypop/bank_charge_online","platform/platform_manager","game/lobby/parts/download","gbx/net/net_tool","comm/ui/top_message","gbx/net/errorcode_des","comm/ui/connect_loading","game/lobby/lobbypop/game_svip_privilege","gbx/render/ui/image","game/lobby/lobbypop/sign","comm/helper/scene_mgr","comm/ui/top_confirm"],function(confMgr,roomMgr,stage,BaseUI,Sprite,Text,Schema,Button,Marquee,server,CMD,ERROR_CODE,trumpetMgr,bridge,Waysheet,SystemSetting,AccountSafe,GamblingDetail,GameHelp,BankSetting,RankInfo,CreateVip,AddInRoom,OnlineService,GameSpread,MailPanel,playerDataMgr,uiUtils,uiLocallization,platform,BankCharge,BankChargeOnline,platformManager,DownloadForm,netTool,topMessage,ERROR_CODE_DES,loadingUI,GameSVIPPrivilege,Image,SignIn,sceneMgr,topConfirm){var showDownloadForm=!1;return BaseUI.extend({init:function(){this._super(),this.setImage("assets/major/lobby/sp/lobby_bg.png");this.tabBtn=[],this.panel_dragonList,this.panel_jingmiList,this.panel_sixList,this.setting=confMgr.read("major/dat/game/lobby.json");var bar1=uiUtils.createSprite("assets/major/lobby/sp/panel_bar.png");bar1.pos(0,1048),bar1.zOrder=0,this.addChild(bar1),new Schema([{type:"Sprite",props:{pos:[4,4],name:"top_bar",childs:[{type:"Sprite",props:{setImage:["assets/major/lobby/sp/head_bg.png"],pos:[20,0]}},{type:"Button",props:{scale:[.95],stateNum:1,pos:[29.5,9.5],name:"player_head",setClickHandler:[this,this.onClickHead]}},{type:"Text",props:{text:"",fontSize:22,color:"#FFFFFD",align:"left",width:200,strokeColor:"#000000",overflow:"hidden",pos:[115,15],name:"player_name"}},{type:"Text",props:{text:"",fontSize:20,color:"#ffffff",align:"left",width:170,pos:[115,55],name:"gold_carry"}},{type:"Text",props:{text:"",fontSize:20,color:"#ffffff",align:"left",width:170,pos:[290,55],name:"gold_value"}},{type:"Button",props:{setSkinImage:["assets/major/lobby/sp/mark_add_gold.png"],stateNum:2,pos:[245,40],name:"addGold",setClickHandler:[this,this.addGold]}},{type:"Text",props:{text:"",fontSize:32,color:"#ffffff",align:"center",width:170,pos:[460,18],visible:!1,name:"vip_level"}}]}},{type:"Text",props:{text:"客服QQ:10000",fontSize:20,color:"#adb5f1",align:"left",pos:[950,580],visible:!1}}]).appendTo(this);for(var topRightPath=["assets/major/lobby/sp/pic_bank.png","assets/major/lobby/sp/pic_spread.png","assets/major/lobby/sp/pic_mail.png","assets/major/lobby/sp/pic_more.png"],posX=[71,203,335,467],topRightBtnNames=["bank","spread","mail","more"],index=0;index<topRightPath.length;index++){if((btn=uiUtils.createButton(topRightPath[index],2,"btn_"+topRightBtnNames[index])).pos(posX[index],1048),btn.setClickHandler(this,this.topRightBtnsClick),1==index){var redDot=uiUtils.createSprite("assets/major/public/reddot.png","redDot");redDot.pos(60,20),redDot.visible=!1,btn.addChild(redDot)}this.addChild(btn)}var bg=new Image("assets/major/public/tab_bg.png");bg.pos(0,100),bg.width=640,bg.height=70,bg.sizeGrid="10,10,10,10",this.addChild(bg);for(var tabBtnNames=["julong","jingmi","six"],Names=["assets/major/lobby/sp/tab_select.png"],Words=[uiLocallization.word_zhizun,uiLocallization.word_jinmi,uiLocallization.word_six],posXList=[78],length=tabBtnNames.length,index=0;index<length;index++){var btn=uiUtils.createButton("",1,"lobbyTab_"+tabBtnNames[index]);btn.stateNum=1,btn.size(205,100),btn.pos(205*index,100),this.addChild(btn);var select=uiUtils.createSprite(Names[0],"select");select.pos(0,-18),btn.addChild(select),btn.setClickHandler(this,this.onSelect,btn.name);var just=uiUtils.createSimpleText(Words[index]);just.pos(posXList[0],18),just.color="#ffffff",just.fontSize=26,btn.addChild(just),this.addChild(btn),this.tabBtn.push(btn)}this.TabBtnStyle(this.tabBtn[0].name);var logo=uiUtils.createSprite("assets/major/lobby/sp/logo.png","");logo.pos(478,15),this.addChild(logo);var sp_dragon=new Sprite;sp_dragon.pos(0,178),sp_dragon.zOrder=-1,sp_dragon.name="panel_dragon",this.addChild(sp_dragon),this.panel_dragonList=uiUtils.createNormalList(1,0,0,"v",640,870,640,370),this.panel_dragonList.name="panel_dragon",this.panel_dragonList.setRenderHandler(this,this._render_dragon),sp_dragon.addChild(this.panel_dragonList);var sp_jm=new Sprite;sp_jm.pos(0,178),sp_jm.zOrder=-1,sp_jm.name="panel_jingmi",this.addChild(sp_jm),this.panel_jingmiList=uiUtils.createNormalList(1,0,0,"v",640,870,640,370),this.panel_jingmiList.name="panel_dragon",this.panel_jingmiList.setRenderHandler(this,this._render_jingmi),sp_jm.addChild(this.panel_jingmiList),sp_jm.visible=!1;var sp_six=new Sprite;sp_six.pos(0,178),sp_six.zOrder=-1,sp_six.name="panel_six",this.addChild(sp_six),this.panel_sixList=uiUtils.createNormalList(1,0,0,"v",640,870,640,370),this.panel_sixList.setRenderHandler(this,this._render_six),sp_six.addChild(this.panel_sixList),sp_six.visible=!1;var sp_vip=uiUtils.createPanel(640,870,"panel_vip");sp_vip.pos(0,178),this.addChild(sp_vip),sp_vip.visible=!1;var sys=new SystemSetting;sys.name="sysSetting",sys.pos(0,0),sys.visible=!1,sys.zOrder=3,this.addChild(sys);var gambling=new GamblingDetail;gambling.name="gambling",gambling.pos(0,0),gambling.visible=!1,gambling.zOrder=3,this.addChild(gambling);var accoutSafe=new AccountSafe;accoutSafe.name="accoutSafe",accoutSafe.pos(0,0),accoutSafe.visible=!1,accoutSafe.zOrder=3,this.addChild(accoutSafe);var gameHelp=new GameHelp;gameHelp.name="gameHelp",gameHelp.pos(0,0),gameHelp.visible=!1,gameHelp.zOrder=3,this.addChild(gameHelp);var bankSetting=new BankSetting;bankSetting.name="bankSetting",bankSetting.pos(0,0),bankSetting.visible=!1,bankSetting.zOrder=3,this.addChild(bankSetting);var bankChargeOnline=new BankChargeOnline;bankChargeOnline.pos(0,0),bankChargeOnline.name="bankChargeOnline",bankChargeOnline.visible=!1,bankChargeOnline.zOrder=3,this.addChild(bankChargeOnline);var rankInfo=new RankInfo;rankInfo.name="rankInfo",rankInfo.pos(0,0),rankInfo.visible=!1,rankInfo.zOrder=3,this.addChild(rankInfo);var createVip=new CreateVip;createVip.name="createVip",createVip.pos(0,0),createVip.visible=!1,createVip.zOrder=3,this.addChild(createVip);var addInRoom=new AddInRoom;addInRoom.name="addInRoom",addInRoom.pos(0,0),addInRoom.visible=!1,addInRoom.zOrder=3,this.addChild(addInRoom);var onlineService=new OnlineService;onlineService.name="onlineService",onlineService.pos(0,300),onlineService.visible=!1,onlineService.zOrder=3,this.addChild(onlineService);var gameSpread=new GameSpread;gameSpread.name="gameSpread",gameSpread.pos(0,0),gameSpread.visible=!1,gameSpread.zOrder=3,this.addChild(gameSpread);var mailPanel=new MailPanel;mailPanel.name="mailPanel",mailPanel.pos(0,0),mailPanel.visible=!1,mailPanel.zOrder=3,this.addChild(mailPanel);var gameSVIPPrivilege=new GameSVIPPrivilege;if(gameSVIPPrivilege.name="gameSVIPPrivilege",gameSVIPPrivilege.pos(0,0),gameSVIPPrivilege.visible=!1,gameSVIPPrivilege.zOrder=4,this.addChild(gameSVIPPrivilege),"web"===bridge.getPlatform()&&!showDownloadForm){var downloadForm=new DownloadForm;downloadForm.pos(0,280),downloadForm.zOrder=2,downloadForm.visible=!0,downloadForm.name="downloadForm",this.addChild(downloadForm),showDownloadForm=!0}this.subscribe("lobby.setting.play.open_service",this,this.eventOpenService),this.subscribe("lobby.setting.play.open_gambling",this,this.eventOpenGambling),this.subscribe("lobby.setting.play.open_accoutSafe",this,this.eventOpenAccountSafe),this.subscribe("lobby.setting.play.open_gameHelp",this,this.eventOpenGameHelp),this.subscribe("lobby.setting.play.open_rank",this,this.eventOpenRank),this.subscribe("lobby.setting.play.open_mailPanel",this,this.eventOpenMailPanel),this.subscribe("lobby.lobbypop.bankcharge",this,this.eventOpenBankcharge),this.subscribe("lobby.lobbypop.refresh_vip_room",this,this.eventRefreshVIPRoom),this.subscribe("lobby.lobbypop.OpenSvipPrivilege",this,this.eventOpenSvipPrivilege),this.messageBar=new Marquee,this.messageBar.pos(284,47),this.addChild(this.messageBar),this.subscribe("global.trumpet.update",this,this.onBoardCastMessage),this.subscribe("lobby.game.updateMyInfo",this,this.updateMyInfo),this.subscribe("lobby.game.getgold",this,this.eventGetGold),this._refresh(),this._makeVIPPanel(sp_vip,!1),this._checkOpenPanel()},eventGetGold:function(){var sendObj={force:!0,gold:1e3,os:bridge.getPlatform(),gameVersion:bridge.getVersion(),packageId:bridge.getPackageId()},sendMsg=gtea.protobuf.encode("BaccaratTurnTableReq",sendObj);server.requestToGame(CMD.BaccaratTurntable,sendMsg,this,function(errorcode,data){errorcode==ERROR_CODE.OK?(topMessage.post("金币+1000"),this.publish("global.playerdata.update")):topMessage.post(ERROR_CODE_DES[errorcode])})},eventOpenSvipPrivilege:function(spreadData,rechargeIn){function success(data){this.getChildByName("gameSVIPPrivilege").setData(spreadData,data,rechargeIn),this.getChildByName("gameSVIPPrivilege").visible=!0}this.queryOfflineUser(this,success)},queryOfflineUser:function(caller,successFun){var sendMsg=gtea.protobuf.encode("RBaccaratQueryRSChildrenReq",{playerId:playerDataMgr.getMyUID(),token:"Moxian009"});loadingUI.show();var url=netTool.getPathByKey("rBaccaratQueryRSChildrenUrl");netTool.createHttpRequest(url,sendMsg,this,function(data){var msgData=gtea.protobuf.decode("RBaccaratQueryRSChildrenResp",data);loadingUI.hide(),msgData.result==ERROR_CODE.OK?successFun&&successFun.call(caller,msgData.children):topMessage.post(ERROR_CODE_DES[msgData.result])})},_checkOpenPanel:function(){var data=roomMgr.getChoose();if(data)switch(data.baccaratRoomType){case confMgr.definition.BaccaratRoomType.Dragon:this.onSelect(null,this.tabBtn[0].name);break;case confMgr.definition.BaccaratRoomType.JingMi:this.onSelect(null,this.tabBtn[1].name);break;case confMgr.definition.BaccaratRoomType.Six:this.onSelect(null,this.tabBtn[2].name)}},_refresh:function(){var roomList=roomMgr.getRoomList();if(void 0!=roomList){var chooseData=roomMgr.getChoose(),curDragonIndex=0,dragonIndex=0,curJingmiIndex=0,jingmiIndex=0,curSixIndex=0,sixIndex=0;this.panel_dragonList.array=[],this.panel_jingmiList.array=[],this.panel_sixList.array=[];for(var index=0;index<roomList.length;index++){var roomId=roomList[index].roomId;if(-1==confMgr.setting.maskServerIds.indexOf(parseInt(roomId)))switch(roomList[index].baccaratRoomType){case confMgr.definition.BaccaratRoomType.Dragon:this.panel_dragonList.array.push(roomList[index]),null!=chooseData&&chooseData.roomId===roomId&&(curDragonIndex=dragonIndex),dragonIndex++;break;case confMgr.definition.BaccaratRoomType.JingMi:this.panel_jingmiList.array.push(roomList[index]),null!=chooseData&&chooseData.roomId===roomId&&(curJingmiIndex=jingmiIndex),jingmiIndex++;break;case confMgr.definition.BaccaratRoomType.Six:this.panel_sixList.array.push(roomList[index]),null!=chooseData&&chooseData.roomId===roomId&&(curSixIndex=sixIndex),sixIndex++}}this.panel_dragonList.refresh(),this.panel_dragonList.scrollTo(curDragonIndex),this.panel_jingmiList.refresh(),this.panel_jingmiList.scrollTo(curJingmiIndex),this.panel_sixList.refresh(),this.panel_sixList.scrollTo(curSixIndex)}},_makeVIPPanel:function(vipPanel,isRefresh){var roomList=roomMgr.getRoomListByType(confMgr.definition.BaccaratRoomType.Vip),chooseData=roomMgr.getChoose();isRefresh&&vipPanel.removeChildren(0,20);var BtnName=["btn_createRoom","btn_getinRoom"],just=uiUtils.createSimpleText(uiLocallization.word_vip_room_list);just.pos(0,700),just.color="#ffffff",just.fontSize=30,just.size(640,50),just.align="center",vipPanel.addChild(just);for(var lastY=0,i=1;i<=BtnName.length;i++){var tempBtn=uiUtils.createButton("assets/major/lobby/sp/vip/btn_vip_"+i+".png",2,BtnName[i-1]);lastY=312*(i-1),tempBtn.pos(22,lastY),tempBtn.setClickHandler(this,this.OnClickVip),vipPanel.addChild(tempBtn)}for(i=0;i<roomList.length;i++){var sp=new Waysheet(!0);sp.setData(roomList[i]),sp.name=roomList[i].roomId,sp.pos(0,lastY+312+330*i),vipPanel.addChild(sp),null!=chooseData&&chooseData.roomId===roomList[i].roomId&&lastY}},_resetVIPPanel:function(){for(var vipPanel=this.getChildByName("panel_vip"),roomList=roomMgr.getRoomListByType(confMgr.definition.BaccaratRoomType.Vip),i=0;i<roomList.length;i++)vipPanel.getChildByName(roomList[i].roomId).updateVIPRemoveBtn()},eventOpenBankcharge:function(){function callback1(){sceneMgr.switchTo("login",!1,!1)}function callback2(){topConfirm.hide()}if(platformManager.getLoginGuest()){var tip=uiLocallization.top_confirm_context;topConfirm.askBtnWorld(tip,this,uiLocallization.top_confirm3,uiLocallization.top_confirm4,callback1,callback2)}else this.getChildByName("bankChargeOnline").visible=!0,this.getChildByName("bankChargeOnline").setData()},eventOpenGambling:function(data){this.getChildByName("gambling").visible=!0,this.getChildByName("gambling").setGambleData(data)},eventOpenAccountSafe:function(){this.getChildByName("accoutSafe").visible=!0,this.getChildByName("accoutSafe").eventBindInfo()},eventOpenService:function(){this.getChildByName("onlineService").visible=!0},eventOpenGameHelp:function(){this.getChildByName("gameHelp").visible=!0},eventOpenGameSpread:function(data){this.getChildByName("gameSpread").setData(data,this.getChildByName("btn_spread","redDot").visible),this.getChildByName("gameSpread").visible=!0},eventOpenMailPanel:function(data){var sendMsg=gtea.protobuf.encode("GetMailListReq",{});server.requestToGame(CMD.GetMailList,sendMsg,this,function(errorcode,data){if(errorcode==ERROR_CODE.OK){var retData=gtea.protobuf.decode("GetMailListResp",data);this.getChildByName("mailPanel").visible=!0,this.getChildByName("mailPanel").setData(retData.mailData)}})},eventRefreshVIPRoom:function(roomId){var sp_vip=this.getChildByName("panel_vip");roomMgr.removeRoom(roomId),this._makeVIPPanel(sp_vip,!0)},eventOpenRank:function(){var sendMsg=gtea.protobuf.encode("GetGoldRankReq",{});server.requestToGame(CMD.GetGoldRank,sendMsg,this,function(errorcode,data){if(errorcode==ERROR_CODE.OK){var retData=gtea.protobuf.decode("GetGoldRankResp",data);this.getChildByName("rankInfo").visible=!0,this.getChildByName("rankInfo").setData(retData.rankInfo)}else topMessage.post(ERROR_CODE_DES[errorcode])})},_openSpread:function(recharge){loadingUI.show();var sendMsg=gtea.protobuf.encode("RBaccaratGetBaseInfoReq",{playerId:playerDataMgr.getMyUID(),token:"Moxian009"}),url=netTool.getPathByKey("rBaccaratGetBaseInfoUrl");netTool.createHttpRequest(url,sendMsg,this,function(data){var msgData=gtea.protobuf.decode("RBaccaratGetBaseInfoResp",data);loadingUI.hide(),msgData.result==ERROR_CODE.OK?recharge?(this.getChildByName("bankSetting").visible=!0,this.getChildByName("bankSetting").eventUpdateMyDeposit(msgData)):this.eventOpenGameSpread(msgData):topMessage.post("errorCode"+msgData.result+ERROR_CODE_DES[msgData.result])})},topRightBtnsClick:function(btn){"btn_bank"==btn.name?this.addGold():"btn_mail"==btn.name?this.publish("lobby.setting.play.open_mailPanel"):"btn_spread"==btn.name?this._openSpread(!1):"btn_more"==btn.name&&(this.getChildByName("sysSetting").visible=!0)},_render_dragon:function(cell,idx){idx>this.panel_dragonList.array.length||this._renderSameObject(cell,idx,this.panel_dragonList)},_render_six:function(cell,idx){idx>this.panel_sixList.array.length||this._renderSameObject(cell,idx,this.panel_sixList)},_render_jingmi:function(cell,idx){idx>this.panel_jingmiList.array.length||this._renderSameObject(cell,idx,this.panel_jingmiList)},_renderSameObject:function(cell,idx,list){var root=cell.getChildByName("root");root||((root=new Sprite).pos(0,0),root.name="root",cell.addChild(root)),root.removeChildren();var sp=new Waysheet(!1);sp.setData(list.array[idx]),sp.pos(0,0),root.addChild(sp)},TabBtnStyle:function(name){this.tabBtn.forEach(function(element){element.name==name?element.getChildByName("select").visible=!0:element.getChildByName("select").visible=!1},this)},onSelect:function(btn,name){this.TabBtnStyle(name),this.getChildByName("panel_dragon").visible=!1,this.getChildByName("panel_jingmi").visible=!1,this.getChildByName("panel_vip").visible=!1,this.getChildByName("panel_six").visible=!1,"lobbyTab_julong"==name?(this.getChildByName("panel_dragon").visible=!0,this._refresh()):"lobbyTab_jingmi"==name?(this.getChildByName("panel_jingmi").visible=!0,this._refresh()):"lobbyTab_Vip"==name?(this.getChildByName("panel_vip").visible=!0,this._resetVIPPanel()):"lobbyTab_six"==name&&(this.getChildByName("panel_six").visible=!0,this._refresh())},OnClickVip:function(btn){"btn_createRoom"==btn.name?(this.getChildByName("createVip").visible=!0,this.getChildByName("createVip").initUI()):"btn_getinRoom"==btn.name&&(this.getChildByName("addInRoom").visible=!0,this.getChildByName("addInRoom").initUI())},setSpreadReddot:function(){function success(data){var redDot=this.getChildByName("btn_spread","redDot");data.length>0?redDot.visible=!1:redDot.visible=!0}this.queryOfflineUser(this,success)},setUserHead:function(headIdx){this.getChildByName("top_bar","player_head").setSkinImage("assets/major/head/userhead_"+headIdx+".png")},setUserName:function(name){this.getChildByName("top_bar","player_name").text=name},setUserGold:function(gold,bankGold){var numGold=playerDataMgr.getMyGold(),carryGold=playerDataMgr.getMyCarryGold();numGold=(numGold=numGold-carryGold)>1e6?Math.floor(numGold/1e4)+uiLocallization.wan:uiUtils.getFloatByPower(numGold,2),(carryGold=carryGold>1e6?Math.floor(carryGold/1e4)+uiLocallization.wan:uiUtils.getFloatByPower(carryGold,2))<=0&&(carryGold=0),this.getChildByName("top_bar","gold_carry").text=uiLocallization.carryOnGold+carryGold,this.getChildByName("top_bar","gold_value").text=uiLocallization.deposit+numGold},setUserVip:function(vipLevel){var labelText="VIP"+vipLevel;0===vipLevel&&(labelText="平民"),this.getChildByName("top_bar","vip_level").text=labelText},updateMyInfo:function(){this.setUserGold(playerDataMgr.getMyGold()),this.setUserVip(playerDataMgr.getMyVIPLevel())},setUnreadMailCount:function(count){},addGold:function(){this._openSpread(!0)},onClickHead:function(){this.eventOpenAccountSafe()},OnClick:function(btn,name){if("lobby_play"==name){var roomList=roomMgr.getRoomList();if(roomList){var index=Math.floor(Math.abs(Math.random())*roomList.length);roomMgr.setChoose(roomList[index])}roomMgr.joinRoom()}},jumpMenuButton:function(btn,path){this.runCommand("jump_menu",path)},onBoardCastMessage:function(context){this.messageBar.clear(),this.messageBar.setText(context)},getCurrentPath:function(){return this.getChildByName("list").path},gameListBack:function(){this.getChildByName("list").back()},end:function(){this._super(),this.unsubscribe("global.trumpet.update",this,this.onBoardCastMessage)}})}),gbx.define("game/lobby/ui/login",["conf/system","comm/base/command_ui","gbx/render/display/sprite","gbx/render/display/animation","gbx/render/display/text","gbx/render/ui/button","gbx/render/ui/textinput","gbx/render/ui/checkbox","gbx/bridge","comm/ui/top_message","conf/version","conf/ui_locallization","comm/helper/playerdata_mgr","comm/helper/account_mgr","game/lobby/parts/find_password","game/lobby/parts/country_code","conf/platform","gbx/hubs","comm/ui/ui_utils","gbx/net/net_tool","gbx/net/errorcode_des","gbx/render/ui/image","platform/platform_manager"],function(sys,BaseUI,Sprite,Animation,Text,Button,TextInput,Checkbox,bridge,topMessage,version,uiLocallization,playerDataMgr,accountMgr,FindPasswordForm,countryCode,Platform,hubs,uiUtils,netTool,ERROR_CODE_DES,Image,platformManager){return BaseUI.extend({init:function(account,pass,country,checkAccount,checkPassword){this._super();var bg2=new Sprite;bg2.setImage("assets/major/login/login_bg.png"),bg2.pos(0,0),bg2.name="backGround2",this.addChild(bg2),uiUtils.createBackgroundCrash(this,bg2),this._type="login",this._getVCLeftTime=0,this._locked=!1,country||(country="86"),accountMgr.getUserData().country=country;var myVer=new Text;myVer.text="resource version: "+version.version,myVer.color="#ffffff",myVer.pos(18,45),this.addChild(myVer);var gameVer=new Text;gameVer.text="game version: "+bridge.getVersion(),gameVer.color="#ffffff",gameVer.pos(18,25),this.addChild(gameVer);var intoSp=new Sprite;intoSp.pos(332,350),intoSp.name="login_into",intoSp.visible=!1,this.addChild(intoSp);var text=new Text;text.text=uiLocallization.now_get_in_game,text.color="#ffffff",text.fontSize=24,text.align="center",text.width=200,text.pos(-100,120),intoSp.addChild(text);var countryForm=new Sprite;countryForm.pos(0,340),countryForm.name="country_form",this.addChild(countryForm);var tipCountry=uiUtils.createSimpleText(uiLocallization.country);tipCountry.pos(100,238),tipCountry.color="#ffffff",tipCountry.fontSize=30,countryForm.addChild(tipCountry);var chooseCountryBtn=new Button;chooseCountryBtn.size(430,50),chooseCountryBtn.stateNum=1,chooseCountryBtn.pos(165,240),chooseCountryBtn.name="choose_country_btn",chooseCountryBtn.setClickHandler(this,this.onClickCountry),countryForm.addChild(chooseCountryBtn);var countryName=this._getCountryByCode(country),countryLabel=uiUtils.createSimpleText(countryName,"country");countryLabel.pos(290,242),countryLabel.color="#DFF5F3",countryLabel.fontSize=25,countryForm.addChild(countryLabel);var arrow=uiUtils.createSprite("assets/major/public/arrow.png");arrow.pos(555,225),arrow.rotation=90,countryForm.addChild(arrow);var countryPanel=new Image("assets/major/public/public_darkBg.png");countryPanel.name="countryPanel",countryPanel.pos(235,625),countryPanel.visible=!1,countryPanel.width=310,countryPanel.height=220,countryPanel.zOrder=1,countryPanel.sizeGrid="10,10,10,10",this.addChild(countryPanel);for(var i=0;i<3;i++){var sp=new Image("assets/major/public/public_darkBg.png");sp.pos(0,0),sp.width=310,sp.height=220,sp.sizeGrid="10,10,10,10",countryPanel.addChild(sp)}var maskBtn_1=uiUtils.createMask(this,!0);maskBtn_1.pos(-1500,-1500),maskBtn_1.name="maskBtn_1",maskBtn_1.setClickHandler(this,this.onClickCountry),countryPanel.addChild(maskBtn_1);var listCountry=uiUtils.createNormalList(1,10,0,"v",310,218,310,45);listCountry.array=countryCode.getCountryCode(),listCountry.name="listCountry",listCountry.setRenderHandler(this,this._renderCountryCode),countryPanel.addChild(listCountry);var loginForm=new Sprite;loginForm.pos(0,335),loginForm.name="login_form",this.addChild(loginForm);var wordAccount=uiUtils.createSimpleText(uiLocallization.login_account);wordAccount.pos(100,298),wordAccount.color="#ffffff",wordAccount.fontSize=30,countryForm.addChild(wordAccount);var wordPass=uiUtils.createSimpleText(uiLocallization.login_password);wordPass.pos(100,358),wordPass.color="#ffffff",wordPass.fontSize=30,countryForm.addChild(wordPass);var inputUsername=new TextInput;inputUsername.prompt=uiLocallization.login_account,inputUsername.size(260,60),inputUsername.fontSize=25,inputUsername.color="#ffffff",inputUsername.pos(290,280),inputUsername.name="txt_username",loginForm.addChild(inputUsername),checkAccount&&""!==pass&&(-1!=account.indexOf(country)&&0==account.indexOf(country)&&(account=account.substring(country.length)),inputUsername.text=account);var inputPassword=new TextInput;inputPassword.prompt=uiLocallization.login_password,inputPassword.type="password",inputPassword.size(260,60),inputPassword.fontSize=25,inputPassword.color="#ffffff",inputPassword.pos(290,345),inputPassword.name="txt_password",loginForm.addChild(inputPassword),checkPassword&&(inputPassword.text=pass);var guestLoginBtn=new Button;guestLoginBtn.setSkinImage("assets/major/login/login_button_guest.png"),guestLoginBtn.stateNum=2,guestLoginBtn.pos(450,294.5),guestLoginBtn.name="guestLoginBtn",guestLoginBtn.visible=!1,guestLoginBtn.setClickHandler(this,this.onClickGuestLogin),loginForm.addChild(guestLoginBtn);var userLoginBtn=new Button;userLoginBtn.setSkinImage("assets/major/login/word_begin.png"),userLoginBtn.stateNum=2,userLoginBtn.pivotToCenter(),userLoginBtn.pos(320,560),userLoginBtn.setClickHandler(this,this.onClickUserLogin),loginForm.addChild(userLoginBtn);var saveUsername=new Checkbox;saveUsername.setSkinImage("assets/major/login/login_account.png"),saveUsername.stateNum=2,saveUsername.pos(105,450),saveUsername.name="cb_username",loginForm.addChild(saveUsername),checkAccount&&(saveUsername.selected=!0);var savePassword=new Checkbox;savePassword.setSkinImage("assets/major/login/login_password.png"),savePassword.stateNum=2,savePassword.pos(380,450),savePassword.name="cb_password",loginForm.addChild(savePassword),checkPassword&&(savePassword.selected=!0);var turnToSignupBtn=new Button;turnToSignupBtn.setSkinImage("assets/major/login/register.png"),turnToSignupBtn.stateNum=1,turnToSignupBtn.pivotToCenter(),turnToSignupBtn.pos(220,750),turnToSignupBtn.setClickHandler(this,this.onClickFindPass,!0),loginForm.addChild(turnToSignupBtn);var findPass=new Button;findPass.setSkinImage("assets/major/login/forget_pass.png"),findPass.stateNum=1,findPass.pivotToCenter(),findPass.pos(420,750),findPass.setClickHandler(this,this.onClickFindPass,!1),loginForm.addChild(findPass);var spliteLine=new Sprite;spliteLine.setImage("assets/major/public/white_line.png"),spliteLine.pivotToCenter(),spliteLine.pos(320,750),spliteLine.rotation=90,spliteLine.scaleX=.05,loginForm.addChild(spliteLine);var findPasswordForm=new FindPasswordForm;findPasswordForm.pos(0,0),findPasswordForm.zOrder=2,findPasswordForm.visible=!1,findPasswordForm.name="findPasswordForm",this.addChild(findPasswordForm),(userLoginBtn=new Button).setSkinImage("assets/major/login/word_begin.png"),userLoginBtn.stateNum=2,userLoginBtn.pivotToCenter(),userLoginBtn.pos(320,895),userLoginBtn.setClickHandler(this,this.onClickGuestLogin),userLoginBtn.visible=!1,userLoginBtn.name="userLoginBtn",this.addChild(userLoginBtn),this.subscribe("lobby.login.gueststate",this,this.eventGuestState)},_renderCountryCode:function(cell,idx){function selectOne(btn,param){accountMgr.getUserData().country=param[1],this.getChildByName("country_form","country").text=param[0],this.getChildByName("countryPanel").visible=!1}var data=this.getChildByName("countryPanel","listCountry").array;if(!(idx>=data.length)){var root=cell.getChildByName("root");if(!root){(root=new Sprite).name="root",cell.addChild(root);var arr=data[idx].split(","),lab=uiUtils.createSimpleText(arr[0]);lab.pos(0,10),lab.color="#DFF5F3",lab.fontSize=28,root.addChild(lab);var btn=new Button;btn.size(290,45),btn.pos(0,0),btn.setClickHandler(this,selectOne,arr),root.addChild(btn)}}},_getCountryByCode:function(code){for(var array=countryCode.getCountryCode(),i=0;i<array.length;i++){var arr=array[i].split(",");if(arr[1]==code)return arr[0]}return null},unlock:function(){this._locked=!1,this.getChildByName("login_into").visible=!1},showInto:function(){this.getChildByName("login_into").visible=!0},eventGuestState:function(){var loginForm=this.getChildByName("login_form"),guestLogin=loginForm.getChildByName("guestLoginBtn"),txtUsername=loginForm.getChildByName("txt_username");platformManager.getExamineState()?(guestLogin.visible=!0,txtUsername.size(160,70)):(guestLogin.visible=!1,txtUsername.size(260,70))},onClickCountry:function(btn){"choose_country_btn"==btn.name?this.getChildByName("countryPanel").visible=!0:"maskBtn_1"==btn.name&&(this.getChildByName("countryPanel").visible=!1)},onClickGuestLogin:function(){this._locked||(this._locked=!0,this.runCommand("sms_guestlogin"))},onClickUserLogin:function(){if(!this._locked){this._locked=!0;var loginForm=this.getChildByName("login_form"),txtUsername=loginForm.getChildByName("txt_username").text,txtPassword=loginForm.getChildByName("txt_password").text,cbUsername=loginForm.getChildByName("cb_username").selected,cbPassword=loginForm.getChildByName("cb_password").selected;if(txtUsername==loginForm.getChildByName("txt_username").prompt&&(txtUsername=""),txtPassword==loginForm.getChildByName("txt_password").prompt&&(txtPassword=""),""==txtUsername||""==txtPassword)return topMessage.post(uiLocallization.account_pass_not_void),void(this._locked=!1);var account=txtUsername;account=isNaN(txtUsername)?txtUsername:accountMgr.getUserData().country+txtUsername,this.runCommand("sms_login",account,txtPassword,cbUsername,cbPassword)}},onClickFindPass:function(btn,useNew){this.getChildByName("findPasswordForm").reset(useNew),this.getChildByName("findPasswordForm").visible=!0},eventUserSign:function(phoneNumber,pass,verifyCode){var success=function(){this.getChildByName("findPasswordForm").registerCallback(!0)},fail=function(){this.getChildByName("findPasswordForm").registerCallback(!1)};this.runCommand("sms_create",phoneNumber,pass,verifyCode,this,success,fail)},favourit:function(){var title=document.title,url=document.location.href,controlKey=/Mac OS/.test(navigator.userAgent)?"COMMAND":"CTRL";window.sidebar&&window.sidebar.addPanel?window.sidebar.addPanel(title,url,""):window.external&&window.external.AddFavorite?window.external.AddFavorite(url,title):topMessage.post("按下 "+controlKey+" + D 加入书签")}})}),gbx.define("gbx/bridge",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/net/errorcode_des","gbx/net/net_tool","gbx/hubs","conf/platform"],function(server,CMD,ERROR_CODE,ERROR_CODE_DES,netTool,hubs,Platform){var inAppPurchase,readyState=!1,waittingList=[],dlgProgress={ctx:null,callback:null};document.addEventListener("deviceready",function(){if(readyState=!0,"gbxBridge"in window&&"iOS"===gbxBridge.getPlatform()&&(inAppPurchase=cordova.require("cordova-plugin-inapppurchase.PaymentsPlugin"),waittingList.length)){for(var i=0;i<waittingList.length;i++)waittingList[i].fn.apply(waittingList[i].ctx,waittingList[i].args);waittingList=[]}},!1),function(){"gbxBridge"in window&&(gbxBridge.onVisibilityChange=function(isHide){if("CustomEvent"in window){var evt=new CustomEvent("gamepause",{detail:isHide});document.dispatchEvent(evt)}else(evt=document.createEvent("CustomEvent")).initCustomEvent("gamepause",!0,!0,isHide),document.dispatchEvent(evt)},gbxBridge.onBackAction=function(){},gbxBridge.onDownloadGameProgress=function(percent){dlgProgress.callback.call(dlgProgress.ctx,percent)},gbxBridge.payCallBackiOS=function(jsonPar){var receiptData=jsonPar;v.printLog("payCallBackiOS:"+receiptData),hubs.publish("platform.platform_manager",receiptData)},gbxBridge.vungleCallback=function(type,amount){gbx.log("33333333333 "+type+" "+amount),hubs.publish("lobby.game.getgold")})}();var v={get isParticleDownloadSupported(){return"web"!==v.getPlatform()&&v.getVersion()>=1.1},getParticleInfo:function(ctx,callback){if("iOS"===v.getPlatform())cordova.exec(function(data){callback.call(ctx,JSON.parse(data.config))},null,"Native","getDownloadGameConfig",[]);else if("getDownloadGameConfig"in gbxBridge){var str=gbxBridge.getDownloadGameConfig();callback.call(ctx,JSON.parse(str))}},sendGameReady:function(){"gbxBridge"in window&&("iOS"===v.getPlatform()?cordova.exec(null,null,"Native","gameReady",[]):"gameReady"in gbxBridge&&gbxBridge.gameReady())},startDownloadGame:function(key,context,callback){dlgProgress.ctx=context,dlgProgress.callback=callback,"iOS"===v.getPlatform()?cordova.exec(null,null,"Native","downloadGame",[key]):gbxBridge.downloadGame(key)},exitApp:function(){"gbxBridge"in window&&gbxBridge.exitApp()},printLog:function(msg){"gbxBridge"in window&&gbxBridge.printLog(msg)},getPlatform:function(){return"gbxBridge"in window?gbxBridge.getPlatform():"platform"in window?window.platform:"web"},getProvider:function(){return"gbxBridge"in window?gbxBridge.getProvider():null},getVersion:function(){return"gbxBridge"in window?gbxBridge.getVersion():"1.0.0"},getPackageId:function(){return"gbxBridge"in window?gbxBridge.getPackageId():"MX"},getServerInfo:function(){return"gbxBridge"in window&&"getServerInfo"in gbxBridge?gbxBridge.getServerInfo():""},clipboardCopy:function(msg){"gbxBridge"in window&&"iOS"===v.getPlatform()&&gbxBridge.clipboardCopy(msg)},setProducts:function(productList){"web"!==v.getPlatform()&&(readyState&&inAppPurchase?(gbx.log("inAppPurchase.setProducts:",productList),inAppPurchase.getProducts(productList).then(function(products){gbx.log("inAppPurchase.setProducts Response:",products)}).catch(function(err){gbx.log("inAppPurchase.setProducts Error:",err)})):waittingList.push({ctx:this,fn:this.setProducts,args:[productList]}))},requestPayment:function(productId,callback,failCallback){"web"!==v.getPlatform()?readyState?(gbx.log("inAppPurchase.buy:",productId),inAppPurchase.buy(productId).then(function(data){gbx.log("inAppPurchase.buy Response:",data),callback(data)}).catch(function(err){gbx.log("inAppPurchase.buy Error:",err),failCallback(err)})):waittingList.push({ctx:this,fn:this.requestPayment,args:[productId,callback,failCallback]}):failCallback({errorMessage:"不支持的设备",errorCode:-100})},payment:function(rechargeId){v.printLog("rechargeId:"+rechargeId),"gbxBridge"in window&&gbxBridge.payment(rechargeId)},payH5:function(orderId,totalAmount,subject,callBack,remark){"gbxBridge"in window&&gbxBridge.payH5(orderId,totalAmount,subject,callBack,remark)},pay:function(selectWay,transdata,sign){"gbxBridge"in window&&gbxBridge.payGood(selectWay,transdata,sign)},openUrl:function(url){"gbxBridge"in window&&gbxBridge.openUrl(url)},savePic:function(){"gbxBridge"in window&&gbxBridge.savePic()},getDeviceId:function(){return"gbxBridge"in window?gbxBridge.getDeviceId():null},detectOS:function(){var isWin="Win32"==navigator.platform||"Windows"==navigator.platform;if(isWin)return"Win";var isMac="Mac68K"==navigator.platform||"MacPPC"==navigator.platform||"Macintosh"==navigator.platform||"MacIntel"==navigator.platform;return isMac?"Mac":"X11"!=navigator.platform||isWin||isMac?String(navigator.platform).indexOf("Linux")>-1?"Linux":"other":"Unix"},playVungleVideo:function(){"gbxBridge"in window&&(gbx.log("2222222222222"),gbxBridge.playVungleVideo())}};return v}),gbx.define("gbx/cclass",["gbx/class","gbx/hubs"],function(Class,hubs){return Class.extend({init:function(){this.__subscribes=[]},unsubscribe:function(){for(var args=Array.prototype.slice.call(arguments,0),i=this.__subscribes.length-1;i>=0;i--)if(this.__subscribes[i][0]==args[0]&&this.__subscribes[i][1]==args[1]&&(!args[2]||this.__subscribes[i][2]==args[2])){hubs.unsubscribe.apply(hubs,this.__subscribes[i]),this.__subscribes.splice(i,0);break}},unsubscribeAll:function(){for(var i=0;i<this.__subscribes.length;i++)hubs.unsubscribe.apply(hubs,this.__subscribes[i]);this.__subscribes=[]},subscribe:function(){var args=Array.prototype.slice.call(arguments,0);hubs.subscribe.apply(hubs,args),this.__subscribes.push(args)},publish:function(){var args=Array.prototype.slice.call(arguments,0);hubs.publish.apply(hubs,args)},end:function(){this.unsubscribeAll()}})}),gbx.define("gbx/class",function(){var initializing=!1,fnTest=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,Class=function(){};return Class.extend=function(prop){function Class(){var ret,proto=Object.getPrototypeOf(this);return proto.hasOwnProperty("__singleton")&&null!=proto.__singleton?proto.__singleton:(!initializing&&this.init&&(ret=this.init.apply(this,arguments)),proto.hasOwnProperty("__singleton")&&(proto.__singleton=this),void 0!=ret?ret:void 0)}function Singleton(){return this.prototype.hasOwnProperty("__singleton")||(this.prototype.__singleton=null),Class}var _super=this.prototype;initializing=!0;var prototype=new this;initializing=!1;for(var name in prop){var g=prop.__lookupGetter__(name),s=prop.__lookupSetter__(name);g||s?(g&&prototype.__defineGetter__(name,g),s&&prototype.__defineSetter__(name,s)):prototype[name]="function"==typeof prop[name]&&"function"==typeof _super[name]&&fnTest.test(prop[name])?function(name,fn){return function(){var tmp=this._super;this._super=_super[name];var ret=fn.apply(this,arguments);return this._super=tmp,ret}}(name,prop[name]):prop[name]}return Class.prototype=prototype,Class.prototype.constructor=Class,Class.extend=arguments.callee,Class.singleton=Singleton,Class},Class}),gbx.define("gbx/debug",["gbx/bridge"],function(bridge){function argsToData(args,data,prefix){prefix&&(prefix+=".");for(var key in args)"object"==typeof args[key]?argsToData(args[key],data,prefix+key):data.append(prefix+key,args[key])}return{alertError:function(){window.onerror=function(msg,url,line,column,err){alert(msg+"\r"+url+"\r"+line+"\r"+column+"\r"+err)}},showFps:function(){Laya.Stat.show(0,0)},printLog:function(){gbx.log=function(){var args=Array.prototype.slice.call(arguments,0);console.log.apply(console,args)},gbx.assert=function(){var args=Array.prototype.slice.call(arguments,0);console.assert.apply(console,args)}},printLogSp:function(){gbx.log=function(){var args=Array.prototype.slice.call(arguments,0).map(function(v){return v instanceof Object?JSON.stringify(v):v}).join(" ");bridge.printLog(args)},gbx.assert=function(appear){var args=Array.prototype.slice.call(arguments,1).map(function(v){return v instanceof Object?JSON.stringify(v):v}).join(" ");if(appear)throw args}},postLog:function(){"FormData"in window&&(gbx.log=function(){var args=Array.prototype.slice.call(arguments,0),data=new FormData;argsToData(args,data,"");var xhr=new XMLHttpRequest;xhr.open("post","log"),xhr.send(data)},gbx.assert=function(condition){if(!condition){var args=Array.prototype.slice.call(arguments,1),data=new FormData;argsToData(args,data,"");var xhr=new XMLHttpRequest;xhr.open("post","assert"),xhr.send(data)}})}}}),gbx.define("gbx/device",function(){var exports={};return function(window,undefined){"use strict";var MODEL="model",NAME="name",TYPE="type",VENDOR="vendor",VERSION="version",MOBILE="mobile",TABLET="tablet",util={extend:function(regexes,extensions){var margedRegexes={};for(var i in regexes)extensions[i]&&extensions[i].length%2==0?margedRegexes[i]=extensions[i].concat(regexes[i]):margedRegexes[i]=regexes[i];return margedRegexes},has:function(str1,str2){return"string"==typeof str1&&-1!==str2.toLowerCase().indexOf(str1.toLowerCase())},lowerize:function(str){return str.toLowerCase()},major:function(version){return"string"==typeof version?version.split(".")[0]:void 0}},mapper={rgx:function(){for(var result,j,k,p,q,matches,match,i=0,args=arguments;i<args.length&&!matches;){var regex=args[i],props=args[i+1];if(void 0===result){result={};for(p in props)props.hasOwnProperty(p)&&("object"==typeof(q=props[p])?result[q[0]]=void 0:result[q]=void 0)}for(j=k=0;j<regex.length&&!matches;)if(matches=regex[j++].exec(this.getUA()))for(p=0;p<props.length;p++)match=matches[++k],"object"==typeof(q=props[p])&&q.length>0?2==q.length?"function"==typeof q[1]?result[q[0]]=q[1].call(this,match):result[q[0]]=q[1]:3==q.length?"function"!=typeof q[1]||q[1].exec&&q[1].test?result[q[0]]=match?match.replace(q[1],q[2]):void 0:result[q[0]]=match?q[1].call(this,match,q[2]):void 0:4==q.length&&(result[q[0]]=match?q[3].call(this,match.replace(q[1],q[2])):void 0):result[q]=match||void 0;i+=2}return result},str:function(str,map){for(var i in map)if("object"==typeof map[i]&&map[i].length>0){for(var j=0;j<map[i].length;j++)if(util.has(map[i][j],str))return"?"===i?void 0:i}else if(util.has(map[i],str))return"?"===i?void 0:i;return str}},maps={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},regexes={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[NAME,VERSION],[/(OPiOS)[\/\s]+([\w\.]+)/i],[[NAME,"Opera Mini"],VERSION],[/\s(opr)\/([\w\.]+)/i],[[NAME,"Opera"],VERSION],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs)\/([\w\.-]+)/i],[NAME,VERSION],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[NAME,"IE"],VERSION],[/(edge)\/((\d+)?[\w\.]+)/i],[NAME,VERSION],[/(yabrowser)\/([\w\.]+)/i],[[NAME,"Yandex"],VERSION],[/(comodo_dragon)\/([\w\.]+)/i],[[NAME,/_/g," "],VERSION],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(qqbrowser)[\/\s]?([\w\.]+)/i],[NAME,VERSION],[/(uc\s?browser)[\/\s]?([\w\.]+)/i,/ucweb.+(ucbrowser)[\/\s]?([\w\.]+)/i,/JUC.+(ucweb)[\/\s]?([\w\.]+)/i],[[NAME,"UCBrowser"],VERSION],[/(dolfin)\/([\w\.]+)/i],[[NAME,"Dolphin"],VERSION],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[NAME,"Chrome"],VERSION],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[VERSION,[NAME,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[VERSION,[NAME,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[VERSION,[NAME,"Facebook"]],[/fxios\/([\w\.-]+)/i],[VERSION,[NAME,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[VERSION,[NAME,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[VERSION,NAME],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[NAME,[VERSION,mapper.str,maps.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[NAME,VERSION],[/(navigator|netscape)\/([\w\.-]+)/i],[[NAME,"Netscape"],VERSION],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[NAME,VERSION]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",util.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",util.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",util.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[MODEL,VENDOR,[TYPE,TABLET]],[/applecoremedia\/[\w\.]+ \((ipad)/],[MODEL,[VENDOR,"Apple"],[TYPE,TABLET]],[/(apple\s{0,1}tv)/i],[[MODEL,"Apple TV"],[VENDOR,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[VENDOR,MODEL,[TYPE,TABLET]],[/(kf[A-z]+)\sbuild\/[\w\.]+.*silk\//i],[MODEL,[VENDOR,"Amazon"],[TYPE,TABLET]],[/(sd|kf)[0349hijorstuw]+\sbuild\/[\w\.]+.*silk\//i],[[MODEL,mapper.str,maps.device.amazon.model],[VENDOR,"Amazon"],[TYPE,MOBILE]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[MODEL,VENDOR,[TYPE,MOBILE]],[/\((ip[honed|\s\w*]+);/i],[MODEL,[VENDOR,"Apple"],[TYPE,MOBILE]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|huawei|meizu|motorola|polytron)[\s_-]?([\w-]+)*/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/\(bb10;\s(\w+)/i],[MODEL,[VENDOR,"BlackBerry"],[TYPE,MOBILE]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7)/i],[MODEL,[VENDOR,"Asus"],[TYPE,TABLET]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[VENDOR,"Sony"],[MODEL,"Xperia Tablet"],[TYPE,TABLET]],[/(?:sony)?(?:(?:(?:c|d)\d{4})|(?:so[-l].+))\sbuild\//i],[[VENDOR,"Sony"],[MODEL,"Xperia Phone"],[TYPE,MOBILE]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[VENDOR,MODEL,[TYPE,"console"]],[/android.+;\s(shield)\sbuild/i],[MODEL,[VENDOR,"Nvidia"],[TYPE,"console"]],[/(playstation\s[34portablevi]+)/i],[MODEL,[VENDOR,"Sony"],[TYPE,"console"]],[/(sprint\s(\w+))/i],[[VENDOR,mapper.str,maps.device.sprint.vendor],[MODEL,mapper.str,maps.device.sprint.model],[TYPE,MOBILE]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[VENDOR,MODEL,[TYPE,TABLET]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w+)*/i,/(alcatel|geeksphone|huawei|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]+)*/i],[VENDOR,[MODEL,/_/g," "],[TYPE,MOBILE]],[/(nexus\s9)/i],[MODEL,[VENDOR,"HTC"],[TYPE,TABLET]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[MODEL,[VENDOR,"Microsoft"],[TYPE,"console"]],[/(kin\.[onetw]{3})/i],[[MODEL,/\./g," "],[VENDOR,"Microsoft"],[TYPE,MOBILE]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?(:?\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w+)*/i,/(XT\d{3,4}) build\//i,/(nexus\s[6])/i],[MODEL,[VENDOR,"Motorola"],[TYPE,MOBILE]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[MODEL,[VENDOR,"Motorola"],[TYPE,TABLET]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n8000|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[VENDOR,"Samsung"],MODEL,[TYPE,TABLET]],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-n900))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)*/i,/sec-((sgh\w+))/i],[[VENDOR,"Samsung"],MODEL,[TYPE,MOBILE]],[/(samsung);smarttv/i],[VENDOR,MODEL,[TYPE,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[MODEL,[VENDOR,"Sharp"],[TYPE,"smarttv"]],[/sie-(\w+)*/i],[MODEL,[VENDOR,"Siemens"],[TYPE,MOBILE]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]+)*/i],[[VENDOR,"Nokia"],MODEL,[TYPE,MOBILE]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[MODEL,[VENDOR,"Acer"],[TYPE,TABLET]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[VENDOR,"LG"],MODEL,[TYPE,TABLET]],[/(lg) netcast\.tv/i],[VENDOR,MODEL,[TYPE,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w+)*/i],[MODEL,[VENDOR,"LG"],[TYPE,MOBILE]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[MODEL,[VENDOR,"Lenovo"],[TYPE,TABLET]],[/linux;.+((jolla));/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/((pebble))app\/[\d\.]+\s/i],[VENDOR,MODEL,[TYPE,"wearable"]],[/android.+;\s(glass)\s\d/i],[MODEL,[VENDOR,"Google"],[TYPE,"wearable"]],[/android.+(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus)?[\s_]*(?:\d\w)?)\s+build/i],[[MODEL,/_/g," "],[VENDOR,"Xiaomi"],[TYPE,MOBILE]],[/\s(tablet)[;\/\s]/i,/\s(mobile)[;\/\s]/i],[[TYPE,util.lowerize],VENDOR,MODEL]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[VERSION,[NAME,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[NAME,VERSION],[/rv\:([\w\.]+).*(gecko)/i],[VERSION,NAME]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[NAME,VERSION],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[NAME,[VERSION,mapper.str,maps.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[NAME,"Windows"],[VERSION,mapper.str,maps.os.windows.version]],[/\((bb)(10);/i],[[NAME,"BlackBerry"],VERSION],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[NAME,VERSION],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[NAME,"Symbian"],VERSION],[/\((series40);/i],[NAME],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[NAME,"Firefox OS"],VERSION],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[NAME,VERSION],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[NAME,"Chromium OS"],VERSION],[/(sunos)\s?([\w\.]+\d)*/i],[[NAME,"Solaris"],VERSION],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[NAME,VERSION],[/(ip[honead]+)(?:.*os\s([\w]+)*\slike\smac|;\sopera)/i],[[NAME,"iOS"],[VERSION,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[NAME,"Mac OS"],[VERSION,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[NAME,VERSION]]},UAParser=function(uastring,extensions){if(!(this instanceof UAParser))return new UAParser(uastring,extensions).getResult();var ua=uastring||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:""),rgxmap=extensions?util.extend(regexes,extensions):regexes;return this.getBrowser=function(){var browser=mapper.rgx.apply(this,rgxmap.browser);return browser.major=util.major(browser.version),browser},this.getCPU=function(){return mapper.rgx.apply(this,rgxmap.cpu)},this.getDevice=function(){return mapper.rgx.apply(this,rgxmap.device)},this.getEngine=function(){return mapper.rgx.apply(this,rgxmap.engine)},this.getOS=function(){return mapper.rgx.apply(this,rgxmap.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ua},this.setUA=function(uastring){return ua=uastring,this},this};UAParser.VERSION="0.7.10",UAParser.BROWSER={NAME:NAME,MAJOR:"major",VERSION:VERSION},UAParser.CPU={ARCHITECTURE:"architecture"},UAParser.DEVICE={MODEL:MODEL,VENDOR:VENDOR,TYPE:TYPE,CONSOLE:"console",MOBILE:MOBILE,SMARTTV:"smarttv",TABLET:TABLET,WEARABLE:"wearable",EMBEDDED:"embedded"},UAParser.ENGINE={NAME:NAME,VERSION:VERSION},UAParser.OS={NAME:NAME,VERSION:VERSION},void 0!==exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=UAParser),exports.UAParser=UAParser):"function"==typeof define&&define.amd?define("ua-parser-js",[],function(){return UAParser}):window.UAParser=UAParser;var $=window.jQuery||window.Zepto;if(void 0!==$){var parser=new UAParser;$.ua=parser.getResult(),$.ua.get=function(){return parser.getUA()},$.ua.set=function(uastring){parser.setUA(uastring);var result=parser.getResult();for(var prop in result)$.ua[prop]=result[prop]}}}("object"==typeof window?window:this),(new exports.UAParser).getResult()}),gbx.define("gbx/envir",function(){var info={url:"",domain:"",port:"",host:"",protocol:"",path:"",file:"",root:"",querystring:{}};return"location"in window&&(location.search.replace("?","").split("&").forEach(function(v){var m=v.split("=");2===m.length&&(info.querystring[m[0].toLowerCase()]=m[1])}),info.url=location.href,info.domain=location.hostname,info.port=location.port,info.host=location.host,info.protocol=location.protocol,info.path=location.pathname.split("/").slice(0,-1).join("/")+"/",info.file=location.pathname.split("/").pop(),info.root=info.protocol+"//"+info.host+info.path),{get queryString(){return info.querystring},get url(){return info.url},get host(){return info.host},get root(){return info.root}}}),gbx.define("gbx/hubs",function(){var slice=[].slice,subscriptions={},hubs=amplify={publish:function(topic){if("string"!=typeof topic)throw new Error("You must provide a valid topic to publish.");var topicSubscriptions,subscription,length,ret,args=slice.call(arguments,1),i=0;if(!subscriptions[topic])return!0;for(length=(topicSubscriptions=subscriptions[topic].slice()).length;i<length&&(subscription=topicSubscriptions[i],!1!==(ret=subscription.callback.apply(subscription.context,args)));i++);return!1!==ret},subscribe:function(topic,context,callback,priority){if("string"!=typeof topic)throw new Error("You must provide a valid topic to create a subscription.");3===arguments.length&&"number"==typeof callback&&(priority=callback,callback=context,context=null),2===arguments.length&&(callback=context,context=null),priority=priority||10;for(var added,topicIndex=0,topics=topic.split(/\s/),topicLength=topics.length;topicIndex<topicLength;topicIndex++){topic=topics[topicIndex],added=!1,subscriptions[topic]||(subscriptions[topic]=[]);for(var i=subscriptions[topic].length-1,subscriptionInfo={callback:callback,context:context,priority:priority};i>=0;i--)if(subscriptions[topic][i].priority<=priority){subscriptions[topic].splice(i+1,0,subscriptionInfo),added=!0;break}added||subscriptions[topic].unshift(subscriptionInfo)}return callback},unsubscribe:function(topic,context,callback){if("string"!=typeof topic)throw new Error("You must provide a valid topic to remove a subscription.");if(2===arguments.length&&(callback=context,context=null),subscriptions[topic])for(var length=subscriptions[topic].length,i=0;i<length;i++)subscriptions[topic][i].callback===callback&&(context&&subscriptions[topic][i].context!==context||(subscriptions[topic].splice(i,1),i--,length--))},removeTopic:function(topic){if("string"!=typeof topic)throw new Error("You must provide a valid topic to remove a topic.");subscriptions[topic]&&(subscriptions[topic].length=0,delete subscriptions[topic])},removeTopicRegexp:function(regexp){if(!(regexp instanceof RegExp))throw new Error("You must provide a valid regexp to remove a topic.");var count=0;for(var key in subscriptions)regexp.test(key)&&(hubs.removeTopic(key),count++);return count}};return hubs}),gbx.define("gbx/net/check_code",["gbx/cclass","gbx/net/messagecommand","gbx/net/messagecommand_des","gbx/net/errorcode","gbx/net/errorcode_des","gbx/hubs","comm/helper/room_mgr","comm/ui/top_message","comm/ui/top_confirm","conf/ui_locallization"],function(Class,CMD,CMD_DES,ERROR_CODE,ERROR_CODE_DES,hubs,roomMgr,topMessage,topConfirm,uiLocallization){return new(Class.extend({init:function(){this._super()},checkErrorCode:function(errorcode){switch(errorcode){case ERROR_CODE.BaccaratRoundNotEnd:return this.backToLastRound(),!0}return!1},backToLastRound:function(){function success(){roomMgr.joinRoomByRoomId(roomMgr.lastRoomId)}function fail(){}null==roomMgr.lastRoomId?topMessage.post(uiLocallization.lastRoundTip):topConfirm.ask(ERROR_CODE_DES[ERROR_CODE.BaccaratRoundNotEnd]+uiLocallization.backLastRound,this,success,fail)}}))}),gbx.define("gbx/net/connector",["gbx/hubs","gbx/net/messagecommand","gbx/net/messagecommand_des"],function(hubs,CMD,CMD_DES){var variables={host:"",port:0};return{setServer:function(host,port){variables.host=host,variables.port=port},connect:function(){function onConnected(){hubs.publish("global.net_connect.connected")}function onDisconnected(reason){hubs.publish("global.net_connect.disconnected",reason)}if(""==variables.host||0==variables.port)throw"must set rpc server config before connect.";return gtea.net.NetMsgMgr.connect(variables.host,variables.port,onConnected,onDisconnected)},requestToGame:function(command,content,caller,callback){gbx.log("%c[net] requestToGame "+command+" "+CMD_DES[command.toString()],"color:green"),gtea.rpc.requestToGame(command,content,caller,callback)},requestToRoom:function(command,content,caller,callback){gbx.log("%c[net] requestToRoom "+command+" "+CMD_DES[command.toString()],"color:green"),gtea.rpc.requestToRoom(command,content,caller,callback)},sendToRoom:function(command,content){gtea.rpc.sendToRoom(command,content)}}}),gbx.define("gbx/net/errorcode",{OK:0,DefaultError:1,CantOpenAddress:100,BadRequest:1e3,ServerException:1001,TimeOut:1002,Disconnect:1003,MessageError:1004,RequestParaError:1005,ServerDataError:1006,ServerClosed:1007,ServerOnlineCountMax:1008,ServerAllCountMax:1009,ServerConnectTimeout:1010,ConditionNotMeet:1100,UserAlreadyExist:1101,AccountOrPwdError:1102,PlayerNotCreate:1103,NameUsed:1104,NameLengthMax:1105,NameErrorCode:1106,GuildNameLengthMax:1107,GuildManifestoLengthMax:1108,BeBaned:1109,ContainSensitiveWord:1110,VersionLimit:1111,LackMoney:1112,RoomIsFull:1113,LackRobot:1114,RoomNotFount:1115,InfoNotExist:1116,NoneToGet:1117,PasswordError:1118,SMSCodeError:1119,SMSCodeTimeOut:1120,UserNotExist:1121,SMSCodeSendError:1122,PhoneUsed:1123,PlayerNotExist:1124,RoomNotExist:1125,PlayerExist:1126,OperationTooOften:1127,PhoneNotExist:1128,PlayerInRoom:1129,MailNotExist:1130,MailNoAward:1131,SBInRoom:1132,HTTPError:1133,BankLackMoney:1140,RebateRSParentIdError:1150,RebateRSChildIdError:1151,RebateRSHasParentId:1152,RebateRSChildDuplicate:1153,RebateRSMutualBinding:1154,RebateRSBindSelf:1155,FriendMax:1160,PeerOffline:1161,SVIPAlreadyExist:1170,SVIPAlreadyApplied:1171,SVIPPresentToSelf:1172,RechargeGetTransitFail:1200,RechargeQRFail:1201,RechargeServerClose:1202,RechargeHelp:1203,BaccaratBetMin:2001,BaccaratBetMax:2002,BaccaratBetAreaMax:2003,BaccaratBetBankerCantBet:2004,BaccaratSeatBeTaken:2005,BaccaratHasBankerAndFarmer:2006,BaccaratRoundNotEnd:2007,BaccaratHasNoSeat:2008,BaccaratHasBet:2009,BaccaratPlayerJoinAgin:2010,BaccaratDailySignError:2011,BaccaratTurntableUsed:2012,BaccaratBetPlayerMax:2013,BaccaratBindCardError:2014,ActivityCodeError:2400,ActivityCodeServerError:2401,ActivityCodeUsed:2402,ActivityOvertime:2403,ActivityNotCompleted:2404,ActivityUsed:2405,ActivityTimesMax:2406,ActivityHasOpenFund:2407,ActivityNotHasOpenFund:2408,ActivityCodeTypeUsed:2409,ActivityCodeOverTime:2410,PlatformLoginCheckTryError:2500,PlatformLoginCheckUrlError:2501,PlatformLoginCheckParError:2502,PlatformLoginCheckFail:2503,PlatformRechargeCheckFail:2504,PlatformOrderCheckFail:2505,PlatformRechargeSignFail:2506,PlatformRechargeLackMoney:2507,PlatformRechargePayFail:2508,PlatformRechargeCancelPayOK:2509,PlatformRechargeCancelPayFail:2510,PlatformRechargeQueryFail:2511,TaskNotFinish:3e3,TaskRewardRepeat:3001,TaskNoTask:3002,TaskNoReward:3003,LotteryNoDiamond:3010,ConvertNoLottery:3011,ConvertNoCost:3012,ConvertNoAward:3013,ConvertNoConv:3014,GMAuthenticationFail:5e3,GMServerError:5001,GMPlayerNotExist:5002,GMLackCurrency:5003,GMLevelOutOfRange:5004,GMAccountOrPwdError:5005,GMServerIdExist:5006,GMLoginServerError:5007,GMNoticeNotExist:5008,GMNoticeExist:5009,GMServerIdNotExist:5010,GMLackDate:5011,GMUserExist:5012,GMUserNotExist:5013,GMRechargeServerError:5014,GMFormatError:5015,GMGuildNotExist:5016,GMOrderLockAccountError:5017,GMOrderUnlockAccountError:5018,GMOrderStatusError:5019,GMSVIPAlreadyApplied:5020,GMSVIPRechargeRepeat:5021,GMSVIPRechargeMin:5022,GMAlreadyAdd:5023,GMXXX50200:50200,GMXXX50201:50201,GMXXX50211:50211,GMXXX50212:50212,GMXXX50222:50222,GMXXX50223:50223,GMXXX50233:50233,GMXXX50234:50234,GMXXX50235:50235,GMXXX50244:50244,GMXXX50245:50245,GMAgentBindError:51e3,AsyncResponse:1e4,RelayResponse:10001}),gbx.define("gbx/net/errorcode_des",{0:"成功",1:"默认错误",100:"无法连接地址",1e3:"错误的请求消息",1001:"服务器错误",1002:"超时",1003:"断开连接",1004:"消息错误",1005:"请求参数异常",1006:"服务器数据错误",1007:"停服",1008:"达到在线人数上限",1009:"达到服务器总人数上限",1010:"服务器连接超时",1100:"条件不满足",1101:"用户已存在",1102:"用户名或密码错",1103:"玩家未创建",1104:"名字已经存在",1105:"名字超过最大长度",1106:"名字有屏蔽字符",1107:"工会名字超过最大长度",1108:"工会宣言名字超过最大长度",1109:"被禁止登入",1110:"包含敏感字符",1111:"版本限制",1112:"筹码不足",1113:"房间已满",1114:"机器人不足",1115:"房间不存在",1116:"信息不存在",1117:"没有可以领取的",1118:"密码错误",1119:"短信验证码验证错误",1120:"短信验证码超时",1121:"用户不存在",1122:"验证码发送失败",1123:"电话号码已注册",1124:"玩家不存在",1125:"房间不存在",1126:"玩家已经存在",1127:"操作太频繁",1128:"电话号码没有注册",1129:"玩家正在房间内",1130:"邮件不存在",1131:"邮件奖励不存在或者已经领取",1132:"房间内有玩家",1133:"http请求错误",1140:"银行，筹码不足",1150:"上线ID为空",1151:"下线ID为空",1152:"已经绑定上线",1153:"已经此玩家下线",1154:"不能相互绑定",1155:"不能绑定自己",1160:"好友数量达到上限",1161:"对方不在线",1170:"玩家已经成为VIP",1171:"已经提出申请",1172:"不能赠送给自己",1200:"充值，获取transit失败",1201:"充值，获取二维码失败",1202:"充值服务器维护中",1203:"感谢您的配合",2001:"下注低于最小下注",2002:"下注高于最大下注",2003:"下注高于区域最大下注",2004:"庄家不能下注",2005:"座位上已经有玩家",2006:"不能同时压庄和闲",2007:"上一局未结束，不能进行此操作",2008:"没有入座，不能进行此操作",2009:"已经有人下注，不能飞牌",2010:"玩家再次进入房间",2011:"今日已签到",2012:"转盘已经使用",2013:"百家乐下注人数已满",2014:"银行卡绑定验证失败\n请确认您的信息填写正确\n目前只支持借记卡",2400:"兑换码不存",2401:"该服务器不能使用此兑换码",2402:"已经使用过此兑换码",2403:"活动超时",2404:"活动未完成",2405:"奖励已经领取",2406:"活动领取次数上限",2407:"已经购买过开服基金",2408:"没有购买开服基金",2409:"已经使用过同类型的兑换码",2410:"激活码超时",2500:"渠道验证在try模块中出错",2501:"渠道验证地址错误",2502:"渠道验证参数错误",2503:"渠道验证失败",2504:"充值验证失败",2505:"订单请求失败",2506:"生成sign失败",2507:"金额不足",2508:"支付失败",2509:"退款成功",2510:"退款失败",2511:"查询失败",5e3:"认证失败",5001:"服务器出错",5002:"玩家不存在",5003:"金额不足",5004:"等级超出范围",5005:"账号密码错误",5006:"服务器id已经存在",5007:"登入服务器操作失败",5008:"公告不存在",5009:"公告已经存在",5010:"服务器id不存在",5011:"缺少时间",5012:"用户已经存在",5013:"用户已经存在",5014:"充值服务器操作失败",5015:"输入格式错误",5016:"公会不存在",5017:"锁定账号不正确",5018:"解锁账号不正确",5019:"订单状态不能变更",5020:"已经提出了申请",5021:"订单号重复",5022:"低于最小金额",5023:"已经添加",50200:"缺少玩家ID",50201:"请填写提现金额",50211:"缺少玩家名字",50212:"您的提现金额将于24小时之内到账，请及时查收",50222:"缺少玩家名字或ID",50223:"不要着急，管理员正在卖命审核您的账号",50233:"请输入充值金额",50234:"您的账号已通过审核",50235:"请输入100的整数倍",50244:"您的申请未能通过管理员的审核，请提交正确的个人资料",50245:"超出最大充值金额",51e3:"下级代理绑定失败",1e4:"异步处理消息,服务器内部使用,协调GameServer",10001:"转发消息,服务器内部使用,协调GameServer"}),gbx.define("gbx/net/messagecommand",{LoginCommand:1,SetUserInfo:2,NetHeartbeatCommand:3,NetBeKickedCommand:4,GetUserInfoCommand:5,CreateRoom:10,JoinRoom:11,QuitRoom:12,GetRoomData:13,GetRoomDataHead:14,IdVerifyReq:15,GetLoginDiamond:16,SMSGetAuthCode:20,SMSAuthBind:21,MJBindAgent:25,MJDataChangeInform:26,SyncPlayerJoinRoom:110,SyncRingBegin:111,SyncError:112,SyncPlayerQuitRoom:113,SyncRingEnd:114,SyncPlayerReady:115,SyncRoomChat:116,SyncForceLeft:117,SyncHeartBeat:118,SyncHeartBeatAck:119,SyncPlayerLost:120,RebateQueryRS:200,RebateCreateRS:201,RebateRemoveRS:202,RebateUpdateData:203,RBaccaratGetAward:204,RBaccaratGetBaseInfo:205,GetMailList:300,OpenMail:301,DelMail:302,GetMailAward:303,GetAllMailAward:304,SetPlayerInfo:320,PlayerInfoChanged:321,GetMajiangCount:322,GetMJRoomCreatePrice:323,GetMJRechargeTable:324,GetFriendListCommand:350,SearchPlayerCommand:351,AddFriendReqCommand:352,AckFriendReq:353,InviteJoinRoomReq:354,InviteJoinRoomInform:355,AddFriendInform:356,AckFriendInform:357,DeleteFriendCommand:358,DeleteFriendInform:359,GetMsgTipCommand:370,GetNoticeCommand:371,BroadcastPost:372,BankTakeGold:400,BankSaveGold:401,BindCardNumber:402,UnbindCardNumber:403,GetGoldRank:500,RechargeNotify:600,Recharge:601,GetCash:602,QueryPlayerName:700,BaccaratGetAllRoomData:1e3,BaccaratSyncSendCard:1001,BaccaratBet:1002,BaccaratSyncOnBet:1003,BaccaratSyncUserPut:1004,BaccaratSyncGameResult:1005,BaccaratSeat:1006,BaccaratSyncOnSeat:1007,BaccaratApplyBanker:1008,BaccaratSyncBankerListChange:1009,BaccaratSyncOnBanker:1010,BaccaratChat:1011,BaccaratSyncOnChat:1012,BaccaratGetRoundRecord:1013,BaccaratRemoveBet:1014,BaccaratSyncOnRemoveBet:1015,BaccaratGetOldRoom:1016,BaccaratSyncBankerNotice:1017,BaccaratSyncSendCardJM:1018,BaccaratLookCardJM:1019,BaccaratSyncLookCardJM:1020,BaccaratSyncLookCardEndJM:1021,BaccaratChangeDirJM:1022,BaccaratSyncChangeDirJM:1023,BaccaratLookSoundJM:1024,BaccaratSyncLookSoundJM:1025,BaccaratSyncRoomEnd:1026,BaccaratFlyCardJM:1027,BaccaratSyncFlyCardJM:1028,BaccaratOpenCardJM:1029,BaccaratSyncShuffleCards:1030,BaccaratConfirmBet:1031,BaccaratSyncConfirmBet:1032,BaccaratAutoSeat:1033,BaccaratSyncOtherConfirmBet:1034,BaccaratSyncShuffleStart:1035,BaccaratShuffleEnd:1036,BaccaratSyncShuffleEnd:1037,BaccaratDismissRoom:1038,BaccaratDailySign:1039,BaccaratTurntable:1040,BaccaratMRBet:1041,BaccaratResMRBet:1042,BaccaratMRRemoveBet:1043,BaccaratResMRRemoveBet:1044,BaccaratGetAllMRData:1045,BaccaratSyncMRGameResult:1046,BaccaratSyncMRUserPut:1047,BaccaratSyncMRSendCard:1048,BaccaratMMRQuitRoom:1049,BaccaratMMRHeartbeat:1050,BaccaratGetAll3DRoomData:1051,BaccaratBuyIcon:1052,BaccaratRemoveBankCard:1053,BaccaratSVIPApply:1100,BaccaratPresent:1101,BaccaratGetPresentRank:1102,MaJiangGetOldRoom:1500,MatchSignUp:1600,MatchJoin:1601,MatchQuit:1602,GetMatchList:1603,MatchRoomRingEnd:1604,TipRoomDismissVote:2011,TipAction:2012,TipExchange:2013,TipLackChoice:2014,TipPeng:2015,TipGang:2016,TipHu:2017,TipTing:2018,TipDiscard:2019,TipFinish:2020,TipChi:2021,TipGaSelect:2022,ActionTurn:2041,ActDispatchCard:2042,ActExchange:2043,ActCardRefresh:2044,ActDice:2045,ActDiscard:2046,ActPeng:2047,ActGang:2048,ActHu:2049,ActDraw:2050,ActLackChoice:2051,ActShowHand:2052,ActCallTing:2053,ActMultiPao:2054,ActShowHua:2055,ActChi:2056,ActGaSelect:2057,ActHainanDraw:2058,ActBuHua:2059,ActGenpai:2060,PrimExchange:2100,PrimLackChoice:2102,PrimDiscard:2103,PrimKick:2107,PrimReady:2108,PrimChat:2109,PrimSort:2110,PrimIsMatchGhost:2111,PrimCallTing:2112,PrimDismiss:2113,PrimAutoSort:2114,PrimGa:2115,PrimChi:2116,SyncMJRoomCoin:2200,MJGetRoomRecord:2201,StartDismissVote:2202,SyncRoomDismissVote:2203,SyncTingList:2204,SyncHainanBaopai:2205,ActFangGui:2300}),gbx.define("gbx/net/messagecommand_des",{1:"登录",2:"设置用户信息",3:"心跳",4:"踢人下线",5:"获取用户信息",10:"开房间",11:"加入房间",12:"退出房间",13:"玩家在房间中确认就位，并获取当前房间状态数据(SyncRequest)",14:"加入房间之前，获取房间基本信息",15:"验证身份证请求",16:"获取每日登录钻石",20:"获取绑定手机时候的短信验证码",21:"使用验证码进行验证绑定",25:"麻将绑定代理",26:"麻将信息改变通知",110:"同步，玩家加入房间",111:"一轮开局，同步消息",112:"同步，错误消息",113:"同步，玩家退出房间",114:"同步，一轮结束",115:"同步(麻将)玩家准备确认状态",116:"房间聊天",117:"强迫玩家离开房间，比如踢人",118:"房间心跳消息",119:"房间心跳服务器回应",120:"玩家掉线消息",200:"返利，查询上下线",201:"返利，创建上下线",202:"返利，删除上下线",203:"返利，创建，修改用户返利信息",204:"返利，百家乐，领取返利",205:"返利，百家乐，基础信息",300:"获取邮件列表",301:"打开邮件",302:"删除邮件",303:"领取邮件附件",304:"领取所有邮件附件",320:"设置用户信息(头像、性别、昵称，等等)",321:"玩家信息改变通知",322:"获取麻将统计信息",323:"获取麻将创建房间价格表",324:"获取麻将充值物品表",350:"获取好友列表",351:"搜索用户",352:"添加好友请求",353:"确认好友申请(接收、拒绝)",354:"邀请加入房间的请求",355:"服务器向客户端推送的邀请加入房间消息",356:"被添加好友请求推送",357:"申请被对方通过，自己会收到通知",358:"删除好友",359:"删除好友的通知",370:"获取提示消息",371:"获取公告消息",372:"广播推送",400:"银行取钱",401:"银行存钱",402:"绑定银行卡",403:"解绑银行卡",500:"获取金币排行榜",600:"充值通知客户端",601:"充值",602:"提现",700:"查询玩家名字",1000:"百家乐，获取所有房间信息",1001:"百家乐，发牌",1002:"百家乐，下注(玩家操作)",1003:"百家乐，下注",1004:"百家乐，进入userPut状态",1005:"百家乐，每局结算",1006:"百家乐，座位(玩家操作)",1007:"百家乐，座位",1008:"百家乐，申请上庄(玩家操作)",1009:"百家乐，等待上庄列表变化",1010:"百家乐，庄家变化",1011:"百家乐，聊天(玩家操作)",1012:"百家乐，聊天",1013:"百家乐，获取每局记录",1014:"百家乐，撤销下注(玩家操作)",1015:"百家乐，撤销下注",1016:"百家乐，获取没结算的老房间",1017:"百家乐，上下庄反馈",1018:"百家乐，竞咪厅发牌",1019:"百家乐，竞咪厅咪牌(玩家操作)",1020:"百家乐，竞咪厅咪牌",1021:"百家乐，竞咪厅咪牌阶段结束",1022:"百家乐，竞咪厅变换咪牌方向(玩家操作)",1023:"百家乐，竞咪厅变换咪牌方向",1024:"百家乐，竞咪厅咪牌声音(玩家操作)",1025:"百家乐，竞咪厅咪牌声音",1026:"百家乐，房间关闭通知",1027:"百家乐，竞咪厅飞牌(玩家操作)",1028:"百家乐，竞咪厅飞牌",1029:"百家乐，竞咪厅翻牌(玩家操作)",1030:"百家乐，洗牌",1031:"百家乐，下注确认(玩家操作)",1032:"百家乐，下注确认",1033:"百家乐，自动上座(玩家操作)",1034:"百家乐，有人确认下注",1035:"百家乐，洗牌开始",1036:"百家乐，洗牌结束(玩家操作)",1037:"百家乐，洗牌结束",1038:"百家乐，解散房间",1039:"百家乐，签到",1040:"百家乐，转盘",1041:"百家乐，多玩厅下注(玩家操作)",1042:"百家乐，多玩厅下注",1043:"百家乐，多玩厅撤销下注(玩家操作)",1044:"百家乐，多玩厅撤销下注",1045:"百家乐，获取所有多玩厅房间信息",1046:"百家乐，多玩厅房间结果",1047:"百家乐，多玩厅进入userPut状态",1048:"百家乐，多玩厅发牌",1049:"百家乐，退出多玩厅",1050:"百家乐，多玩厅心跳",1051:"百家乐，获取所有3D厅房间信息",1052:"百家乐，购买icon",1053:"百家乐，删除绑定银行卡",1100:"百家乐，申请SVIP",1101:"百家乐，赠送",1102:"败家额，获取赠送排行榜",1500:"麻将，获取正在玩的房间,掉线玩家重新进房间使用",1600:"报名比赛",1601:"加入比赛",1602:"退出比赛",1603:"获取比赛信息",1604:"比赛房间一轮结束",2011:"提示解散房间选举开始",2012:"提示操作，等待输入开始",2013:"换牌提示",2014:"提示选缺",2015:"提示碰",2016:"提示杠",2017:"提示胡",2018:"听牌提示",2019:"提示出牌",2020:"等待输入结束",2021:"吃牌提示",2022:"提示选嘎",2041:"动作方位指示和时间倒数",2042:"发牌",2043:"换牌动作",2044:"刷新(手牌、面板、胡牌列表)",2045:"掷骰子",2046:"出牌动作",2047:"碰",2048:"杠",2049:"胡",2050:"摸牌",2051:"选缺",2052:"牌局结束，亮牌",2053:"报叫动作",2054:"一炮多响",2055:"海南麻将，将手牌中的花牌亮到面板中",2056:"海南麻将，吃",2057:"选嘎",2058:"海南麻将摸牌，可能要补花，要一次摸多张",2059:"补花到手牌",2060:"海南麻将，跟牌",2100:"换牌选牌",2102:"选缺输入",2103:"出牌输入",2107:"房主踢人",2108:"确认准备",2109:"聊天输入",2110:"聊天输入",2111:"是否显示贴鬼碰杠",2112:"报叫",2113:"投票确认房间解散",2114:"恢复自动齐牌",2115:"海南麻将，选嘎",2116:"海南麻将，吃牌",2200:"麻将，同步刷新所有人的房间币",2201:"获取麻将房间记录",2202:"发起解散房间投票",2203:"解散房间投票结果同步",2204:"麻将,向玩家同步当前听牌状态",2205:"海南麻将三道牌，四道牌消息",2300:"翻鬼"}),gbx.define("gbx/net/msg_receiver",["gbx/net/messagecommand","gbx/net/messagecommand_des","gbx/net/errorcode","gbx/net/errorcode_des","gbx/net/check_code","gbx/hubs","comm/ui/top_message","game/baccarat/net/msg_receiver","comm/net/msg_receiver"],function(CMD,CMD_DES,ERROR_CODE,ERROR_CODE_DES,checkErrorCode,hubs,topMessage,baccaratMsgReceiver,systemReceiver){var msgReceiver={_handlerMap:{},init:function(){this.registerHandler(CMD.BaccaratSyncSendCard,baccaratMsgReceiver,baccaratMsgReceiver.onSendCard),this.registerHandler(CMD.BaccaratSyncOnBet,baccaratMsgReceiver,baccaratMsgReceiver.onUserBet),this.registerHandler(CMD.BaccaratSyncOnRemoveBet,baccaratMsgReceiver,baccaratMsgReceiver.onRemoveBet),this.registerHandler(CMD.BaccaratSyncUserPut,baccaratMsgReceiver,baccaratMsgReceiver.onNewRound),this.registerHandler(CMD.BaccaratSyncGameResult,baccaratMsgReceiver,baccaratMsgReceiver.onRoundResult),this.registerHandler(CMD.BaccaratSyncOnSeat,baccaratMsgReceiver,baccaratMsgReceiver.onShowedSeatChanged),this.registerHandler(CMD.BaccaratSyncOnBanker,baccaratMsgReceiver,baccaratMsgReceiver.onDealerChanged),this.registerHandler(CMD.BaccaratSyncBankerListChange,baccaratMsgReceiver,baccaratMsgReceiver.onDealerListChanged),this.registerHandler(CMD.BaccaratSyncBankerNotice,baccaratMsgReceiver,baccaratMsgReceiver.onDealerNotice),this.registerHandler(CMD.SyncPlayerJoinRoom,baccaratMsgReceiver,baccaratMsgReceiver.onPlayerJoinRoom),this.registerHandler(CMD.SyncPlayerQuitRoom,baccaratMsgReceiver,baccaratMsgReceiver.onPlayerQuitRoom),this.registerHandler(CMD.BaccaratSyncOnChat,baccaratMsgReceiver,baccaratMsgReceiver.onChat),this.registerHandler(CMD.BaccaratSyncSendCardJM,baccaratMsgReceiver,baccaratMsgReceiver.onSendCardJM),this.registerHandler(CMD.BaccaratSyncLookCardJM,baccaratMsgReceiver,baccaratMsgReceiver.onUpdateCardFlipProcess),this.registerHandler(CMD.BaccaratSyncLookCardEndJM,baccaratMsgReceiver,baccaratMsgReceiver.onSyncLookCardEndJM),this.registerHandler(CMD.BaccaratSyncChangeDirJM,baccaratMsgReceiver,baccaratMsgReceiver.onSyncChangeDirJM),this.registerHandler(CMD.BaccaratSyncLookSoundJM,baccaratMsgReceiver,baccaratMsgReceiver.onSyncMiLookSound),this.registerHandler(CMD.BaccaratSyncShuffleStart,baccaratMsgReceiver,baccaratMsgReceiver.onShuffleStart),this.registerHandler(CMD.BaccaratSyncShuffleEnd,baccaratMsgReceiver,baccaratMsgReceiver.onSyncShuffleEnd),this.registerHandler(CMD.BaccaratSyncConfirmBet,baccaratMsgReceiver,baccaratMsgReceiver.onSyncConfirmBet),this.registerHandler(CMD.BaccaratSyncOtherConfirmBet,baccaratMsgReceiver,baccaratMsgReceiver.onSyncOtherConfirmBet),this.registerHandler(CMD.BaccaratSyncFlyCardJM,baccaratMsgReceiver,baccaratMsgReceiver.onSyncFlyCardJM),this.registerHandler(CMD.PlayerInfoChanged,systemReceiver,systemReceiver.onPlayerInfoChange),this.registerHandler(CMD.RechargeNotify,systemReceiver,systemReceiver.onPay),this.registerHandler(CMD.SyncHeartBeatAck,systemReceiver,systemReceiver.onHeartbeat),this.registerHandler(CMD.NetBeKickedCommand,systemReceiver,systemReceiver.onKicked),this.registerHandler(CMD.BaccaratSyncRoomEnd,baccaratMsgReceiver,baccaratMsgReceiver.vipRoomEnd),this.registerHandler(CMD.BroadcastPost,systemReceiver,systemReceiver.onBroadcast)},registerHandler:function(command,caller,handler){this._handlerMap[command]={caller:caller,handler:handler}},checkMessage:function(message){if(message.cmd!=CMD.SyncHeartBeatAck&&gbx.log("%c[net] receive message "+message.cmd+" "+CMD_DES[message.cmd.toString()],"color:blue"),message.errorCode==ERROR_CODE.Disconnect)return hubs.publish("global.net_connect.disconnected",gtea.net.DISCONNECT_REASON_COMMAND),!1;if(0!=message.errorCode)return checkErrorCode.checkErrorCode(message.errorCode)||topMessage.post(ERROR_CODE_DES[message.errorCode.toString()]),!1;if(message.cmd==CMD.SyncError){var msgData=gtea.protobuf.decode("ErrorMessage",message.data);return topMessage.post(ERROR_CODE_DES[msgData.errorCode.toString()]),!1}return!0},onMessage:function(command,data){if(command in this._handlerMap){var handlerInfo=this._handlerMap[command];handlerInfo.handler.call(handlerInfo.caller,command,data)}else gbx.log("%c[net] receive message has not handler:"+command,"color:blue")}};return msgReceiver.init(),gtea.net.NetMsgMgr.setMsgReceiver(msgReceiver),msgReceiver}),gbx.define("gbx/net/net_tool",["comm/ui/top_message","conf/locallization","gbx/net/errorcode","gbx/net/errorcode_des","conf/platform"],function(topMessage,Locallization,ERROR_CODE,ERROR_CODE_DES,Platform){var gamePaths={getServerInfo:"http://login.mahjongonline888.com:35524/rest/user/serverInfoG"};return{createHttpRequest:function(path,sendMsg,caller,funSuccess,funFail,showError){var request=new XMLHttpRequest;request.responseType="arraybuffer",request.open("POST",path,!0),request.onreadystatechange=function(){if(4==request.readyState)if(200==request.status){var res=request.response;funSuccess&&funSuccess.call(caller,res)}else void 0===showError?topMessage.post(Locallization.requestError+" status "+request.status):showError&&topMessage.post(Locallization.requestError+" status "+request.status),funFail&&funFail.call(caller,request.status)},request.send(sendMsg)},createJsonHttpRequest:function(path,sendMsg,caller,funSuccess,funFail,showStatus){var request=new XMLHttpRequest;request.open("POST",path,!0),request.onreadystatechange=function(){if(4==request.readyState)if(200==request.status){var res=request.response;funSuccess&&funSuccess.call(caller,res)}else(null==showStatus||void 0==showStatus||showStatus)&&topMessage.post(Locallization.requestError+" status "+request.status),funFail&&funFail.call(caller,request.status)},request.send(sendMsg)},createJsonHttpRequestGet:function(path,sendMsg,caller,funSuccess,funFail){var request=new XMLHttpRequest;request.open("GET",path,!0),request.onreadystatechange=function(){if(4==request.readyState)if(200==request.status){var res=request.response;funSuccess&&funSuccess.call(caller,res)}else topMessage.post(Locallization.requestError+" status "+request.status),funFail&&funFail.call(caller,request.status)},request.send()},pushPath:function(key,value){gamePaths[key]=value},getPathByKey:function(key){return gamePaths[key]},getSalt:function(account,caller,successEv,failEv,wrapCaller,wrapSuccess,warpFail){var sendMsg=gtea.protobuf.encode("GetSaltReq",{account:account,platformId:Platform.platformId});this.createHttpRequest(this.getPathByKey("getSaltUrl"),sendMsg,this,function(data){var ret=gtea.protobuf.decode("GetSaltResp",data);ret.result==ERROR_CODE.OK?(successEv&&successEv.call(caller,ret),wrapSuccess&&wrapSuccess.call(wrapCaller,ret)):(failEv&&failEv.call(caller,ret.result),warpFail&&warpFail.call(wrapCaller,ERROR_CODE_DES[ret.result]))},function(status){failEv&&failEv.call(caller,status),warpFail&&warpFail.call(wrapCaller,Locallization.saltCodeError+" status "+status)})},getVerifyCode:function(sendMsg,caller,successEv,failEv){this.createHttpRequest(this.getPathByKey("smsGetAuthCodeUrl"),sendMsg,this,function(data){var ret=gtea.protobuf.decode("SMSGetAuthCodeResp",data);ret.result==ERROR_CODE.OK?successEv&&successEv.call(caller,ret.leftTime):failEv&&failEv.call(caller,null,ret.result)},function(status){failEv&&failEv.call(caller,status,0)})},createObjFromProto:function(proto){var obj={},proNames=Object.getOwnPropertyNames(proto);for(var i in proNames){var proName=proNames[i];obj[proName]=proto[proName]}return obj}}}),gbx.define("gbx/pool",function(){function ObjectPool(Cls){this.cls=Cls,this.metrics={},this._clearMetrics(),this._objpool=[]}return ObjectPool.prototype.alloc=function(){var obj;return 0==this._objpool.length?(obj=new this.cls,this.metrics.totalalloc++):(obj=this._objpool.pop(),this.metrics.totalfree--),obj},ObjectPool.prototype.free=function(obj){this._objpool.push(obj),this.metrics.totalfree++},ObjectPool.prototype.collect=function(cls){this._objpool=[];var inUse=this.metrics.totalalloc-this.metrics.totalfree;this._clearMetrics(inUse)},ObjectPool.prototype._clearMetrics=function(allocated){this.metrics.totalalloc=allocated||0,this.metrics.totalfree=0},ObjectPool}),gbx.define("gbx/render/display/animation",["gbx/render/display/sprite","gbx/render/loader","gbx/render/texture"],function(Sprite,loader,texture){return Sprite.extend({ctor:function(url){this.__node=new laya.display.Animation},get count(){return this.__node.count},get index(){return this.__node.index},set index(v){this.__node.index=v},get interval(){return this.__node.interval},set interval(v){this.__node.interval=v},get loop(){return this.__node.loop},set loop(v){this.__node.loop=v},clear:function(){this.__node.clear()},loadAtlas:function(url){this.__node.loadAtlas(url)},loadImages:function(urls,cacheName){if(texture.usingTexturePack){if(!this.__node._setFramesFromCache(cacheName)){for(var arr=[],i=0;i<urls.length;i++){var t=texture.getFromPackedTexture(urls[i]),g=new laya.display.Graphics;g.drawTexture(t.tex,t.sx,t.sy),arr.push(g)}this.__node.frames=arr,cacheName&&(laya.display.Animation.framesMap[cacheName]=arr)}}else this.__node.loadImages(urls)},play:function(start,loop,name){this.__node.play(start,loop,name)},stop:function(){this.__node.stop()},onComplete:function(context,handler,args){this.on("complete",context,handler,args)},setFrames:function(url,cols,rows,cacheName){void 0==rows&&(rows=1);var arr=[];if(texture.usingTexturePack){var fw=(tex=texture.getFromPackedTexture(url)).sw/cols,fh=tex.sh/rows,fx=tex.sx,fy=tex.sy;tex=tex.tex}else{var tex=loader.get(url);fw=tex.sourceWidth/cols,fh=tex.sourceHeight/rows,fx=0,fy=0}for(var y=0;y<rows;y++)for(var x=0;x<cols;x++){var t=texture.createFromTexture(tex,x*fw,y*fh,fw,fh),g=new laya.display.Graphics;g.drawTexture(t,fx,fy),arr.push(g)}this.__node.frames=arr,cacheName&&(laya.display.Animation.framesMap[cacheName]=arr)}})}),gbx.define("gbx/render/display/node",["gbx/cclass"],function(Class){var hookDestroy=laya.display.Node.prototype.destroy;return laya.display.Node.prototype.destroy=function(){"__sealer"in this&&(this.__sealer.end(),delete this.__sealer.__node,delete this.__sealer),hookDestroy.apply(this,Array.prototype.slice.call(arguments,0))},Class.extend({ctor:function(){this.__node=new laya.display.Node},init:function(){this.ctor.apply(this,Array.prototype.slice.call(arguments,0)),this.__node.__sealer=this,this._super()},get destroyed(){return!this.__node||this.__node.destroyed},get displayInStage(){return this.__node.displayInStage},get name(){return this.__node.name},set name(v){this.__node.name=v},get numChildren(){return this.__node.numChildren},get parent(){var _p=this.__node.parent;return _p?_p.__sealer:null},get timer(){return this.__node.timer},set timer(v){this.__node.timer=v},addChild:function(child){this.__node.addChild(child.__node)},addChildAt:function(node,index){return this.__node.addChildAt(node.__node,index).__sealer},addChildren:function(){var relist=Array.prototype.slice.call(arguments,0);this.addChildrenList(relist)},ask:function(type,value){return this.__node.ask(type,value)},clearTimer:function(caller,method){this.__node.clearTimer(caller,method)},contains:function(node){return this.__node.contains(node.__node)},destroy:function(destroyChild){this.__node.destroy(destroyChild)},destroyChildren:function(){this.__node.destroyChildren()},frameLoop:function(delay,caller,method,args,coverBefore){this.__node.frameLoop(delay,caller,method,args,coverBefore)},frameOnce:function(delay,caller,method,args,coverBefore){this.__node.frameOnce(delay,caller,method,args,coverBefore)},getChildAt:function(index){return this.__node.getChildAt(index).__sealer},getChildByName:function(){var names=Array.prototype.slice.call(arguments,0),c=this.__node.getChildByName(names.shift());return c?names.length?c.__sealer.getChildByName.apply(c.__sealer,names):c.__sealer:null},getChildIndex:function(node){return this.__node.getChildIndex(node.__node)},getPrivates:function(){return this.__node.getPrivates()},removeChild:function(node){return this.__node.removeChild(node.__node).__sealer},removeChildAt:function(index){return this.__node.removeChildAt(index).__sealer},removeChildByName:function(name){return this.__node.removeChildByName(name).__sealer},removeChildren:function(beginIndex,endIndex){return this.__node.removeChildren(beginIndex,endIndex).__sealer},removeSelf:function(){return this.__node.removeSelf().__sealer},replaceChild:function(newNode,oldNode){return this.__node.replaceChild(newNode,oldNode).__sealer},setChildIndex:function(node,index){return this.__node.setChildIndex(node,index).__sealer},timerLoop:function(delay,caller,method,args,coverBefore){void 0!=document.gamePauseInGame&&document.gamePauseInGame||this.__node.timerLoop(delay,caller,method,args,coverBefore)},timerOnce:function(delay,caller,method,args,coverBefore){void 0!=document.gamePauseInGame&&document.gamePauseInGame||this.__node.timerOnce(delay,caller,method,args,coverBefore)},event:function(type,data){return this.__node.event(type,data).__sealer},hasListener:function(type){return this.__node.hasListener(type)},isMouseEvent:function(type){return this.__node.isMouseEvent(type)},off:function(type,caller,listener,onceOnly){return this.__node.off(type,caller,listener,onceOnly).__sealer},offAll:function(type){return this.__node.offAll(type).__sealer},on:function(type,caller,listener,args){return this.__node.on(type,caller,listener,args).__sealer},once:function(type,caller,listener,args){return this.__node.once(type,caller,listener,args).__sealer},get EVENT(){return laya.events.Event},callLater:function(method,args){Laya.timer.callLater(this,method,args)},addChildrenList:function(list){for(var i=0;i<list.length;i++)this.addChild(list[i])},getAllChildren:function(){for(var max=this.__node.numChildren,list=[],i=0;i<max;i++){var child=this.__node.getChildAt(i);child.__sealer&&list.push(child.__sealer)}return list},eachChildrenList:function(iterator,context){var list=this.getAllChildren();context=context||this;for(var i=0;i<list.length;i++)iterator.call(context,list[i])},addToStage:function(zOrder){this.__node!=Laya.stage&&(void 0==zOrder&&(zOrder=1),Laya.stage.addChild(this.__node),this.__node.zOrder=zOrder)},removeFromStage:function(){this.__node!=Laya.stage&&Laya.stage.removeChild(this.__node)}})}),gbx.define("gbx/render/display/sprite",["gbx/render/display/node","gbx/render/tween","gbx/render/texture"],function(Node,Tween,texture){return Node.extend({ctor:function(url){this.__node=new laya.display.Sprite(url)},get alpha(){return this.__node.alpha},set alpha(v){this.__node.alpha=v},get autoSize(){return this.__node.autoSize},set autoSize(v){this.__node.autoSize=v},get blendMode(){return this.__node.blendMode},set blendMode(v){this.__node.blendMode=v},get cacheAs(){return this.__node.cacheAs},set cacheAs(v){this.__node.cacheAs=v},get cacheAsBitmap(){return this.__node.cacheAsBitmap},set cacheAsBitmap(v){this.__node.cacheAsBitmap=v},get enableRenderMerge(){return this.__node.enableRenderMerge},set enableRenderMerge(v){this.__node.enableRenderMerge=v},get graphics(){return this.__node.graphics},set graphics(v){this.__node.graphics=v},get height(){return this.__node.height},set height(v){this.__node.height=v},get hitArea(){return this.__node.hitArea},set hitArea(v){this.__node.hitArea=v},get mask(){return this.__node.mask?this.__node.mask.__sealer:null},set mask(v){this.__node.mask=v.__node},get mouseEnabled(){return this.__node.mouseEnabled},set mouseEnabled(v){this.__node.mouseEnabled=v},get mouseThrough(){return this.__node.mouseThrough},set mouseThrough(v){this.__node.mouseThrough=v},get mouseX(){return this.__node.mouseX},get mouseY(){return this.__node.mouseY},get optimizeFloat(){return this.__node.optimizeFloat},set optimizeFloat(v){this.__node.optimizeFloat=v},get pivotX(){return this.__node.pivotX},set pivotX(v){this.__node.pivotX=v},get pivotY(){return this.__node.pivotY},set pivotY(v){this.__node.pivotY=v},get rotation(){return this.__node.rotation},set rotation(v){this.__node.rotation=v},get scaleX(){return this.__node.scaleX},set scaleX(v){this.__node.scaleX=v},get scaleY(){return this.__node.scaleY},set scaleY(v){this.__node.scaleY=v},get scrollRect(){return this.__node.scrollRect},set scrollRect(v){this.__node.scrollRect=v},get skewX(){return this.__node.skewX},set skewX(v){this.__node.skewX=v},get skewY(){return this.__node.skewY},set skewY(v){this.__node.skewY=v},get stage(){return this.__node.stage},get staticCache(){return this.__node.staticCache},set staticCache(v){this.__node.staticCache=v},get transform(){return this.__node.transform},set transform(v){this.__node.transform=v},get viewHeight(){return this.__node.viewHeight},get viewWidth(){return this.__node.viewWidth},get visible(){return this.__node.visible},set visible(v){this.__node.visible=v},get width(){return this.__node.width},set width(v){this.__node.width=v},get x(){return this.__node.x},set x(v){this.__node.x=v},get y(){return this.__node.y},set y(v){this.__node.y=v},get zOrder(){return this.__node.zOrder},set zOrder(v){this.__node.zOrder=v},applyFilters:function(){this.__node.applyFilters()},ask:function(type,value){return this.__node.ask(type,value)},boundPointsToParent:function(ifRotate){return this.__node.boundPointsToParent(ifRotate)},childChanged:function(child){this.__node.childChanged(child.__node)},customRender:function(context,x,y){this.__node.customRender(context,x,y)},drawToCanvas:function(canvasWidth,canvasHeight,offsetX,offsetY){return this.__node.drawToCanvas(canvasWidth,canvasHeight,offsetX,offsetY)},fromParentPoint:function(point){return this.__node.fromParentPoint(point)},getBounds:function(){return this.__node.getBounds()},getGraphicBounds:function(){return this.__node.getGraphicBounds()},getMousePoint:function(){return this.__node.getMousePoint()},getSelfBounds:function(){return this.__node.getSelfBounds()},globalToLocal:function(point,createNewPoint){return this.__node.globalToLocal(point,createNewPoint)},hitTestPoint:function(x,y){return this.__node.hitTestPoint(x,y)},destroyChildren:function(){return this.__node.destroyChildren()},isRepaint:function(){return this.__node.isRepaint()},loadImage:function(url,x,y,width,height,complete){return this.__node.graphics.clear(),this.__node.loadImage(url,x,y,width,height,complete),this},localToGlobal:function(point,createNewPoint){return this.__node.localToGlobal(point,createNewPoint)},parentRepaint:function(child){this.__node.parentRepaint(child.__node)},pivot:function(x,y){return this.__node.pivot(x,y),this},pos:function(x,y){return this.__node.pos(x,y),this},reCache:function(){this.__node.reCache()},render:function(context,x,y){this.__node.render(context,x,y)},repaint:function(){this.__node.repaint()},scale:function(scaleX,scaleY){return void 0==scaleY&&(scaleY=scaleX),this.__node.scale(scaleX,scaleY),this},setBounds:function(bound){this.__node.setBounds(bound)},setStyle:function(value){this.__node.setStyle(value)},setValue:function(name,value){this.__node.setValue(name,value)},size:function(width,height){return this.__node.size(width,height),this},skew:function(skewX,skewY){return this.__node.skew(skewX,skewY),this},startDrag:function(area,hasInertia,elasticDistance,elasticBackTime,data,disableMouseEvent){this.__node.startDrag(area,hasInertia,elasticDistance,elasticBackTime,data,disableMouseEvent)},stopDrag:function(){this.__node.stopDrag()},toParentPoint:function(point){return this.__node.toParentPoint(point)},updateOrder:function(){this.__node.updateOrder()},pivotToCenter:function(){this.pivotX=this.width/2,this.pivotY=this.height/2},tweenTo:function(props,duration,timingFunction,context,complete,args,delay){return Tween.to(this,props,duration,timingFunction,context,complete,args,delay),this},tweenFrom:function(props,duration,timingFunction,context,complete,args,delay){return Tween.from(this,props,duration,timingFunction,context,complete,args,delay),this},tweenCancel:function(){return Tween.clearAll(this),this},addFilter:function(filter){var a=this.__node.filters,n=filter.__node;if(a instanceof Array){for(var i=0;i<a.length;i++)if(a[0]==n)return;a.push(n)}else this.__node.filters=[n]},removeFilter:function(filter){var a=this.__node.filters,n=filter.__node;if(a instanceof Array)for(var i=0;i<a.length;i++)if(a[0]==n)return a.splice(i,1),!0;return!1},setImage:function(image){if(texture.usingTexturePack){this.__node.graphics.clear();var g=texture.getFromPackedTexture(image);this.__node.graphics.drawTexture(g.tex,g.sx,g.sy),this.__node.size(g.sw,g.sh)}else this.loadImage(image)},end:function(destroyChild){this.tweenCancel()._super(destroyChild)}})}),gbx.define("gbx/render/display/text",["gbx/render/display/sprite"],function(Sprite){var Text=Sprite.extend({ctor:function(){this.__node=new laya.display.Text},get align(){return this.__node.align},set align(v){this.__node.align=v},get alpha(){return this.__node.alpha},set alpha(v){this.__node.alpha=v},get type(){return this.__node.type},set type(v){this.__node.type=v},get filters(){return this.__node.filters},set filters(v){return this.__node.filters=v},get bgColor(){return this.__node.bgColor},set bgColor(v){this.__node.bgColor=v},get bold(){return this.__node.bold},set bold(v){this.__node.bold=v},get borderColor(){return this.__node.borderColor},set borderColor(v){this.__node.borderColor=v},get color(){return this.__node.color},set color(v){this.__node.color=v},get font(){return this.__node.font},set font(v){this.__node.font=v},get fontSize(){return this.__node.fontSize},set fontSize(v){this.__node.fontSize=v},get italic(){return this.__node.italic},set italic(v){this.__node.italic=v},get leading(){return this.__node.leading},set leading(v){this.__node.leading=v},get maxScrollX(){return this.__node.maxScrollX},get maxScrollY(){return this.__node.maxScrollY},get overflow(){return this.__node.overflow},set overflow(v){this.__node.overflow=v},get scrollX(){return this.__node.scrollX},set scrollX(v){this.__node.scrollX=v},get scrollY(){return this.__node.scrollY},set scrollY(v){this.__node.scrollY=v},get padding(){return this.__node.padding},set padding(v){this.__node.padding=v},get stroke(){return this.__node.stroke},set stroke(v){this.__node.stroke=v},get strokeColor(){return this.__node.strokeColor},set strokeColor(v){this.__node.strokeColor=v},get text(){return this.__node.text},set text(v){this.__node.text=v},get textHeight(){return this.__node.textHeight},get textWidth(){return this.__node.textWidth},get valign(){return this.__node.valign},set valign(v){this.__node.valign=v},get wordWrap(){return this.__node.wordWrap},set wordWrap(v){this.__node.wordWrap=v},get width(){return this.__node.width},set width(v){this.__node.width=v},get height(){return this.__node.height},set height(v){this.__node.height=v},changeText:function(text){this.__node.changeText(text)}}),overflowSettingList={get HIDDEN(){return laya.display.Text.HIDDEN},get SCROLL(){return laya.display.Text.SCROLL},get VISIBLE(){return laya.display.Text.VISIBLE}};return Object.defineProperty(Text,"OVERFLOW",{get:function(){return overflowSettingList}}),Text}),gbx.define("gbx/render/filter/color",["gbx/render/filter/filter"],function(Filter){return Filter.extend({ctor:function(mat){void 0==mat&&(mat=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),this.__node=new laya.filters.ColorFilter(mat)},setColorRGB:function(r,g,b){this.setMatrix([r/255,0,0,0,0,g/255,0,0,0,0,b/255,0,0,0,0,1])},setColorHex:function(hex){if(6===(hex=hex.replace("#","")).length){var r=parseInt(hex.slice(0,2),16),g=parseInt(hex.slice(2,4),16),b=parseInt(hex.slice(4,6),16);this.setColorRGB(r,g,b)}},setMatrix:function(mat){for(var t=new Float32Array(16),i=0;i<t.length;i++)t[i]=mat[i];this.__node._mat=t},getMatrix:function(){return this.__node._mat},setAlpha:function(alpha){for(var t=new Float32Array(4),i=0;i<t.length;i++)t[i]=alpha[i];this.__node._alpha=t},getAlpha:function(){return this.__node._alpha},resetMatrix:function(){this.setMatrix([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this.setAlpha([0,0,0,0])}})}),gbx.define("gbx/render/filter/filter",["gbx/class"],function(Class){return Class.extend({ctor:function(){this.__node=new laya.filters.Filter},init:function(){this.ctor.apply(this,Array.prototype.slice.call(arguments,0)),this.__node.__sealer=this},end:function(){this.__node.__sealer=null,delete this.__node.__sealer,this.__node=null,delete this.__node}})}),gbx.define("gbx/render/loader",function(){var loader={add:function(url,type){if(type)assets.push({url:url,type:type});else{var m=url.match(/\.(\w+)$/);m&&m[1]in laya.net.Loader.typeMap?(type=laya.net.Loader.typeMap[m[1]],assets.push({url:url,type:type})):console.error("not supported resource type:",url)}},remove:function(url){Laya.loader.clearRes(url)},load:function(context,complete,progress,fail){function timeoutHandler(){Laya.loader.clearUnLoaded(),fail&&fail.apply(context)}var timeoutCounter;timeoutCounter=setTimeout(timeoutHandler,3e4),Laya.loader.load(assets,Laya.Handler.create(this,function(){clearTimeout(timeoutCounter),this.clear(),complete.apply(context)},null,!0),Laya.Handler.create(this,function(percent){clearTimeout(timeoutCounter),timeoutCounter=setTimeout(timeoutHandler,3e4),progress&&progress.apply(context,[percent])},null,!1))},loadOnce:function(url,context,complete){Laya.loader.load(url,Laya.Handler.create(context,complete))},clear:function(){assets.length=0},get:function(url){return Laya.loader.getRes(url)},setFileHashTable:function(data){if(data){var h={},p=location.protocol+"//"+location.host+location.pathname.replace("index.html","");for(var key in data)h[p+key]=data[key];Laya.Loader.hashtable=h}}},assets=[];return loader}),gbx.define("gbx/render/media/sound_manager",["gbx/class"],function(Class){return new laya.media.SoundManager}),gbx.define("gbx/render/schema",["gbx/class","gbx/render/display/sprite","gbx/render/display/text","gbx/render/ui/button"],function(Class,Sprite,Text,Button){var registedTypeList={},Schema=Class.extend({init:function(map){this._maps=[],this._nodes=[],map&&this.add(map)},add:function(map){if(map instanceof Array)for(var i=0;i<map.length;i++)this.add(map[i]);else this._maps.push(map)},query:function(key,value,_elem){_elem||(_elem=this._maps);for(var i=0;i<_elem.length;i++){if(_elem[i].props[key]===value)return _elem[i];if("childs"in _elem[i].props){var ret=this.query(key,value,_elem[i].props.childs);if(ret)return ret}}return null},construct:function(){this.clear();for(var i=0;i<this._maps.length;i++){var map=this._maps[i],node=createNode(map);node&&this._nodes.push(node)}},appendTo:function(node){this._nodes.length||this.construct(),node.addChildrenList(this._nodes),this._nodes=[]},clear:function(){for(var i=0;i<this._nodes.length;i++)this._nodes[i].destroy(!0);this._nodes=[]},destroy:function(){this.clear(),this._maps=[]}}),createNode=function(map){var Class,type=map.type,props=map.props,exec=map.exec,ctor=map.ctor,expo=map.expo;if("string"==typeof type?Class=registedTypeList[type.toLowerCase()]:"function"==typeof type&&(Class=type),Class){if(ctor instanceof Array)node=new(Class.bind.apply(Class,[null].concat(ctor)));else var node=new Class;for(var key in props)if("childs"===key)for(i=0;i<props.childs.length;i++){var child=createNode(props.childs[i]);node.addChild(child)}else key in node?"function"==typeof node[key]?node[key].apply(node,props[key]):node[key]=props[key]:gbx.log(type+"'s prop "+key+" is not exist.");if(exec)for(var i=0;i<exec.length;i++){var fn=exec[i][0],args=exec[i].slice(1);node[fn].apply(node,args)}return expo&&("string"==typeof expo?window[expo]=node:"mount"in expo&&"name"in expo&&(expo.mount[expo.name]=node)),node}gbx.log("type "+type+" is not registed.")},registerType=function(type,Class){registedTypeList[type.toLowerCase()]=Class};return registerType("Sprite",Sprite),registerType("Text",Text),registerType("Button",Button),Schema.globalRegisterType=function(type,Class){registerType(type,Class)},Schema.construct=function(map){return createNode(map)},Schema.append=function(parent,childs){new Schema(childs).appendTo(parent)},Schema}),gbx.define("gbx/render/stage",function(){var _futp=!1,stage={get SCALE_MODE(){return scaleMode},get ORIENTATION(){return orientation},get ALIGNMENT(){return alignment},get VERTICAL_ALIGNMENT(){return verticalAlignment},get FRAME_SPEED(){return frameSpeed},set bgColor(v){Laya.stage.bgColor=v},get canvasRotation(){return Laya.stage.canvasRotation},get clientScaleX(){return Laya.stage.clientScaleX},get clientScaleY(){return Laya.stage.clientScaleY},get designHeight(){return Laya.stage.desginHeight},get designWidth(){return Laya.stage.desginWidth},get now(){return Laya.stage.now},get utp(){return _futp},get mouseX(){return Laya.stage.mouseX},get mouseY(){return Laya.stage.mouseY},get offset(){return Laya.stage.offset},get renderingEnabled(){return Laya.stage.renderingEnabled},set renderingEnabled(v){Laya.stage.renderingEnabled=v},initStageWithSize:function(width,height){Laya.init(width,height,laya.webgl.WebGL)},setScaleMode:function(scaleMode){Laya.stage.scaleMode=scaleMode},setOrientation:function(orientation){Laya.stage.screenMode=orientation},setAlignment:function(alignment){Laya.stage.alignH=alignment},setVerticalAligmnent:function(verticalAlignment){Laya.stage.alignV=verticalAlignment},setFrameSpeed:function(frameSpeed){Laya.stage.frameRate=frameSpeed},repaint:function(){Laya.stage.repaint()},parentRepaint:function(child){Laya.stage.parentRepaint(child.__node)},setScreenSize:function(screenWidth,screenHeight){Laya.stage.setScreenSize(screenWidth,screenHeight)},size:function(width,height){Laya.stage.size(width,height)},getContext:function(context){return Laya.Render.canvas.getContext(context)},useTexturePack:function(){_futp=!0},showCursor:function(){Laya.Render._mainCanvas.source.style.cursor="auto"},hideCursor:function(){Laya.Render._mainCanvas.source.style.cursor="none"},getChildByName:function(name){return Laya.stage.getChildByName(name).__sealer}},scaleMode={get SHOW_ALL(){return laya.display.Stage.SCALE_SHOWALL},get EXTRACT_FIT(){return laya.display.Stage.SCALE_EXACTFIT},get NONE(){return laya.display.Stage.SCALE_NOSCALE},get NO_BORDER(){return laya.display.Stage.SCALE_NOBORDER},get FIXED_HEIGHT(){return laya.display.Stage.SCALE_FIXED_HEIGHT},get FIXED_WIDTH(){return laya.display.Stage.SCALE_FIXED_WIDTH},get FULL(){return laya.display.Stage.SCALE_FULL}},orientation={get LANDSCAPE(){return laya.display.Stage.SCREEN_HORIZONTAL},get PORTRAIT(){return laya.display.Stage.SCREEN_VERTICAL},get AUTO(){return laya.display.Stage.SCREEN_NONE}},alignment={get LEFT(){return laya.display.Stage.ALIGN_LEFT},get CENTER(){return laya.display.Stage.ALIGN_CENTER},get RIGHT(){return laya.display.Stage.ALIGN_RIGHT}},verticalAlignment={get TOP(){return laya.display.Stage.ALIGN_TOP},get MIDDLE(){return laya.display.Stage.ALIGN_MIDDLE},get BOTTOM(){return laya.display.Stage.ALIGN_BOTTOM}},frameSpeed={get FAST(){return laya.display.Stage.FRAME_FAST},get AUTO(){return laya.display.Stage.FRAME_MOUSE},get SLOW(){return laya.display.Stage.FRAME_SLOW}};return stage}),gbx.define("gbx/render/texture",["gbx/render/stage"],function(stage){var packedData;return{get usingTexturePack(){return stage.utp},setPackedDataFile:function(data){packedData=data},getPack:function(url){if(url in packedData.sheets)return packedData.sheets[url].src},getFromPackedTexture:function(url){var inf=packedData.sheets[url];if(!inf)throw url+" was not found on packed texture data.";var pkg=Laya.loader.getRes(inf.src),tex=laya.resource.Texture.createFromTexture(pkg,inf.x,inf.y,inf.w,inf.h);if(!tex)throw url+" defined in "+inf.src+" but not load on this scene.";return{tex:tex,sw:inf.ow,sh:inf.oh,sx:inf.ox,sy:inf.oy,uri:url}},createFromURL:function(url){return Laya.loader.getRes(url)},createFromTexture:function(tex,sx,sy,sw,sh){return laya.resource.Texture.createFromTexture(tex,sx,sy,sw,sh)}}}),gbx.define("gbx/render/tween",["gbx/class"],function(Class){function makeHandler(target,context,complete,args){if("function"==typeof complete){null==context&&(context=target);var handler=new Laya.Handler(context,complete,args,!0)}else handler=null;return handler}function getLayaTimingFunctionByName(name){return name in timingFunctionList?Laya.Ease[name]:laya.utils.Tween.easeNone}var Tween=Class.extend({init:function(tween){tween&&tween.__className&&"laya.utils.Tween"==tween.__className?this.__node=tween:this.__node=new laya.utils.Tween,this.__node.__sealer=this},get gid(){return this.__node.gid},clear:function(){this.__node.clear()},complete:function(){this.__node.complete()},from:function(target,props,duration,timingFunction,context,complete,args,delay,coverBefore){var ease=getLayaTimingFunctionByName(timingFunction),handler=makeHandler(target,context,complete,args);return this.__node.from(target.__node,props,duration,ease,handler,delay,coverBefore).__sealer},pause:function(){this.__node.pause()},recover:function(){this.__node.recover()},restart:function(){this.__node.restart()},resume:function(){this.__node.resume()},setStartTime:function(startTime){this.__node.setStartTime(startTime)},to:function(target,props,duration,timingFunction,context,complete,args,delay,coverBefore){var ease=getLayaTimingFunctionByName(timingFunction),handler=makeHandler(target,context,complete,args);return this.__node.to(target.__node,props,duration,ease,handler,delay,coverBefore).__sealer},updateEase:function(time){this.__node.updateEase(time)}});Tween.clear=function(tween){laya.utils.Tween.clear(tween.__node)},Tween.clearAll=function(target){laya.utils.Tween.clearAll(target.__node)},Tween.from=function(target,props,duration,timingFunction,context,complete,args,delay,coverBefore,autoRecover){if(void 0==document.gamePauseInGame||!document.gamePauseInGame){var ease=getLayaTimingFunctionByName(timingFunction),handler=makeHandler(target,context,complete,args),_tween=laya.utils.Tween.from(target.__node,props,duration,ease,handler,delay,coverBefore,autoRecover);return _tween.__sealer?_tween.__sealer:new Tween(_tween)}},Tween.to=function(target,props,duration,timingFunction,context,complete,args,delay,coverBefore,autoRecover){if(void 0==document.gamePauseInGame||!document.gamePauseInGame){var ease=getLayaTimingFunctionByName(timingFunction),handler=makeHandler(target,context,complete,args),_tween=laya.utils.Tween.to(target.__node,props,duration,ease,handler,delay,coverBefore,autoRecover);return _tween.__sealer?_tween.__sealer:new Tween(_tween)}};var timingFunctionList={get strongIn(){return"strongIn"},get strongOut(){return"strongOut"},get strongInOut(){return"strongInOut"},get sineIn(){return"sineIn"},get sineOut(){return"sineOut"},get sineInOut(){return"sineInOut"},get quintIn(){return"quintIn"},get quintOut(){return"quintOut"},get quintInOut(){return"quintInOut"},get quartIn(){return"quartIn"},get quartOut(){return"quartOut"},get quartInOut(){return"quartInOut"},get QuadIn(){return"quadIn"},get QuadOut(){return"quadOut"},get QuadInOut(){return"quadInOut"},get linearIn(){return"linearIn"},get linearOut(){return"linearOut"},get linearInOut(){return"linearInOut"},get expoIn(){return"expoIn"},get expoOut(){return"expoOut"},get expoInOut(){return"expoInOut"},get elasticIn(){return"elasticIn"},get elasticOut(){return"elasticOut"},get elasticInOut(){return"elasticInOut"},get cubicIn(){return"cubicIn"},get cubicOut(){return"cubicOut"},get cubicInOut(){return"cubicInOut"},get circIn(){return"circIn"},get circOut(){return"circOut"},get circInOut(){return"circInOut"},get bounceIn(){return"bounceIn"},get bounceOut(){return"bounceOut"},get bounceInOut(){return"bounceInOut"},get backIn(){return"backIn"},get backOut(){return"backOut"},get backInOut(){return"backInOut"},get linearNone(){return"linearNone"}};return Object.defineProperty(Tween,"TimingFunction",{get:function(){return timingFunctionList}}),Tween}),gbx.define("gbx/render/ui/box",["gbx/render/ui/component"],function(Component){return Component.extend({ctor:function(){this.__node=new laya.ui.Box}})}),gbx.define("gbx/render/ui/button",["gbx/render/ui/component","gbx/render/texture"],function(Component,texture){return Component.extend({ctor:function(skin,label){this.__node=new laya.ui.Button(skin,label),this.context=null,this.handler=null},get stateNum(){return this.__node.stateNum},set stateNum(v){this.__node.stateNum=v},get label(){return this.__node.label},set label(v){this.__node.label=v},get labelAlign(){return this.__node.labelAlign},set labelAlign(v){this.__node.labelAlign=v},get labelPadding(){return this.__node.labelPadding},set labelPadding(v){this.__node.labelPadding=v},get labelSize(){return this.__node.labelSize},set labelSize(v){this.__node.labelSize=v},get labelColors(){return this.__node.labelColors},set labelColors(v){this.__node.labelColors=v},get labelStroke(){return this.__node.labelStroke},set labelStroke(v){this.__node.labelStroke=v},get labelStrokeColor(){return this.__node.labelStrokeColor},set labelStrokeColor(v){this.__node.labelStrokeColor=v},get toggle(){return this.__node.toggle},set toggle(v){this.__node.toggle=v},get selected(){return this.__node.selected},set selected(v){this.__node.selected=v},get gray(){return this.__node.gray},set gray(v){this.__node.gray=v,this.mouseEnabled=!v},get mouseEnabled(){return this.__node.mouseEnabled},set mouseEnabled(v){this.__node.mouseEnabled=v},setSkinImage:function(image){if(texture.usingTexturePack){var g=texture.getFromPackedTexture(image);this.__node._skin=g,this.__node.callLater(this.__node.changeClips),this.__node._setStateChanged()}else this.__node.skin=image},setClickHandler:function(context,handler){function maskDoubleClick(__node,context1,handler1,args1){__node.mouseEnabled=!1,setTimeout(function(){__node.mouseEnabled=!0},250)}this.context=context,this.handler=handler;var args=Array.prototype.slice.call(arguments,2);args.unshift(this),this.__node.clickHandler=laya.utils.Handler.create(context,handler,args,!1),this.on(this.EVENT.MOUSE_UP,context,maskDoubleClick,[this.__node,context,handler,args])},clear:function(){}})}),gbx.define("gbx/render/ui/checkbox",["gbx/render/ui/button"],function(Button){return Button.extend({ctor:function(skin,label){this.__node=new laya.ui.CheckBox(skin,label)}})}),gbx.define("gbx/render/ui/component",["gbx/render/display/sprite"],function(Sprite){return Sprite.extend({ctor:function(){this.__node=new laya.ui.Component},init:function(){this._super.apply(this,Array.prototype.slice.call(arguments,0)),this.__nodeData={}},get bottom(){return this.__node.bottom},set bottom(v){this.__node.bottom=v},get centerX(){return this.__node.centerX},set centerX(v){this.__node.centerX=v},get centerY(){return this.__node.centerY},set centerY(v){this.__node.centerY=v},get disabled(){return this.__node.disabled},set disabled(v){this.__node.disabled=v},get gray(){return this.__node.gray},set gray(v){this.__node.gray=v},get displayHeight(){return this.__node.displayHeight},get displayWidth(){return this.__node.displayWidth},get left(){return this.__node.left},set left(v){this.__node.left=v},get measureHeight(){return this.__node.measureHeight},get measureWidth(){return this.__node.measureWidth},get right(){return this.__node.right},set right(v){this.__node.right=v},get scaleX(){return this.__node.scaleX},get scaleY(){return this.__node.scaleY},get top(){return this.__node.top},set top(v){this.__node.top=v},setData:function(key,value){this.__nodeData[key]=value},getData:function(key){return this.__nodeData[key]},destroy:function(){this.__nodeData=null,this._super()}})}),gbx.define("gbx/render/ui/dialog",["gbx/render/ui/view"],function(View){return View.extend({ctor:function(){this.__node=new laya.ui.Dialog},get dragArea(){return this.__node.dragArea},set dragArea(v){this.__node.dragArea=v},get isPopup(){return this.__node.isPopup},get popupCenter(){return this.__node.popupCenter},set popupCenter(v){this.__node.popupCenter=v},close:function(type){this.__node.close(type)},closeAll:function(){this.__node.closeAll()},_initialize:function(){this.__node.initialize()},popup:function(closeOther){this.__node.popup(closeOther)},show:function(closeOther){this.__node.show(closeOther)},setCloseHandler:function(context,handler){}})}),gbx.define("gbx/render/ui/group",["gbx/render/ui/box"],function(Box){return Box.extend({ctor:function(labels,skin){this.__node=new laya.ui.Group(labels,skin)},get direction(){return this.__node.direction},set direction(v){this.__node.direction=v},get items(){return this.__node.items},get labelBold(){return this.__node.labelBold},set labelBold(v){this.__node.labelBold=v},get labelColors(){return this.__node.labelColors},set labelColors(v){this.__node.labelColors=v},get labelPadding(){return this.__node.labelPadding},set labelPadding(v){this.__node.labelPadding=v},get labels(){return this.__node.labels},set labels(v){this.__node.labels=v},get labelSize(){return this.__node.labelSize},set labelSize(v){this.__node.labelSize=v},get labelStroke(){return this.__node.labelStroke},set labelStroke(v){this.__node.labelStroke=v},get labelStrokeColor(){return this.__node.labelStrokeColor},set labelStrokeColor(v){this.__node.labelStrokeColor=v},get selectedIndex(){return this.__node.selectedIndex},set selectedIndex(v){this.__node.selectedIndex=v},get selection(){return this.__node.selection},set selection(v){this.__node.selection=v},get skin(){return this.__node.skin},set skin(v){this.__node.skin=v},get space(){return this.__node.space},set space(v){this.__node.space=v},get stateNum(){return this.__node.stateNum},set stateNum(v){this.__node.stateNum=v},get strokeColors(){return this.__node.strokeColors},set strokeColors(v){this.__node.strokeColors=v},addItem:function(item,autoLayOut){return this.__node.addItem(item.__node,autoLayOut)},_commitMeasure:function(){this.__node.commitMeasure()},delItem:function(item,autoLayOut){this.__node.delItem(item.__node,autoLayOut)},initItems:function(){this.__node.initItems()},_preinitialize:function(){this.__node.preinitialize()},setSelectHandler:function(context,handler){this.__node.selectHandler=laya.utils.Handler.create(context,handler,[],!1)}})}),gbx.define("gbx/render/ui/hslider",["gbx/render/ui/slider"],function(Slider){return Slider.extend({ctor:function(skin){this.__node=new laya.ui.HSlider(skin)}})}),gbx.define("gbx/render/ui/image",["gbx/render/ui/component","gbx/render/texture"],function(Component,texture){return Component.extend({ctor:function(src){this.__node=new laya.ui.Image(src)},get sizeGrid(){return this.__node.sizeGrid},set sizeGrid(v){this.__node.sizeGrid=v}})}),gbx.define("gbx/render/ui/label",["gbx/render/ui/component"],function(Component){return Component.extend({ctor:function(text){this.__node=new laya.ui.Label(text)},get align(){return this.__node.align},set align(v){this.__node.align=v},get asPassword(){return this.__node.asPassword},set asPassword(v){this.__node.asPassword=v},get bgColor(){return this.__node.bgColor},set bgColor(v){this.__node.bgColor=v},get bold(){return this.__node.bold},set bold(v){this.__node.bold=v},get borderColor(){return this.__node.borderColor},set borderColor(v){this.__node.borderColor=v},get color(){return this.__node.color},set color(v){this.__node.color=v},get font(){return this.__node.font},set font(v){this.__node.font=v},get fontSize(){return this.__node.fontSize},set fontSize(v){this.__node.fontSize=v},get italic(){return this.__node.italic},set italic(v){this.__node.italic=v},get leading(){return this.__node.leading},set leading(v){this.__node.leading=v},get padding(){return this.__node.padding},set padding(v){this.__node.padding=v},get stroke(){return this.__node.stroke},set stroke(v){this.__node.stroke=v},get strokeColor(){return this.__node.strokeColor},set strokeColor(v){this.__node.strokeColor=v},get text(){return this.__node.text},set text(v){this.__node.text=v},get textField(){return this.__node.textField},get valign(){return this.__node.valign},set valign(v){this.__node.valign=v},get wordWrap(){return this.__node.wordWrap},set wordWrap(v){this.__node.wordWrap=v}})}),gbx.define("gbx/render/ui/list",["gbx/render/ui/box"],function(Box){var Item=Box.extend({ctor:function(){},init:function(box){if("__sealer"in box)return box.__sealer;this.__node=box,this._super()}}),List=Box.extend({ctor:function(){this.__node=new laya.ui.List},get array(){return this.__node.array},set array(v){this.__node.array=v},get cacheContent(){return this.__node.cacheContent},set cacheContent(v){this.__node.cacheContent=v},get cells(){return this.__node.cells.map(function(v){return new Item(v)})},get content(){return this.__node.content},get hScrollBarSkin(){return this.__node.hScrollBarSkin},set hScrollBarSkin(v){this.__node.hScrollBarSkin=v},get length(){return this.__node.length},get page(){return this.__node.page},set page(v){this.__node.page=v},get repeatX(){return this.__node.repeatX},set repeatX(v){this.__node.repeatX=v},get repeatY(){return this.__node.repeatY},set repeatY(v){this.__node.repeatY=v},get scrollBar(){return this.__node.scrollBar},set scrollBar(v){this.__node.scrollBar=v},get selectedIndex(){return this.__node.selectedIndex},set selectedIndex(v){this.__node.selectedIndex=v},get selectedItem(){return this.__node.selectedItem},set selectedItem(v){this.__node.selectedItem},get selectEnable(){return this.__node.selectEnable},set selectEnable(v){this.__node.selectEnable=v},get selection(){return this.__node.selection},set selection(v){this.__node.selection=v},get spaceX(){return this.__node.spaceX},set spaceX(v){this.__node.spaceX=v},get spaceY(){return this.__node.spaceY},set spaceY(v){this.__node.spaceY=v},get startIndex(){return this.__node.startIndex},set startIndex(v){this.__node.startIndex=v},get totalPage(){return this.__node.totalPage},set totalPage(v){this.__node.totalPage=v},get vScrollBarSkin(){return this.__node.vScrollBarSkin},set vScrollBarSkin(v){this.__node.vScrollBarSkin=v},addItem:function(source){this.__node.addItem(source)},addItemAt:function(source,index){this.__node.addItemAt(source,index)},changeItem:function(index,source){this.__node.changeItem(index,source)},_changeSize:function(){this.__node.changeSize()},_createChildren:function(){this.__node.createChildren()},_createItem:function(){return this.__node.createItem()},deleteItem:function(index){this.__node.deleteItem(index)},deleteItemByName:function(name){this.__node.removeChildByName(name)},getCell:function(index){return this.__node.getCell(index)},getChildIndex:function(node){return this.__node.getChildIndex(node)},getItem:function(index){return this.__node.getItem(index)},initItems:function(){this.__node.initItems()},refresh:function(){this.__node.refresh()},_renderItem:function(cell,index){this.__node.renderItem(cell,index)},scrollTo:function(index){this.__node.scrollTo(index)},setContentSize:function(width,height){this.__node.setContentSize(width,height)},setItem:function(index,source){this.__node.setItem(index,source)},scrollTweenTo:function(index,time){this.__node.tweenTo(index,time)},set direction(v){v==List.DIRECTION.HORIZONTAL?this.__node.hScrollBarSkin="":v==List.DIRECTION.VERTICAL&&(this.__node.vScrollBarSkin="")},setMouseHandler:function(context,handler){this.__node.mouseHandler=laya.utils.Handler.create(context,handler,null,!1)},setRenderHandler:function(context,handler){this.__node.renderHandler=laya.utils.Handler.create(context,function(cell,idx){handler.call(context,new Item(cell),idx)},null,!1)},setSelectHandler:function(context,handler){this.__node.selectHandler=laya.utils.Handler.create(context,handler,null,!1)},setCellSize:function(width,height){function Item(){Item.__super.call(this),this.size(width,height)}Laya.class(Item,null,laya.ui.Box),this.__node.itemRender=Item}});return Object.defineProperty(List,"DIRECTION",{get:function(){return{HORIZONTAL:"horizontal",VERTICAL:"vertical"}}}),List}),gbx.define("gbx/render/ui/panel",["gbx/render/ui/box"],function(Box){return Box.extend({ctor:function(){this.__node=new laya.ui.Panel},get content(){return this.__node.content},get hScrollBar(){return this.__node.hScrollBar},set hScrollBar(v){this.__node.hScrollBar=v},get hScrollBarSkin(){return this.__node.hScrollBarSkin},set hScrollBarSkin(v){this.__node.hScrollBarSkin=v},get vScrollBar(){return this.__node.vScrollBar},get vScrollBarSkin(){return this.__node.vScrollBarSkin},set vScrollBarSkin(v){this.__node.vScrollBarSkin=v},refresh:function(){this.__node.refresh()},scrollTo:function(x,y){this.__node.scrollTo(x,y)},_changeSize:function(){this.__node.changeSize()},_createChildren:function(){this.__node.createChildren()}})}),gbx.define("gbx/render/ui/slider",["gbx/render/ui/component","gbx/render/texture"],function(Component,texture){return Component.extend({ctor:function(skin){this.__node=new laya.ui.Slider(skin)},get allowClickBack(){return this.__node.allowClickBack},set allowClickBack(v){this.__node.allowClickBack=v},get max(){return this.__node.max},set max(v){this.__node.max=v},get min(){return this.__node.min},set min(v){this.__node.min=v},get showLabel(){return this.__node.showLabel},set showLabel(v){this.__node.showLabel=v},get tick(){return this.__node.tick},set tick(v){this.__node.tick=v},get value(){return this.__node.value},set value(v){this.__node.value=v},get bar(){return this.__node.bar},setChangeHandler:function(context,handler){this.__node.changeHandler=new Laya.Handler(context,handler)},setSkinImage:function(image){if(texture.usingTexturePack){if(this.__node._skin!=image){this.__node._skin=image;var g=texture.getFromPackedTexture(image),g2=texture.getFromPackedTexture(image.replace(".png","$bar.png"));this.__node._bg.skin=g,this.__node._bar.skin=g2,this.__node.setBarPoint()}}else this.__node.skin=image},setSlider:function(min,max,value){this.__node.setSlider(min,max,value)}})}),gbx.define("gbx/render/ui/tab",["gbx/render/ui/group"],function(Group){return Group.extend({ctor:function(labels,skin){this.__node=new laya.ui.Tab(labels,skin)}})}),gbx.define("gbx/render/ui/textarea",["gbx/render/ui/component"],function(Component){return Component.extend({ctor:function(text){this.__node=new laya.ui.TextArea(text)},get height(){return this.__node.height},set height(v){this.__node.height=v},get width(){return this.__node.width},set width(v){this.__node.width=v},get hScrollBarSkin(){return this.__node.hScrollBarSkin},set hScrollBarSkin(v){this.__node.hScrollBarSkin=v},get vScrollBarSkin(){return this.__node.vScrollBarSkin},set vScrollBarSkin(v){this.__node.vScrollBarSkin=v},get maxScrollX(){return this.__node.maxScrollX},set maxScrollX(v){this.__node.maxScrollX=v},get maxScrollY(){return this.__node.maxScrollY},set maxScrollY(v){this.__node.maxScrollY=v},get scrollX(){return this.__node.scrollX},set scrollX(v){this.__node.scrollX=v},get scrollY(){return this.__node.scrollY},set scrollY(v){this.__node.scrollY=v}})}),gbx.define("gbx/render/ui/textinput",["gbx/render/ui/label","gbx/render/texture"],function(Label,texture){return Label.extend({ctor:function(text){this.__node=new laya.ui.TextInput(text)},get bg(){return this.__node.bg},set bg(v){this.__node.bg=v},get clearOnFocus(){return this.__node.clearOnFocus},set clearOnFocus(v){this.__node.clearOnFocus=v},get editable(){return this.__node.editable},set editable(v){this.__node.editable=v},get focus(){return this.__node.focus},set focus(v){this.__node.focus=v},get inputElementXAdjuster(){return this.__node.inputElementXAdjuster},set inputElementXAdjuster(v){this.__node.inputElementXAdjuster=v},get inputElementYAdjuster(){return this.__node.inputElementYAdjuster},set inputElementYAdjuster(v){this.__node.inputElementYAdjuster=v},get maxChars(){return this.__node.maxChars},set maxChars(v){this.__node.maxChars=v},get multiline(){return this.__node.multiline},set multiline(v){this.__node.multiline=v},get restrict(){return this.__node.restrict},set restrict(v){this.__node.restrict=v},get sizeGrid(){return this.__node.sizeGrid},set sizeGrid(v){this.__node.sizeGrid=v},get skin(){return this.__node.skin},set skin(v){this.__node.skin=v},get title(){return this.__node.title},set title(v){this.__node.title=v},get prompt(){return this.__node.prompt},set prompt(v){this.__node.prompt=v},set promptColor(v){this.__node.promptColor=v},get promptColor(){return this.__node.promptColor},set type(v){this.__node.type=v},get type(){return this.__node.type},select:function(){this.__node.select()},setSkinImage:function(image){if(texture.usingTexturePack){if(this.__node._skin!=image){this.__node._skin=image,this.__node._bg||(this.__node.graphics=this.__node._bg=new laya.ui.AutoBitmap);var value=texture.getFromPackedTexture(image);this.__node._bg.source=texture.createFromTexture(value.tex,-value.sx,-value.sy,value.sw,value.sh),this.__node._width&&(this.__node._bg.width=this.__node._width),this.__node._height&&(this.__node._bg.height=this.__node._height)}}else this.__node.skin=image}})}),gbx.define("gbx/render/ui/view",["gbx/render/ui/box"],function(Box){var View=Box.extend({ctor:function(){this.__node=new laya.ui.View}});return Object.defineProperties(View,{uiClassMap:{get:function(){return laya.ui.View.uiClassMap}},uiMap:{get:function(){return laya.ui.View.uiMap}}}),View.createComp=laya.ui.View.createComp,View.regComponent=laya.ui.View.regComponent,View.regViewRuntime=laya.ui.View.regViewRuntime,View}),gbx.define("gbx/render/ui/vslider",["gbx/render/ui/slider"],function(Slider){return Slider.extend({ctor:function(skin){this.__node=new laya.ui.VSlider(skin)}})}),gbx.define("gbx/sound",function(){return function(){function loadUrl(url,callback){var xhr=new XMLHttpRequest;xhr.open("GET",url,!0),xhr.responseType="arraybuffer",xhr.onload=function(){atx.decodeAudioData(xhr.response,function(buffer){buffs[url]=buffer,callback&&callback()})},xhr.send()}function createSource(url){var gain=atx.createGain(),src=atx.createBufferSource();return src.connect(gain),src.buffer=buffs[url],gain.connect(atx.destination),gain.gain.value=volume,{src:src,gain:gain.gain}}function swapBGM(url,loopStart,loopEnd){null!=playingBgm&&playingBgm.src.stop(atx.currentTime);var newBgm=createSource(url);void 0!=loopStart&&loopStart>0||(newBgm.src.loop=!0,newBgm.src.loopStart=loopStart||0,newBgm.src.loopEnd=loopEnd||0),newBgm.src.start(atx.currentTime,0),playingBgm=newBgm}if(!("AudioContext"in window||"webkitAudioContext"in window))return gbx.log("not support audio"),{checkUnlockState:function(){},unlock:function(){},setLoadedBuffer:function(){},preloadBGM:function(){},volume:function(){return 0},mute:function(){return!0},muteSE:function(){return!0},playBGM:function(){},stopBGM:function(){},setPlayingSoundMax:function(){},playSE:function(){},clearBuff:function(){},pause:function(){},resume:function(){}};var atx=new(window.AudioContext||window.webkitAudioContext),buffs={},playingBgm=null,playingSoundCount=0,playingSoundMax=5,volume=.8,mute=!1,muteSE=!1;return{checkUnlockState:function(callback){var buffer=atx.createBuffer(1,1,22050),source=atx.createBufferSource();source.buffer=buffer,source.connect(atx.destination),source.start(0,0),setTimeout(function(){callback(source.playbackState===source.PLAYING_STATE||source.playbackState===source.FINISHED_STATE?!0:!1)},0)},unlock:function(){var eventType=/iphone|ipad|ipod|android/i.test(navigator.userAgent)?"touchend":"mousedown";document.body.addEventListener(eventType,function unlocker(){var buffer=atx.createBuffer(1,1,22050),source=atx.createBufferSource();source.buffer=buffer,source.connect(atx.destination),source.start(0,0),document.body.removeEventListener(eventType,unlocker,!1)},!1)},setLoadedBuffer:function(url,buffer){url in buffs||buffer&&buffer.audioBuffer&&(buffs[url]=buffer.audioBuffer)},preloadBGM:function(url){url in buffs||loadUrl(url)},volume:function(set){if(void 0==set)return volume;volume=set,null!=playingBgm&&(playingBgm.gain.value=volume)},mute:function(set){if(void 0==set)return mute;mute=set,null!=playingBgm&&playingBgm.src.stop(0)},muteSE:function(set){if(void 0==set)return muteSE;muteSE=set},playBGM:function(url,loopStart,loopEnd){mute||(url in buffs?swapBGM(url,loopStart,loopEnd):loadUrl(url,function(){swapBGM(url,loopStart,loopEnd)}))},stopBGM:function(){null!=playingBgm&&playingBgm.src.stop(0)},setPlayingSoundMax:function(max){playingSoundMax=max},playSE:function(url,callback){if(!(muteSE||playingSoundCount>playingSoundMax))if(url in buffs){var src=createSource(url).src;playingSoundCount++,setTimeout(function(){playingSoundCount--,callback&&callback()},1e3*src.buffer.duration),src.start(atx.currentTime,0)}else loadUrl(url,function(){var src=createSource(url).src;playingSoundCount++,setTimeout(function(){playingSoundCount--,callback&&callback()},1e3*src.buffer.duration),src.start(atx.currentTime,0)})},clearBuff:function(url){delete buffs[url]},pause:function(){"running"===atx.state?atx.suspend():null!=playingBgm&&(playingBgm.gain.value=0)},resume:function(){"suspended"===atx.state?atx.resume():null!=playingBgm&&(playingBgm.gain.value=volume)}}}()}),gbx.define("gbx/timer",["gbx/class"],function(Class){var list=[],tid=0,runTimer=function(){for(var tmp=list.slice(0),now=Date.now(),i=0;i<tmp.length;i++)tmp[i].enabled&&tmp[i].update(now);list.length&&(tid=setTimeout(runTimer,30))};return Class.extend({init:function(){this._list={},this._lastTick=Date.now(),this._tid=0,this._pid=0,this._end=!1,this.update=this._update.bind(this),list.push(this),1===list.length&&runTimer()},get enabled(){return!this._end},setTimeout:function(delay,ctx,fn){this._add(!1,delay,ctx,fn)},setInterval:function(delay,ctx,fn){this._add(!0,delay,ctx,fn)},clearTimer:function(ctx,fn){for(var key in this._list){var info=this._list[key];if(info.ctx===ctx&&info.fn===fn)return info.enable=!1,delete this._list[key],!0}return!1},_add:function(loop,delay,ctx,fn){for(var key in this._list)if((info=this._list[key]).ctx===ctx&&info.fn===fn)return info.enable=!0,info.loop=loop,info.delay=delay,void(info.next=delay);var id=this._pid++,info={enable:!0,loop:loop,delay:delay,next:delay,ctx:ctx,fn:fn};this._list[id]=info},_update:function(now){var delta=now-this._lastTick;this._lastTick=now;for(var key in this._list){var info=this._list[key];info.enable&&(info.next-=delta,info.next<=0&&(info.loop?info.next+=info.delay:(info.enable=!1,delete this._list[key]),info.fn.call(info.ctx)))}},end:function(){this._end=!0;for(var i=0;i<list.length;i++)list[i]===this&&list.splice(i,1);delete this.update}})}),gbx.define("gbx/util",function(){return{formatDateTime:function(date,format){date instanceof Date||(date=new Date(date));var yyyy=date.getYear()+1900,MM=("0"+(date.getMonth()+1)).slice(-2),dd=("0"+date.getDate()).slice(-2),hh=("0"+date.getHours()).slice(-2),mm=("0"+date.getMinutes()).slice(-2),ss=("0"+date.getSeconds()).slice(-2);return void 0===format&&(format="yyyy-MM-dd hh:mm:ss"),format.replace("yyyy",yyyy).replace("MM",MM).replace("dd",dd).replace("hh",hh).replace("mm",mm).replace("ss",ss)},fixLengthString:function(str,len,char){return void 0===char?char="0":char.toString().length>1&&(char=char.toString()[0]),(str=new Array(len+1).join(char)+str).substring(str.length-len)},openURL:function(url){window.open(url)},copyTextToClipboard:function(text,callback){var textArea=document.createElement("textarea");textArea.value=text,document.body.appendChild(textArea),textArea.select();var ret=document.execCommand("copy");document.body.removeChild(textArea),ret||prompt("请复制下面对话框中的内容:",text),callback(ret)},createDownload:function(url,fileName){if("URL"in window){var xhr=new XMLHttpRequest;xhr.responseType="blob",xhr.onreadystatechange=function(){if(4===xhr.readyState&&200===xhr.status){var link=document.createElement("a"),blob=window.URL.createObjectURL(xhr.response);link.href=blob,link.download=fileName,document.body.appendChild(link),link.click(),window.URL.revokeObjectURL(blob),document.body.removeChild(link)}},xhr.open("get",url,!0),xhr.send()}else location.href=url},closeInitDiv:function(){document.getElementById("init").style.display="none",document.getElementById("init_bg").style.display="none"},closeSpreadDiv:function(){var div=document.getElementById("spread");null!==div&&(div.style.display="none")}}}),gbx.define("platform/platform_manager",["gbx/net/connector","gbx/net/messagecommand","gbx/net/errorcode","gbx/net/errorcode_des","gbx/net/net_tool","gbx/hubs","conf/platform","gbx/bridge","comm/helper/playerdata_mgr","conf/ui_locallization","comm/ui/top_message","comm/helper/conf_mgr","comm/helper/account_mgr","comm/ui/connect_loading"],function(server,CMD,ERROR_CODE,ERROR_CODE_DES,netTool,hubs,Platform,bridge,playerDataMgr,uiLocallization,topMessage,confMgr,accountMgr,loadingUI){var verification=function(receiptData){platformManager.tryVerification(receiptData)},_rechargeType=2,_rechargeMax=1e3,_rechargeMaxQQ=3e3,_examineState={},_rechargeCategory=[],_rechargeCategoryMax={},_loginGuest=!1,platformManager={setRechargeCategory:function(v){_rechargeCategory=[];for(var i=0;i<v.length;i++)"web"===bridge.getPlatform()?v[i]!=Platform.rechargeType.PWG&&v[i]!=Platform.rechargeType.YYY||_rechargeCategory.push(v[i]):_rechargeCategory.push(v[i])},getRechargeCategory:function(){return _rechargeCategory},setRechargeCategoryMax:function(v){for(var i=0;i<v.length;i++)_rechargeCategoryMax[v[i].category]=v[i].rechargeMax},getRechargeCategoryMaxBytype:function(type){return null!=_rechargeCategoryMax&&_rechargeCategoryMax.hasOwnProperty(type)?_rechargeCategoryMax[type]:3e3},setExamineState:function(value){_examineState=value},getExamineState:function(){var packageId=bridge.getPackageId();return!(null==_examineState||!_examineState.hasOwnProperty(packageId))&&_examineState[packageId]},setLoginGuest:function(v){_loginGuest=v},getLoginGuest:function(){return _loginGuest},getRechargeType:function(){return _rechargeType==Platform.recharge_type0?_rechargeType:"web"===bridge.getPlatform()?Platform.recharge_type0:_rechargeType},setRechargeType:function(value){_rechargeType=value},setRechargeMax:function(value){_rechargeMax=value},getRechargeMax:function(){return _rechargeMax},setRechargeMaxQQ:function(value){_rechargeMaxQQ=value},getRechargeMaxQQ:function(){return _rechargeMaxQQ},tryRechargeOrder:function(shopData,UID){this._rechargeConfig=shopData,this._UID=UID,this._rechargeIOSId;var packaged=bridge.getPackageId();this._rechargeIOSId=this._rechargeConfig[packaged],sendMsg=gtea.protobuf.encode("RechargeOrderPostData",{platformId:Platform.platformId,rechargeId:this._rechargeConfig.id}),this.getOrderId(sendMsg,"iOS")},getOrderId:function(sendMsg,totalAmount){var path=netTool.getPathByKey("rechargeOrderUrl");netTool.createHttpRequest(path,sendMsg,this,function(data){var ret=gtea.protobuf.decode("RechargeOrderResult",data);if(ret.result==ERROR_CODE.OK){var jsonPar=ret.jsonPar,obj=JSON.parse(jsonPar);if(this._cpOerderId=obj.orderId,"iOS"==bridge.getPlatform()&&"iOS"==totalAmount)bridge.payment(this._rechargeIOSId);else{var userId=playerDataMgr.getMyUID(),subject="充值"+totalAmount+"元",callBack=netTool.getPathByKey("onRechargeBACCARATWebUrl"),remark=userId+"#"+this._cpOerderId+"#"+bridge.getPackageId();bridge.payH5(this._cpOerderId,totalAmount,subject,callBack,remark)}}},function(status){topMessage.post(" status "+status)})},tryRechargeItem:function(msgData){gbx.log("msgData: "+JSON.stringify(msgData));var sendMsg=gtea.protobuf.encode("RechargeReq",{rechargeId:msgData.rechargeId,platformId:msgData.platformId,orderId:msgData.orderId,cpOrderId:msgData.cpOrderId});server.requestToGame(CMD.Recharge,sendMsg,this,function(errorcode,data){if(errorcode==ERROR_CODE.OK)try{var retData=gtea.protobuf.decode("RechargeResp",data),count=retData.itemProto[0].count;playerDataMgr.dealItemProto(retData.itemProto),hubs.publish("global.playerdata.update.userdata"),topMessage.post(uiLocallization.pay_success_tip+count)}catch(err){gbx.log("error "+err.name+" "+err.description)}else topMessage.post(ERROR_CODE_DES[data.result])})},tryVerification:function(receiptData){var roomType=confMgr.definition.ChessRoomType.Baccarat,JsonObject={receipt:receiptData,rechargeId:this._rechargeConfig.id,amount:this._rechargeConfig.price,cpOrderId:this._cpOerderId,orderId:this._cpOerderId,userId:this._UID,roomType:roomType,flag:Platform.myPlatformId,packageId:accountMgr.getPackageId()},str=JSON.stringify(JsonObject);gbx.log("JsonObject: "+str);var path=netTool.getPathByKey("rechargeBACCARATUrl");netTool.createHttpRequest(path,str,this,function(data){},function(status){gbx.log("status: "+status),topMessage.post(" status "+status)})},tryRechargeOrder_ZhenYun:function(userId,rechargeId,price,caller,successFun){var JsonObject={userId:userId,rechargeId:rechargeId,price:price,packageId:accountMgr.getPackageId()},str=JSON.stringify(JsonObject),path=netTool.getPathByKey("transitBACCARATUrl");netTool.createJsonHttpRequest(path,str,this,function(data){successFun&&successFun.call(caller,data)},function(status){topMessage.post(" status "+status)})},tryRechargeOrder_qrCode:function(account,userId,channel,totalAmount,caller,successFun){var JsonObject={account:account,userId:userId,channel:channel,totalAmount:totalAmount,packageId:accountMgr.getPackageId()},str=JSON.stringify(JsonObject),path=netTool.getPathByKey("rechargeBACCARATQRUrl");netTool.createJsonHttpRequest(path,str,this,function(data){successFun&&successFun.call(caller,data)},function(status){topMessage.post(" status "+status)})},tryRechargeOrder_H5:function(terminalType,tradeIP,account,userId,channel,totalAmount,caller,successFun){var JsonObject={terminalType:terminalType,tradeIP:tradeIP,account:account,userId:userId,channel:channel,totalAmount:totalAmount,packageId:accountMgr.getPackageId()},str=JSON.stringify(JsonObject),path=netTool.getPathByKey("rechargeBACCARATWebUrl");netTool.createJsonHttpRequest(path,str,this,function(data){successFun&&successFun.call(caller,data)},function(status){topMessage.post(" status "+status)})},tryRechargeOrder_H5_New:function(totalAmount){sendMsg=gtea.protobuf.encode("RechargeOrderPostData",{platformId:Platform.platformId,rechargeId:110}),this.getOrderId(sendMsg,totalAmount)},tryRechargeOrder_PGW:function(selectWay,money,caller,successFun){var parObj={name:"chip",description:"buyChip",faceMoney:money,payTypeId:selectWay,userId:playerDataMgr.getMyUID(),packageId:accountMgr.getPackageId()},parStr=JSON.stringify(parObj),path=netTool.getPathByKey("rechargeBACCARATPGWUrl");netTool.createJsonHttpRequest(path,parStr,this,function(data){successFun&&successFun.call(caller,data)},function(status){topMessage.post(" status "+status)})},tryRechargeOrder_YYY:function(money,caller,successFun){loadingUI.show();var parObj={channel:400,amount:money,userId:playerDataMgr.getMyUID(),packageId:accountMgr.getPackageId()},parStr=JSON.stringify(parObj),path=netTool.getPathByKey("rechargeBACCARATYYYUrl");netTool.createJsonHttpRequest(path,parStr,this,function(data){loadingUI.hide(),successFun&&successFun.call(caller,data)},function(status){loadingUI.hide(),topMessage.post(" status "+status)})},tryRechargeBindingr_YYY:function(cardNum,cardName,Id,phone,caller,successFun,failFun){var parObj={account_no:cardNum,account_name:cardName,account_id_card:Id,mobile:phone,userId:playerDataMgr.getMyUID()},parStr=JSON.stringify(parObj),path=netTool.getPathByKey("rechargeBACCARATYYYBindUrl");netTool.createJsonHttpRequest(path,parStr,this,function(data){var retData=JSON.parse(data);if(retData.result==ERROR_CODE.OK){var info={accountNo:retData.data.account_no,accountName:retData.data.account_name,accountId:retData.data.account_id_card,phoneNumber:retData.data.mobile,contractId:retData.data.contractId,applyId:retData.data.applyId};playerDataMgr.bankCardInfoMapAdd(info),successFun&&(gbx.log("tryRechargeBindingr_YYY ==successFun"),successFun.call(caller,retData.data.account_no))}else failFun&&failFun.call(caller,ERROR_CODE_DES[retData.result])},function(status){failFun&&failFun.call(caller," status "+status)},!1)},tryRecharge_YYY:function(apply_id,contract_id,amount,caller,successFun){var parObj={apply_id:apply_id,contract_id:contract_id,amount:amount,userId:playerDataMgr.getMyUID(),packageId:accountMgr.getPackageId()},parStr=JSON.stringify(parObj),path=netTool.getPathByKey("rechargeBACCARATYYY400Url");netTool.createJsonHttpRequest(path,parStr,this,function(data){var retData=JSON.parse(data);retData.result==ERROR_CODE.OK?successFun&&successFun.call(caller,retData):topMessage.post(ERROR_CODE_DES[retData.result])},function(status){topMessage.post(" status "+status)})},tryRechargeVerifyCode_YYY:function(transaction_id,check_code,caller,callback){var parObj={transaction_id:transaction_id,check_code:check_code,userId:playerDataMgr.getMyUID()},parStr=JSON.stringify(parObj),path=netTool.getPathByKey("rechargeBACCARATYYYVerifyCodeUrl");netTool.createJsonHttpRequest(path,parStr,this,function(data){var retData=JSON.parse(data);retData.result==ERROR_CODE.OK?(topMessage.post(uiLocallization.verify_code_desc),callback&&callback.call(caller)):topMessage.post(ERROR_CODE_DES[retData.result])},function(status){topMessage.post(" status "+status)})},tryRemoveBankCard_YYY:function(accountNo,caller,successFun){var sendMsg=gtea.protobuf.encode("BaccaratRemoveBankCardReq",{accountNo:accountNo});server.requestToGame(CMD.BaccaratRemoveBankCard,sendMsg,this,function(errorcode,data){errorcode==ERROR_CODE.OK?successFun&&successFun.call(caller):topMessage.post(ERROR_CODE_DES[data.result])})}};return function(){hubs.subscribe("platform.platform_manager",verification)}(),platformManager}),gbx.define("sp/dummy",["conf/system","gbx/net/connector","comm/helper/scene_mgr","comm/ui/connect_loading","gbx/device","gbx/util"],function(sys,server,sceneMgr,loading,device,util){return{init:function(callback){callback&&callback()},get specLogin(){return!1},get specPurchase(){return!1},setLoginSuccessCallback:function(context,handler){},startLogin:function(){},logout:function(){},get canLogout(){return!0},purchase:function(data,success,fail){}}}),gbx.require.queue(["conf/system","gbx/render/stage","gbx/render/loader","gbx/debug","gbx/bridge","gbx/hubs","gbx/render/display/sprite","comm/helper/scene_mgr","comm/helper/sound_mgr","gbx/net/msg_receiver","gbx/device"],function(sys,stage,loader,debug,bridge,hub,Sprite,sceneMgr,soundMgr,msgReceiver,device){stage.initStageWithSize(sys.width,sys.height),"web"!==bridge.getPlatform()?debug.printLogSp():debug.printLog(),stage.setFrameSpeed(stage.FRAME_SPEED.SLOW),stage.setScaleMode(sys.scale),stage.setAlignment(sys.align),stage.setVerticalAligmnent(sys.valign);var os=bridge.detectOS();-1!=os.indexOf("Win")||-1!=os.indexOf("Mac")?stage.setOrientation("horizontal"):stage.setOrientation(sys.orientation);for(var webglCheckContextNames=["webgl","experimental-webgl","moz-webgl","webkit-3d"],webglCheckPassed=!1,i=0;i<webglCheckContextNames.length;i++)if(stage.getContext(webglCheckContextNames[i])){webglCheckPassed=!0;break}webglCheckPassed||alert("您的浏览器不支持WebGL或没有开启WebGL功能。"),gtea.protobuf.addProtoAsync("BaccaratPack.proto"),loader.loadOnce(["assets/major/common/loading/clouddownload.png","assets/major/common/loading/loadingbg.png",{url:sys.fileHashTable,type:"json"}],this,function(){loader.setFileHashTable(loader.get(sys.fileHashTable)),sceneMgr.quietSwitchTo("login",!0,!1)}),soundMgr.unlock(),document.addEventListener("gamepause",function(e){document.gamePause=e.detail,e.detail?(stage.renderingEnabled=!1,"iOS"!==device.os.name&&soundMgr.pause()):(stage.renderingEnabled=!0,"iOS"!==device.os.name&&soundMgr.resume()),hub.publish("global.game_status.pause"),document.gamePause||(document.gamePauseInGame=!1)},!1),document.addEventListener("visibilitychange",function(e){var isHide="hidden"===document.visibilityState;if("IE"!==device.browser.name&&"CustomEvent"in window){var evt=new CustomEvent("gamepause",{detail:isHide});document.dispatchEvent(evt)}else(evt=document.createEvent("CustomEvent")).initCustomEvent("gamepause",!0,!0,isHide),document.dispatchEvent(evt)},!1),"Mac OS"===device.os.name&&(window.onbeforeunload=function(e){return"你确定要退出游戏吗"})});